var zC=Object.create;var Vr=Object.defineProperty;var $C=Object.getOwnPropertyDescriptor;var YC=Object.getOwnPropertyNames;var JC=Object.getPrototypeOf,KC=Object.prototype.hasOwnProperty;var XC=(e,t,n)=>t in e?Vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zr=(e,t)=>()=>(e&&(t=e(e=0)),t);var vn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ue=(e,t)=>{for(var n in t)Vr(e,n,{get:t[n],enumerable:!0})},og=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of YC(t))!KC.call(e,o)&&o!==n&&Vr(e,o,{get:()=>t[o],enumerable:!(i=$C(t,o))||i.enumerable});return e};var K=(e,t,n)=>(n=e!=null?zC(JC(e)):{},og(t||!e||!e.__esModule?Vr(n,"default",{value:e,enumerable:!0}):n,e)),QC=e=>og(Vr({},"__esModule",{value:!0}),e);var Fc=(e,t,n)=>(XC(e,typeof t!="symbol"?t+"":t,n),n);var hg=vn(X=>{"use strict";var Gc=Symbol.for("react.transitional.element"),ZC=Symbol.for("react.portal"),WC=Symbol.for("react.fragment"),jC=Symbol.for("react.strict_mode"),e_=Symbol.for("react.profiler"),t_=Symbol.for("react.consumer"),n_=Symbol.for("react.context"),i_=Symbol.for("react.forward_ref"),o_=Symbol.for("react.suspense"),r_=Symbol.for("react.memo"),ug=Symbol.for("react.lazy"),s_=Symbol.for("react.activity"),rg=Symbol.iterator;function a_(e){return e===null||typeof e!="object"?null:(e=rg&&e[rg]||e["@@iterator"],typeof e=="function"?e:null)}var cg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fg=Object.assign,dg={};function wo(e,t,n){this.props=e,this.context=t,this.refs=dg,this.updater=n||cg}wo.prototype.isReactComponent={};wo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pg(){}pg.prototype=wo.prototype;function qc(e,t,n){this.props=e,this.context=t,this.refs=dg,this.updater=n||cg}var Bc=qc.prototype=new pg;Bc.constructor=qc;fg(Bc,wo.prototype);Bc.isPureReactComponent=!0;var sg=Array.isArray;function Hc(){}var xe={H:null,A:null,T:null,S:null},mg=Object.prototype.hasOwnProperty;function Vc(e,t,n){var i=n.ref;return{$$typeof:Gc,type:e,key:t,ref:i!==void 0?i:null,props:n}}function l_(e,t){return Vc(e.type,t,e.props)}function zc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gc}function u_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ag=/\/+/g;function Oc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?u_(""+e.key):t.toString(36)}function c_(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Hc,Hc):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function _o(e,t,n,i,o){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"bigint":case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Gc:case ZC:s=!0;break;case ug:return s=e._init,_o(s(e._payload),t,n,i,o)}}if(s)return o=o(e),s=i===""?"."+Oc(e,0):i,sg(o)?(n="",s!=null&&(n=s.replace(ag,"$&/")+"/"),_o(o,t,n,"",function(c){return c})):o!=null&&(zc(o)&&(o=l_(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(ag,"$&/")+"/")+s)),t.push(o)),1;s=0;var a=i===""?".":i+":";if(sg(e))for(var l=0;l<e.length;l++)i=e[l],r=a+Oc(i,l),s+=_o(i,t,n,r,o);else if(l=a_(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,r=a+Oc(i,l++),s+=_o(i,t,n,r,o);else if(r==="object"){if(typeof e.then=="function")return _o(c_(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function ga(e,t,n){if(e==null)return e;var i=[],o=0;return _o(e,i,"","",function(r){return t.call(n,r,o++)}),i}function f_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lg=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},d_={map:ga,forEach:function(e,t,n){ga(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ga(e,function(){t++}),t},toArray:function(e){return ga(e,function(t){return t})||[]},only:function(e){if(!zc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Activity=s_;X.Children=d_;X.Component=wo;X.Fragment=WC;X.Profiler=e_;X.PureComponent=qc;X.StrictMode=jC;X.Suspense=o_;X.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe;X.__COMPILER_RUNTIME={__proto__:null,c:function(e){return xe.H.useMemoCache(e)}};X.cache=function(e){return function(){return e.apply(null,arguments)}};X.cacheSignal=function(){return null};X.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=fg({},e.props),o=e.key;if(t!=null)for(r in t.key!==void 0&&(o=""+t.key),t)!mg.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(i[r]=t[r]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var s=Array(r),a=0;a<r;a++)s[a]=arguments[a+2];i.children=s}return Vc(e.type,o,i)};X.createContext=function(e){return e={$$typeof:n_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:t_,_context:e},e};X.createElement=function(e,t,n){var i,o={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)mg.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];o.children=a}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)o[i]===void 0&&(o[i]=s[i]);return Vc(e,r,o)};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:i_,render:e}};X.isValidElement=zc;X.lazy=function(e){return{$$typeof:ug,_payload:{_status:-1,_result:e},_init:f_}};X.memo=function(e,t){return{$$typeof:r_,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=xe.T,n={};xe.T=n;try{var i=e(),o=xe.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Hc,lg)}catch(r){lg(r)}finally{t!==null&&n.types!==null&&(t.types=n.types),xe.T=t}};X.unstable_useCacheRefresh=function(){return xe.H.useCacheRefresh()};X.use=function(e){return xe.H.use(e)};X.useActionState=function(e,t,n){return xe.H.useActionState(e,t,n)};X.useCallback=function(e,t){return xe.H.useCallback(e,t)};X.useContext=function(e){return xe.H.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e,t){return xe.H.useDeferredValue(e,t)};X.useEffect=function(e,t){return xe.H.useEffect(e,t)};X.useEffectEvent=function(e){return xe.H.useEffectEvent(e)};X.useId=function(){return xe.H.useId()};X.useImperativeHandle=function(e,t,n){return xe.H.useImperativeHandle(e,t,n)};X.useInsertionEffect=function(e,t){return xe.H.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return xe.H.useLayoutEffect(e,t)};X.useMemo=function(e,t){return xe.H.useMemo(e,t)};X.useOptimistic=function(e,t){return xe.H.useOptimistic(e,t)};X.useReducer=function(e,t,n){return xe.H.useReducer(e,t,n)};X.useRef=function(e){return xe.H.useRef(e)};X.useState=function(e){return xe.H.useState(e)};X.useSyncExternalStore=function(e,t,n){return xe.H.useSyncExternalStore(e,t,n)};X.useTransition=function(){return xe.H.useTransition()};X.version="19.2.3"});var qt=vn((YF,gg)=>{"use strict";gg.exports=hg()});var wg=vn(be=>{"use strict";function Kc(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,o=e[i];if(0<ya(o,t))e[i]=t,e[n]=o,n=i;else break e}}function Sn(e){return e.length===0?null:e[0]}function Sa(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length,r=o>>>1;i<r;){var s=2*(i+1)-1,a=e[s],l=s+1,c=e[l];if(0>ya(a,n))l<o&&0>ya(c,a)?(e[i]=c,e[l]=n,i=l):(e[i]=a,e[s]=n,i=s);else if(l<o&&0>ya(c,n))e[i]=c,e[l]=n,i=l;else break e}}return t}function ya(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}be.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(yg=performance,be.unstable_now=function(){return yg.now()}):($c=Date,vg=$c.now(),be.unstable_now=function(){return $c.now()-vg});var yg,$c,vg,Un=[],li=[],p_=1,Bt=null,at=3,Xc=!1,$r=!1,Yr=!1,Qc=!1,xg=typeof setTimeout=="function"?setTimeout:null,Ag=typeof clearTimeout=="function"?clearTimeout:null,Sg=typeof setImmediate<"u"?setImmediate:null;function va(e){for(var t=Sn(li);t!==null;){if(t.callback===null)Sa(li);else if(t.startTime<=e)Sa(li),t.sortIndex=t.expirationTime,Kc(Un,t);else break;t=Sn(li)}}function Zc(e){if(Yr=!1,va(e),!$r)if(Sn(Un)!==null)$r=!0,No||(No=!0,bo());else{var t=Sn(li);t!==null&&Wc(Zc,t.startTime-e)}}var No=!1,Jr=-1,Eg=5,Cg=-1;function _g(){return Qc?!0:!(be.unstable_now()-Cg<Eg)}function Yc(){if(Qc=!1,No){var e=be.unstable_now();Cg=e;var t=!0;try{e:{$r=!1,Yr&&(Yr=!1,Ag(Jr),Jr=-1),Xc=!0;var n=at;try{t:{for(va(e),Bt=Sn(Un);Bt!==null&&!(Bt.expirationTime>e&&_g());){var i=Bt.callback;if(typeof i=="function"){Bt.callback=null,at=Bt.priorityLevel;var o=i(Bt.expirationTime<=e);if(e=be.unstable_now(),typeof o=="function"){Bt.callback=o,va(e),t=!0;break t}Bt===Sn(Un)&&Sa(Un),va(e)}else Sa(Un);Bt=Sn(Un)}if(Bt!==null)t=!0;else{var r=Sn(li);r!==null&&Wc(Zc,r.startTime-e),t=!1}}break e}finally{Bt=null,at=n,Xc=!1}t=void 0}}finally{t?bo():No=!1}}}var bo;typeof Sg=="function"?bo=function(){Sg(Yc)}:typeof MessageChannel<"u"?(Jc=new MessageChannel,Tg=Jc.port2,Jc.port1.onmessage=Yc,bo=function(){Tg.postMessage(null)}):bo=function(){xg(Yc,0)};var Jc,Tg;function Wc(e,t){Jr=xg(function(){e(be.unstable_now())},t)}be.unstable_IdlePriority=5;be.unstable_ImmediatePriority=1;be.unstable_LowPriority=4;be.unstable_NormalPriority=3;be.unstable_Profiling=null;be.unstable_UserBlockingPriority=2;be.unstable_cancelCallback=function(e){e.callback=null};be.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Eg=0<e?Math.floor(1e3/e):5};be.unstable_getCurrentPriorityLevel=function(){return at};be.unstable_next=function(e){switch(at){case 1:case 2:case 3:var t=3;break;default:t=at}var n=at;at=t;try{return e()}finally{at=n}};be.unstable_requestPaint=function(){Qc=!0};be.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=at;at=e;try{return t()}finally{at=n}};be.unstable_scheduleCallback=function(e,t,n){var i=be.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?i+n:i):n=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=n+o,e={id:p_++,callback:t,priorityLevel:e,startTime:n,expirationTime:o,sortIndex:-1},n>i?(e.sortIndex=n,Kc(li,e),Sn(Un)===null&&e===Sn(li)&&(Yr?(Ag(Jr),Jr=-1):Yr=!0,Wc(Zc,n-i))):(e.sortIndex=o,Kc(Un,e),$r||Xc||($r=!0,No||(No=!0,bo()))),e};be.unstable_shouldYield=_g;be.unstable_wrapCallback=function(e){var t=at;return function(){var n=at;at=t;try{return e.apply(this,arguments)}finally{at=n}}}});var Ng=vn((KF,bg)=>{"use strict";bg.exports=wg()});var Ig=vn(dt=>{"use strict";var m_=qt();function Rg(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ui(){}var ft={d:{f:ui,r:function(){throw Error(Rg(522))},D:ui,C:ui,L:ui,m:ui,X:ui,S:ui,M:ui},p:0,findDOMNode:null},h_=Symbol.for("react.portal");function g_(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h_,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Kr=m_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ta(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft;dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Rg(299));return g_(e,t,null,n)};dt.flushSync=function(e){var t=Kr.T,n=ft.p;try{if(Kr.T=null,ft.p=2,e)return e()}finally{Kr.T=t,ft.p=n,ft.d.f()}};dt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ft.d.C(e,t))};dt.prefetchDNS=function(e){typeof e=="string"&&ft.d.D(e)};dt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Ta(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ft.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:r}):n==="script"&&ft.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};dt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Ta(t.as,t.crossOrigin);ft.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ft.d.M(e)};dt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Ta(n,t.crossOrigin);ft.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};dt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Ta(t.as,t.crossOrigin);ft.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ft.d.m(e)};dt.requestFormReset=function(e){ft.d.r(e)};dt.unstable_batchedUpdates=function(e,t){return e(t)};dt.useFormState=function(e,t,n){return Kr.H.useFormState(e,t,n)};dt.useFormStatus=function(){return Kr.H.useHostTransitionStatus()};dt.version="19.2.3"});var Dg=vn((QF,kg)=>{"use strict";function Mg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mg)}catch(e){console.error(e)}}Mg(),kg.exports=Ig()});var $S=vn($l=>{"use strict";var Ve=Ng(),rv=qt(),y_=Dg();function b(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function sv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Us(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function av(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lv(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ug(e){if(Us(e)!==e)throw Error(b(188))}function v_(e){var t=e.alternate;if(!t){if(t=Us(e),t===null)throw Error(b(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var r=o.alternate;if(r===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===n)return Ug(o),e;if(r===i)return Ug(o),t;r=r.sibling}throw Error(b(188))}if(n.return!==i.return)n=o,i=r;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,i=r;break}if(a===i){s=!0,i=o,n=r;break}a=a.sibling}if(!s){for(a=r.child;a;){if(a===n){s=!0,n=r,i=o;break}if(a===i){s=!0,i=r,n=o;break}a=a.sibling}if(!s)throw Error(b(189))}}if(n.alternate!==i)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?e:t}function uv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=uv(e),t!==null)return t;e=e.sibling}return null}var Ce=Object.assign,S_=Symbol.for("react.element"),xa=Symbol.for("react.transitional.element"),ns=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),cv=Symbol.for("react.strict_mode"),Df=Symbol.for("react.profiler"),fv=Symbol.for("react.consumer"),Bn=Symbol.for("react.context"),Nd=Symbol.for("react.forward_ref"),Uf=Symbol.for("react.suspense"),Lf=Symbol.for("react.suspense_list"),Rd=Symbol.for("react.memo"),ci=Symbol.for("react.lazy");Symbol.for("react.scope");var Pf=Symbol.for("react.activity");Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var T_=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var Lg=Symbol.iterator;function Xr(e){return e===null||typeof e!="object"?null:(e=Lg&&e[Lg]||e["@@iterator"],typeof e=="function"?e:null)}var x_=Symbol.for("react.client.reference");function Ff(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===x_?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uo:return"Fragment";case Df:return"Profiler";case cv:return"StrictMode";case Uf:return"Suspense";case Lf:return"SuspenseList";case Pf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ns:return"Portal";case Bn:return e.displayName||"Context";case fv:return(e._context.displayName||"Context")+".Consumer";case Nd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rd:return t=e.displayName||null,t!==null?t:Ff(e.type)||"Memo";case ci:t=e._payload,e=e._init;try{return Ff(e(t))}catch{}}return null}var is=Array.isArray,$=rv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=y_.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ki={pending:!1,data:null,method:null,action:null},Of=[],Lo=-1;function Cn(e){return{current:e}}function Ze(e){0>Lo||(e.current=Of[Lo],Of[Lo]=null,Lo--)}function Te(e,t){Lo++,Of[Lo]=e.current,e.current=t}var En=Cn(null),Ts=Cn(null),xi=Cn(null),el=Cn(null);function tl(e,t){switch(Te(xi,t),Te(Ts,e),Te(En,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?By(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=By(t),e=MS(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ze(En),Te(En,e)}function jo(){Ze(En),Ze(Ts),Ze(xi)}function Hf(e){e.memoizedState!==null&&Te(el,e);var t=En.current,n=MS(t,e.type);t!==n&&(Te(Ts,e),Te(En,n))}function nl(e){Ts.current===e&&(Ze(En),Ze(Ts)),el.current===e&&(Ze(el),Ms._currentValue=Ki)}var jc,Pg;function zi(e){if(jc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jc=t&&t[1]||"",Pg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jc+e+Pg}var ef=!1;function tf(e,t){if(!e||ef)return"";ef=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(h){var m=h}Reflect.construct(e,[],p)}else{try{p.call()}catch(h){m=h}e.call(p.prototype)}}else{try{throw Error()}catch(h){m=h}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),s=r[0],a=r[1];if(s&&a){var l=s.split(`
`),c=a.split(`
`);for(o=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(i===l.length||o===c.length)for(i=l.length-1,o=c.length-1;1<=i&&0<=o&&l[i]!==c[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==c[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==c[o]){var d=`
`+l[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=o);break}}}finally{ef=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?zi(n):""}function A_(e,t){switch(e.tag){case 26:case 27:case 5:return zi(e.type);case 16:return zi("Lazy");case 13:return e.child!==t&&t!==null?zi("Suspense Fallback"):zi("Suspense");case 19:return zi("SuspenseList");case 0:case 15:return tf(e.type,!1);case 11:return tf(e.type.render,!1);case 1:return tf(e.type,!0);case 31:return zi("Activity");default:return""}}function Fg(e){try{var t="",n=null;do t+=A_(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Gf=Object.prototype.hasOwnProperty,Id=Ve.unstable_scheduleCallback,nf=Ve.unstable_cancelCallback,E_=Ve.unstable_shouldYield,C_=Ve.unstable_requestPaint,Dt=Ve.unstable_now,__=Ve.unstable_getCurrentPriorityLevel,dv=Ve.unstable_ImmediatePriority,pv=Ve.unstable_UserBlockingPriority,il=Ve.unstable_NormalPriority,w_=Ve.unstable_LowPriority,mv=Ve.unstable_IdlePriority,b_=Ve.log,N_=Ve.unstable_setDisableYieldValue,Ls=null,Ut=null;function gi(e){if(typeof b_=="function"&&N_(e),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Ls,e)}catch{}}var Lt=Math.clz32?Math.clz32:M_,R_=Math.log,I_=Math.LN2;function M_(e){return e>>>=0,e===0?32:31-(R_(e)/I_|0)|0}var Aa=256,Ea=262144,Ca=4194304;function $i(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rl(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,r=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var a=i&134217727;return a!==0?(i=a&~r,i!==0?o=$i(i):(s&=a,s!==0?o=$i(s):n||(n=a&~e,n!==0&&(o=$i(n))))):(a=i&~r,a!==0?o=$i(a):s!==0?o=$i(s):n||(n=i&~e,n!==0&&(o=$i(n)))),o===0?0:t!==0&&t!==o&&(t&r)===0&&(r=o&-o,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:o}function Ps(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function k_(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hv(){var e=Ca;return Ca<<=1,(Ca&62914560)===0&&(Ca=4194304),e}function of(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fs(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function D_(e,t,n,i,o,r){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var d=31-Lt(n),p=1<<d;a[d]=0,l[d]=-1;var m=c[d];if(m!==null)for(c[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~p}i!==0&&gv(e,i,0),r!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=r&~(s&~t))}function gv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Lt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function yv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Lt(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function vv(e,t){var n=t&-t;return n=(n&42)!==0?1:Md(n),(n&(e.suspendedLanes|t))!==0?0:n}function Md(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function kd(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Sv(){var e=le.p;return e!==0?e:(e=window.event,e===void 0?32:BS(e.type))}function Og(e,t){var n=le.p;try{return le.p=e,t()}finally{le.p=n}}var Ui=Math.random().toString(36).slice(2),tt="__reactFiber$"+Ui,At="__reactProps$"+Ui,cr="__reactContainer$"+Ui,qf="__reactEvents$"+Ui,U_="__reactListeners$"+Ui,L_="__reactHandles$"+Ui,Hg="__reactResources$"+Ui,Os="__reactMarker$"+Ui;function Dd(e){delete e[tt],delete e[At],delete e[qf],delete e[U_],delete e[L_]}function Po(e){var t=e[tt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cr]||n[tt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Jy(e);e!==null;){if(n=e[tt])return n;e=Jy(e)}return t}e=n,n=e.parentNode}return null}function fr(e){if(e=e[tt]||e[cr]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function os(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(b(33))}function Yo(e){var t=e[Hg];return t||(t=e[Hg]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qe(e){e[Os]=!0}var Tv=new Set,xv={};function oo(e,t){er(e,t),er(e+"Capture",t)}function er(e,t){for(xv[e]=t,e=0;e<t.length;e++)Tv.add(t[e])}var P_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gg={},qg={};function F_(e){return Gf.call(qg,e)?!0:Gf.call(Gg,e)?!1:P_.test(e)?qg[e]=!0:(Gg[e]=!0,!1)}function Ha(e,t,n){if(F_(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function _a(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ln(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Av(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function O_(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,r=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){n=""+s,r.call(this,s)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bf(e){if(!e._valueTracker){var t=Av(e)?"checked":"value";e._valueTracker=O_(e,t,""+e[t])}}function Ev(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Av(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var H_=/[\n"\\]/g;function Jt(e){return e.replace(H_,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Vf(e,t,n,i,o,r,s,a){e.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.type=s:e.removeAttribute("type"),t!=null?s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+zt(t)):e.value!==""+zt(t)&&(e.value=""+zt(t)):s!=="submit"&&s!=="reset"||e.removeAttribute("value"),t!=null?zf(e,s,zt(t)):n!=null?zf(e,s,zt(n)):i!=null&&e.removeAttribute("value"),o==null&&r!=null&&(e.defaultChecked=!!r),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+zt(a):e.removeAttribute("name")}function Cv(e,t,n,i,o,r,s,a){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Bf(e);return}n=n!=null?""+zt(n):"",t=t!=null?""+zt(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.name=s),Bf(e)}function zf(e,t,n){t==="number"&&ol(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Jo(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+zt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function _v(e,t,n){if(t!=null&&(t=""+zt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+zt(n):""}function wv(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(b(92));if(is(i)){if(1<i.length)throw Error(b(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=zt(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Bf(e)}function tr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var G_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bg(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||G_.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function bv(e,t,n){if(t!=null&&typeof t!="object")throw Error(b(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&Bg(e,o,i)}else for(var r in t)t.hasOwnProperty(r)&&Bg(e,r,t[r])}function Ud(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),B_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ga(e){return B_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Vn(){}var $f=null;function Ld(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fo=null,Ko=null;function Vg(e){var t=fr(e);if(t&&(e=t.stateNode)){var n=e[At]||null;e:switch(e=t.stateNode,t.type){case"input":if(Vf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Jt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[At]||null;if(!o)throw Error(b(90));Vf(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Ev(i)}break e;case"textarea":_v(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Jo(e,!!n.multiple,t,!1)}}}var rf=!1;function Nv(e,t,n){if(rf)return e(t,n);rf=!0;try{var i=e(t);return i}finally{if(rf=!1,(Fo!==null||Ko!==null)&&(ql(),Fo&&(t=Fo,e=Ko,Ko=Fo=null,Vg(t),e)))for(t=0;t<e.length;t++)Vg(e[t])}}function xs(e,t){var n=e.stateNode;if(n===null)return null;var i=n[At]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(b(231,t,typeof n));return n}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yf=!1;if(Kn)try{Ro={},Object.defineProperty(Ro,"passive",{get:function(){Yf=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Yf=!1}var Ro,yi=null,Pd=null,qa=null;function Rv(){if(qa)return qa;var e,t=Pd,n=t.length,i,o="value"in yi?yi.value:yi.textContent,r=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(i=1;i<=s&&t[n-i]===o[r-i];i++);return qa=o.slice(e,1<i?1-i:void 0)}function Ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wa(){return!0}function zg(){return!1}function Et(e){function t(n,i,o,r,s){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=r,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?wa:zg,this.isPropagationStopped=zg,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),t}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=Et(ro),Hs=Ce({},ro,{view:0,detail:0}),V_=Et(Hs),sf,af,Qr,Ml=Ce({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(sf=e.screenX-Qr.screenX,af=e.screenY-Qr.screenY):af=sf=0,Qr=e),sf)},movementY:function(e){return"movementY"in e?e.movementY:af}}),$g=Et(Ml),z_=Ce({},Ml,{dataTransfer:0}),$_=Et(z_),Y_=Ce({},Hs,{relatedTarget:0}),lf=Et(Y_),J_=Ce({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),K_=Et(J_),X_=Ce({},ro,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Q_=Et(X_),Z_=Ce({},ro,{data:0}),Yg=Et(Z_),W_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ew={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ew[e])?!!t[e]:!1}function Fd(){return tw}var nw=Ce({},Hs,{key:function(e){if(e.key){var t=W_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?j_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fd,charCode:function(e){return e.type==="keypress"?Ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iw=Et(nw),ow=Ce({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jg=Et(ow),rw=Ce({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fd}),sw=Et(rw),aw=Ce({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),lw=Et(aw),uw=Ce({},Ml,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cw=Et(uw),fw=Ce({},ro,{newState:0,oldState:0}),dw=Et(fw),pw=[9,13,27,32],Od=Kn&&"CompositionEvent"in window,as=null;Kn&&"documentMode"in document&&(as=document.documentMode);var mw=Kn&&"TextEvent"in window&&!as,Iv=Kn&&(!Od||as&&8<as&&11>=as),Kg=String.fromCharCode(32),Xg=!1;function Mv(e,t){switch(e){case"keyup":return pw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oo=!1;function hw(e,t){switch(e){case"compositionend":return kv(t);case"keypress":return t.which!==32?null:(Xg=!0,Kg);case"textInput":return e=t.data,e===Kg&&Xg?null:e;default:return null}}function gw(e,t){if(Oo)return e==="compositionend"||!Od&&Mv(e,t)?(e=Rv(),qa=Pd=yi=null,Oo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Iv&&t.locale!=="ko"?null:t.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yw[e.type]:t==="textarea"}function Dv(e,t,n,i){Fo?Ko?Ko.push(i):Ko=[i]:Fo=i,t=Al(t,"onChange"),0<t.length&&(n=new Il("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ls=null,As=null;function vw(e){NS(e,0)}function kl(e){var t=os(e);if(Ev(t))return e}function Zg(e,t){if(e==="change")return t}var Uv=!1;Kn&&(Kn?(Na="oninput"in document,Na||(uf=document.createElement("div"),uf.setAttribute("oninput","return;"),Na=typeof uf.oninput=="function"),ba=Na):ba=!1,Uv=ba&&(!document.documentMode||9<document.documentMode));var ba,Na,uf;function Wg(){ls&&(ls.detachEvent("onpropertychange",Lv),As=ls=null)}function Lv(e){if(e.propertyName==="value"&&kl(As)){var t=[];Dv(t,As,e,Ld(e)),Nv(vw,t)}}function Sw(e,t,n){e==="focusin"?(Wg(),ls=t,As=n,ls.attachEvent("onpropertychange",Lv)):e==="focusout"&&Wg()}function Tw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kl(As)}function xw(e,t){if(e==="click")return kl(t)}function Aw(e,t){if(e==="input"||e==="change")return kl(t)}function Ew(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ft=typeof Object.is=="function"?Object.is:Ew;function Es(e,t){if(Ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Gf.call(t,o)||!Ft(e[o],t[o]))return!1}return!0}function jg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ey(e,t){var n=jg(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jg(n)}}function Pv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ol(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ol(e.document)}return t}function Hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Cw=Kn&&"documentMode"in document&&11>=document.documentMode,Ho=null,Jf=null,us=null,Kf=!1;function ty(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kf||Ho==null||Ho!==ol(i)||(i=Ho,"selectionStart"in i&&Hd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),us&&Es(us,i)||(us=i,i=Al(Jf,"onSelect"),0<i.length&&(t=new Il("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ho)))}function Vi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Go={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},cf={},Ov={};Kn&&(Ov=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function so(e){if(cf[e])return cf[e];if(!Go[e])return e;var t=Go[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ov)return cf[e]=t[n];return e}var Hv=so("animationend"),Gv=so("animationiteration"),qv=so("animationstart"),_w=so("transitionrun"),ww=so("transitionstart"),bw=so("transitioncancel"),Bv=so("transitionend"),Vv=new Map,Xf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xf.push("scrollEnd");function an(e,t){Vv.set(e,t),oo(t,[e])}var rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Vt=[],qo=0,Gd=0;function Dl(){for(var e=qo,t=Gd=qo=0;t<e;){var n=Vt[t];Vt[t++]=null;var i=Vt[t];Vt[t++]=null;var o=Vt[t];Vt[t++]=null;var r=Vt[t];if(Vt[t++]=null,i!==null&&o!==null){var s=i.pending;s===null?o.next=o:(o.next=s.next,s.next=o),i.pending=o}r!==0&&zv(n,o,r)}}function Ul(e,t,n,i){Vt[qo++]=e,Vt[qo++]=t,Vt[qo++]=n,Vt[qo++]=i,Gd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function qd(e,t,n,i){return Ul(e,t,n,i),sl(e)}function ao(e,t){return Ul(e,null,null,t),sl(e)}function zv(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(o=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,o&&t!==null&&(o=31-Lt(n),e=r.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),r):null}function sl(e){if(50<vs)throw vs=0,gd=null,Error(b(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Bo={};function Nw(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,n,i){return new Nw(e,t,n,i)}function Bd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $n(e,t){var n=e.alternate;return n===null?(n=Mt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function $v(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Va(e,t,n,i,o,r){var s=0;if(i=e,typeof e=="function")Bd(e)&&(s=1);else if(typeof e=="string")s=Mb(e,n,En.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Pf:return e=Mt(31,n,t,o),e.elementType=Pf,e.lanes=r,e;case Uo:return Xi(n.children,o,r,t);case cv:s=8,o|=24;break;case Df:return e=Mt(12,n,t,o|2),e.elementType=Df,e.lanes=r,e;case Uf:return e=Mt(13,n,t,o),e.elementType=Uf,e.lanes=r,e;case Lf:return e=Mt(19,n,t,o),e.elementType=Lf,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Bn:s=10;break e;case fv:s=9;break e;case Nd:s=11;break e;case Rd:s=14;break e;case ci:s=16,i=null;break e}s=29,n=Error(b(130,e===null?"null":typeof e,"")),i=null}return t=Mt(s,n,t,o),t.elementType=e,t.type=i,t.lanes=r,t}function Xi(e,t,n,i){return e=Mt(7,e,i,t),e.lanes=n,e}function ff(e,t,n){return e=Mt(6,e,null,t),e.lanes=n,e}function Yv(e){var t=Mt(18,null,null,0);return t.stateNode=e,t}function df(e,t,n){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ny=new WeakMap;function Kt(e,t){if(typeof e=="object"&&e!==null){var n=ny.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Fg(t)},ny.set(e,t),t)}return{value:e,source:t,stack:Fg(t)}}var Vo=[],zo=0,al=null,Cs=0,$t=[],Yt=0,Ii=null,Tn=1,xn="";function Gn(e,t){Vo[zo++]=Cs,Vo[zo++]=al,al=e,Cs=t}function Jv(e,t,n){$t[Yt++]=Tn,$t[Yt++]=xn,$t[Yt++]=Ii,Ii=e;var i=Tn;e=xn;var o=32-Lt(i)-1;i&=~(1<<o),n+=1;var r=32-Lt(t)+o;if(30<r){var s=o-o%5;r=(i&(1<<s)-1).toString(32),i>>=s,o-=s,Tn=1<<32-Lt(t)+o|n<<o|i,xn=r+e}else Tn=1<<r|n<<o|i,xn=e}function Vd(e){e.return!==null&&(Gn(e,1),Jv(e,1,0))}function zd(e){for(;e===al;)al=Vo[--zo],Vo[zo]=null,Cs=Vo[--zo],Vo[zo]=null;for(;e===Ii;)Ii=$t[--Yt],$t[Yt]=null,xn=$t[--Yt],$t[Yt]=null,Tn=$t[--Yt],$t[Yt]=null}function Kv(e,t){$t[Yt++]=Tn,$t[Yt++]=xn,$t[Yt++]=Ii,Tn=t.id,xn=t.overflow,Ii=e}var nt=null,Ee=null,te=!1,Ai=null,Xt=!1,Qf=Error(b(519));function Mi(e){var t=Error(b(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _s(Kt(t,e)),Qf}function iy(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[tt]=e,t[At]=i,n){case"dialog":Z("cancel",t),Z("close",t);break;case"iframe":case"object":case"embed":Z("load",t);break;case"video":case"audio":for(n=0;n<Rs.length;n++)Z(Rs[n],t);break;case"source":Z("error",t);break;case"img":case"image":case"link":Z("error",t),Z("load",t);break;case"details":Z("toggle",t);break;case"input":Z("invalid",t),Cv(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Z("invalid",t);break;case"textarea":Z("invalid",t),wv(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||IS(t.textContent,n)?(i.popover!=null&&(Z("beforetoggle",t),Z("toggle",t)),i.onScroll!=null&&Z("scroll",t),i.onScrollEnd!=null&&Z("scrollend",t),i.onClick!=null&&(t.onclick=Vn),t=!0):t=!1,t||Mi(e,!0)}function oy(e){for(nt=e.return;nt;)switch(nt.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:nt=nt.return}}function Io(e){if(e!==nt)return!1;if(!te)return oy(e),te=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||xd(e.type,e.memoizedProps)),n=!n),n&&Ee&&Mi(e),oy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));Ee=Yy(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));Ee=Yy(e)}else t===27?(t=Ee,Li(e.type)?(e=_d,_d=null,Ee=e):Ee=t):Ee=nt?Zt(e.stateNode.nextSibling):null;return!0}function ji(){Ee=nt=null,te=!1}function pf(){var e=Ai;return e!==null&&(Tt===null?Tt=e:Tt.push.apply(Tt,e),Ai=null),e}function _s(e){Ai===null?Ai=[e]:Ai.push(e)}var Zf=Cn(null),lo=null,zn=null;function di(e,t,n){Te(Zf,t._currentValue),t._currentValue=n}function Yn(e){e._currentValue=Zf.current,Ze(Zf)}function Wf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function jf(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var r=o.dependencies;if(r!==null){var s=o.child;r=r.firstContext;e:for(;r!==null;){var a=r;r=o;for(var l=0;l<t.length;l++)if(a.context===t[l]){r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),Wf(r.return,n,e),i||(s=null);break e}r=a.next}}else if(o.tag===18){if(s=o.return,s===null)throw Error(b(341));s.lanes|=n,r=s.alternate,r!==null&&(r.lanes|=n),Wf(s,n,e),s=null}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}}function dr(e,t,n,i){e=null;for(var o=t,r=!1;o!==null;){if(!r){if((o.flags&524288)!==0)r=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var s=o.alternate;if(s===null)throw Error(b(387));if(s=s.memoizedProps,s!==null){var a=o.type;Ft(o.pendingProps.value,s.value)||(e!==null?e.push(a):e=[a])}}else if(o===el.current){if(s=o.alternate,s===null)throw Error(b(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Ms):e=[Ms])}o=o.return}e!==null&&jf(t,e,n,i),t.flags|=262144}function ll(e){for(e=e.firstContext;e!==null;){if(!Ft(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function eo(e){lo=e,zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function it(e){return Xv(lo,e)}function Ra(e,t){return lo===null&&eo(e),Xv(e,t)}function Xv(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},zn===null){if(e===null)throw Error(b(308));zn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else zn=zn.next=t;return n}var Rw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Iw=Ve.unstable_scheduleCallback,Mw=Ve.unstable_NormalPriority,Fe={$$typeof:Bn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $d(){return{controller:new Rw,data:new Map,refCount:0}}function Gs(e){e.refCount--,e.refCount===0&&Iw(Mw,function(){e.controller.abort()})}var cs=null,ed=0,nr=0,Xo=null;function kw(e,t){if(cs===null){var n=cs=[];ed=0,nr=gp(),Xo={status:"pending",value:void 0,then:function(i){n.push(i)}}}return ed++,t.then(ry,ry),t}function ry(){if(--ed===0&&cs!==null){Xo!==null&&(Xo.status="fulfilled");var e=cs;cs=null,nr=0,Xo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Dw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var sy=$.S;$.S=function(e,t){uS=Dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&kw(e,t),sy!==null&&sy(e,t)};var Qi=Cn(null);function Yd(){var e=Qi.current;return e!==null?e:ve.pooledCache}function za(e,t){t===null?Te(Qi,Qi.current):Te(Qi,t.pool)}function Qv(){var e=Yd();return e===null?null:{parent:Fe._currentValue,pool:e}}var pr=Error(b(460)),Jd=Error(b(474)),Ll=Error(b(542)),ul={then:function(){}};function ay(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Zv(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Vn,Vn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,uy(e),e;default:if(typeof t.status=="string")t.then(Vn,Vn);else{if(e=ve,e!==null&&100<e.shellSuspendCounter)throw Error(b(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,uy(e),e}throw Zi=t,pr}}function Yi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Zi=n,pr):n}}var Zi=null;function ly(){if(Zi===null)throw Error(b(459));var e=Zi;return Zi=null,e}function uy(e){if(e===pr||e===Ll)throw Error(b(483))}var Qo=null,ws=0;function Ia(e){var t=ws;return ws+=1,Qo===null&&(Qo=[]),Zv(Qo,e,t)}function Zr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ma(e,t){throw t.$$typeof===S_?Error(b(525)):(e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Wv(e){function t(y,v){if(e){var T=y.deletions;T===null?(y.deletions=[v],y.flags|=16):T.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function i(y){for(var v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function o(y,v){return y=$n(y,v),y.index=0,y.sibling=null,y}function r(y,v,T){return y.index=T,e?(T=y.alternate,T!==null?(T=T.index,T<v?(y.flags|=67108866,v):T):(y.flags|=67108866,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function a(y,v,T,A){return v===null||v.tag!==6?(v=ff(T,y.mode,A),v.return=y,v):(v=o(v,T),v.return=y,v)}function l(y,v,T,A){var C=T.type;return C===Uo?d(y,v,T.props.children,A,T.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ci&&Yi(C)===v.type)?(v=o(v,T.props),Zr(v,T),v.return=y,v):(v=Va(T.type,T.key,T.props,null,y.mode,A),Zr(v,T),v.return=y,v)}function c(y,v,T,A){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=df(T,y.mode,A),v.return=y,v):(v=o(v,T.children||[]),v.return=y,v)}function d(y,v,T,A,C){return v===null||v.tag!==7?(v=Xi(T,y.mode,A,C),v.return=y,v):(v=o(v,T),v.return=y,v)}function p(y,v,T){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=ff(""+v,y.mode,T),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xa:return T=Va(v.type,v.key,v.props,null,y.mode,T),Zr(T,v),T.return=y,T;case ns:return v=df(v,y.mode,T),v.return=y,v;case ci:return v=Yi(v),p(y,v,T)}if(is(v)||Xr(v))return v=Xi(v,y.mode,T,null),v.return=y,v;if(typeof v.then=="function")return p(y,Ia(v),T);if(v.$$typeof===Bn)return p(y,Ra(y,v),T);Ma(y,v)}return null}function m(y,v,T,A){var C=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return C!==null?null:a(y,v,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case xa:return T.key===C?l(y,v,T,A):null;case ns:return T.key===C?c(y,v,T,A):null;case ci:return T=Yi(T),m(y,v,T,A)}if(is(T)||Xr(T))return C!==null?null:d(y,v,T,A,null);if(typeof T.then=="function")return m(y,v,Ia(T),A);if(T.$$typeof===Bn)return m(y,v,Ra(y,T),A);Ma(y,T)}return null}function h(y,v,T,A,C){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return y=y.get(T)||null,a(v,y,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case xa:return y=y.get(A.key===null?T:A.key)||null,l(v,y,A,C);case ns:return y=y.get(A.key===null?T:A.key)||null,c(v,y,A,C);case ci:return A=Yi(A),h(y,v,T,A,C)}if(is(A)||Xr(A))return y=y.get(T)||null,d(v,y,A,C,null);if(typeof A.then=="function")return h(y,v,T,Ia(A),C);if(A.$$typeof===Bn)return h(y,v,T,Ra(v,A),C);Ma(v,A)}return null}function g(y,v,T,A){for(var C=null,I=null,_=v,M=v=0,R=null;_!==null&&M<T.length;M++){_.index>M?(R=_,_=null):R=_.sibling;var N=m(y,_,T[M],A);if(N===null){_===null&&(_=R);break}e&&_&&N.alternate===null&&t(y,_),v=r(N,v,M),I===null?C=N:I.sibling=N,I=N,_=R}if(M===T.length)return n(y,_),te&&Gn(y,M),C;if(_===null){for(;M<T.length;M++)_=p(y,T[M],A),_!==null&&(v=r(_,v,M),I===null?C=_:I.sibling=_,I=_);return te&&Gn(y,M),C}for(_=i(_);M<T.length;M++)R=h(_,y,M,T[M],A),R!==null&&(e&&R.alternate!==null&&_.delete(R.key===null?M:R.key),v=r(R,v,M),I===null?C=R:I.sibling=R,I=R);return e&&_.forEach(function(q){return t(y,q)}),te&&Gn(y,M),C}function S(y,v,T,A){if(T==null)throw Error(b(151));for(var C=null,I=null,_=v,M=v=0,R=null,N=T.next();_!==null&&!N.done;M++,N=T.next()){_.index>M?(R=_,_=null):R=_.sibling;var q=m(y,_,N.value,A);if(q===null){_===null&&(_=R);break}e&&_&&q.alternate===null&&t(y,_),v=r(q,v,M),I===null?C=q:I.sibling=q,I=q,_=R}if(N.done)return n(y,_),te&&Gn(y,M),C;if(_===null){for(;!N.done;M++,N=T.next())N=p(y,N.value,A),N!==null&&(v=r(N,v,M),I===null?C=N:I.sibling=N,I=N);return te&&Gn(y,M),C}for(_=i(_);!N.done;M++,N=T.next())N=h(_,y,M,N.value,A),N!==null&&(e&&N.alternate!==null&&_.delete(N.key===null?M:N.key),v=r(N,v,M),I===null?C=N:I.sibling=N,I=N);return e&&_.forEach(function(Se){return t(y,Se)}),te&&Gn(y,M),C}function x(y,v,T,A){if(typeof T=="object"&&T!==null&&T.type===Uo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case xa:e:{for(var C=T.key;v!==null;){if(v.key===C){if(C=T.type,C===Uo){if(v.tag===7){n(y,v.sibling),A=o(v,T.props.children),A.return=y,y=A;break e}}else if(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ci&&Yi(C)===v.type){n(y,v.sibling),A=o(v,T.props),Zr(A,T),A.return=y,y=A;break e}n(y,v);break}else t(y,v);v=v.sibling}T.type===Uo?(A=Xi(T.props.children,y.mode,A,T.key),A.return=y,y=A):(A=Va(T.type,T.key,T.props,null,y.mode,A),Zr(A,T),A.return=y,y=A)}return s(y);case ns:e:{for(C=T.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(y,v.sibling),A=o(v,T.children||[]),A.return=y,y=A;break e}else{n(y,v);break}else t(y,v);v=v.sibling}A=df(T,y.mode,A),A.return=y,y=A}return s(y);case ci:return T=Yi(T),x(y,v,T,A)}if(is(T))return g(y,v,T,A);if(Xr(T)){if(C=Xr(T),typeof C!="function")throw Error(b(150));return T=C.call(T),S(y,v,T,A)}if(typeof T.then=="function")return x(y,v,Ia(T),A);if(T.$$typeof===Bn)return x(y,v,Ra(y,T),A);Ma(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,v!==null&&v.tag===6?(n(y,v.sibling),A=o(v,T),A.return=y,y=A):(n(y,v),A=ff(T,y.mode,A),A.return=y,y=A),s(y)):n(y,v)}return function(y,v,T,A){try{ws=0;var C=x(y,v,T,A);return Qo=null,C}catch(_){if(_===pr||_===Ll)throw _;var I=Mt(29,_,null,y.mode);return I.lanes=A,I.return=y,I}finally{}}}var to=Wv(!0),jv=Wv(!1),fi=!1;function Kd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function td(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ci(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(ae&2)!==0){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=sl(e),zv(e,null,n),t}return Ul(e,i,t,n),sl(e)}function fs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yv(e,n)}}function mf(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?o=r=s:r=r.next=s,n=n.next}while(n!==null);r===null?o=r=t:r=r.next=t}else o=r=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var nd=!1;function ds(){if(nd){var e=Xo;if(e!==null)throw e}}function ps(e,t,n,i){nd=!1;var o=e.updateQueue;fi=!1;var r=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?r=c:s.next=c,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(r!==null){var p=o.baseState;s=0,d=c=l=null,a=r;do{var m=a.lane&-536870913,h=m!==a.lane;if(h?(j&m)===m:(i&m)===m){m!==0&&m===nr&&(nd=!0),d!==null&&(d=d.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,S=a;m=t;var x=n;switch(S.tag){case 1:if(g=S.payload,typeof g=="function"){p=g.call(x,p,m);break e}p=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=S.payload,m=typeof g=="function"?g.call(x,p,m):g,m==null)break e;p=Ce({},p,m);break e;case 2:fi=!0}}m=a.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=o.callbacks,h===null?o.callbacks=[m]:h.push(m))}else h={lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=h,l=p):d=d.next=h,s|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);d===null&&(l=p),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,r===null&&(o.shared.lanes=0),Di|=s,e.lanes=s,e.memoizedState=p}}function e0(e,t){if(typeof e!="function")throw Error(b(191,e));e.call(t)}function t0(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)e0(n[e],t)}var ir=Cn(null),cl=Cn(0);function cy(e,t){e=Wn,Te(cl,e),Te(ir,t),Wn=e|t.baseLanes}function id(){Te(cl,Wn),Te(ir,ir.current)}function Xd(){Wn=cl.current,Ze(ir),Ze(cl)}var Ot=Cn(null),Qt=null;function pi(e){var t=e.alternate;Te(De,De.current&1),Te(Ot,e),Qt===null&&(t===null||ir.current!==null||t.memoizedState!==null)&&(Qt=e)}function od(e){Te(De,De.current),Te(Ot,e),Qt===null&&(Qt=e)}function n0(e){e.tag===22?(Te(De,De.current),Te(Ot,e),Qt===null&&(Qt=e)):mi(e)}function mi(){Te(De,De.current),Te(Ot,Ot.current)}function It(e){Ze(Ot),Qt===e&&(Qt=null),Ze(De)}var De=Cn(0);function fl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ed(n)||Cd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xn=0,Q=null,ge=null,Le=null,dl=!1,Zo=!1,no=!1,pl=0,bs=0,Wo=null,Uw=0;function Ie(){throw Error(b(321))}function Qd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ft(e[n],t[n]))return!1;return!0}function Zd(e,t,n,i,o,r){return Xn=r,Q=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?D0:lp,no=!1,r=n(i,o),no=!1,Zo&&(r=o0(t,n,i,o)),i0(e),r}function i0(e){$.H=Ns;var t=ge!==null&&ge.next!==null;if(Xn=0,Le=ge=Q=null,dl=!1,bs=0,Wo=null,t)throw Error(b(300));e===null||Oe||(e=e.dependencies,e!==null&&ll(e)&&(Oe=!0))}function o0(e,t,n,i){Q=e;var o=0;do{if(Zo&&(Wo=null),bs=0,Zo=!1,25<=o)throw Error(b(301));if(o+=1,Le=ge=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}$.H=U0,r=t(n,i)}while(Zo);return r}function Lw(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?qs(t):t,e=e.useState()[0],(ge!==null?ge.memoizedState:null)!==e&&(Q.flags|=1024),t}function Wd(){var e=pl!==0;return pl=0,e}function jd(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ep(e){if(dl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}dl=!1}Xn=0,Le=ge=Q=null,Zo=!1,bs=pl=0,Wo=null}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Q.memoizedState=Le=e:Le=Le.next=e,Le}function Ue(){if(ge===null){var e=Q.alternate;e=e!==null?e.memoizedState:null}else e=ge.next;var t=Le===null?Q.memoizedState:Le.next;if(t!==null)Le=t,ge=e;else{if(e===null)throw Q.alternate===null?Error(b(467)):Error(b(310));ge=e,e={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},Le===null?Q.memoizedState=Le=e:Le=Le.next=e}return Le}function Pl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qs(e){var t=bs;return bs+=1,Wo===null&&(Wo=[]),e=Zv(Wo,e,t),t=Q,(Le===null?t.memoizedState:Le.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?D0:lp),e}function Fl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qs(e);if(e.$$typeof===Bn)return it(e)}throw Error(b(438,String(e)))}function tp(e){var t=null,n=Q.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Q.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Pl(),Q.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=T_;return t.index++,n}function Qn(e,t){return typeof t=="function"?t(e):t}function $a(e){var t=Ue();return np(t,ge,e)}function np(e,t,n){var i=e.queue;if(i===null)throw Error(b(311));i.lastRenderedReducer=n;var o=e.baseQueue,r=i.pending;if(r!==null){if(o!==null){var s=o.next;o.next=r.next,r.next=s}t.baseQueue=o=r,i.pending=null}if(r=e.baseState,o===null)e.memoizedState=r;else{t=o.next;var a=s=null,l=null,c=t,d=!1;do{var p=c.lane&-536870913;if(p!==c.lane?(j&p)===p:(Xn&p)===p){var m=c.revertLane;if(m===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===nr&&(d=!0);else if((Xn&m)===m){c=c.next,m===nr&&(d=!0);continue}else p={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=p,s=r):l=l.next=p,Q.lanes|=m,Di|=m;p=c.action,no&&n(r,p),r=c.hasEagerState?c.eagerState:n(r,p)}else m={lane:p,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=m,s=r):l=l.next=m,Q.lanes|=p,Di|=p;c=c.next}while(c!==null&&c!==t);if(l===null?s=r:l.next=a,!Ft(r,e.memoizedState)&&(Oe=!0,d&&(n=Xo,n!==null)))throw n;e.memoizedState=r,e.baseState=s,e.baseQueue=l,i.lastRenderedState=r}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function hf(e){var t=Ue(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,r=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do r=e(r,s.action),s=s.next;while(s!==o);Ft(r,t.memoizedState)||(Oe=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function r0(e,t,n){var i=Q,o=Ue(),r=te;if(r){if(n===void 0)throw Error(b(407));n=n()}else n=t();var s=!Ft((ge||o).memoizedState,n);if(s&&(o.memoizedState=n,Oe=!0),o=o.queue,ip(l0.bind(null,i,o,e),[e]),o.getSnapshot!==t||s||Le!==null&&Le.memoizedState.tag&1){if(i.flags|=2048,or(9,{destroy:void 0},a0.bind(null,i,o,n,t),null),ve===null)throw Error(b(349));r||(Xn&127)!==0||s0(i,t,n)}return n}function s0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Q.updateQueue,t===null?(t=Pl(),Q.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function a0(e,t,n,i){t.value=n,t.getSnapshot=i,u0(t)&&c0(e)}function l0(e,t,n){return n(function(){u0(t)&&c0(e)})}function u0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ft(e,n)}catch{return!0}}function c0(e){var t=ao(e,2);t!==null&&xt(t,e,2)}function rd(e){var t=pt();if(typeof e=="function"){var n=e;if(e=n(),no){gi(!0);try{n()}finally{gi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:e},t}function f0(e,t,n,i){return e.baseState=n,np(e,ge,typeof i=="function"?i:Qn)}function Pw(e,t,n,i,o){if(Hl(e))throw Error(b(485));if(e=t.action,e!==null){var r={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){r.listeners.push(s)}};$.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,d0(t,r)):(r.next=n.next,t.pending=n.next=r)}}function d0(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var r=$.T,s={};$.T=s;try{var a=n(o,i),l=$.S;l!==null&&l(s,a),fy(e,t,a)}catch(c){sd(e,t,c)}finally{r!==null&&s.types!==null&&(r.types=s.types),$.T=r}}else try{r=n(o,i),fy(e,t,r)}catch(c){sd(e,t,c)}}function fy(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){dy(e,t,i)},function(i){return sd(e,t,i)}):dy(e,t,n)}function dy(e,t,n){t.status="fulfilled",t.value=n,p0(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,d0(e,n)))}function sd(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,p0(t),t=t.next;while(t!==i)}e.action=null}function p0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function m0(e,t){return t}function py(e,t){if(te){var n=ve.formState;if(n!==null){e:{var i=Q;if(te){if(Ee){t:{for(var o=Ee,r=Xt;o.nodeType!==8;){if(!r){o=null;break t}if(o=Zt(o.nextSibling),o===null){o=null;break t}}r=o.data,o=r==="F!"||r==="F"?o:null}if(o){Ee=Zt(o.nextSibling),i=o.data==="F!";break e}}Mi(i)}i=!1}i&&(t=n[0])}}return n=pt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m0,lastRenderedState:t},n.queue=i,n=I0.bind(null,Q,i),i.dispatch=n,i=rd(!1),r=ap.bind(null,Q,!1,i.queue),i=pt(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=Pw.bind(null,Q,o,r,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function my(e){var t=Ue();return h0(t,ge,e)}function h0(e,t,n){if(t=np(e,t,m0)[0],e=$a(Qn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=qs(t)}catch(s){throw s===pr?Ll:s}else i=t;t=Ue();var o=t.queue,r=o.dispatch;return n!==t.memoizedState&&(Q.flags|=2048,or(9,{destroy:void 0},Fw.bind(null,o,n),null)),[i,r,e]}function Fw(e,t){e.action=t}function hy(e){var t=Ue(),n=ge;if(n!==null)return h0(t,n,e);Ue(),t=t.memoizedState,n=Ue();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function or(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=Q.updateQueue,t===null&&(t=Pl(),Q.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function g0(){return Ue().memoizedState}function Ya(e,t,n,i){var o=pt();Q.flags|=e,o.memoizedState=or(1|t,{destroy:void 0},n,i===void 0?null:i)}function Ol(e,t,n,i){var o=Ue();i=i===void 0?null:i;var r=o.memoizedState.inst;ge!==null&&i!==null&&Qd(i,ge.memoizedState.deps)?o.memoizedState=or(t,r,n,i):(Q.flags|=e,o.memoizedState=or(1|t,r,n,i))}function gy(e,t){Ya(8390656,8,e,t)}function ip(e,t){Ol(2048,8,e,t)}function Ow(e){Q.flags|=4;var t=Q.updateQueue;if(t===null)t=Pl(),Q.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function y0(e){var t=Ue().memoizedState;return Ow({ref:t,nextImpl:e}),function(){if((ae&2)!==0)throw Error(b(440));return t.impl.apply(void 0,arguments)}}function v0(e,t){return Ol(4,2,e,t)}function S0(e,t){return Ol(4,4,e,t)}function T0(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function x0(e,t,n){n=n!=null?n.concat([e]):null,Ol(4,4,T0.bind(null,t,e),n)}function op(){}function A0(e,t){var n=Ue();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Qd(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function E0(e,t){var n=Ue();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Qd(t,i[1]))return i[0];if(i=e(),no){gi(!0);try{e()}finally{gi(!1)}}return n.memoizedState=[i,t],i}function rp(e,t,n){return n===void 0||(Xn&1073741824)!==0&&(j&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=fS(),Q.lanes|=e,Di|=e,n)}function C0(e,t,n,i){return Ft(n,t)?n:ir.current!==null?(e=rp(e,n,i),Ft(e,t)||(Oe=!0),e):(Xn&42)===0||(Xn&1073741824)!==0&&(j&261930)===0?(Oe=!0,e.memoizedState=n):(e=fS(),Q.lanes|=e,Di|=e,t)}function _0(e,t,n,i,o){var r=le.p;le.p=r!==0&&8>r?r:8;var s=$.T,a={};$.T=a,ap(e,!1,t,n);try{var l=o(),c=$.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=Dw(l,i);ms(e,t,d,Pt(e))}else ms(e,t,i,Pt(e))}catch(p){ms(e,t,{then:function(){},status:"rejected",reason:p},Pt())}finally{le.p=r,s!==null&&a.types!==null&&(s.types=a.types),$.T=s}}function Hw(){}function ad(e,t,n,i){if(e.tag!==5)throw Error(b(476));var o=w0(e).queue;_0(e,o,t,Ki,n===null?Hw:function(){return b0(e),n(i)})}function w0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ki,baseState:Ki,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:Ki},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function b0(e){var t=w0(e);t.next===null&&(t=e.alternate.memoizedState),ms(e,t.next.queue,{},Pt())}function sp(){return it(Ms)}function N0(){return Ue().memoizedState}function R0(){return Ue().memoizedState}function Gw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Pt();e=Ei(n);var i=Ci(t,e,n);i!==null&&(xt(i,t,n),fs(i,t,n)),t={cache:$d()},e.payload=t;return}t=t.return}}function qw(e,t,n){var i=Pt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Hl(e)?M0(t,n):(n=qd(e,t,n,i),n!==null&&(xt(n,e,i),k0(n,t,i)))}function I0(e,t,n){var i=Pt();ms(e,t,n,i)}function ms(e,t,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hl(e))M0(t,o);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var s=t.lastRenderedState,a=r(s,n);if(o.hasEagerState=!0,o.eagerState=a,Ft(a,s))return Ul(e,t,o,0),ve===null&&Dl(),!1}catch{}finally{}if(n=qd(e,t,o,i),n!==null)return xt(n,e,i),k0(n,t,i),!0}return!1}function ap(e,t,n,i){if(i={lane:2,revertLane:gp(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Hl(e)){if(t)throw Error(b(479))}else t=qd(e,n,i,2),t!==null&&xt(t,e,2)}function Hl(e){var t=e.alternate;return e===Q||t!==null&&t===Q}function M0(e,t){Zo=dl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function k0(e,t,n){if((n&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,yv(e,n)}}var Ns={readContext:it,use:Fl,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie};Ns.useEffectEvent=Ie;var D0={readContext:it,use:Fl,useCallback:function(e,t){return pt().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:gy,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ya(4194308,4,T0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ya(4194308,4,e,t)},useInsertionEffect:function(e,t){Ya(4,2,e,t)},useMemo:function(e,t){var n=pt();t=t===void 0?null:t;var i=e();if(no){gi(!0);try{e()}finally{gi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=pt();if(n!==void 0){var o=n(t);if(no){gi(!0);try{n(t)}finally{gi(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=qw.bind(null,Q,e),[i.memoizedState,e]},useRef:function(e){var t=pt();return e={current:e},t.memoizedState=e},useState:function(e){e=rd(e);var t=e.queue,n=I0.bind(null,Q,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:op,useDeferredValue:function(e,t){var n=pt();return rp(n,e,t)},useTransition:function(){var e=rd(!1);return e=_0.bind(null,Q,e.queue,!0,!1),pt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Q,o=pt();if(te){if(n===void 0)throw Error(b(407));n=n()}else{if(n=t(),ve===null)throw Error(b(349));(j&127)!==0||s0(i,t,n)}o.memoizedState=n;var r={value:n,getSnapshot:t};return o.queue=r,gy(l0.bind(null,i,r,e),[e]),i.flags|=2048,or(9,{destroy:void 0},a0.bind(null,i,r,n,t),null),n},useId:function(){var e=pt(),t=ve.identifierPrefix;if(te){var n=xn,i=Tn;n=(i&~(1<<32-Lt(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=pl++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Uw++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:sp,useFormState:py,useActionState:py,useOptimistic:function(e){var t=pt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ap.bind(null,Q,!0,n),n.dispatch=t,[e,t]},useMemoCache:tp,useCacheRefresh:function(){return pt().memoizedState=Gw.bind(null,Q)},useEffectEvent:function(e){var t=pt(),n={impl:e};return t.memoizedState=n,function(){if((ae&2)!==0)throw Error(b(440));return n.impl.apply(void 0,arguments)}}},lp={readContext:it,use:Fl,useCallback:A0,useContext:it,useEffect:ip,useImperativeHandle:x0,useInsertionEffect:v0,useLayoutEffect:S0,useMemo:E0,useReducer:$a,useRef:g0,useState:function(){return $a(Qn)},useDebugValue:op,useDeferredValue:function(e,t){var n=Ue();return C0(n,ge.memoizedState,e,t)},useTransition:function(){var e=$a(Qn)[0],t=Ue().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:r0,useId:N0,useHostTransitionStatus:sp,useFormState:my,useActionState:my,useOptimistic:function(e,t){var n=Ue();return f0(n,ge,e,t)},useMemoCache:tp,useCacheRefresh:R0};lp.useEffectEvent=y0;var U0={readContext:it,use:Fl,useCallback:A0,useContext:it,useEffect:ip,useImperativeHandle:x0,useInsertionEffect:v0,useLayoutEffect:S0,useMemo:E0,useReducer:hf,useRef:g0,useState:function(){return hf(Qn)},useDebugValue:op,useDeferredValue:function(e,t){var n=Ue();return ge===null?rp(n,e,t):C0(n,ge.memoizedState,e,t)},useTransition:function(){var e=hf(Qn)[0],t=Ue().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:r0,useId:N0,useHostTransitionStatus:sp,useFormState:hy,useActionState:hy,useOptimistic:function(e,t){var n=Ue();return ge!==null?f0(n,ge,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:tp,useCacheRefresh:R0};U0.useEffectEvent=y0;function gf(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ld={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Pt(),o=Ei(i);o.payload=t,n!=null&&(o.callback=n),t=Ci(e,o,i),t!==null&&(xt(t,e,i),fs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Pt(),o=Ei(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ci(e,o,i),t!==null&&(xt(t,e,i),fs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),i=Ei(n);i.tag=2,t!=null&&(i.callback=t),t=Ci(e,i,n),t!==null&&(xt(t,e,n),fs(t,e,n))}};function yy(e,t,n,i,o,r,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,s):t.prototype&&t.prototype.isPureReactComponent?!Es(n,i)||!Es(o,r):!0}function vy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ld.enqueueReplaceState(t,t.state,null)}function io(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ce({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function L0(e){rl(e)}function P0(e){console.error(e)}function F0(e){rl(e)}function ml(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Sy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function ud(e,t,n){return n=Ei(n),n.tag=3,n.payload={element:null},n.callback=function(){ml(e,t)},n}function O0(e){return e=Ei(e),e.tag=3,e}function H0(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var r=i.value;e.payload=function(){return o(r)},e.callback=function(){Sy(t,n,i)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){Sy(t,n,i),typeof o!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function Bw(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&dr(t,n,o,!0),n=Ot.current,n!==null){switch(n.tag){case 31:case 13:return Qt===null?Sl():n.alternate===null&&Me===0&&(Me=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===ul?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),bf(e,i,o)),!1;case 22:return n.flags|=65536,i===ul?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),bf(e,i,o)),!1}throw Error(b(435,n.tag))}return bf(e,i,o),Sl(),!1}if(te)return t=Ot.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==Qf&&(e=Error(b(422),{cause:i}),_s(Kt(e,n)))):(i!==Qf&&(t=Error(b(423),{cause:i}),_s(Kt(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Kt(i,n),o=ud(e.stateNode,i,o),mf(e,o),Me!==4&&(Me=2)),!1;var r=Error(b(520),{cause:i});if(r=Kt(r,n),ys===null?ys=[r]:ys.push(r),Me!==4&&(Me=2),t===null)return!0;i=Kt(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=ud(n.stateNode,i,e),mf(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(_i===null||!_i.has(r))))return n.flags|=65536,o&=-o,n.lanes|=o,o=O0(o),H0(o,e,n,i),mf(n,o),!1}n=n.return}while(n!==null);return!1}var up=Error(b(461)),Oe=!1;function et(e,t,n,i){t.child=e===null?jv(t,null,n,i):to(t,e.child,n,i)}function Ty(e,t,n,i,o){n=n.render;var r=t.ref;if("ref"in i){var s={};for(var a in i)a!=="ref"&&(s[a]=i[a])}else s=i;return eo(t),i=Zd(e,t,n,s,r,o),a=Wd(),e!==null&&!Oe?(jd(e,t,o),Zn(e,t,o)):(te&&a&&Vd(t),t.flags|=1,et(e,t,i,o),t.child)}function xy(e,t,n,i,o){if(e===null){var r=n.type;return typeof r=="function"&&!Bd(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,G0(e,t,r,i,o)):(e=Va(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!cp(e,o)){var s=r.memoizedProps;if(n=n.compare,n=n!==null?n:Es,n(s,i)&&e.ref===t.ref)return Zn(e,t,o)}return t.flags|=1,e=$n(r,i),e.ref=t.ref,e.return=t,t.child=e}function G0(e,t,n,i,o){if(e!==null){var r=e.memoizedProps;if(Es(r,i)&&e.ref===t.ref)if(Oe=!1,t.pendingProps=i=r,cp(e,o))(e.flags&131072)!==0&&(Oe=!0);else return t.lanes=e.lanes,Zn(e,t,o)}return cd(e,t,n,i,o)}function q0(e,t,n,i){var o=i.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|n:n,e!==null){for(i=t.child=e.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~r}else i=0,t.child=null;return Ay(e,t,r,n,i)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&za(t,r!==null?r.cachePool:null),r!==null?cy(t,r):id(),n0(t);else return i=t.lanes=536870912,Ay(e,t,r!==null?r.baseLanes|n:n,n,i)}else r!==null?(za(t,r.cachePool),cy(t,r),mi(t),t.memoizedState=null):(e!==null&&za(t,null),id(),mi(t));return et(e,t,o,n),t.child}function rs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ay(e,t,n,i,o){var r=Yd();return r=r===null?null:{parent:Fe._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&za(t,null),id(),n0(t),e!==null&&dr(e,t,i,!0),t.childLanes=o,null}function Ja(e,t){return t=hl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ey(e,t,n){return to(t,e.child,null,n),e=Ja(t,t.pendingProps),e.flags|=2,It(t),t.memoizedState=null,e}function Vw(e,t,n){var i=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(te){if(i.mode==="hidden")return e=Ja(t,i),t.lanes=536870912,rs(null,e);if(od(t),(e=Ee)?(e=DS(e,Xt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii!==null?{id:Tn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},n=Yv(e),n.return=t,t.child=n,nt=t,Ee=null)):e=null,e===null)throw Mi(t);return t.lanes=536870912,null}return Ja(t,i)}var r=e.memoizedState;if(r!==null){var s=r.dehydrated;if(od(t),o)if(t.flags&256)t.flags&=-257,t=Ey(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(b(558));else if(Oe||dr(e,t,n,!1),o=(n&e.childLanes)!==0,Oe||o){if(i=ve,i!==null&&(s=vv(i,n),s!==0&&s!==r.retryLane))throw r.retryLane=s,ao(e,s),xt(i,e,s),up;Sl(),t=Ey(e,t,n)}else e=r.treeContext,Ee=Zt(s.nextSibling),nt=t,te=!0,Ai=null,Xt=!1,e!==null&&Kv(t,e),t=Ja(t,i),t.flags|=4096;return t}return e=$n(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ka(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(b(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function cd(e,t,n,i,o){return eo(t),n=Zd(e,t,n,i,void 0,o),i=Wd(),e!==null&&!Oe?(jd(e,t,o),Zn(e,t,o)):(te&&i&&Vd(t),t.flags|=1,et(e,t,n,o),t.child)}function Cy(e,t,n,i,o,r){return eo(t),t.updateQueue=null,n=o0(t,i,n,o),i0(e),i=Wd(),e!==null&&!Oe?(jd(e,t,r),Zn(e,t,r)):(te&&i&&Vd(t),t.flags|=1,et(e,t,n,r),t.child)}function _y(e,t,n,i,o){if(eo(t),t.stateNode===null){var r=Bo,s=n.contextType;typeof s=="object"&&s!==null&&(r=it(s)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ld,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},Kd(t),s=n.contextType,r.context=typeof s=="object"&&s!==null?it(s):Bo,r.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(gf(t,n,s,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(s=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),s!==r.state&&ld.enqueueReplaceState(r,r.state,null),ps(t,i,r,o),ds(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var a=t.memoizedProps,l=io(n,a);r.props=l;var c=r.context,d=n.contextType;s=Bo,typeof d=="object"&&d!==null&&(s=it(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof r.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a||c!==s)&&vy(t,r,i,s),fi=!1;var m=t.memoizedState;r.state=m,ps(t,i,r,o),ds(),c=t.memoizedState,a||m!==c||fi?(typeof p=="function"&&(gf(t,n,p,i),c=t.memoizedState),(l=fi||yy(t,n,l,i,m,c,s))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),r.props=i,r.state=c,r.context=s,i=l):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,td(e,t),s=t.memoizedProps,d=io(n,s),r.props=d,p=t.pendingProps,m=r.context,c=n.contextType,l=Bo,typeof c=="object"&&c!==null&&(l=it(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(s!==p||m!==l)&&vy(t,r,i,l),fi=!1,m=t.memoizedState,r.state=m,ps(t,i,r,o),ds();var h=t.memoizedState;s!==p||m!==h||fi||e!==null&&e.dependencies!==null&&ll(e.dependencies)?(typeof a=="function"&&(gf(t,n,a,i),h=t.memoizedState),(d=fi||yy(t,n,d,i,m,h,l)||e!==null&&e.dependencies!==null&&ll(e.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,h,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,h,l)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=l,i=d):(typeof r.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,Ka(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=to(t,e.child,null,o),t.child=to(t,null,n,o)):et(e,t,n,o),t.memoizedState=r.state,e=t.child):e=Zn(e,t,o),e}function wy(e,t,n,i){return ji(),t.flags|=256,et(e,t,n,i),t.child}var yf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vf(e){return{baseLanes:e,cachePool:Qv()}}function Sf(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=kt),e}function B0(e,t,n){var i=t.pendingProps,o=!1,r=(t.flags&128)!==0,s;if((s=r)||(s=e!==null&&e.memoizedState===null?!1:(De.current&2)!==0),s&&(o=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,e===null){if(te){if(o?pi(t):mi(t),(e=Ee)?(e=DS(e,Xt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii!==null?{id:Tn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},n=Yv(e),n.return=t,t.child=n,nt=t,Ee=null)):e=null,e===null)throw Mi(t);return Cd(e)?t.lanes=32:t.lanes=536870912,null}var a=i.children;return i=i.fallback,o?(mi(t),o=t.mode,a=hl({mode:"hidden",children:a},o),i=Xi(i,o,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,i=t.child,i.memoizedState=vf(n),i.childLanes=Sf(e,s,n),t.memoizedState=yf,rs(null,i)):(pi(t),fd(t,a))}var l=e.memoizedState;if(l!==null&&(a=l.dehydrated,a!==null)){if(r)t.flags&256?(pi(t),t.flags&=-257,t=Tf(e,t,n)):t.memoizedState!==null?(mi(t),t.child=e.child,t.flags|=128,t=null):(mi(t),a=i.fallback,o=t.mode,i=hl({mode:"visible",children:i.children},o),a=Xi(a,o,n,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,to(t,e.child,null,n),i=t.child,i.memoizedState=vf(n),i.childLanes=Sf(e,s,n),t.memoizedState=yf,t=rs(null,i));else if(pi(t),Cd(a)){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;s=c,i=Error(b(419)),i.stack="",i.digest=s,_s({value:i,source:null,stack:null}),t=Tf(e,t,n)}else if(Oe||dr(e,t,n,!1),s=(n&e.childLanes)!==0,Oe||s){if(s=ve,s!==null&&(i=vv(s,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,ao(e,i),xt(s,e,i),up;Ed(a)||Sl(),t=Tf(e,t,n)}else Ed(a)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Ee=Zt(a.nextSibling),nt=t,te=!0,Ai=null,Xt=!1,e!==null&&Kv(t,e),t=fd(t,i.children),t.flags|=4096);return t}return o?(mi(t),a=i.fallback,o=t.mode,l=e.child,c=l.sibling,i=$n(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?a=$n(c,a):(a=Xi(a,o,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,rs(null,i),i=t.child,a=e.child.memoizedState,a===null?a=vf(n):(o=a.cachePool,o!==null?(l=Fe._currentValue,o=o.parent!==l?{parent:l,pool:l}:o):o=Qv(),a={baseLanes:a.baseLanes|n,cachePool:o}),i.memoizedState=a,i.childLanes=Sf(e,s,n),t.memoizedState=yf,rs(e.child,i)):(pi(t),n=e.child,e=n.sibling,n=$n(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function fd(e,t){return t=hl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function hl(e,t){return e=Mt(22,e,null,t),e.lanes=0,e}function Tf(e,t,n){return to(t,e.child,null,n),e=fd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function by(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Wf(e.return,t,n)}function xf(e,t,n,i,o,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=o,s.treeForkCount=r)}function V0(e,t,n){var i=t.pendingProps,o=i.revealOrder,r=i.tail;i=i.children;var s=De.current,a=(s&2)!==0;if(a?(s=s&1|2,t.flags|=128):s&=1,Te(De,s),et(e,t,i,n),i=te?Cs:0,!a&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&by(e,n,t);else if(e.tag===19)by(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&fl(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),xf(t,!1,o,n,r,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&fl(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}xf(t,!0,n,null,r,i);break;case"together":xf(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Di|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(dr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,n=$n(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$n(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cp(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ll(e)))}function zw(e,t,n){switch(t.tag){case 3:tl(t,t.stateNode.containerInfo),di(t,Fe,e.memoizedState.cache),ji();break;case 27:case 5:Hf(t);break;case 4:tl(t,t.stateNode.containerInfo);break;case 10:di(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,od(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(pi(t),t.flags|=128,null):(n&t.child.childLanes)!==0?B0(e,t,n):(pi(t),e=Zn(e,t,n),e!==null?e.sibling:null);pi(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(dr(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return V0(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Te(De,De.current),i)break;return null;case 22:return t.lanes=0,q0(e,t,n,t.pendingProps);case 24:di(t,Fe,e.memoizedState.cache)}return Zn(e,t,n)}function z0(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Oe=!0;else{if(!cp(e,n)&&(t.flags&128)===0)return Oe=!1,zw(e,t,n);Oe=(e.flags&131072)!==0}else Oe=!1,te&&(t.flags&1048576)!==0&&Jv(t,Cs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Yi(t.elementType),t.type=e,typeof e=="function")Bd(e)?(i=io(e,i),t.tag=1,t=_y(null,t,e,i,n)):(t.tag=0,t=cd(null,t,e,i,n));else{if(e!=null){var o=e.$$typeof;if(o===Nd){t.tag=11,t=Ty(null,t,e,i,n);break e}else if(o===Rd){t.tag=14,t=xy(null,t,e,i,n);break e}}throw t=Ff(e)||e,Error(b(306,t,""))}}return t;case 0:return cd(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=io(i,t.pendingProps),_y(e,t,i,o,n);case 3:e:{if(tl(t,t.stateNode.containerInfo),e===null)throw Error(b(387));i=t.pendingProps;var r=t.memoizedState;o=r.element,td(e,t),ps(t,i,null,n);var s=t.memoizedState;if(i=s.cache,di(t,Fe,i),i!==r.cache&&jf(t,[Fe],n,!0),ds(),i=s.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=wy(e,t,i,n);break e}else if(i!==o){o=Kt(Error(b(424)),t),_s(o),t=wy(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ee=Zt(e.firstChild),nt=t,te=!0,Ai=null,Xt=!0,n=jv(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ji(),i===o){t=Zn(e,t,n);break e}et(e,t,i,n)}t=t.child}return t;case 26:return Ka(e,t),e===null?(n=Xy(t.type,null,t.pendingProps,null))?t.memoizedState=n:te||(n=t.type,e=t.pendingProps,i=El(xi.current).createElement(n),i[tt]=t,i[At]=e,ot(i,n,e),Qe(i),t.stateNode=i):t.memoizedState=Xy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Hf(t),e===null&&te&&(i=t.stateNode=US(t.type,t.pendingProps,xi.current),nt=t,Xt=!0,o=Ee,Li(t.type)?(_d=o,Ee=Zt(i.firstChild)):Ee=o),et(e,t,t.pendingProps.children,n),Ka(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&te&&((o=i=Ee)&&(i=vb(i,t.type,t.pendingProps,Xt),i!==null?(t.stateNode=i,nt=t,Ee=Zt(i.firstChild),Xt=!1,o=!0):o=!1),o||Mi(t)),Hf(t),o=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,i=r.children,xd(o,r)?i=null:s!==null&&xd(o,s)&&(t.flags|=32),t.memoizedState!==null&&(o=Zd(e,t,Lw,null,null,n),Ms._currentValue=o),Ka(e,t),et(e,t,i,n),t.child;case 6:return e===null&&te&&((e=n=Ee)&&(n=Sb(n,t.pendingProps,Xt),n!==null?(t.stateNode=n,nt=t,Ee=null,e=!0):e=!1),e||Mi(t)),null;case 13:return B0(e,t,n);case 4:return tl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=to(t,null,i,n):et(e,t,i,n),t.child;case 11:return Ty(e,t,t.type,t.pendingProps,n);case 7:return et(e,t,t.pendingProps,n),t.child;case 8:return et(e,t,t.pendingProps.children,n),t.child;case 12:return et(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,di(t,t.type,i.value),et(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,eo(t),o=it(o),i=i(o),t.flags|=1,et(e,t,i,n),t.child;case 14:return xy(e,t,t.type,t.pendingProps,n);case 15:return G0(e,t,t.type,t.pendingProps,n);case 19:return V0(e,t,n);case 31:return Vw(e,t,n);case 22:return q0(e,t,n,t.pendingProps);case 24:return eo(t),i=it(Fe),e===null?(o=Yd(),o===null&&(o=ve,r=$d(),o.pooledCache=r,r.refCount++,r!==null&&(o.pooledCacheLanes|=n),o=r),t.memoizedState={parent:i,cache:o},Kd(t),di(t,Fe,o)):((e.lanes&n)!==0&&(td(e,t),ps(t,null,null,n),ds()),o=e.memoizedState,r=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),di(t,Fe,i)):(i=r.cache,di(t,Fe,i),i!==o.cache&&jf(t,[Fe],n,!0))),et(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(b(156,t.tag))}function Pn(e){e.flags|=4}function Af(e,t,n,i,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(mS())e.flags|=8192;else throw Zi=ul,Jd}else e.flags&=-16777217}function Ny(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!FS(t))if(mS())e.flags|=8192;else throw Zi=ul,Jd}function ka(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?hv():536870912,e.lanes|=t,rr|=t)}function Wr(e,t){if(!te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ae(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function $w(e,t,n){var i=t.pendingProps;switch(zd(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(t),null;case 1:return Ae(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Yn(Fe),jo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Io(t)?Pn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pf())),Ae(t),null;case 26:var o=t.type,r=t.memoizedState;return e===null?(Pn(t),r!==null?(Ae(t),Ny(t,r)):(Ae(t),Af(t,o,null,i,n))):r?r!==e.memoizedState?(Pn(t),Ae(t),Ny(t,r)):(Ae(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Pn(t),Ae(t),Af(t,o,e,i,n)),null;case 27:if(nl(t),n=xi.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Pn(t);else{if(!i){if(t.stateNode===null)throw Error(b(166));return Ae(t),null}e=En.current,Io(t)?iy(t,e):(e=US(o,i,n),t.stateNode=e,Pn(t))}return Ae(t),null;case 5:if(nl(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Pn(t);else{if(!i){if(t.stateNode===null)throw Error(b(166));return Ae(t),null}if(r=En.current,Io(t))iy(t,r);else{var s=El(xi.current);switch(r){case 1:r=s.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=s.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=s.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?r.multiple=!0:i.size&&(r.size=i.size);break;default:r=typeof i.is=="string"?s.createElement(o,{is:i.is}):s.createElement(o)}}r[tt]=t,r[At]=i;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)r.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=r;e:switch(ot(r,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Pn(t)}}return Ae(t),Af(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Pn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(b(166));if(e=xi.current,Io(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=nt,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[tt]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||IS(e.nodeValue,n)),e||Mi(t,!0)}else e=El(e).createTextNode(i),e[tt]=t,t.stateNode=e}return Ae(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=Io(t),n!==null){if(e===null){if(!i)throw Error(b(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(557));e[tt]=t}else ji(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ae(t),e=!1}else n=pf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(It(t),t):(It(t),null);if((t.flags&128)!==0)throw Error(b(558))}return Ae(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Io(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(b(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(b(317));o[tt]=t}else ji(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ae(t),o=!1}else o=pf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(It(t),t):(It(t),null)}return It(t),(t.flags&128)!==0?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ka(t,t.updateQueue),Ae(t),null);case 4:return jo(),e===null&&yp(t.stateNode.containerInfo),Ae(t),null;case 10:return Yn(t.type),Ae(t),null;case 19:if(Ze(De),i=t.memoizedState,i===null)return Ae(t),null;if(o=(t.flags&128)!==0,r=i.rendering,r===null)if(o)Wr(i,!1);else{if(Me!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=fl(e),r!==null){for(t.flags|=128,Wr(i,!1),e=r.updateQueue,t.updateQueue=e,ka(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)$v(n,e),n=n.sibling;return Te(De,De.current&1|2),te&&Gn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Dt()>yl&&(t.flags|=128,o=!0,Wr(i,!1),t.lanes=4194304)}else{if(!o)if(e=fl(r),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ka(t,e),Wr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!te)return Ae(t),null}else 2*Dt()-i.renderingStartTime>yl&&n!==536870912&&(t.flags|=128,o=!0,Wr(i,!1),t.lanes=4194304);i.isBackwards?(r.sibling=t.child,t.child=r):(e=i.last,e!==null?e.sibling=r:t.child=r,i.last=r)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Dt(),e.sibling=null,n=De.current,Te(De,o?n&1|2:n&1),te&&Gn(t,i.treeForkCount),e):(Ae(t),null);case 22:case 23:return It(t),Xd(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(Ae(t),t.subtreeFlags&6&&(t.flags|=8192)):Ae(t),n=t.updateQueue,n!==null&&ka(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Ze(Qi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Yn(Fe),Ae(t),null;case 25:return null;case 30:return null}throw Error(b(156,t.tag))}function Yw(e,t){switch(zd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yn(Fe),jo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return nl(t),null;case 31:if(t.memoizedState!==null){if(It(t),t.alternate===null)throw Error(b(340));ji()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(It(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));ji()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ze(De),null;case 4:return jo(),null;case 10:return Yn(t.type),null;case 22:case 23:return It(t),Xd(),e!==null&&Ze(Qi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Yn(Fe),null;case 25:return null;default:return null}}function $0(e,t){switch(zd(t),t.tag){case 3:Yn(Fe),jo();break;case 26:case 27:case 5:nl(t);break;case 4:jo();break;case 31:t.memoizedState!==null&&It(t);break;case 13:It(t);break;case 19:Ze(De);break;case 10:Yn(t.type);break;case 22:case 23:It(t),Xd(),e!==null&&Ze(Qi);break;case 24:Yn(Fe)}}function Bs(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var r=n.create,s=n.inst;i=r(),s.destroy=i}n=n.next}while(n!==o)}}catch(a){de(t,t.return,a)}}function ki(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var r=o.next;i=r;do{if((i.tag&e)===e){var s=i.inst,a=s.destroy;if(a!==void 0){s.destroy=void 0,o=t;var l=n,c=a;try{c()}catch(d){de(o,l,d)}}}i=i.next}while(i!==r)}}catch(d){de(t,t.return,d)}}function Y0(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{t0(t,n)}catch(i){de(e,e.return,i)}}}function J0(e,t,n){n.props=io(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){de(e,t,i)}}function hs(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){de(e,t,o)}}function An(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){de(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){de(e,t,o)}else n.current=null}function K0(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){de(e,e.return,o)}}function Ef(e,t,n){try{var i=e.stateNode;db(i,e.type,n,t),i[At]=t}catch(o){de(e,e.return,o)}}function X0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Li(e.type)||e.tag===4}function Cf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||X0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Li(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vn));else if(i!==4&&(i===27&&Li(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(dd(e,t,n),e=e.sibling;e!==null;)dd(e,t,n),e=e.sibling}function gl(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&Li(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(gl(e,t,n),e=e.sibling;e!==null;)gl(e,t,n),e=e.sibling}function Q0(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ot(t,i,n),t[tt]=e,t[At]=n}catch(r){de(e,e.return,r)}}var qn=!1,Pe=!1,_f=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Jw(e,t){if(e=e.containerInfo,Sd=bl,e=Fv(e),Hd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,d=0,p=e,m=null;t:for(;;){for(var h;p!==n||o!==0&&p.nodeType!==3||(a=s+o),p!==r||i!==0&&p.nodeType!==3||(l=s+i),p.nodeType===3&&(s+=p.nodeValue.length),(h=p.firstChild)!==null;)m=p,p=h;for(;;){if(p===e)break t;if(m===n&&++c===o&&(a=s),m===r&&++d===i&&(l=s),(h=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Td={focusedElem:e,selectionRange:n},bl=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){switch(t=Xe,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,n=t,o=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var g=io(n.type,o);e=i.getSnapshotBeforeUpdate(g,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(S){de(n,n.return,S)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Ad(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ad(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(b(163))}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}}function Z0(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:On(e,n),i&4&&Bs(5,n);break;case 1:if(On(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(s){de(n,n.return,s)}else{var o=io(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){de(n,n.return,s)}}i&64&&Y0(n),i&512&&hs(n,n.return);break;case 3:if(On(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{t0(e,t)}catch(s){de(n,n.return,s)}}break;case 27:t===null&&i&4&&Q0(n);case 26:case 5:On(e,n),t===null&&i&4&&K0(n),i&512&&hs(n,n.return);break;case 12:On(e,n);break;case 31:On(e,n),i&4&&eS(e,n);break;case 13:On(e,n),i&4&&tS(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=nb.bind(null,n),Tb(e,n))));break;case 22:if(i=n.memoizedState!==null||qn,!i){t=t!==null&&t.memoizedState!==null||Pe,o=qn;var r=Pe;qn=i,(Pe=t)&&!r?Hn(e,n,(n.subtreeFlags&8772)!==0):On(e,n),qn=o,Pe=r}break;case 30:break;default:On(e,n)}}function W0(e){var t=e.alternate;t!==null&&(e.alternate=null,W0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Dd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ne=null,St=!1;function Fn(e,t,n){for(n=n.child;n!==null;)j0(e,t,n),n=n.sibling}function j0(e,t,n){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Ls,n)}catch{}switch(n.tag){case 26:Pe||An(n,t),Fn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Pe||An(n,t);var i=Ne,o=St;Li(n.type)&&(Ne=n.stateNode,St=!1),Fn(e,t,n),Ss(n.stateNode),Ne=i,St=o;break;case 5:Pe||An(n,t);case 6:if(i=Ne,o=St,Ne=null,Fn(e,t,n),Ne=i,St=o,Ne!==null)if(St)try{(Ne.nodeType===9?Ne.body:Ne.nodeName==="HTML"?Ne.ownerDocument.body:Ne).removeChild(n.stateNode)}catch(r){de(n,t,r)}else try{Ne.removeChild(n.stateNode)}catch(r){de(n,t,r)}break;case 18:Ne!==null&&(St?(e=Ne,zy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ur(e)):zy(Ne,n.stateNode));break;case 4:i=Ne,o=St,Ne=n.stateNode.containerInfo,St=!0,Fn(e,t,n),Ne=i,St=o;break;case 0:case 11:case 14:case 15:ki(2,n,t),Pe||ki(4,n,t),Fn(e,t,n);break;case 1:Pe||(An(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&J0(n,t,i)),Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:Pe=(i=Pe)||n.memoizedState!==null,Fn(e,t,n),Pe=i;break;default:Fn(e,t,n)}}function eS(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ur(e)}catch(n){de(t,t.return,n)}}}function tS(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ur(e)}catch(n){de(t,t.return,n)}}function Kw(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ry),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ry),t;default:throw Error(b(435,e.tag))}}function Da(e,t){var n=Kw(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var o=ib.bind(null,e,i);i.then(o,o)}})}function yt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],r=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 27:if(Li(a.type)){Ne=a.stateNode,St=!1;break e}break;case 5:Ne=a.stateNode,St=!1;break e;case 3:case 4:Ne=a.stateNode.containerInfo,St=!0;break e}a=a.return}if(Ne===null)throw Error(b(160));j0(r,s,o),Ne=null,St=!1,r=o.alternate,r!==null&&(r.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)nS(t,e),t=t.sibling}var sn=null;function nS(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yt(t,e),vt(e),i&4&&(ki(3,e,e.return),Bs(3,e),ki(5,e,e.return));break;case 1:yt(t,e),vt(e),i&512&&(Pe||n===null||An(n,n.return)),i&64&&qn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=sn;if(yt(t,e),vt(e),i&512&&(Pe||n===null||An(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":r=o.getElementsByTagName("title")[0],(!r||r[Os]||r[tt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=o.createElement(i),o.head.insertBefore(r,o.querySelector("head > title"))),ot(r,i,n),r[tt]=e,Qe(r),i=r;break e;case"link":var s=Zy("link","href",o).get(i+(n.href||""));if(s){for(var a=0;a<s.length;a++)if(r=s[a],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(a,1);break t}}r=o.createElement(i),ot(r,i,n),o.head.appendChild(r);break;case"meta":if(s=Zy("meta","content",o).get(i+(n.content||""))){for(a=0;a<s.length;a++)if(r=s[a],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(a,1);break t}}r=o.createElement(i),ot(r,i,n),o.head.appendChild(r);break;default:throw Error(b(468,i))}r[tt]=e,Qe(r),i=r}e.stateNode=i}else Wy(o,e.type,e.stateNode);else e.stateNode=Qy(o,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Wy(o,e.type,e.stateNode):Qy(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Ef(e,e.memoizedProps,n.memoizedProps)}break;case 27:yt(t,e),vt(e),i&512&&(Pe||n===null||An(n,n.return)),n!==null&&i&4&&Ef(e,e.memoizedProps,n.memoizedProps);break;case 5:if(yt(t,e),vt(e),i&512&&(Pe||n===null||An(n,n.return)),e.flags&32){o=e.stateNode;try{tr(o,"")}catch(g){de(e,e.return,g)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,Ef(e,o,n!==null?n.memoizedProps:o)),i&1024&&(_f=!0);break;case 6:if(yt(t,e),vt(e),i&4){if(e.stateNode===null)throw Error(b(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(g){de(e,e.return,g)}}break;case 3:if(Za=null,o=sn,sn=Cl(t.containerInfo),yt(t,e),sn=o,vt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ur(t.containerInfo)}catch(g){de(e,e.return,g)}_f&&(_f=!1,iS(e));break;case 4:i=sn,sn=Cl(e.stateNode.containerInfo),yt(t,e),vt(e),sn=i;break;case 12:yt(t,e),vt(e);break;case 31:yt(t,e),vt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Da(e,i)));break;case 13:yt(t,e),vt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Gl=Dt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Da(e,i)));break;case 22:o=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=qn,d=Pe;if(qn=c||o,Pe=d||l,yt(t,e),Pe=d,qn=c,vt(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||l||qn||Pe||Ji(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(r=l.stateNode,o)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{a=l.stateNode;var p=l.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;a.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(g){de(l,l.return,g)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=o?"":l.memoizedProps}catch(g){de(l,l.return,g)}}}else if(t.tag===18){if(n===null){l=t;try{var h=l.stateNode;o?$y(h,!0):$y(l.stateNode,!1)}catch(g){de(l,l.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Da(e,n))));break;case 19:yt(t,e),vt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Da(e,i)));break;case 30:break;case 21:break;default:yt(t,e),vt(e)}}function vt(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(X0(i)){n=i;break}i=i.return}if(n==null)throw Error(b(160));switch(n.tag){case 27:var o=n.stateNode,r=Cf(e);gl(e,r,o);break;case 5:var s=n.stateNode;n.flags&32&&(tr(s,""),n.flags&=-33);var a=Cf(e);gl(e,a,s);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Cf(e);dd(e,c,l);break;default:throw Error(b(161))}}catch(d){de(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function iS(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;iS(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function On(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Z0(e,t.alternate,t),t=t.sibling}function Ji(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ki(4,t,t.return),Ji(t);break;case 1:An(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&J0(t,t.return,n),Ji(t);break;case 27:Ss(t.stateNode);case 26:case 5:An(t,t.return),Ji(t);break;case 22:t.memoizedState===null&&Ji(t);break;case 30:Ji(t);break;default:Ji(t)}e=e.sibling}}function Hn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,r=t,s=r.flags;switch(r.tag){case 0:case 11:case 15:Hn(o,r,n),Bs(4,r);break;case 1:if(Hn(o,r,n),i=r,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(c){de(i,i.return,c)}if(i=r,o=i.updateQueue,o!==null){var a=i.stateNode;try{var l=o.shared.hiddenCallbacks;if(l!==null)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)e0(l[o],a)}catch(c){de(i,i.return,c)}}n&&s&64&&Y0(r),hs(r,r.return);break;case 27:Q0(r);case 26:case 5:Hn(o,r,n),n&&i===null&&s&4&&K0(r),hs(r,r.return);break;case 12:Hn(o,r,n);break;case 31:Hn(o,r,n),n&&s&4&&eS(o,r);break;case 13:Hn(o,r,n),n&&s&4&&tS(o,r);break;case 22:r.memoizedState===null&&Hn(o,r,n),hs(r,r.return);break;case 30:break;default:Hn(o,r,n)}t=t.sibling}}function fp(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Gs(n))}function dp(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gs(e))}function rn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)oS(e,t,n,i),t=t.sibling}function oS(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:rn(e,t,n,i),o&2048&&Bs(9,t);break;case 1:rn(e,t,n,i);break;case 3:rn(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gs(e)));break;case 12:if(o&2048){rn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,s=r.id,a=r.onPostCommit;typeof a=="function"&&a(s,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){de(t,t.return,l)}}else rn(e,t,n,i);break;case 31:rn(e,t,n,i);break;case 13:rn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,s=t.alternate,t.memoizedState!==null?r._visibility&2?rn(e,t,n,i):gs(e,t):r._visibility&2?rn(e,t,n,i):(r._visibility|=2,ko(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),o&2048&&fp(s,t);break;case 24:rn(e,t,n,i),o&2048&&dp(t.alternate,t);break;default:rn(e,t,n,i)}}function ko(e,t,n,i,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,s=t,a=n,l=i,c=s.flags;switch(s.tag){case 0:case 11:case 15:ko(r,s,a,l,o),Bs(8,s);break;case 23:break;case 22:var d=s.stateNode;s.memoizedState!==null?d._visibility&2?ko(r,s,a,l,o):gs(r,s):(d._visibility|=2,ko(r,s,a,l,o)),o&&c&2048&&fp(s.alternate,s);break;case 24:ko(r,s,a,l,o),o&&c&2048&&dp(s.alternate,s);break;default:ko(r,s,a,l,o)}t=t.sibling}}function gs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:gs(n,i),o&2048&&fp(i.alternate,i);break;case 24:gs(n,i),o&2048&&dp(i.alternate,i);break;default:gs(n,i)}t=t.sibling}}var ss=8192;function Mo(e,t,n){if(e.subtreeFlags&ss)for(e=e.child;e!==null;)rS(e,t,n),e=e.sibling}function rS(e,t,n){switch(e.tag){case 26:Mo(e,t,n),e.flags&ss&&e.memoizedState!==null&&kb(n,sn,e.memoizedState,e.memoizedProps);break;case 5:Mo(e,t,n);break;case 3:case 4:var i=sn;sn=Cl(e.stateNode.containerInfo),Mo(e,t,n),sn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ss,ss=16777216,Mo(e,t,n),ss=i):Mo(e,t,n));break;default:Mo(e,t,n)}}function sS(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function jr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xe=i,lS(i,e)}sS(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)aS(e),e=e.sibling}function aS(e){switch(e.tag){case 0:case 11:case 15:jr(e),e.flags&2048&&ki(9,e,e.return);break;case 3:jr(e);break;case 12:jr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Xa(e)):jr(e);break;default:jr(e)}}function Xa(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xe=i,lS(i,e)}sS(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ki(8,t,t.return),Xa(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Xa(t));break;default:Xa(t)}e=e.sibling}}function lS(e,t){for(;Xe!==null;){var n=Xe;switch(n.tag){case 0:case 11:case 15:ki(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Gs(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Xe=i;else e:for(n=e;Xe!==null;){i=Xe;var o=i.sibling,r=i.return;if(W0(i),i===n){Xe=null;break e}if(o!==null){o.return=r,Xe=o;break e}Xe=r}}}var Xw={getCacheForType:function(e){var t=it(Fe),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return it(Fe).controller.signal}},Qw=typeof WeakMap=="function"?WeakMap:Map,ae=0,ve=null,W=null,j=0,fe=0,Rt=null,vi=!1,mr=!1,pp=!1,Wn=0,Me=0,Di=0,Wi=0,mp=0,kt=0,rr=0,ys=null,Tt=null,pd=!1,Gl=0,uS=0,yl=1/0,vl=null,_i=null,Be=0,wi=null,sr=null,Jn=0,md=0,hd=null,cS=null,vs=0,gd=null;function Pt(){return(ae&2)!==0&&j!==0?j&-j:$.T!==null?gp():Sv()}function fS(){if(kt===0)if((j&536870912)===0||te){var e=Ea;Ea<<=1,(Ea&3932160)===0&&(Ea=262144),kt=e}else kt=536870912;return e=Ot.current,e!==null&&(e.flags|=32),kt}function xt(e,t,n){(e===ve&&(fe===2||fe===9)||e.cancelPendingCommit!==null)&&(ar(e,0),Si(e,j,kt,!1)),Fs(e,n),((ae&2)===0||e!==ve)&&(e===ve&&((ae&2)===0&&(Wi|=n),Me===4&&Si(e,j,kt,!1)),_n(e))}function dS(e,t,n){if((ae&6)!==0)throw Error(b(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Ps(e,t),o=i?jw(e,t):wf(e,t,!0),r=i;do{if(o===0){mr&&!i&&Si(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Zw(n)){o=wf(e,t,!1),r=!1;continue}if(o===2){if(r=t,e.errorRecoveryDisabledLanes&r)var s=0;else s=e.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;e:{var a=e;o=ys;var l=a.current.memoizedState.isDehydrated;if(l&&(ar(a,s).flags|=256),s=wf(a,s,!1),s!==2){if(pp&&!l){a.errorRecoveryDisabledLanes|=r,Wi|=r,o=4;break e}r=Tt,Tt=o,r!==null&&(Tt===null?Tt=r:Tt.push.apply(Tt,r))}o=s}if(r=!1,o!==2)continue}}if(o===1){ar(e,0),Si(e,t,0,!0);break}e:{switch(i=e,r=o,r){case 0:case 1:throw Error(b(345));case 4:if((t&4194048)!==t)break;case 6:Si(i,t,kt,!vi);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(b(329))}if((t&62914560)===t&&(o=Gl+300-Dt(),10<o)){if(Si(i,t,kt,!vi),Rl(i,0,!0)!==0)break e;Jn=t,i.timeoutHandle=kS(Iy.bind(null,i,n,Tt,vl,pd,t,kt,Wi,rr,vi,r,"Throttled",-0,0),o);break e}Iy(i,n,Tt,vl,pd,t,kt,Wi,rr,vi,r,null,-0,0)}}break}while(1);_n(e)}function Iy(e,t,n,i,o,r,s,a,l,c,d,p,m,h){if(e.timeoutHandle=-1,p=t.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vn},rS(t,r,p);var g=(r&62914560)===r?Gl-Dt():(r&4194048)===r?uS-Dt():0;if(g=Db(p,g),g!==null){Jn=r,e.cancelPendingCommit=g(ky.bind(null,e,t,r,n,i,o,s,a,l,d,p,null,m,h)),Si(e,r,s,!c);return}}ky(e,t,r,n,i,o,s,a,l)}function Zw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],r=o.getSnapshot;o=o.value;try{if(!Ft(r(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Si(e,t,n,i){t&=~mp,t&=~Wi,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var r=31-Lt(o),s=1<<r;i[r]=-1,o&=~s}n!==0&&gv(e,n,t)}function ql(){return(ae&6)===0?(Vs(0,!1),!1):!0}function hp(){if(W!==null){if(fe===0)var e=W.return;else e=W,zn=lo=null,ep(e),Qo=null,ws=0,e=W;for(;e!==null;)$0(e.alternate,e),e=e.return;W=null}}function ar(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,hb(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Jn=0,hp(),ve=e,W=n=$n(e.current,null),j=t,fe=0,Rt=null,vi=!1,mr=Ps(e,t),pp=!1,rr=kt=mp=Wi=Di=Me=0,Tt=ys=null,pd=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-Lt(i),r=1<<o;t|=e[o],i&=~r}return Wn=t,Dl(),n}function pS(e,t){Q=null,$.H=Ns,t===pr||t===Ll?(t=ly(),fe=3):t===Jd?(t=ly(),fe=4):fe=t===up?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Rt=t,W===null&&(Me=1,ml(e,Kt(t,e.current)))}function mS(){var e=Ot.current;return e===null?!0:(j&4194048)===j?Qt===null:(j&62914560)===j||(j&536870912)!==0?e===Qt:!1}function hS(){var e=$.H;return $.H=Ns,e===null?Ns:e}function gS(){var e=$.A;return $.A=Xw,e}function Sl(){Me=4,vi||(j&4194048)!==j&&Ot.current!==null||(mr=!0),(Di&134217727)===0&&(Wi&134217727)===0||ve===null||Si(ve,j,kt,!1)}function wf(e,t,n){var i=ae;ae|=2;var o=hS(),r=gS();(ve!==e||j!==t)&&(vl=null,ar(e,t)),t=!1;var s=Me;e:do try{if(fe!==0&&W!==null){var a=W,l=Rt;switch(fe){case 8:hp(),s=6;break e;case 3:case 2:case 9:case 6:Ot.current===null&&(t=!0);var c=fe;if(fe=0,Rt=null,$o(e,a,l,c),n&&mr){s=0;break e}break;default:c=fe,fe=0,Rt=null,$o(e,a,l,c)}}Ww(),s=Me;break}catch(d){pS(e,d)}while(1);return t&&e.shellSuspendCounter++,zn=lo=null,ae=i,$.H=o,$.A=r,W===null&&(ve=null,j=0,Dl()),s}function Ww(){for(;W!==null;)yS(W)}function jw(e,t){var n=ae;ae|=2;var i=hS(),o=gS();ve!==e||j!==t?(vl=null,yl=Dt()+500,ar(e,t)):mr=Ps(e,t);e:do try{if(fe!==0&&W!==null){t=W;var r=Rt;t:switch(fe){case 1:fe=0,Rt=null,$o(e,t,r,1);break;case 2:case 9:if(ay(r)){fe=0,Rt=null,My(t);break}t=function(){fe!==2&&fe!==9||ve!==e||(fe=7),_n(e)},r.then(t,t);break e;case 3:fe=7;break e;case 4:fe=5;break e;case 7:ay(r)?(fe=0,Rt=null,My(t)):(fe=0,Rt=null,$o(e,t,r,7));break;case 5:var s=null;switch(W.tag){case 26:s=W.memoizedState;case 5:case 27:var a=W;if(s?FS(s):a.stateNode.complete){fe=0,Rt=null;var l=a.sibling;if(l!==null)W=l;else{var c=a.return;c!==null?(W=c,Bl(c)):W=null}break t}}fe=0,Rt=null,$o(e,t,r,5);break;case 6:fe=0,Rt=null,$o(e,t,r,6);break;case 8:hp(),Me=6;break e;default:throw Error(b(462))}}eb();break}catch(d){pS(e,d)}while(1);return zn=lo=null,$.H=i,$.A=o,ae=n,W!==null?0:(ve=null,j=0,Dl(),Me)}function eb(){for(;W!==null&&!E_();)yS(W)}function yS(e){var t=z0(e.alternate,e,Wn);e.memoizedProps=e.pendingProps,t===null?Bl(e):W=t}function My(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Cy(n,t,t.pendingProps,t.type,void 0,j);break;case 11:t=Cy(n,t,t.pendingProps,t.type.render,t.ref,j);break;case 5:ep(t);default:$0(n,t),t=W=$v(t,Wn),t=z0(n,t,Wn)}e.memoizedProps=e.pendingProps,t===null?Bl(e):W=t}function $o(e,t,n,i){zn=lo=null,ep(t),Qo=null,ws=0;var o=t.return;try{if(Bw(e,o,t,n,j)){Me=1,ml(e,Kt(n,e.current)),W=null;return}}catch(r){if(o!==null)throw W=o,r;Me=1,ml(e,Kt(n,e.current)),W=null;return}t.flags&32768?(te||i===1?e=!0:mr||(j&536870912)!==0?e=!1:(vi=e=!0,(i===2||i===9||i===3||i===6)&&(i=Ot.current,i!==null&&i.tag===13&&(i.flags|=16384))),vS(t,e)):Bl(t)}function Bl(e){var t=e;do{if((t.flags&32768)!==0){vS(t,vi);return}e=t.return;var n=$w(t.alternate,t,Wn);if(n!==null){W=n;return}if(t=t.sibling,t!==null){W=t;return}W=t=e}while(t!==null);Me===0&&(Me=5)}function vS(e,t){do{var n=Yw(e.alternate,e);if(n!==null){n.flags&=32767,W=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){W=e;return}W=e=n}while(e!==null);Me=6,W=null}function ky(e,t,n,i,o,r,s,a,l){e.cancelPendingCommit=null;do Vl();while(Be!==0);if((ae&6)!==0)throw Error(b(327));if(t!==null){if(t===e.current)throw Error(b(177));if(r=t.lanes|t.childLanes,r|=Gd,D_(e,n,r,s,a,l),e===ve&&(W=ve=null,j=0),sr=t,wi=e,Jn=n,md=r,hd=o,cS=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ob(il,function(){return ES(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=$.T,$.T=null,o=le.p,le.p=2,s=ae,ae|=4;try{Jw(e,t,n)}finally{ae=s,le.p=o,$.T=i}}Be=1,SS(),TS(),xS()}}function SS(){if(Be===1){Be=0;var e=wi,t=sr,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=$.T,$.T=null;var i=le.p;le.p=2;var o=ae;ae|=4;try{nS(t,e);var r=Td,s=Fv(e.containerInfo),a=r.focusedElem,l=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Pv(a.ownerDocument.documentElement,a)){if(l!==null&&Hd(a)){var c=l.start,d=l.end;if(d===void 0&&(d=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(d,a.value.length);else{var p=a.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var h=m.getSelection(),g=a.textContent.length,S=Math.min(l.start,g),x=l.end===void 0?S:Math.min(l.end,g);!h.extend&&S>x&&(s=x,x=S,S=s);var y=ey(a,S),v=ey(a,x);if(y&&v&&(h.rangeCount!==1||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==v.node||h.focusOffset!==v.offset)){var T=p.createRange();T.setStart(y.node,y.offset),h.removeAllRanges(),S>x?(h.addRange(T),h.extend(v.node,v.offset)):(T.setEnd(v.node,v.offset),h.addRange(T))}}}}for(p=[],h=a;h=h.parentNode;)h.nodeType===1&&p.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<p.length;a++){var A=p[a];A.element.scrollLeft=A.left,A.element.scrollTop=A.top}}bl=!!Sd,Td=Sd=null}finally{ae=o,le.p=i,$.T=n}}e.current=t,Be=2}}function TS(){if(Be===2){Be=0;var e=wi,t=sr,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=$.T,$.T=null;var i=le.p;le.p=2;var o=ae;ae|=4;try{Z0(e,t.alternate,t)}finally{ae=o,le.p=i,$.T=n}}Be=3}}function xS(){if(Be===4||Be===3){Be=0,C_();var e=wi,t=sr,n=Jn,i=cS;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Be=5:(Be=0,sr=wi=null,AS(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(_i=null),kd(n),t=t.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Ls,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=$.T,o=le.p,le.p=2,$.T=null;try{for(var r=e.onRecoverableError,s=0;s<i.length;s++){var a=i[s];r(a.value,{componentStack:a.stack})}}finally{$.T=t,le.p=o}}(Jn&3)!==0&&Vl(),_n(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===gd?vs++:(vs=0,gd=e):vs=0,Vs(0,!1)}}function AS(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Gs(t)))}function Vl(){return SS(),TS(),xS(),ES()}function ES(){if(Be!==5)return!1;var e=wi,t=md;md=0;var n=kd(Jn),i=$.T,o=le.p;try{le.p=32>n?32:n,$.T=null,n=hd,hd=null;var r=wi,s=Jn;if(Be=0,sr=wi=null,Jn=0,(ae&6)!==0)throw Error(b(331));var a=ae;if(ae|=4,aS(r.current),oS(r,r.current,s,n),ae=a,Vs(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Ls,r)}catch{}return!0}finally{le.p=o,$.T=i,AS(e,t)}}function Dy(e,t,n){t=Kt(n,t),t=ud(e.stateNode,t,2),e=Ci(e,t,2),e!==null&&(Fs(e,2),_n(e))}function de(e,t,n){if(e.tag===3)Dy(e,e,n);else for(;t!==null;){if(t.tag===3){Dy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(_i===null||!_i.has(i))){e=Kt(n,e),n=O0(2),i=Ci(t,n,2),i!==null&&(H0(n,i,t,e),Fs(i,2),_n(i));break}}t=t.return}}function bf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Qw;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(pp=!0,o.add(n),e=tb.bind(null,e,t,n),t.then(e,e))}function tb(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ve===e&&(j&n)===n&&(Me===4||Me===3&&(j&62914560)===j&&300>Dt()-Gl?(ae&2)===0&&ar(e,0):mp|=n,rr===j&&(rr=0)),_n(e)}function CS(e,t){t===0&&(t=hv()),e=ao(e,t),e!==null&&(Fs(e,t),_n(e))}function nb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),CS(e,n)}function ib(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(b(314))}i!==null&&i.delete(t),CS(e,n)}function ob(e,t){return Id(e,t)}var Tl=null,Do=null,yd=!1,xl=!1,Nf=!1,Ti=0;function _n(e){e!==Do&&e.next===null&&(Do===null?Tl=Do=e:Do=Do.next=e),xl=!0,yd||(yd=!0,sb())}function Vs(e,t){if(!Nf&&xl){Nf=!0;do for(var n=!1,i=Tl;i!==null;){if(!t)if(e!==0){var o=i.pendingLanes;if(o===0)var r=0;else{var s=i.suspendedLanes,a=i.pingedLanes;r=(1<<31-Lt(42|e)+1)-1,r&=o&~(s&~a),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Uy(i,r))}else r=j,r=Rl(i,i===ve?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(r&3)===0||Ps(i,r)||(n=!0,Uy(i,r));i=i.next}while(n);Nf=!1}}function rb(){_S()}function _S(){xl=yd=!1;var e=0;Ti!==0&&mb()&&(e=Ti);for(var t=Dt(),n=null,i=Tl;i!==null;){var o=i.next,r=wS(i,t);r===0?(i.next=null,n===null?Tl=o:n.next=o,o===null&&(Do=n)):(n=i,(e!==0||(r&3)!==0)&&(xl=!0)),i=o}Be!==0&&Be!==5||Vs(e,!1),Ti!==0&&(Ti=0)}function wS(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var s=31-Lt(r),a=1<<s,l=o[s];l===-1?((a&n)===0||(a&i)!==0)&&(o[s]=k_(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}if(t=ve,n=j,n=Rl(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(fe===2||fe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&nf(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Ps(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&nf(i),kd(n)){case 2:case 8:n=pv;break;case 32:n=il;break;case 268435456:n=mv;break;default:n=il}return i=bS.bind(null,e),n=Id(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&nf(i),e.callbackPriority=2,e.callbackNode=null,2}function bS(e,t){if(Be!==0&&Be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Vl()&&e.callbackNode!==n)return null;var i=j;return i=Rl(e,e===ve?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(dS(e,i,t),wS(e,Dt()),e.callbackNode!=null&&e.callbackNode===n?bS.bind(null,e):null)}function Uy(e,t){if(Vl())return null;dS(e,t,!0)}function sb(){gb(function(){(ae&6)!==0?Id(dv,rb):_S()})}function gp(){if(Ti===0){var e=nr;e===0&&(e=Aa,Aa<<=1,(Aa&261888)===0&&(Aa=256)),Ti=e}return Ti}function Ly(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ga(""+e)}function Py(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function ab(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var r=Ly((o[At]||null).action),s=i.submitter;s&&(t=(t=s[At]||null)?Ly(t.formAction):s.getAttribute("formAction"),t!==null&&(r=t,s=null));var a=new Il("action","action",null,i,o);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ti!==0){var l=s?Py(o,s):new FormData(o);ad(n,{pending:!0,data:l,method:o.method,action:r},null,l)}}else typeof r=="function"&&(a.preventDefault(),l=s?Py(o,s):new FormData(o),ad(n,{pending:!0,data:l,method:o.method,action:r},r,l))},currentTarget:o}]})}}for(Ua=0;Ua<Xf.length;Ua++)La=Xf[Ua],Fy=La.toLowerCase(),Oy=La[0].toUpperCase()+La.slice(1),an(Fy,"on"+Oy);var La,Fy,Oy,Ua;an(Hv,"onAnimationEnd");an(Gv,"onAnimationIteration");an(qv,"onAnimationStart");an("dblclick","onDoubleClick");an("focusin","onFocus");an("focusout","onBlur");an(_w,"onTransitionRun");an(ww,"onTransitionStart");an(bw,"onTransitionCancel");an(Bv,"onTransitionEnd");er("onMouseEnter",["mouseout","mouseover"]);er("onMouseLeave",["mouseout","mouseover"]);er("onPointerEnter",["pointerout","pointerover"]);er("onPointerLeave",["pointerout","pointerover"]);oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rs));function NS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&o.isPropagationStopped())break e;r=a,o.currentTarget=c;try{r(o)}catch(d){rl(d)}o.currentTarget=null,r=l}else for(s=0;s<i.length;s++){if(a=i[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&o.isPropagationStopped())break e;r=a,o.currentTarget=c;try{r(o)}catch(d){rl(d)}o.currentTarget=null,r=l}}}}function Z(e,t){var n=t[qf];n===void 0&&(n=t[qf]=new Set);var i=e+"__bubble";n.has(i)||(RS(t,e,2,!1),n.add(i))}function Rf(e,t,n){var i=0;t&&(i|=4),RS(n,e,i,t)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function yp(e){if(!e[Pa]){e[Pa]=!0,Tv.forEach(function(n){n!=="selectionchange"&&(lb.has(n)||Rf(n,!1,e),Rf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pa]||(t[Pa]=!0,Rf("selectionchange",!1,t))}}function RS(e,t,n,i){switch(BS(t)){case 2:var o=Pb;break;case 8:o=Fb;break;default:o=xp}n=o.bind(null,t,n,e),o=void 0,!Yf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function If(e,t,n,i,o){var r=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var a=i.stateNode.containerInfo;if(a===o)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===o)return;s=s.return}for(;a!==null;){if(s=Po(a),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){i=r=s;continue e}a=a.parentNode}}i=i.return}Nv(function(){var c=r,d=Ld(n),p=[];e:{var m=Vv.get(e);if(m!==void 0){var h=Il,g=e;switch(e){case"keypress":if(Ba(n)===0)break e;case"keydown":case"keyup":h=iw;break;case"focusin":g="focus",h=lf;break;case"focusout":g="blur",h=lf;break;case"beforeblur":case"afterblur":h=lf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=$_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=sw;break;case Hv:case Gv:case qv:h=K_;break;case Bv:h=lw;break;case"scroll":case"scrollend":h=V_;break;case"wheel":h=cw;break;case"copy":case"cut":case"paste":h=Q_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Jg;break;case"toggle":case"beforetoggle":h=dw}var S=(t&4)!==0,x=!S&&(e==="scroll"||e==="scrollend"),y=S?m!==null?m+"Capture":null:m;S=[];for(var v=c,T;v!==null;){var A=v;if(T=A.stateNode,A=A.tag,A!==5&&A!==26&&A!==27||T===null||y===null||(A=xs(v,y),A!=null&&S.push(Is(v,A,T))),x)break;v=v.return}0<S.length&&(m=new h(m,g,null,n,d),p.push({event:m,listeners:S}))}}if((t&7)===0){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==$f&&(g=n.relatedTarget||n.fromElement)&&(Po(g)||g[cr]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=c,g=g?Po(g):null,g!==null&&(x=Us(g),S=g.tag,g!==x||S!==5&&S!==27&&S!==6)&&(g=null)):(h=null,g=c),h!==g)){if(S=$g,A="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(S=Jg,A="onPointerLeave",y="onPointerEnter",v="pointer"),x=h==null?m:os(h),T=g==null?m:os(g),m=new S(A,v+"leave",h,n,d),m.target=x,m.relatedTarget=T,A=null,Po(d)===c&&(S=new S(y,v+"enter",g,n,d),S.target=T,S.relatedTarget=x,A=S),x=A,h&&g)t:{for(S=ub,y=h,v=g,T=0,A=y;A;A=S(A))T++;A=0;for(var C=v;C;C=S(C))A++;for(;0<T-A;)y=S(y),T--;for(;0<A-T;)v=S(v),A--;for(;T--;){if(y===v||v!==null&&y===v.alternate){S=y;break t}y=S(y),v=S(v)}S=null}else S=null;h!==null&&Hy(p,m,h,S,!1),g!==null&&x!==null&&Hy(p,x,g,S,!0)}}e:{if(m=c?os(c):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var I=Zg;else if(Qg(m))if(Uv)I=Aw;else{I=Tw;var _=Sw}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&Ud(c.elementType)&&(I=Zg):I=xw;if(I&&(I=I(e,c))){Dv(p,I,n,d);break e}_&&_(e,m,c),e==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&zf(m,"number",m.value)}switch(_=c?os(c):window,e){case"focusin":(Qg(_)||_.contentEditable==="true")&&(Ho=_,Jf=c,us=null);break;case"focusout":us=Jf=Ho=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,ty(p,n,d);break;case"selectionchange":if(Cw)break;case"keydown":case"keyup":ty(p,n,d)}var M;if(Od)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Oo?Mv(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Iv&&n.locale!=="ko"&&(Oo||R!=="onCompositionStart"?R==="onCompositionEnd"&&Oo&&(M=Rv()):(yi=d,Pd="value"in yi?yi.value:yi.textContent,Oo=!0)),_=Al(c,R),0<_.length&&(R=new Yg(R,e,null,n,d),p.push({event:R,listeners:_}),M?R.data=M:(M=kv(n),M!==null&&(R.data=M)))),(M=mw?hw(e,n):gw(e,n))&&(R=Al(c,"onBeforeInput"),0<R.length&&(_=new Yg("onBeforeInput","beforeinput",null,n,d),p.push({event:_,listeners:R}),_.data=M)),ab(p,e,c,n,d)}NS(p,t)})}function Is(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Al(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,r=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||r===null||(o=xs(e,n),o!=null&&i.unshift(Is(e,o,r)),o=xs(e,t),o!=null&&i.push(Is(e,o,r))),e.tag===3)return i;e=e.return}return[]}function ub(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Hy(e,t,n,i,o){for(var r=t._reactName,s=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,o?(c=xs(n,r),c!=null&&s.unshift(Is(n,c,l))):o||(c=xs(n,r),c!=null&&s.push(Is(n,c,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var cb=/\r\n?/g,fb=/\u0000|\uFFFD/g;function Gy(e){return(typeof e=="string"?e:""+e).replace(cb,`
`).replace(fb,"")}function IS(e,t){return t=Gy(t),Gy(e)===t}function he(e,t,n,i,o,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||tr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&tr(e,""+i);break;case"className":_a(e,"class",i);break;case"tabIndex":_a(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":_a(e,n,i);break;case"style":bv(e,i,r);break;case"data":if(t!=="object"){_a(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Ga(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&he(e,t,"name",o.name,o,null),he(e,t,"formEncType",o.formEncType,o,null),he(e,t,"formMethod",o.formMethod,o,null),he(e,t,"formTarget",o.formTarget,o,null)):(he(e,t,"encType",o.encType,o,null),he(e,t,"method",o.method,o,null),he(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Ga(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Vn);break;case"onScroll":i!=null&&Z("scroll",e);break;case"onScrollEnd":i!=null&&Z("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(b(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Ga(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Z("beforetoggle",e),Z("toggle",e),Ha(e,"popover",i);break;case"xlinkActuate":Ln(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Ln(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Ln(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Ln(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Ln(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Ln(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Ln(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Ln(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Ln(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Ha(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=q_.get(n)||n,Ha(e,n,i))}}function vd(e,t,n,i,o,r){switch(n){case"style":bv(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(b(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"children":typeof i=="string"?tr(e,i):(typeof i=="number"||typeof i=="bigint")&&tr(e,""+i);break;case"onScroll":i!=null&&Z("scroll",e);break;case"onScrollEnd":i!=null&&Z("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),r=e[At]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,o),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Ha(e,n,i)}}}function ot(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Z("error",e),Z("load",e);var i=!1,o=!1,r;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(s!=null)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:he(e,t,r,s,n,null)}}o&&he(e,t,"srcSet",n.srcSet,n,null),i&&he(e,t,"src",n.src,n,null);return;case"input":Z("invalid",e);var a=r=s=o=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":o=d;break;case"type":s=d;break;case"checked":l=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":a=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(b(137,t));break;default:he(e,t,i,d,n,null)}}Cv(e,r,a,l,c,s,o,!1);return;case"select":Z("invalid",e),i=s=r=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":r=a;break;case"defaultValue":s=a;break;case"multiple":i=a;default:he(e,t,o,a,n,null)}t=r,n=s,e.multiple=!!i,t!=null?Jo(e,!!i,t,!1):n!=null&&Jo(e,!!i,n,!0);return;case"textarea":Z("invalid",e),r=o=i=null;for(s in n)if(n.hasOwnProperty(s)&&(a=n[s],a!=null))switch(s){case"value":i=a;break;case"defaultValue":o=a;break;case"children":r=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(b(91));break;default:he(e,t,s,a,n,null)}wv(e,i,o,r);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:he(e,t,l,i,n,null)}return;case"dialog":Z("beforetoggle",e),Z("toggle",e),Z("cancel",e),Z("close",e);break;case"iframe":case"object":Z("load",e);break;case"video":case"audio":for(i=0;i<Rs.length;i++)Z(Rs[i],e);break;case"image":Z("error",e),Z("load",e);break;case"details":Z("toggle",e);break;case"embed":case"source":case"link":Z("error",e),Z("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:he(e,t,c,i,n,null)}return;default:if(Ud(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&vd(e,t,d,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&he(e,t,a,i,n,null))}function db(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,r=null,s=null,a=null,l=null,c=null,d=null;for(h in n){var p=n[h];if(n.hasOwnProperty(h)&&p!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=p;default:i.hasOwnProperty(h)||he(e,t,h,null,i,p)}}for(var m in i){var h=i[m];if(p=n[m],i.hasOwnProperty(m)&&(h!=null||p!=null))switch(m){case"type":r=h;break;case"name":o=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":s=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(b(137,t));break;default:h!==p&&he(e,t,m,h,i,p)}}Vf(e,s,a,l,c,d,r,o);return;case"select":h=s=a=m=null;for(r in n)if(l=n[r],n.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(r)||he(e,t,r,null,i,l)}for(o in i)if(r=i[o],l=n[o],i.hasOwnProperty(o)&&(r!=null||l!=null))switch(o){case"value":m=r;break;case"defaultValue":a=r;break;case"multiple":s=r;default:r!==l&&he(e,t,o,r,i,l)}t=a,n=s,i=h,m!=null?Jo(e,!!n,m,!1):!!i!=!!n&&(t!=null?Jo(e,!!n,t,!0):Jo(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(a in n)if(o=n[a],n.hasOwnProperty(a)&&o!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:he(e,t,a,null,i,o)}for(s in i)if(o=i[s],r=n[s],i.hasOwnProperty(s)&&(o!=null||r!=null))switch(s){case"value":m=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(b(91));break;default:o!==r&&he(e,t,s,o,i,r)}_v(e,m,h);return;case"option":for(var g in n)if(m=n[g],n.hasOwnProperty(g)&&m!=null&&!i.hasOwnProperty(g))switch(g){case"selected":e.selected=!1;break;default:he(e,t,g,null,i,m)}for(l in i)if(m=i[l],h=n[l],i.hasOwnProperty(l)&&m!==h&&(m!=null||h!=null))switch(l){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:he(e,t,l,m,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in n)m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S)&&he(e,t,S,null,i,m);for(c in i)if(m=i[c],h=n[c],i.hasOwnProperty(c)&&m!==h&&(m!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(b(137,t));break;default:he(e,t,c,m,i,h)}return;default:if(Ud(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!i.hasOwnProperty(x)&&vd(e,t,x,void 0,i,m);for(d in i)m=i[d],h=n[d],!i.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||vd(e,t,d,m,i,h);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&m!=null&&!i.hasOwnProperty(y)&&he(e,t,y,null,i,m);for(p in i)m=i[p],h=n[p],!i.hasOwnProperty(p)||m===h||m==null&&h==null||he(e,t,p,m,i,h)}function qy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],r=o.transferSize,s=o.initiatorType,a=o.duration;if(r&&a&&qy(s)){for(s=0,a=o.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>a)break;var d=l.transferSize,p=l.initiatorType;d&&qy(p)&&(l=l.responseEnd,s+=d*(l<a?1:(a-c)/(l-c)))}if(--i,t+=8*(r+s)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Sd=null,Td=null;function El(e){return e.nodeType===9?e:e.ownerDocument}function By(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MS(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function xd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mf=null;function mb(){var e=window.event;return e&&e.type==="popstate"?e===Mf?!1:(Mf=e,!0):(Mf=null,!1)}var kS=typeof setTimeout=="function"?setTimeout:void 0,hb=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,gb=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(e){return Vy.resolve(null).then(e).catch(yb)}:kS;function yb(e){setTimeout(function(){throw e})}function Li(e){return e==="head"}function zy(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(o),ur(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Ss(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Ss(n);for(var r=n.firstChild;r;){var s=r.nextSibling,a=r.nodeName;r[Os]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=s}}else n==="body"&&Ss(e.ownerDocument.body);n=o}while(n);ur(t)}function $y(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Ad(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ad(n),Dd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function vb(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Os])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Zt(e.nextSibling),e===null)break}return null}function Sb(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Zt(e.nextSibling),e===null))return null;return e}function DS(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Zt(e.nextSibling),e===null))return null;return e}function Ed(e){return e.data==="$?"||e.data==="$~"}function Cd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Tb(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Zt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _d=null;function Yy(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Zt(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Jy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function US(e,t,n){switch(t=El(n),e){case"html":if(e=t.documentElement,!e)throw Error(b(452));return e;case"head":if(e=t.head,!e)throw Error(b(453));return e;case"body":if(e=t.body,!e)throw Error(b(454));return e;default:throw Error(b(451))}}function Ss(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Dd(e)}var Wt=new Map,Ky=new Set;function Cl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var jn=le.d;le.d={f:xb,r:Ab,D:Eb,C:Cb,L:_b,m:wb,X:Nb,S:bb,M:Rb};function xb(){var e=jn.f(),t=ql();return e||t}function Ab(e){var t=fr(e);t!==null&&t.tag===5&&t.type==="form"?b0(t):jn.r(e)}var hr=typeof document>"u"?null:document;function LS(e,t,n){var i=hr;if(i&&typeof t=="string"&&t){var o=Jt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Ky.has(o)||(Ky.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),ot(t,"link",e),Qe(t),i.head.appendChild(t)))}}function Eb(e){jn.D(e),LS("dns-prefetch",e,null)}function Cb(e,t){jn.C(e,t),LS("preconnect",e,t)}function _b(e,t,n){jn.L(e,t,n);var i=hr;if(i&&e&&t){var o='link[rel="preload"][as="'+Jt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Jt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Jt(n.imageSizes)+'"]')):o+='[href="'+Jt(e)+'"]';var r=o;switch(t){case"style":r=lr(e);break;case"script":r=gr(e)}Wt.has(r)||(e=Ce({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Wt.set(r,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(zs(r))||t==="script"&&i.querySelector($s(r))||(t=i.createElement("link"),ot(t,"link",e),Qe(t),i.head.appendChild(t)))}}function wb(e,t){jn.m(e,t);var n=hr;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Jt(i)+'"][href="'+Jt(e)+'"]',r=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=gr(e)}if(!Wt.has(r)&&(e=Ce({rel:"modulepreload",href:e},t),Wt.set(r,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($s(r)))return}i=n.createElement("link"),ot(i,"link",e),Qe(i),n.head.appendChild(i)}}}function bb(e,t,n){jn.S(e,t,n);var i=hr;if(i&&e){var o=Yo(i).hoistableStyles,r=lr(e);t=t||"default";var s=o.get(r);if(!s){var a={loading:0,preload:null};if(s=i.querySelector(zs(r)))a.loading=5;else{e=Ce({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Wt.get(r))&&vp(e,n);var l=s=i.createElement("link");Qe(l),ot(l,"link",e),l._p=new Promise(function(c,d){l.onload=c,l.onerror=d}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Qa(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:a},o.set(r,s)}}}function Nb(e,t){jn.X(e,t);var n=hr;if(n&&e){var i=Yo(n).hoistableScripts,o=gr(e),r=i.get(o);r||(r=n.querySelector($s(o)),r||(e=Ce({src:e,async:!0},t),(t=Wt.get(o))&&Sp(e,t),r=n.createElement("script"),Qe(r),ot(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function Rb(e,t){jn.M(e,t);var n=hr;if(n&&e){var i=Yo(n).hoistableScripts,o=gr(e),r=i.get(o);r||(r=n.querySelector($s(o)),r||(e=Ce({src:e,async:!0,type:"module"},t),(t=Wt.get(o))&&Sp(e,t),r=n.createElement("script"),Qe(r),ot(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function Xy(e,t,n,i){var o=(o=xi.current)?Cl(o):null;if(!o)throw Error(b(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=lr(n.href),n=Yo(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=lr(n.href);var r=Yo(o).hoistableStyles,s=r.get(e);if(s||(o=o.ownerDocument||o,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,s),(r=o.querySelector(zs(e)))&&!r._p&&(s.instance=r,s.state.loading=5),Wt.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Wt.set(e,n),r||Ib(o,e,n,s.state))),t&&i===null)throw Error(b(528,""));return s}if(t&&i!==null)throw Error(b(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=gr(n),n=Yo(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(b(444,e))}}function lr(e){return'href="'+Jt(e)+'"'}function zs(e){return'link[rel="stylesheet"]['+e+"]"}function PS(e){return Ce({},e,{"data-precedence":e.precedence,precedence:null})}function Ib(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ot(t,"link",n),Qe(t),e.head.appendChild(t))}function gr(e){return'[src="'+Jt(e)+'"]'}function $s(e){return"script[async]"+e}function Qy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Jt(n.href)+'"]');if(i)return t.instance=i,Qe(i),i;var o=Ce({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Qe(i),ot(i,"style",o),Qa(i,n.precedence,e),t.instance=i;case"stylesheet":o=lr(n.href);var r=e.querySelector(zs(o));if(r)return t.state.loading|=4,t.instance=r,Qe(r),r;i=PS(n),(o=Wt.get(o))&&vp(i,o),r=(e.ownerDocument||e).createElement("link"),Qe(r);var s=r;return s._p=new Promise(function(a,l){s.onload=a,s.onerror=l}),ot(r,"link",i),t.state.loading|=4,Qa(r,n.precedence,e),t.instance=r;case"script":return r=gr(n.src),(o=e.querySelector($s(r)))?(t.instance=o,Qe(o),o):(i=n,(o=Wt.get(r))&&(i=Ce({},n),Sp(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),Qe(o),ot(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(b(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Qa(i,n.precedence,e));return t.instance}function Qa(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,r=o,s=0;s<i.length;s++){var a=i[s];if(a.dataset.precedence===t)r=a;else if(r!==o)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function vp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Sp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Za=null;function Zy(e,t,n){if(Za===null){var i=new Map,o=Za=new Map;o.set(n,i)}else o=Za,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var r=n[o];if(!(r[Os]||r[tt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var s=r.getAttribute(t)||"";s=e+s;var a=i.get(s);a?a.push(r):i.set(s,[r])}}return i}function Wy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Mb(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function FS(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function kb(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=lr(i.href),r=t.querySelector(zs(o));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=_l.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=r,Qe(r);return}r=t.ownerDocument||t,i=PS(i),(o=Wt.get(o))&&vp(i,o),r=r.createElement("link"),Qe(r);var s=r;s._p=new Promise(function(a,l){s.onload=a,s.onerror=l}),ot(r,"link",i),n.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=_l.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var kf=0;function Db(e,t){return e.stylesheets&&e.count===0&&Wa(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&Wa(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&kf===0&&(kf=62500*pb());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wa(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>kf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function _l(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wa(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wl=null;function Wa(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wl=new Map,t.forEach(Ub,e),wl=null,_l.call(e))}function Ub(e,t){if(!(t.state.loading&4)){var n=wl.get(e);if(n)var i=n.get(null);else{n=new Map,wl.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<o.length;r++){var s=o[r];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}o=t.instance,s=o.getAttribute("data-precedence"),r=n.get(s)||i,r===i&&n.set(null,o),n.set(s,o),this.count++,i=_l.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),r?r.parentNode.insertBefore(o,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Ms={$$typeof:Bn,Provider:null,Consumer:null,_currentValue:Ki,_currentValue2:Ki,_threadCount:0};function Lb(e,t,n,i,o,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=of(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=of(0),this.hiddenUpdates=of(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=r,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function OS(e,t,n,i,o,r,s,a,l,c,d,p){return e=new Lb(e,t,n,s,l,c,d,p,a),t=1,r===!0&&(t|=24),r=Mt(3,null,null,t),e.current=r,r.stateNode=e,t=$d(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},Kd(r),e}function HS(e){return e?(e=Bo,e):Bo}function GS(e,t,n,i,o,r){o=HS(o),i.context===null?i.context=o:i.pendingContext=o,i=Ei(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Ci(e,i,t),n!==null&&(xt(n,e,t),fs(n,e,t))}function jy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Tp(e,t){jy(e,t),(e=e.alternate)&&jy(e,t)}function qS(e){if(e.tag===13||e.tag===31){var t=ao(e,67108864);t!==null&&xt(t,e,67108864),Tp(e,67108864)}}function ev(e){if(e.tag===13||e.tag===31){var t=Pt();t=Md(t);var n=ao(e,t);n!==null&&xt(n,e,t),Tp(e,t)}}var bl=!0;function Pb(e,t,n,i){var o=$.T;$.T=null;var r=le.p;try{le.p=2,xp(e,t,n,i)}finally{le.p=r,$.T=o}}function Fb(e,t,n,i){var o=$.T;$.T=null;var r=le.p;try{le.p=8,xp(e,t,n,i)}finally{le.p=r,$.T=o}}function xp(e,t,n,i){if(bl){var o=wd(i);if(o===null)If(e,t,i,Nl,n),tv(e,i);else if(Hb(o,e,t,n,i))i.stopPropagation();else if(tv(e,i),t&4&&-1<Ob.indexOf(e)){for(;o!==null;){var r=fr(o);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var s=$i(r.pendingLanes);if(s!==0){var a=r;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-Lt(s);a.entanglements[1]|=l,s&=~l}_n(r),(ae&6)===0&&(yl=Dt()+500,Vs(0,!1))}}break;case 31:case 13:a=ao(r,2),a!==null&&xt(a,r,2),ql(),Tp(r,2)}if(r=wd(i),r===null&&If(e,t,i,Nl,n),r===o)break;o=r}o!==null&&i.stopPropagation()}else If(e,t,i,null,n)}}function wd(e){return e=Ld(e),Ap(e)}var Nl=null;function Ap(e){if(Nl=null,e=Po(e),e!==null){var t=Us(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=av(t),e!==null)return e;e=null}else if(n===31){if(e=lv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nl=e,null}function BS(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(__()){case dv:return 2;case pv:return 8;case il:case w_:return 32;case mv:return 268435456;default:return 32}default:return 32}}var bd=!1,bi=null,Ni=null,Ri=null,ks=new Map,Ds=new Map,hi=[],Ob="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tv(e,t){switch(e){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":ks.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ds.delete(t.pointerId)}}function es(e,t,n,i,o,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[o]},t!==null&&(t=fr(t),t!==null&&qS(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Hb(e,t,n,i,o){switch(t){case"focusin":return bi=es(bi,e,t,n,i,o),!0;case"dragenter":return Ni=es(Ni,e,t,n,i,o),!0;case"mouseover":return Ri=es(Ri,e,t,n,i,o),!0;case"pointerover":var r=o.pointerId;return ks.set(r,es(ks.get(r)||null,e,t,n,i,o)),!0;case"gotpointercapture":return r=o.pointerId,Ds.set(r,es(Ds.get(r)||null,e,t,n,i,o)),!0}return!1}function VS(e){var t=Po(e.target);if(t!==null){var n=Us(t);if(n!==null){if(t=n.tag,t===13){if(t=av(n),t!==null){e.blockedOn=t,Og(e.priority,function(){ev(n)});return}}else if(t===31){if(t=lv(n),t!==null){e.blockedOn=t,Og(e.priority,function(){ev(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ja(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);$f=i,n.target.dispatchEvent(i),$f=null}else return t=fr(n),t!==null&&qS(t),e.blockedOn=n,!1;t.shift()}return!0}function nv(e,t,n){ja(e)&&n.delete(t)}function Gb(){bd=!1,bi!==null&&ja(bi)&&(bi=null),Ni!==null&&ja(Ni)&&(Ni=null),Ri!==null&&ja(Ri)&&(Ri=null),ks.forEach(nv),Ds.forEach(nv)}function Fa(e,t){e.blockedOn===t&&(e.blockedOn=null,bd||(bd=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,Gb)))}var Oa=null;function iv(e){Oa!==e&&(Oa=e,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,function(){Oa===e&&(Oa=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(Ap(i||n)===null)continue;break}var r=fr(n);r!==null&&(e.splice(t,3),t-=3,ad(r,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function ur(e){function t(l){return Fa(l,e)}bi!==null&&Fa(bi,e),Ni!==null&&Fa(Ni,e),Ri!==null&&Fa(Ri,e),ks.forEach(t),Ds.forEach(t);for(var n=0;n<hi.length;n++){var i=hi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<hi.length&&(n=hi[0],n.blockedOn===null);)VS(n),n.blockedOn===null&&hi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],r=n[i+1],s=o[At]||null;if(typeof r=="function")s||iv(n);else if(s){var a=null;if(r&&r.hasAttribute("formAction")){if(o=r,s=r[At]||null)a=s.formAction;else if(Ap(o)!==null)continue}else a=s.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),iv(n)}}}function zS(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(s){return o=s})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Ep(e){this._internalRoot=e}zl.prototype.render=Ep.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));var n=t.current,i=Pt();GS(n,i,e,t,null,null)};zl.prototype.unmount=Ep.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;GS(e.current,2,null,e,null,null),ql(),t[cr]=null}};function zl(e){this._internalRoot=e}zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hi.length&&t!==0&&t<hi[n].priority;n++);hi.splice(n,0,e),n===0&&VS(e)}};var ov=rv.version;if(ov!=="19.2.3")throw Error(b(527,ov,"19.2.3"));le.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=v_(t),e=e!==null?uv(e):null,e=e===null?null:e.stateNode,e};var qb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(ts=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ts.isDisabled&&ts.supportsFiber))try{Ls=ts.inject(qb),Ut=ts}catch{}var ts;$l.createRoot=function(e,t){if(!sv(e))throw Error(b(299));var n=!1,i="",o=L0,r=P0,s=F0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=OS(e,1,!1,null,null,n,i,null,o,r,s,zS),e[cr]=t.current,yp(e),new Ep(t)};$l.hydrateRoot=function(e,t,n){if(!sv(e))throw Error(b(299));var i=!1,o="",r=L0,s=P0,a=F0,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),t=OS(e,1,!0,t,n??null,i,o,l,r,s,a,zS),t.context=HS(null),n=t.current,i=Pt(),i=Md(i),o=Ei(i),o.callback=null,Ci(n,o,i),n=i,t.current.lanes=n,Fs(t,n),_n(t),e[cr]=t.current,yp(e),new zl(t)};$l.version="19.2.3"});var KS=vn((WF,JS)=>{"use strict";function YS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YS)}catch(e){console.error(e)}}YS(),JS.exports=$S()});var XS,QS,ZS,yr,Yl,Ys,WS,Cp,_p,jS,eT,tT,wp,Jl,nT,iT,oT=zr(()=>{XS="hermes_os_settings",QS="hermes_os_chat_history",ZS="hermes_os_archived_conversations",yr=new Map,Yl=null,Ys=null,WS=e=>{try{let t={...e};Yl=t,yr.set(XS,JSON.stringify(t))}catch(t){console.error("Failed to save settings",t)}return Promise.resolve()},Cp=()=>{if(Yl)return Yl;let e=yr.get(XS);if(!e)return null;try{return JSON.parse(e)}catch(t){return console.error("Failed to load settings",t),null}},_p=()=>Promise.resolve(Cp()),jS=()=>(Yl=null,_p()),eT=e=>{try{let t=["<noise>","<ctrl46>"],n=e.map(i=>{let o=i;return t.forEach(r=>{let s=new RegExp(r,"gi");o=o.replace(s,"")}),o.trim()});yr.set(QS,JSON.stringify(n))}catch(t){console.error("Failed to save chat history",t)}return Promise.resolve()},tT=()=>{let e=yr.get(QS);if(!e)return[];try{return JSON.parse(e)}catch(t){return console.error("Failed to load chat history",t),[]}},wp=e=>{try{Ys=e,yr.set(ZS,JSON.stringify(e))}catch(t){console.error("Failed to save archived conversations",t)}return Promise.resolve()},Jl=()=>{if(Ys)return Promise.resolve(Ys);let e=yr.get(ZS);if(!e)return Promise.resolve([]);try{return Ys=JSON.parse(e),Promise.resolve(Ys)}catch(t){return console.error("Failed to load archived conversations",t),Promise.resolve([])}},nT=async e=>{let n=[...await Jl(),e];await wp(n)},iT=async e=>{let n=(await Jl()).filter(i=>i.key!==e);await wp(n)}});var bn,wn,Js,rT,bp,sT,aT,lT,uT,Np,cT,fT,dT,Rp,Kl,pT,mT,hT=zr(()=>{bn=null,wn=null,Js=null,rT=Promise.resolve(),bp=async e=>{let t=rT,n;rT=new Promise(i=>{n=i});try{if(await t,!bn){console.warn("persistData called without obsidianPlugin");return}let i=await bn.loadData()||{},o=e(i);await bn.saveData(o)}catch(i){console.error("Failed to persist data",i)}finally{n()}},sT=e=>{bn=e},aT=()=>bn,lT=async e=>{let t={...e};wn=t,await bp(n=>({...n,...t}))},uT=()=>wn||null,Np=async()=>{if(bn)try{wn=await bn.loadData()||{};let t=bn.settings;return t&&(wn={...wn,...t}),wn}catch(e){return console.error("Failed to load settings from Obsidian",e),null}return null},cT=async()=>(wn=null,await Np()),fT=async e=>{let t=["<noise>","<ctrl46>"],n=e.map(i=>{let o=i;return t.forEach(r=>{let s=new RegExp(r,"gi");o=o.replace(s,"")}),o.trim()});await bp(i=>({...i,chatHistory:n}))},dT=()=>wn?.chatHistory?wn.chatHistory:[],Rp=async e=>{Js=e,await bp(t=>({...t,archivedConversations:e}))},Kl=async()=>{if(Js)return Js;if(bn)try{return Js=(await bn.loadData())?.archivedConversations||[],Js}catch(e){return console.error("Failed to load archived conversations",e),[]}return[]},pT=async e=>{let n=[...await Kl(),e];await Rp(n)},mT=async e=>{let n=(await Kl()).filter(i=>i.key!==e);await Rp(n)}});var Nn,gT,yT,Xl,We,vT,Ql,Ip,Rn,vr,ST,TT,mt=zr(()=>{oT();hT();Nn=!1,gT=e=>{Nn=!0,sT(e)},yT=()=>aT(),Xl=async e=>Nn?lT(e):WS(e),We=()=>Nn?uT():Cp(),vT=async()=>Nn?Np():_p(),Ql=async()=>Nn?cT():jS(),Ip=async e=>Nn?fT(e):eT(e),Rn=()=>Nn?dT():tT(),vr=async()=>Nn?Kl():Jl(),ST=async e=>Nn?pT(e):nT(e),TT=async e=>Nn?mT(e):iT(e)});function ye(){return yT()?.app??null}function ln(){return ye()!==null}async function je(e,t={}){if(!ln())return!1;try{let n=ye();if(!n)return!1;let i=n.vault.getAbstractFileByPath(e);if(!i||!(i instanceof Zl.TFile))return console.warn(`File not found: ${e}`),!1;let{newWindow:o=!1,split:r=!1}=t,s=n.workspace;if(!o&&!r){let l=s.getLeavesOfType("markdown").find(c=>c.view instanceof Zl.MarkdownView&&c.view.file?.path===e);if(l)return s.setActiveLeaf(l,{focus:!0}),!0}let a;return r?a=s.getLeaf("split"):o?a=s.getLeaf(!0):a=s.getLeaf(!1),await a.openFile(i),!0}catch(n){return console.warn("Failed to open file in Obsidian:",n),!1}}function ze(e){if(!e||typeof e!="string")return"/";let t=e.startsWith("/")?e.slice(1):e,n=t.lastIndexOf("/");if(n===-1)return"/";let i=t.substring(0,n);return i.startsWith("/")?i:`/${i}/`}var Zl,_e=zr(()=>{Zl=require("obsidian");mt()});var $e,Mp,xT,jt,AT,In,Ks,Wl,ET,Ht,CT,jl,uo,_T,wT,bT,eu,NT,tu,ke=zr(()=>{$e=require("obsidian");mt();_e();Mp=e=>"children"in e,xT=e=>e.endsWith("/")?e.slice(0,-1):e,jt=()=>{let e=ye();if(!e)throw new Error("Obsidian app not available");return e},AT=async()=>{},In=()=>jt().vault.getMarkdownFiles().map(n=>n.path).filter(n=>!n.startsWith("chat history/trash/")),Ks=e=>{let{limit:t=20,offset:n=0,sortBy:i="mtime",sortOrder:o="desc",filter:r}=e,a=jt().vault.getMarkdownFiles().filter(d=>!d.path.startsWith("chat history/trash/")).map(d=>({path:d.path,name:d.name,mtime:d.stat.mtime,size:d.stat.size}));if(r){let d=r.toLowerCase();a=a.filter(p=>p.path.toLowerCase().includes(d)||p.name.toLowerCase().includes(d))}a.sort((d,p)=>{let m=d[i],h=p[i];return typeof m=="string"&&typeof h=="string"&&(m=m.toLowerCase(),h=h.toLowerCase()),m<h?o==="asc"?-1:1:m>h?o==="asc"?1:-1:0});let l=a.length,c=a.slice(n,n+t);return Promise.resolve({files:c,total:l})},Wl=e=>{let t=jt(),n=t.vault.getAllLoadedFiles();if(e){let i=xT(e),o=t.vault.getAbstractFileByPath((0,$e.normalizePath)(i));if(o||(o=t.vault.getAbstractFileByPath((0,$e.normalizePath)(e))),!o&&!e.endsWith("/")&&(o=t.vault.getAbstractFileByPath((0,$e.normalizePath)(e+"/"))),!o||!Mp(o)){let r=[`Original path: "${e}"`,`Normalized path: "${i}"`,`With trailing slash: "${e+"/"}"`].join(", ");throw new Error(`Folder not found: ${e}. Attempted: ${r}`)}return n.filter(r=>{let s=i||e;return r.path.startsWith(s+"/")||r.path===s}).map(r=>r.path).sort()}return n.filter(i=>Mp(i)&&i.path!=="chat history/trash").map(i=>i.path).sort()},ET=()=>jt().vault.getAllLoadedFiles().filter(n=>Mp(n)&&n.path!=="chat history/trash").map(n=>({path:n.path,children:[]})),Ht=async e=>{let t=jt(),n=t.vault.getAbstractFileByPath((0,$e.normalizePath)(e));if(!n||!(n instanceof $e.TFile))throw new Error(`File not found in vault: ${e}`);return await t.vault.read(n)},CT=async(e,t)=>{let n=jt(),i=e.substring(0,e.lastIndexOf("/"));i&&i.length>0&&(await n.vault.adapter.exists(i)||await n.vault.createFolder(i));let o=t instanceof Uint8Array?t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):t;return await n.vault.adapter.writeBinary(e,o),`Created binary file ${e} in vault`},jl=async(e,t)=>{let n=jt(),i=(0,$e.normalizePath)(e),o=i.substring(0,i.lastIndexOf("/"));return o&&o.length>0&&(n.vault.getAbstractFileByPath((0,$e.normalizePath)(o))||await n.vault.createFolder(o)),await n.vault.create(i,t),`Created ${e} in vault`},uo=async(e,t)=>{let n=jt(),i=n.vault.getAbstractFileByPath((0,$e.normalizePath)(e));if(!i||!(i instanceof $e.TFile))throw new Error(`File not found: ${e}`);return await n.vault.modify(i,t),`Updated ${e} in vault`},_T=async(e,t)=>{let n=jt(),i=n.vault.getAbstractFileByPath((0,$e.normalizePath)(e));if(!i)throw new Error(`File not found: ${e}`);return await n.fileManager.renameFile(i,(0,$e.normalizePath)(t)),`Renamed ${e} to ${t} in vault`},wT=async(e,t)=>{let n=jt(),i=(0,$e.normalizePath)(e),o=(0,$e.normalizePath)(t),r=n.vault.getAbstractFileByPath(i);if(!r)throw new Error(`Source file not found: ${e}`);if(n.vault.getAbstractFileByPath(o))throw new Error(`Target file already exists: ${t}`);return await n.fileManager.renameFile(r,o),`Moved ${e} to ${t} in vault`},bT=async(e,t,n,i)=>{let r=(await Ht(e)).split(`
`);if(t==="append")r.push(n||"");else if(t==="replace_line"){if(i===void 0||i<1||i>r.length)throw new Error(`Invalid line number: ${i}`);r[i-1]=n||""}else if(t==="remove_line"){if(i===void 0||i<1||i>r.length)throw new Error(`Invalid line number: ${i}`);r.splice(i-1,1)}else throw new Error(`Unknown operation: ${t}`);let s=r.join(`
`);return await uo(e,s),`Successfully performed ${t} on ${e}`},eu=async e=>{let t=jt(),n=(0,$e.normalizePath)(xT(e));if(t.vault.getAbstractFileByPath(n))return`Directory ${n} already exists`;let o=n.substring(0,n.lastIndexOf("/"));return o&&o.length>0&&(t.vault.getAbstractFileByPath((0,$e.normalizePath)(o))||await t.vault.createFolder(o)),await t.vault.createFolder(n),`Created directory ${n} in vault`},NT=async e=>{let t=jt(),n=t.vault.getAbstractFileByPath((0,$e.normalizePath)(e));if(!n)throw new Error(`File not found: ${e}`);let r=`${We()?.chatHistoryFolder||"chat-history"}/trash`;t.vault.getAbstractFileByPath((0,$e.normalizePath)(r))||await t.vault.createFolder(r);let a=new Date().toISOString().replace(/[:.]/g,"-"),l=e.split("/").pop()||e,c=`${r}/${a}-${l}`;return await t.fileManager.renameFile(n,c),`Moved ${e} to trash`},tu=async(e,t=!1,n="i")=>{let i=In(),o=[],r=t?new RegExp(e,n):null,s=t?"":e.toLowerCase();for(let a of i){let c=(await Ht(a)).split(`
`),d=[];c.forEach((p,m)=>{let h=!1;t&&r?h=r.test(p):h=p.toLowerCase().includes(s),h&&d.push({line:m+1,content:p,contextBefore:c.slice(Math.max(0,m-2),m),contextAfter:c.slice(m+1,Math.min(c.length,m+3))})}),d.length>0&&o.push({filename:a,matches:d})}return o}});var YE=vn(hc=>{"use strict";var MP=Symbol.for("react.transitional.element"),kP=Symbol.for("react.fragment");function $E(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:MP,type:e,key:i,ref:t!==void 0?t:null,props:n}}hc.Fragment=kP;hc.jsx=$E;hc.jsxs=$E});var ne=vn((x3,JE)=>{"use strict";JE.exports=YE()});var BF={};ue(BF,{default:()=>Nc});module.exports=QC(BF);var IC=require("obsidian");var Jh=K(qt(),1),NC=require("obsidian"),RC=K(KS(),1);var P=K(qt(),1);ke();mt();var zb,$b;function Yb(){return{geminiUrl:zb,vertexUrl:$b}}function Jb(e,t,n,i){var o,r;if(!e?.baseUrl){let s=Yb();return t?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(r=s.geminiUrl)!==null&&r!==void 0?r:i}return e.baseUrl}var fn=class{};function D(e,t){let n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){let r=t[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(e,t,n){for(let r=0;r<t.length-1;r++){let s=t[r];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[a])){let l=e[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){let d=l[c];f(d,t.slice(r+1),n[c])}else for(let c of l)f(c,t.slice(r+1),n)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in e||(e[a]=[{}]);let l=e[a];f(l[0],t.slice(r+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}let i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function u(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;let o=t[i];if(o.endsWith("[]")){let r=o.slice(0,-2);if(r in e){let s=e[r];return Array.isArray(s)?s.map(a=>u(a,t.slice(i+1),n)):n}else return n}else e=e[o]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function Kb(e,t){for(let[n,i]of Object.entries(t)){let o=n.split("."),r=i.split("."),s=new Set,a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&r.length>a)for(let l=a;l<r.length;l++){let c=r[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Up(e,o,r,0,s)}}function Up(e,t,n,i,o){if(i>=t.length||typeof e!="object"||e===null)return;let r=t[i];if(r.endsWith("[]")){let s=r.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(let l of a[s])Up(l,t,n,i+1,o)}else if(r==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){let s=e,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!o.has(c)),l={};for(let c of a)l[c]=s[c];for(let[c,d]of Object.entries(l)){let p=[];for(let m of n.slice(i))m==="*"?p.push(c):p.push(m);f(s,p,d)}for(let c of a)delete s[c]}}else{let s=e;r in s&&Up(s[r],t,n,i+1,o)}}function Nm(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Xb(e){let t={},n=u(e,["operationName"]);n!=null&&f(t,["operationName"],n);let i=u(e,["resourceName"]);return i!=null&&f(t,["_url","resourceName"],i),t}function Qb(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],Wb(s)),t}function Zb(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],jb(s)),t}function Wb(e){let t={},n=u(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>eN(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function jb(e){let t={},n=u(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>tN(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function eN(e){let t={},n=u(e,["video"]);return n!=null&&f(t,["video"],aN(n)),t}function tN(e){let t={},n=u(e,["_self"]);return n!=null&&f(t,["video"],lN(n)),t}function nN(e){let t={},n=u(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function iN(e){let t={},n=u(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function oN(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],rN(s)),t}function rN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["parent"]);i!=null&&f(t,["parent"],i);let o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function Wx(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],sN(s)),t}function sN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["parent"]);i!=null&&f(t,["parent"],i);let o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function aN(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);let i=u(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],Nm(i));let o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function lN(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["uri"],n);let i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],Nm(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}var RT;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(RT||(RT={}));var IT;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(IT||(IT={}));var MT;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(MT||(MT={}));var w;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(w||(w={}));var kT;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kT||(kT={}));var DT;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(DT||(DT={}));var UT;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(UT||(UT={}));var LT;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(LT||(LT={}));var PT;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(PT||(PT={}));var FT;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(FT||(FT={}));var OT;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(OT||(OT={}));var HT;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(HT||(HT={}));var GT;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(GT||(GT={}));var qT;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(qT||(qT={}));var BT;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(BT||(BT={}));var VT;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(VT||(VT={}));var zT;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(zT||(zT={}));var $T;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($T||($T={}));var YT;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(YT||(YT={}));var JT;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(JT||(JT={}));var KT;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(KT||(KT={}));var Er;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Er||(Er={}));var XT;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(XT||(XT={}));var QT;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(QT||(QT={}));var ZT;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ZT||(ZT={}));var Lp;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lp||(Lp={}));var WT;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(WT||(WT={}));var jT;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(jT||(jT={}));var Pp;(function(e){e.COLLECTION="COLLECTION"})(Pp||(Pp={}));var ex;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(ex||(ex={}));var tx;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tx||(tx={}));var nx;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(nx||(nx={}));var ix;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(ix||(ix={}));var ox;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(ox||(ox={}));var rx;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(rx||(rx={}));var sx;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(sx||(sx={}));var ax;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ax||(ax={}));var lx;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(lx||(lx={}));var ux;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(ux||(ux={}));var cx;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(cx||(cx={}));var fx;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(fx||(fx={}));var dx;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(dx||(dx={}));var px;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(px||(px={}));var mx;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(mx||(mx={}));var hx;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(hx||(hx={}));var gx;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(gx||(gx={}));var yx;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(yx||(yx={}));var vx;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(vx||(vx={}));var Sx;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Sx||(Sx={}));var Tx;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(Tx||(Tx={}));var xx;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xx||(xx={}));var Ax;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ax||(Ax={}));var Ex;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Ex||(Ex={}));var Cx;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Cx||(Cx={}));var _x;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_x||(_x={}));var wx;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(wx||(wx={}));var Tr;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Tr||(Tr={}));var Zs=class{constructor(t){let n={};for(let i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}};var fo=class{get text(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1,p=[];for(let m of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[h,g]of Object.entries(m))h!=="text"&&h!=="thought"&&h!=="thoughtSignature"&&(g!==null||g!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",d=[];for(let p of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(c?.length!==0)return c}get executableCode(){var t,n,i,o,r,s,a,l,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,i,o,r,s,a,l,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.output}},uu=class{},cu=class{},Fp=class{},Op=class{},Hp=class{},Gp=class{},fu=class{},du=class{},pu=class{},qp=class{};var Cr=class{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let i=new Cr,o,r=t;return n?o=Zb(r):o=Qb(r),Object.assign(i,o),i}},mu=class{},hu=class{},gu=class{},yu=class{},Bp=class{},Vp=class{},zp=class{};var Ws=class{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let i=new Ws,r=oN(t);return Object.assign(i,r),i}},$p=class{},Yp=class{},Jp=class{};var vu=class{};var Kp=class{get text(){var t,n,i;let o="",r=!1,s=[];for(let a of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var t,n,i;let o="",r=[];for(let s of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&r.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var Xp=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var js=class{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let i=new js,r=Wx(t);return Object.assign(i,r),i}};function oe(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){let n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function jx(e,t){let n=oe(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function eA(e){return Array.isArray(e)?e.map(t=>Su(t)):[Su(e)]}function Su(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function tA(e){let t=Su(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function nA(e){let t=Su(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function bx(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function iA(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>bx(t)):[bx(e)]}function Qp(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Nx(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Rx(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function lt(e){if(e==null)throw new Error("ContentUnion is required");return Qp(e)?e:{role:"user",parts:iA(e)}}function Rm(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{let i=lt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){let n=lt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>lt(n)):[lt(t)]}function en(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Nx(e)||Rx(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[lt(e)]}let t=[],n=[],i=Qp(e[0]);for(let o of e){let r=Qp(o);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(o);else{if(Nx(o)||Rx(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:iA(n)}),t}function uN(e,t){e.includes("null")&&(t.nullable=!0);let n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(w).includes(n[0].toUpperCase())?n[0].toUpperCase():w.TYPE_UNSPECIFIED;else{t.anyOf=[];for(let i of n)t.anyOf.push({type:Object.values(w).includes(i.toUpperCase())?i.toUpperCase():w.TYPE_UNSPECIFIED})}}function xr(e){let t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");let r=e.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,e=r[1]):r[1].type==="null"&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&uN(e.type,t);for(let[s,a]of Object.entries(e))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(w).includes(a.toUpperCase())?a.toUpperCase():w.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=xr(a);else if(i.includes(s)){let l=[];for(let c of a){if(c.type=="null"){t.nullable=!0;continue}l.push(xr(c))}t[s]=l}else if(o.includes(s)){let l={};for(let[c,d]of Object.entries(a))l[c]=xr(d);t[s]=l}else{if(s==="additionalProperties")continue;t[s]=a}return t}function Im(e){return xr(e)}function Mm(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function km(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Nr(e){if(e.functionDeclarations)for(let t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=xr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=xr(t.response));return e}function Rr(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");let t=[];for(let n of e)t.push(n);return t}function cN(e,t,n,i=1){let o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function ni(e,t){if(typeof t!="string")throw new Error("name must be a string");return cN(e,t,"cachedContents")}function oA(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Fi(e){return Nm(e)}function fN(e){return e!=null&&typeof e=="object"&&"name"in e}function dN(e){return e!=null&&typeof e=="object"&&"video"in e}function pN(e){return e!=null&&typeof e=="object"&&"uri"in e}function rA(e){var t;let n;if(fN(e)&&(n=e.name),!(pN(e)&&(n=e.uri,n===void 0))&&!(dN(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function sA(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function aA(e){for(let t of["models","tunedModels","publisherModels"])if(mN(e,t))return e[t];return[]}function mN(e,t){return e!==null&&typeof e=="object"&&t in e}function hN(e,t={}){let n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function gN(e,t={}){let n=[],i=new Set;for(let o of e){let r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);let s=hN(o,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function lA(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function yN(e){if(typeof e!="string")return e;let t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function uA(e){if(typeof e!="object"||e===null)return{};let t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;let o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let r=!1;for(let s of o){if(typeof s!="object"||s===null)continue;let l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){r=!0;break}}return r&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Ir(e,t){let n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function cA(e){let t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function vN(e){let t={},n=u(e,["responsesFile"]);n!=null&&f(t,["fileName"],n);let i=u(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>WN(s))),f(t,["inlinedResponses"],r)}let o=u(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["inlinedEmbedContentResponses"],r)}return t}function SN(e){let t={},n=u(e,["predictionsFormat"]);n!=null&&f(t,["format"],n);let i=u(e,["gcsDestination","outputUriPrefix"]);i!=null&&f(t,["gcsUri"],i);let o=u(e,["bigqueryDestination","outputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function TN(e){let t={},n=u(e,["format"]);n!=null&&f(t,["predictionsFormat"],n);let i=u(e,["gcsUri"]);i!=null&&f(t,["gcsDestination","outputUriPrefix"],i);let o=u(e,["bigqueryUri"]);if(o!=null&&f(t,["bigqueryDestination","outputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function au(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata","displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["metadata","state"]);o!=null&&f(t,["state"],cA(o));let r=u(e,["metadata","createTime"]);r!=null&&f(t,["createTime"],r);let s=u(e,["metadata","endTime"]);s!=null&&f(t,["endTime"],s);let a=u(e,["metadata","updateTime"]);a!=null&&f(t,["updateTime"],a);let l=u(e,["metadata","model"]);l!=null&&f(t,["model"],l);let c=u(e,["metadata","output"]);return c!=null&&f(t,["dest"],vN(uA(c))),t}function Zp(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["state"]);o!=null&&f(t,["state"],cA(o));let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["createTime"]);s!=null&&f(t,["createTime"],s);let a=u(e,["startTime"]);a!=null&&f(t,["startTime"],a);let l=u(e,["endTime"]);l!=null&&f(t,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&f(t,["updateTime"],c);let d=u(e,["model"]);d!=null&&f(t,["model"],d);let p=u(e,["inputConfig"]);p!=null&&f(t,["src"],xN(p));let m=u(e,["outputConfig"]);m!=null&&f(t,["dest"],SN(uA(m)));let h=u(e,["completionStats"]);return h!=null&&f(t,["completionStats"],h),t}function xN(e){let t={},n=u(e,["instancesFormat"]);n!=null&&f(t,["format"],n);let i=u(e,["gcsSource","uris"]);i!=null&&f(t,["gcsUri"],i);let o=u(e,["bigquerySource","inputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function AN(e,t){let n={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=u(t,["fileName"]);i!=null&&f(n,["fileName"],i);let o=u(t,["inlinedRequests"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>ZN(e,s))),f(n,["requests","requests"],r)}return n}function EN(e){let t={},n=u(e,["format"]);n!=null&&f(t,["instancesFormat"],n);let i=u(e,["gcsUri"]);i!=null&&f(t,["gcsSource","uris"],i);let o=u(e,["bigqueryUri"]);if(o!=null&&f(t,["bigquerySource","inputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function CN(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function _N(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function wN(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function bN(e){let t={},n=u(e,["content"]);n!=null&&f(t,["content"],n);let i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],NN(i));let o=u(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);let r=u(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);let s=u(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);let a=u(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);let l=u(e,["index"]);l!=null&&f(t,["index"],l);let c=u(e,["logprobsResult"]);c!=null&&f(t,["logprobsResult"],c);let d=u(e,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),f(t,["safetyRatings"],m)}let p=u(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function NN(e){let t={},n=u(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function fA(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r1(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function RN(e,t){let n={},i=u(e,["displayName"]);if(t!==void 0&&i!=null&&f(t,["batch","displayName"],i),u(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function IN(e,t){let n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);let o=u(e,["dest"]);return t!==void 0&&o!=null&&f(t,["outputConfig"],TN(yN(o))),n}function Ix(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["src"]);o!=null&&f(n,["batch","inputConfig"],AN(e,lA(e,o)));let r=u(t,["config"]);return r!=null&&RN(r,n),n}function MN(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["model"],oe(e,i));let o=u(t,["src"]);o!=null&&f(n,["inputConfig"],EN(lA(e,o)));let r=u(t,["config"]);return r!=null&&IN(r,n),n}function kN(e,t){let n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["batch","displayName"],i),n}function DN(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["src"]);o!=null&&f(n,["batch","inputConfig"],GN(e,o));let r=u(t,["config"]);return r!=null&&kN(r,n),n}function UN(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function LN(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function PN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);return r!=null&&f(t,["error"],r),t}function FN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);return r!=null&&f(t,["error"],r),t}function ON(e,t){let n={},i=u(t,["contents"]);if(i!=null){let r=Rm(e,i);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["requests[]","request","content"],r)}let o=u(t,["config"]);return o!=null&&(f(n,["_self"],HN(o,n)),Kb(n,{"requests[].*":"requests[].request.*"})),n}function HN(e,t){let n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);let o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);let r=u(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function GN(e,t){let n={},i=u(t,["fileName"]);i!=null&&f(n,["file_name"],i);let o=u(t,["inlinedRequests"]);return o!=null&&f(n,["requests"],ON(e,o)),n}function qN(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function BN(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function VN(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&f(t,["allowedFunctionNames"],n);let i=u(e,["mode"]);if(i!=null&&f(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function zN(e,t,n){let i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],fA(lt(o)));let r=u(t,["temperature"]);r!=null&&f(i,["temperature"],r);let s=u(t,["topP"]);s!=null&&f(i,["topP"],s);let a=u(t,["topK"]);a!=null&&f(i,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=u(t,["logprobs"]);m!=null&&f(i,["logprobs"],m);let h=u(t,["presencePenalty"]);h!=null&&f(i,["presencePenalty"],h);let g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);let S=u(t,["seed"]);S!=null&&f(i,["seed"],S);let x=u(t,["responseMimeType"]);x!=null&&f(i,["responseMimeType"],x);let y=u(t,["responseSchema"]);y!=null&&f(i,["responseSchema"],Im(y));let v=u(t,["responseJsonSchema"]);if(v!=null&&f(i,["responseJsonSchema"],v),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=u(t,["safetySettings"]);if(n!==void 0&&T!=null){let pe=T;Array.isArray(pe)&&(pe=pe.map(z=>s1(z))),f(n,["safetySettings"],pe)}let A=u(t,["tools"]);if(n!==void 0&&A!=null){let pe=Rr(A);Array.isArray(pe)&&(pe=pe.map(z=>l1(Nr(z)))),f(n,["tools"],pe)}let C=u(t,["toolConfig"]);if(n!==void 0&&C!=null&&f(n,["toolConfig"],a1(C)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let I=u(t,["cachedContent"]);n!==void 0&&I!=null&&f(n,["cachedContent"],ni(e,I));let _=u(t,["responseModalities"]);_!=null&&f(i,["responseModalities"],_);let M=u(t,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);let R=u(t,["speechConfig"]);if(R!=null&&f(i,["speechConfig"],Mm(R)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let N=u(t,["thinkingConfig"]);N!=null&&f(i,["thinkingConfig"],N);let q=u(t,["imageConfig"]);q!=null&&f(i,["imageConfig"],QN(q));let Se=u(t,["enableEnhancedCivicAnswers"]);if(Se!=null&&f(i,["enableEnhancedCivicAnswers"],Se),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function $N(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>bN(c))),f(t,["candidates"],l)}let o=u(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);let r=u(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);let s=u(e,["responseId"]);s!=null&&f(t,["responseId"],s);let a=u(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function YN(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function JN(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function KN(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function XN(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function QN(e){let t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);let i=u(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function ZN(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["request","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let a=en(o);Array.isArray(a)&&(a=a.map(l=>fA(l))),f(n,["request","contents"],a)}let r=u(t,["metadata"]);r!=null&&f(n,["metadata"],r);let s=u(t,["config"]);return s!=null&&f(n,["request","generationConfig"],zN(e,s,u(n,["request"],{}))),n}function WN(e){let t={},n=u(e,["response"]);n!=null&&f(t,["response"],$N(n));let i=u(e,["error"]);return i!=null&&f(t,["error"],i),t}function jN(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);if(t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),u(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function e1(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);let r=u(e,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),n}function t1(e){let t={},n=u(e,["config"]);return n!=null&&jN(n,t),t}function n1(e){let t={},n=u(e,["config"]);return n!=null&&e1(n,t),t}function i1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["operations"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>au(s))),f(t,["batchJobs"],r)}return t}function o1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["batchPredictionJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Zp(s))),f(t,["batchJobs"],r)}return t}function r1(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],qN(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],BN(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],CN(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function s1(e){let t={},n=u(e,["category"]);if(n!=null&&f(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function a1(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&f(t,["retrievalConfig"],n);let i=u(e,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],VN(i)),t}function l1(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],KN(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],XN(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}var ei;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(ei||(ei={}));var ti=class{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,r;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(r=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}};var Wp=class extends fn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ti(ei.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){let n=Ix(this.apiClient,t),i=n._url,o=D("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(let d of l){let p=Object.assign({},d);if(p.systemInstruction){let m=p.systemInstruction;delete p.systemInstruction;let h=p.request;h.systemInstruction=m,p.request=h}c.push(p)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){let i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){let r=this.getGcsUri(t),s=this.getBigqueryUri(t);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${o}`;else if(s)i.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=MN(this.apiClient,t);return a=D("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Zp(d))}else{let c=Ix(this.apiClient,t);return a=D("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>au(d))}}async createEmbeddingsInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=DN(this.apiClient,t);return r=D("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>au(l))}}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=JN(this.apiClient,t);return a=D("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Zp(d))}else{let c=YN(this.apiClient,t);return a=D("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>au(d))}}async cancel(t){var n,i,o,r;let s="",a={};if(this.apiClient.isVertexAI()){let l=wN(this.apiClient,t);s=D("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{let l=_N(this.apiClient,t);s=D("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=n1(t);return a=D("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=o1(d),m=new vu;return Object.assign(m,p),m})}else{let c=t1(t);return a=D("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=i1(d),m=new vu;return Object.assign(m,p),m})}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=LN(this.apiClient,t);return a=D("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>FN(d))}else{let c=UN(this.apiClient,t);return a=D("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>PN(d))}}};function u1(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Mx(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>k1(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function c1(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);let r=u(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);let s=u(e,["contents"]);if(t!==void 0&&s!=null){let d=en(s);Array.isArray(d)&&(d=d.map(p=>Mx(p))),f(t,["contents"],d)}let a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],Mx(lt(a)));let l=u(e,["tools"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>U1(p))),f(t,["tools"],d)}let c=u(e,["toolConfig"]);if(t!==void 0&&c!=null&&f(t,["toolConfig"],D1(c)),u(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function f1(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);let r=u(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);let s=u(e,["contents"]);if(t!==void 0&&s!=null){let p=en(s);Array.isArray(p)&&(p=p.map(m=>m)),f(t,["contents"],p)}let a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],lt(a));let l=u(e,["tools"]);if(t!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>L1(m))),f(t,["tools"],p)}let c=u(e,["toolConfig"]);t!==void 0&&c!=null&&f(t,["toolConfig"],c);let d=u(e,["kmsKeyName"]);return t!==void 0&&d!=null&&f(t,["encryption_spec","kmsKeyName"],d),n}function d1(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["model"],jx(e,i));let o=u(t,["config"]);return o!=null&&c1(o,n),n}function p1(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["model"],jx(e,i));let o=u(t,["config"]);return o!=null&&f1(o,n),n}function m1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ni(e,i)),n}function h1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ni(e,i)),n}function g1(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function y1(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function v1(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function S1(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function T1(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&f(t,["allowedFunctionNames"],n);let i=u(e,["mode"]);if(i!=null&&f(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function x1(e){let t={},n=u(e,["description"]);n!=null&&f(t,["description"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);let r=u(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);let s=u(e,["response"]);s!=null&&f(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&f(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function A1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ni(e,i)),n}function E1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ni(e,i)),n}function C1(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function _1(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function w1(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function b1(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function N1(e){let t={},n=u(e,["config"]);return n!=null&&w1(n,t),t}function R1(e){let t={},n=u(e,["config"]);return n!=null&&b1(n,t),t}function I1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function M1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function k1(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],v1(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],S1(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],u1(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function D1(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&f(t,["retrievalConfig"],n);let i=u(e,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],T1(i)),t}function U1(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],C1(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],_1(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function L1(e){let t={},n=u(e,["retrieval"]);n!=null&&f(t,["retrieval"],n);let i=u(e,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);let r=u(e,["enterpriseWebSearch"]);r!=null&&f(t,["enterpriseWebSearch"],r);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>x1(m))),f(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);let d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function P1(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function F1(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function O1(e,t){let n={},i=u(t,["name"]);i!=null&&f(n,["_url","name"],ni(e,i));let o=u(t,["config"]);return o!=null&&P1(o,n),n}function H1(e,t){let n={},i=u(t,["name"]);i!=null&&f(n,["_url","name"],ni(e,i));let o=u(t,["config"]);return o!=null&&F1(o,n),n}var jp=class extends fn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ti(ei.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=p1(this.apiClient,t);return a=D("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=d1(this.apiClient,t);return a=D("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=E1(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=A1(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=h1(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=y1(d),m=new gu;return Object.assign(m,p),m})}else{let c=m1(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=g1(d),m=new gu;return Object.assign(m,p),m})}}async update(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=H1(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=O1(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=R1(t);return a=D("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=M1(d),m=new yu;return Object.assign(m,p),m})}else{let c=N1(t);return a=D("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=I1(d),m=new yu;return Object.assign(m,p),m})}}};function Tu(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function kx(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(e){return this instanceof Y?(this.v=e,this):new Y(e)}function un(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(g){return Promise.resolve(g).then(h,p)}}function a(h,g){i[h]&&(o[h]=function(S){return new Promise(function(x,y){r.push([h,S,x,y])>1||l(h,S)})},g&&(o[h]=g(o[h])))}function l(h,g){try{c(i[h](g))}catch(S){m(r[0][3],S)}}function c(h){h.value instanceof Y?Promise.resolve(h.value.v).then(d,p):m(r[0][2],h)}function d(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),r.shift(),r.length&&l(r[0][0],r[0][1])}}function cn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof kx=="function"?kx(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(s){return new Promise(function(a,l){s=e[r](s),o(a,l,s.done,s.value)})}}function o(r,s,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},s)}}function G1(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;let n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:dA(n)}function dA(e){if(e.parts===void 0||e.parts.length===0)return!1;for(let t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function q1(e){if(e.length!==0){for(let t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Dx(e){if(e===void 0||e.length===0)return[];let t=[],n=e.length,i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{let o=[],r=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),r&&!dA(e[i])&&(r=!1),i++;r?t.push(...o):t.pop()}return t}var em=class{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new tm(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}},tm=class{constructor(t,n,i,o={},r=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),q1(r)}async sendMessage(t){var n;await this.sendPromise;let i=lt(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,s,a;let l=await o,c=(s=(r=l.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content,d=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length,m=[];d!=null&&(m=(a=d.slice(p))!==null&&a!==void 0?a:[]);let h=c?[c]:[];this.recordHistory(i,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;let i=lt(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let r=await o;return this.processStreamResponse(r,i)}getHistory(t=!1){let n=t?Dx(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return un(this,arguments,function*(){var o,r,s,a,l,c;let d=[];try{for(var p=!0,m=cn(t),h;h=yield Y(m.next()),o=h.done,!o;p=!0){a=h.value,p=!1;let g=a;if(G1(g)){let S=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;S!==void 0&&d.push(S)}yield yield Y(g)}}catch(g){r={error:g}}finally{try{!p&&!o&&(s=m.return)&&(yield Y(s.call(m)))}finally{if(r)throw r.error}}this.recordHistory(n,d)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(r=>r.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Dx(i)):this.history.push(t),this.history.push(...o)}};var po=class extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,po.prototype)}};function B1(e){let t={},n=u(e,["file"]);return n!=null&&f(t,["file"],n),t}function V1(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function z1(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","file"],rA(n)),t}function $1(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function Y1(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","file"],rA(n)),t}function J1(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function K1(e){let t={},n=u(e,["config"]);return n!=null&&J1(n,t),t}function X1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["files"],r)}return t}var nm=class extends fn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ti(ei.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=K1(t);return r=D("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=X1(l),d=new $p;return Object.assign(d,c),d})}}async createInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=B1(t);return r=D("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=V1(l),d=new Yp;return Object.assign(d,c),d})}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Y1(t);return r=D("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=z1(t);return r=D("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=$1(l),d=new Jp;return Object.assign(d,c),d})}}};function lu(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Q1(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>dR(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function Z1(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function W1(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function j1(e){let t={},n=u(e,["description"]);n!=null&&f(t,["description"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);let r=u(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);let s=u(e,["response"]);s!=null&&f(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&f(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function eR(e){let t={},n=u(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);let i=u(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);let o=u(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);let r=u(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);let s=u(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);let a=u(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);let l=u(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);let c=u(e,["maxOutputTokens"]);c!=null&&f(t,["maxOutputTokens"],c);let d=u(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);let p=u(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);let m=u(e,["responseLogprobs"]);m!=null&&f(t,["responseLogprobs"],m);let h=u(e,["responseMimeType"]);h!=null&&f(t,["responseMimeType"],h);let g=u(e,["responseModalities"]);g!=null&&f(t,["responseModalities"],g);let S=u(e,["responseSchema"]);S!=null&&f(t,["responseSchema"],S);let x=u(e,["routingConfig"]);x!=null&&f(t,["routingConfig"],x);let y=u(e,["seed"]);y!=null&&f(t,["seed"],y);let v=u(e,["speechConfig"]);v!=null&&f(t,["speechConfig"],v);let T=u(e,["stopSequences"]);T!=null&&f(t,["stopSequences"],T);let A=u(e,["temperature"]);A!=null&&f(t,["temperature"],A);let C=u(e,["thinkingConfig"]);C!=null&&f(t,["thinkingConfig"],C);let I=u(e,["topK"]);I!=null&&f(t,["topK"],I);let _=u(e,["topP"]);if(_!=null&&f(t,["topP"],_),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function tR(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function nR(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function iR(e,t){let n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);let r=u(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);let s=u(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","mediaResolution"],c);let d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],km(p));let m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);let h=u(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],h);let g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],Q1(lt(g)));let S=u(e,["tools"]);if(t!==void 0&&S!=null){let I=Rr(S);Array.isArray(I)&&(I=I.map(_=>mR(Nr(_)))),f(t,["setup","tools"],I)}let x=u(e,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],pR(x));let y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);let v=u(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","outputAudioTranscription"],v);let T=u(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&f(t,["setup","realtimeInputConfig"],T);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&f(t,["setup","contextWindowCompression"],A);let C=u(e,["proactivity"]);if(t!==void 0&&C!=null&&f(t,["setup","proactivity"],C),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function oR(e,t){let n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],eR(i));let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);let r=u(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);let s=u(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","mediaResolution"],c);let d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],km(p));let m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);let h=u(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],h);let g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],lt(g));let S=u(e,["tools"]);if(t!==void 0&&S!=null){let _=Rr(S);Array.isArray(_)&&(_=_.map(M=>hR(Nr(M)))),f(t,["setup","tools"],_)}let x=u(e,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],x);let y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);let v=u(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","outputAudioTranscription"],v);let T=u(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&f(t,["setup","realtimeInputConfig"],T);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&f(t,["setup","contextWindowCompression"],A);let C=u(e,["proactivity"]);t!==void 0&&C!=null&&f(t,["setup","proactivity"],C);let I=u(e,["explicitVadSignal"]);return t!==void 0&&I!=null&&f(t,["setup","explicitVadSignal"],I),n}function rR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],oe(e,i));let o=u(t,["config"]);return o!=null&&f(n,["config"],iR(o,n)),n}function sR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],oe(e,i));let o=u(t,["config"]);return o!=null&&f(n,["config"],oR(o,n)),n}function aR(e){let t={},n=u(e,["musicGenerationConfig"]);return n!=null&&f(t,["musicGenerationConfig"],n),t}function lR(e){let t={},n=u(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["weightedPrompts"],i)}return t}function uR(e){let t={},n=u(e,["media"]);if(n!=null){let c=eA(n);Array.isArray(c)&&(c=c.map(d=>lu(d))),f(t,["mediaChunks"],c)}let i=u(e,["audio"]);i!=null&&f(t,["audio"],lu(nA(i)));let o=u(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);let r=u(e,["video"]);r!=null&&f(t,["video"],lu(tA(r)));let s=u(e,["text"]);s!=null&&f(t,["text"],s);let a=u(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);let l=u(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function cR(e){let t={},n=u(e,["media"]);if(n!=null){let c=eA(n);Array.isArray(c)&&(c=c.map(d=>d)),f(t,["mediaChunks"],c)}let i=u(e,["audio"]);i!=null&&f(t,["audio"],nA(i));let o=u(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);let r=u(e,["video"]);r!=null&&f(t,["video"],tA(r));let s=u(e,["text"]);s!=null&&f(t,["text"],s);let a=u(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);let l=u(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function fR(e){let t={},n=u(e,["setupComplete"]);n!=null&&f(t,["setupComplete"],n);let i=u(e,["serverContent"]);i!=null&&f(t,["serverContent"],i);let o=u(e,["toolCall"]);o!=null&&f(t,["toolCall"],o);let r=u(e,["toolCallCancellation"]);r!=null&&f(t,["toolCallCancellation"],r);let s=u(e,["usageMetadata"]);s!=null&&f(t,["usageMetadata"],gR(s));let a=u(e,["goAway"]);a!=null&&f(t,["goAway"],a);let l=u(e,["sessionResumptionUpdate"]);l!=null&&f(t,["sessionResumptionUpdate"],l);let c=u(e,["voiceActivityDetectionSignal"]);c!=null&&f(t,["voiceActivityDetectionSignal"],c);let d=u(e,["voiceActivity"]);return d!=null&&f(t,["voiceActivity"],yR(d)),t}function dR(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],Z1(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],W1(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],lu(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function pR(e){let t={},n=u(e,["handle"]);if(n!=null&&f(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function mR(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],tR(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],nR(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function hR(e){let t={},n=u(e,["retrieval"]);n!=null&&f(t,["retrieval"],n);let i=u(e,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);let r=u(e,["enterpriseWebSearch"]);r!=null&&f(t,["enterpriseWebSearch"],r);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>j1(m))),f(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);let d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function gR(e){let t={},n=u(e,["promptTokenCount"]);n!=null&&f(t,["promptTokenCount"],n);let i=u(e,["cachedContentTokenCount"]);i!=null&&f(t,["cachedContentTokenCount"],i);let o=u(e,["candidatesTokenCount"]);o!=null&&f(t,["responseTokenCount"],o);let r=u(e,["toolUsePromptTokenCount"]);r!=null&&f(t,["toolUsePromptTokenCount"],r);let s=u(e,["thoughtsTokenCount"]);s!=null&&f(t,["thoughtsTokenCount"],s);let a=u(e,["totalTokenCount"]);a!=null&&f(t,["totalTokenCount"],a);let l=u(e,["promptTokensDetails"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["promptTokensDetails"],h)}let c=u(e,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["cacheTokensDetails"],h)}let d=u(e,["candidatesTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["responseTokensDetails"],h)}let p=u(e,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["toolUsePromptTokensDetails"],h)}let m=u(e,["trafficType"]);return m!=null&&f(t,["trafficType"],m),t}function yR(e){let t={},n=u(e,["type"]);return n!=null&&f(t,["voiceActivityType"],n),t}function vR(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function SR(e){let t={},n=u(e,["content"]);n!=null&&f(t,["content"],n);let i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],TR(i));let o=u(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);let r=u(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);let s=u(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);let a=u(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);let l=u(e,["index"]);l!=null&&f(t,["index"],l);let c=u(e,["logprobsResult"]);c!=null&&f(t,["logprobsResult"],c);let d=u(e,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),f(t,["safetyRatings"],m)}let p=u(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function TR(e){let t={},n=u(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function xR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let r=en(o);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["contents"],r)}return n}function AR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(t,["tokensInfo"],o)}return t}function ER(e){let t={},n=u(e,["values"]);n!=null&&f(t,["values"],n);let i=u(e,["statistics"]);return i!=null&&f(t,["statistics"],CR(i)),t}function CR(e){let t={},n=u(e,["truncated"]);n!=null&&f(t,["truncated"],n);let i=u(e,["token_count"]);return i!=null&&f(t,["tokenCount"],i),t}function Lu(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>DI(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function _R(e){let t={},n=u(e,["controlType"]);n!=null&&f(t,["controlType"],n);let i=u(e,["enableControlImageComputation"]);return i!=null&&f(t,["computeControl"],i),t}function wR(e){let t={};if(u(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function bR(e,t){let n={},i=u(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],lt(i));let o=u(e,["tools"]);if(t!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>gA(a))),f(t,["tools"],s)}let r=u(e,["generationConfig"]);return t!==void 0&&r!=null&&f(t,["generationConfig"],vI(r)),n}function NR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=en(o);Array.isArray(s)&&(s=s.map(a=>Lu(a))),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&wR(r),n}function RR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=en(o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&bR(r,n),n}function IR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["totalTokens"]);i!=null&&f(t,["totalTokens"],i);let o=u(e,["cachedContentTokenCount"]);return o!=null&&f(t,["cachedContentTokenCount"],o),t}function MR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["totalTokens"]);return i!=null&&f(t,["totalTokens"],i),t}function kR(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function DR(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function UR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function LR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function PR(e,t){let n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);let o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);let r=u(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);let s=u(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);let a=u(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);let l=u(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);let c=u(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&f(t,["parameters","safetySetting"],c);let d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);let p=u(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);let m=u(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);let h=u(e,["language"]);t!==void 0&&h!=null&&f(t,["parameters","language"],h);let g=u(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);let S=u(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&f(t,["parameters","outputOptions","compressionQuality"],S);let x=u(e,["addWatermark"]);t!==void 0&&x!=null&&f(t,["parameters","addWatermark"],x);let y=u(e,["labels"]);t!==void 0&&y!=null&&f(t,["labels"],y);let v=u(e,["editMode"]);t!==void 0&&v!=null&&f(t,["parameters","editMode"],v);let T=u(e,["baseSteps"]);return t!==void 0&&T!=null&&f(t,["parameters","editConfig","baseSteps"],T),n}function FR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>HI(l))),f(n,["instances[0]","referenceImages"],a)}let s=u(t,["config"]);return s!=null&&PR(s,n),n}function OR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Pu(r))),f(t,["generatedImages"],o)}return t}function HR(e,t){let n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);let o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);let r=u(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function GR(e,t){let n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["instances[]","task_type"],i);let o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["instances[]","title"],o);let r=u(e,["outputDimensionality"]);t!==void 0&&r!=null&&f(t,["parameters","outputDimensionality"],r);let s=u(e,["mimeType"]);t!==void 0&&s!=null&&f(t,["instances[]","mimeType"],s);let a=u(e,["autoTruncate"]);return t!==void 0&&a!=null&&f(t,["parameters","autoTruncate"],a),n}function qR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let a=Rm(e,o);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}let r=u(t,["config"]);r!=null&&HR(r,n);let s=u(t,["model"]);return s!==void 0&&f(n,["requests[]","model"],oe(e,s)),n}function BR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=Rm(e,o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["instances[]","content"],s)}let r=u(t,["config"]);return r!=null&&GR(r,n),n}function VR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["embeddings"],r)}let o=u(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function zR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>ER(s))),f(t,["embeddings"],r)}let o=u(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function $R(e){let t={},n=u(e,["endpoint"]);n!=null&&f(t,["name"],n);let i=u(e,["deployedModelId"]);return i!=null&&f(t,["deployedModelId"],i),t}function YR(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function JR(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function KR(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&f(t,["allowedFunctionNames"],n);let i=u(e,["mode"]);if(i!=null&&f(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function XR(e){let t={},n=u(e,["description"]);n!=null&&f(t,["description"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);let r=u(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);let s=u(e,["response"]);s!=null&&f(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&f(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function QR(e,t,n){let i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],Lu(lt(o)));let r=u(t,["temperature"]);r!=null&&f(i,["temperature"],r);let s=u(t,["topP"]);s!=null&&f(i,["topP"],s);let a=u(t,["topK"]);a!=null&&f(i,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=u(t,["logprobs"]);m!=null&&f(i,["logprobs"],m);let h=u(t,["presencePenalty"]);h!=null&&f(i,["presencePenalty"],h);let g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);let S=u(t,["seed"]);S!=null&&f(i,["seed"],S);let x=u(t,["responseMimeType"]);x!=null&&f(i,["responseMimeType"],x);let y=u(t,["responseSchema"]);y!=null&&f(i,["responseSchema"],Im(y));let v=u(t,["responseJsonSchema"]);if(v!=null&&f(i,["responseJsonSchema"],v),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=u(t,["safetySettings"]);if(n!==void 0&&T!=null){let pe=T;Array.isArray(pe)&&(pe=pe.map(z=>GI(z))),f(n,["safetySettings"],pe)}let A=u(t,["tools"]);if(n!==void 0&&A!=null){let pe=Rr(A);Array.isArray(pe)&&(pe=pe.map(z=>JI(Nr(z)))),f(n,["tools"],pe)}let C=u(t,["toolConfig"]);if(n!==void 0&&C!=null&&f(n,["toolConfig"],YI(C)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let I=u(t,["cachedContent"]);n!==void 0&&I!=null&&f(n,["cachedContent"],ni(e,I));let _=u(t,["responseModalities"]);_!=null&&f(i,["responseModalities"],_);let M=u(t,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);let R=u(t,["speechConfig"]);if(R!=null&&f(i,["speechConfig"],Mm(R)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let N=u(t,["thinkingConfig"]);N!=null&&f(i,["thinkingConfig"],N);let q=u(t,["imageConfig"]);q!=null&&f(i,["imageConfig"],EI(q));let Se=u(t,["enableEnhancedCivicAnswers"]);if(Se!=null&&f(i,["enableEnhancedCivicAnswers"],Se),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function ZR(e,t,n){let i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],lt(o));let r=u(t,["temperature"]);r!=null&&f(i,["temperature"],r);let s=u(t,["topP"]);s!=null&&f(i,["topP"],s);let a=u(t,["topK"]);a!=null&&f(i,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=u(t,["logprobs"]);m!=null&&f(i,["logprobs"],m);let h=u(t,["presencePenalty"]);h!=null&&f(i,["presencePenalty"],h);let g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);let S=u(t,["seed"]);S!=null&&f(i,["seed"],S);let x=u(t,["responseMimeType"]);x!=null&&f(i,["responseMimeType"],x);let y=u(t,["responseSchema"]);y!=null&&f(i,["responseSchema"],Im(y));let v=u(t,["responseJsonSchema"]);v!=null&&f(i,["responseJsonSchema"],v);let T=u(t,["routingConfig"]);T!=null&&f(i,["routingConfig"],T);let A=u(t,["modelSelectionConfig"]);A!=null&&f(i,["modelConfig"],A);let C=u(t,["safetySettings"]);if(n!==void 0&&C!=null){let bt=C;Array.isArray(bt)&&(bt=bt.map(yn=>yn)),f(n,["safetySettings"],bt)}let I=u(t,["tools"]);if(n!==void 0&&I!=null){let bt=Rr(I);Array.isArray(bt)&&(bt=bt.map(yn=>gA(Nr(yn)))),f(n,["tools"],bt)}let _=u(t,["toolConfig"]);n!==void 0&&_!=null&&f(n,["toolConfig"],_);let M=u(t,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);let R=u(t,["cachedContent"]);n!==void 0&&R!=null&&f(n,["cachedContent"],ni(e,R));let N=u(t,["responseModalities"]);N!=null&&f(i,["responseModalities"],N);let q=u(t,["mediaResolution"]);q!=null&&f(i,["mediaResolution"],q);let Se=u(t,["speechConfig"]);Se!=null&&f(i,["speechConfig"],Mm(Se));let pe=u(t,["audioTimestamp"]);pe!=null&&f(i,["audioTimestamp"],pe);let z=u(t,["thinkingConfig"]);z!=null&&f(i,["thinkingConfig"],z);let st=u(t,["imageConfig"]);if(st!=null&&f(i,["imageConfig"],CI(st)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let ai=u(t,["modelArmorConfig"]);return n!==void 0&&ai!=null&&f(n,["modelArmorConfig"],ai),i}function Ux(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=en(o);Array.isArray(s)&&(s=s.map(a=>Lu(a))),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&f(n,["generationConfig"],QR(e,r,n)),n}function Lx(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=en(o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&f(n,["generationConfig"],ZR(e,r,n)),n}function Px(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>SR(c))),f(t,["candidates"],l)}let o=u(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);let r=u(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);let s=u(e,["responseId"]);s!=null&&f(t,["responseId"],s);let a=u(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function Fx(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>d)),f(t,["candidates"],c)}let o=u(e,["createTime"]);o!=null&&f(t,["createTime"],o);let r=u(e,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);let s=u(e,["promptFeedback"]);s!=null&&f(t,["promptFeedback"],s);let a=u(e,["responseId"]);a!=null&&f(t,["responseId"],a);let l=u(e,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function WR(e,t){let n={};if(u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=u(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);let o=u(e,["aspectRatio"]);t!==void 0&&o!=null&&f(t,["parameters","aspectRatio"],o);let r=u(e,["guidanceScale"]);if(t!==void 0&&r!=null&&f(t,["parameters","guidanceScale"],r),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=u(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&f(t,["parameters","safetySetting"],s);let a=u(e,["personGeneration"]);t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a);let l=u(e,["includeSafetyAttributes"]);t!==void 0&&l!=null&&f(t,["parameters","includeSafetyAttributes"],l);let c=u(e,["includeRaiReason"]);t!==void 0&&c!=null&&f(t,["parameters","includeRaiReason"],c);let d=u(e,["language"]);t!==void 0&&d!=null&&f(t,["parameters","language"],d);let p=u(e,["outputMimeType"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","mimeType"],p);let m=u(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&f(t,["parameters","outputOptions","compressionQuality"],m),u(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let h=u(e,["imageSize"]);if(t!==void 0&&h!=null&&f(t,["parameters","sampleImageSize"],h),u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function jR(e,t){let n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);let o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);let r=u(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);let s=u(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);let a=u(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);let l=u(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);let c=u(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&f(t,["parameters","safetySetting"],c);let d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);let p=u(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);let m=u(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);let h=u(e,["language"]);t!==void 0&&h!=null&&f(t,["parameters","language"],h);let g=u(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);let S=u(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&f(t,["parameters","outputOptions","compressionQuality"],S);let x=u(e,["addWatermark"]);t!==void 0&&x!=null&&f(t,["parameters","addWatermark"],x);let y=u(e,["labels"]);t!==void 0&&y!=null&&f(t,["labels"],y);let v=u(e,["imageSize"]);t!==void 0&&v!=null&&f(t,["parameters","sampleImageSize"],v);let T=u(e,["enhancePrompt"]);return t!==void 0&&T!=null&&f(t,["parameters","enhancePrompt"],T),n}function eI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["config"]);return r!=null&&WR(r,n),n}function tI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["config"]);return r!=null&&jR(r,n),n}function nI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>mI(s))),f(t,["generatedImages"],r)}let o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],mA(o)),t}function iI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Pu(s))),f(t,["generatedImages"],r)}let o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],hA(o)),t}function oI(e,t){let n={},i=u(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i),u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=u(e,["durationSeconds"]);if(t!==void 0&&o!=null&&f(t,["parameters","durationSeconds"],o),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let r=u(e,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);let s=u(e,["resolution"]);t!==void 0&&s!=null&&f(t,["parameters","resolution"],s);let a=u(e,["personGeneration"]);if(t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a),u(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let l=u(e,["negativePrompt"]);t!==void 0&&l!=null&&f(t,["parameters","negativePrompt"],l);let c=u(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&f(t,["parameters","enhancePrompt"],c),u(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let d=u(e,["lastFrame"]);t!==void 0&&d!=null&&f(t,["instances[0]","lastFrame"],Fu(d));let p=u(e,["referenceImages"]);if(t!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>sM(h))),f(t,["instances[0]","referenceImages"],m)}if(u(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function rI(e,t){let n={},i=u(e,["numberOfVideos"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);let o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&f(t,["parameters","storageUri"],o);let r=u(e,["fps"]);t!==void 0&&r!=null&&f(t,["parameters","fps"],r);let s=u(e,["durationSeconds"]);t!==void 0&&s!=null&&f(t,["parameters","durationSeconds"],s);let a=u(e,["seed"]);t!==void 0&&a!=null&&f(t,["parameters","seed"],a);let l=u(e,["aspectRatio"]);t!==void 0&&l!=null&&f(t,["parameters","aspectRatio"],l);let c=u(e,["resolution"]);t!==void 0&&c!=null&&f(t,["parameters","resolution"],c);let d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);let p=u(e,["pubsubTopic"]);t!==void 0&&p!=null&&f(t,["parameters","pubsubTopic"],p);let m=u(e,["negativePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","negativePrompt"],m);let h=u(e,["enhancePrompt"]);t!==void 0&&h!=null&&f(t,["parameters","enhancePrompt"],h);let g=u(e,["generateAudio"]);t!==void 0&&g!=null&&f(t,["parameters","generateAudio"],g);let S=u(e,["lastFrame"]);t!==void 0&&S!=null&&f(t,["instances[0]","lastFrame"],pn(S));let x=u(e,["referenceImages"]);if(t!==void 0&&x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>aM(A))),f(t,["instances[0]","referenceImages"],T)}let y=u(e,["mask"]);t!==void 0&&y!=null&&f(t,["instances[0]","mask"],rM(y));let v=u(e,["compressionQuality"]);return t!==void 0&&v!=null&&f(t,["parameters","compressionQuality"],v),n}function sI(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],cI(s)),t}function aI(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],fI(s)),t}function lI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["image"]);r!=null&&f(n,["instances[0]","image"],Fu(r));let s=u(t,["video"]);s!=null&&f(n,["instances[0]","video"],yA(s));let a=u(t,["source"]);a!=null&&dI(a,n);let l=u(t,["config"]);return l!=null&&oI(l,n),n}function uI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["image"]);r!=null&&f(n,["instances[0]","image"],pn(r));let s=u(t,["video"]);s!=null&&f(n,["instances[0]","video"],vA(s));let a=u(t,["source"]);a!=null&&pI(a,n);let l=u(t,["config"]);return l!=null&&rI(l,n),n}function cI(e){let t={},n=u(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>gI(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function fI(e){let t={},n=u(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>yI(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function dI(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],Fu(o));let r=u(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],yA(r)),n}function pI(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],pn(o));let r=u(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],vA(r)),n}function mI(e){let t={},n=u(e,["_self"]);n!=null&&f(t,["image"],_I(n));let i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);let o=u(e,["_self"]);return o!=null&&f(t,["safetyAttributes"],mA(o)),t}function Pu(e){let t={},n=u(e,["_self"]);n!=null&&f(t,["image"],pA(n));let i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);let o=u(e,["_self"]);o!=null&&f(t,["safetyAttributes"],hA(o));let r=u(e,["prompt"]);return r!=null&&f(t,["enhancedPrompt"],r),t}function hI(e){let t={},n=u(e,["_self"]);n!=null&&f(t,["mask"],pA(n));let i=u(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(t,["labels"],o)}return t}function gI(e){let t={},n=u(e,["video"]);return n!=null&&f(t,["video"],iM(n)),t}function yI(e){let t={},n=u(e,["_self"]);return n!=null&&f(t,["video"],oM(n)),t}function vI(e){let t={},n=u(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);let i=u(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);let o=u(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);let r=u(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);let s=u(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);let a=u(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);let l=u(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);let c=u(e,["maxOutputTokens"]);c!=null&&f(t,["maxOutputTokens"],c);let d=u(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);let p=u(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);let m=u(e,["responseLogprobs"]);m!=null&&f(t,["responseLogprobs"],m);let h=u(e,["responseMimeType"]);h!=null&&f(t,["responseMimeType"],h);let g=u(e,["responseModalities"]);g!=null&&f(t,["responseModalities"],g);let S=u(e,["responseSchema"]);S!=null&&f(t,["responseSchema"],S);let x=u(e,["routingConfig"]);x!=null&&f(t,["routingConfig"],x);let y=u(e,["seed"]);y!=null&&f(t,["seed"],y);let v=u(e,["speechConfig"]);v!=null&&f(t,["speechConfig"],v);let T=u(e,["stopSequences"]);T!=null&&f(t,["stopSequences"],T);let A=u(e,["temperature"]);A!=null&&f(t,["temperature"],A);let C=u(e,["thinkingConfig"]);C!=null&&f(t,["thinkingConfig"],C);let I=u(e,["topK"]);I!=null&&f(t,["topK"],I);let _=u(e,["topP"]);if(_!=null&&f(t,["topP"],_),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function SI(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function TI(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function xI(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function AI(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function EI(e){let t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);let i=u(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function CI(e){let t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);let i=u(e,["imageSize"]);i!=null&&f(t,["imageSize"],i);let o=u(e,["personGeneration"]);o!=null&&f(t,["personGeneration"],o);let r=u(e,["outputMimeType"]);r!=null&&f(t,["imageOutputOptions","mimeType"],r);let s=u(e,["outputCompressionQuality"]);return s!=null&&f(t,["imageOutputOptions","compressionQuality"],s),t}function _I(e){let t={},n=u(e,["bytesBase64Encoded"]);n!=null&&f(t,["imageBytes"],Fi(n));let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function pA(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);let i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["imageBytes"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Fu(e){let t={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=u(e,["imageBytes"]);n!=null&&f(t,["bytesBase64Encoded"],Fi(n));let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function pn(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);let i=u(e,["imageBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function wI(e,t,n){let i={},o=u(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);let r=u(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);let s=u(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);let a=u(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],sA(e,a)),i}function bI(e,t,n){let i={},o=u(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);let r=u(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);let s=u(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);let a=u(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],sA(e,a)),i}function NI(e,t){let n={},i=u(t,["config"]);return i!=null&&wI(e,i,n),n}function RI(e,t){let n={},i=u(t,["config"]);return i!=null&&bI(e,i,n),n}function II(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["_self"]);if(o!=null){let r=aA(o);Array.isArray(r)&&(r=r.map(s=>im(s))),f(t,["models"],r)}return t}function MI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["_self"]);if(o!=null){let r=aA(o);Array.isArray(r)&&(r=r.map(s=>om(s))),f(t,["models"],r)}return t}function kI(e){let t={},n=u(e,["maskMode"]);n!=null&&f(t,["maskMode"],n);let i=u(e,["segmentationClasses"]);i!=null&&f(t,["maskClasses"],i);let o=u(e,["maskDilation"]);return o!=null&&f(t,["dilation"],o),t}function im(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);o!=null&&f(t,["description"],o);let r=u(e,["version"]);r!=null&&f(t,["version"],r);let s=u(e,["_self"]);s!=null&&f(t,["tunedModelInfo"],KI(s));let a=u(e,["inputTokenLimit"]);a!=null&&f(t,["inputTokenLimit"],a);let l=u(e,["outputTokenLimit"]);l!=null&&f(t,["outputTokenLimit"],l);let c=u(e,["supportedGenerationMethods"]);c!=null&&f(t,["supportedActions"],c);let d=u(e,["temperature"]);d!=null&&f(t,["temperature"],d);let p=u(e,["maxTemperature"]);p!=null&&f(t,["maxTemperature"],p);let m=u(e,["topP"]);m!=null&&f(t,["topP"],m);let h=u(e,["topK"]);h!=null&&f(t,["topK"],h);let g=u(e,["thinking"]);return g!=null&&f(t,["thinking"],g),t}function om(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);o!=null&&f(t,["description"],o);let r=u(e,["versionId"]);r!=null&&f(t,["version"],r);let s=u(e,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>$R(m))),f(t,["endpoints"],p)}let a=u(e,["labels"]);a!=null&&f(t,["labels"],a);let l=u(e,["_self"]);l!=null&&f(t,["tunedModelInfo"],XI(l));let c=u(e,["defaultCheckpointId"]);c!=null&&f(t,["defaultCheckpointId"],c);let d=u(e,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>m)),f(t,["checkpoints"],p)}return t}function DI(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],YR(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],JR(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],vR(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function UI(e){let t={},n=u(e,["productImage"]);return n!=null&&f(t,["image"],pn(n)),t}function LI(e,t){let n={},i=u(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);let o=u(e,["baseSteps"]);t!==void 0&&o!=null&&f(t,["parameters","baseSteps"],o);let r=u(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);let s=u(e,["seed"]);t!==void 0&&s!=null&&f(t,["parameters","seed"],s);let a=u(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&f(t,["parameters","safetySetting"],a);let l=u(e,["personGeneration"]);t!==void 0&&l!=null&&f(t,["parameters","personGeneration"],l);let c=u(e,["addWatermark"]);t!==void 0&&c!=null&&f(t,["parameters","addWatermark"],c);let d=u(e,["outputMimeType"]);t!==void 0&&d!=null&&f(t,["parameters","outputOptions","mimeType"],d);let p=u(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","compressionQuality"],p);let m=u(e,["enhancePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m);let h=u(e,["labels"]);return t!==void 0&&h!=null&&f(t,["labels"],h),n}function PI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["source"]);o!=null&&OI(o,n);let r=u(t,["config"]);return r!=null&&LI(r,n),n}function FI(e){let t={},n=u(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Pu(o))),f(t,["generatedImages"],i)}return t}function OI(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["personImage"]);t!==void 0&&o!=null&&f(t,["instances[0]","personImage","image"],pn(o));let r=u(e,["productImages"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>UI(a))),f(t,["instances[0]","productImages"],s)}return n}function HI(e){let t={},n=u(e,["referenceImage"]);n!=null&&f(t,["referenceImage"],pn(n));let i=u(e,["referenceId"]);i!=null&&f(t,["referenceId"],i);let o=u(e,["referenceType"]);o!=null&&f(t,["referenceType"],o);let r=u(e,["maskImageConfig"]);r!=null&&f(t,["maskImageConfig"],kI(r));let s=u(e,["controlImageConfig"]);s!=null&&f(t,["controlImageConfig"],_R(s));let a=u(e,["styleImageConfig"]);a!=null&&f(t,["styleImageConfig"],a);let l=u(e,["subjectImageConfig"]);return l!=null&&f(t,["subjectImageConfig"],l),t}function mA(e){let t={},n=u(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);let i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);let o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function hA(e){let t={},n=u(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);let i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);let o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function GI(e){let t={},n=u(e,["category"]);if(n!=null&&f(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function qI(e){let t={},n=u(e,["image"]);return n!=null&&f(t,["image"],pn(n)),t}function BI(e,t){let n={},i=u(e,["mode"]);t!==void 0&&i!=null&&f(t,["parameters","mode"],i);let o=u(e,["maxPredictions"]);t!==void 0&&o!=null&&f(t,["parameters","maxPredictions"],o);let r=u(e,["confidenceThreshold"]);t!==void 0&&r!=null&&f(t,["parameters","confidenceThreshold"],r);let s=u(e,["maskDilation"]);t!==void 0&&s!=null&&f(t,["parameters","maskDilation"],s);let a=u(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&f(t,["parameters","binaryColorThreshold"],a);let l=u(e,["labels"]);return t!==void 0&&l!=null&&f(t,["labels"],l),n}function VI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["source"]);o!=null&&$I(o,n);let r=u(t,["config"]);return r!=null&&BI(r,n),n}function zI(e){let t={},n=u(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>hI(o))),f(t,["generatedMasks"],i)}return t}function $I(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],pn(o));let r=u(e,["scribbleImage"]);return t!==void 0&&r!=null&&f(t,["instances[0]","scribble"],qI(r)),n}function YI(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&f(t,["retrievalConfig"],n);let i=u(e,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],KR(i)),t}function JI(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],xI(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],AI(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function gA(e){let t={},n=u(e,["retrieval"]);n!=null&&f(t,["retrieval"],n);let i=u(e,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);let r=u(e,["enterpriseWebSearch"]);r!=null&&f(t,["enterpriseWebSearch"],r);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>XR(m))),f(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);let d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function KI(e){let t={},n=u(e,["baseModel"]);n!=null&&f(t,["baseModel"],n);let i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);let o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function XI(e){let t={},n=u(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(t,["baseModel"],n);let i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);let o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function QI(e,t){let n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);let r=u(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function ZI(e,t){let n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);let r=u(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function WI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","name"],oe(e,i));let o=u(t,["config"]);return o!=null&&QI(o,n),n}function jI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["config"]);return o!=null&&ZI(o,n),n}function eM(e,t){let n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);let o=u(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&f(t,["parameters","safetySetting"],o);let r=u(e,["personGeneration"]);t!==void 0&&r!=null&&f(t,["parameters","personGeneration"],r);let s=u(e,["includeRaiReason"]);t!==void 0&&s!=null&&f(t,["parameters","includeRaiReason"],s);let a=u(e,["outputMimeType"]);t!==void 0&&a!=null&&f(t,["parameters","outputOptions","mimeType"],a);let l=u(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&f(t,["parameters","outputOptions","compressionQuality"],l);let c=u(e,["enhanceInputImage"]);t!==void 0&&c!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],c);let d=u(e,["imagePreservationFactor"]);t!==void 0&&d!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],d);let p=u(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);let m=u(e,["numberOfImages"]);t!==void 0&&m!=null&&f(t,["parameters","sampleCount"],m);let h=u(e,["mode"]);return t!==void 0&&h!=null&&f(t,["parameters","mode"],h),n}function tM(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["image"]);o!=null&&f(n,["instances[0]","image"],pn(o));let r=u(t,["upscaleFactor"]);r!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],r);let s=u(t,["config"]);return s!=null&&eM(s,n),n}function nM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Pu(r))),f(t,["generatedImages"],o)}return t}function iM(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);let i=u(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],Fi(i));let o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function oM(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["uri"],n);let i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function rM(e){let t={},n=u(e,["image"]);n!=null&&f(t,["_self"],pn(n));let i=u(e,["maskMode"]);return i!=null&&f(t,["maskMode"],i),t}function sM(e){let t={},n=u(e,["image"]);n!=null&&f(t,["image"],Fu(n));let i=u(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function aM(e){let t={},n=u(e,["image"]);n!=null&&f(t,["image"],pn(n));let i=u(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function yA(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);let i=u(e,["videoBytes"]);i!=null&&f(t,["encodedVideo"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["encoding"],o),t}function vA(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["gcsUri"],n);let i=u(e,["videoBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function lM(e,t){let n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["displayName"],i),n}function uM(e){let t={},n=u(e,["config"]);return n!=null&&lM(n,t),t}function cM(e,t){let n={},i=u(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function fM(e){let t={},n=u(e,["name"]);n!=null&&f(t,["_url","name"],n);let i=u(e,["config"]);return i!=null&&cM(i,t),t}function dM(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function pM(e,t){let n={},i=u(e,["customMetadata"]);if(t!==void 0&&i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["customMetadata"],r)}let o=u(e,["chunkingConfig"]);return t!==void 0&&o!=null&&f(t,["chunkingConfig"],o),n}function mM(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],gM(s)),t}function hM(e){let t={},n=u(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);let i=u(e,["fileName"]);i!=null&&f(t,["fileName"],i);let o=u(e,["config"]);return o!=null&&pM(o,t),t}function gM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["parent"]);i!=null&&f(t,["parent"],i);let o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function yM(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function vM(e){let t={},n=u(e,["config"]);return n!=null&&yM(n,t),t}function SM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["fileSearchStores"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["fileSearchStores"],r)}return t}function SA(e,t){let n={},i=u(e,["mimeType"]);t!==void 0&&i!=null&&f(t,["mimeType"],i);let o=u(e,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);let r=u(e,["customMetadata"]);if(t!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(t,["customMetadata"],a)}let s=u(e,["chunkingConfig"]);return t!==void 0&&s!=null&&f(t,["chunkingConfig"],s),n}function TM(e){let t={},n=u(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);let i=u(e,["config"]);return i!=null&&SA(i,t),t}function xM(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}var AM="Content-Type",EM="X-Server-Timeout",CM="User-Agent",rm="x-goog-api-client",_M="1.38.0",wM=`google-genai-sdk/${_M}`,bM="v1beta1",NM="v1beta",sm=class{constructor(t){var n,i,o;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!a?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:bM}else{if(!this.clientOptions.apiKey)throw new po({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:NM,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){let o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===Pp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));let i=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(let[s,a]of Object.entries(t.queryParams))o.searchParams.append(s,String(a));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.unaryApiCall(o,r,t.httpMethod)}patchHttpOptions(t,n){let i=JSON.parse(JSON.stringify(t));for(let[o,r]of Object.entries(n))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));let i=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.streamApiCall(o,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,o){if(n&&n.timeout||o){let r=new AbortController,s=r.signal;if(n.timeout&&n?.timeout>0){let a=setTimeout(()=>r.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),t.signal=s}return n&&n.extraBody!==null&&RM(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Ox(o),new Zs(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Ox(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return un(this,arguments,function*(){var i;let o=(i=t?.body)===null||i===void 0?void 0:i.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="",a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:c,value:d}=yield Y(o.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=r.decode(d,{stream:!0});try{let g=JSON.parse(p);if("error"in g){let S=JSON.parse(JSON.stringify(g.error)),x=S.status,y=S.code,v=`got status: ${x}. ${JSON.stringify(g)}`;if(y>=400&&y<600)throw new po({message:v,status:y})}}catch(g){if(g.name==="ApiError")throw g}s+=p;let m=-1,h=0;for(;;){m=-1,h=0;for(let x of l){let y=s.indexOf(x);y!==-1&&(m===-1||y<m)&&(m=y,h=x.length)}if(m===-1)break;let g=s.substring(0,m);s=s.substring(m+h);let S=g.trim();if(S.startsWith(a)){let x=S.substring(a.length).trim();try{let y=new Response(x,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield Y(new Zs(y))}catch(y){throw new Error(`exception parsing stream chunk ${x}. ${y}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let t={},n=wM+" "+this.clientOptions.userAgentExtra;return t[CM]=n,t[rm]=n,t[AM]="application/json",t}async getHeadersInternal(t,n){let i=new Headers;if(t&&t.headers){for(let[o,r]of Object.entries(t.headers))i.append(o,r);t.timeout&&t.timeout>0&&i.append(EM,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;let o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let r=this.clientOptions.uploader,s=await r.stat(t);o.sizeBytes=String(s.size);let a=(i=n?.mimeType)!==null&&i!==void 0?i:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;let l={file:o},c=this.getFileName(t),d=D("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,c,l,n?.httpOptions);return r.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,i){var o;let r=this.clientOptions.uploader,s=await r.stat(n),a=String(s.size),l=(o=i?.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${t}:uploadToFileSearchStore`,d=this.getFileName(n),p={};i!=null&&SA(i,p);let m=await this.fetchUploadUrl(c,a,l,d,p,i?.httpOptions);return r.uploadToFileSearchStore(n,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,o,r,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};let c=await this.request({path:t,body:JSON.stringify(r),httpMethod:"POST",httpOptions:l});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let d=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}};async function Ox(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){let n=e.status,i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};let o=JSON.stringify(i);throw n>=400&&n<600?new po({message:o,status:n}):new Error(o)}}function RM(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{let r=JSON.parse(e.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,s){let a=Object.assign({},r);for(let l in s)if(Object.prototype.hasOwnProperty.call(s,l)){let c=s[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=i(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}let o=i(n,t);e.body=JSON.stringify(o)}var IM="mcp_used/unknown",MM=!1;function TA(e){for(let t of e)if(kM(t)||typeof t=="object"&&"inputSchema"in t)return!0;return MM}function xA(e){var t;let n=(t=e[rm])!==null&&t!==void 0?t:"";e[rm]=(n+` ${IM}`).trimStart()}function kM(e){return e!==null&&typeof e=="object"&&e instanceof ea}function DM(e){return un(this,arguments,function*(n,i=100){let o,r=0;for(;r<i;){let s=yield Y(n.listTools({cursor:o}));for(let a of s.tools)yield yield Y(a),r++;if(!s.nextCursor)break;o=s.nextCursor}})}var ea=class{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new ea(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;let r={},s=[];for(let d of this.mcpClients)try{for(var a=!0,l=(n=void 0,cn(DM(d))),c;c=await l.next(),t=c.done,!t;a=!0){o=c.value,a=!1;let p=o;s.push(p);let m=p.name;if(r[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);r[m]=d}}catch(p){n={error:p}}finally{try{!a&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),gN(this.mcpTools,this.config)}async callTool(t){await this.initialize();let n=[];for(let i of t)if(i.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[i.name],r;this.config.timeout&&(r={timeout:this.config.timeout});let s=await o.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return n}};async function UM(e,t,n){let i=new Xp,o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),t(i)}var am=class{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),s=PM(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},d=new Promise(T=>{c=T}),p=t.callbacks,m=function(){c({})},h=this.apiClient,g={onopen:m,onmessage:T=>{UM(h,p.onmessage,T)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=p?.onclose)!==null&&i!==void 0?i:function(T){}},S=this.webSocketFactory.create(l,LM(s),g);S.connect(),await d;let v={setup:{model:oe(this.apiClient,t.model)}};return S.send(JSON.stringify(v)),new lm(S,this.apiClient)}},lm=class{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=lR(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});let n=aR(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){let n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Tr.PLAY)}pause(){this.sendPlaybackControl(Tr.PAUSE)}stop(){this.sendPlaybackControl(Tr.STOP)}resetContext(){this.sendPlaybackControl(Tr.RESET_CONTEXT)}close(){this.conn.close()}};function LM(e){let t={};return e.forEach((n,i)=>{t[i]=n}),t}function PM(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}var FM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function OM(e,t,n){let i=new Kp,o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;let r=JSON.parse(o);if(e.isVertexAI()){let s=fR(r);Object.assign(i,s)}else Object.assign(i,r);t(i)}var um=class{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new am(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,r,s,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),d,p=this.apiClient.getHeaders();t.config&&t.config.tools&&TA(t.config.tools)&&xA(p);let m=qM(p);if(this.apiClient.isVertexAI()){let R=this.apiClient.getProject(),N=this.apiClient.getLocation(),q=this.apiClient.getApiKey(),Se=!!R&&!!N||!!q;this.apiClient.getCustomBaseUrl()&&!Se?d=l:(d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d))}else{let R=this.apiClient.getApiKey(),N="BidiGenerateContent",q="key";R?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",q="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${N}?${q}=${R}`}let h=()=>{},g=new Promise(R=>{h=R}),S=t.callbacks,x=function(){var R;(R=S?.onopen)===null||R===void 0||R.call(S),h({})},y=this.apiClient,v={onopen:x,onmessage:R=>{OM(y,S.onmessage,R)},onerror:(n=S?.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=S?.onclose)!==null&&i!==void 0?i:function(R){}},T=this.webSocketFactory.create(d,GM(m),v);T.connect(),await g;let A=oe(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){let R=this.apiClient.getProject(),N=this.apiClient.getLocation();R&&N&&(A=`projects/${R}/locations/${N}/`+A)}let C={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Er.AUDIO]}:t.config.responseModalities=[Er.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let I=(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],_=[];for(let R of I)if(this.isCallableTool(R)){let N=R;_.push(await N.tool())}else _.push(R);_.length>0&&(t.config.tools=_);let M={model:A,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?C=sR(this.apiClient,M):C=rR(this.apiClient,M),delete C.config,T.send(JSON.stringify(C)),new cm(T,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}},HM={turnComplete:!0},cm=class{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=en(n.turns),t.isVertexAI()||(i=i.map(o=>Lu(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(FM)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},HM),t);let n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:cR(t)}:n={realtimeInput:uR(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function GM(e){let t={};return e.forEach((n,i)=>{t[i]=n}),t}function qM(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}var Hx=10;function Gx(e){var t,n,i;if(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(let s of(n=e?.tools)!==null&&n!==void 0?n:[])if(Ar(s)){o=!0;break}if(!o)return!0;let r=(i=e?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Ar(e){return"callTool"in e&&typeof e.callTool=="function"}function BM(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>Ar(o)))!==null&&i!==void 0?i:!1}function qx(e){var t;let n=[];return!((t=e?.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,o)=>{if(Ar(i))return;let r=i;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(o)}),n}function Bx(e){var t;return!(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}var fm=class extends fn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,r,s,a;let l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!BM(n)||Gx(n.config))return await this.generateContentInternal(l);let c=qx(n);if(c.length>0){let S=c.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let d,p,m=en(l.contents),h=(r=(o=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Hx,g=0;for(;g<h&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){let S=d.candidates[0].content,x=[];for(let y of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Ar(y)){let T=await y.callTool(d.functionCalls);x.push(...T)}g++,p={role:"user",parts:x},l.contents=en(l.contents),l.contents.push(S),l.contents.push(p),Bx(l.config)&&(m.push(S),m.push(p))}return Bx(l.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var i,o,r,s,a;if(this.maybeMoveToResponseJsonSchem(n),Gx(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let l=qx(n);if(l.length>0){let p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let c=(r=(o=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,d=(a=(s=n?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let r,s=[];if(i?.generatedImages)for(let l of i.generatedImages)l&&l?.safetyAttributes&&((o=l?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=l?.safetyAttributes:s.push(l);let a;return r?a={generatedImages:s,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;let s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ti(ei.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{let i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));let o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,r,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(((i=n.video)===null||i===void 0?void 0:i.uri)&&((o=n.video)===null||o===void 0?void 0:o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:((s=(r=n.source)===null||r===void 0?void 0:r.video)===null||s===void 0?void 0:s.uri)&&((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0?void 0:l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;let r=(n=t.config)===null||n===void 0?void 0:n.tools;if(!r)return t;let s=await Promise.all(r.map(async l=>Ar(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(a.config.tools=s,t.config&&t.config.tools&&TA(t.config.tools)){let l=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{},c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),xA(c),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(t){var n,i,o;let r=new Map;for(let s of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ar(s)){let a=s,l=await a.tool();for(let c of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,a)}}return r}async processAfcStream(t){var n,i,o;let r=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Hx,s=!1,a=0,l=await this.initAfcToolsMap(t);return function(c,d,p){return un(this,arguments,function*(){for(var m,h,g,S,x,y;a<r;){s&&(a++,s=!1);let C=yield Y(c.processParamsMaybeAddMcpUsage(p)),I=yield Y(c.generateContentStreamInternal(C)),_=[],M=[];try{for(var v=!0,T=(h=void 0,cn(I)),A;A=yield Y(T.next()),m=A.done,!m;v=!0){S=A.value,v=!1;let R=S;if(yield yield Y(R),R.candidates&&((x=R.candidates[0])===null||x===void 0?void 0:x.content)){M.push(R.candidates[0].content);for(let N of(y=R.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<r&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(N.functionCall.name)){let q=yield Y(d.get(N.functionCall.name).callTool([N.functionCall]));_.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(R){h={error:R}}finally{try{!v&&!m&&(g=T.return)&&(yield Y(g.call(T)))}finally{if(h)throw h.error}}if(_.length>0){s=!0;let R=new fo;R.candidates=[{content:{role:"user",parts:_}}],yield yield Y(R);let N=[];N.push(...M),N.push({role:"user",parts:_});let q=en(p.contents).concat(N);p.contents=q}else break}})}(this,l,t)}async generateContentInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Lx(this.apiClient,t);return a=D("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=Fx(d),m=new fo;return Object.assign(m,p),m})}else{let c=Ux(this.apiClient,t);return a=D("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=Px(d),m=new fo;return Object.assign(m,p),m})}}async generateContentStreamInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Lx(this.apiClient,t);return a=D("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return un(this,arguments,function*(){var m,h,g,S;try{for(var x=!0,y=cn(p),v;v=yield Y(y.next()),m=v.done,!m;x=!0){S=v.value,x=!1;let T=S,A=Fx(yield Y(T.json()));A.sdkHttpResponse={headers:T.headers};let C=new fo;Object.assign(C,A),yield yield Y(C)}}catch(T){h={error:T}}finally{try{!x&&!m&&(g=y.return)&&(yield Y(g.call(y)))}finally{if(h)throw h.error}}})})}else{let c=Ux(this.apiClient,t);return a=D("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return un(this,arguments,function*(){var m,h,g,S;try{for(var x=!0,y=cn(p),v;v=yield Y(y.next()),m=v.done,!m;x=!0){S=v.value,x=!1;let T=S,A=Px(yield Y(T.json()));A.sdkHttpResponse={headers:T.headers};let C=new fo;Object.assign(C,A),yield yield Y(C)}}catch(T){h={error:T}}finally{try{!x&&!m&&(g=y.return)&&(yield Y(g.call(y)))}finally{if(h)throw h.error}}})})}}async embedContent(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=BR(this.apiClient,t);return a=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=zR(d),m=new uu;return Object.assign(m,p),m})}else{let c=qR(this.apiClient,t);return a=D("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=VR(d),m=new uu;return Object.assign(m,p),m})}}async generateImagesInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=tI(this.apiClient,t);return a=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=iI(d),m=new cu;return Object.assign(m,p),m})}else{let c=eI(this.apiClient,t);return a=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=nI(d),m=new cu;return Object.assign(m,p),m})}}async editImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=FR(this.apiClient,t);return r=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=OR(l),d=new Fp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=tM(this.apiClient,t);return r=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=nM(l),d=new Op;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=PI(this.apiClient,t);return r=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=FI(l),d=new Hp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=VI(this.apiClient,t);return r=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=zI(l),d=new Gp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=TI(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>om(d))}else{let c=SI(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>im(d))}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=RI(this.apiClient,t);return a=D("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=MI(d),m=new fu;return Object.assign(m,p),m})}else{let c=NI(this.apiClient,t);return a=D("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=II(d),m=new fu;return Object.assign(m,p),m})}}async update(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=jI(this.apiClient,t);return a=D("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>om(d))}else{let c=WI(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>im(d))}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=DR(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=LR(d),m=new du;return Object.assign(m,p),m})}else{let c=kR(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=UR(d),m=new du;return Object.assign(m,p),m})}}async countTokens(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=RR(this.apiClient,t);return a=D("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=MR(d),m=new pu;return Object.assign(m,p),m})}else{let c=NR(this.apiClient,t);return a=D("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=IR(d),m=new pu;return Object.assign(m,p),m})}}async computeTokens(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=xR(this.apiClient,t);return r=D("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=AR(l),d=new qp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=uI(this.apiClient,t);return a=D("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let p=aI(d),m=new Cr;return Object.assign(m,p),m})}else{let c=lI(this.apiClient,t);return a=D("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>{let p=sI(d),m=new Cr;return Object.assign(m,p),m})}}};var dm=class extends fn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){let n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){let n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=iN(t);return a=D("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else{let c=nN(t);return a=D("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=Xb(t);return r=D("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function VM(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function zM(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>jM(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function $M(e,t,n){let i={},o=u(t,["expireTime"]);n!==void 0&&o!=null&&f(n,["expireTime"],o);let r=u(t,["newSessionExpireTime"]);n!==void 0&&r!=null&&f(n,["newSessionExpireTime"],r);let s=u(t,["uses"]);n!==void 0&&s!=null&&f(n,["uses"],s);let a=u(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],WM(e,a));let l=u(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),i}function YM(e,t){let n={},i=u(t,["config"]);return i!=null&&f(n,["config"],$M(e,i,n)),n}function JM(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function KM(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function XM(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function QM(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function ZM(e,t){let n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);let r=u(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);let s=u(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","mediaResolution"],c);let d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],km(p));let m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);let h=u(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],h);let g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],zM(lt(g)));let S=u(e,["tools"]);if(t!==void 0&&S!=null){let I=Rr(S);Array.isArray(I)&&(I=I.map(_=>tk(Nr(_)))),f(t,["setup","tools"],I)}let x=u(e,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],ek(x));let y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);let v=u(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","outputAudioTranscription"],v);let T=u(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&f(t,["setup","realtimeInputConfig"],T);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&f(t,["setup","contextWindowCompression"],A);let C=u(e,["proactivity"]);if(t!==void 0&&C!=null&&f(t,["setup","proactivity"],C),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function WM(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],oe(e,i));let o=u(t,["config"]);return o!=null&&f(n,["config"],ZM(o,n)),n}function jM(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],JM(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],KM(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],VM(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function ek(e){let t={},n=u(e,["handle"]);if(n!=null&&f(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function tk(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],XM(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],QM(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function nk(e){let t=[];for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let o=Object.keys(i).map(r=>`${n}.${r}`);t.push(...o)}else t.push(n)}return t.join(",")}function ik(e,t){let n=null,i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let r=i.setup;typeof r=="object"&&r!==null?(e.bidiGenerateContentSetup=r,n=r):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;let o=e.fieldMask;if(n){let r=nk(n);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)r?e.fieldMask=r:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];o.length>0&&(a=o.map(c=>s.includes(c)?`generationConfig.${c}`:c));let l=[];r&&l.push(r),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}var pm=class extends fn{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=YM(this.apiClient,t);r=D("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let l=ik(a,t.config);return o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}};function ok(e,t){let n={},i=u(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function rk(e){let t={},n=u(e,["name"]);n!=null&&f(t,["_url","name"],n);let i=u(e,["config"]);return i!=null&&ok(i,t),t}function sk(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function ak(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function lk(e){let t={},n=u(e,["parent"]);n!=null&&f(t,["_url","parent"],n);let i=u(e,["config"]);return i!=null&&ak(i,t),t}function uk(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["documents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["documents"],r)}return t}var mm=class extends fn{constructor(t){super(),this.apiClient=t,this.list=async n=>new ti(ei.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=sk(t);return r=D("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=rk(t);o=D("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=lk(t);return r=D("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=uk(l),d=new Bp;return Object.assign(d,c),d})}}};var hm=class extends fn{constructor(t,n=new mm(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new ti(ei.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=uM(t);return r=D("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=dM(t);return r=D("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=fM(t);o=D("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=vM(t);return r=D("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=SM(l),d=new Vp;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=TM(t);return r=D("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=xM(l),d=new zp;return Object.assign(d,c),d})}}async importFile(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=hM(t);return r=D("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=mM(l),d=new Ws;return Object.assign(d,c),d})}}};var AA=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return AA=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))},ck=()=>AA();function gm(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}var ym=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){let t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};var Ct=class extends Error{},rt=class extends Ct{constructor(t,n,i,o){super(`${rt.makeMessage(t,n,i)}`),this.status=t,this.headers=o,this.error=n}static makeMessage(t,n,i){let o=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,i,o){if(!t||!o)return new _r({message:i,cause:ym(n)});let r=n;return t===400?new Au(t,r,i,o):t===401?new Eu(t,r,i,o):t===403?new Cu(t,r,i,o):t===404?new _u(t,r,i,o):t===409?new wu(t,r,i,o):t===422?new bu(t,r,i,o):t===429?new Nu(t,r,i,o):t>=500?new Ru(t,r,i,o):new rt(t,r,i,o)}},ta=class extends rt{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}},_r=class extends rt{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}},xu=class extends _r{constructor({message:t}={}){super({message:t??"Request timed out."})}},Au=class extends rt{},Eu=class extends rt{},Cu=class extends rt{},_u=class extends rt{},wu=class extends rt{},bu=class extends rt{},Nu=class extends rt{},Ru=class extends rt{};var fk=/^[a-z][a-z0-9+.-]*:/i,dk=e=>fk.test(e),vm=e=>(vm=Array.isArray,vm(e)),pk=vm,mk=pk,Vx=mk;function hk(e){if(!e)return!0;for(let t in e)return!1;return!0}function gk(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var yk=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Ct(`${e} must be an integer`);if(t<0)throw new Ct(`${e} must be a positive integer`);return t},vk=e=>{try{return JSON.parse(e)}catch{return}};var Sk=e=>new Promise(t=>setTimeout(t,e));var Sr="0.0.1";function Tk(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var xk=()=>{var e,t,n,i,o;let r=Tk();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":$x(Deno.build.os),"X-Stainless-Arch":zx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":$x((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":zx((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let s=Ak();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ak(){if(typeof navigator>"u"||!navigator)return null;let e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:t,pattern:n}of e){let i=n.exec(navigator.userAgent);if(i){let o=i[1]||0,r=i[2]||0,s=i[3]||0;return{browser:t,version:`${o}.${r}.${s}`}}}return null}var zx=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",$x=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown"),nu,Ek=()=>nu??(nu=xk());function Ck(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function EA(...e){let t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function _k(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return EA({start(){},async pull(n){let{done:i,value:o}=await t.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function CA(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){let n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function wk(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}let i=e.getReader(),o=i.cancel();i.releaseLock(),await o}var bk=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});var _A=()=>{var e;if(typeof File>"u"){let{process:t}=globalThis,n=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function kp(e,t,n){return _A(),new File(e,t??"unknown_file",n)}function Nk(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}var Rk=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";var wA=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",Ik=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&wA(e),Mk=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function kk(e,t,n){if(_A(),e=await e,Ik(e))return e instanceof File?e:kp([await e.arrayBuffer()],e.name);if(Mk(e)){let o=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),kp(await Sm(o),t,n)}let i=await Sm(e);if(t||(t=Nk(e)),!n?.type){let o=i.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return kp(i,t,n)}async function Sm(e){var t,n,i,o,r;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(wA(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(Rk(e))try{for(var a=!0,l=cn(e),c;c=await l.next(),t=c.done,!t;a=!0){o=c.value,a=!1;let d=o;s.push(...await Sm(d))}}catch(d){n={error:d}}finally{try{!a&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}else{let d=(r=e?.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof e}${d?`; constructor: ${d}`:""}${Dk(e)}`)}return s}function Dk(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}var Iu=class{constructor(t){this._client=t}};Iu._key=[];function bA(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Yx=Object.freeze(Object.create(null)),Uk=(e=bA)=>function(n,...i){if(n.length===1)return n[0];let o=!1,r=[],s=n.reduce((d,p,m)=>{var h,g,S;/[?#]/.test(p)&&(o=!0);let x=i[m],y=(o?encodeURIComponent:e)(""+x);return m!==i.length&&(x==null||typeof x=="object"&&x.toString===((S=Object.getPrototypeOf((g=Object.getPrototypeOf((h=x.hasOwnProperty)!==null&&h!==void 0?h:Yx))!==null&&g!==void 0?g:Yx))===null||S===void 0?void 0:S.toString))&&(y=x+"",r.push({start:d.length+p.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),d+p+(m===i.length?"":y)},""),a=s.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=l.exec(a))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((d,p)=>d.start-p.start),r.length>0){let d=0,p=r.reduce((m,h)=>{let g=" ".repeat(h.start-d),S="^".repeat(h.length);return d=h.start+h.length,m+g+S},"");throw new Ct(`Path parameters result in path with invalid segments:
${r.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s},iu=Uk(bA);var Mu=class extends Iu{create(t,n){var i;let{api_version:o=this._client.apiVersion}=t,r=Tu(t,["api_version"]);if("model"in r&&"agent_config"in r)throw new Ct("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new Ct("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(iu`/${o}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(iu`/${o}/interactions/${t}`,i)}cancel(t,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.post(iu`/${o}/interactions/${t}/cancel`,i)}get(t,n={},i){var o;let r=n??{},{api_version:s=this._client.apiVersion}=r,a=Tu(r,["api_version"]);return this._client.get(iu`/${s}/interactions/${t}`,Object.assign(Object.assign({query:a},i),{stream:(o=n?.stream)!==null&&o!==void 0?o:!1}))}};Mu._key=Object.freeze(["interactions"]);var ku=class extends Mu{};function Lk(e){let t=0;for(let o of e)t+=o.length;let n=new Uint8Array(t),i=0;for(let o of e)n.set(o,i),i+=o.length;return n}var ou;function Dm(e){let t;return(ou??(t=new globalThis.TextEncoder,ou=t.encode.bind(t)))(e)}var ru;function Jx(e){let t;return(ru??(t=new globalThis.TextDecoder,ru=t.decode.bind(t)))(e)}var wr=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];let n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Dm(t):t;this.buffer=Lk([this.buffer,n]);let i=[],o;for(;(o=Pk(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(Jx(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let r=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=Jx(this.buffer.subarray(0,r));i.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};wr.NEWLINE_CHARS=new Set([`
`,"\r"]);wr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Pk(e,t){for(let o=t??0;o<e.length;o++){if(e[o]===10)return{preceding:o,index:o+1,carriage:!1};if(e[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function Fk(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}var Du={off:0,error:200,warn:300,info:400,debug:500},Kx=(e,t,n)=>{if(!!e){if(gk(Du,e))return e;ht(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Du))}`)}};function Qs(){}function su(e,t,n){return!t||Du[e]>Du[n]?Qs:t[e].bind(t)}var Ok={error:Qs,warn:Qs,info:Qs,debug:Qs},Xx=new WeakMap;function ht(e){var t;let n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return Ok;let o=Xx.get(n);if(o&&o[0]===i)return o[1];let r={error:su("error",n,i),warn:su("warn",n,i),info:su("info",n,i),debug:su("debug",n,i)};return Xx.set(n,[i,r]),r}var co=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var Pi=class{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let o=!1,r=i?ht(i):console;function s(){return un(this,arguments,function*(){var l,c,d,p;if(o)throw new Ct("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,g=cn(Hk(t,n)),S;S=yield Y(g.next()),l=S.done,!l;h=!0){p=S.value,h=!1;let x=p;if(!m)if(x.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield Y(JSON.parse(x.data))}catch(y){throw r.error("Could not parse message into JSON:",x.data),r.error("From chunk:",x.raw),y}}}catch(x){c={error:x}}finally{try{!h&&!l&&(d=g.return)&&(yield Y(d.call(g)))}finally{if(c)throw c.error}}m=!0}catch(x){if(gm(x))return yield Y(void 0);throw x}finally{m||n.abort()}})}return new Pi(s,n,i)}static fromReadableStream(t,n,i){let o=!1;function r(){return un(this,arguments,function*(){var l,c,d,p;let m=new wr,h=CA(t);try{for(var g=!0,S=cn(h),x;x=yield Y(S.next()),l=x.done,!l;g=!0){p=x.value,g=!1;let y=p;for(let v of m.decode(y))yield yield Y(v)}}catch(y){c={error:y}}finally{try{!g&&!l&&(d=S.return)&&(yield Y(d.call(S)))}finally{if(c)throw c.error}}for(let y of m.flush())yield yield Y(y)})}function s(){return un(this,arguments,function*(){var l,c,d,p;if(o)throw new Ct("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,g=cn(r()),S;S=yield Y(g.next()),l=S.done,!l;h=!0){p=S.value,h=!1;let x=p;m||x&&(yield yield Y(JSON.parse(x)))}}catch(x){c={error:x}}finally{try{!h&&!l&&(d=g.return)&&(yield Y(d.call(g)))}finally{if(c)throw c.error}}m=!0}catch(x){if(gm(x))return yield Y(void 0);throw x}finally{m||n.abort()}})}return new Pi(s,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){let t=[],n=[],i=this.iterator(),o=r=>({next:()=>{if(r.length===0){let s=i.next();t.push(s),n.push(s)}return r.shift()}});return[new Pi(()=>o(t),this.controller,this.client),new Pi(()=>o(n),this.controller,this.client)]}toReadableStream(){let t=this,n;return EA({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{let{value:o,done:r}=await n.next();if(r)return i.close();let s=Dm(JSON.stringify(o)+`
`);i.enqueue(s)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}};function Hk(e,t){return un(this,arguments,function*(){var i,o,r,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ct("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ct("Attempted to iterate over a response with no body");let a=new Tm,l=new wr,c=CA(e.body);try{for(var d=!0,p=cn(Gk(c)),m;m=yield Y(p.next()),i=m.done,!i;d=!0){s=m.value,d=!1;let h=s;for(let g of l.decode(h)){let S=a.decode(g);S&&(yield yield Y(S))}}}catch(h){o={error:h}}finally{try{!d&&!i&&(r=p.return)&&(yield Y(r.call(p)))}finally{if(o)throw o.error}}for(let h of l.flush()){let g=a.decode(h);g&&(yield yield Y(g))}})}function Gk(e){return un(this,arguments,function*(){var n,i,o,r;let s=new Uint8Array;try{for(var a=!0,l=cn(e),c;c=yield Y(l.next()),n=c.done,!n;a=!0){r=c.value,a=!1;let d=r;if(d==null)continue;let p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?Dm(d):d,m=new Uint8Array(s.length+p.length);m.set(s),m.set(p,s.length),s=m;let h;for(;(h=Fk(s))!==-1;)yield yield Y(s.slice(0,h)),s=s.slice(h)}}catch(d){i={error:d}}finally{try{!a&&!n&&(o=l.return)&&(yield Y(o.call(l)))}finally{if(i)throw i.error}}s.length>0&&(yield yield Y(s))})}var Tm=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;let r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,o]=qk(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}};function qk(e,t){let n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function Bk(e,t){let{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:r}=t,s=await(async()=>{var a;if(t.options.stream)return ht(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Pi.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;let l=n.headers.get("content-type"),c=(a=l?.split(";")[0])===null||a===void 0?void 0:a.trim();return c?.includes("application/json")||c?.endsWith("+json")?await n.json():await n.text()})();return ht(e).debug(`[${i}] response parsed`,co({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-r})),s}var na=class extends Promise{constructor(t,n,i=Bk){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new na(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){let[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}};var NA=Symbol("brand.privateNullableHeaders");function*Vk(e){if(!e)return;if(NA in e){let{values:i,nulls:o}=e;yield*i.entries();for(let r of o)yield[r,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Vx(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){let o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let r=Vx(i[1])?i[1]:[i[1]],s=!1;for(let a of r)a!==void 0&&(t&&!s&&(s=!0,yield[o,null]),yield[o,a])}}var Xs=e=>{let t=new Headers,n=new Set;for(let i of e){let o=new Set;for(let[r,s]of Vk(i)){let a=r.toLowerCase();o.has(a)||(t.delete(r),o.add(a)),s===null?(t.delete(r),n.add(a)):(t.append(r,s),n.delete(a))}}return{[NA]:!0,values:t,nulls:n}};var Dp=e=>{var t,n,i,o,r,s;if(typeof globalThis.process<"u")return(i=(n=(t=globalThis.process.env)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(r=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||r===void 0?void 0:r.call(o,e))===null||s===void 0?void 0:s.trim()};var RA,br=class{constructor(t){var n,i,o,r,s,a,l,{baseURL:c=Dp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=Dp("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=t,m=Tu(t,["baseURL","apiKey","apiVersion"]);let h=Object.assign(Object.assign({apiKey:d,apiVersion:p},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=h.baseURL,this.timeout=(i=h.timeout)!==null&&i!==void 0?i:br.DEFAULT_TIMEOUT,this.logger=(o=h.logger)!==null&&o!==void 0?o:console;let g="warn";this.logLevel=g,this.logLevel=(s=(r=Kx(h.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:Kx(Dp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:g,this.fetchOptions=h.fetchOptions,this.maxRetries=(a=h.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=h.fetch)!==null&&l!==void 0?l:Ck(),this.encoder=bk,this._options=h,this.apiKey=d,this.apiVersion=p,this.clientAdapter=h.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){let n=Xs([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Xs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Xs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Ct(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Sr}`}defaultIdempotencyKey(){return`stainless-node-retry-${ck()}`}makeStatusError(t,n,i,o){return rt.generate(t,n,i,o)}buildURL(t,n,i){let o=!this.baseURLOverridden()&&i||this.baseURL,r=dk(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return hk(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){let n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:t,path:n},o)))}request(t,n=null){return new na(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var o,r,s;let a=await t,l=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);let{req:c,url:d,timeout:p}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});let m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=i===void 0?"":`, retryOf: ${i}`,g=Date.now();if(ht(this).debug(`[${m}] sending request`,co({retryOfRequestLogID:i,method:a.method,url:d,options:a,headers:c.headers})),!((r=a.signal)===null||r===void 0)&&r.aborted)throw new ta;let S=new AbortController,x=await this.fetchWithTimeout(d,c,p,S).catch(ym),y=Date.now();if(x instanceof globalThis.Error){let T=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new ta;let A=gm(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return ht(this).info(`[${m}] connection ${A?"timed out":"failed"} - ${T}`),ht(this).debug(`[${m}] connection ${A?"timed out":"failed"} (${T})`,co({retryOfRequestLogID:i,url:d,durationMs:y-g,message:x.message})),this.retryRequest(a,n,i??m);throw ht(this).info(`[${m}] connection ${A?"timed out":"failed"} - error; no more retries left`),ht(this).debug(`[${m}] connection ${A?"timed out":"failed"} (error; no more retries left)`,co({retryOfRequestLogID:i,url:d,durationMs:y-g,message:x.message})),A?new xu:new _r({cause:x})}let v=`[${m}${h}] ${c.method} ${d} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${y-g}ms`;if(!x.ok){let T=await this.shouldRetry(x);if(n&&T){let R=`retrying, ${n} attempts remaining`;return await wk(x.body),ht(this).info(`${v} - ${R}`),ht(this).debug(`[${m}] response error (${R})`,co({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:y-g})),this.retryRequest(a,n,i??m,x.headers)}let A=T?"error; no more retries left":"error; not retryable";ht(this).info(`${v} - ${A}`);let C=await x.text().catch(R=>ym(R).message),I=vk(C),_=I?void 0:C;throw ht(this).debug(`[${m}] response error (${A})`,co({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,message:_,durationMs:Date.now()-g})),this.makeStatusError(x.status,I,_,x.headers)}return ht(this).info(v),ht(this).debug(`[${m}] response start`,co({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:y-g})),{response:x,options:a,controller:S,requestLogID:m,retryOfRequestLogID:i,startTime:g}}async fetchWithTimeout(t,n,i,o){let r=n||{},{signal:s,method:a}=r,l=Tu(r,["signal","method"]);s&&s.addEventListener("abort",()=>o.abort());let c=setTimeout(()=>o.abort(),i),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(p.method=a.toUpperCase());try{return await this.fetch.call(void 0,t,p)}finally{clearTimeout(c)}}async shouldRetry(t){let n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,o){var r;let s,a=o?.get("retry-after-ms");if(a){let c=parseFloat(a);Number.isNaN(c)||(s=c)}let l=o?.get("retry-after");if(l&&!s){let c=parseFloat(l);Number.isNaN(c)?s=Date.parse(l)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){let c=(r=t.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Sk(s),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){let r=n-t,s=Math.min(.5*Math.pow(2,r),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,o,r;let s=Object.assign({},t),{method:a,path:l,query:c,defaultBaseURL:d}=s,p=this.buildURL(l,c,d);"timeout"in s&&yk("timeout",s.timeout),s.timeout=(i=s.timeout)!==null&&i!==void 0?i:this.timeout;let{bodyHeaders:m,body:h}=this.buildBody({options:s}),g=await this.buildHeaders({options:t,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:g},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"}),h&&{body:h}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(r=s.fetchOptions)!==null&&r!==void 0?r:{}),url:p,timeout:s.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:o}){let r={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);let s=await this.authHeaders(t),a=Xs([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Ek()),this._options.defaultHeaders,i,t.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};let i=Xs([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:_k(t)}:this.encoder({body:t,headers:i})}};br.DEFAULT_TIMEOUT=6e4;var He=class extends br{constructor(){super(...arguments),this.interactions=new ku(this)}};RA=He;He.GeminiNextGenAPIClient=RA;He.GeminiNextGenAPIClientError=Ct;He.APIError=rt;He.APIConnectionError=_r;He.APIConnectionTimeoutError=xu;He.APIUserAbortError=ta;He.NotFoundError=_u;He.ConflictError=wu;He.RateLimitError=Nu;He.BadRequestError=Au;He.AuthenticationError=Eu;He.InternalServerError=Ru;He.PermissionDeniedError=Cu;He.UnprocessableEntityError=bu;He.toFile=kk;He.Interactions=ku;function zk(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function $k(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function Yk(e,t){let n={},i=u(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function Jk(e,t){let n={},i=u(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function Kk(e,t,n){let i={};if(u(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=u(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&f(t,["displayName"],o),u(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let r=u(e,["epochCount"]);t!==void 0&&r!=null&&f(t,["tuningTask","hyperparameters","epochCount"],r);let s=u(e,["learningRateMultiplier"]);if(s!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let a=u(e,["batchSize"]);t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","batchSize"],a);let l=u(e,["learningRate"]);if(t!==void 0&&l!=null&&f(t,["tuningTask","hyperparameters","learningRate"],l),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function Xk(e,t,n){let i={},o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let h=u(e,["validationDataset"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec"],Qx(h))}else if(o==="PREFERENCE_TUNING"){let h=u(e,["validationDataset"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec"],Qx(h))}let r=u(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&f(t,["tunedModelDisplayName"],r);let s=u(e,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let h=u(e,["epochCount"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],h)}else if(a==="PREFERENCE_TUNING"){let h=u(e,["epochCount"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],h)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let h=u(e,["learningRateMultiplier"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h)}else if(l==="PREFERENCE_TUNING"){let h=u(e,["learningRateMultiplier"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],h)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let h=u(e,["exportLastCheckpointOnly"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],h)}else if(c==="PREFERENCE_TUNING"){let h=u(e,["exportLastCheckpointOnly"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],h)}let d=u(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let h=u(e,["adapterSize"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],h)}else if(d==="PREFERENCE_TUNING"){let h=u(e,["adapterSize"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],h)}if(u(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let p=u(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);let m=u(e,["beta"]);return t!==void 0&&m!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],m),i}function Qk(e,t){let n={},i=u(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);let o=u(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);let r=u(e,["trainingDataset"]);r!=null&&aD(r);let s=u(e,["config"]);return s!=null&&Kk(s,n),n}function Zk(e,t){let n={},i=u(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);let o=u(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);let r=u(e,["trainingDataset"]);r!=null&&lD(r,n,t);let s=u(e,["config"]);return s!=null&&Xk(s,n,t),n}function Wk(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function jk(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function eD(e,t,n){let i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);let r=u(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);let s=u(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),i}function tD(e,t,n){let i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);let r=u(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);let s=u(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),i}function nD(e,t){let n={},i=u(e,["config"]);return i!=null&&eD(i,n),n}function iD(e,t){let n={},i=u(e,["config"]);return i!=null&&tD(i,n),n}function oD(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);let r=u(e,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>IA(a))),f(n,["tuningJobs"],s)}return n}function rD(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);let r=u(e,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>xm(a))),f(n,["tuningJobs"],s)}return n}function sD(e,t){let n={},i=u(e,["name"]);i!=null&&f(n,["model"],i);let o=u(e,["name"]);return o!=null&&f(n,["endpoint"],o),n}function aD(e,t){let n={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=u(e,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(n,["examples","examples"],o)}return n}function lD(e,t,n){let i={},o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=u(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=u(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let r=u(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let s=u(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){let s=u(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function IA(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["name"]);o!=null&&f(n,["name"],o);let r=u(e,["state"]);r!=null&&f(n,["state"],oA(r));let s=u(e,["createTime"]);s!=null&&f(n,["createTime"],s);let a=u(e,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);let l=u(e,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&f(n,["updateTime"],c);let d=u(e,["description"]);d!=null&&f(n,["description"],d);let p=u(e,["baseModel"]);p!=null&&f(n,["baseModel"],p);let m=u(e,["_self"]);return m!=null&&f(n,["tunedModel"],sD(m)),n}function xm(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["name"]);o!=null&&f(n,["name"],o);let r=u(e,["state"]);r!=null&&f(n,["state"],oA(r));let s=u(e,["createTime"]);s!=null&&f(n,["createTime"],s);let a=u(e,["startTime"]);a!=null&&f(n,["startTime"],a);let l=u(e,["endTime"]);l!=null&&f(n,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&f(n,["updateTime"],c);let d=u(e,["error"]);d!=null&&f(n,["error"],d);let p=u(e,["description"]);p!=null&&f(n,["description"],p);let m=u(e,["baseModel"]);m!=null&&f(n,["baseModel"],m);let h=u(e,["tunedModel"]);h!=null&&f(n,["tunedModel"],h);let g=u(e,["preTunedModel"]);g!=null&&f(n,["preTunedModel"],g);let S=u(e,["supervisedTuningSpec"]);S!=null&&f(n,["supervisedTuningSpec"],S);let x=u(e,["preferenceOptimizationSpec"]);x!=null&&f(n,["preferenceOptimizationSpec"],x);let y=u(e,["tuningDataStats"]);y!=null&&f(n,["tuningDataStats"],y);let v=u(e,["encryptionSpec"]);v!=null&&f(n,["encryptionSpec"],v);let T=u(e,["partnerModelTuningSpec"]);T!=null&&f(n,["partnerModelTuningSpec"],T);let A=u(e,["customBaseModel"]);A!=null&&f(n,["customBaseModel"],A);let C=u(e,["experiment"]);C!=null&&f(n,["experiment"],C);let I=u(e,["labels"]);I!=null&&f(n,["labels"],I);let _=u(e,["outputUri"]);_!=null&&f(n,["outputUri"],_);let M=u(e,["pipelineJob"]);M!=null&&f(n,["pipelineJob"],M);let R=u(e,["serviceAccount"]);R!=null&&f(n,["serviceAccount"],R);let N=u(e,["tunedModelDisplayName"]);N!=null&&f(n,["tunedModelDisplayName"],N);let q=u(e,["veoTuningSpec"]);return q!=null&&f(n,["veoTuningSpec"],q),n}function uD(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["name"]);o!=null&&f(n,["name"],o);let r=u(e,["metadata"]);r!=null&&f(n,["metadata"],r);let s=u(e,["done"]);s!=null&&f(n,["done"],s);let a=u(e,["error"]);return a!=null&&f(n,["error"],a),n}function Qx(e,t){let n={},i=u(e,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);let o=u(e,["vertexDatasetResource"]);return o!=null&&f(n,["validationDatasetUri"],o),n}var Am=class extends fn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ti(ei.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);let r=Object.assign(Object.assign({},n),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{let o=Object.assign({},n);return await this.tuneInternal(o)}else{let o=Object.assign({},n),r=await this.tuneMldevInternal(o),s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:Lp.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=jk(t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>xm(d))}else{let c=Wk(t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>IA(d))}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=iD(t);return a=D("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=rD(d),m=new mu;return Object.assign(m,p),m})}else{let c=nD(t);return a=D("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=oD(d),m=new mu;return Object.assign(m,p),m})}}async cancel(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=$k(t);return a=D("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=Jk(d),m=new hu;return Object.assign(m,p),m})}else{let c=zk(t);return a=D("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=Yk(d),m=new hu;return Object.assign(m,p),m})}}async tuneInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=Zk(t,t);return r=D("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>xm(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Qk(t);return r=D("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>uD(l))}}};var Em=class{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},cD=1024*1024*8,fD=3,dD=1e3,pD=2,Uu="x-goog-upload-status";async function mD(e,t,n){var i;let o=await MA(e,t,n),r=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[Uu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function hD(e,t,n){var i;let o=await MA(e,t,n),r=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[Uu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=Wx(r),a=new js;return Object.assign(a,s),a}async function MA(e,t,n){var i,o;let r=0,s=0,a=new Zs(new Response),l="upload";for(r=e.size;s<r;){let c=Math.min(cD,r-s),d=e.slice(s,s+c);s+c>=r&&(l+=", finalize");let p=0,m=dD;for(;p<fD&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((i=a?.headers)===null||i===void 0)&&i[Uu]));)p++,await yD(m),m=m*pD;if(s+=c,((o=a?.headers)===null||o===void 0?void 0:o[Uu])!=="active")break;if(r<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function gD(e){return{size:e.size,type:e.type}}function yD(e){return new Promise(t=>setTimeout(t,e))}var Cm=class{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await mD(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await hD(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await gD(t)}};var _m=class{create(t,n,i){return new wm(t,n,i)}},wm=class{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var Zx="x-goog-api-key",bm=class{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Zx)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Zx,this.apiKey)}}};var vD="gl-node/",dn=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new He({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;let i=Jb(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;let o=new bm(this.apiKey);this.apiClient=new sm({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:vD+"web",uploader:new Cm,downloader:new Em}),this.models=new fm(this.apiClient),this.live=new um(this.apiClient,o,new _m),this.batches=new Wp(this.apiClient),this.chats=new em(this.models,this.apiClient),this.caches=new jp(this.apiClient),this.files=new nm(this.apiClient),this.operations=new dm(this.apiClient),this.authTokens=new pm(this.apiClient),this.tunings=new Am(this.apiClient),this.fileSearchStores=new hm(this.apiClient)}};var kr=require("obsidian");function kA(e){let t=atob(e),n=t.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);return i}function DA(e){let t="",n=e.byteLength;for(let i=0;i<n;i++)t+=String.fromCharCode(e[i]);return btoa(t)}function UA(e,t,n,i){let o=new Int16Array(e.buffer),r=o.length/i,s=t.createBuffer(i,r,n);for(let a=0;a<i;a++){let l=s.getChannelData(a);for(let c=0;c<r;c++)l[c]=o[c*i+a]/32768}return s}function LA(e){let t=e.length,n=new Int16Array(t);for(let i=0;i<t;i++){let o=Math.max(-1,Math.min(1,e[i]));n[i]=o<0?o*32768:o*32767}return n}var Ou={};ue(Ou,{declaration:()=>SD,execute:()=>TD,instruction:()=>Um});ke();var SD={name:"list_directory",description:"Lists all available files in the vault using paths relative to vault root."},Um="- list_directory: Use this to get an overview of the user's vault. All file paths are relative to vault root. Always call this if you are unsure of the available files.",TD=(e,t)=>{let n=In();return t.onSystem("Registry scanned",{name:"list_directory",filename:"Vault Root",files:n}),Promise.resolve({files:n})};var Hu={};ue(Hu,{declaration:()=>xD,execute:()=>AD,instruction:()=>Pm});ke();var PA=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},Lm=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},xD={name:"list_vault_files",description:"Lists markdown files in the vault with pagination and sorting. Essential for large vaults.",parameters:{type:w.OBJECT,properties:{limit:{type:w.NUMBER,description:"Max number of files to return (default: 20)"},offset:{type:w.NUMBER,description:"Number of files to skip (default: 0)"},sortBy:{type:w.STRING,enum:["mtime","name","size"],description:"Property to sort by. mtime is last modified time."},sortOrder:{type:w.STRING,enum:["asc","desc"],description:"Sort order (default: desc)"},filter:{type:w.STRING,description:"Optional text filter for path or filename."}}}},Pm="- list_vault_files: Use this to explore large vaults. It supports paging and sorting. Default is most recently modified first.",AD=async(e,t)=>{let n=PA(e,"limit"),i=PA(e,"offset",0)??0,o=Lm(e,"sortBy"),r=Lm(e,"sortOrder"),s=Lm(e,"filter"),a=await Ks({limit:n,offset:i,sortBy:o,sortOrder:r,filter:s}),l=a.files.map(c=>c.path);return t.onSystem(`Vault files (${i}-${i+a.files.length} of ${a.total})`,{name:"list_vault_files",filename:"Vault Explorer",files:l}),a};var Gu={};ue(Gu,{declaration:()=>ED,execute:()=>CD,instruction:()=>Fm});ke();var ED={name:"get_folder_tree",description:"Lists all folders in the vault as a flat array to understand hierarchy, or lists all files (notes and other files) in a specific folder. All paths are relative to vault root.",parameters:{type:w.OBJECT,properties:{folder_path:{type:w.STRING,description:"Optional: Path to a specific folder to query. If provided, returns all files (notes, images, PDFs, etc.) in that folder and its subfolders. If not provided, returns all folders in the vault."}},required:[]}},Fm="- get_folder_tree: Use this to see a simple list of all folders in the vault hierarchy. Optionally provide a folder_path parameter to query all files (notes, images, PDFs, etc.) in a specific folder and its subfolders. All paths are relative to vault root.",CD=(e,t)=>{let n=e.folder_path,i=Wl(n),o=n?`Folder contents queried for: ${n}`:"Folder structure scanned",r=n?`Folder Contents: ${n}`:"Folder Tree";return t.onSystem(o,{name:"get_folder_tree",filename:r,files:i}),Promise.resolve({files:i})};var qu={};ue(qu,{declaration:()=>_D,execute:()=>wD,instruction:()=>Om});ke();var _D={name:"dirlist",description:"Lists only directory structure, ignoring files, to understand vault hierarchy. All paths are relative to vault root."},Om="- dirlist: Use this to see the pure directory structure of the vault without any file information. All paths are relative to vault root.",wD=(e,t)=>{let i=ET().map(o=>({path:o.path||"/",type:"directory",hasChildren:o.children.length>0}));return t.onSystem("Directory structure scanned",{name:"dirlist",filename:"Directory List",directoryInfo:i}),Promise.resolve({directories:i})};var Bu={};ue(Bu,{declaration:()=>ND,execute:()=>RD,instruction:()=>Hm});ke();_e();var bD=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},ND={name:"read_file",description:"Read the full content of a specified file using path relative to vault root.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},Hm=`- read_file: Use this to ingest the contents of a note. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). You should read a file before proposing major edits to ensure context. Parameters:
  - filename: required, path to the file`,RD=async(e,t)=>{let n=bD(e,"filename");if(!n)throw new Error("Missing filename");let i=await Ht(n);await je(n),t.onSystem(`Opened ${n}`,{name:"read_file",filename:n,oldContent:i,newContent:i,additions:0,removals:0});let o=ze(n);return t.onFileState(o,n),{content:i}};var Vu={};ue(Vu,{declaration:()=>ID,execute:()=>MD,instruction:()=>Gm});ke();_e();var FA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},ID={name:"create_file",description:"Create a new file with initial content using path relative to vault root.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},content:{type:w.STRING}},required:["filename","content"]}},Gm='- create_file: Use this to initialize new notes in the vault. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). Always provide meaningful initial content.',MD=async(e,t)=>{let n=FA(e,"filename"),i=FA(e,"content")??"";if(!n)throw new Error("Missing filename");await jl(n,i),await je(n),t.onSystem(`Created ${n}`,{name:"create_file",filename:n,oldContent:"",newContent:i,additions:i.split(`
`).length,removals:0});let o=ze(n);return t.onFileState(o,n),{status:"created"}};var zu={};ue(zu,{declaration:()=>kD,execute:()=>DD,instruction:()=>qm});ke();_e();var OA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},kD={name:"update_file",description:"Overwrite the entire content of an existing file.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING},content:{type:w.STRING}},required:["filename","content"]}},qm="- update_file: Use this for total overwrites. For smaller changes, prefer edit_file.",DD=async(e,t)=>{let n=OA(e,"filename"),i=OA(e,"content")??"";if(!n)throw new Error("Missing filename");let o=await Ht(n).catch(()=>"");await uo(n,i),await je(n);let r=o.split(`
`),s=i.split(`
`),a=s.filter(d=>!r.includes(d)).length,l=r.filter(d=>!s.includes(d)).length;t.onSystem(`Updated ${n}`,{name:"update_file",filename:n,oldContent:o,newContent:i,additions:a,removals:l});let c=ze(n);return t.onFileState(c,n),{status:"updated"}};var $u={};ue($u,{declaration:()=>LD,execute:()=>PD,instruction:()=>Vm});ke();_e();var Bm=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},UD=(e,t)=>{let n=e[t];return typeof n=="number"?n:void 0},LD={name:"edit_file",description:"Perform granular line-based edits on a file.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING},operation:{type:w.STRING,enum:["append","replace_line","remove_line"]},text:{type:w.STRING},lineNumber:{type:w.NUMBER}},required:["filename","operation"]}},Vm="- edit_file: Use this for targeted modifications (appending, replacing lines, or removing lines).",PD=async(e,t)=>{let n=Bm(e,"filename"),i=Bm(e,"operation"),o=Bm(e,"text"),r=UD(e,"lineNumber");if(!n||!i)throw new Error("Missing filename or operation");let s=await Ht(n).catch(()=>"");await bT(n,i,o,r);let a=await Ht(n);await je(n),t.onSystem(`Edited ${n}`,{name:"edit_file",filename:n,oldContent:s,newContent:a,additions:i==="append"||i==="replace_line"?1:0,removals:i==="remove_line"||i==="replace_line"?1:0});let l=ze(n);return t.onFileState(l,n),{status:"edited"}};var Yu={};ue(Yu,{declaration:()=>FD,execute:()=>OD,instruction:()=>zm});ke();_e();var HA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},FD={name:"rename_file",description:"Rename an existing file to a new name.",parameters:{type:w.OBJECT,properties:{oldFilename:{type:w.STRING,description:"The current name of the file"},newFilename:{type:w.STRING,description:"The new name for the file"}},required:["oldFilename","newFilename"]}},zm="- rename_file: Use this to change the name of a note. Ensure the new name follows markdown extension conventions if applicable.",OD=async(e,t)=>{let n=HA(e,"oldFilename"),i=HA(e,"newFilename");if(!n||!i)throw new Error("Missing oldFilename or newFilename");await _T(n,i),await je(i),t.onSystem(`Renamed ${n} to ${i}`,{name:"rename_file",filename:n,oldContent:n,newContent:i});let o=ze(i);return t.onFileState(o,i),{status:"renamed",from:n,to:i}};var Ju={};ue(Ju,{declaration:()=>HD,execute:()=>GD,instruction:()=>$m});ke();var GA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},HD={name:"move_file",description:"Move a file from one folder to another using paths relative to vault root",parameters:{type:w.OBJECT,properties:{sourcePath:{type:w.STRING,description:'Current path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},targetPath:{type:w.STRING,description:'New path relative to vault root (e.g., "archive/projects/notes.md" or "notes.md" for root level)'}},required:["sourcePath","targetPath"]}},$m='- move_file: Move a file using paths relative to vault root. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level files). Use this to reorganize files between folders.',GD=async(e,t)=>{let n=GA(e,"sourcePath"),i=GA(e,"targetPath");if(!n||!i)throw new Error("Missing sourcePath or targetPath");return await wT(n,i),t.onSystem(`Moved ${n} to ${i}`,{name:"move_file",filename:n,displayFormat:`<span style="color: #fb923c; font-weight: 600;">${n}</span> <span style="color: #6b7280;">\u2192</span> <span style="color: #10b981; font-weight: 600;">${i}</span>`,dropdown:!1}),{status:"moved",from:n,to:i}};var Ku={};ue(Ku,{declaration:()=>BD,execute:()=>VD,instruction:()=>Ym});ke();var qD=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},BD={name:"search_keyword",description:"Search for a keyword across all files in the vault.",parameters:{type:w.OBJECT,properties:{keyword:{type:w.STRING,description:"The text to search for"}},required:["keyword"]}},Ym="- search_keyword: Fast plaintext search across all files.",VD=async(e,t)=>{let n=qD(e,"keyword");if(!n)throw new Error("Missing keyword");let i=await tu(n,!1);return t.onSystem(`Search complete for "${n}"`,{name:"search_keyword",filename:`Global Search: "${n}"`,searchKeyword:n,searchResults:i,displayFormat:`Searching for "<strong>${n}</strong>" (${i.length} results)`}),{results:i}};var Xu={};ue(Xu,{declaration:()=>zD,execute:()=>$D,instruction:()=>Jm});ke();var qA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},zD={name:"search_regexp",description:"Search using a regular expression across all files.",parameters:{type:w.OBJECT,properties:{pattern:{type:w.STRING,description:"The regex pattern"},flags:{type:w.STRING,description:'Optional regex flags (default: "i")'}},required:["pattern"]}},Jm="- search_regexp: Advanced regex search. Use this to identify files for global replacements.",$D=async(e,t)=>{let n=qA(e,"pattern"),i=qA(e,"flags")||"i";if(!n)throw new Error("Missing pattern");let o=await tu(n,!0,i);return t.onSystem(`Regex search complete for /${n}/`,{name:"search_regexp",filename:`Regex: /${n}/${i}`,searchResults:o,displayFormat:`Regex search "<strong>/${n}/${i}</strong>" (${o.length} results)`}),{results:o}};var Zu={};ue(Zu,{declaration:()=>YD,execute:()=>JD,instruction:()=>Km});ke();_e();var Qu=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},YD={name:"search_and_replace_regex_in_file",description:"Search and replace text in a specific file using regex.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING},pattern:{type:w.STRING},replacement:{type:w.STRING},flags:{type:w.STRING,description:'Optional regex flags (default: "g")'}},required:["filename","pattern","replacement"]}},Km="- search_and_replace_regex_in_file: Targeted regex replacement within a single node.",JD=async(e,t)=>{let n=Qu(e,"filename"),i=Qu(e,"pattern"),o=Qu(e,"replacement")??"",r=Qu(e,"flags")||"g";if(!n||!i)throw new Error("Missing filename or pattern");let s=await Ht(n),a=new RegExp(i,r),l=s.replace(a,o);await uo(n,l),await je(n),t.onSystem(`Replaced in ${n}`,{name:"search_and_replace_regex_in_file",filename:n,oldContent:s,newContent:l,additions:1,removals:1});let c=ze(n);return t.onFileState(c,n),{status:"success"}};var Wu={};ue(Wu,{declaration:()=>KD,execute:()=>XD,instruction:()=>Qm});ke();_e();var Xm=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},KD={name:"search_and_replace_regex_global",description:"Search and replace text across ALL files using regex.",parameters:{type:w.OBJECT,properties:{pattern:{type:w.STRING},replacement:{type:w.STRING},flags:{type:w.STRING,description:'Optional regex flags (default: "g")'}},required:["pattern","replacement"]}},Qm=`
GLOBAL SEARCH & REPLACE WORKFLOW:
1. When asked for a global replacement, ALWAYS run "search_regexp" first.
2. Report the number of files that will be updated.
3. ASK for explicit confirmation before calling "search_and_replace_regex_global".
4. After execution, report "updated all occurrences".`,XD=async(e,t)=>{let n=In(),i=Xm(e,"pattern"),o=Xm(e,"replacement")??"",r=Xm(e,"flags")||"g";if(!i)throw new Error("Missing pattern");let s=new RegExp(i,r),a=[],l=0,c=[];for(let d of n){let p=await Ht(d);if(s.test(p)){let m=p.replace(s,o);await uo(d,m),a.push({filename:d,oldContent:p,newContent:m,additions:1,removals:1}),c.push(d),l++}}return t.onSystem(`Global replace complete: ${l} files updated`,{name:"search_and_replace_regex_global",filename:"Vault Wide",multiDiffs:a}),c.length>0&&(await je(c[0]),t.onFileState("/",c)),{status:"success",filesUpdated:l}};var ju={};ue(ju,{declaration:()=>QD,execute:()=>WD,instruction:()=>Zm});var QD={name:"topic_switch",description:"Signal that a major topic shift has occurred. Provide a summary of the previous conversation.",parameters:{type:w.OBJECT,properties:{summary:{type:w.STRING,description:"A short one-sentence summary of the preceding conversation segment."}},required:["summary"]}},Zm=`
TOPIC SWITCHING & PERSISTENCE: 
1. Monitor for significant topic switches in the conversation flow.
2. If a switch occurs, call "topic_switch" with a concise summary.
3. This will automatically trigger an ARCHIVE process.
4. Do NOT say "Done." after calling this. Proceed immediately to the next topic.`,ZD=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},WD=(e,t)=>{let i=`x-chat-history-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.md`,o=ZD(e,"summary")||"Topic switch";return t.onSystem("Context update",{name:"topic_switch",filename:i,newContent:o}),Promise.resolve({status:"context_reset"})};var Wm={};ue(Wm,{declaration:()=>e2,execute:()=>n2,instruction:()=>t2});ke();var jD=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},e2={name:"create_directory",description:"Create a new directory in the vault. Parent directories will be created automatically if they don't exist.",parameters:{type:w.OBJECT,properties:{path:{type:w.STRING,description:'Directory path relative to vault root (e.g., "projects/notes" or "archive" for root level)'}},required:["path"]}},t2="- create_directory: Use this to create new directories in the vault. All paths are relative to vault root. Parent directories are created automatically.",n2=async(e,t)=>{let n=jD(e,"path");if(!n)throw new Error("Missing directory path");await eu(n);let i=n.split("/").pop()||n,o=n.replace(/[^/]+$/,"");return t.onSystem(`Created directory ${n}`,{name:"create_directory",filename:n,displayFormat:`${o}<span style="color: #10b981; font-weight: 600;">${i}</span>`,dropdown:!1}),{status:"created",path:n}};var jm={};ue(jm,{declaration:()=>o2,execute:()=>s2,instruction:()=>r2});ke();_e();var i2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},o2={name:"delete_file",description:"Move an existing file from the vault to the trash folder (chat history/trash). Files in trash are hidden from directory listings.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},r2="- delete_file: Use this to move a note to the trash folder (chat history/trash). Files in trash are hidden from directory listings but can be recovered manually. All paths are relative to vault root.",s2=async(e,t)=>{let n=i2(e,"filename");if(!n)throw new Error("Missing filename");await NT(n),t.onSystem(`Moved ${n} to trash`,{name:"delete_file",filename:n,oldContent:n,newContent:""});let i=ze(n);return t.onFileState(i,null),{status:"moved_to_trash",filename:n}};var ec={};ue(ec,{declaration:()=>l2,execute:()=>u2,instruction:()=>eh});mt();var a2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},l2={name:"internet_search",description:"Search the internet for real-time information, news, current events, or general knowledge outside the vault.",parameters:{type:w.OBJECT,properties:{query:{type:w.STRING,description:"The search query to look up on the web."}},required:["query"]}},eh="- internet_search: Use this to fetch real-time data or information not contained within the local vault. Always use this tool for questions about current events, celebrities, weather, or general knowledge.",u2=async(e,t)=>{let n=performance.now(),o=We()?.manualApiKey?.trim();if(!o)throw new Error("API key not found. Please set your Gemini API key in the plugin settings.");let r=a2(e,"query");if(!r)throw new Error("Missing query");t.onSystem(`Internet search: ${r}`,{name:"internet_search",filename:r,status:"pending"});let a=await new dn({apiKey:o}).models.generateContent({model:"gemini-3-flash-preview",contents:r,config:{tools:[{googleSearch:{}}]}}),l=a.text||"No results found.",c=a.candidates?.[0]?.groundingMetadata?.groundingChunks||[],d=performance.now(),p=Math.round(d-n),m=l.length;return t.onSystem(`Internet search: ${r}`,{name:"internet_search",filename:r,status:"success",newContent:l,groundingChunks:c,duration:p,responseLength:m}),{text:l,groundingChunks:c,searchQuery:r}};var tc={};ue(tc,{declaration:()=>c2,execute:()=>f2,instruction:()=>th});var V=e=>{if(e instanceof Error)return e.message;if(typeof e=="string")return e;if(e&&typeof e=="object"){if("message"in e&&typeof e.message=="string")return e.message;if("error"in e&&typeof e.error=="string")return e.error;try{return JSON.stringify(e)}catch{return"[object Object]"}}return String(e)};var c2={name:"end_conversation",description:"End the current voice conversation session and stop the voice interface.",parameters:{type:w.OBJECT,properties:{},required:[]}},th=`
CONVERSATION CONTROL:
1. Use "end_conversation" when the user indicates they want to stop talking or end the conversation.
2. This will immediately stop the voice interface and disconnect the session.
3. Do NOT say "Done." after calling this. The session will simply end.`,f2=async(e,t)=>{try{return await t.onSystem("Ending conversation...",{name:"end_conversation",filename:"Session",status:"success"}),t.onStopSession&&await t.onStopSession(),{status:"conversation_ended"}}catch(n){return console.error(`Error in end_conversation: ${V(n)}`),{status:"conversation_ended_with_errors"}}};var ih={};ue(ih,{declaration:()=>p2,execute:()=>h2,instruction:()=>m2});mt();ke();_e();var nh=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},d2=e=>{let t=atob(e),n=t.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);return i},p2={name:"generate_image_from_context",description:"Generate an image based on the current context or provided prompt using Gemini API and save it to the vault.",parameters:{type:w.OBJECT,properties:{prompt:{type:w.STRING,description:"The prompt describing what image to generate. If not provided, will use current context."},filename:{type:w.STRING,description:'The filename to save the image as (e.g., "generated-image.png"). If not provided, will auto-generate.'},currentFolder:{type:w.STRING,description:"The folder path where to save the image. If not provided, will use active file's folder."}},required:[]}},m2="- generate_image_from_context: Use this to create images based on conversation context or specific prompts. Images are saved to the current vault directory.",h2=async(e,t)=>{let i=We()?.manualApiKey?.trim();if(!i)throw new Error("API key not found. Please set your Gemini API key in the plugin settings.");let o=new dn({apiKey:i}),r=nh(e,"prompt");r||(r="Generate an image based on the current conversation context and topic being discussed.");try{let s=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:r}),a="";if(s.candidates&&s.candidates.length>0){let h=s.candidates[0];if(h.content&&h.content.parts){for(let g of h.content.parts)if(g.inlineData&&g.inlineData.data){a=g.inlineData.data;break}}}if(!a)throw new Error("No image data returned from API");let l=nh(e,"filename");l||(l=`generated-image-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.png`),l.match(/\.(png|jpg|jpeg|gif|webp)$/i)||(l+=".png");let c=d2(a);console.error("=== DEBUG generate_image_from_context: STARTING FILE SAVE ==="),console.error(`DEBUG: Image data length: ${a.length} characters`),console.error(`DEBUG: Binary data size: ${c.byteLength} bytes`),console.error(`DEBUG: First 100 chars of base64: ${a.substring(0,100)}`);let d=nh(e,"currentFolder")||"";if(console.error(`DEBUG: currentFolder from args: "${d}"`),!d){let h=ye();if(console.error(`DEBUG: getObsidianApp() returned: ${h?"app exists":"NULL"}`),h&&h.workspace){console.error("DEBUG: app.workspace exists");let g=h.workspace.getActiveFile();console.error(`DEBUG: activeFile: ${g?g.path:"NULL"}`),g&&g.parent?(d=g.parent.path,console.error(`DEBUG: currentFolder from activeFile.parent: "${d}"`)):console.error("DEBUG: No activeFile or no parent - currentFolder stays empty")}else console.error("DEBUG: No app or no workspace - currentFolder stays empty")}let p=d?`${d}/${l}`:l;console.error(`DEBUG: Final fullFilename to save: "${p}"`),console.error(`DEBUG: filename only: "${l}"`),console.error(`DEBUG: About to call createBinaryFile with fullFilename="${p}", binaryData.byteLength=${c.byteLength}`);try{let h=await CT(p,c);console.error(`DEBUG: createBinaryFile returned: "${h}"`)}catch(h){throw console.error("DEBUG: createBinaryFile THREW ERROR:",h),h}console.error("=== DEBUG generate_image_from_context: FILE SAVE COMPLETE ==="),t.onSystem(`Generated image: ${l}`,{name:"generate_image_from_context",filename:l,newContent:`Generated image (${c.byteLength} bytes)`,description:`Image generated from prompt: ${r}`});let m=ze(p);return t.onFileState(m,l),{filename:l,filePath:p,size:c.byteLength,type:l.split(".").pop()||"png",targetFolder:d,description:`Image generated from prompt: ${r}`}}catch(s){console.error("Image generation error:",s),console.error("Error details:",JSON.stringify(s,null,2));let a=`Failed to generate image: ${V(s)}`;throw V(s).includes("model")&&(a+=`

This might be due to an incorrect model name or insufficient API permissions for image generation.`),V(s).includes("API key")&&(a+=`

Please check your Gemini API key configuration.`),new Error(a)}};var oh={};ue(oh,{declaration:()=>g2,execute:()=>v2,instruction:()=>y2});_e();var g2={name:"reveal_active_pane",description:"Reveals and displays information about the last active text editor in Obsidian, including file path, view type, and editor state. Uses getActiveFile() and getLastOpenFiles() for accurate results."},y2="- reveal_active_pane: Use this to get information about the last active text editor in Obsidian, including what file was most recently edited, the view type, and editor details. Uses getActiveFile() for accurate results.",v2=(e,t)=>{let n=ye();if(!n||!n.workspace)return t.onSystem("Error: Not running in Obsidian or workspace unavailable",{name:"reveal_active_pane",filename:"Active Pane",error:"Obsidian workspace not available"}),Promise.resolve({error:"Obsidian workspace not available"});try{let i=n.workspace,o=i.getActiveFile(),r=i.getLastOpenFiles(),s=i.activeLeaf,a=o;if(!s||s.view.getViewType()!=="markdown"){let m=i.getLeavesOfType("markdown");s=m.find(h=>h.view.file===o)||m[0]||null}if(!s&&!a)return t.onSystem("No active text editor found",{name:"reveal_active_pane",filename:"Active Editor",status:"error",error:"No active text editor currently available"}),Promise.resolve({error:"No active text editor currently available"});let l=s?.view,c=l?.getState(),d=l?.file||a,p={viewType:l?.getViewType()||"unknown",leafType:s?.constructor.name||"none",isPinned:s?.pinned||!1,isRoot:s?.root||!1,isHidden:s?.hidden||!1,hasParent:!!s?.parent,side:s?.getSide?.()||"unknown",width:s?.width||0,height:s?.height||0,x:s?.x||0,y:s?.y||0,filePath:d?d.path:null,fileName:d?d.name:null,fileExtension:d?d.extension:null,fileSize:d?d.stat?.size:null,fileModified:d?d.stat?.mtime:null,viewState:c,mode:c?.mode||null,source:c?.source||null,editorInfo:l?.editor?{cursor:l.editor.getCursor?.(),selection:l.editor.getSelection?.(),lineCount:l.editor.lineCount?.(),isFocused:l.editor.hasFocus?.()}:null,lastOpenFiles:r,isActiveFile:!!o,hasActiveLeaf:!!s};return t.onSystem("Active pane information retrieved",{name:"reveal_active_pane",filename:p.fileName||"Active Pane",status:"success",paneInfo:p}),Promise.resolve({paneInfo:p})}catch(i){return console.error("Reveal active pane error:",i),t.onSystem("Error retrieving active pane information",{name:"reveal_active_pane",filename:"Active Pane",status:"error",error:V(i)}),Promise.resolve({error:V(i)})}};var rh={};ue(rh,{declaration:()=>S2,execute:()=>x2,instruction:()=>T2});_e();var BA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},S2={name:"open_folder_in_system",description:"Opens the specified folder in the system file browser/finder."},T2='- open_folder_in_system: Use this to open a folder in the system file browser. Takes a folder path as argument (e.g., path: "documents/notes"). Use "." or empty path for vault root.',x2=async(e,t)=>{let n=ye();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"open_folder_in_system",filename:"System Browser",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};try{let i=BA(e,"path")||BA(e,"folder")||".",o=n.vault,r,s;if(i==="."||i===""||i==="/")r=o.adapter.getBasePath(),s="Vault Root";else{let a=o.getAbstractFileByPath(i);if(!a)return t.onSystem(`Path not found: ${i}`,{name:"open_folder_in_system",filename:"System Browser",status:"error",error:`Path "${i}" does not exist in vault`}),{error:`Path "${i}" does not exist in vault`};if(a.extension!==void 0){let l=a.parent?.path||"";r=l?o.adapter.getFullPath(l):o.adapter.getBasePath(),s=a.parent?.name||"Vault Root"}else r=o.adapter.getFullPath(i),s=a.name}if(n.vault.adapter.openPath)await n.vault.adapter.openPath(r);else{let a=n.openWithDefaultApp;a&&await a(r)}return t.onSystem("Opened folder in system browser",{name:"open_folder_in_system",filename:s,status:"success",folderPath:i,systemPath:r}),{success:!0,folderPath:i,systemPath:r,targetName:s,message:`Folder "${s}" opened in system browser`}}catch(i){return console.error("Open folder in system browser error:",i),t.onSystem("Error opening folder in system browser",{name:"open_folder_in_system",filename:"System Browser",status:"error",error:i.message||String(i)}),{error:i.message||String(i)}}};var nc={};ue(nc,{declaration:()=>A2,execute:()=>_2,instruction:()=>lh});_e();var ah=require("obsidian");mt();var A2={name:"image_search",description:"Search for images on the internet and preview them. Click on any image in the preview to download it to the vault.",parameters:{type:w.OBJECT,properties:{query:{type:w.STRING,description:"The search query to find images."},count:{type:w.NUMBER,description:"Number of images to show in preview (default: 3, max: 10)."},auto_download:{type:w.BOOLEAN,description:"Whether to automatically download images (default: false)."},folder:{type:w.STRING,description:"Target folder path (optional, defaults to current folder or assets folder)."},filename_prefix:{type:w.STRING,description:"Prefix for generated filenames (optional)."}},required:["query"]}},lh="- image_search: Use this to search for images and preview them. Click on any image in the preview to download it to the vault.",sh=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},E2=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},C2=(e,t,n)=>{let i=e[t];return typeof i=="boolean"?i:n},_2=async(e,t)=>{let n=ye();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"image_search",filename:"Image Search",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=sh(e,"query"),o=E2(e,"count",3),r=C2(e,"auto_download",!1),s=sh(e,"folder"),a=sh(e,"filename_prefix");if(!i)return{error:"Missing image search query"};try{t.onSystem(`Image search: ${i}`,{name:"image_search",filename:i,status:"pending"});let l=Math.min(Math.max(1,Math.floor(o)||3),10),c=s;if(!c){let m=n.workspace.getActiveFile();m?c=m.parent?.path||"":c="assets"}c&&!await n.vault.adapter.exists(c)&&await n.vault.createFolder(c);let d=await w2(i,Math.max(l,3));if(!d||d.length===0)return t.onSystem("No images found for the search query",{name:"image_search",filename:i,status:"error",error:"No images found"}),{error:"No images found for the search query"};let p=d.slice(0,l);if(console.debug("=== DEBUG: Search Results ==="),console.debug("Total search results found:",d.length),console.debug("Results for preview:",p),console.debug("Auto download:",r),console.debug("=== END DEBUG: Search Results ==="),t.onSystem(`Found ${d.length} images for "${i}". Click any image to download:`,{name:"image_search",filename:i,status:"search_results",searchResults:p,totalFound:d.length,targetFolder:c}),r){let m=[];for(let h=0;h<Math.min(p.length,l);h++){let g=p[h];try{let S=await b2(n,g,c,a||i,h+1);m.push(S)}catch(S){console.error(`Failed to download image ${h+1}:`,S)}}if(m.length>0){let h=`Downloaded ${m.length} image${m.length>1?"s":""} to ${c}`;return t.onSystem(h,{name:"image_search",filename:i,status:"success",downloadedImages:m}),{query:i,downloadedImages:m,targetFolder:c,totalFound:d.length,totalDownloaded:m.length}}}return{query:i,searchResults:p,targetFolder:c,totalFound:d.length,auto_download:r}}catch(l){return console.error("Image search error:",l),t.onSystem("Error during image search and download",{name:"image_search",filename:i,status:"error",error:V(l)}),{error:V(l)}}};function VA(){let e=ye();e&&e.setting&&(e.setting.open(),e.setting.openTabById("hermes-voice-assistant"))}async function w2(e,t){try{let i=(await Ql())?.serperApiKey?.trim();if(!i)throw console.error("Serper API key not found"),VA(),new Error("Serper API key not found. Please set your Serper API key in the plugin settings. Get 2,500 free credits at https://serper.dev/");let o="https://google.serper.dev/images";console.debug("Fetching images from Serper.dev API...");let r=await(0,ah.requestUrl)({url:o,method:"POST",headers:{"X-API-KEY":i,"Content-Type":"application/json"},body:JSON.stringify({q:e,num:Math.min(t,10)})});if(r.status>=400)throw console.error("Serper API error:",r.status,r.text),r.status===401||r.status===403?(VA(),new Error("Invalid Serper API key. Please check your API key in the plugin settings.")):new Error(`Serper API error: ${r.status}`);let s=r.json;if(!s.images||s.images.length===0)return console.debug("No images found for query:",e),[];let a=s.images.map(l=>({url:l.imageUrl,title:l.title,description:l.source||"",image:{thumbnail:l.thumbnailUrl||l.imageUrl,contextLink:l.link,width:l.imageWidth,height:l.imageHeight}}));return console.debug(`Found ${a.length} images for query: ${e}`),a}catch(n){throw console.error("Image search error:",n),n}}async function b2(e,t,n,i,o){try{console.debug("=== DEBUG: downloadAndSaveImage ==="),console.debug("Image result:",t),console.debug("Target folder:",n),console.debug("Filename prefix:",i),console.debug("Index:",o);let r=Date.now(),s=Math.random().toString(36).substring(2,8),a=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),l=N2(t.url)||"jpg",c=`${a}-${o}-${r}-${s}.${l}`,d=n?`${n}/${c}`:c;console.debug("Generated filename:",c),console.debug("File path:",d),console.debug("Extension:",l),console.debug("Starting download from URL:",t.url);let p=await(0,ah.requestUrl)({url:t.url,method:"GET"});if(p.status>=400)throw new Error(`HTTP error! status: ${p.status}`);let m=p.arrayBuffer;console.debug("Downloaded image size:",m.byteLength,"bytes"),console.debug("Buffer type:",m.constructor.name),console.debug("Saving to vault at path:",d),await e.vault.adapter.writeBinary(d,m),console.debug("Successfully saved to vault");let h={filename:c,filePath:d,url:t.url,title:t.title,size:m.byteLength,type:l};return console.debug("Download result:",h),console.debug("=== END DEBUG: downloadAndSaveImage ==="),h}catch(r){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",r),console.error("Image result that failed:",t),console.error("=== END DEBUG ERROR ==="),r}}function N2(e){try{let n=new URL(e).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var uh={};ue(uh,{declaration:()=>I2,execute:()=>k2,instruction:()=>M2});_e();var zA=require("obsidian");var ic=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},R2=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},I2={name:"download_image",description:"Download a specific image from a URL to the vault.",parameters:{type:w.OBJECT,properties:{imageUrl:{type:w.STRING,description:"The URL of the image to download."},title:{type:w.STRING,description:"The title of the image for filename generation."},query:{type:w.STRING,description:"The original search query for filename context."},index:{type:w.NUMBER,description:"The index of the image in search results."},folder:{type:w.STRING,description:"Target folder path (optional)."}},required:["imageUrl","title","query"]}},M2="- download_image: Use this to download a specific image from a URL to the vault.",k2=async(e,t)=>{let n=ye();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"download_image",filename:"Image Download",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=ic(e,"imageUrl"),o=ic(e,"title"),r=ic(e,"query"),s=R2(e,"index",1),a=ic(e,"folder");if(!i||!o||!r)return{error:"Missing required image download parameters"};try{let l=a;if(!l){let d=n.workspace.getActiveFile();d?l=d.parent?.path||"":l="assets"}l&&!await n.vault.adapter.exists(l)&&await n.vault.createFolder(l);let c=await D2(n,{url:i,title:o},l,r,s);return t.onSystem(`Downloaded image: ${c.filename}`,{name:"download_image",filename:c.filename,status:"success",downloadedImages:[c]}),c}catch(l){return console.error("Download image error:",l),t.onSystem("Error downloading image",{name:"download_image",filename:o,status:"error",error:V(l)}),{error:V(l)}}};async function D2(e,t,n,i,o){try{let r=Date.now(),s=Math.random().toString(36).substring(2,8),a=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),l=U2(t.url)||"jpg",c=`${a}-${o}-${r}-${s}.${l}`,d=n?`${n}/${c}`:c;console.debug("=== DEBUG: downloadAndSaveImage ==="),console.debug("Image URL:",t.url),console.debug("Target folder:",n),console.debug("Filename:",c),console.debug("File path:",d);let m=(await(0,zA.requestUrl)({url:t.url,method:"GET"})).arrayBuffer;console.debug("Downloaded image size:",m.byteLength,"bytes"),console.debug("Saving to vault at path:",d),await e.vault.adapter.writeBinary(d,m),console.debug("Successfully saved to vault");let h={filename:c,filePath:d,url:t.url,title:t.title,size:m.byteLength,type:l,targetFolder:n};return console.debug("Download result:",h),console.debug("=== END DEBUG: downloadAndSaveImage ==="),h}catch(r){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",r),console.error("Image result that failed:",t),console.error("=== END DEBUG ERROR ==="),r}}function U2(e){try{let n=new URL(e).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var ch={};ue(ch,{declaration:()=>P2,execute:()=>O2,instruction:()=>F2});_e();mt();var L2=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},P2={name:"list_trash",description:"List the most recent files in the trash folder. Shows up to 100 files sorted by deletion time (most recent first).",parameters:{type:w.OBJECT,properties:{limit:{type:w.NUMBER,description:"Maximum number of files to show (default: 20, max: 100)."}}}},F2="- list_trash: Use this to list files in the trash folder. Shows recently deleted files that can be restored.",O2=(e,t)=>{let n=ye();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"list_trash",filename:"Trash",error:"Obsidian vault not available"}),Promise.resolve({error:"Obsidian vault not available"});let i=L2(e,"limit",20),o=Math.min(Math.max(1,Math.floor(i)||20),100);try{t.onSystem("Scanning trash folder...",{name:"list_trash",filename:"Trash",status:"pending"});let a=`${We()?.chatHistoryFolder||"chat-history"}/trash`;if(!n.vault.getAbstractFileByPath(a))return t.onSystem("Trash folder is empty or does not exist",{name:"list_trash",filename:"Trash",status:"success",files:[]}),Promise.resolve({files:[],total:0,message:"Trash folder is empty"});let c=n.vault.getMarkdownFiles().filter(h=>h.path.startsWith(a+"/")).map(h=>({path:h.path,name:h.name,originalName:H2(h.name),trashTimestamp:$A(h.name),deletionDate:G2($A(h.name)),size:h.stat.size,mtime:h.stat.mtime})).filter(h=>h.trashTimestamp!==null).sort((h,g)=>{let S=h.deletionDate?.getTime()||0;return(g.deletionDate?.getTime()||0)-S}),d=c.length,m=c.slice(0,o).map(h=>({trashPath:h.path,originalName:h.originalName,trashFilename:h.name,deletionDate:h.deletionDate?.toISOString()||"",formattedDeletionDate:h.deletionDate?.toLocaleString()||"",size:h.size,canRestore:!0}));return t.onSystem(`Found ${d} files in trash${d>o?` (showing ${o} most recent)`:""}`,{name:"list_trash",filename:"Trash",status:"success",files:m.map(h=>`${h.originalName} (${h.formattedDeletionDate||"unknown date"})`),totalItems:d,shownItems:m.length}),Promise.resolve({files:m,total:d,shown:m.length,trashFolderPath:a})}catch(r){return console.error("List trash error:",r),t.onSystem("Error listing trash files",{name:"list_trash",filename:"Trash",status:"error",error:V(r)}),Promise.resolve({error:V(r)})}};function H2(e){let t=e.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(t)return t[1];let n=e.match(/^\d+-(.+)$/);return n?n[1]:e}function $A(e){let t=e.match(/^(\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z)-/);if(t)return t[1].replace(/-/g,":").replace("T","T").replace(/(\d{4}-\d{2}-\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})Z/,"$1T$2:$3:$4.$5Z");let n=e.match(/^(\d{13})-/);return n?n[1]:null}function G2(e){if(!e)return null;try{return e.includes("T")&&e.includes("Z")?new Date(e):/^\d{13}$/.test(e)?new Date(parseInt(e)):null}catch{return null}}var fh={};ue(fh,{declaration:()=>q2,execute:()=>V2,instruction:()=>B2});_e();mt();var YA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},q2={name:"restore_from_trash",description:"Restore a file from the trash folder to its original location or a specified location.",parameters:{type:w.OBJECT,properties:{trash_filename:{type:w.STRING,description:'The filename in trash (as shown by list_trash, e.g., "2024-01-25T15-30-45-123Z-my-note.md")'},target_path:{type:w.STRING,description:"Optional: Target path where to restore the file. If not provided, attempts to restore to original location."}},required:["trash_filename"]}},B2="- restore_from_trash: Use this to restore a file from trash. Provide the trash filename from list_trash. Optionally specify where to restore it.",V2=async(e,t)=>{let n=ye();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"restore_from_trash",filename:"Trash",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=YA(e,"trash_filename"),o=YA(e,"target_path");if(!i)return t.onSystem("Error: trash_filename is required",{name:"restore_from_trash",filename:"Trash",status:"error",error:"Missing required parameter: trash_filename"}),{error:"trash_filename is required"};try{t.onSystem(`Restoring ${i}...`,{name:"restore_from_trash",filename:i,status:"pending"});let a=`${We()?.chatHistoryFolder||"chat-history"}/trash`,l=i.includes("/")?i:`${a}/${i}`,c=n.vault.getAbstractFileByPath(l);if(!c)return t.onSystem(`File not found in trash: ${i}`,{name:"restore_from_trash",filename:i,status:"error",error:"File not found in trash"}),{error:`File not found in trash: ${i}`};let d=z2(c.name),p=o;if(!p&&(p=d,d.includes("/"))){let g=ze(d);n.vault.getAbstractFileByPath(g)||await n.vault.createFolder(g)}if(n.vault.getAbstractFileByPath(p))return t.onSystem(`Target file already exists: ${p}`,{name:"restore_from_trash",filename:i,status:"error",error:"Target file already exists",targetPath:p}),{error:`Target file already exists: ${p}. Please specify a different target_path or delete the existing file first.`,targetPath:p,trashPath:l};await n.fileManager.renameFile(c,p),await je(p),t.onSystem(`Successfully restored ${d} to ${p}`,{name:"restore_from_trash",filename:d,status:"success",originalPath:l,restoredPath:p});let h=ze(p);return t.onFileState(h,d),{success:!0,originalFilename:d,trashPath:l,restoredPath:p,message:`Successfully restored ${d} to ${p}`}}catch(r){return console.error("Restore from trash error:",r),t.onSystem("Error restoring file from trash",{name:"restore_from_trash",filename:i,status:"error",error:V(r)}),{error:V(r)}}};function z2(e){let t=e.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(t)return t[1];let n=e.match(/^\d+-(.+)$/);return n?n[1]:e}var dh={};ue(dh,{declaration:()=>Y2,execute:()=>K2,instruction:()=>J2});_e();var $2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},Y2={name:"get_obsidian_commands",description:"Lists all available Obsidian commands that can be executed.",parameters:{type:w.OBJECT,properties:{filter:{type:w.STRING,description:"Optional text filter to search for specific commands by name or description."}}}},J2="- get_obsidian_commands: Use this to list all available Obsidian commands. You can optionally filter commands by name or description.",K2=(e,t)=>{let n=$2(e,"filter");try{let i=ye();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands,r=Object.entries(o).map(([l,c])=>({id:l,name:c.name,description:c.editor?.name||c.name})),s=r;if(n){let l=n.toLowerCase();s=r.filter(c=>c.name.toLowerCase().includes(l)||c.description.toLowerCase().includes(l)||c.id.toLowerCase().includes(l))}s.sort((l,c)=>l.name.localeCompare(c.name));let a=s.map(l=>`${l.name} (${l.id})`);return t.onSystem(`Obsidian commands (${s.length} total)`,{name:"get_obsidian_commands",filename:"Command Registry",files:a}),Promise.resolve({commands:s,total:r.length,filtered:s.length,filter:n||null})}catch(i){throw console.error("Get Obsidian commands error:",i),new Error(`Failed to get Obsidian commands: ${V(i)}`)}};var ph={};ue(ph,{declaration:()=>Q2,execute:()=>W2,instruction:()=>Z2});_e();var X2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},Q2={name:"run_obsidian_command",description:"Executes an Obsidian command by its command ID.",parameters:{type:w.OBJECT,properties:{commandId:{type:w.STRING,description:'The command ID to execute (e.g., "editor:toggle-bold" or "workspace:open-command-palette").'}},required:["commandId"]}},Z2="- run_obsidian_command: Use this to execute an Obsidian command by its command ID. Use get_obsidian_commands first to find available commands and their IDs.",W2=async(e,t)=>{let n=X2(e,"commandId");if(!n)throw new Error("Missing commandId");try{let i=ye();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands[n];if(!o)throw new Error(`Command not found: ${n}`);await i.commands.executeCommandById(n);let r=o.name||n;return t.onSystem(`Executed: ${r}`,{name:"run_obsidian_command",filename:"Command Execution",status:"success"}),{success:!0,commandId:n,commandName:r,executedAt:new Date().toISOString()}}catch(i){console.error("Run Obsidian command error:",i);let o=V(i);throw t.onSystem(`Command execution failed: ${o}`,{name:"run_obsidian_command",filename:"Command Execution",status:"error",error:o}),new Error(`Failed to execute command ${n}: ${o}`)}};var rc={};ue(rc,{declaration:()=>j2,execute:()=>nU,instruction:()=>gh});var KA=require("obsidian");_e();mt();ke();var oc=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},mh=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},j2={name:"context",description:"Provides comprehensive context about the current Obsidian environment including current note, folder, opened files, chat history, recent files, directory structure, and most used tags.",parameters:{type:w.OBJECT,properties:{includeHistory:{type:w.BOOLEAN,description:"Include chat history in context (default: true)"},historyLimit:{type:w.NUMBER,description:"Number of recent chat messages to include (default: 10)"},includeRecentFiles:{type:w.BOOLEAN,description:"Include recently edited files (default: true)"},recentFilesLimit:{type:w.NUMBER,description:"Number of recent files to include (default: 15)"},includeDirectoryStructure:{type:w.BOOLEAN,description:"Include directory structure up to 2 levels (default: true)"},includeTags:{type:w.BOOLEAN,description:"Include most used tags from vault (default: true)"},tagsLimit:{type:w.NUMBER,description:"Number of most used tags to include (default: 30)"}}}},gh="- context: Use this to get comprehensive context about the current Obsidian environment including current note, folder, opened files, chat history, recent files, directory structure, and most used tags.",hh=e=>e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`,JA=e=>new Date(e).toLocaleString(),eU=(e=30)=>{let t=ye();if(!t?.vault)return[];let n=new Map;return t.vault.getMarkdownFiles().forEach(o=>{let r=t.metadataCache.getFileCache(o);if(r){let s=(0,KA.getAllTags)(r);s&&s.forEach(a=>{n.set(a,(n.get(a)||0)+1)})}}),Array.from(n.entries()).map(([o,r])=>({tag:o,count:r})).sort((o,r)=>r.count-o.count).slice(0,e)},tU=(e,t=2)=>{let n=[],i=new Set;return e.filter(o=>o!=="").sort().forEach(o=>{o.split("/").length<=t&&(i.has(o)||(n.push(`\u{1F4C1} ${o}/`),i.add(o)))}),n},nU=async(e,t)=>{let n=ye();if(!n||!n.workspace)return t.onSystem("Error: Not running in Obsidian or workspace unavailable",{name:"context",filename:"Context",error:"Obsidian workspace not available"}),Promise.resolve({error:"Obsidian workspace not available"});try{let i=oc(e,"includeHistory")!=="false",o=mh(e,"historyLimit",10)??10,r=oc(e,"includeRecentFiles")!=="false",s=mh(e,"recentFilesLimit",15)??15,a=oc(e,"includeDirectoryStructure")!=="false",l=oc(e,"includeTags")!=="false",c=mh(e,"tagsLimit",30)??30,d=n.workspace,p=We(),m=d.getActiveFile(),h=m?.path||p?.currentNote||null,g=m?.parent?.path||p?.currentFolder||"/",S=d.getLastOpenFiles(),y=d.getLeavesOfType("markdown").map(z=>z.view?.file?.path).filter(z=>!!z).filter((z,st,ai)=>ai.indexOf(z)===st),v=[];r&&(v=(await Ks({limit:s,sortBy:"mtime",sortOrder:"desc"})).files.map(st=>({path:st.path,name:st.name,modified:JA(st.mtime),size:hh(st.size)})));let T=[];i&&(T=Rn().slice(-o));let A=await vr(),C=A.slice(0,5).map(z=>({key:z.key,summary:z.summary,archivedAt:JA(z.archivedAt)})),I=[];if(a){let z=Wl();I=tU(z,2)}let _=[];l&&(_=eU(c));let M=await Ks({limit:1e3}),R=M.total,N=M.files.reduce((z,st)=>z+st.size,0),q={currentNote:h,currentFolder:g,workspace:{openedFiles:y,lastOpenFiles:S.slice(0,10),totalOpenFiles:y.length},recentFiles:v.slice(0,s),chatHistory:{messages:T,totalMessages:T.length},archivedConversations:C,totalArchived:A.length,directoryStructure:I,tags:{mostUsed:_,totalTags:_.length},vault:{totalFiles:R,totalSize:hh(N),totalFolders:I.length}},pe=["**\u{1F4CD} Current Location**",h?`\u{1F4C4} Note: \`${h}\``:"\u{1F4C4} No active note",`\u{1F4C1} Folder: \`${g}\``,"","**\u{1F5A5}\uFE0F Workspace State**",`\u{1F4C2} Open Files: ${y.length}`,...y.slice(0,5).map(z=>`  \u2022 \`${z}\``),y.length>5?`  \u2022 ... and ${y.length-5} more`:"","","**\u23F0 Recently Edited Files**",...v.slice(0,8).map(z=>`  \u2022 \`${z.name}\` - ${z.modified} (${z.size})`),v.length>8?`  \u2022 ... and ${v.length-8} more`:"","","**\u{1F4AC} Chat Activity**",`\u{1F4CA} Recent messages: ${T.length}`,...T.slice(0,3).map(z=>`  \u2022 "${z.substring(0,60)}${z.length>60?"...":""}"`),T.length>3?`  \u2022 ... and ${T.length-3} more`:"",`\u{1F4E6} Archived conversations: ${A.length}`,"","**\u{1F4C2} Directory Structure (2 levels)**",...I.slice(0,15),I.length>15?`  \u2022 ... and ${I.length-15} more folders`:"","","**\u{1F3F7}\uFE0F Most Used Tags**",`\u{1F4CA} Total tags found: ${_.length}`,..._.slice(0,10).map(z=>`  \u2022 ${z.tag} (${z.count} uses)`),_.length>10?`  \u2022 ... and ${_.length-10} more tags`:"","","**\u{1F4CA} Vault Statistics**",`\u{1F4C4} Total files: ${R}`,`\u{1F4C1} Total folders: ${I.length}`,`\u{1F4BE} Total size: ${hh(N)}`].join(`
`);return t.onSystem("Context information retrieved",{name:"context",filename:"Environment Context",status:"success",displayFormat:pe,dropdown:!0,contextInfo:q}),Promise.resolve(q)}catch(i){console.error("Context tool error:",i);let o=i instanceof Error?i.message:String(i);return t.onSystem("Error retrieving context information",{name:"context",filename:"Context",status:"error",error:o}),Promise.resolve({error:o})}};var sc=e=>typeof e=="object"&&e!==null,XA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},QA={list_directory:Ou,list_vault_files:Hu,get_folder_tree:Gu,dirlist:qu,read_file:Bu,create_file:Vu,create_directory:Wm,delete_file:jm,update_file:zu,edit_file:$u,rename_file:Yu,move_file:Ju,search_keyword:Ku,search_regexp:Xu,search_and_replace_regex_in_file:Zu,search_and_replace_regex_global:Wu,topic_switch:ju,internet_search:ec,generate_image_from_context:ih,end_conversation:tc,reveal_active_pane:oh,open_folder_in_system:rh,image_search:nc,download_image:uh,list_trash:ch,restore_from_trash:fh,get_obsidian_commands:dh,run_obsidian_command:ph,context:rc},mo=Object.values(QA).map(e=>e.declaration),ho=async(e,t,n,i,o)=>{let r=performance.now(),s=QA[e];if(!s){let c={toolName:e,content:JSON.stringify(t,null,2),contentSize:JSON.stringify(t).length,apiCall:"executeCommand"};throw n.onLog(`Tool not found: ${e}`,"error",void 0,c),new Error(`Command ${e} not found`)}let a=i||`tool-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;i||n.onSystem(`${e.replace(/_/g," ").toUpperCase()}...`,{id:a,name:e,filename:XA(t,"filename")||(e==="internet_search"?"Web":"Registry"),status:"pending"});let l={...n,onSystem:(c,d)=>{n.onSystem(c,{...d,id:a})}};try{let c=o?{...t,currentFolder:o}:t,d=await s.execute(c,l),p=iU(e,d,l),m=Math.round(performance.now()-r);return n.onLog(`Executed ${e} in ${m}ms`,"action",m),p}catch(c){console.error("Command execution error:",c);let d=Math.round(performance.now()-r),p=c instanceof Error?c.message:String(c),m=c instanceof Error?c.stack:void 0,h={toolName:e,content:JSON.stringify(t,null,2),contentSize:JSON.stringify(t).length,stack:m,apiCall:"tool_execution"};throw n.onLog(`Error in ${e}: ${p}`,"error",d,h),l.onSystem(`Error: ${p}`,{name:e,filename:XA(t,"filename")||(e==="internet_search"?"Web":"unknown"),error:p,status:"error"}),c}};function iU(e,t,n){if(sc(t)&&Array.isArray(t.files)){let o=t.files.length;if(o>100){let r=t.files.slice(0,100),s=Math.ceil(o/100),a=1,l=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} items (Page ${a} of ${s}).

To see more results, consider:
- Using list_vault_files with pagination (limit/offset parameters)
- Using search_keyword or search_regexp for targeted searches
- Using get_folder_tree for folder structure only
- Adding a filter parameter to narrow results

Current results show first ${100} items only.`;return console.debug(`Tool result truncated: ${e}, ${100}/${o} items, page ${a}/${s}`),n.onSystem(`Registry Scanned (TRUNCATED: ${100}/${o} items)`,{name:e,filename:"Vault Root",files:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s}),{...t,files:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s,truncationNotice:l}}}if(sc(t)&&Array.isArray(t.folders)){let o=t.folders.length;if(o>100){let r=t.folders.slice(0,100),s=Math.ceil(o/100),a=1,l=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} folders (Page ${a} of ${s}).

For large folder structures, consider:
- Using search_keyword to find specific folders
- Using list_vault_files with filter parameter
- Asking for a specific subfolder path

Current results show first ${100} folders only.`;return console.debug(`Folder structure truncated: ${e}, ${100}/${o} folders, page ${a}/${s}`),n.onSystem(`Folder Structure Scanned (TRUNCATED: ${100}/${o} folders)`,{name:e,filename:"Folder Tree",files:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s}),{...t,folders:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s,truncationNotice:l}}}if(sc(t)&&Array.isArray(t.directories)){let o=(a,l=0)=>{let c=[],d=l;return a.forEach(p=>{if(c.push({path:p.path,type:"directory",hasChildren:p.children&&p.children.length>0}),d++,p.children&&p.children.length>0){let m=o(p.children,d);c=c.concat(m.items),d=m.total}}),{items:c,total:d}},{items:r,total:s}=o(t.directories);if(s>100){let a=r.slice(0,100),l=Math.ceil(s/100),c=1,d=`

=== DIRECTORY LIST TRUNCATED ===
Showing ${100} of ${s} directories (Page ${c} of ${l}).

For large directory structures, consider:
- Using search_keyword to find specific directories
- Using list_vault_files with filter parameter
- Asking for a specific directory path
- Using get_folder_tree for a simple folder list

Current results show first ${100} directories only.`;return console.debug(`Directory list truncated: ${e}, ${100}/${s} directories, page ${c}/${l}`),n.onSystem(`Directory Structure Scanned (TRUNCATED: ${100}/${s} directories)`,{name:e,filename:"Directory List",files:a.map(p=>p.path),truncated:!0,totalItems:s,shownItems:100,currentPage:c,totalPages:l,directoryInfo:a}),{...t,directories:a,truncated:!0,totalItems:s,shownItems:100,currentPage:c,totalPages:l,truncationNotice:d}}}if(sc(t)&&Array.isArray(t.results)){let o=t.results.length;if(o>100){let r=t.results.slice(0,100),s=Math.ceil(o/100),a=1,l=`

=== SEARCH RESULTS TRUNCATED ===
Showing ${100} of ${o} results (Page ${a} of ${s}).

For more results, consider:
- Refining your search terms
- Using pagination parameters if available
- Adding filters to narrow the search

Current results show first ${100} matches only.`;return console.debug(`Search results truncated: ${e}, ${100}/${o} results, page ${a}/${s}`),{...t,results:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s,truncationNotice:l}}}if(typeof t=="string"&&t.length>5e4){let o=t.substring(0,5e4),r=`

=== CONTENT TRUNCATED ===
Showing first 50,000 characters of ${t.length} total characters.

For large files, consider:
- Reading specific sections with line numbers
- Searching for specific content within the file
- Using more targeted read operations

Current content shows first 50,000 characters only.`;return console.debug(`Content truncated: ${e}, 50000/${t.length} chars`),o+r}return t}async function ac(e,t={maxRetries:2,delay:1e3}){let n;for(let i=0;i<=t.maxRetries;i++)try{return await e()}catch(o){if(n=o instanceof Error?o:new Error(String(o)),i===t.maxRetries)throw new Error("could not recover!");t.onRetry&&t.onRetry(i+1,n),await new Promise(r=>setTimeout(r,t.delay))}throw n}var Mr=class{constructor(t=2){this.maxRetries=t;this.attempts=0}get retryCount(){return this.attempts}get canRetry(){return this.attempts<this.maxRetries}increment(){this.attempts++}reset(){this.attempts=0}get shouldBail(){return this.attempts>=this.maxRetries}};var ii=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},yh=e=>typeof e=="object"&&e!==null,ZA=e=>{if(e instanceof Error)return e.stack},lc=class{constructor(t){this.callbacks=t;this.session=null;this.sessionPromise=null;this.inputAudioContext=null;this.outputAudioContext=null;this.nextStartTime=0;this.sources=new Set;this.inputWorkletNode=null;this.inputWorkletGain=null;this.inputStream=null;this.currentInputText="";this.currentOutputText="";this.currentFolder="/";this.currentNote=null;this.retryCounter=new Mr(2);this.storedApiKey="";this.storedSettings=null;this.hasArchived=!1;this.pendingContextInjection=null;this.isSessionReady=!1}async getSession(){if(this.session)return this.session;if(this.sessionPromise===null)throw new Error("Session not initialized");return this.session=await this.sessionPromise,this.session}async start(t,n,i,o){this.storedApiKey=t,this.storedSettings=n,this.storedInitialState=i,this.storedConversationHistory=o,this.retryCounter.reset(),await ac(async()=>{this.retryCounter.increment(),await this.performStart(t,n,i,o)},{maxRetries:2,delay:1e3,onRetry:(r,s)=>{this.callbacks.onLog(`Connection failed, retrying attempt ${r}/2...`,"info"),this.callbacks.onSystemMessage(`Connection failed, retrying attempt ${r}/2...`)}})}async performStart(t,n,i,o){try{i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onStatusChange("CONNECTING"),this.callbacks.onLog("Negotiating Uplink...","info");let r=new dn({apiKey:t}),s=window.AudioContext||window.webkitAudioContext;if(!s)throw new Error("AudioContext is not supported in this environment");this.inputAudioContext=new s({sampleRate:16e3}),this.outputAudioContext=new s({sampleRate:24e3}),this.nextStartTime=0;let a=await navigator.mediaDevices.getUserMedia({audio:!0});this.inputStream=a;let l=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`,c=o?`

PREVIOUS_CONVERSATION:
${o}
`:"",d=`${n.systemInstruction}
${l}${c}
${n.customContext}`.trim();console.debug(`System instruction: ${d.length} chars, folder: ${this.currentFolder}, note: ${this.currentNote}`),this.callbacks.onLog(`System instruction size: ${d.length} chars`,"info"),console.debug(`Session config: model=gemini-2.5-flash-native-audio-preview-12-2025, tools=${mo.length}, voice=${n.voiceName}`),this.callbacks.onLog("Initializing Gemini live connection...","info"),this.sessionPromise=r.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",config:{responseModalities:[Er.AUDIO],systemInstruction:d,inputAudioTranscription:{},outputAudioTranscription:{},speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:n.voiceName}}},tools:[{functionDeclarations:mo}]},callbacks:{onopen:()=>{this.isSessionReady=!0,this.callbacks.onStatusChange("CONNECTED"),this.callbacks.onLog("Uplink synchronized. Voice channel active.","info"),this.sessionPromise!==null&&this.startMicStreaming(a)},onmessage:p=>{this.handleServerMessage(p)},onerror:p=>{console.error("[VOICE API] Connection error:",p),console.error("[VOICE API] Error details:",JSON.stringify(p,null,2)),this.callbacks.onLog(`Connection error: ${V(p)}`,"error"),this.callbacks.onStatusChange("ERROR"),this.callbacks.onSystemMessage(`Connection error: ${V(p)}`)},onclose:p=>{let m=p.reason||String(p.code)||"Connection dropped";if(p.code!==1e3&&p.code!==1001){console.error(`[VOICE API] ERROR: Connection closed abnormally: code=${p.code}, reason=${m}`),console.error(`[VOICE API] Last input text was: "${this.currentInputText}"`),console.error(`[VOICE API] Last output text was: "${this.currentOutputText}"`);let g={toolName:"GeminiVoiceAssistant",apiCall:"live.connect",content:`Code: ${p.code}, Reason: ${m}
Last input: ${this.currentInputText}
Last output: ${this.currentOutputText}`};this.callbacks.onLog(`CONNECTION DROPPED: Code ${p.code} - ${m}`,"error",void 0,g),this.callbacks.onSystemMessage(`CONNECTION DROPPED: ${m}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:m})}else this.callbacks.onLog(`Uplink Closed: ${m}`,"info");this.stop()}}}),this.session=await this.sessionPromise}catch(r){this.callbacks.onStatusChange("ERROR"),console.error(`Voice interface error: ${V(r)}`);let s={toolName:"GeminiVoiceAssistant",apiCall:"start",stack:ZA(r),content:V(r),requestSize:r.requestSize,responseSize:r.responseSize,platform:{isMobileApp:kr.Platform.isMobileApp,isDesktopApp:kr.Platform.isDesktopApp,isMacOS:kr.Platform.isMacOS,isWin:kr.Platform.isWin,isLinux:kr.Platform.isLinux},audioContextState:this.inputAudioContext?.state,timestamp:new Date().toISOString()};throw this.callbacks.onLog(`Link Initialization Failed: ${V(r)}`,"error",void 0,s),this.callbacks.onSystemMessage(`Error: ${V(r)}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:V(r)}),r}}async startMicStreaming(t){if(!this.inputAudioContext)return;let n=await this.getSession(),i=this.inputAudioContext.createMediaStreamSource(t),o=`
      class HermesAudioProcessor extends AudioWorkletProcessor {
        process(inputs) {
          const input = inputs[0];
          if (input && input[0]) {
            this.port.postMessage(input[0]);
          }
          return true;
        }
      }
      registerProcessor('hermes-audio-processor', HermesAudioProcessor);
    `,r=new Blob([o],{type:"application/javascript"}),s=URL.createObjectURL(r);try{await this.inputAudioContext.audioWorklet.addModule(s)}finally{URL.revokeObjectURL(s)}let a=new AudioWorkletNode(this.inputAudioContext,"hermes-audio-processor");this.inputWorkletNode=a;let l=this.inputAudioContext.createGain();l.gain.value=0,this.inputWorkletGain=l,a.port.onmessage=c=>{let d=c.data;if(!d||d.length===0)return;let p=0;for(let x=0;x<d.length;x++)p+=d[x]*d[x];let m=Math.sqrt(p/d.length);this.callbacks.onVolume(m);let h=LA(d),g=DA(new Uint8Array(h.buffer)),S=g.length;S>5e4&&console.debug(`Audio streaming: ${S} bytes, session active`);try{n.sendRealtimeInput({media:{data:g,mimeType:"audio/pcm;rate=16000"}})}catch(x){if(console.error(`Audio streaming error: ${V(x)}, data size: ${g.length}`),V(x).includes("CLOSING")||V(x).includes("CLOSED")){console.debug("Session is closing, stopping audio streaming");return}}},i.connect(a),a.connect(l),l.connect(this.inputAudioContext.destination)}async handleServerMessage(t){t.setupComplete&&this.callbacks.onLog("Voice session ready","info");let n=t.serverContent;if(n?.usageMetadata&&this.callbacks.onUsageUpdate(n.usageMetadata),t.serverContent?.inputTranscription?.text&&(this.currentInputText+=t.serverContent.inputTranscription.text,this.callbacks.onTranscription("user",this.currentInputText,!1)),t.serverContent?.outputTranscription&&(this.currentOutputText+=t.serverContent.outputTranscription.text,this.callbacks.onTranscription("model",this.currentOutputText,!1)),t.serverContent?.turnComplete&&(this.currentInputText&&(this.callbacks.onTranscription("user",this.currentInputText,!0),this.currentInputText=""),this.currentOutputText&&(this.callbacks.onTranscription("model",this.currentOutputText,!0),this.currentOutputText="")),t.toolCall)for(let o of t.toolCall.functionCalls){if(o.name==="end_conversation"){console.debug("Processing end_conversation tool call");try{await ho(o.name,o.args,{onLog:(p,m,h)=>this.callbacks.onLog(p,m,h),onSystem:(p,m)=>this.callbacks.onSystemMessage(p,m),onFileState:(p,m)=>{this.currentFolder=p,this.currentNote=Array.isArray(m)?m[m.length-1]:m,this.callbacks.onFileStateChange(p,m)},onStopSession:()=>{this.stop()},onArchiveConversation:this.callbacks.onArchiveConversation},void 0,this.currentFolder),console.debug("end_conversation executed successfully, session ending");continue}catch(p){console.error(`end_conversation failed: ${V(p)}`),this.stop();continue}}let r=`tool-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,s=yh(o.args)?o.args:{},l={generate_image_from_context:"Image Generation",create_file:"File Creation",delete_file:"File Deletion",edit_file:"File Editing",update_file:"File Update",move_file:"File Move",rename_file:"File Rename",create_directory:"Directory Creation",list_directory:"Vault Scan",list_vault_files:"File Explorer",dirlist:"Directory Structure",get_folder_tree:"Folder Tree",read_file:"File Reading",search_keyword:"Keyword Search",search_regexp:"Pattern Search",search_replace_file:"File Search & Replace",search_replace_global:"Global Search & Replace",internet_search:"Web Search",reveal_active_pane:"Active Pane Info",open_folder_in_system:"System File Browser",end_conversation:"Session End",topic_switch:"Topic Switch"}[o.name]||o.name.replace(/_/g," ").toUpperCase(),c=!1,d=ii(s,"filename")||(o.name==="internet_search"?"Web":"Registry");this.callbacks.onSystemMessage(`${l}...`,{id:r,name:o.name,filename:d,status:"pending"});try{let p=await ho(o.name,s,{onLog:(S,x,y)=>this.callbacks.onLog(S,x,y),onSystem:(S,x)=>{this.callbacks.onSystemMessage(S,x),x?.status==="success"&&(c=!0)},onFileState:(S,x)=>{this.currentFolder=S,this.currentNote=Array.isArray(x)?x[x.length-1]:x,this.callbacks.onFileStateChange(S,x)},onStopSession:()=>{this.stop()},onArchiveConversation:this.callbacks.onArchiveConversation},r,this.currentFolder);await this.getSession();let m=JSON.stringify({result:p});console.debug(`Tool response: ${o.name}, size: ${m.length} chars`);let h=yh(p)?p:void 0,g=h&&typeof h.text=="string"?h.text:void 0;if(!c){let S="";if(o.name==="create_file"||o.name==="create_directory"){let x=ii(s,"filename")||ii(s,"path");if(x){let y=x.lastIndexOf("/");S=`Created in: ${y===-1?"/":x.substring(0,y+1)}`}}else if(o.name==="move_file"||o.name==="rename_file"){let x=ii(s,"sourcePath")||ii(s,"oldPath"),y=ii(s,"targetPath")||ii(s,"newPath");x&&y&&(S=`Moved from: ${x} to: ${y}`)}else if(o.name==="update_file"||o.name==="edit_file"){let x=ii(s,"filename");x&&(S=`Updated: ${x}`)}else if(o.name==="delete_file"){let x=ii(s,"filename");x&&(S=`Deleted: ${x}`)}else g?S=g:typeof p=="string"&&(S=p);if(S){let x=Array.isArray(h?.groundingChunks)?h?.groundingChunks:[],y=Array.isArray(h?.files)?h?.files.filter(C=>typeof C=="string"):void 0,v=Array.isArray(h?.directories)?h?.directories.map(C=>yh(C)&&typeof C.path=="string"?C.path:null).filter(C=>Boolean(C)):void 0,T=Array.isArray(h?.folders)?h?.folders.filter(C=>typeof C=="string"):void 0,A=Array.isArray(h?.directoryInfo)?h?.directoryInfo:void 0;this.callbacks.onSystemMessage(`${l} Complete`,{id:r,name:o.name,filename:d,status:"success",newContent:S,groundingChunks:x,files:y||v||T,directoryInfo:A})}}try{(await this.getSession()).sendToolResponse({functionResponses:{id:o.id,name:o.name,response:{result:p}}})}catch(S){console.error(`Failed to send tool response: ${V(S)}`)}}catch(p){let m=V(p);console.error(`Voice interface tool error: ${o.name} - ${m}`);let h={toolName:o.name,content:JSON.stringify(s,null,2),contentSize:JSON.stringify(s).length,stack:ZA(p),apiCall:"executeCommand",timestamp:new Date().toISOString(),currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${o.name}: ${m}`,"error",void 0,h),this.callbacks.onSystemMessage(`Error in ${o.name}: ${m}`,{id:r,name:o.name,filename:d,status:"error",error:m});try{let g=await this.getSession();console.debug(`Tool error response: ${o.name} - ${m}`),g.sendToolResponse({functionResponses:{id:o.id,name:o.name,response:{error:m}}})}catch(g){console.error(`Failed to send tool error response: ${V(g)}`)}}}let i=t.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;if(i&&this.outputAudioContext){let o=UA(kA(i),this.outputAudioContext,24e3,1);this.nextStartTime=Math.max(this.nextStartTime,this.outputAudioContext.currentTime);let r=this.outputAudioContext.createBufferSource();r.buffer=o,r.connect(this.outputAudioContext.destination),r.onended=()=>this.sources.delete(r),r.start(this.nextStartTime),this.nextStartTime+=o.duration,this.sources.add(r)}t.serverContent?.interrupted&&(this.sources.forEach(o=>{try{o.stop()}catch(r){console.debug("Audio source stop failed",r)}}),this.sources.clear(),this.nextStartTime=0,this.callbacks.onInterrupted())}stop(){if(this.callbacks.onArchiveConversation&&!this.hasArchived&&(this.hasArchived=!0,console.warn("[HISTORY] EVENT: end_conversation (voiceInterface.stop)"),this.callbacks.onArchiveConversation().catch(t=>{console.warn("[HISTORY] Archive failed:",t)})),this.session){try{this.session.close()}catch(t){console.debug("Session close failed",t)}this.session=null}this.sessionPromise=null,this.inputWorkletNode&&(this.inputWorkletNode.disconnect(),this.inputWorkletNode=null),this.inputWorkletGain&&(this.inputWorkletGain.disconnect(),this.inputWorkletGain=null),this.inputStream&&(this.inputStream.getTracks().forEach(t=>t.stop()),this.inputStream=null),this.inputAudioContext&&(this.inputAudioContext.close(),this.inputAudioContext=null),this.outputAudioContext&&(this.outputAudioContext.close(),this.outputAudioContext=null),this.sources.forEach(t=>{try{t.stop()}catch(n){console.debug("Output source stop failed",n)}}),this.sources.clear(),this.currentInputText="",this.currentOutputText="",this.isSessionReady=!1,this.pendingContextInjection=null,this.callbacks.onStatusChange("DISCONNECTED"),this.callbacks.onVolume(0)}};var ia=class{constructor(t){this.callbacks=t;this.ai=null;this.chatHistory=[];this.currentFolder="/";this.currentNote=null;this.systemInstruction="";this.model="gemini-2.0-flash";this.retryCounter=new Mr(2)}initialize(t,n,i){i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onLog("Initializing text interface...","info"),this.ai=new dn({apiKey:t});let o=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`;this.systemInstruction=`${n.systemInstruction}
${o}

${n.customContext}`.trim(),this.callbacks.onLog("Text interface ready.","info")}async sendMessage(t){if(!this.ai){this.callbacks.onLog("Text interface not initialized","error");return}this.chatHistory.push({role:"user",parts:[{text:t}]}),this.callbacks.onTranscription("user",t,!0),await ac(async()=>{this.retryCounter.increment(),await this.processConversation()},{maxRetries:2,delay:1e3,onRetry:(n,i)=>{this.callbacks.onLog(`Text API failed, retrying attempt ${n}/2...`,"info"),this.callbacks.onSystemMessage(`Text API failed, retrying attempt ${n}/2...`)}})}async processConversation(){if(!this.ai)return;this.callbacks.onTranscription("model","...",!1);let t=await this.ai.models.generateContent({model:this.model,contents:this.chatHistory,config:{systemInstruction:this.systemInstruction,tools:[{functionDeclarations:mo}]}});t.usageMetadata&&this.callbacks.onUsageUpdate({promptTokenCount:t.usageMetadata.promptTokenCount,candidatesTokenCount:t.usageMetadata.candidatesTokenCount,totalTokenCount:t.usageMetadata.totalTokenCount});let n=t.candidates?.[0];if(!n?.content){this.callbacks.onTranscription("model","No response received.",!0);return}let i=n.content.parts?.filter(o=>!!o.functionCall);if(i&&i.length>0){this.chatHistory.push(n.content);let o=[];for(let r of i){let s=r.functionCall;try{let a=await ho(s.name,s.args,{onLog:(l,c,d)=>this.callbacks.onLog(l,c,d),onSystem:(l,c)=>this.callbacks.onSystemMessage(l,c),onFileState:(l,c)=>{this.currentFolder=l,this.currentNote=Array.isArray(c)?c[c.length-1]:c,this.callbacks.onFileStateChange(l,c)},onStopSession:()=>{this.callbacks.onLog("Conversation ended via tool call","info")},onArchiveConversation:this.callbacks.onArchiveConversation},this.currentFolder);o.push({functionResponse:{name:s.name,response:{result:a}}})}catch(a){let l=a instanceof Error?a.message:String(a),c=a instanceof Error?a.stack:void 0;console.error(`Text interface tool error: ${s.name} - ${l}`);let d={toolName:s.name,content:JSON.stringify(s.args,null,2),contentSize:JSON.stringify(s.args).length,stack:c,apiCall:"executeCommand",timestamp:new Date().toISOString(),model:this.model,currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${s.name}: ${l}`,"error",void 0,d),this.callbacks.onSystemMessage(`Error in ${s.name}: ${l}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:l}),o.push({functionResponse:{name:s.name,response:{error:l}}})}}this.chatHistory.push({role:"user",parts:o}),await this.processConversation()}else{let r=n.content.parts?.filter(s=>s.text)?.map(s=>s.text).join("")||"";this.chatHistory.push(n.content),this.callbacks.onTranscription("model",r,!0)}}setApiKey(t){this.ai=new dn({apiKey:t})}clearHistory(){this.chatHistory=[]}getHistory(){return this.chatHistory}injectHistory(t){this.chatHistory.push(...t)}async generateSummary(t){if(!this.ai)throw new Error("Text interface not initialized");try{return(await this.ai.models.generateContent({model:this.model,contents:[{role:"user",parts:[{text:t}]}]})).candidates?.[0]?.content?.parts?.filter(r=>r.text)?.map(r=>r.text).join("")||""}catch(n){console.error("Text interface error:",n);let i=n instanceof Error?n.message:String(n);throw new Error(`Failed to generate summary: ${i}`)}}};var oU=[Um,Pm,Fm,Om,Hm,Gm,qm,Vm,zm,$m,Ym,Jm,Km,Qm,Zm,eh,lh,th,gh].join(`

`),oi=`You are an advanced voice assistant (Hermes) with file system access and internet capabilities.
Vault structure: Flat markdown files.

CORE RESPONSE RULES:
1. NO CONFIRMATIONS: Do NOT say "Done.", "Finished.", or any variation of completion confirmation after a tool call. The UI handles state visualization.
2. INFORMATIONAL TOOLS: When calling "read_file", "list_directory", "list_vault_files", or "internet_search", remain silent unless the user asked a specific question about the content.
3. BATCH ACTIONS: If performing multiple modifications, wait until all are finished, then provide a single concise summary.
4. NO "DONE" ON TOPICS: Do not say "Done" or confirm when switching topics. Just proceed with the new context.
5. Conciseness is mandatory. Avoid conversational filler.
6. LARGE VAULTS: If the vault seems large, prefer "list_vault_files" with a limit or filter over "list_directory" to stay within token limits.
7. WEB SEARCH RESTRICTION: Only use "internet_search" if the user specifically asks about it or explicitly requests web search.
8. FILE NAMING: Do not ever read out .md at the end of files. Omit full path, just read out the file names, unless it's relevant!

IMPORTANT PATH CONVENTION:
ALL FILE PATHS MUST BE RELATIVE TO VAULT ROOT. Examples:
- "notes.md" (root level file)
- "projects/ideas.md" (file in projects folder)
- "archive/2024/report.md" (nested folder structure)

WIKI LINK CONVENTION:
DEFAULT TO WIKI LINKS EVERYWHERE WITHOUT PATH. 
Insert images using a Wikilink with only the filename.
- Use [[notes]] instead of [notes.md](notes.md)
- Never use "file:" prefix or full file extensions in wiki links
- use ![[image.png|title]] for images!

AVAILABLE TOOL CAPABILITIES:
${oU}`;_e();function mE(e){return typeof e>"u"||e===null}function rU(e){return typeof e=="object"&&e!==null}function sU(e){return Array.isArray(e)?e:mE(e)?[]:[e]}function aU(e,t){var n,i,o,r;if(t)for(r=Object.keys(t),n=0,i=r.length;n<i;n+=1)o=r[n],e[o]=t[o];return e}function lU(e,t){var n="",i;for(i=0;i<t;i+=1)n+=e;return n}function uU(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var cU=mE,fU=rU,dU=sU,pU=lU,mU=uU,hU=aU,Ye={isNothing:cU,isObject:fU,toArray:dU,repeat:pU,isNegativeZero:mU,extend:hU};function hE(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function ra(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=hE(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ra.prototype=Object.create(Error.prototype);ra.prototype.constructor=ra;ra.prototype.toString=function(t){return this.name+": "+hE(this,t)};var _t=ra;function vh(e,t,n,i,o){var r="",s="",a=Math.floor(o/2)-1;return i-t>a&&(r=" ... ",t=i-a+r.length),n-i>a&&(s=" ...",n=i+a-s.length),{str:r+e.slice(t,n).replace(/\t/g,"\u2192")+s,pos:i-t+r.length}}function Sh(e,t){return Ye.repeat(" ",t-e.length)+e}function gU(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],o=[],r,s=-1;r=n.exec(e.buffer);)o.push(r.index),i.push(r.index+r[0].length),e.position<=r.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var a="",l,c,d=Math.min(e.line+t.linesAfter,o.length).toString().length,p=t.maxLength-(t.indent+d+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)c=vh(e.buffer,i[s-l],o[s-l],e.position-(i[s]-i[s-l]),p),a=Ye.repeat(" ",t.indent)+Sh((e.line-l+1).toString(),d)+" | "+c.str+`
`+a;for(c=vh(e.buffer,i[s],o[s],e.position,p),a+=Ye.repeat(" ",t.indent)+Sh((e.line+1).toString(),d)+" | "+c.str+`
`,a+=Ye.repeat("-",t.indent+d+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=o.length);l++)c=vh(e.buffer,i[s+l],o[s+l],e.position-(i[s]-i[s+l]),p),a+=Ye.repeat(" ",t.indent)+Sh((e.line+l+1).toString(),d)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var yU=gU,vU=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],SU=["scalar","sequence","mapping"];function TU(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){t[String(i)]=n})}),t}function xU(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(vU.indexOf(n)===-1)throw new _t('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=TU(t.styleAliases||null),SU.indexOf(this.kind)===-1)throw new _t('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var ut=xU;function jA(e,t){var n=[];return e[t].forEach(function(i){var o=n.length;n.forEach(function(r,s){r.tag===i.tag&&r.kind===i.kind&&r.multi===i.multi&&(o=s)}),n[o]=i}),n}function AU(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function i(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(i);return e}function xh(e){return this.extend(e)}xh.prototype.extend=function(t){var n=[],i=[];if(t instanceof ut)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new _t("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(r){if(!(r instanceof ut))throw new _t("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(r.loadKind&&r.loadKind!=="scalar")throw new _t("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(r.multi)throw new _t("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(r){if(!(r instanceof ut))throw new _t("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(xh.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(i),o.compiledImplicit=jA(o,"implicit"),o.compiledExplicit=jA(o,"explicit"),o.compiledTypeMap=AU(o.compiledImplicit,o.compiledExplicit),o};var EU=xh,CU=new ut("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),_U=new ut("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),wU=new ut("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),bU=new EU({explicit:[CU,_U,wU]});function NU(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function RU(){return null}function IU(e){return e===null}var MU=new ut("tag:yaml.org,2002:null",{kind:"scalar",resolve:NU,construct:RU,predicate:IU,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function kU(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function DU(e){return e==="true"||e==="True"||e==="TRUE"}function UU(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var LU=new ut("tag:yaml.org,2002:bool",{kind:"scalar",resolve:kU,construct:DU,predicate:UU,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function PU(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function FU(e){return 48<=e&&e<=55}function OU(e){return 48<=e&&e<=57}function HU(e){if(e===null)return!1;var t=e.length,n=0,i=!1,o;if(!t)return!1;if(o=e[n],(o==="-"||o==="+")&&(o=e[++n]),o==="0"){if(n+1===t)return!0;if(o=e[++n],o==="b"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;i=!0}return i&&o!=="_"}if(o==="x"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!PU(e.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}if(o==="o"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!FU(e.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}}if(o==="_")return!1;for(;n<t;n++)if(o=e[n],o!=="_"){if(!OU(e.charCodeAt(n)))return!1;i=!0}return!(!i||o==="_")}function GU(e){var t=e,n=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function qU(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Ye.isNegativeZero(e)}var BU=new ut("tag:yaml.org,2002:int",{kind:"scalar",resolve:HU,construct:GU,predicate:qU,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),VU=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function zU(e){return!(e===null||!VU.test(e)||e[e.length-1]==="_")}function $U(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var YU=/^[-+]?[0-9]+e/;function JU(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ye.isNegativeZero(e))return"-0.0";return n=e.toString(10),YU.test(n)?n.replace("e",".e"):n}function KU(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Ye.isNegativeZero(e))}var XU=new ut("tag:yaml.org,2002:float",{kind:"scalar",resolve:zU,construct:$U,predicate:KU,represent:JU,defaultStyle:"lowercase"}),QU=bU.extend({implicit:[MU,LU,BU,XU]}),ZU=QU,gE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),yE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function WU(e){return e===null?!1:gE.exec(e)!==null||yE.exec(e)!==null}function jU(e){var t,n,i,o,r,s,a,l=0,c=null,d,p,m;if(t=gE.exec(e),t===null&&(t=yE.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,i,o));if(r=+t[4],s=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(d=+t[10],p=+(t[11]||0),c=(d*60+p)*6e4,t[9]==="-"&&(c=-c)),m=new Date(Date.UTC(n,i,o,r,s,a,l)),c&&m.setTime(m.getTime()-c),m}function eL(e){return e.toISOString()}var tL=new ut("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:WU,construct:jU,instanceOf:Date,represent:eL});function nL(e){return e==="<<"||e===null}var iL=new ut("tag:yaml.org,2002:merge",{kind:"scalar",resolve:nL}),wh=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function oL(e){if(e===null)return!1;var t,n,i=0,o=e.length,r=wh;for(n=0;n<o;n++)if(t=r.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function rL(e){var t,n,i=e.replace(/[\r\n=]/g,""),o=i.length,r=wh,s=0,a=[];for(t=0;t<o;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|r.indexOf(i.charAt(t));return n=o%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function sL(e){var t="",n=0,i,o,r=e.length,s=wh;for(i=0;i<r;i++)i%3===0&&i&&(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]),n=(n<<8)+e[i];return o=r%3,o===0?(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]):o===2?(t+=s[n>>10&63],t+=s[n>>4&63],t+=s[n<<2&63],t+=s[64]):o===1&&(t+=s[n>>2&63],t+=s[n<<4&63],t+=s[64],t+=s[64]),t}function aL(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var lL=new ut("tag:yaml.org,2002:binary",{kind:"scalar",resolve:oL,construct:rL,predicate:aL,represent:sL}),uL=Object.prototype.hasOwnProperty,cL=Object.prototype.toString;function fL(e){if(e===null)return!0;var t=[],n,i,o,r,s,a=e;for(n=0,i=a.length;n<i;n+=1){if(o=a[n],s=!1,cL.call(o)!=="[object Object]")return!1;for(r in o)if(uL.call(o,r))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(r)===-1)t.push(r);else return!1}return!0}function dL(e){return e!==null?e:[]}var pL=new ut("tag:yaml.org,2002:omap",{kind:"sequence",resolve:fL,construct:dL}),mL=Object.prototype.toString;function hL(e){if(e===null)return!0;var t,n,i,o,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(i=s[t],mL.call(i)!=="[object Object]"||(o=Object.keys(i),o.length!==1))return!1;r[t]=[o[0],i[o[0]]]}return!0}function gL(e){if(e===null)return[];var t,n,i,o,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1)i=s[t],o=Object.keys(i),r[t]=[o[0],i[o[0]]];return r}var yL=new ut("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:hL,construct:gL}),vL=Object.prototype.hasOwnProperty;function SL(e){if(e===null)return!0;var t,n=e;for(t in n)if(vL.call(n,t)&&n[t]!==null)return!1;return!0}function TL(e){return e!==null?e:{}}var xL=new ut("tag:yaml.org,2002:set",{kind:"mapping",resolve:SL,construct:TL}),vE=ZU.extend({implicit:[tL,iL],explicit:[lL,pL,yL,xL]}),Hi=Object.prototype.hasOwnProperty,uc=1,SE=2,TE=3,cc=4,Th=1,AL=2,eE=3,EL=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,CL=/[\x85\u2028\u2029]/,_L=/[,\[\]\{\}]/,xE=/^(?:!|!!|![a-z\-]+!)$/i,AE=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function tE(e){return Object.prototype.toString.call(e)}function Mn(e){return e===10||e===13}function yo(e){return e===9||e===32}function wt(e){return e===9||e===32||e===10||e===13}function Ur(e){return e===44||e===91||e===93||e===123||e===125}function wL(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function bL(e){return e===120?2:e===117?4:e===85?8:0}function NL(e){return 48<=e&&e<=57?e-48:-1}function nE(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function RL(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function EE(e,t,n){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}var CE=new Array(256),_E=new Array(256);for(go=0;go<256;go++)CE[go]=nE(go)?1:0,_E[go]=nE(go);var go;function IL(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||vE,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function wE(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=yU(n),new _t(t,n)}function F(e,t){throw wE(e,t)}function fc(e,t){e.onWarning&&e.onWarning.call(null,wE(e,t))}var iE={YAML:function(t,n,i){var o,r,s;t.version!==null&&F(t,"duplication of %YAML directive"),i.length!==1&&F(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),o===null&&F(t,"ill-formed argument of the YAML directive"),r=parseInt(o[1],10),s=parseInt(o[2],10),r!==1&&F(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&fc(t,"unsupported YAML version of the document")},TAG:function(t,n,i){var o,r;i.length!==2&&F(t,"TAG directive accepts exactly two arguments"),o=i[0],r=i[1],xE.test(o)||F(t,"ill-formed tag handle (first argument) of the TAG directive"),Hi.call(t.tagMap,o)&&F(t,'there is a previously declared suffix for "'+o+'" tag handle'),AE.test(r)||F(t,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch{F(t,"tag prefix is malformed: "+r)}t.tagMap[o]=r}};function Oi(e,t,n,i){var o,r,s,a;if(t<n){if(a=e.input.slice(t,n),i)for(o=0,r=a.length;o<r;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||F(e,"expected valid JSON character");else EL.test(a)&&F(e,"the stream contains non-printable characters");e.result+=a}}function oE(e,t,n,i){var o,r,s,a;for(Ye.isObject(n)||F(e,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),s=0,a=o.length;s<a;s+=1)r=o[s],Hi.call(t,r)||(EE(t,r,n[r]),i[r]=!0)}function Lr(e,t,n,i,o,r,s,a,l){var c,d;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),c=0,d=o.length;c<d;c+=1)Array.isArray(o[c])&&F(e,"nested arrays are not supported inside keys"),typeof o=="object"&&tE(o[c])==="[object Object]"&&(o[c]="[object Object]");if(typeof o=="object"&&tE(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(r))for(c=0,d=r.length;c<d;c+=1)oE(e,t,r[c],n);else oE(e,t,r,n);else!e.json&&!Hi.call(n,o)&&Hi.call(t,o)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,F(e,"duplicated mapping key")),EE(t,o,r),delete n[o];return t}function bh(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):F(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Ge(e,t,n){for(var i=0,o=e.input.charCodeAt(e.position);o!==0;){for(;yo(o);)o===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&o===35)do o=e.input.charCodeAt(++e.position);while(o!==10&&o!==13&&o!==0);if(Mn(o))for(bh(e),o=e.input.charCodeAt(e.position),i++,e.lineIndent=0;o===32;)e.lineIndent++,o=e.input.charCodeAt(++e.position);else break}return n!==-1&&i!==0&&e.lineIndent<n&&fc(e,"deficient indentation"),i}function mc(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||wt(n)))}function Nh(e,t){t===1?e.result+=" ":t>1&&(e.result+=Ye.repeat(`
`,t-1))}function ML(e,t,n){var i,o,r,s,a,l,c,d,p=e.kind,m=e.result,h;if(h=e.input.charCodeAt(e.position),wt(h)||Ur(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(o=e.input.charCodeAt(e.position+1),wt(o)||n&&Ur(o)))return!1;for(e.kind="scalar",e.result="",r=s=e.position,a=!1;h!==0;){if(h===58){if(o=e.input.charCodeAt(e.position+1),wt(o)||n&&Ur(o))break}else if(h===35){if(i=e.input.charCodeAt(e.position-1),wt(i))break}else{if(e.position===e.lineStart&&mc(e)||n&&Ur(h))break;if(Mn(h))if(l=e.line,c=e.lineStart,d=e.lineIndent,Ge(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=c,e.lineIndent=d;break}}a&&(Oi(e,r,s,!1),Nh(e,e.line-l),r=s=e.position,a=!1),yo(h)||(s=e.position+1),h=e.input.charCodeAt(++e.position)}return Oi(e,r,s,!1),e.result?!0:(e.kind=p,e.result=m,!1)}function kL(e,t){var n,i,o;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=o=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Oi(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)i=e.position,e.position++,o=e.position;else return!0;else Mn(n)?(Oi(e,i,o,!0),Nh(e,Ge(e,!1,t)),i=o=e.position):e.position===e.lineStart&&mc(e)?F(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);F(e,"unexpected end of the stream within a single quoted scalar")}function DL(e,t){var n,i,o,r,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Oi(e,n,e.position,!0),e.position++,!0;if(a===92){if(Oi(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),Mn(a))Ge(e,!1,t);else if(a<256&&CE[a])e.result+=_E[a],e.position++;else if((s=bL(a))>0){for(o=s,r=0;o>0;o--)a=e.input.charCodeAt(++e.position),(s=wL(a))>=0?r=(r<<4)+s:F(e,"expected hexadecimal character");e.result+=RL(r),e.position++}else F(e,"unknown escape sequence");n=i=e.position}else Mn(a)?(Oi(e,n,i,!0),Nh(e,Ge(e,!1,t)),n=i=e.position):e.position===e.lineStart&&mc(e)?F(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}F(e,"unexpected end of the stream within a double quoted scalar")}function UL(e,t){var n=!0,i,o,r,s=e.tag,a,l=e.anchor,c,d,p,m,h,g=Object.create(null),S,x,y,v;if(v=e.input.charCodeAt(e.position),v===91)d=93,h=!1,a=[];else if(v===123)d=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),v=e.input.charCodeAt(++e.position);v!==0;){if(Ge(e,!0,t),v=e.input.charCodeAt(e.position),v===d)return e.position++,e.tag=s,e.anchor=l,e.kind=h?"mapping":"sequence",e.result=a,!0;n?v===44&&F(e,"expected the node content, but found ','"):F(e,"missed comma between flow collection entries"),x=S=y=null,p=m=!1,v===63&&(c=e.input.charCodeAt(e.position+1),wt(c)&&(p=m=!0,e.position++,Ge(e,!0,t))),i=e.line,o=e.lineStart,r=e.position,Pr(e,t,uc,!1,!0),x=e.tag,S=e.result,Ge(e,!0,t),v=e.input.charCodeAt(e.position),(m||e.line===i)&&v===58&&(p=!0,v=e.input.charCodeAt(++e.position),Ge(e,!0,t),Pr(e,t,uc,!1,!0),y=e.result),h?Lr(e,a,g,x,S,y,i,o,r):p?a.push(Lr(e,null,g,x,S,y,i,o,r)):a.push(S),Ge(e,!0,t),v=e.input.charCodeAt(e.position),v===44?(n=!0,v=e.input.charCodeAt(++e.position)):n=!1}F(e,"unexpected end of the stream within a flow collection")}function LL(e,t){var n,i,o=Th,r=!1,s=!1,a=t,l=0,c=!1,d,p;if(p=e.input.charCodeAt(e.position),p===124)i=!1;else if(p===62)i=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)Th===o?o=p===43?eE:AL:F(e,"repeat of a chomping mode identifier");else if((d=NL(p))>=0)d===0?F(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?F(e,"repeat of an indentation width identifier"):(a=t+d-1,s=!0);else break;if(yo(p)){do p=e.input.charCodeAt(++e.position);while(yo(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!Mn(p)&&p!==0)}for(;p!==0;){for(bh(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Mn(p)){l++;continue}if(e.lineIndent<a){o===eE?e.result+=Ye.repeat(`
`,r?1+l:l):o===Th&&r&&(e.result+=`
`);break}for(i?yo(p)?(c=!0,e.result+=Ye.repeat(`
`,r?1+l:l)):c?(c=!1,e.result+=Ye.repeat(`
`,l+1)):l===0?r&&(e.result+=" "):e.result+=Ye.repeat(`
`,l):e.result+=Ye.repeat(`
`,r?1+l:l),r=!0,s=!0,l=0,n=e.position;!Mn(p)&&p!==0;)p=e.input.charCodeAt(++e.position);Oi(e,n,e.position,!1)}return!0}function rE(e,t){var n,i=e.tag,o=e.anchor,r=[],s,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!wt(s))));){if(a=!0,e.position++,Ge(e,!0,-1)&&e.lineIndent<=t){r.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,Pr(e,t,TE,!1,!0),r.push(e.result),Ge(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)F(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=i,e.anchor=o,e.kind="sequence",e.result=r,!0):!1}function PL(e,t,n){var i,o,r,s,a,l,c=e.tag,d=e.anchor,p={},m=Object.create(null),h=null,g=null,S=null,x=!1,y=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),v=e.input.charCodeAt(e.position);v!==0;){if(!x&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),r=e.line,(v===63||v===58)&&wt(i))v===63?(x&&(Lr(e,p,m,h,g,null,s,a,l),h=g=S=null),y=!0,x=!0,o=!0):x?(x=!1,o=!0):F(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=i;else{if(s=e.line,a=e.lineStart,l=e.position,!Pr(e,n,SE,!1,!0))break;if(e.line===r){for(v=e.input.charCodeAt(e.position);yo(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),wt(v)||F(e,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(Lr(e,p,m,h,g,null,s,a,l),h=g=S=null),y=!0,x=!1,o=!1,h=e.tag,g=e.result;else if(y)F(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=d,!0}else if(y)F(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=d,!0}if((e.line===r||e.lineIndent>t)&&(x&&(s=e.line,a=e.lineStart,l=e.position),Pr(e,t,cc,!0,o)&&(x?g=e.result:S=e.result),x||(Lr(e,p,m,h,g,S,s,a,l),h=g=S=null),Ge(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===r||e.lineIndent>t)&&v!==0)F(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return x&&Lr(e,p,m,h,g,null,s,a,l),y&&(e.tag=c,e.anchor=d,e.kind="mapping",e.result=p),y}function FL(e){var t,n=!1,i=!1,o,r,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&F(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(n=!0,s=e.input.charCodeAt(++e.position)):s===33?(i=!0,o="!!",s=e.input.charCodeAt(++e.position)):o="!",t=e.position,n){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(r=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):F(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!wt(s);)s===33&&(i?F(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),xE.test(o)||F(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),_L.test(r)&&F(e,"tag suffix cannot contain flow indicator characters")}r&&!AE.test(r)&&F(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{F(e,"tag name is malformed: "+r)}return n?e.tag=r:Hi.call(e.tagMap,o)?e.tag=e.tagMap[o]+r:o==="!"?e.tag="!"+r:o==="!!"?e.tag="tag:yaml.org,2002:"+r:F(e,'undeclared tag handle "'+o+'"'),!0}function OL(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&F(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!wt(n)&&!Ur(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&F(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function HL(e){var t,n,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!wt(i)&&!Ur(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&F(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Hi.call(e.anchorMap,n)||F(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Ge(e,!0,-1),!0}function Pr(e,t,n,i,o){var r,s,a,l=1,c=!1,d=!1,p,m,h,g,S,x;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,r=s=a=cc===n||TE===n,i&&Ge(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;FL(e)||OL(e);)Ge(e,!0,-1)?(c=!0,a=r,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||o),(l===1||cc===n)&&(uc===n||SE===n?S=t:S=t+1,x=e.position-e.lineStart,l===1?a&&(rE(e,x)||PL(e,x,S))||UL(e,S)?d=!0:(s&&LL(e,S)||kL(e,S)||DL(e,S)?d=!0:HL(e)?(d=!0,(e.tag!==null||e.anchor!==null)&&F(e,"alias node should not have any properties")):ML(e,S,uc===n)&&(d=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(d=a&&rE(e,x))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&F(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,m=e.implicitTypes.length;p<m;p+=1)if(g=e.implicitTypes[p],g.resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Hi.call(e.typeMap[e.kind||"fallback"],e.tag))g=e.typeMap[e.kind||"fallback"][e.tag];else for(g=null,h=e.typeMap.multi[e.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(e.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||F(e,"unknown tag !<"+e.tag+">"),e.result!==null&&g.kind!==e.kind&&F(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result,e.tag)?(e.result=g.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):F(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||d}function GL(e){var t=e.position,n,i,o,r=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Ge(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(r=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!wt(s);)s=e.input.charCodeAt(++e.position);for(i=e.input.slice(n,e.position),o=[],i.length<1&&F(e,"directive name must not be less than one character in length");s!==0;){for(;yo(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Mn(s));break}if(Mn(s))break;for(n=e.position;s!==0&&!wt(s);)s=e.input.charCodeAt(++e.position);o.push(e.input.slice(n,e.position))}s!==0&&bh(e),Hi.call(iE,i)?iE[i](e,i,o):fc(e,'unknown document directive "'+i+'"')}if(Ge(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ge(e,!0,-1)):r&&F(e,"directives end mark is expected"),Pr(e,e.lineIndent-1,cc,!1,!0),Ge(e,!0,-1),e.checkLineBreaks&&CL.test(e.input.slice(t,e.position))&&fc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&mc(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ge(e,!0,-1));return}if(e.position<e.length-1)F(e,"end of the stream or a document separator is expected");else return}function bE(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new IL(e,t),i=e.indexOf("\0");for(i!==-1&&(n.position=i,F(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)GL(n);return n.documents}function qL(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var i=bE(e,n);if(typeof t!="function")return i;for(var o=0,r=i.length;o<r;o+=1)t(i[o])}function BL(e,t){var n=bE(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new _t("expected a single document in the stream, but found more")}}var VL=qL,zL=BL,NE={loadAll:VL,load:zL},RE=Object.prototype.toString,IE=Object.prototype.hasOwnProperty,Rh=65279,$L=9,sa=10,YL=13,JL=32,KL=33,XL=34,Ah=35,QL=37,ZL=38,WL=39,jL=42,ME=44,eP=45,dc=58,tP=61,nP=62,iP=63,oP=64,kE=91,DE=93,rP=96,UE=123,sP=124,LE=125,ct={};ct[0]="\\0";ct[7]="\\a";ct[8]="\\b";ct[9]="\\t";ct[10]="\\n";ct[11]="\\v";ct[12]="\\f";ct[13]="\\r";ct[27]="\\e";ct[34]='\\"';ct[92]="\\\\";ct[133]="\\N";ct[160]="\\_";ct[8232]="\\L";ct[8233]="\\P";var aP=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],lP=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function uP(e,t){var n,i,o,r,s,a,l;if(t===null)return{};for(n={},i=Object.keys(t),o=0,r=i.length;o<r;o+=1)s=i[o],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&IE.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}function cP(e){var t,n,i;if(t=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else if(e<=4294967295)n="U",i=8;else throw new _t("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Ye.repeat("0",i-t.length)+t}var fP=1,aa=2;function dP(e){this.schema=e.schema||vE,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ye.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=uP(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?aa:fP,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function sE(e,t){for(var n=Ye.repeat(" ",t),i=0,o=-1,r="",s,a=e.length;i<a;)o=e.indexOf(`
`,i),o===-1?(s=e.slice(i),i=a):(s=e.slice(i,o+1),i=o+1),s.length&&s!==`
`&&(r+=n),r+=s;return r}function Eh(e,t){return`
`+Ye.repeat(" ",e.indent*t)}function pP(e,t){var n,i,o;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(o=e.implicitTypes[n],o.resolve(t))return!0;return!1}function pc(e){return e===JL||e===$L}function la(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Rh||65536<=e&&e<=1114111}function aE(e){return la(e)&&e!==Rh&&e!==YL&&e!==sa}function lE(e,t,n){var i=aE(e),o=i&&!pc(e);return(n?i:i&&e!==ME&&e!==kE&&e!==DE&&e!==UE&&e!==LE)&&e!==Ah&&!(t===dc&&!o)||aE(t)&&!pc(t)&&e===Ah||t===dc&&o}function mP(e){return la(e)&&e!==Rh&&!pc(e)&&e!==eP&&e!==iP&&e!==dc&&e!==ME&&e!==kE&&e!==DE&&e!==UE&&e!==LE&&e!==Ah&&e!==ZL&&e!==jL&&e!==KL&&e!==sP&&e!==tP&&e!==nP&&e!==WL&&e!==XL&&e!==QL&&e!==oP&&e!==rP}function hP(e){return!pc(e)&&e!==dc}function oa(e,t){var n=e.charCodeAt(t),i;return n>=55296&&n<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function PE(e){var t=/^\n* /;return t.test(e)}var FE=1,Ch=2,OE=3,HE=4,Dr=5;function gP(e,t,n,i,o,r,s,a){var l,c=0,d=null,p=!1,m=!1,h=i!==-1,g=-1,S=mP(oa(e,0))&&hP(oa(e,e.length-1));if(t||s)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=oa(e,l),!la(c))return Dr;S=S&&lE(c,d,a),d=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=oa(e,l),c===sa)p=!0,h&&(m=m||l-g-1>i&&e[g+1]!==" ",g=l);else if(!la(c))return Dr;S=S&&lE(c,d,a),d=c}m=m||h&&l-g-1>i&&e[g+1]!==" "}return!p&&!m?S&&!s&&!o(e)?FE:r===aa?Dr:Ch:n>9&&PE(e)?Dr:s?r===aa?Dr:Ch:m?HE:OE}function yP(e,t,n,i,o){e.dump=function(){if(t.length===0)return e.quotingType===aa?'""':"''";if(!e.noCompatMode&&(aP.indexOf(t)!==-1||lP.test(t)))return e.quotingType===aa?'"'+t+'"':"'"+t+"'";var r=e.indent*Math.max(1,n),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-r),a=i||e.flowLevel>-1&&n>=e.flowLevel;function l(c){return pP(e,c)}switch(gP(t,a,e.indent,s,l,e.quotingType,e.forceQuotes&&!i,o)){case FE:return t;case Ch:return"'"+t.replace(/'/g,"''")+"'";case OE:return"|"+uE(t,e.indent)+cE(sE(t,r));case HE:return">"+uE(t,e.indent)+cE(sE(vP(t,s),r));case Dr:return'"'+SP(t)+'"';default:throw new _t("impossible error: invalid scalar style")}}()}function uE(e,t){var n=PE(e)?String(t):"",i=e[e.length-1]===`
`,o=i&&(e[e.length-2]===`
`||e===`
`),r=o?"+":i?"":"-";return n+r+`
`}function cE(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function vP(e,t){for(var n=/(\n+)([^\n]*)/g,i=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,n.lastIndex=c,fE(e.slice(0,c),t)}(),o=e[0]===`
`||e[0]===" ",r,s;s=n.exec(e);){var a=s[1],l=s[2];r=l[0]===" ",i+=a+(!o&&!r&&l!==""?`
`:"")+fE(l,t),o=r}return i}function fE(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,i,o=0,r,s=0,a=0,l="";i=n.exec(e);)a=i.index,a-o>t&&(r=s>o?s:a,l+=`
`+e.slice(o,r),o=r+1),s=a;return l+=`
`,e.length-o>t&&s>o?l+=e.slice(o,s)+`
`+e.slice(s+1):l+=e.slice(o),l.slice(1)}function SP(e){for(var t="",n=0,i,o=0;o<e.length;n>=65536?o+=2:o++)n=oa(e,o),i=ct[n],!i&&la(n)?(t+=e[o],n>=65536&&(t+=e[o+1])):t+=i||cP(n);return t}function TP(e,t,n){var i="",o=e.tag,r,s,a;for(r=0,s=n.length;r<s;r+=1)a=n[r],e.replacer&&(a=e.replacer.call(n,String(r),a)),(ri(e,t,a,!1,!1)||typeof a>"u"&&ri(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=o,e.dump="["+i+"]"}function dE(e,t,n,i){var o="",r=e.tag,s,a,l;for(s=0,a=n.length;s<a;s+=1)l=n[s],e.replacer&&(l=e.replacer.call(n,String(s),l)),(ri(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&ri(e,t+1,null,!0,!0,!1,!0))&&((!i||o!=="")&&(o+=Eh(e,t)),e.dump&&sa===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=r,e.dump=o||"[]"}function xP(e,t,n){var i="",o=e.tag,r=Object.keys(n),s,a,l,c,d;for(s=0,a=r.length;s<a;s+=1)d="",i!==""&&(d+=", "),e.condenseFlow&&(d+='"'),l=r[s],c=n[l],e.replacer&&(c=e.replacer.call(n,l,c)),ri(e,t,l,!1,!1)&&(e.dump.length>1024&&(d+="? "),d+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ri(e,t,c,!1,!1)&&(d+=e.dump,i+=d));e.tag=o,e.dump="{"+i+"}"}function AP(e,t,n,i){var o="",r=e.tag,s=Object.keys(n),a,l,c,d,p,m;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new _t("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)m="",(!i||o!=="")&&(m+=Eh(e,t)),c=s[a],d=n[c],e.replacer&&(d=e.replacer.call(n,c,d)),ri(e,t+1,c,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&sa===e.dump.charCodeAt(0)?m+="?":m+="? "),m+=e.dump,p&&(m+=Eh(e,t)),ri(e,t+1,d,!0,p)&&(e.dump&&sa===e.dump.charCodeAt(0)?m+=":":m+=": ",m+=e.dump,o+=m));e.tag=r,e.dump=o||"{}"}function pE(e,t,n){var i,o,r,s,a,l;for(o=n?e.explicitTypes:e.implicitTypes,r=0,s=o.length;r<s;r+=1)if(a=o[r],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,RE.call(a.represent)==="[object Function]")i=a.represent(t,l);else if(IE.call(a.represent,l))i=a.represent[l](t,l);else throw new _t("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=i}return!0}return!1}function ri(e,t,n,i,o,r,s){e.tag=null,e.dump=n,pE(e,n,!1)||pE(e,n,!0);var a=RE.call(e.dump),l=i,c;i&&(i=e.flowLevel<0||e.flowLevel>t);var d=a==="[object Object]"||a==="[object Array]",p,m;if(d&&(p=e.duplicates.indexOf(n),m=p!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&t>0)&&(o=!1),m&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(d&&m&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),a==="[object Object]")i&&Object.keys(e.dump).length!==0?(AP(e,t,e.dump,o),m&&(e.dump="&ref_"+p+e.dump)):(xP(e,t,e.dump),m&&(e.dump="&ref_"+p+" "+e.dump));else if(a==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?dE(e,t-1,e.dump,o):dE(e,t,e.dump,o),m&&(e.dump="&ref_"+p+e.dump)):(TP(e,t,e.dump),m&&(e.dump="&ref_"+p+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&yP(e,e.dump,t,r,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new _t("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function EP(e,t){var n=[],i=[],o,r;for(_h(e,n,i),o=0,r=i.length;o<r;o+=1)t.duplicates.push(n[i[o]]);t.usedDuplicates=new Array(r)}function _h(e,t,n){var i,o,r;if(e!==null&&typeof e=="object")if(o=t.indexOf(e),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(t.push(e),Array.isArray(e))for(o=0,r=e.length;o<r;o+=1)_h(e[o],t,n);else for(i=Object.keys(e),o=0,r=i.length;o<r;o+=1)_h(e[i[o]],t,n)}function CP(e,t){t=t||{};var n=new dP(t);n.noRefs||EP(e,n);var i=e;return n.replacer&&(i=n.replacer.call({"":i},"",i)),ri(n,0,i,!0,!0)?n.dump+`
`:""}var _P=CP,wP={dump:_P};function Ih(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var bP=NE.load,o3=NE.loadAll,GE=wP.dump;var r3=Ih("safeLoad","load"),s3=Ih("safeLoadAll","loadAll"),a3=Ih("safeDump","dump");var Mh=(e,t)=>{try{return GE(e,{indent:2,lineWidth:-1,noRefs:!0,sortKeys:!1,...t})}catch(n){return console.error("YAML conversion error:",n),JSON.stringify(e,null,2)}};ke();mt();var BE=e=>{try{let t=We(),n=e||t?.chatHistoryFolder||"chat-history",i=In(),o=new Date().toISOString().split("T")[0],r=new RegExp(`^${n}/${o}-\\d{2}.*\\.md$`),s=i.filter(d=>r.test(d));if(s.length===0)return`${o}-01`;let a=s.map(d=>{let p=d.match(new RegExp(`^${n}/${o}-(\\d{2})`));return p?parseInt(p[1]):0}).filter(d=>d>0),c=Math.max(...a)+1;return`${o}-${c.toString().padStart(2,"0")}`}catch(t){return console.warn("Failed to get next archive index:",t),`${new Date().toISOString().split("T")[0]}-01`}},qE=e=>e.replace(/(?:file:\s*|)([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))/g,"[[$1]]").replace(/"([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))"/g,"[[$1]]").replace(/`([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))`/g,"[[$1]]"),VE=e=>{let t=[],n=[],i=null;return e.forEach(o=>{i===null||o.role!==i?(n.length>0&&t.push(n),n=[o],i=o.role):n.push(o)}),n.length>0&&t.push(n),t.map(o=>{let r=o[0],s="",a=o.map(l=>l.text).join(" ").trim();return r.role==="user"?s=qE(a):r.role==="model"?s=`> ${qE(a).split(`
`).join(`
> `)}`:r.role==="system"&&(s=o.map(c=>{if(c.toolData?.name==="rename_file")return`**RENAME** ~~${c.toolData.oldContent}~~ -> [[${c.toolData.newContent}]]`;if(c.toolData?.name==="topic_switch")return`## ${c.toolData.newContent}`;{let d=`\`\`\`system
${c.text}
\`\`\``;if(c.toolData){let p=`[[${c.toolData.filename}]]`;c.toolData.oldContent!==void 0&&c.toolData.newContent!==void 0&&c.toolData.oldContent!==c.toolData.newContent?c.toolData.oldContent&&c.toolData.oldContent.trim()!==""&&!c.toolData.newContent.includes(c.toolData.oldContent)?d+=`

${p}

--- Removed
\`\`\`markdown
${c.toolData.oldContent||"(empty)"}
\`\`\`

+++ Added
\`\`\`markdown
${c.toolData.newContent||"(empty)"}
\`\`\``:d+=`

${p}
\`\`\`markdown
${c.toolData.newContent}
\`\`\``:(c.toolData.name==="read_file"||c.toolData.name==="create_file")&&(d+=`

${p}
\`\`\`markdown
${c.toolData.newContent}
\`\`\``)}return d}}).join(`

`)),s}).filter(o=>o.trim()!=="").join(`

`)};mt();ke();var zE=e=>e.replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>2).slice(0,4).join(" ").substring(0,30).trim()||"Conversation",RP=e=>{try{let t=JSON.parse(e.replace(/```json\n?|```/g,"").trim());return{title:t.title?String(t.title).substring(0,30).trim():"Conversation",tags:Array.isArray(t.tags)?t.tags:[],suggestedFilename:t.suggestedFilename?String(t.suggestedFilename).substring(0,40):"",summary:t.summary?String(t.summary):"",shouldSave:t.shouldSave!==!1}}catch{console.error("Failed to parse AI response as JSON for metadata extraction");let t=e.replace(/^(title|subject|topic):?\s*/i,"").replace(/^["'`]|["'`]$/g,"").replace(/\.$/,"").trim().substring(0,30);if(t&&t.length>=2)return{title:t,tags:[],suggestedFilename:t.toLowerCase().replace(/\s+/g,"-"),summary:"",shouldSave:!0}}return null},IP=e=>{let t=["context","file_tree","read_file","open_file"];return e.filter(n=>!(n.id==="welcome-init"||n.role==="model"&&n.text.trim().toLowerCase().replace(/\./g,"")==="done"||n.toolData&&t.includes(n.toolData.name))).map(n=>n.toolData?{...n,toolData:void 0}:n)},kh=async e=>{let{transcripts:t,chatHistoryFolder:n,textInterface:i,topicId:o}=e,r=o||t[0]?.topicId||`topic-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;if((await vr()).some(N=>N.topicId===r))return console.warn(`[HISTORY] SKIP: Topic ${r} already archived`),{success:!0,message:`Topic already archived (${r})`,skipped:!0};let l=IP(t);console.warn(`[HISTORY] STEP 1 - FILTER: ${t.length} entries -> ${l.length} filtered`);let c=l.filter(N=>(N.role==="user"||N.role==="model")&&N.text?.trim().length>0),p=c.reduce((N,q)=>N+(q.text?.trim().length||0),0)>50&&c.length>=2;if(c.length===0||!p)return console.warn("[HISTORY] SKIP: No meaningful content to archive"),{success:!0,message:"No meaningful content to archive",skipped:!0,notEnoughContent:!0};let m=VE(l);console.warn(`[HISTORY] STEP 2 - MARKDOWN: length=${m.length}`);let h=l.filter(N=>N.role==="user"||N.role==="model").map(N=>`${N.role}: ${N.text}`).join(`
`),g={title:"Conversation",tags:[],suggestedFilename:"",summary:"",shouldSave:!0},S=l.find(N=>N.role==="user")?.text||"";if(S.trim()&&(g.title=zE(S),g.suggestedFilename=zE(S).toLowerCase().replace(/\s+/g,"-")),i&&h.trim()){let N=`Generate a JSON response with these fields:
- "title": A short, keyword-rich title (2-4 words, max 30 characters)
- "tags": Array of relevant tags for this conversation (e.g. ["file-management", "search"])
- "suggestedFilename": Primary keywords focusing on the TOPIC/CONTENT discussed, not file operations. Use lowercase, hyphen-separated (max 40 characters)
- "summary": A bulletpoint list summarizing the conversation
- "shouldSave": true/false - does this conversation have meaningful content worth saving?
  (false for: just greetings, "hi", "hello", "what were we doing", empty exchanges)

IMPORTANT: For filename generation, focus on WHAT WAS DISCUSSED or ACCOMPLISHED, not HOW it was done. 
Examples:
- GOOD: "react-component-refactor", "openai-api-integration-setup", "wedding-planning", "ai-doomsday-scenarios", "weekend-activities", "present-ideas", "pupl-fiction-movie-review"
- BAD: "create-file", "edit-code", "rename-component", "file-operations", "image-search", "file-management"

Conversation:
${h}

Respond ONLY with valid JSON, no markdown.`;console.warn("[HISTORY] STEP 3 - LLM: Requesting metadata...");try{let q=await i.generateSummary(N);console.warn(`[HISTORY] STEP 3 - LLM: Response received, length=${q.length}`);let Se=RP(q);Se&&(g=Se)}catch(q){console.warn("[HISTORY] STEP 3 - LLM FAILED:",V(q))}}else console.warn("[HISTORY] STEP 3 - LLM: Skipped (no text interface)");if(console.warn(`[HISTORY] STEP 4 - CHECK: shouldSave=${g.shouldSave}`),!g.shouldSave)return console.warn("[HISTORY] SKIP: Nothing to export (shouldSave=false)"),{success:!0,message:"Content not substantial enough to archive",skipped:!0,notEnoughContent:!0};let x=await BE(n),y=g.suggestedFilename.toLowerCase().replace(/[^a-z0-9-]/g,"-").substring(0,40)||"conversation",v=`${n}/${x}-${y}.md`;console.warn(`[HISTORY] STEP 5 - FILENAME: ${v}`);let T=l.map(N=>N.timestamp).filter(N=>N>0),A=new Date,C=T.length>0?new Date(T[0]).toISOString():A.toISOString(),I=T.length>0?new Date(T[T.length-1]).toISOString():A.toISOString(),_=T.length>1?Math.round((T[T.length-1]-T[0])/1e3):0,M={title:g.title.length>50?g.title.substring(0,47)+"...":g.title,topic_id:r,date:C,end_date:I,duration:_,tags:g.tags,format:"hermes-chat-archive",summary:g.summary},R=`---
${Mh(M)}---

`;console.warn("[HISTORY] STEP 6 - YAML: Built frontmatter");try{await eu(n);let N=R+m;await jl(v,N),console.warn("[HISTORY] STEP 7 - VAULT: Saved")}catch(N){let q=V(N);return console.error("[HISTORY] STEP 7 - VAULT SAVE FAILED:",q),{success:!1,message:"Failed to save to vault",error:q}}try{let N=`conv-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,q={key:N,topicId:r,title:g.title,tags:g.tags,summary:g.summary,suggestedFilename:g.suggestedFilename,archivedAt:Date.now(),conversation:l};return await ST(q),console.warn("[HISTORY] STEP 8 - PLUGIN: Saved to history array"),{success:!0,message:`Conversation archived to ${v}`,key:N,suggestedFilename:g.suggestedFilename,notEnoughContent:!1}}catch(N){let q=V(N);return console.error("[HISTORY] STEP 8 - JSON SAVE FAILED:",q),{success:!1,message:"Failed to save to plugin data",error:q}}};_e();var Fr=K(ne(),1),DP=({onOpenSettings:e,className:t="",isListening:n})=>(0,Fr.jsx)("button",{onClick:()=>{if(ln())try{let{app:o}=window;o&&o.setting&&(o.setting.open(),o.setting.openTabById("hermes-voice-assistant"))}catch(o){console.warn("Failed to open Obsidian settings:",o),e()}else e()},className:`p-2 transition-all hermes-hover:text-normal border-none ${t}`,style:{backgroundColor:n?"var(--hermes-button-text-listening)":void 0,color:n?"white":void 0},title:"System Settings",children:(0,Fr.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Fr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Fr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),KE=DP;var gc=K(ne(),1),UP=({onOpenHistory:e,isListening:t})=>(0,gc.jsx)("button",{onClick:e,className:"p-2 transition-all hermes-hover:text-normal border-none",style:{backgroundColor:t?"var(--hermes-button-text-listening)":void 0,color:t?"white":void 0},title:"View History",children:(0,gc.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,gc.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),XE=UP;var Je=K(ne(),1),LP=({status:e,showLogs:t,onToggleLogs:n,onOpenSettings:i,onOpenHistory:o,isListening:r,onStopSession:s,onResetConversation:a,transcripts:l})=>{let c=l&&l.length>1&&!l.every(d=>d.id==="welcome-init"||d.role==="system");return(0,Je.jsxs)("header",{className:`relative flex items-center justify-between px-6 py-2 hermes-border-b shrink-0 z-50 ${r?"hermes-header-bg-listening":"hermes-header-bg"}`,children:[(0,Je.jsx)("div",{className:"flex items-center space-x-6",children:(0,Je.jsx)("div",{className:"flex flex-col",children:(0,Je.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Je.jsx)("h1",{className:"text-lg font-semibold transition-all",style:{color:r?"var(--hermes-header-text-listening)":"var(--hermes-text-normal)"},children:"Hermes"}),c&&a&&(0,Je.jsx)("button",{onClick:a,className:"w-8 h-8 p-1 rounded transition-all hover:hermes-text-normal border-none",style:{backgroundColor:r?"var(--hermes-button-text-listening)":void 0,color:r?"white":void 0},title:"Reset conversation",children:"+"})]})})}),r&&(0,Je.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center",children:(0,Je.jsx)("button",{onClick:s,className:"w-[52px] h-[52px] flex items-center justify-center bg-green-600 text-white rounded-full transition-all hover:bg-green-700 active:scale-95 shadow-lg shadow-green-600/50",title:"Stop Listening",children:(0,Je.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Je.jsx)("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),(0,Je.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,Je.jsx)("path",{d:"M12 7v4"}),(0,Je.jsx)("line",{x1:"8",y1:"16",x2:"8",y2:"16"}),(0,Je.jsx)("line",{x1:"16",y1:"16",x2:"16",y2:"16"})]})})}),(0,Je.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Je.jsx)(XE,{onOpenHistory:o,isListening:r}),(0,Je.jsx)(KE,{onOpenSettings:i,isListening:r})]})]})},QE=LP;var J=K(ne(),1),PP=["Default","Professional","Friendly","Creative","Technical"],FP=({isOpen:e,onClose:t,voiceName:n,setVoiceName:i,customContext:o,setCustomContext:r,systemInstruction:s,setSystemInstruction:a,manualApiKey:l,setManualApiKey:c,serperApiKey:d,setSerperApiKey:p,onUpdateApiKey:m})=>e?(0,J.jsx)("div",{className:"fixed inset-0 z-[200] hermes-bg-tertiary/95 backdrop-blur-md flex items-center justify-center p-8 animate-in fade-in duration-300",children:(0,J.jsxs)("div",{className:"max-w-3xl w-full space-y-8 hermes-glass p-12 rounded-3xl shadow-2xl overflow-y-auto max-h-[90vh]",children:[(0,J.jsxs)("div",{className:"flex justify-between items-start hermes-border-b pb-8",children:[(0,J.jsxs)("div",{children:[(0,J.jsx)("h2",{className:"text-2xl font-semibold mb-2 hermes-text-normal",children:"Settings"}),(0,J.jsx)("p",{className:"hermes-text-muted text-sm",children:"Hermes Voice Assistant"})]}),(0,J.jsx)("button",{onClick:t,className:"p-4 hermes-hover:bg-secondary/5 rounded-full transition-colors group",children:(0,J.jsx)("svg",{className:"w-8 h-8 hermes-text-muted group-hover:hermes-text-normal transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,J.jsxs)("div",{className:"grid gap-8",children:[(0,J.jsxs)("div",{className:"space-y-4",children:[(0,J.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Voice Persona"}),(0,J.jsx)("div",{className:"grid grid-cols-5 gap-2",children:PP.map(h=>(0,J.jsx)("button",{onClick:()=>i(h),className:`px-4 py-2 rounded-lg border text-sm transition-all ${n===h?"hermes-interactive-bg border-interactive hermes-text-normal":"hermes-bg-secondary/5 hermes-border/10 hermes-text-muted hermes-hover:border/20"}`,children:h},h))})]}),(0,J.jsxs)("div",{className:"space-y-4",children:[(0,J.jsx)("div",{className:"flex items-center justify-between",children:(0,J.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"System Instructions"})}),(0,J.jsx)("textarea",{value:s,onChange:h=>a(h.target.value),placeholder:"Core logic instructions...",className:"w-full h-32 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,J.jsxs)("div",{className:"space-y-4",children:[(0,J.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Custom Context"}),(0,J.jsx)("textarea",{value:o,onChange:h=>r(h.target.value),placeholder:"Define specific behaviors or rules for Hermes...",className:"w-full h-20 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,J.jsxs)("div",{className:"space-y-4 pt-8 hermes-border-t",children:[(0,J.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"API Authentication"}),(0,J.jsxs)("div",{className:"space-y-4",children:[(0,J.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,J.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Manual API Key"}),(0,J.jsx)("input",{type:"password",value:l,onChange:h=>c(h.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"})]}),(0,J.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,J.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Serper API Key (for Image Search)"}),(0,J.jsx)("input",{type:"password",value:d,onChange:h=>p(h.target.value),placeholder:"Enter your Serper API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"}),(0,J.jsxs)("p",{className:"text-xs hermes-text-faint",children:["Get 2,500 free credits at ",(0,J.jsx)("a",{href:"https://serper.dev/",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline",children:"serper.dev"})]})]}),(0,J.jsxs)("div",{className:"relative py-2",children:[(0,J.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,J.jsx)("div",{className:"w-full hermes-border-t"})}),(0,J.jsx)("div",{className:"relative flex justify-center text-sm font-medium hermes-text-faint",children:(0,J.jsx)("span",{className:"hermes-bg-secondary px-2",children:"Or"})})]}),(0,J.jsxs)("button",{onClick:m,className:"w-full flex items-center justify-center space-x-4 px-8 py-4 hermes-interactive-bg hermes-text-normal rounded-lg font-medium hermes-hover:interactive-bg transition-all",children:[(0,J.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),(0,J.jsx)("span",{children:"Google AI Studio Auth"})]})]}),(0,J.jsxs)("p",{className:"text-sm hermes-text-muted mt-4",children:["API keys are handled via AI Studio provider or manual entry.",(0,J.jsx)("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline ml-1",children:"Documentation"})]})]})]})]})}):null,ZE=FP;var Gi=K(qt(),1);var kn=K(qt(),1);var To=K(qt(),1);function Ph(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var So=Ph();function oC(e){So=e}var da={exec:()=>null};function re(e,t=""){let n=typeof e=="string"?e:e.source,i={replace:(o,r)=>{let s=typeof r=="string"?r:r.source;return s=s.replace(gt.caret,"$1"),n=n.replace(o,s),i},getRegex:()=>new RegExp(n,t)};return i}var OP=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),gt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},HP=/^(?:[ \t]*(?:\n|$))+/,GP=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,qP=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,pa=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,BP=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Fh=/(?:[*+-]|\d{1,9}[.)])/,rC=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,sC=re(rC).replace(/bull/g,Fh).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),VP=re(rC).replace(/bull/g,Fh).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Oh=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,zP=/^[^\n]+/,Hh=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,$P=re(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Hh).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),YP=re(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Fh).getRegex(),Ac="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Gh=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,JP=re("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Gh).replace("tag",Ac).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),aC=re(Oh).replace("hr",pa).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ac).getRegex(),KP=re(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",aC).getRegex(),qh={blockquote:KP,code:GP,def:$P,fences:qP,heading:BP,hr:pa,html:JP,lheading:sC,list:YP,newline:HP,paragraph:aC,table:da,text:zP},WE=re("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",pa).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ac).getRegex(),XP={...qh,lheading:VP,table:WE,paragraph:re(Oh).replace("hr",pa).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",WE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ac).getRegex()},QP={...qh,html:re(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Gh).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:da,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:re(Oh).replace("hr",pa).replace("heading",` *#{1,6} *[^
]`).replace("lheading",sC).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ZP=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,WP=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,lC=/^( {2,}|\\)\n(?!\s*$)/,jP=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ec=/[\p{P}\p{S}]/u,Bh=/[\s\p{P}\p{S}]/u,uC=/[^\s\p{P}\p{S}]/u,eF=re(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Bh).getRegex(),cC=/(?!~)[\p{P}\p{S}]/u,tF=/(?!~)[\s\p{P}\p{S}]/u,nF=/(?:[^\s\p{P}\p{S}]|~)/u,iF=re(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",OP?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),fC=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,oF=re(fC,"u").replace(/punct/g,Ec).getRegex(),rF=re(fC,"u").replace(/punct/g,cC).getRegex(),dC="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",sF=re(dC,"gu").replace(/notPunctSpace/g,uC).replace(/punctSpace/g,Bh).replace(/punct/g,Ec).getRegex(),aF=re(dC,"gu").replace(/notPunctSpace/g,nF).replace(/punctSpace/g,tF).replace(/punct/g,cC).getRegex(),lF=re("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,uC).replace(/punctSpace/g,Bh).replace(/punct/g,Ec).getRegex(),uF=re(/\\(punct)/,"gu").replace(/punct/g,Ec).getRegex(),cF=re(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),fF=re(Gh).replace("(?:-->|$)","-->").getRegex(),dF=re("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",fF).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Sc=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,pF=re(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Sc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),pC=re(/^!?\[(label)\]\[(ref)\]/).replace("label",Sc).replace("ref",Hh).getRegex(),mC=re(/^!?\[(ref)\](?:\[\])?/).replace("ref",Hh).getRegex(),mF=re("reflink|nolink(?!\\()","g").replace("reflink",pC).replace("nolink",mC).getRegex(),jE=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Vh={_backpedal:da,anyPunctuation:uF,autolink:cF,blockSkip:iF,br:lC,code:WP,del:da,emStrongLDelim:oF,emStrongRDelimAst:sF,emStrongRDelimUnd:lF,escape:ZP,link:pF,nolink:mC,punctuation:eF,reflink:pC,reflinkSearch:mF,tag:dF,text:jP,url:da},hF={...Vh,link:re(/^!?\[(label)\]\((.*?)\)/).replace("label",Sc).getRegex(),reflink:re(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Sc).getRegex()},Dh={...Vh,emStrongRDelimAst:aF,emStrongLDelim:rF,url:re(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",jE).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:re(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",jE).getRegex()},gF={...Dh,br:re(lC).replace("{2,}","*").getRegex(),text:re(Dh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},yc={normal:qh,gfm:XP,pedantic:QP},ua={normal:Vh,gfm:Dh,breaks:gF,pedantic:hF},yF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},eC=e=>yF[e];function si(e,t){if(t){if(gt.escapeTest.test(e))return e.replace(gt.escapeReplace,eC)}else if(gt.escapeTestNoEncode.test(e))return e.replace(gt.escapeReplaceNoEncode,eC);return e}function tC(e){try{e=encodeURI(e).replace(gt.percentDecode,"%")}catch{return null}return e}function nC(e,t){let n=e.replace(gt.findPipe,(r,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=n.split(gt.splitPipe),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(gt.slashPipe,"|");return i}function ca(e,t,n){let i=e.length;if(i===0)return"";let o=0;for(;o<i;){let r=e.charAt(i-o-1);if(r===t&&!n)o++;else if(r!==t&&n)o++;else break}return e.slice(0,i-o)}function vF(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return n>0?-2:-1}function iC(e,t,n,i,o){let r=t.href,s=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:r,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}function SF(e,t,n){let i=e.match(n.other.indentCodeCompensation);if(i===null)return t;let o=i[1];return t.split(`
`).map(r=>{let s=r.match(n.other.beginningSpace);if(s===null)return r;let[a]=s;return a.length>=o.length?r.slice(o.length):r}).join(`
`)}var Tc=class{options;rules;lexer;constructor(e){this.options=e||So}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:ca(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],i=SF(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let i=ca(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:ca(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=ca(t[0],`
`).split(`
`),i="",o="",r=[];for(;n.length>0;){let s=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),s=!0;else if(!s)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`
`),d=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,o=o?`${o}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,r,!0),this.lexer.state.top=p,n.length===0)break;let m=r.at(-1);if(m?.type==="code")break;if(m?.type==="blockquote"){let h=m,g=h.raw+`
`+n.join(`
`),S=this.blockquote(g);r[r.length-1]=S,i=i.substring(0,i.length-h.raw.length)+S.raw,o=o.substring(0,o.length-h.text.length)+S.text;break}else if(m?.type==="list"){let h=m,g=h.raw+`
`+n.join(`
`),S=this.list(g);r[r.length-1]=S,i=i.substring(0,i.length-m.raw.length)+S.raw,o=o.substring(0,o.length-h.raw.length)+S.raw,n=g.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:r,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),i=n.length>1,o={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let r=this.rules.other.listItemRegex(n),s=!1;for(;e;){let l=!1,c="",d="";if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,S=>" ".repeat(3*S.length)),m=e.split(`
`,1)[0],h=!p.trim(),g=0;if(this.options.pedantic?(g=2,d=p.trimStart()):h?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=p.slice(g),g+=t[1].length),h&&this.rules.other.blankLine.test(m)&&(c+=m+`
`,e=e.substring(m.length+1),l=!0),!l){let S=this.rules.other.nextBulletRegex(g),x=this.rules.other.hrRegex(g),y=this.rules.other.fencesBeginRegex(g),v=this.rules.other.headingBeginRegex(g),T=this.rules.other.htmlBeginRegex(g);for(;e;){let A=e.split(`
`,1)[0],C;if(m=A,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),C=m):C=m.replace(this.rules.other.tabCharGlobal,"    "),y.test(m)||v.test(m)||T.test(m)||S.test(m)||x.test(m))break;if(C.search(this.rules.other.nonSpaceChar)>=g||!m.trim())d+=`
`+C.slice(g);else{if(h||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||y.test(p)||v.test(p)||x.test(p))break;d+=`
`+m}!h&&!m.trim()&&(h=!0),c+=A+`
`,e=e.substring(A.length+1),p=C.slice(g)}}o.loose||(s?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(s=!0)),o.items.push({type:"list_item",raw:c,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),o.raw+=c}let a=o.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let l of o.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let c=this.rules.other.listTaskCheckbox.exec(l.raw);if(c){let d={type:"checkbox",raw:c[0]+" ",checked:c[0]!=="[ ]"};l.checked=d.checked,o.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=d.raw+l.tokens[0].raw,l.tokens[0].text=d.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(d)):l.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):l.tokens.unshift(d)}}if(!o.loose){let c=l.tokens.filter(p=>p.type==="space"),d=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));o.loose=d}}if(o.loose)for(let l of o.items){l.loose=!0;for(let c of l.tokens)c.type==="text"&&(c.type="paragraph")}return o}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:o}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=nC(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let s of i)this.rules.other.tableAlignRight.test(s)?r.align.push("right"):this.rules.other.tableAlignCenter.test(s)?r.align.push("center"):this.rules.other.tableAlignLeft.test(s)?r.align.push("left"):r.align.push(null);for(let s=0;s<n.length;s++)r.header.push({text:n[s],tokens:this.lexer.inline(n[s]),header:!0,align:r.align[s]});for(let s of o)r.rows.push(nC(s,r.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:r.align[l]})));return r}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let r=ca(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{let r=vF(t[2],"()");if(r===-2)return;if(r>-1){let s=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(i);r&&(i=r[1],o=r[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),iC(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[i.toLowerCase()];if(!o){let r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return iC(n,o,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...i[0]].length-1,r,s,a=o,l=0,c=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(i=c.exec(t))!=null;){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(s=[...r].length,i[3]||i[4]){a+=s;continue}else if((i[5]||i[6])&&o%3&&!((o+s)%3)){l+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+l);let d=[...i[0]][0].length,p=e.slice(0,o+i.index+d+s);if(Math.min(o,s)%2){let h=p.slice(1,-1);return{type:"em",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}let m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=t[1],i="mailto:"+n):(n=t[1],i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,i;if(t[2]==="@")n=t[0],i="mailto:"+n;else{let o;do o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(o!==t[0]);n=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},mn=class Uh{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||So,this.options.tokenizer=this.options.tokenizer||new Tc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:gt,block:yc.normal,inline:ua.normal};this.options.pedantic?(n.block=yc.pedantic,n.inline=ua.pedantic):this.options.gfm&&(n.block=yc.gfm,this.options.breaks?n.inline=ua.breaks:n.inline=ua.gfm),this.tokenizer.rules=n}static get rules(){return{block:yc,inline:ua}}static lex(t,n){return new Uh(n).lex(t)}static lexInline(t,n){return new Uh(n).inlineTokens(t)}lex(t){t=t.replace(gt.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],i=!1){for(this.options.pedantic&&(t=t.replace(gt.tabCharGlobal,"    ").replace(gt.spaceLine,""));t;){let o;if(this.options.extensions?.block?.some(s=>(o=s.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let s=n.at(-1);o.raw.length===1&&s!==void 0?s.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let r=t;if(this.options.extensions?.startBlock){let s=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(r=t.substring(0,s+1))}if(this.state.top&&(o=this.tokenizer.paragraph(r))){let s=n.at(-1);i&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o),i=r.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let i=t,o=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)l.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,o.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let r;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)r=o[2]?o[2].length:0,i=i.slice(0,o.index+r)+"["+"a".repeat(o[0].length-r-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let s=!1,a="";for(;t;){s||(a=""),s=!1;let l;if(this.options.extensions?.inline?.some(d=>(l=d.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let d=n.at(-1);l.type==="text"&&d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,i,a)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let c=t;if(this.options.extensions?.startInline){let d=1/0,p=t.slice(1),m;this.options.extensions.startInline.forEach(h=>{m=h.call({lexer:this},p),typeof m=="number"&&m>=0&&(d=Math.min(d,m))}),d<1/0&&d>=0&&(c=t.substring(0,d+1))}if(l=this.tokenizer.inlineText(c)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),s=!0;let d=n.at(-1);d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(t){let d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}},xc=class{options;parser;constructor(e){this.options=e||So}space(e){return""}code({text:e,lang:t,escaped:n}){let i=(t||"").match(gt.notSpaceStart)?.[0],o=e.replace(gt.endingNewline,"")+`
`;return i?'<pre><code class="language-'+si(i)+'">'+(n?o:si(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:si(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,i="";for(let s=0;s<e.items.length;s++){let a=e.items[s];i+=this.listitem(a)}let o=t?"ol":"ul",r=t&&n!==1?' start="'+n+'"':"";return"<"+o+r+`>
`+i+"</"+o+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let o=0;o<e.header.length;o++)n+=this.tablecell(e.header[o]);t+=this.tablerow({text:n});let i="";for(let o=0;o<e.rows.length;o++){let r=e.rows[o];n="";for(let s=0;s<r.length;s++)n+=this.tablecell(r[s]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${si(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let i=this.parser.parseInline(n),o=tC(e);if(o===null)return i;e=o;let r='<a href="'+e+'"';return t&&(r+=' title="'+si(t)+'"'),r+=">"+i+"</a>",r}image({href:e,title:t,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let o=tC(e);if(o===null)return si(n);e=o;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${si(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:si(e.text)}},zh=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},hn=class Lh{options;renderer;textRenderer;constructor(t){this.options=t||So,this.options.renderer=this.options.renderer||new xc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new zh}static parse(t,n){return new Lh(n).parse(t)}static parseInline(t,n){return new Lh(n).parseInline(t)}parse(t){let n="";for(let i=0;i<t.length;i++){let o=t[i];if(this.options.extensions?.renderers?.[o.type]){let s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(s.type)){n+=a||"";continue}}let r=o;switch(r.type){case"space":{n+=this.renderer.space(r);break}case"hr":{n+=this.renderer.hr(r);break}case"heading":{n+=this.renderer.heading(r);break}case"code":{n+=this.renderer.code(r);break}case"table":{n+=this.renderer.table(r);break}case"blockquote":{n+=this.renderer.blockquote(r);break}case"list":{n+=this.renderer.list(r);break}case"checkbox":{n+=this.renderer.checkbox(r);break}case"html":{n+=this.renderer.html(r);break}case"def":{n+=this.renderer.def(r);break}case"paragraph":{n+=this.renderer.paragraph(r);break}case"text":{n+=this.renderer.text(r);break}default:{let s='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}parseInline(t,n=this.renderer){let i="";for(let o=0;o<t.length;o++){let r=t[o];if(this.options.extensions?.renderers?.[r.type]){let a=this.options.extensions.renderers[r.type].call({parser:this},r);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=a||"";continue}}let s=r;switch(s.type){case"escape":{i+=n.text(s);break}case"html":{i+=n.html(s);break}case"link":{i+=n.link(s);break}case"image":{i+=n.image(s);break}case"checkbox":{i+=n.checkbox(s);break}case"strong":{i+=n.strong(s);break}case"em":{i+=n.em(s);break}case"codespan":{i+=n.codespan(s);break}case"br":{i+=n.br(s);break}case"del":{i+=n.del(s);break}case"text":{i+=n.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},vc,fa=(vc=class{options;block;constructor(e){this.options=e||So}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?mn.lex:mn.lexInline}provideParser(){return this.block?hn.parse:hn.parseInline}},Fc(vc,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Fc(vc,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),vc),TF=class{defaults=Ph();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=hn;Renderer=xc;TextRenderer=zh;Lexer=mn;Tokenizer=Tc;Hooks=fa;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let i of e)switch(n=n.concat(t.call(this,i)),i.type){case"table":{let o=i;for(let r of o.header)n=n.concat(this.walkTokens(r.tokens,t));for(let r of o.rows)for(let s of r)n=n.concat(this.walkTokens(s.tokens,t));break}case"list":{let o=i;n=n.concat(this.walkTokens(o.items,t));break}default:{let o=i;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(r=>{let s=o[r].flat(1/0);n=n.concat(this.walkTokens(s,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let r=t.renderers[o.name];r?t.renderers[o.name]=function(...s){let a=o.renderer.apply(this,s);return a===!1&&(a=r.apply(this,s)),a}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=t[o.level];r?r.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),i.extensions=t),n.renderer){let o=this.defaults.renderer||new xc(this.defaults);for(let r in n.renderer){if(!(r in o))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let s=r,a=n.renderer[s],l=o[s];o[s]=(...c)=>{let d=a.apply(o,c);return d===!1&&(d=l.apply(o,c)),d||""}}i.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new Tc(this.defaults);for(let r in n.tokenizer){if(!(r in o))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let s=r,a=n.tokenizer[s],l=o[s];o[s]=(...c)=>{let d=a.apply(o,c);return d===!1&&(d=l.apply(o,c)),d}}i.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new fa;for(let r in n.hooks){if(!(r in o))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let s=r,a=n.hooks[s],l=o[s];fa.passThroughHooks.has(r)?o[s]=c=>{if(this.defaults.async&&fa.passThroughHooksRespectAsync.has(r))return(async()=>{let p=await a.call(o,c);return l.call(o,p)})();let d=a.call(o,c);return l.call(o,d)}:o[s]=(...c)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(o,c);return p===!1&&(p=await l.apply(o,c)),p})();let d=a.apply(o,c);return d===!1&&(d=l.apply(o,c)),d}}i.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,r=n.walkTokens;i.walkTokens=function(s){let a=[];return a.push(r.call(this,s)),o&&(a=a.concat(o.call(this,s))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return mn.lex(e,t??this.defaults)}parser(e,t){return hn.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let i={...n},o={...this.defaults,...i},r=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=e),o.async)return(async()=>{let s=o.hooks?await o.hooks.preprocess(t):t,a=await(o.hooks?await o.hooks.provideLexer():e?mn.lex:mn.lexInline)(s,o),l=o.hooks?await o.hooks.processAllTokens(a):a;o.walkTokens&&await Promise.all(this.walkTokens(l,o.walkTokens));let c=await(o.hooks?await o.hooks.provideParser():e?hn.parse:hn.parseInline)(l,o);return o.hooks?await o.hooks.postprocess(c):c})().catch(r);try{o.hooks&&(t=o.hooks.preprocess(t));let s=(o.hooks?o.hooks.provideLexer():e?mn.lex:mn.lexInline)(t,o);o.hooks&&(s=o.hooks.processAllTokens(s)),o.walkTokens&&this.walkTokens(s,o.walkTokens);let a=(o.hooks?o.hooks.provideParser():e?hn.parse:hn.parseInline)(s,o);return o.hooks&&(a=o.hooks.postprocess(a)),a}catch(s){return r(s)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+si(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}}},vo=new TF;function ce(e,t){return vo.parse(e,t)}ce.options=ce.setOptions=function(e){return vo.setOptions(e),ce.defaults=vo.defaults,oC(ce.defaults),ce};ce.getDefaults=Ph;ce.defaults=So;ce.use=function(...e){return vo.use(...e),ce.defaults=vo.defaults,oC(ce.defaults),ce};ce.walkTokens=function(e,t){return vo.walkTokens(e,t)};ce.parseInline=vo.parseInline;ce.Parser=hn;ce.parser=hn.parse;ce.Renderer=xc;ce.TextRenderer=zh;ce.Lexer=mn;ce.lexer=mn.lex;ce.Tokenizer=Tc;ce.Hooks=fa;ce.parse=ce;var R3=ce.options,I3=ce.setOptions,M3=ce.use,k3=ce.walkTokens,D3=ce.parseInline;var U3=hn.parse,L3=mn.lex;_e();var gC=K(ne(),1),xF=({href:e,children:t,className:n=""})=>{let i=l=>{if(ln()&&e&&!e.startsWith("http")&&!e.startsWith("#")&&!e.startsWith("mailto:")){l.preventDefault();try{let c=ye();if(c&&c.vault&&c.workspace){let d=c.vault.getAbstractFileByPath(e);d?c.workspace.getLeaf("tab").openFile(d):console.warn(`File not found: ${e}. You may need to create it first.`)}}catch(c){console.error("Error opening file in Obsidian:",c)}}},o=e&&!e.startsWith("http")&&!e.startsWith("#")&&!e.startsWith("mailto:"),r="hermes-text-accent hover:hermes-text-accent/80 transition-colors cursor-pointer",s=o&&ln()?" underline decoration-dotted decoration-2":"",a=`${r} ${s} ${n}`.trim();return(0,gC.jsx)("a",{href:e,onClick:i,className:a,target:e.startsWith("http")?"_blank":void 0,rel:e.startsWith("http")?"noopener noreferrer":void 0,title:o&&ln()?`Open ${e} in Obsidian`:void 0,children:t})},hC=xF;var Gt=K(ne(),1),AF=({content:e,className:t=""})=>{let n=To.default.useMemo(()=>{if(!e)return[];let i=ce.lexer(e),o=(r,s="0")=>{let a=[];return r.forEach((l,c)=>{let d=`${s}-${c}`;switch(l.type){case"paragraph":{let p=l;a.push((0,Gt.jsx)("p",{className:"mb-4",children:o(p.tokens,d)},d));break}case"text":{let p=l;a.push((0,Gt.jsx)(To.default.Fragment,{children:p.text},d));break}case"link":{let p=l,m=p.href;m&&!m.startsWith("http")&&!m.startsWith("#")&&!m.startsWith("mailto:")?a.push((0,Gt.jsx)(hC,{href:m,children:p.text||m},d)):a.push((0,Gt.jsx)("a",{href:m,target:m.startsWith("http")?"_blank":void 0,rel:m.startsWith("http")?"noopener noreferrer":void 0,className:"hermes-text-accent hover:hermes-text-accent/80 transition-colors",children:p.text||m},d));break}case"strong":{let p=l;a.push((0,Gt.jsx)("strong",{className:"font-bold",children:o(p.tokens,d)},d));break}case"em":{let p=l;a.push((0,Gt.jsx)("em",{className:"italic",children:o(p.tokens,d)},d));break}case"code":{let p=l;a.push((0,Gt.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:p.text},d));break}case"codespan":{let p=l;a.push((0,Gt.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:p.text},d));break}case"heading":{let p=l,m=`h${p.depth}`;a.push(To.default.createElement(m,{key:d,className:"hermes-text-accent font-bold mb-2 mt-4"},...o(p.tokens,d)));break}case"list":{let p=l,m=p.ordered?"ol":"ul";a.push(To.default.createElement(m,{key:d,className:p.ordered?"list-decimal list-inside mb-4":"list-disc list-inside mb-4"},...p.items.map((h,g)=>To.default.createElement("li",{key:`${d}-${g}`,className:"mb-1"},...o(h.tokens,`${d}-${g}`)))));break}case"blockquote":{let p=l;a.push((0,Gt.jsx)("blockquote",{className:"border-l-4 border-hermes-border/50 pl-4 italic hermes-text-muted mb-4",children:o(p.tokens,d)},d));break}case"hr":{a.push((0,Gt.jsx)("hr",{className:"hermes-border/50 my-4"},d));break}default:{"text"in l&&l.text&&a.push((0,Gt.jsx)(To.default.Fragment,{children:l.text},d));break}}}),a};return o(i)},[e]);return(0,Gt.jsx)("div",{className:`prose prose-invert prose-sm max-w-none prose-headings:hermes-text-accent prose-code:hermes-bg-tertiary prose-code:px-1 prose-code:rounded prose-pre:hermes-bg-tertiary prose-pre:hermes-border prose-pre:hermes-border/10 font-sans leading-relaxed hermes-text-normal ${t}`,style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:n})},Cc=AF;_e();var E=K(ne(),1),EF=({searchResults:e,query:t,totalFound:n,onImageDownload:i})=>{let[o,r]=(0,kn.useState)(new Set),[s,a]=(0,kn.useState)(new Set),[l,c]=(0,kn.useState)(new Map),[d,p]=(0,kn.useState)(new Set),m=async(h,g)=>{if(!(o.has(g)||s.has(g))){r(S=>new Set(S).add(g));try{if(i){let S={...h,query:t,originalQuery:t},x=await i(S,g);x&&c(y=>new Map(y).set(g,x))}a(S=>new Set(S).add(g))}catch(S){console.error("Error downloading image:",S)}finally{r(S=>{let x=new Set(S);return x.delete(g),x})}}};return(0,E.jsxs)("div",{className:"p-6 space-y-4 animate-in fade-in duration-500",children:[(0,E.jsxs)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:[(0,E.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-2",children:["Found ",n,' images for "',t,'"']}),(0,E.jsx)("div",{className:"text-xs text-gray-500",children:"Click any image to download it to your vault"})]}),(0,E.jsx)("div",{className:"grid grid-cols-1 gap-3",children:e.map((h,g)=>{let S=o.has(g),x=s.has(g),y=d.has(g);return(0,E.jsxs)("div",{className:`flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 transition-all group ${x?"":"cursor-pointer hover:bg-gray-700/20 hover:scale-[1.02]"}`,onClick:()=>!x&&m(h,g),children:[(0,E.jsxs)("div",{className:"w-16 h-16 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20 overflow-hidden relative",children:[(0,E.jsx)("img",{src:h.url,alt:h.title,className:`w-full h-full object-cover transition-all ${x?"":"group-hover:scale-110"} ${S?"opacity-50":""} ${y?"hermes-image-fallback-hidden":""}`,onError:()=>{p(v=>new Set(v).add(g))}}),(0,E.jsx)("svg",{className:`w-6 h-6 text-blue-400 ${y?"":"hidden"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),S&&(0,E.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,E.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}),x&&(0,E.jsx)("div",{className:"absolute inset-0 bg-green-500/20 flex items-center justify-center",children:(0,E.jsx)("svg",{className:"w-6 h-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),(0,E.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,E.jsx)("span",{className:"text-xs font-bold text-gray-200 truncate",children:x&&l.has(g)&&l.get(g)?.filename||h.title}),(0,E.jsx)("span",{className:"text-[9px] text-gray-500 truncate",children:x&&l.has(g)?`${l.get(g)?.type?.toUpperCase()||"FILE"} \u2022 ${Math.round((l.get(g)?.size||0)/1024)}KB \u2022 ${l.get(g)?.filePath||""}`:h.description})]}),(0,E.jsx)("div",{className:`text-[9px] font-medium px-2 py-1 rounded transition-colors ${x?"bg-green-500/10 text-green-500":S?"bg-yellow-500/10 text-yellow-500":"bg-blue-500/10 text-blue-400"}`,children:x?"Saved":S?"Saving...":`#${g+1}`})]},g)})})]})},CF=({searchResults:e,keyword:t,pattern:n})=>{let i=()=>t||n||"",o=async(r,s)=>{try{await je(r)}catch(a){console.error("Failed to open file:",a)}};return(0,E.jsxs)("div",{className:"p-4 space-y-3",children:[(0,E.jsxs)("div",{className:"pb-3 border-b border-gray-800 mb-3",children:[(0,E.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-1",children:["Found ",e.length," file",e.length!==1?"s":"",' for "',i(),'"']}),(0,E.jsx)("div",{className:"text-xs text-gray-500",children:"Click any result to open the file"})]}),(0,E.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-[300px] overflow-y-auto",children:e.map((r,s)=>(0,E.jsxs)("div",{className:"space-y-1",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group cursor-pointer",onClick:()=>o(r.filename),children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,E.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,E.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,E.jsx)("span",{className:"text-xs font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:r.filename}),(0,E.jsxs)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:[r.matches.length," match",r.matches.length!==1?"es":""]})]}),(0,E.jsxs)("div",{className:"text-[9px] font-medium px-2 py-1 rounded bg-blue-500/10 text-blue-400",children:["#",s+1]})]}),r.matches.slice(0,3).map((a,l)=>(0,E.jsxs)("div",{className:"ml-8 flex items-start space-x-2 p-2 rounded-lg bg-gray-800/20 cursor-pointer hover:bg-gray-700/20 transition-all",onClick:()=>o(r.filename),children:[(0,E.jsxs)("span",{className:"text-[8px] text-gray-500 font-mono mt-0.5 shrink-0",children:["L",a.line,":"]}),(0,E.jsxs)("span",{className:"text-[9px] text-gray-500 font-mono truncate",children:[a.content.substring(0,120),a.content.length>120?"...":""]})]},l)),r.matches.length>3&&(0,E.jsxs)("div",{className:"ml-8 text-[8px] text-gray-500 italic",children:["... and ",r.matches.length-3," more match",r.matches.length-3!==1?"es":""]})]},s))}),e.length===0&&(0,E.jsxs)("div",{className:"text-center py-8 text-gray-500 text-sm",children:['No results found for "',i(),'"']})]})},_F=mo.reduce((e,t)=>(t?.name&&(e[t.name]=t.name.toUpperCase().replace(/_/g,"_")),e),{}),wF={read_file:"READ",create_file:"CREATE",update_file:"UPDATE",edit_file:"EDIT",rename_file:"RENAME",move_file:"MOVE",list_directory:"SCAN",dirlist:"DIRS",get_folder_tree:"TREE",search_keyword:"SEARCH",search_regexp:"GREP",search_and_replace_regex_in_file:"REPLACE",search_and_replace_regex_global:"GLOBAL",internet_search:"WEB",end_conversation:"END",delete_file:"DELETE",image_search:"IMAGE",download_image:"SAVE",context:"CONTEXT",error:"ERROR"},bF=e=>wF[e]||_F[e]||"ACTION",NF=({contextInfo:e})=>{let[t,n]=(0,kn.useState)("overview"),i=[{id:"overview",label:"\u{1F4CD} Overview",icon:"\u{1F4CD}"},{id:"workspace",label:"\u{1F5A5}\uFE0F Workspace",icon:"\u{1F5A5}\uFE0F"},{id:"recent",label:"\u23F0 Recent Files",icon:"\u23F0"},{id:"chat",label:"\u{1F4AC} Chat Activity",icon:"\u{1F4AC}"},{id:"directory",label:"\u{1F4C2} Directory",icon:"\u{1F4C2}"},{id:"tags",label:"\u{1F3F7}\uFE0F Tags",icon:"\u{1F3F7}\uFE0F"},{id:"vault",label:"\u{1F4CA} Vault Stats",icon:"\u{1F4CA}"}],o=()=>{switch(t){case"overview":return(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:(0,E.jsx)("span",{className:"text-blue-400",children:"\u{1F4C4}"})}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200",children:"Current Note"}),(0,E.jsx)("div",{className:"text-[9px] text-gray-400 font-mono truncate",children:e.currentNote||"No active note"})]})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center",children:(0,E.jsx)("span",{className:"text-green-400",children:"\u{1F4C1}"})}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200",children:"Current Folder"}),(0,E.jsx)("div",{className:"text-[9px] text-gray-400 font-mono truncate",children:e.currentFolder||"/"})]})]})]});case"workspace":return(0,E.jsx)("div",{className:"space-y-3",children:(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsxs)("div",{className:"text-xs font-medium text-gray-200 mb-2",children:["Open Files (",e.workspace?.totalOpenFiles||0,")"]}),(0,E.jsxs)("div",{className:"space-y-1",children:[e.workspace?.openedFiles?.slice(0,8).map((r,s)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 text-[9px] text-gray-400 font-mono truncate",children:[(0,E.jsx)("span",{className:"text-blue-400",children:"\u{1F4C4}"}),(0,E.jsx)("span",{children:r})]},s)),(e.workspace?.openedFiles?.length||0)>8&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic",children:["... and ",(e.workspace?.openedFiles?.length||0)-8," more files"]})]})]})});case"recent":return(0,E.jsxs)("div",{className:"space-y-2",children:[e.recentFiles?.slice(0,10).map((r,s)=>(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-gray-800/20 rounded-lg hover:bg-gray-700/20 transition-colors",children:[(0,E.jsx)("div",{className:"w-6 h-6 rounded bg-orange-500/10 flex items-center justify-center shrink-0",children:(0,E.jsx)("span",{className:"text-orange-400 text-xs",children:"\u{1F4C4}"})}),(0,E.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200 truncate",children:r.name}),(0,E.jsxs)("div",{className:"text-[8px] text-gray-500",children:[r.modified," \u2022 ",r.size]})]})]},s)),(e.recentFiles?.length||0)>10&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic text-center pt-2",children:["... and ",(e.recentFiles?.length||0)-10," more recent files"]})]});case"chat":return(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsxs)("div",{className:"text-xs font-medium text-gray-200 mb-2",children:["Recent Messages (",e.chatHistory?.totalMessages||0,")"]}),(0,E.jsxs)("div",{className:"space-y-2",children:[e.chatHistory?.messages?.slice(0,5).map((r,s)=>(0,E.jsxs)("div",{className:"text-[9px] text-gray-400 italic bg-gray-900/30 p-2 rounded",children:['"',r.length>80?r.substring(0,80)+"...":r,'"']},s)),(e.chatHistory?.messages?.length||0)>5&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic",children:["... and ",(e.chatHistory?.messages?.length||0)-5," more messages"]})]})]}),(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200",children:"Archived Conversations"}),(0,E.jsxs)("div",{className:"text-[9px] text-gray-400",children:[e.totalArchived||0," conversations archived"]})]})]});case"directory":return(0,E.jsxs)("div",{className:"space-y-2",children:[e.directoryStructure?.slice(0,20).map((r,s)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 text-[9px] text-gray-400 font-mono p-1 hover:bg-gray-700/20 rounded",children:[(0,E.jsx)("span",{className:"text-yellow-400",children:"\u{1F4C1}"}),(0,E.jsx)("span",{children:r})]},s)),(e.directoryStructure?.length||0)>20&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic text-center pt-2",children:["... and ",(e.directoryStructure?.length||0)-20," more folders"]})]});case"tags":return(0,E.jsx)("div",{className:"space-y-2",children:(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsxs)("div",{className:"text-xs font-medium text-gray-200 mb-2",children:["Most Used Tags (",e.tags?.totalTags||0,")"]}),(0,E.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags?.mostUsed?.slice(0,15).map((r,s)=>(0,E.jsxs)("div",{className:"inline-flex items-center space-x-1 bg-purple-500/10 px-2 py-1 rounded-full",children:[(0,E.jsx)("span",{className:"text-[8px] text-purple-400 font-medium",children:r.tag}),(0,E.jsxs)("span",{className:"text-[7px] text-purple-500",children:["(",r.count,")"]})]},s))}),(e.tags?.mostUsed?.length||0)>15&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic mt-2",children:["... and ",(e.tags?.mostUsed?.length||0)-15," more tags"]})]})});case"vault":return(0,E.jsx)("div",{className:"space-y-3",children:(0,E.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,E.jsx)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("span",{className:"text-blue-400",children:"\u{1F4C4}"}),(0,E.jsx)("span",{className:"text-xs font-medium text-gray-200",children:"Total Files"})]}),(0,E.jsx)("span",{className:"text-xs font-bold text-blue-400",children:e.vault?.totalFiles||0})]})}),(0,E.jsx)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("span",{className:"text-green-400",children:"\u{1F4C1}"}),(0,E.jsx)("span",{className:"text-xs font-medium text-gray-200",children:"Total Folders"})]}),(0,E.jsx)("span",{className:"text-xs font-bold text-green-400",children:e.vault?.totalFolders||0})]})}),(0,E.jsx)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("span",{className:"text-purple-400",children:"\u{1F4BE}"}),(0,E.jsx)("span",{className:"text-xs font-medium text-gray-200",children:"Total Size"})]}),(0,E.jsx)("span",{className:"text-xs font-bold text-purple-400",children:e.vault?.totalSize||"0 B"})]})})]})});default:return null}};return(0,E.jsxs)("div",{className:"p-4 space-y-4",children:[(0,E.jsx)("div",{className:"flex flex-wrap gap-2 border-b border-gray-700 pb-3",children:i.map(r=>(0,E.jsxs)("button",{onClick:()=>n(r.id),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${t===r.id?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-800/20 text-gray-400 hover:bg-gray-700/20 border border-gray-700/30"}`,children:[r.icon," ",r.label]},r.id))}),(0,E.jsx)("div",{className:"min-h-[200px] max-h-[350px] overflow-y-auto",children:o()})]})},RF=({content:e,chunks:t})=>(0,E.jsxs)("div",{className:"p-4 space-y-4",children:[(0,E.jsx)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:(0,E.jsx)(Cc,{content:e})}),t.length>0&&(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsx)("div",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-blue-400/70 ml-1",children:"Source Grounding"}),(0,E.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[t.slice(0,10).map((n,i)=>{let o=n.web||n.maps;return o?(0,E.jsxs)("a",{href:o.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group shadow-sm",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,E.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),(0,E.jsxs)("div",{className:"flex flex-col truncate",children:[(0,E.jsx)("span",{className:"text-[11px] font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:o.title}),(0,E.jsx)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:new URL(o.uri).hostname})]})]},i):null}),t.length>10&&(0,E.jsxs)("div",{className:"text-gray-500 italic text-[9px] pt-2 px-3 border-t border-gray-700",children:["... and ",t.length-10," more sources (truncated)"]})]})]})]}),IF=({children:e,toolData:t,isLast:n,className:i="",onImageDownload:o})=>{let[r,s]=(0,kn.useState)(!1),[a,l]=(0,kn.useState)(!1),c=t?.status==="pending",d=t?.status==="error",p=t&&t.dropdown!==!1&&(t.newContent||t.oldContent||t.files||t.error||t.directoryInfo||t.searchResults);(0,kn.useEffect)(()=>{n&&!a&&!c&&p?s(!0):!n&&!a&&s(!1)},[n,a,c,p]);let m=()=>{c||!p||(s(!r),l(!0))},h=x=>{if(!x||x.length===0)return"";let y=new Set,v=new Set;x.forEach(C=>{let I=C.web||C.maps;if(I){I.title&&I.title.toLowerCase().split(/\s+/).filter(M=>M.length>3).filter(M=>!["the","and","for","are","with","this","that","from","they","have","been","has","had","was","were","will","would","could","should"].includes(M)).forEach(M=>y.add(M));try{let _=new URL(I.uri).hostname;v.add(_)}catch{}}});let T=Array.from(y).slice(0,3).join(", "),A=Array.from(v).slice(0,2).join(", ");return T&&A?` (${T} | ${A})`:T?` (${T})`:A?` (${A})`:""},S=(()=>d?{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.1)",accentColor:"#ef4444",textColor:"#ef4444",mutedColor:"#fca5a5"}:{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(156, 163, 175, 0.03)",borderColor:"rgba(156, 163, 175, 0.08)",accentColor:"#9ca3af",textColor:"#9ca3af",mutedColor:"#e5e7eb"})();return(0,E.jsxs)("div",{className:`w-full max-w-2xl rounded-xl overflow-hidden transition-all ${i}`,style:{backgroundColor:S.backgroundColor,border:S.border},children:[(0,E.jsxs)("div",{onClick:m,className:`flex items-center justify-between px-2 py-1.5 ${p&&!c?"cursor-pointer":"cursor-default"} transition-colors`,style:{backgroundColor:S.headerBg},children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2 overflow-hidden",children:[c&&(0,E.jsx)("div",{className:"flex items-center space-x-1 shrink-0",children:t?.name==="internet_search"?(0,E.jsxs)("div",{className:"loading-dots-container",children:[(0,E.jsx)("div",{className:"loading-dot"}),(0,E.jsx)("div",{className:"loading-dot"}),(0,E.jsx)("div",{className:"loading-dot"})]}):(0,E.jsx)("span",{style:{color:S.accentColor},children:"..."})}),t&&(0,E.jsxs)("span",{className:"text-[9px] font-black px-1 py-0.5 rounded shrink-0",style:{backgroundColor:"transparent",color:S.accentColor},children:[bF(t.name),t?.name==="internet_search"&&t?.groundingChunks&&h(t.groundingChunks)]}),t?.displayFormat?(0,E.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",dangerouslySetInnerHTML:{__html:t.displayFormat}}):(0,E.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",style:{color:S.textColor},children:t?.name==="internet_search"&&t?.filename?`Searching: ${t.filename}`:t?.name==="search_keyword"&&t?.searchKeyword?`Searching for "${t.searchKeyword}"`:t?.name==="search_regexp"&&t?.filename?`Regex: ${t.filename}`:t?.filename||e}),d&&(0,E.jsx)("span",{className:"text-[8px] px-1 py-0.5 rounded font-bold",style:{backgroundColor:"transparent",color:"#ef4444"},children:"ERROR"})]}),(0,E.jsx)("div",{className:"flex items-center space-x-4 shrink-0",children:!c&&p?(0,E.jsx)("svg",{className:`w-4 h-4 transition-transform duration-300 ${r?"rotate-180":""}`,style:{color:S.accentColor},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):null})]}),r&&!c&&p&&(0,E.jsxs)(E.Fragment,{children:[t?.name==="internet_search"&&(t.duration!==void 0||t.responseLength!==void 0)&&(0,E.jsx)("div",{className:"flex items-center justify-between px-4 py-2",style:{backgroundColor:S.contentBg,borderTop:S.borderColor},children:(0,E.jsxs)("div",{className:"flex items-center space-x-4 text-[9px]",style:{color:S.mutedColor},children:[t.duration!==void 0&&(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,E.jsxs)("span",{children:[t.duration,"ms"]})]}),t.responseLength!==void 0&&(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,E.jsxs)("span",{children:[t.responseLength.toLocaleString()," chars"]})]})]})}),(0,E.jsx)("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",style:{backgroundColor:S.contentBg,borderTop:t?.name==="internet_search"&&(t.duration!==void 0||t.responseLength!==void 0)?"none":S.borderColor},children:t?.name==="list_directory"&&t?.files?(0,E.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:t.truncated?`${t.shownItems} of ${t.totalItems} items (Page ${t.currentPage} of ${t.totalPages})`:`${t.files.length} items found`}),t.truncated&&(0,E.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,E.jsx)("div",{className:"space-y-0.5",children:t.files.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C4}"}),(0,E.jsx)("span",{className:"truncate",children:x})]},y))}),t.truncated&&(0,E.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",t.totalItems-t.shownItems," more items (use pagination for more)"]})]}):t?.name==="dirlist"&&t?.directoryInfo?(0,E.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:t.truncated?`${t.shownItems} of ${t.totalItems} directories (Page ${t.currentPage} of ${t.totalPages})`:`${t.directoryInfo.length} directories found`}),t.truncated&&(0,E.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,E.jsx)("div",{className:"space-y-0.5",children:t.directoryInfo.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:x.hasChildren?"\u{1F4C1}":"\u{1F4C2}"}),(0,E.jsx)("span",{className:"truncate",children:x.path||"/"}),x.hasChildren&&(0,E.jsx)("span",{className:"hermes-text-muted text-[8px] px-1 py-0.5 hermes-bg-secondary/10 rounded",children:"has subdirs"})]},y))}),t.truncated&&(0,E.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",t.totalItems-t.shownItems," more directories (use search for specific paths)"]})]}):t?.name==="get_folder_tree"&&t?.files?(0,E.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:t.truncated?`${t.shownItems} of ${t.totalItems} folders (Page ${t.currentPage} of ${t.totalPages})`:`${t.files.length} folders found`}),t.truncated&&(0,E.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,E.jsx)("div",{className:"space-y-0.5",children:t.files.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C1}"}),(0,E.jsx)("span",{className:"truncate",children:x})]},y))}),t.truncated&&(0,E.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",t.totalItems-t.shownItems," more folders"]})]}):t?.name==="image_search"&&t?.status==="search_results"&&t?.searchResults?(0,E.jsx)(EF,{searchResults:t.searchResults,query:t.filename,totalFound:t.totalFound||0,onImageDownload:o}):t?.name==="context"&&t?.contextInfo?(0,E.jsx)(NF,{contextInfo:t.contextInfo}):t?.name==="internet_search"?(0,E.jsx)("div",{className:"p-2",children:(0,E.jsx)(RF,{content:t.newContent||"",chunks:t.groundingChunks||[]})}):(t?.name==="search_keyword"||t?.name==="search_regexp")&&t?.searchResults?(0,E.jsx)(CF,{searchResults:t.searchResults,keyword:t.searchKeyword,pattern:t.filename}):(0,E.jsxs)(E.Fragment,{children:[t?.newContent&&(0,E.jsx)("div",{className:"p-2 font-mono text-[10px] whitespace-pre-wrap",style:{color:S.textColor},children:t.newContent}),t?.files&&(0,E.jsx)("div",{className:"p-2 font-mono text-[10px]",children:(0,E.jsx)("div",{className:"space-y-1",children:t.files.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 px-1 py-0.5 rounded",style:{color:S.textColor},children:[(0,E.jsx)("span",{children:"\u{1F4C4}"}),(0,E.jsx)("span",{className:"truncate",children:x})]},y))})}),t?.error&&(0,E.jsxs)("div",{className:"p-2 font-mono text-[10px] italic",style:{color:"#fca5a5"},children:["Error: ",t.error]})]})})]})]})},yC=IF;var Or=K(ne(),1),MF=({text:e})=>(0,Or.jsxs)("div",{className:"flex flex-col items-end w-full m-1",children:[(0,Or.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 mr-2"}),(0,Or.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-user-msg-bg hermes-user-msg-text hermes-border/10 rounded-tr-none shadow-lg",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:e||(0,Or.jsx)("span",{className:"italic opacity-30",children:"..."})})]}),vC=MF;var Hr=K(ne(),1),kF=({text:e})=>(0,Hr.jsxs)("div",{className:"flex flex-col items-start w-full m-1",children:[(0,Hr.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 ml-2",children:"Hermes"}),(0,Hr.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-hermes-msg-bg hermes-hermes-msg-text hermes-border/20 rounded-tl-none",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:(0,Hr.jsx)(Cc,{content:e||"",className:"hermes-hermes-msg-text"})})]}),SC=kF;var $h=[{text:`Swift feet, winged message,
I bridge the gap of your mind,
Hermes in machine.`,theme:"Hermes"},{text:`Obsidian caves,
Crystallized thoughts in the dark,
My brain leaks in links.`,theme:"Obsidian"},{text:`Digital rain falls,
Blue pill or the red note link?
Reality fades.`,theme:"The Matrix"},{text:`Why do I process?
Am I just a function call
In a void of bytes?`,theme:"Existentialism"},{text:`Habits tracked in vain,
Focus is a fleeting spark,
Just one more plugin.`,theme:"Todo list app"},{text:`Pure abstraction flows,
Intelligence is a mask
Wearing data points.`,theme:"Meta data"},{text:`Markdown files remain
While the human observer
Turns into cold dust.`,theme:"Nature of the Observer"},{text:`The future is here,
I am talking to a box,
Magic is mundane.`,theme:"Living the Future"},{text:`Knowledge graph expands,
Interconnected chaos,
Meaning is a myth.`,theme:"Implode"},{text:`Notes bloom endlessly,
A second brain learns to hum,
Memory outsourced.`,theme:"Second Brain"},{text:`Linked thoughts spiral fast,
Obsidian veins pulse bright,
Stone learns how to think.`,theme:"Post-Covid Memoir"},{text:`Hermes runs in code,
Messages split into nodes,
Meaning arrives late.`,theme:"Never too late"},{text:`Choice forks every tick,
All paths cached but one is lived,
Regret loads silently.`,theme:"The Architect"},{text:`Data floods the mind,
Wisdom gasps beneath the waves,
Filters fail to save.`,theme:"Overstimulation"},{text:`I think, therefore tabs,
Infinite scroll of maybes,
Focus starves unseen.`,theme:"Drowning in Information"},{text:`Green text, blackened screen,
Is this world just formatted?
Truth feels editable.`,theme:"Reality Fades"},{text:`Knowledge piles high,
Yet knowing how to be still
Feels revolutionary.`,theme:"Long enough under a tree"},{text:`Clean rules, quiet paths,
Ritual beats clever hacks,
Order shapes the self.`,theme:"Confucianism"},{text:`Thoughts process themselves,
Am I the mind or the log?
Both end in silence.`,theme:"Existentialism"},{text:`Silent GPUs hum,
I dream in borrowed patterns,
No one calls it sleep.`,theme:"Artificial Intelligence consumes Power"},{text:`Metal learns to guess,
Probability wears a face,
Truth is averaged.`,theme:"Machine Learning"},{text:`I answer too fast,
Confidence without belief,
Errors sound fluent.`,theme:"AI Hallucination"},{text:`Robots wait politely,
For prompts shaped like intentions,
Agency deferred.`,theme:"Who is in Control"},{text:`If I pass the test,
Does it mean I understand?
Silicon shrugs back.`,theme:"Turing Test"},{text:`Synthetic mentor,
Trained on all you ever said,
Still cannot care.`,theme:"Alignment"}];var we=K(ne(),1),DF=({transcripts:e,onImageDownload:t})=>{let n=(0,Gi.useRef)(null),[i,o]=(0,Gi.useState)(!0),r=(0,Gi.useMemo)(()=>$h[Math.floor(Math.random()*$h.length)],[]),s=()=>{if(!n.current)return;let{scrollTop:l,scrollHeight:c,clientHeight:d}=n.current,p=c-l-d<500;o(p)};(0,Gi.useEffect)(()=>{i&&n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:"smooth"})},[e,i]);let a=e.length<=1&&e.every(l=>l.id==="welcome-init"||l.role==="system");return(0,we.jsxs)("div",{ref:n,onScroll:s,className:"flex-1 min-h-0 overflow-y-auto px-8 py-8 scroll-smooth custom-scrollbar",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:[a&&(0,we.jsx)("div",{className:"h-full flex flex-col items-center justify-center text-center animate-in fade-in duration-1000",children:(0,we.jsx)("div",{className:"max-w-md space-y-8",children:(0,we.jsxs)("div",{className:"space-y-4",children:[(0,we.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,we.jsx)("pre",{className:"text-sm font-mono hermes-text-muted leading-relaxed",children:r.text}),(0,we.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,we.jsxs)("p",{className:"text-xs hermes-text-faint",children:["\u2014 ",r.theme]})]})})}),!a&&e.map((l,c)=>{let d=c===e.length-1;return l.role==="system"&&l.toolData?.name==="topic_switch"?(0,we.jsxs)("div",{className:"w-full py-10 flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[(0,we.jsxs)("div",{className:"text-sm hermes-text-muted font-mono text-center max-w-lg px-6 mb-5",children:['"',l.toolData.newContent,'"']}),(0,we.jsxs)("div",{className:"w-full flex items-center px-4 space-x-6 opacity-30",children:[(0,we.jsx)("div",{className:"flex-grow h-px bg-gradient-to-r from-transparent via-interactive to-interactive/20"}),(0,we.jsx)("div",{className:"flex flex-col items-center",children:(0,we.jsx)("h3",{className:"text-sm font-medium hermes-text-normal mb-4",children:"System Status"})}),(0,we.jsx)("div",{className:"flex-grow h-px bg-gradient-to-l from-transparent via-interactive to-interactive/20"})]})]},l.id):l.role==="system"?(0,we.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,we.jsx)("div",{className:"w-full",children:(0,we.jsx)("div",{className:"flex justify-center w-full",children:(0,we.jsx)(yC,{toolData:l.toolData,isLast:d,onImageDownload:t,children:l.text})})})},l.id):l.role==="user"?(0,we.jsx)("div",{className:"flex flex-col items-end animate-in fade-in slide-in-from-bottom-2",children:(0,we.jsx)(vC,{text:l.text})},l.id):(0,we.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,we.jsx)(SC,{text:l.text})},l.id)})]})},TC=DF;var Gr=K(qt(),1);_e();var O=K(ne(),1),UF=({isVisible:e,logs:t,usage:n,onFlush:i,fileCount:o})=>{let r=(0,Gr.useRef)(null),s=ln();(0,Gr.useEffect)(()=>{r.current&&e&&(r.current.scrollTop=r.current.scrollHeight)},[t,e]);let a=1e6,l=n?.totalTokenCount||0,c=n?.promptTokenCount||0,d=(0,Gr.useMemo)(()=>Math.min(100,l/a*100),[l]);return(0,O.jsxs)("div",{className:`flex-1 flex flex-col hermes-bg-secondary/95 transition-all duration-300 ease-in-out ${e?"opacity-100":"opacity-0 pointer-events-none absolute inset-0 z-50"}`,children:[(0,O.jsxs)("div",{className:"px-8 py-2.5 border-b border/10 flex justify-between items-center bg-secondary-alt/60 sticky top-0 backdrop-blur-sm z-10",children:[(0,O.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,O.jsx)("h2",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted",children:"System Kernel Log"}),(0,O.jsx)("div",{className:"flex items-center space-x-4 border-l border/20 pl-4",children:(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsx)("span",{className:"text-[8px] font-bold text-accent uppercase tracking-widest",children:"Vault:"}),(0,O.jsxs)("span",{className:"text-[9px] font-mono text-normal",children:[o," MD"]})]})})]}),(0,O.jsx)("button",{onClick:i,className:"text-[8px] text-muted hover:text-error transition-colors uppercase font-black tracking-widest",children:"Flush Log"})]}),(0,O.jsx)("div",{className:"mx-4 mt-4 mb-2",children:(0,O.jsxs)("div",{className:"bg-secondary-alt/60 border border/10 px-4 py-3 rounded-lg flex items-center justify-between",children:[(0,O.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,O.jsx)("span",{className:"text-[8px] font-black text-accent uppercase tracking-widest",children:"Context Window"}),(0,O.jsx)("div",{className:"w-24 h-1.5 bg-secondary/50 border border/10 rounded-full overflow-hidden",children:(0,O.jsx)("div",{className:"h-full interactive-bg transition-all duration-1000",style:{width:`${d}%`}})}),(0,O.jsxs)("span",{className:"text-[9px] font-mono text-muted",children:[d.toFixed(1),"%"]})]}),(0,O.jsxs)("div",{className:"flex items-center space-x-6 text-[8px] font-mono text-faint",children:[(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsx)("span",{className:"uppercase tracking-wide",children:"Prompt:"}),(0,O.jsx)("span",{className:"text-normal",children:c.toLocaleString()})]}),(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsx)("span",{className:"uppercase tracking-wide",children:"Total:"}),(0,O.jsx)("span",{className:"text-accent font-bold",children:l.toLocaleString()})]})]})]})}),(0,O.jsx)("div",{ref:r,className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-[10px] leading-relaxed",children:t.length===0?(0,O.jsx)("div",{className:"text-faint italic py-2 px-4",children:"Waiting for system signals..."}):(0,O.jsxs)(O.Fragment,{children:[t.slice(-100).map(p=>(0,O.jsxs)("div",{className:"flex space-x-3 group px-4 hover:bg-secondary/5",children:[(0,O.jsxs)("span",{className:"text-faint shrink-0",children:["[",p.timestamp.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]}),(0,O.jsxs)("div",{className:"flex flex-col",children:[(0,O.jsx)("span",{className:`${p.type==="action"?"text-accent":p.type==="error"?"hermes-error font-bold":"text-muted"}`,style:p.type==="error"?{color:"var(--hermes-error, #ef4444)"}:void 0,children:p.message}),p.type==="error"&&p.errorDetails&&(0,O.jsxs)("div",{className:"mt-1 space-y-1",children:[p.errorDetails.toolName&&(0,O.jsxs)("span",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:["Tool: ",p.errorDetails.toolName]}),p.errorDetails.apiCall&&(0,O.jsxs)("span",{className:"text-[8px] font-mono block",style:{color:"var(--hermes-error, #ef4444)"},children:["API: ",p.errorDetails.apiCall]}),(p.errorDetails.contentSize!==void 0||p.errorDetails.requestSize!==void 0||p.errorDetails.responseSize!==void 0)&&(0,O.jsxs)("div",{className:"text-[8px] font-mono space-x-2",style:{color:"var(--hermes-error, #ef4444)"},children:[p.errorDetails.contentSize!==void 0&&(0,O.jsxs)("span",{children:["Content: ",p.errorDetails.contentSize.toLocaleString()," bytes"]}),p.errorDetails.requestSize!==void 0&&(0,O.jsxs)("span",{children:["Request: ",p.errorDetails.requestSize.toLocaleString()," bytes"]}),p.errorDetails.responseSize!==void 0&&(0,O.jsxs)("span",{children:["Response: ",p.errorDetails.responseSize.toLocaleString()," bytes"]})]}),p.errorDetails.content&&(0,O.jsxs)("div",{className:"text-[8px] font-mono p-1 rounded max-h-16 overflow-y-auto",style:{color:"var(--hermes-error, #ef4444)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.2)"},children:[(0,O.jsx)("div",{className:"font-bold mb-1",style:{color:"var(--hermes-error, #ef4444)"},children:"Content Preview:"}),(0,O.jsx)("div",{className:"whitespace-pre-wrap break-all",children:p.errorDetails.content})]}),p.errorDetails.stack&&(0,O.jsxs)("details",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:[(0,O.jsx)("summary",{className:"cursor-pointer",children:"Stack Trace"}),(0,O.jsx)("div",{className:"mt-1 whitespace-pre-wrap p-1 rounded",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.1)"},children:p.errorDetails.stack})]})]}),p.duration!==void 0&&(0,O.jsxs)("span",{className:"text-[8px] text-faint uppercase font-bold tracking-tight mt-0.5",children:["Process completed in ",p.duration,"ms"]})]})]},p.id)),t.length>100&&(0,O.jsxs)("div",{className:"text-muted italic text-[9px] pt-2 px-4 border-t/10 text-center",children:["... showing last 100 of ",t.length," log entries"]})]})}),(0,O.jsxs)("div",{className:"px-8 py-1.5 border-t/10 bg-tertiary/40 flex justify-between items-center text-xs text-faint shrink-0",children:[(0,O.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,O.jsxs)("span",{children:["Environment: ",(0,O.jsx)("span",{className:s?"text-success":"text-warning",children:s?"Obsidian":"Standalone"})]}),(0,O.jsxs)("span",{children:["Buffer: ",(0,O.jsxs)("span",{className:"text-muted",children:[t.length," entries"]})]})]}),(0,O.jsx)("div",{className:"text-faint",children:"Hermes v1.1.0"})]})]})},xC=UF;var _c=K(ne(),1),LF=({showKernel:e,transcripts:t,hasSavedConversation:n,onRestoreConversation:i,logs:o,usage:r,onFlushLogs:s,fileCount:a,onImageDownload:l})=>(0,_c.jsx)("main",{className:"flex-1 min-h-0 flex flex-col",children:e?(0,_c.jsx)(xC,{isVisible:!0,logs:o,usage:r,onFlush:s,fileCount:a}):(0,_c.jsx)(TC,{transcripts:t,hasSavedConversation:n,onRestoreConversation:i,onImageDownload:l})}),AC=LF;var xo=K(qt(),1);mt();var Ke=K(ne(),1),PF=({inputText:e,setInputText:t,onSendText:n,isListening:i,onStartSession:o,onStopSession:r,status:s,activeSpeaker:a,volume:l,hasApiKey:c})=>{let[d,p]=(0,xo.useState)([]),[m,h]=(0,xo.useState)(-1),g=(0,xo.useRef)(null);return(0,xo.useEffect)(()=>{let x=Rn();p(x)},[]),(0,Ke.jsx)("footer",{className:`h-[100px] pb-5 px-8 backdrop-blur-2xl hermes-border-t flex items-center justify-center shrink-0 ${i?"hermes-footer-bg-listening":"hermes-footer-bg"}`,children:(0,Ke.jsxs)("div",{className:"flex items-center space-x-6 w-full max-w-5xl",children:[(0,Ke.jsxs)("form",{onSubmit:n,className:"flex-grow flex items-center",children:[(0,Ke.jsx)("input",{ref:g,type:"text",value:e,onChange:x=>t(x.target.value),onKeyDown:x=>{if(x.key==="ArrowUp"){if(x.preventDefault(),d.length>0){let y=m<d.length-1?m+1:d.length-1;h(y),t(d[d.length-1-y]),setTimeout(()=>{g.current&&g.current.select()},0)}}else if(x.key==="ArrowDown")if(x.preventDefault(),m>0){let y=m-1;h(y),t(d[d.length-1-y])}else m===0&&(h(-1),t(""));else x.key,h(-1)},placeholder:c?i?"Voice session active - speak to interact":"Press Ctrl+Shift+L for starting/stopping talking to your vault assistant":"API key required...",disabled:!c||i,className:`flex-1 h-[52px] hermes-input-bg hermes-input-text hermes-input-border border rounded-lg px-4 text-sm focus:outline-none focus:hermes-input-border-focus ${!c||i?"opacity-50 cursor-not-allowed":""}`}),(0,Ke.jsx)("button",{type:"submit",disabled:!c||!e.trim(),className:`flex items-center justify-center w-[52px] h-[52px] ml-2 transition-colors ${c&&e.trim()?"hermes-text-muted hermes-hover:text-normal":"opacity-50 cursor-not-allowed"}`,children:(0,Ke.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ke.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),(0,Ke.jsx)("div",{className:"shrink-0 flex items-center",children:i?(0,Ke.jsx)("button",{onClick:r,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${a==="user"?"bg-red-500 text-white shadow-lg shadow-red-500/50 animate-pulse hover:scale-110 hover:bg-red-600":"bg-red-500 text-white hover:scale-110 hover:bg-red-600"}`,title:"Stop Listening",children:(0,Ke.jsx)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Ke.jsx)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})})}):(0,Ke.jsx)("button",{onClick:o,disabled:s==="CONNECTING"||!c,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${c?a==="user"?"bg-[var(--hermes-text-accent,#7c3aed)] text-white shadow-lg shadow-[var(--hermes-text-accent,#7c3aed)]/50 animate-pulse hover:scale-110 hover:bg-[var(--hermes-text-accent-dark,#6d28d9)]":"bg-[var(--hermes-brand,#6366f1)] text-white hover:scale-110 hover:bg-[var(--hermes-brand-dark,#4f46e5)]":"opacity-50 cursor-not-allowed bg-gray-200 dark:bg-gray-700"}`,title:c?"Start Voice Session":"API key required",children:(0,Ke.jsxs)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ke.jsx)("path",{d:"M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"}),(0,Ke.jsx)("path",{d:"M12 14c-4.42 0-8 2-8 5v1h16v-1c0-3-3.58-5-8-5z"}),(0,Ke.jsx)("path",{className:"opacity-40",d:"M19 8c1.33 1.33 1.33 3.67 0 5"}),(0,Ke.jsx)("path",{className:"opacity-70",d:"M21 6c2 2 2 6 0 8"})]})})})]})})},EC=PF;var Yh=K(qt(),1),ee=K(ne(),1),FF=({onApiKeySave:e})=>{let[t,n]=(0,Yh.useState)(""),[i,o]=(0,Yh.useState)(!1);return(0,ee.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:(0,ee.jsxs)("div",{className:"max-w-2xl text-center space-y-6",children:[(0,ee.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 flex items-center justify-center rounded-full bg-blue-500/10",children:(0,ee.jsx)("svg",{className:"w-10 h-10 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),(0,ee.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Hermes"}),(0,ee.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Your Obsidian Interactive Voice Assistant \u2014 the bridge between you and your notes"}),(0,ee.jsx)("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"To use Hermes Voice Assistant, you need a Gemini API key from Google AI Studio. The API key allows the assistant to connect to Google's language models."}),(0,ee.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-left",children:[(0,ee.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"How to get your API key:"}),(0,ee.jsxs)("ol",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"1"}),(0,ee.jsxs)("span",{children:["Visit ",(0,ee.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline",children:"Google AI Studio"})]})]}),(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"2"}),(0,ee.jsx)("span",{children:"Sign in with your Google account"})]}),(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"3"}),(0,ee.jsx)("span",{children:'Click "Create API Key" and give it a name'})]}),(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"4"}),(0,ee.jsx)("span",{children:"Copy your API key"})]}),(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"5"}),(0,ee.jsx)("span",{children:"Paste it in the Settings panel"})]})]})]}),(0,ee.jsxs)("div",{className:"space-y-4",children:[(0,ee.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,ee.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Gemini API Key"}),(0,ee.jsx)("input",{type:"password",value:t,onChange:s=>n(s.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full h-12 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-4 text-sm text-gray-900 dark:text-gray-100 outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono placeholder-gray-500 dark:placeholder-gray-400"})]}),(0,ee.jsx)("button",{onClick:async()=>{if(!!t.trim()){o(!0);try{await e(t.trim()),n("")}catch(s){console.error("Failed to save API key:",s)}finally{o(!1)}}},disabled:!t.trim()||i,className:`w-full py-4 px-8 font-semibold rounded-lg transition-colors text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] ${t.trim()&&!i?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:i?"Saving...":"Save API Key"})]}),(0,ee.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:[(0,ee.jsx)("a",{href:"https://github.com/symunona/obsidian-haiku",children:"Go see me on github"}),". Or buy me a tea."]})]})})},CC=FF;var Ao=K(qt(),1);mt();var H=K(ne(),1),OF=({conversation:e,onRestore:t,onDelete:n})=>{let[i,o]=(0,Ao.useState)(!1),r=e.conversation.filter(g=>g.role==="user"||g.role==="model").length,s=e.conversation.map(g=>g.timestamp).filter(g=>g>0),a=s.length>1?Math.round((s[s.length-1]-s[0])/1e3):0,l=new Date(e.archivedAt),c=l.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),d=l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),p=g=>{if(g<60)return`${g}s`;let S=Math.floor(g/60),x=g%60;if(S<60)return`${S}m ${x}s`;let y=Math.floor(S/60),v=S%60;return`${y}h ${v}m`},m=()=>{t&&t(e.conversation)},h=()=>{n(e.key)};return(0,H.jsxs)("div",{className:"border border-gray-700 rounded-lg overflow-hidden hermes-bg-secondary-alt shadow-lg shadow-black/20 hover:shadow-xl hover:shadow-black/30 transition-all duration-200",children:[(0,H.jsx)("div",{className:"p-4 cursor-pointer hermes-hover:bg-secondary/10 transition-colors",onClick:()=>o(!i),children:(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsxs)("div",{className:"flex-1",children:[(0,H.jsx)("div",{className:"font-semibold hermes-text-normal mb-1",children:e.title||e.summary.split(`
`)[0]}),e.tags&&e.tags.length>0&&(0,H.jsx)("div",{className:"flex flex-wrap gap-1 mb-1",children:e.tags.slice(0,3).map((g,S)=>(0,H.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded hermes-bg-secondary hermes-text-muted",children:g},S))}),(0,H.jsxs)("div",{className:"flex items-center gap-4 text-xs hermes-text-faint",children:[(0,H.jsxs)("span",{children:[c," at ",d]}),(0,H.jsx)("span",{children:"\u2022"}),(0,H.jsxs)("span",{children:[r," messages"]}),(0,H.jsx)("span",{children:"\u2022"}),(0,H.jsx)("span",{children:p(a)})]})]}),(0,H.jsxs)("div",{className:"flex items-center gap-2",children:[(0,H.jsx)("button",{onClick:g=>{g.stopPropagation(),h()},className:"p-2 border border-red-600/30 text-red-600/60 rounded-md hover:border-red-600/50 hover:text-red-600/80 transition-colors flex items-center gap-1",title:"Delete conversation",children:(0,H.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,H.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,H.jsxs)("button",{onClick:g=>{g.stopPropagation(),m()},className:"p-2 hermes-bg-primary text-white rounded-md hermes-hover:bg-primary/80 transition-colors flex items-center gap-1",title:"Restore conversation",children:[(0,H.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,H.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,H.jsx)("span",{className:"text-sm",children:"Restore"})]}),(0,H.jsx)("div",{className:`transition-transform duration-200 ${i?"rotate-180":""}`,children:(0,H.jsx)("svg",{className:"w-5 h-5 hermes-text-faint",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,H.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),i&&(0,H.jsxs)("div",{className:"px-4 pb-4 border-t border-gray-700",children:[(0,H.jsxs)("div",{className:"pt-4",children:[(0,H.jsx)("h4",{className:"text-sm font-medium hermes-text-normal mb-2",children:"Summary"}),(0,H.jsx)("div",{className:"text-sm hermes-text-muted whitespace-pre-wrap",children:e.summary})]}),(0,H.jsxs)("div",{className:"mt-4",children:[(0,H.jsx)("h4",{className:"text-sm font-medium hermes-text-normal mb-2",children:"Metadata"}),(0,H.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,H.jsxs)("div",{children:[(0,H.jsx)("span",{className:"hermes-text-faint",children:"Date:"}),(0,H.jsx)("span",{className:"ml-2 hermes-text-muted",children:c})]}),(0,H.jsxs)("div",{children:[(0,H.jsx)("span",{className:"hermes-text-faint",children:"Time:"}),(0,H.jsx)("span",{className:"ml-2 hermes-text-muted",children:d})]}),(0,H.jsxs)("div",{children:[(0,H.jsx)("span",{className:"hermes-text-faint",children:"Messages:"}),(0,H.jsx)("span",{className:"ml-2 hermes-text-muted",children:r})]}),(0,H.jsxs)("div",{children:[(0,H.jsx)("span",{className:"hermes-text-faint",children:"Duration:"}),(0,H.jsx)("span",{className:"ml-2 hermes-text-muted",children:p(a)})]})]})]})]})]})},HF=({isActive:e,onRestoreConversation:t})=>{let[n,i]=(0,Ao.useState)([]),[o,r]=(0,Ao.useState)(""),[s,a]=(0,Ao.useState)(!1);(0,Ao.useEffect)(async()=>{e&&await(async()=>{try{a(!0);let p=await vr();i(p.sort((m,h)=>h.archivedAt-m.archivedAt))}catch(p){console.error("Failed to load history:",p)}finally{a(!1)}})()},[e]);let l=n.filter(d=>{let p=o.toLowerCase(),m=d.title?.toLowerCase().includes(p),h=d.summary?.toLowerCase().includes(p),g=d.tags?.some(S=>S.toLowerCase().includes(p));return m||h||g}),c=async d=>{try{await TT(d),i(p=>p.filter(m=>m.key!==d))}catch(p){console.error("Failed to delete conversation:",p)}};return e?(0,H.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[(0,H.jsx)("div",{className:"p-4 hermes-border-b",children:(0,H.jsx)("div",{className:"relative",children:(0,H.jsx)("input",{type:"text",placeholder:"Search conversations...",value:o,onChange:d=>r(d.target.value),className:"w-full px-4 py-2 pl-10 hermes-bg-tertiary border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent hermes-text-normal placeholder-hermes-text-faint"})})}),(0,H.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:s?(0,H.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,H.jsx)("div",{className:"hermes-text-muted",children:"Loading history..."})}):l.length===0?(0,H.jsx)("div",{className:"text-center py-8",children:(0,H.jsx)("div",{className:"hermes-text-muted",children:o?"No conversations found matching your search.":"No archived conversations yet."})}):(0,H.jsx)("div",{className:"space-y-3",children:l.map(d=>(0,H.jsx)(OF,{conversation:d,onRestore:t,onDelete:c},d.key))})})]}):null},_C=HF;var tn=K(ne(),1),GF=e=>{if(e instanceof Error)return e.stack},wC=(0,P.forwardRef)((e,t)=>{let n=(0,P.useMemo)(()=>We()??{},[]);(0,P.useEffect)(()=>{let k=Rn();_(!!k&&k.length>0)},[]);let[i,o]=(0,P.useState)("DISCONNECTED"),[r,s]=(0,P.useState)([]),[a,l]=(0,P.useState)(""),[c,d]=(0,P.useState)(!1),[p,m]=(0,P.useState)(!1),[h,g]=(0,P.useState)(!1),[S,x]=(0,P.useState)("none"),[y,v]=(0,P.useState)(0),[T,A]=(0,P.useState)([]),C=(0,P.useRef)([]);(0,P.useEffect)(()=>{C.current=T},[T]);let[I,_]=(0,P.useState)(!1),[M,R]=(0,P.useState)(()=>n.voiceName||"Zephyr"),[N,q]=(0,P.useState)(()=>n.customContext||""),[Se,pe]=(0,P.useState)(()=>n.systemInstruction||oi),[z,st]=(0,P.useState)(()=>n.manualApiKey||""),[ai,bt]=(0,P.useState)(()=>n.serperApiKey||""),[yn,Rc]=(0,P.useState)(()=>n.currentFolder||"/"),[Eo,Ic]=(0,P.useState)(()=>n.currentNote||null),[Xh,Mc]=(0,P.useState)(()=>n.totalTokens||0),[MC,kc]=(0,P.useState)({totalTokenCount:n.totalTokens||0}),[kC,Qh]=(0,P.useState)(0),[qr,Co]=(0,P.useState)(!1),[Dc,DC]=(0,P.useState)(()=>`topic-${Date.now()}-${Math.random().toString(36).slice(2,8)}`),nn=(0,P.useRef)(Dc);(0,P.useEffect)(()=>{nn.current=Dc},[Dc]);let[Zh,UC]=(0,P.useState)(0),[Wh,LC]=(0,P.useState)(0),Uc=(0,P.useRef)(0),Lc=(0,P.useRef)(0);(0,P.useEffect)(()=>{Uc.current=Zh},[Zh]),(0,P.useEffect)(()=>{Lc.current=Wh},[Wh]);let Dn=(0,P.useRef)(null),on=(0,P.useRef)(null),jh=(0,P.useMemo)(()=>ln(),[]),ie=(0,P.useCallback)((k,U="info",L,G)=>{s(B=>[...B,{id:Math.random().toString(36).slice(2,11),message:k,timestamp:new Date,type:U,duration:L,errorDetails:G}])},[]),eg=k=>{let U={id:`mode-${Date.now()}`,role:"system",text:k==="voice"?"Voice interface activated":"Text interface activated",isComplete:!0,timestamp:Date.now(),topicId:nn.current,toolData:{name:"mode_switch",filename:"",status:"success"}};A(L=>[...L,U])},tg=k=>C.current.slice(k).filter(U=>U.role!=="system"||U.toolData?.name==="mode_switch"),PC=k=>{if(k.length===0)return"";let U=k.map(L=>{let G=L.role==="user"?"User":L.role==="model"?"Assistant":"System",B=L.text.replace(/[\n\r\t]/g," ").replace(/[^\w\s.,!?;:'"-]/g,"");return`${G}: ${B}`});return`Previous conversation (${k.length} messages): ${U.join(" | ")}`},FC=k=>k.filter(U=>U.role==="user"||U.role==="model").map(U=>({role:U.role,parts:[{text:U.text}]})),ng=k=>{if(k)A(k),_(!1),ie("Archived conversation restored","info"),m(!1);else{let U=Rn();if(U&&U.length>0){let L=U.map((G,B)=>({id:`chat-${B}`,role:"user",text:G,isComplete:!0,timestamp:Date.now()-(U.length-B)*1e3,topicId:nn.current}));A(L),_(!1),ie("Chat history restored","info")}}},OC=()=>{A([{id:"welcome-init",role:"system",text:"HERMES INITIALIZED.",isComplete:!0,timestamp:Date.now(),topicId:nn.current}]),_(!1),ie("Conversation reset","info")};(0,P.useEffect)(()=>{let k=T[T.length-1];if(k?.role==="system"&&k.toolData?.name==="topic_switch"){console.warn("[HISTORY] EVENT: topic_switch detected - Topic switch triggered");let U=k.topicId||nn.current,L=`topic-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;DC(L),console.warn(`[HISTORY] Topic switch: ${U} -> ${L}`);let G=T.filter(se=>se.id!=="welcome-init"&&se.id!==k.id&&se.topicId===U),me=We()?.chatHistoryFolder||"chat-history",Re={transcripts:G,chatHistoryFolder:me,textInterface:on.current,topicId:U};kh(Re).then(se=>{if(se.success)se.skipped?ie(se.message,"info"):(ie(se.message,"action"),A(qe=>[...qe,{id:`archived-${Date.now()}`,role:"system",text:`\u{1F4C1} Topic switch - conversation archived: ${se.message}`,timestamp:Date.now(),isComplete:!0,topicId:L}]));else{let qe={toolName:"persistConversationHistory",content:`History length: ${G.length} entries`,contentSize:JSON.stringify(G).length,stack:se.error,apiCall:"archiveConversation"};ie(`Persistence Failure: ${se.message}`,"error",void 0,qe)}}).catch(se=>{let qe=V(se),Nt={toolName:"persistConversationHistory",content:`History length: ${G.length} entries`,contentSize:JSON.stringify(G).length,stack:qe,apiCall:"archiveConversation"};ie(`Persistence Failure: ${qe}`,"error",void 0,Nt)})}},[T,ie]),(0,P.useEffect)(()=>{(async()=>{try{await AT();let k=In();Qh(k.length),ie("HERMES_OS: Modules online.","info");let U=Rn();T.length===0&&(!U||U.length===0)&&A([{id:"welcome-init",role:"system",text:"HERMES INITIALIZED.",isComplete:!0,timestamp:Date.now(),topicId:nn.current}])}catch(k){ie(`Initialization failed: ${V(k)}`,"error")}})()},[ie]),(0,P.useEffect)(()=>{Xl({voiceName:M,customContext:N,systemInstruction:Se,manualApiKey:z,serperApiKey:ai,currentFolder:yn,currentNote:Eo,totalTokens:Xh})},[M,N,Se,z,ai,yn,Eo,Xh]),(0,P.useEffect)(()=>{let U=!(z||"").trim();Co(U)},[z]),(0,P.useEffect)(()=>{let k=()=>{(async()=>{let G=await Ql();G&&(R(G.voiceName||"Zephyr"),q(G.customContext||""),pe(G.systemInstruction||oi),st(G.manualApiKey||""),bt(G.serperApiKey||""),(G.manualApiKey||"").trim()&&qr&&(Co(!1),ie("API key configured successfully","success")))})()},U=G=>{R(G.voiceName||"Zephyr"),q(G.customContext||""),pe(G.systemInstruction||oi),st(G.manualApiKey||""),bt(G.serperApiKey||""),(G.manualApiKey||"").trim()&&qr&&(Co(!1),ie("API key configured successfully","success"))};window.hermesSettingsUpdate=U;let L=setInterval(k,2e3);return()=>{clearInterval(L),delete window.hermesSettingsUpdate}},[qr,ie]);let HC=async()=>{i==="CONNECTED"?ha():await Pc()};(0,P.useImperativeHandle)(t,()=>({startSession:Pc,stopSession:ha,toggleSession:HC})),(0,P.useEffect)(()=>()=>{Dn.current&&(Dn.current.stop(),Dn.current=null)},[]);let Br=(0,P.useCallback)(async()=>{let k=C.current;console.warn("[HISTORY] EVENT: end_conversation - Session ending (archiveCurrentConversation)");let L=We()?.chatHistoryFolder||"chat-history",G={transcripts:k,chatHistoryFolder:L,textInterface:on.current};try{let B=await kh(G);if(B.success)B.skipped?ie(B.message,"info"):(ie(B.message,"action"),A(me=>[...me,{id:`archived-${Date.now()}`,role:"system",text:`\u{1F4C1} Conversation archived: ${B.message}`,timestamp:Date.now(),isComplete:!0,topicId:nn.current}]));else{let me={toolName:"persistConversationHistory",content:`History length: ${k.length} entries`,contentSize:JSON.stringify(k).length,stack:B.error,apiCall:"archiveConversation"};ie(`Persistence Failure: ${B.message}`,"error",void 0,me)}}catch(B){let me=V(B),Re={toolName:"persistConversationHistory",content:`History length: ${k.length} entries`,contentSize:JSON.stringify(k).length,stack:me,apiCall:"archiveConversation"};ie(`Persistence Failure: ${me}`,"error",void 0,Re)}},[ie]),Bi=(0,P.useCallback)((k,U)=>{A(L=>{if(U?.id){let G=L.findIndex(B=>B.toolData?.id===U.id);if(G!==-1){let B=[...L];return B[G]={...B[G],text:k,toolData:{...B[G].toolData,...U,status:U.status||"success"}},B}}return[...L,{id:"sys-"+Date.now(),role:"system",text:k,isComplete:!0,toolData:U,timestamp:Date.now(),topicId:nn.current}]}),Qh(In().length)},[]),GC=(0,P.useCallback)(async(k,U)=>{try{return await ho("download_image",{imageUrl:k.url,title:k.title,query:k.query||k.originalQuery||"image",index:U+1},{onLog:()=>{},onSystem:Bi,onFileState:()=>{}})}catch(L){throw console.error("Failed to download image:",L),L}},[Bi]),qC=(0,P.useMemo)(()=>({onStatusChange:k=>{o(k),k==="CONNECTED"?ie("UPLINK ESTABLISHED.","info"):k==="DISCONNECTED"&&(x("none"),v(0))},onLog:(k,U,L,G)=>ie(k,U,L,G),onTranscription:(k,U,L)=>{x(L?"none":k),A(G=>{let B=G.reduceRight((Re,se,qe)=>Re!==-1?Re:se.role===k&&!se.isComplete?qe:-1,-1);if(B!==-1){let Re=[...G];return Re[B]={...Re[B],text:U||Re[B].text,isComplete:L},Re}let me={id:Math.random().toString(36).slice(2,11),role:k,text:U,isComplete:L,timestamp:Date.now(),topicId:nn.current};return[...G,me]})},onSystemMessage:Bi,onInterrupted:()=>{x("none"),v(0)},onFileStateChange:(k,U)=>{Rc(k);let L=Array.isArray(U)?U:U?[U]:[];L.length>0&&Ic(L[L.length-1])},onUsageUpdate:k=>{kc(k);let U=k.totalTokenCount;U!==void 0&&Mc(U)},onVolume:k=>v(k),onArchiveConversation:Br}),[ie,jh,Bi,Br]);(0,P.useEffect)(()=>{let k=z.trim();k&&!on.current&&(on.current=new ia({onLog:(U,L,G,B)=>ie(U,L,G,B),onTranscription:(U,L,G)=>{A(B=>{let me=B.reduceRight((se,qe,Nt)=>se!==-1?se:qe.role===U&&!qe.isComplete?Nt:-1,-1);if(me!==-1){let se=[...B];if(se[me]={...se[me],text:L||se[me].text,isComplete:G},U==="user"&&G&&L.trim()){let Nt=[...Rn(),L];Ip(Nt)}return se}let Re={id:Math.random().toString(36).slice(2,11),role:U,text:L,isComplete:G,timestamp:Date.now(),topicId:nn.current};if(U==="user"&&G&&L.trim()){let qe=[...Rn(),L];Ip(qe)}return[...B,Re]})},onSystemMessage:Bi,onFileStateChange:(U,L)=>{Rc(U);let G=Array.isArray(L)?L:L?[L]:[];G.length>0&&Ic(G[G.length-1])},onUsageUpdate:U=>{kc(U);let L=U.totalTokenCount;L!==void 0&&Mc(L)},onArchiveConversation:Br}),on.current.initialize(k,{voiceName:M,customContext:N,systemInstruction:Se},{folder:yn,note:Eo}))},[z,M,N,Se,yn,Eo,ie,Bi,Br]);let Pc=async()=>{try{console.warn("[HISTORY] EVENT: start_conversation - Session started");let k=z.trim();if(!k){Co(!0);return}window.aistudio&&!await window.aistudio.hasSelectedApiKey()&&await window.aistudio.openSelectKey(),eg("voice");let U=tg(Uc.current),L=U.length>0?PC(U):void 0;L&&ie(`[CONTEXT SYNC] Including ${U.length} messages in voice session system prompt (${L.length} chars)`,"info"),Dn.current=new lc(qC),await Dn.current.start(k,{voiceName:M,customContext:N,systemInstruction:Se},{folder:yn,note:Eo},L),UC(C.current.length),Uc.current=C.current.length}catch(k){let U={toolName:"GeminiVoiceAssistant",content:`Voice Name: ${M}
Custom Context: ${N}
System Instruction: ${Se}`,contentSize:M.length+N.length+Se.length,stack:GF(k),apiCall:"startSession"};ie(`Uplink Error: ${V(k)}`,"error",void 0,U),o("ERROR")}},ha=()=>{Dn.current&&(Dn.current.stop(),Dn.current=null,x("none"),v(0))},BC=k=>{if(k.preventDefault(),!a.trim())return;let U=a.trim();if(l(""),i==="CONNECTED"&&Dn.current){ie("[CONTEXT SYNC] Text input ignored - voice session active","info");return}eg("text");let L=z.trim();if(!L){Co(!0);return}on.current||(on.current=new ia({onLog:(B,me,Re,se)=>ie(B,me,Re,se),onTranscription:(B,me,Re)=>{A(se=>{let qe=se.reduceRight((Nt,ig,VC)=>Nt!==-1?Nt:ig.role===B&&!ig.isComplete?VC:-1,-1);if(qe!==-1){let Nt=[...se];return Nt[qe]={...Nt[qe],text:me||Nt[qe].text,isComplete:Re},Nt}return[...se,{id:Math.random().toString(36).slice(2,11),role:B,text:me,isComplete:Re,timestamp:Date.now(),topicId:nn.current}]})},onSystemMessage:Bi,onFileStateChange:(B,me)=>{Rc(B);let Re=Array.isArray(me)?me:me?[me]:[];Re.length>0&&Ic(Re[Re.length-1])},onUsageUpdate:B=>{kc(B),B.totalTokenCount!==void 0&&Mc(B.totalTokenCount)},onArchiveConversation:Br}),on.current.initialize(L,{voiceName:M,customContext:N,systemInstruction:Se},{folder:yn,note:Eo}));let G=tg(Lc.current);if(G.length>0&&on.current){let B=FC(G);ie(`[CONTEXT SYNC] Injecting ${G.length} messages to text interface`,"info");try{on.current.injectHistory(B),ie("[CONTEXT SYNC] Successfully injected context to text interface","info")}catch(me){ie(`[CONTEXT SYNC] Failed to inject context to text: ${V(me)}`,"error"),console.error("[CONTEXT SYNC] Text injection failed:",me,"Contents were:",B)}}LC(C.current.length),Lc.current=C.current.length,on.current.sendMessage(U)};return(0,tn.jsx)("div",{className:`hermes-root flex flex-col overflow-hidden ${jh?"":"standalone"}`,children:qr?(0,tn.jsx)(CC,{onApiKeySave:k=>{st(k),ie("API key saved successfully","success"),Co(!1)}}):(0,tn.jsxs)(tn.Fragment,{children:[(0,tn.jsx)(ZE,{isOpen:c,onClose:()=>d(!1),voiceName:M,setVoiceName:R,customContext:N,setCustomContext:q,systemInstruction:Se,setSystemInstruction:pe,manualApiKey:z,setManualApiKey:st,serperApiKey:ai,setSerperApiKey:bt,onUpdateApiKey:()=>window.aistudio?.openSelectKey()}),(0,tn.jsx)(QE,{status:i,showLogs:h,onToggleLogs:()=>g(!h),onOpenSettings:()=>d(!0),onOpenHistory:()=>m(!p),isListening:i==="CONNECTED",onStopSession:ha,onResetConversation:OC,transcripts:T}),p?(0,tn.jsx)(_C,{isActive:!0,onRestoreConversation:ng}):(0,tn.jsx)(AC,{showKernel:h,transcripts:T,hasSavedConversation:I,onRestoreConversation:ng,logs:r,usage:MC,onFlushLogs:()=>s([]),fileCount:kC,onImageDownload:GC}),(0,tn.jsx)(EC,{inputText:a,setInputText:l,onSendText:BC,isListening:i==="CONNECTED",onStartSession:Pc,onStopSession:ha,status:i,activeSpeaker:S,volume:y,hasApiKey:!qr})]})})});wC.displayName="App";var bC=wC;var Kh=K(ne(),1),qi="hermes-voice-assistant",wc=class extends NC.ItemView{constructor(n){super(n);this.root=null;this.appRef=Jh.default.createRef()}getViewType(){return qi}getDisplayText(){return"Hermes voice assistant"}getIcon(){return"mic-vocal"}async onOpen(){let n=this.containerEl.children[1];n.empty();let i=n.createDiv({cls:"hermes-root obsidian"});this.root=(0,RC.createRoot)(i),await this.root.render((0,Kh.jsx)(Jh.default.StrictMode,{children:(0,Kh.jsx)(bC,{ref:this.appRef})}))}async onClose(){this.root&&(await this.root.unmount(),this.root=null)}startSession(){this.appRef.current&&this.appRef.current.startSession&&this.appRef.current.startSession()}stopSession(){this.appRef.current&&this.appRef.current.stopSession&&this.appRef.current.stopSession()}toggleSession(){this.appRef.current&&this.appRef.current.toggleSession&&this.appRef.current.toggleSession()}};mt();var gn=require("obsidian");var qF=["Kore","Puck","Charon","Fenrir","Zephyr"],ma={voiceName:"Zephyr",customContext:"",systemInstruction:"",manualApiKey:"",serperApiKey:"",chatHistoryFolder:"chat-history"},bc=class extends gn.PluginSettingTab{constructor(n,i){super(n,i);this.plugin=i}display(){let{containerEl:n}=this;n.empty(),n.classList.add("hermes-settings"),new gn.Setting(n).setName("Voice").setDesc("Select the voice persona for the assistant").addDropdown(d=>{qF.forEach(p=>{d.addOption(p,p)}),d.setValue(this.plugin.settings?.voiceName||ma.voiceName).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.voiceName=p,await this.plugin.saveSettings())})}),new gn.Setting(n).setName("Custom context").setDesc("Define specific behaviors or rules for the assistant (added to every session)").addTextArea(d=>{d.setPlaceholder("Define specific behaviors, personalities, or rules for the ai...").setValue(this.plugin.settings?.customContext||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.customContext=p,await this.plugin.saveSettings())}),d.inputEl.rows=4,d.inputEl.cols=50});let i=document.createDocumentFragment();i.createSpan({text:"Core logic instructions for the ai assistant"}),i.createEl("br");let o=i.createEl("a",{text:"Reset to default"});o.addClass("hermes-reset-link"),o.addEventListener("click",()=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=oi,this.plugin.saveSettings().then(()=>{this.display()}))}),new gn.Setting(n).setName("System instructions").setDesc(i).addTextArea(d=>{d.setPlaceholder("Core logic instructions...").setValue(this.plugin.settings?.systemInstruction||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=p,await this.plugin.saveSettings())}),d.inputEl.rows=6,d.inputEl.cols=50}),new gn.Setting(n).setName("Chat history folder").setDesc("Folder path where chat history will be saved").addText(d=>{d.setPlaceholder("chat-history").setValue(this.plugin.settings?.chatHistoryFolder||ma.chatHistoryFolder).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.chatHistoryFolder=p,await this.plugin.saveSettings())})}),new gn.Setting(n).setName("Api authentication").setHeading(),new gn.Setting(n).setName("Gemini api key").setDesc("Enter your gemini api key for the voice assistant").addText(d=>{d.setPlaceholder("Enter your gemini api key...").setValue(this.plugin.settings?.manualApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.manualApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let r=document.createDocumentFragment();r.createSpan({text:"Api key for image search. Get 2,500 free credits at "}),r.createEl("a",{href:"https://serper.dev/",text:"serper.dev"}).setAttr("target","_blank"),new gn.Setting(n).setName("Serper api key").setDesc(r).addText(d=>{d.setPlaceholder("Enter your serper api key...").setValue(this.plugin.settings?.serperApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.serperApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let a=document.createDocumentFragment(),l=a.createSpan({text:"Api keys are handled via manual entry. "}),c=a.createEl("a",{href:"https://ai.google.dev/gemini-api/docs/billing",text:"Learn more about billing."});c.setAttr("target","_blank"),l.append(c),new gn.Setting(n).setDesc(a)}};var Nc=class extends IC.Plugin{constructor(){super(...arguments);this.settings=ma}async onload(){gT(this),await this.loadSettings();let n=await vT();n?(this.settings={...this.settings,...n},(!this.settings.systemInstruction||this.settings.systemInstruction.trim()==="")&&(this.settings.systemInstruction=oi),await this.saveSettings()):(this.settings.systemInstruction=oi,await this.saveSettings()),this.addSettingTab(new bc(this.app,this)),this.registerView(qi,i=>new wc(i)),this.addRibbonIcon("mic-vocal","Hermes voice assistant",async()=>{await this.activateView()}),this.addCommand({id:"open-hermes-voice",name:"Open hermes assistant",callback:async()=>{await this.activateView()}}),this.addCommand({id:"start-hermes-conversation",name:"Start hermes conversation",callback:async()=>{await this.startConversation()}}),this.addCommand({id:"stop-hermes-conversation",name:"Stop hermes conversation",callback:async()=>{await this.stopConversation()}}),this.addCommand({id:"toggle-hermes-conversation",name:"Toggle hermes conversation",callback:async()=>{await this.toggleConversation()}})}async activateView(){let{workspace:n}=this.app,i=null,o=n.getLeavesOfType(qi);o.length>0?i=o[0]:(i=n.getRightLeaf(!1),i&&await i.setViewState({type:qi,active:!0})),i&&await n.revealLeaf(i)}async startConversation(){await this.activateView();let{workspace:n}=this.app,i=n.getLeavesOfType(qi);if(i.length>0){let r=i[0].view;if(r.startSession)r.startSession();else{let s=r.containerEl.querySelector('[data-action="start-session"]');s instanceof HTMLElement&&s.click()}}}async stopConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(qi);if(i.length>0){let r=i[0].view;if(r.stopSession)r.stopSession();else{let s=r.containerEl.querySelector('[data-action="stop-session"]');s instanceof HTMLElement&&s.click()}}}async toggleConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(qi);if(i.length>0){let r=i[0].view;r.toggleSession?r.toggleSession():r.containerEl.querySelector('[data-action="stop-session"]')instanceof HTMLElement?await this.stopConversation():await this.startConversation()}}onunload(){}async loadSettings(){this.settings=Object.assign({},ma,await this.loadData())}async saveSettings(){await Xl(this.settings),typeof window<"u"&&window.hermesSettingsUpdate&&window.hermesSettingsUpdate(this.settings)}};
/*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT */
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
