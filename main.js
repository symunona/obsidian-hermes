var w_=Object.create;var Xr=Object.defineProperty;var b_=Object.getOwnPropertyDescriptor;var N_=Object.getOwnPropertyNames;var R_=Object.getPrototypeOf,I_=Object.prototype.hasOwnProperty;var M_=(e,t,n)=>t in e?Xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Io=(e,t)=>()=>(e&&(t=e(e=0)),t);var vn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ae=(e,t)=>{for(var n in t)Xr(e,n,{get:t[n],enumerable:!0})},Iy=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of N_(t))!I_.call(e,o)&&o!==n&&Xr(e,o,{get:()=>t[o],enumerable:!(i=b_(t,o))||i.enumerable});return e};var K=(e,t,n)=>(n=e!=null?w_(R_(e)):{},Iy(t||!e||!e.__esModule?Xr(n,"default",{value:e,enumerable:!0}):n,e)),k_=e=>Iy(Xr({},"__esModule",{value:!0}),e);var cf=(e,t,n)=>(M_(e,typeof t!="symbol"?t+"":t,n),n);var qy=vn(X=>{"use strict";var pf=Symbol.for("react.transitional.element"),D_=Symbol.for("react.portal"),U_=Symbol.for("react.fragment"),P_=Symbol.for("react.strict_mode"),L_=Symbol.for("react.profiler"),F_=Symbol.for("react.consumer"),O_=Symbol.for("react.context"),H_=Symbol.for("react.forward_ref"),G_=Symbol.for("react.suspense"),q_=Symbol.for("react.memo"),Py=Symbol.for("react.lazy"),B_=Symbol.for("react.activity"),My=Symbol.iterator;function V_(e){return e===null||typeof e!="object"?null:(e=My&&e[My]||e["@@iterator"],typeof e=="function"?e:null)}var Ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fy=Object.assign,Oy={};function ko(e,t,n){this.props=e,this.context=t,this.refs=Oy,this.updater=n||Ly}ko.prototype.isReactComponent={};ko.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ko.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hy(){}Hy.prototype=ko.prototype;function mf(e,t,n){this.props=e,this.context=t,this.refs=Oy,this.updater=n||Ly}var hf=mf.prototype=new Hy;hf.constructor=mf;Fy(hf,ko.prototype);hf.isPureReactComponent=!0;var ky=Array.isArray;function df(){}var Ae={H:null,A:null,T:null,S:null},Gy=Object.prototype.hasOwnProperty;function gf(e,t,n){var i=n.ref;return{$$typeof:pf,type:e,key:t,ref:i!==void 0?i:null,props:n}}function z_(e,t){return gf(e.type,t,e.props)}function yf(e){return typeof e=="object"&&e!==null&&e.$$typeof===pf}function $_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Dy=/\/+/g;function ff(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$_(""+e.key):t.toString(36)}function Y_(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(df,df):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Mo(e,t,n,i,o){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"bigint":case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case pf:case D_:s=!0;break;case Py:return s=e._init,Mo(s(e._payload),t,n,i,o)}}if(s)return o=o(e),s=i===""?"."+ff(e,0):i,ky(o)?(n="",s!=null&&(n=s.replace(Dy,"$&/")+"/"),Mo(o,t,n,"",function(c){return c})):o!=null&&(yf(o)&&(o=z_(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(Dy,"$&/")+"/")+s)),t.push(o)),1;s=0;var a=i===""?".":i+":";if(ky(e))for(var l=0;l<e.length;l++)i=e[l],r=a+ff(i,l),s+=Mo(i,t,n,r,o);else if(l=V_(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,r=a+ff(i,l++),s+=Mo(i,t,n,r,o);else if(r==="object"){if(typeof e.then=="function")return Mo(Y_(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function ba(e,t,n){if(e==null)return e;var i=[],o=0;return Mo(e,i,"","",function(r){return t.call(n,r,o++)}),i}function J_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Uy=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},K_={map:ba,forEach:function(e,t,n){ba(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ba(e,function(){t++}),t},toArray:function(e){return ba(e,function(t){return t})||[]},only:function(e){if(!yf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Activity=B_;X.Children=K_;X.Component=ko;X.Fragment=U_;X.Profiler=L_;X.PureComponent=mf;X.StrictMode=P_;X.Suspense=G_;X.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ae;X.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Ae.H.useMemoCache(e)}};X.cache=function(e){return function(){return e.apply(null,arguments)}};X.cacheSignal=function(){return null};X.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=Fy({},e.props),o=e.key;if(t!=null)for(r in t.key!==void 0&&(o=""+t.key),t)!Gy.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(i[r]=t[r]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var s=Array(r),a=0;a<r;a++)s[a]=arguments[a+2];i.children=s}return gf(e.type,o,i)};X.createContext=function(e){return e={$$typeof:O_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:F_,_context:e},e};X.createElement=function(e,t,n){var i,o={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)Gy.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];o.children=a}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)o[i]===void 0&&(o[i]=s[i]);return gf(e,r,o)};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:H_,render:e}};X.isValidElement=yf;X.lazy=function(e){return{$$typeof:Py,_payload:{_status:-1,_result:e},_init:J_}};X.memo=function(e,t){return{$$typeof:q_,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=Ae.T,n={};Ae.T=n;try{var i=e(),o=Ae.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(df,Uy)}catch(r){Uy(r)}finally{t!==null&&n.types!==null&&(t.types=n.types),Ae.T=t}};X.unstable_useCacheRefresh=function(){return Ae.H.useCacheRefresh()};X.use=function(e){return Ae.H.use(e)};X.useActionState=function(e,t,n){return Ae.H.useActionState(e,t,n)};X.useCallback=function(e,t){return Ae.H.useCallback(e,t)};X.useContext=function(e){return Ae.H.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e,t){return Ae.H.useDeferredValue(e,t)};X.useEffect=function(e,t){return Ae.H.useEffect(e,t)};X.useEffectEvent=function(e){return Ae.H.useEffectEvent(e)};X.useId=function(){return Ae.H.useId()};X.useImperativeHandle=function(e,t,n){return Ae.H.useImperativeHandle(e,t,n)};X.useInsertionEffect=function(e,t){return Ae.H.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return Ae.H.useLayoutEffect(e,t)};X.useMemo=function(e,t){return Ae.H.useMemo(e,t)};X.useOptimistic=function(e,t){return Ae.H.useOptimistic(e,t)};X.useReducer=function(e,t,n){return Ae.H.useReducer(e,t,n)};X.useRef=function(e){return Ae.H.useRef(e)};X.useState=function(e){return Ae.H.useState(e)};X.useSyncExternalStore=function(e,t,n){return Ae.H.useSyncExternalStore(e,t,n)};X.useTransition=function(){return Ae.H.useTransition()};X.version="19.2.3"});var Bt=vn((HO,By)=>{"use strict";By.exports=qy()});var Wy=vn(Ne=>{"use strict";function xf(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,o=e[i];if(0<Na(o,t))e[i]=t,e[n]=o,n=i;else break e}}function Sn(e){return e.length===0?null:e[0]}function Ia(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length,r=o>>>1;i<r;){var s=2*(i+1)-1,a=e[s],l=s+1,c=e[l];if(0>Na(a,n))l<o&&0>Na(c,a)?(e[i]=c,e[l]=n,i=l):(e[i]=a,e[s]=n,i=s);else if(l<o&&0>Na(c,n))e[i]=c,e[l]=n,i=l;else break e}}return t}function Na(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}Ne.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(Vy=performance,Ne.unstable_now=function(){return Vy.now()}):(vf=Date,zy=vf.now(),Ne.unstable_now=function(){return vf.now()-zy});var Vy,vf,zy,Fn=[],ui=[],X_=1,Vt=null,lt=3,Af=!1,Qr=!1,Zr=!1,Ef=!1,Jy=typeof setTimeout=="function"?setTimeout:null,Ky=typeof clearTimeout=="function"?clearTimeout:null,$y=typeof setImmediate<"u"?setImmediate:null;function Ra(e){for(var t=Sn(ui);t!==null;){if(t.callback===null)Ia(ui);else if(t.startTime<=e)Ia(ui),t.sortIndex=t.expirationTime,xf(Fn,t);else break;t=Sn(ui)}}function Cf(e){if(Zr=!1,Ra(e),!Qr)if(Sn(Fn)!==null)Qr=!0,Uo||(Uo=!0,Do());else{var t=Sn(ui);t!==null&&_f(Cf,t.startTime-e)}}var Uo=!1,Wr=-1,Xy=5,Qy=-1;function Zy(){return Ef?!0:!(Ne.unstable_now()-Qy<Xy)}function Sf(){if(Ef=!1,Uo){var e=Ne.unstable_now();Qy=e;var t=!0;try{e:{Qr=!1,Zr&&(Zr=!1,Ky(Wr),Wr=-1),Af=!0;var n=lt;try{t:{for(Ra(e),Vt=Sn(Fn);Vt!==null&&!(Vt.expirationTime>e&&Zy());){var i=Vt.callback;if(typeof i=="function"){Vt.callback=null,lt=Vt.priorityLevel;var o=i(Vt.expirationTime<=e);if(e=Ne.unstable_now(),typeof o=="function"){Vt.callback=o,Ra(e),t=!0;break t}Vt===Sn(Fn)&&Ia(Fn),Ra(e)}else Ia(Fn);Vt=Sn(Fn)}if(Vt!==null)t=!0;else{var r=Sn(ui);r!==null&&_f(Cf,r.startTime-e),t=!1}}break e}finally{Vt=null,lt=n,Af=!1}t=void 0}}finally{t?Do():Uo=!1}}}var Do;typeof $y=="function"?Do=function(){$y(Sf)}:typeof MessageChannel<"u"?(Tf=new MessageChannel,Yy=Tf.port2,Tf.port1.onmessage=Sf,Do=function(){Yy.postMessage(null)}):Do=function(){Jy(Sf,0)};var Tf,Yy;function _f(e,t){Wr=Jy(function(){e(Ne.unstable_now())},t)}Ne.unstable_IdlePriority=5;Ne.unstable_ImmediatePriority=1;Ne.unstable_LowPriority=4;Ne.unstable_NormalPriority=3;Ne.unstable_Profiling=null;Ne.unstable_UserBlockingPriority=2;Ne.unstable_cancelCallback=function(e){e.callback=null};Ne.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Xy=0<e?Math.floor(1e3/e):5};Ne.unstable_getCurrentPriorityLevel=function(){return lt};Ne.unstable_next=function(e){switch(lt){case 1:case 2:case 3:var t=3;break;default:t=lt}var n=lt;lt=t;try{return e()}finally{lt=n}};Ne.unstable_requestPaint=function(){Ef=!0};Ne.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=lt;lt=e;try{return t()}finally{lt=n}};Ne.unstable_scheduleCallback=function(e,t,n){var i=Ne.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?i+n:i):n=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=n+o,e={id:X_++,callback:t,priorityLevel:e,startTime:n,expirationTime:o,sortIndex:-1},n>i?(e.sortIndex=n,xf(ui,e),Sn(Fn)===null&&e===Sn(ui)&&(Zr?(Ky(Wr),Wr=-1):Zr=!0,_f(Cf,n-i))):(e.sortIndex=o,xf(Fn,e),Qr||Af||(Qr=!0,Uo||(Uo=!0,Do()))),e};Ne.unstable_shouldYield=Zy;Ne.unstable_wrapCallback=function(e){var t=lt;return function(){var n=lt;lt=t;try{return e.apply(this,arguments)}finally{lt=n}}}});var ev=vn((qO,jy)=>{"use strict";jy.exports=Wy()});var nv=vn(pt=>{"use strict";var Q_=Bt();function tv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ci(){}var dt={d:{f:ci,r:function(){throw Error(tv(522))},D:ci,C:ci,L:ci,m:ci,X:ci,S:ci,M:ci},p:0,findDOMNode:null},Z_=Symbol.for("react.portal");function W_(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z_,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var jr=Q_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ma(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=dt;pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(tv(299));return W_(e,t,null,n)};pt.flushSync=function(e){var t=jr.T,n=dt.p;try{if(jr.T=null,dt.p=2,e)return e()}finally{jr.T=t,dt.p=n,dt.d.f()}};pt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,dt.d.C(e,t))};pt.prefetchDNS=function(e){typeof e=="string"&&dt.d.D(e)};pt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Ma(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?dt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:r}):n==="script"&&dt.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};pt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Ma(t.as,t.crossOrigin);dt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&dt.d.M(e)};pt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Ma(n,t.crossOrigin);dt.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};pt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Ma(t.as,t.crossOrigin);dt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else dt.d.m(e)};pt.requestFormReset=function(e){dt.d.r(e)};pt.unstable_batchedUpdates=function(e,t){return e(t)};pt.useFormState=function(e,t,n){return jr.H.useFormState(e,t,n)};pt.useFormStatus=function(){return jr.H.useHostTransitionStatus()};pt.version="19.2.3"});var rv=vn((VO,ov)=>{"use strict";function iv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iv)}catch(e){console.error(e)}}iv(),ov.exports=nv()});var yx=vn(nu=>{"use strict";var ze=ev(),M0=Bt(),j_=rv();function b(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function k0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function D0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function U0(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sv(e){if(Hs(e)!==e)throw Error(b(188))}function ew(e){var t=e.alternate;if(!t){if(t=Hs(e),t===null)throw Error(b(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var r=o.alternate;if(r===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===n)return sv(o),e;if(r===i)return sv(o),t;r=r.sibling}throw Error(b(188))}if(n.return!==i.return)n=o,i=r;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,i=r;break}if(a===i){s=!0,i=o,n=r;break}a=a.sibling}if(!s){for(a=r.child;a;){if(a===n){s=!0,n=r,i=o;break}if(a===i){s=!0,i=r,n=o;break}a=a.sibling}if(!s)throw Error(b(189))}}if(n.alternate!==i)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?e:t}function P0(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=P0(e),t!==null)return t;e=e.sibling}return null}var _e=Object.assign,tw=Symbol.for("react.element"),ka=Symbol.for("react.transitional.element"),as=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),L0=Symbol.for("react.strict_mode"),rd=Symbol.for("react.profiler"),F0=Symbol.for("react.consumer"),$n=Symbol.for("react.context"),ep=Symbol.for("react.forward_ref"),sd=Symbol.for("react.suspense"),ad=Symbol.for("react.suspense_list"),tp=Symbol.for("react.memo"),fi=Symbol.for("react.lazy");Symbol.for("react.scope");var ld=Symbol.for("react.activity");Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var nw=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var av=Symbol.iterator;function es(e){return e===null||typeof e!="object"?null:(e=av&&e[av]||e["@@iterator"],typeof e=="function"?e:null)}var iw=Symbol.for("react.client.reference");function ud(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===iw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Go:return"Fragment";case rd:return"Profiler";case L0:return"StrictMode";case sd:return"Suspense";case ad:return"SuspenseList";case ld:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case as:return"Portal";case $n:return e.displayName||"Context";case F0:return(e._context.displayName||"Context")+".Consumer";case ep:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tp:return t=e.displayName||null,t!==null?t:ud(e.type)||"Memo";case fi:t=e._payload,e=e._init;try{return ud(e(t))}catch{}}return null}var ls=Array.isArray,z=M0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=j_.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Zi={pending:!1,data:null,method:null,action:null},cd=[],qo=-1;function Cn(e){return{current:e}}function We(e){0>qo||(e.current=cd[qo],cd[qo]=null,qo--)}function xe(e,t){qo++,cd[qo]=e.current,e.current=t}var En=Cn(null),_s=Cn(null),Ai=Cn(null),fl=Cn(null);function dl(e,t){switch(xe(Ai,t),xe(_s,e),xe(En,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?m0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=m0(t),e=ix(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}We(En),xe(En,e)}function rr(){We(En),We(_s),We(Ai)}function fd(e){e.memoizedState!==null&&xe(fl,e);var t=En.current,n=ix(t,e.type);t!==n&&(xe(_s,e),xe(En,n))}function pl(e){_s.current===e&&(We(En),We(_s)),fl.current===e&&(We(fl),Ls._currentValue=Zi)}var wf,lv;function Ji(e){if(wf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wf=t&&t[1]||"",lv=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wf+e+lv}var bf=!1;function Nf(e,t){if(!e||bf)return"";bf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(h){var m=h}Reflect.construct(e,[],p)}else{try{p.call()}catch(h){m=h}e.call(p.prototype)}}else{try{throw Error()}catch(h){m=h}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),s=r[0],a=r[1];if(s&&a){var l=s.split(`
`),c=a.split(`
`);for(o=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(i===l.length||o===c.length)for(i=l.length-1,o=c.length-1;1<=i&&0<=o&&l[i]!==c[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==c[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==c[o]){var d=`
`+l[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=o);break}}}finally{bf=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ji(n):""}function ow(e,t){switch(e.tag){case 26:case 27:case 5:return Ji(e.type);case 16:return Ji("Lazy");case 13:return e.child!==t&&t!==null?Ji("Suspense Fallback"):Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 15:return Nf(e.type,!1);case 11:return Nf(e.type.render,!1);case 1:return Nf(e.type,!0);case 31:return Ji("Activity");default:return""}}function uv(e){try{var t="",n=null;do t+=ow(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var dd=Object.prototype.hasOwnProperty,np=ze.unstable_scheduleCallback,Rf=ze.unstable_cancelCallback,rw=ze.unstable_shouldYield,sw=ze.unstable_requestPaint,Ut=ze.unstable_now,aw=ze.unstable_getCurrentPriorityLevel,O0=ze.unstable_ImmediatePriority,H0=ze.unstable_UserBlockingPriority,ml=ze.unstable_NormalPriority,lw=ze.unstable_LowPriority,G0=ze.unstable_IdlePriority,uw=ze.log,cw=ze.unstable_setDisableYieldValue,Gs=null,Pt=null;function yi(e){if(typeof uw=="function"&&cw(e),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Gs,e)}catch{}}var Lt=Math.clz32?Math.clz32:pw,fw=Math.log,dw=Math.LN2;function pw(e){return e>>>=0,e===0?32:31-(fw(e)/dw|0)|0}var Da=256,Ua=262144,Pa=4194304;function Ki(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Gl(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,r=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var a=i&134217727;return a!==0?(i=a&~r,i!==0?o=Ki(i):(s&=a,s!==0?o=Ki(s):n||(n=a&~e,n!==0&&(o=Ki(n))))):(a=i&~r,a!==0?o=Ki(a):s!==0?o=Ki(s):n||(n=i&~e,n!==0&&(o=Ki(n)))),o===0?0:t!==0&&t!==o&&(t&r)===0&&(r=o&-o,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:o}function qs(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function mw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q0(){var e=Pa;return Pa<<=1,(Pa&62914560)===0&&(Pa=4194304),e}function If(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bs(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function hw(e,t,n,i,o,r){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var d=31-Lt(n),p=1<<d;a[d]=0,l[d]=-1;var m=c[d];if(m!==null)for(c[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~p}i!==0&&B0(e,i,0),r!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=r&~(s&~t))}function B0(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Lt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function V0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Lt(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function z0(e,t){var n=t&-t;return n=(n&42)!==0?1:ip(n),(n&(e.suspendedLanes|t))!==0?0:n}function ip(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function op(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $0(){var e=ue.p;return e!==0?e:(e=window.event,e===void 0?32:mx(e.type))}function cv(e,t){var n=ue.p;try{return ue.p=e,t()}finally{ue.p=n}}var Pi=Math.random().toString(36).slice(2),nt="__reactFiber$"+Pi,Et="__reactProps$"+Pi,gr="__reactContainer$"+Pi,pd="__reactEvents$"+Pi,gw="__reactListeners$"+Pi,yw="__reactHandles$"+Pi,fv="__reactResources$"+Pi,Vs="__reactMarker$"+Pi;function rp(e){delete e[nt],delete e[Et],delete e[pd],delete e[gw],delete e[yw]}function Bo(e){var t=e[nt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gr]||n[nt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=S0(e);e!==null;){if(n=e[nt])return n;e=S0(e)}return t}e=n,n=e.parentNode}return null}function yr(e){if(e=e[nt]||e[gr]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function us(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(b(33))}function Wo(e){var t=e[fv];return t||(t=e[fv]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[Vs]=!0}var Y0=new Set,J0={};function ao(e,t){sr(e,t),sr(e+"Capture",t)}function sr(e,t){for(J0[e]=t,e=0;e<t.length;e++)Y0.add(t[e])}var vw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dv={},pv={};function Sw(e){return dd.call(pv,e)?!0:dd.call(dv,e)?!1:vw.test(e)?pv[e]=!0:(dv[e]=!0,!1)}function Qa(e,t,n){if(Sw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function La(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function On(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function $t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function K0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Tw(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,r=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){n=""+s,r.call(this,s)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function md(e){if(!e._valueTracker){var t=K0(e)?"checked":"value";e._valueTracker=Tw(e,t,""+e[t])}}function X0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=K0(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function hl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var xw=/[\n"\\]/g;function Kt(e){return e.replace(xw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function hd(e,t,n,i,o,r,s,a){e.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.type=s:e.removeAttribute("type"),t!=null?s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+$t(t)):e.value!==""+$t(t)&&(e.value=""+$t(t)):s!=="submit"&&s!=="reset"||e.removeAttribute("value"),t!=null?gd(e,s,$t(t)):n!=null?gd(e,s,$t(n)):i!=null&&e.removeAttribute("value"),o==null&&r!=null&&(e.defaultChecked=!!r),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+$t(a):e.removeAttribute("name")}function Q0(e,t,n,i,o,r,s,a){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){md(e);return}n=n!=null?""+$t(n):"",t=t!=null?""+$t(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.name=s),md(e)}function gd(e,t,n){t==="number"&&hl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function jo(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+$t(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Z0(e,t,n){if(t!=null&&(t=""+$t(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+$t(n):""}function W0(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(b(92));if(ls(i)){if(1<i.length)throw Error(b(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=$t(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),md(e)}function ar(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Aw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mv(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Aw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function j0(e,t,n){if(t!=null&&typeof t!="object")throw Error(b(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&mv(e,o,i)}else for(var r in t)t.hasOwnProperty(r)&&mv(e,r,t[r])}function sp(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ew=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Za(e){return Cw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Yn(){}var yd=null;function ap(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vo=null,er=null;function hv(e){var t=yr(e);if(t&&(e=t.stateNode)){var n=e[Et]||null;e:switch(e=t.stateNode,t.type){case"input":if(hd(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[Et]||null;if(!o)throw Error(b(90));hd(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&X0(i)}break e;case"textarea":Z0(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&jo(e,!!n.multiple,t,!1)}}}var Mf=!1;function eS(e,t,n){if(Mf)return e(t,n);Mf=!0;try{var i=e(t);return i}finally{if(Mf=!1,(Vo!==null||er!==null)&&(Wl(),Vo&&(t=Vo,e=er,er=Vo=null,hv(t),e)))for(t=0;t<e.length;t++)hv(e[t])}}function ws(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Et]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(b(231,t,typeof n));return n}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vd=!1;if(Zn)try{Po={},Object.defineProperty(Po,"passive",{get:function(){vd=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{vd=!1}var Po,vi=null,lp=null,Wa=null;function tS(){if(Wa)return Wa;var e,t=lp,n=t.length,i,o="value"in vi?vi.value:vi.textContent,r=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(i=1;i<=s&&t[n-i]===o[r-i];i++);return Wa=o.slice(e,1<i?1-i:void 0)}function ja(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fa(){return!0}function gv(){return!1}function Ct(e){function t(n,i,o,r,s){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=r,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Fa:gv,this.isPropagationStopped=gv,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),t}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=Ct(lo),zs=_e({},lo,{view:0,detail:0}),_w=Ct(zs),kf,Df,ts,Bl=_e({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ts&&(ts&&e.type==="mousemove"?(kf=e.screenX-ts.screenX,Df=e.screenY-ts.screenY):Df=kf=0,ts=e),kf)},movementY:function(e){return"movementY"in e?e.movementY:Df}}),yv=Ct(Bl),ww=_e({},Bl,{dataTransfer:0}),bw=Ct(ww),Nw=_e({},zs,{relatedTarget:0}),Uf=Ct(Nw),Rw=_e({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),Iw=Ct(Rw),Mw=_e({},lo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kw=Ct(Mw),Dw=_e({},lo,{data:0}),vv=Ct(Dw),Uw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lw[e])?!!t[e]:!1}function up(){return Fw}var Ow=_e({},zs,{key:function(e){if(e.key){var t=Uw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ja(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(e){return e.type==="keypress"?ja(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ja(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hw=Ct(Ow),Gw=_e({},Bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sv=Ct(Gw),qw=_e({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),Bw=Ct(qw),Vw=_e({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),zw=Ct(Vw),$w=_e({},Bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yw=Ct($w),Jw=_e({},lo,{newState:0,oldState:0}),Kw=Ct(Jw),Xw=[9,13,27,32],cp=Zn&&"CompositionEvent"in window,ds=null;Zn&&"documentMode"in document&&(ds=document.documentMode);var Qw=Zn&&"TextEvent"in window&&!ds,nS=Zn&&(!cp||ds&&8<ds&&11>=ds),Tv=String.fromCharCode(32),xv=!1;function iS(e,t){switch(e){case"keyup":return Xw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zo=!1;function Zw(e,t){switch(e){case"compositionend":return oS(t);case"keypress":return t.which!==32?null:(xv=!0,Tv);case"textInput":return e=t.data,e===Tv&&xv?null:e;default:return null}}function Ww(e,t){if(zo)return e==="compositionend"||!cp&&iS(e,t)?(e=tS(),Wa=lp=vi=null,zo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nS&&t.locale!=="ko"?null:t.data;default:return null}}var jw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Av(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jw[e.type]:t==="textarea"}function rS(e,t,n,i){Vo?er?er.push(i):er=[i]:Vo=i,t=Dl(t,"onChange"),0<t.length&&(n=new ql("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ps=null,bs=null;function eb(e){ex(e,0)}function Vl(e){var t=us(e);if(X0(t))return e}function Ev(e,t){if(e==="change")return t}var sS=!1;Zn&&(Zn?(Ha="oninput"in document,Ha||(Pf=document.createElement("div"),Pf.setAttribute("oninput","return;"),Ha=typeof Pf.oninput=="function"),Oa=Ha):Oa=!1,sS=Oa&&(!document.documentMode||9<document.documentMode));var Oa,Ha,Pf;function Cv(){ps&&(ps.detachEvent("onpropertychange",aS),bs=ps=null)}function aS(e){if(e.propertyName==="value"&&Vl(bs)){var t=[];rS(t,bs,e,ap(e)),eS(eb,t)}}function tb(e,t,n){e==="focusin"?(Cv(),ps=t,bs=n,ps.attachEvent("onpropertychange",aS)):e==="focusout"&&Cv()}function nb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vl(bs)}function ib(e,t){if(e==="click")return Vl(t)}function ob(e,t){if(e==="input"||e==="change")return Vl(t)}function rb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ot=typeof Object.is=="function"?Object.is:rb;function Ns(e,t){if(Ot(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!dd.call(t,o)||!Ot(e[o],t[o]))return!1}return!0}function _v(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wv(e,t){var n=_v(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_v(n)}}function lS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uS(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=hl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hl(e.document)}return t}function fp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var sb=Zn&&"documentMode"in document&&11>=document.documentMode,$o=null,Sd=null,ms=null,Td=!1;function bv(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||$o==null||$o!==hl(i)||(i=$o,"selectionStart"in i&&fp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ms&&Ns(ms,i)||(ms=i,i=Dl(Sd,"onSelect"),0<i.length&&(t=new ql("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=$o)))}function Yi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yo={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionrun:Yi("Transition","TransitionRun"),transitionstart:Yi("Transition","TransitionStart"),transitioncancel:Yi("Transition","TransitionCancel"),transitionend:Yi("Transition","TransitionEnd")},Lf={},cS={};Zn&&(cS=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function uo(e){if(Lf[e])return Lf[e];if(!Yo[e])return e;var t=Yo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cS)return Lf[e]=t[n];return e}var fS=uo("animationend"),dS=uo("animationiteration"),pS=uo("animationstart"),ab=uo("transitionrun"),lb=uo("transitionstart"),ub=uo("transitioncancel"),mS=uo("transitionend"),hS=new Map,xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xd.push("scrollEnd");function ln(e,t){hS.set(e,t),ao(t,[e])}var gl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},zt=[],Jo=0,dp=0;function zl(){for(var e=Jo,t=dp=Jo=0;t<e;){var n=zt[t];zt[t++]=null;var i=zt[t];zt[t++]=null;var o=zt[t];zt[t++]=null;var r=zt[t];if(zt[t++]=null,i!==null&&o!==null){var s=i.pending;s===null?o.next=o:(o.next=s.next,s.next=o),i.pending=o}r!==0&&gS(n,o,r)}}function $l(e,t,n,i){zt[Jo++]=e,zt[Jo++]=t,zt[Jo++]=n,zt[Jo++]=i,dp|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function pp(e,t,n,i){return $l(e,t,n,i),yl(e)}function co(e,t){return $l(e,null,null,t),yl(e)}function gS(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(o=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,o&&t!==null&&(o=31-Lt(n),e=r.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),r):null}function yl(e){if(50<Es)throw Es=0,Bd=null,Error(b(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ko={};function cb(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,n,i){return new cb(e,t,n,i)}function mp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Kn(e,t){var n=e.alternate;return n===null?(n=kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function yS(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function el(e,t,n,i,o,r){var s=0;if(i=e,typeof e=="function")mp(e)&&(s=1);else if(typeof e=="string")s=pN(e,n,En.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ld:return e=kt(31,n,t,o),e.elementType=ld,e.lanes=r,e;case Go:return Wi(n.children,o,r,t);case L0:s=8,o|=24;break;case rd:return e=kt(12,n,t,o|2),e.elementType=rd,e.lanes=r,e;case sd:return e=kt(13,n,t,o),e.elementType=sd,e.lanes=r,e;case ad:return e=kt(19,n,t,o),e.elementType=ad,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $n:s=10;break e;case F0:s=9;break e;case ep:s=11;break e;case tp:s=14;break e;case fi:s=16,i=null;break e}s=29,n=Error(b(130,e===null?"null":typeof e,"")),i=null}return t=kt(s,n,t,o),t.elementType=e,t.type=i,t.lanes=r,t}function Wi(e,t,n,i){return e=kt(7,e,i,t),e.lanes=n,e}function Ff(e,t,n){return e=kt(6,e,null,t),e.lanes=n,e}function vS(e){var t=kt(18,null,null,0);return t.stateNode=e,t}function Of(e,t,n){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Nv=new WeakMap;function Xt(e,t){if(typeof e=="object"&&e!==null){var n=Nv.get(e);return n!==void 0?n:(t={value:e,source:t,stack:uv(t)},Nv.set(e,t),t)}return{value:e,source:t,stack:uv(t)}}var Xo=[],Qo=0,vl=null,Rs=0,Yt=[],Jt=0,Mi=null,Tn=1,xn="";function Vn(e,t){Xo[Qo++]=Rs,Xo[Qo++]=vl,vl=e,Rs=t}function SS(e,t,n){Yt[Jt++]=Tn,Yt[Jt++]=xn,Yt[Jt++]=Mi,Mi=e;var i=Tn;e=xn;var o=32-Lt(i)-1;i&=~(1<<o),n+=1;var r=32-Lt(t)+o;if(30<r){var s=o-o%5;r=(i&(1<<s)-1).toString(32),i>>=s,o-=s,Tn=1<<32-Lt(t)+o|n<<o|i,xn=r+e}else Tn=1<<r|n<<o|i,xn=e}function hp(e){e.return!==null&&(Vn(e,1),SS(e,1,0))}function gp(e){for(;e===vl;)vl=Xo[--Qo],Xo[Qo]=null,Rs=Xo[--Qo],Xo[Qo]=null;for(;e===Mi;)Mi=Yt[--Jt],Yt[Jt]=null,xn=Yt[--Jt],Yt[Jt]=null,Tn=Yt[--Jt],Yt[Jt]=null}function TS(e,t){Yt[Jt++]=Tn,Yt[Jt++]=xn,Yt[Jt++]=Mi,Tn=t.id,xn=t.overflow,Mi=e}var it=null,Ce=null,te=!1,Ei=null,Qt=!1,Ad=Error(b(519));function ki(e){var t=Error(b(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Is(Xt(t,e)),Ad}function Rv(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[nt]=e,t[Et]=i,n){case"dialog":Z("cancel",t),Z("close",t);break;case"iframe":case"object":case"embed":Z("load",t);break;case"video":case"audio":for(n=0;n<Us.length;n++)Z(Us[n],t);break;case"source":Z("error",t);break;case"img":case"image":case"link":Z("error",t),Z("load",t);break;case"details":Z("toggle",t);break;case"input":Z("invalid",t),Q0(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Z("invalid",t);break;case"textarea":Z("invalid",t),W0(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||nx(t.textContent,n)?(i.popover!=null&&(Z("beforetoggle",t),Z("toggle",t)),i.onScroll!=null&&Z("scroll",t),i.onScrollEnd!=null&&Z("scrollend",t),i.onClick!=null&&(t.onclick=Yn),t=!0):t=!1,t||ki(e,!0)}function Iv(e){for(it=e.return;it;)switch(it.tag){case 5:case 31:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:it=it.return}}function Lo(e){if(e!==it)return!1;if(!te)return Iv(e),te=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Jd(e.type,e.memoizedProps)),n=!n),n&&Ce&&ki(e),Iv(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));Ce=v0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));Ce=v0(e)}else t===27?(t=Ce,Li(e.type)?(e=Zd,Zd=null,Ce=e):Ce=t):Ce=it?Wt(e.stateNode.nextSibling):null;return!0}function no(){Ce=it=null,te=!1}function Hf(){var e=Ei;return e!==null&&(xt===null?xt=e:xt.push.apply(xt,e),Ei=null),e}function Is(e){Ei===null?Ei=[e]:Ei.push(e)}var Ed=Cn(null),fo=null,Jn=null;function pi(e,t,n){xe(Ed,t._currentValue),t._currentValue=n}function Xn(e){e._currentValue=Ed.current,We(Ed)}function Cd(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function _d(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var r=o.dependencies;if(r!==null){var s=o.child;r=r.firstContext;e:for(;r!==null;){var a=r;r=o;for(var l=0;l<t.length;l++)if(a.context===t[l]){r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),Cd(r.return,n,e),i||(s=null);break e}r=a.next}}else if(o.tag===18){if(s=o.return,s===null)throw Error(b(341));s.lanes|=n,r=s.alternate,r!==null&&(r.lanes|=n),Cd(s,n,e),s=null}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}}function vr(e,t,n,i){e=null;for(var o=t,r=!1;o!==null;){if(!r){if((o.flags&524288)!==0)r=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var s=o.alternate;if(s===null)throw Error(b(387));if(s=s.memoizedProps,s!==null){var a=o.type;Ot(o.pendingProps.value,s.value)||(e!==null?e.push(a):e=[a])}}else if(o===fl.current){if(s=o.alternate,s===null)throw Error(b(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Ls):e=[Ls])}o=o.return}e!==null&&_d(t,e,n,i),t.flags|=262144}function Sl(e){for(e=e.firstContext;e!==null;){if(!Ot(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function io(e){fo=e,Jn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ot(e){return xS(fo,e)}function Ga(e,t){return fo===null&&io(e),xS(e,t)}function xS(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Jn===null){if(e===null)throw Error(b(308));Jn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Jn=Jn.next=t;return n}var fb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},db=ze.unstable_scheduleCallback,pb=ze.unstable_NormalPriority,Oe={$$typeof:$n,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yp(){return{controller:new fb,data:new Map,refCount:0}}function $s(e){e.refCount--,e.refCount===0&&db(pb,function(){e.controller.abort()})}var hs=null,wd=0,lr=0,tr=null;function mb(e,t){if(hs===null){var n=hs=[];wd=0,lr=Bp(),tr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return wd++,t.then(Mv,Mv),t}function Mv(){if(--wd===0&&hs!==null){tr!==null&&(tr.status="fulfilled");var e=hs;hs=null,lr=0,tr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function hb(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var kv=z.S;z.S=function(e,t){PT=Ut(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&mb(e,t),kv!==null&&kv(e,t)};var ji=Cn(null);function vp(){var e=ji.current;return e!==null?e:Se.pooledCache}function tl(e,t){t===null?xe(ji,ji.current):xe(ji,t.pool)}function AS(){var e=vp();return e===null?null:{parent:Oe._currentValue,pool:e}}var Sr=Error(b(460)),Sp=Error(b(474)),Yl=Error(b(542)),Tl={then:function(){}};function Dv(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ES(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Yn,Yn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pv(e),e;default:if(typeof t.status=="string")t.then(Yn,Yn);else{if(e=Se,e!==null&&100<e.shellSuspendCounter)throw Error(b(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pv(e),e}throw eo=t,Sr}}function Xi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(eo=n,Sr):n}}var eo=null;function Uv(){if(eo===null)throw Error(b(459));var e=eo;return eo=null,e}function Pv(e){if(e===Sr||e===Yl)throw Error(b(483))}var nr=null,Ms=0;function qa(e){var t=Ms;return Ms+=1,nr===null&&(nr=[]),ES(nr,e,t)}function ns(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ba(e,t){throw t.$$typeof===tw?Error(b(525)):(e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function CS(e){function t(y,v){if(e){var T=y.deletions;T===null?(y.deletions=[v],y.flags|=16):T.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function i(y){for(var v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function o(y,v){return y=Kn(y,v),y.index=0,y.sibling=null,y}function r(y,v,T){return y.index=T,e?(T=y.alternate,T!==null?(T=T.index,T<v?(y.flags|=67108866,v):T):(y.flags|=67108866,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function a(y,v,T,A){return v===null||v.tag!==6?(v=Ff(T,y.mode,A),v.return=y,v):(v=o(v,T),v.return=y,v)}function l(y,v,T,A){var C=T.type;return C===Go?d(y,v,T.props.children,A,T.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fi&&Xi(C)===v.type)?(v=o(v,T.props),ns(v,T),v.return=y,v):(v=el(T.type,T.key,T.props,null,y.mode,A),ns(v,T),v.return=y,v)}function c(y,v,T,A){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=Of(T,y.mode,A),v.return=y,v):(v=o(v,T.children||[]),v.return=y,v)}function d(y,v,T,A,C){return v===null||v.tag!==7?(v=Wi(T,y.mode,A,C),v.return=y,v):(v=o(v,T),v.return=y,v)}function p(y,v,T){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Ff(""+v,y.mode,T),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ka:return T=el(v.type,v.key,v.props,null,y.mode,T),ns(T,v),T.return=y,T;case as:return v=Of(v,y.mode,T),v.return=y,v;case fi:return v=Xi(v),p(y,v,T)}if(ls(v)||es(v))return v=Wi(v,y.mode,T,null),v.return=y,v;if(typeof v.then=="function")return p(y,qa(v),T);if(v.$$typeof===$n)return p(y,Ga(y,v),T);Ba(y,v)}return null}function m(y,v,T,A){var C=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return C!==null?null:a(y,v,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ka:return T.key===C?l(y,v,T,A):null;case as:return T.key===C?c(y,v,T,A):null;case fi:return T=Xi(T),m(y,v,T,A)}if(ls(T)||es(T))return C!==null?null:d(y,v,T,A,null);if(typeof T.then=="function")return m(y,v,qa(T),A);if(T.$$typeof===$n)return m(y,v,Ga(y,T),A);Ba(y,T)}return null}function h(y,v,T,A,C){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return y=y.get(T)||null,a(v,y,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ka:return y=y.get(A.key===null?T:A.key)||null,l(v,y,A,C);case as:return y=y.get(A.key===null?T:A.key)||null,c(v,y,A,C);case fi:return A=Xi(A),h(y,v,T,A,C)}if(ls(A)||es(A))return y=y.get(T)||null,d(v,y,A,C,null);if(typeof A.then=="function")return h(y,v,T,qa(A),C);if(A.$$typeof===$n)return h(y,v,T,Ga(v,A),C);Ba(v,A)}return null}function g(y,v,T,A){for(var C=null,I=null,_=v,M=v=0,R=null;_!==null&&M<T.length;M++){_.index>M?(R=_,_=null):R=_.sibling;var N=m(y,_,T[M],A);if(N===null){_===null&&(_=R);break}e&&_&&N.alternate===null&&t(y,_),v=r(N,v,M),I===null?C=N:I.sibling=N,I=N,_=R}if(M===T.length)return n(y,_),te&&Vn(y,M),C;if(_===null){for(;M<T.length;M++)_=p(y,T[M],A),_!==null&&(v=r(_,v,M),I===null?C=_:I.sibling=_,I=_);return te&&Vn(y,M),C}for(_=i(_);M<T.length;M++)R=h(_,y,M,T[M],A),R!==null&&(e&&R.alternate!==null&&_.delete(R.key===null?M:R.key),v=r(R,v,M),I===null?C=R:I.sibling=R,I=R);return e&&_.forEach(function($){return t(y,$)}),te&&Vn(y,M),C}function S(y,v,T,A){if(T==null)throw Error(b(151));for(var C=null,I=null,_=v,M=v=0,R=null,N=T.next();_!==null&&!N.done;M++,N=T.next()){_.index>M?(R=_,_=null):R=_.sibling;var $=m(y,_,N.value,A);if($===null){_===null&&(_=R);break}e&&_&&$.alternate===null&&t(y,_),v=r($,v,M),I===null?C=$:I.sibling=$,I=$,_=R}if(N.done)return n(y,_),te&&Vn(y,M),C;if(_===null){for(;!N.done;M++,N=T.next())N=p(y,N.value,A),N!==null&&(v=r(N,v,M),I===null?C=N:I.sibling=N,I=N);return te&&Vn(y,M),C}for(_=i(_);!N.done;M++,N=T.next())N=h(_,y,M,N.value,A),N!==null&&(e&&N.alternate!==null&&_.delete(N.key===null?M:N.key),v=r(N,v,M),I===null?C=N:I.sibling=N,I=N);return e&&_.forEach(function(Te){return t(y,Te)}),te&&Vn(y,M),C}function x(y,v,T,A){if(typeof T=="object"&&T!==null&&T.type===Go&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ka:e:{for(var C=T.key;v!==null;){if(v.key===C){if(C=T.type,C===Go){if(v.tag===7){n(y,v.sibling),A=o(v,T.props.children),A.return=y,y=A;break e}}else if(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===fi&&Xi(C)===v.type){n(y,v.sibling),A=o(v,T.props),ns(A,T),A.return=y,y=A;break e}n(y,v);break}else t(y,v);v=v.sibling}T.type===Go?(A=Wi(T.props.children,y.mode,A,T.key),A.return=y,y=A):(A=el(T.type,T.key,T.props,null,y.mode,A),ns(A,T),A.return=y,y=A)}return s(y);case as:e:{for(C=T.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(y,v.sibling),A=o(v,T.children||[]),A.return=y,y=A;break e}else{n(y,v);break}else t(y,v);v=v.sibling}A=Of(T,y.mode,A),A.return=y,y=A}return s(y);case fi:return T=Xi(T),x(y,v,T,A)}if(ls(T))return g(y,v,T,A);if(es(T)){if(C=es(T),typeof C!="function")throw Error(b(150));return T=C.call(T),S(y,v,T,A)}if(typeof T.then=="function")return x(y,v,qa(T),A);if(T.$$typeof===$n)return x(y,v,Ga(y,T),A);Ba(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,v!==null&&v.tag===6?(n(y,v.sibling),A=o(v,T),A.return=y,y=A):(n(y,v),A=Ff(T,y.mode,A),A.return=y,y=A),s(y)):n(y,v)}return function(y,v,T,A){try{Ms=0;var C=x(y,v,T,A);return nr=null,C}catch(_){if(_===Sr||_===Yl)throw _;var I=kt(29,_,null,y.mode);return I.lanes=A,I.return=y,I}finally{}}}var oo=CS(!0),_S=CS(!1),di=!1;function Tp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ci(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _i(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(le&2)!==0){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=yl(e),gS(e,null,n),t}return $l(e,i,t,n),yl(e)}function gs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,V0(e,n)}}function Gf(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?o=r=s:r=r.next=s,n=n.next}while(n!==null);r===null?o=r=t:r=r.next=t}else o=r=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Nd=!1;function ys(){if(Nd){var e=tr;if(e!==null)throw e}}function vs(e,t,n,i){Nd=!1;var o=e.updateQueue;di=!1;var r=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?r=c:s.next=c,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(r!==null){var p=o.baseState;s=0,d=c=l=null,a=r;do{var m=a.lane&-536870913,h=m!==a.lane;if(h?(j&m)===m:(i&m)===m){m!==0&&m===lr&&(Nd=!0),d!==null&&(d=d.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,S=a;m=t;var x=n;switch(S.tag){case 1:if(g=S.payload,typeof g=="function"){p=g.call(x,p,m);break e}p=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=S.payload,m=typeof g=="function"?g.call(x,p,m):g,m==null)break e;p=_e({},p,m);break e;case 2:di=!0}}m=a.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=o.callbacks,h===null?o.callbacks=[m]:h.push(m))}else h={lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=h,l=p):d=d.next=h,s|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);d===null&&(l=p),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,r===null&&(o.shared.lanes=0),Ui|=s,e.lanes=s,e.memoizedState=p}}function wS(e,t){if(typeof e!="function")throw Error(b(191,e));e.call(t)}function bS(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)wS(n[e],t)}var ur=Cn(null),xl=Cn(0);function Lv(e,t){e=ti,xe(xl,e),xe(ur,t),ti=e|t.baseLanes}function Rd(){xe(xl,ti),xe(ur,ur.current)}function xp(){ti=xl.current,We(ur),We(xl)}var Ht=Cn(null),Zt=null;function mi(e){var t=e.alternate;xe(Ue,Ue.current&1),xe(Ht,e),Zt===null&&(t===null||ur.current!==null||t.memoizedState!==null)&&(Zt=e)}function Id(e){xe(Ue,Ue.current),xe(Ht,e),Zt===null&&(Zt=e)}function NS(e){e.tag===22?(xe(Ue,Ue.current),xe(Ht,e),Zt===null&&(Zt=e)):hi(e)}function hi(){xe(Ue,Ue.current),xe(Ht,Ht.current)}function Mt(e){We(Ht),Zt===e&&(Zt=null),We(Ue)}var Ue=Cn(0);function Al(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Xd(n)||Qd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wn=0,Q=null,ye=null,Le=null,El=!1,ir=!1,ro=!1,Cl=0,ks=0,or=null,gb=0;function Me(){throw Error(b(321))}function Ap(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ot(e[n],t[n]))return!1;return!0}function Ep(e,t,n,i,o,r){return Wn=r,Q=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=e===null||e.memoizedState===null?rT:Up,ro=!1,r=n(i,o),ro=!1,ir&&(r=IS(t,n,i,o)),RS(e),r}function RS(e){z.H=Ds;var t=ye!==null&&ye.next!==null;if(Wn=0,Le=ye=Q=null,El=!1,ks=0,or=null,t)throw Error(b(300));e===null||He||(e=e.dependencies,e!==null&&Sl(e)&&(He=!0))}function IS(e,t,n,i){Q=e;var o=0;do{if(ir&&(or=null),ks=0,ir=!1,25<=o)throw Error(b(301));if(o+=1,Le=ye=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}z.H=sT,r=t(n,i)}while(ir);return r}function yb(){var e=z.H,t=e.useState()[0];return t=typeof t.then=="function"?Ys(t):t,e=e.useState()[0],(ye!==null?ye.memoizedState:null)!==e&&(Q.flags|=1024),t}function Cp(){var e=Cl!==0;return Cl=0,e}function _p(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function wp(e){if(El){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}El=!1}Wn=0,Le=ye=Q=null,ir=!1,ks=Cl=0,or=null}function mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Q.memoizedState=Le=e:Le=Le.next=e,Le}function Pe(){if(ye===null){var e=Q.alternate;e=e!==null?e.memoizedState:null}else e=ye.next;var t=Le===null?Q.memoizedState:Le.next;if(t!==null)Le=t,ye=e;else{if(e===null)throw Q.alternate===null?Error(b(467)):Error(b(310));ye=e,e={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Le===null?Q.memoizedState=Le=e:Le=Le.next=e}return Le}function Jl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ys(e){var t=ks;return ks+=1,or===null&&(or=[]),e=ES(or,e,t),t=Q,(Le===null?t.memoizedState:Le.next)===null&&(t=t.alternate,z.H=t===null||t.memoizedState===null?rT:Up),e}function Kl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ys(e);if(e.$$typeof===$n)return ot(e)}throw Error(b(438,String(e)))}function bp(e){var t=null,n=Q.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Q.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Jl(),Q.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=nw;return t.index++,n}function jn(e,t){return typeof t=="function"?t(e):t}function nl(e){var t=Pe();return Np(t,ye,e)}function Np(e,t,n){var i=e.queue;if(i===null)throw Error(b(311));i.lastRenderedReducer=n;var o=e.baseQueue,r=i.pending;if(r!==null){if(o!==null){var s=o.next;o.next=r.next,r.next=s}t.baseQueue=o=r,i.pending=null}if(r=e.baseState,o===null)e.memoizedState=r;else{t=o.next;var a=s=null,l=null,c=t,d=!1;do{var p=c.lane&-536870913;if(p!==c.lane?(j&p)===p:(Wn&p)===p){var m=c.revertLane;if(m===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===lr&&(d=!0);else if((Wn&m)===m){c=c.next,m===lr&&(d=!0);continue}else p={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=p,s=r):l=l.next=p,Q.lanes|=m,Ui|=m;p=c.action,ro&&n(r,p),r=c.hasEagerState?c.eagerState:n(r,p)}else m={lane:p,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=m,s=r):l=l.next=m,Q.lanes|=p,Ui|=p;c=c.next}while(c!==null&&c!==t);if(l===null?s=r:l.next=a,!Ot(r,e.memoizedState)&&(He=!0,d&&(n=tr,n!==null)))throw n;e.memoizedState=r,e.baseState=s,e.baseQueue=l,i.lastRenderedState=r}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function qf(e){var t=Pe(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,r=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do r=e(r,s.action),s=s.next;while(s!==o);Ot(r,t.memoizedState)||(He=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function MS(e,t,n){var i=Q,o=Pe(),r=te;if(r){if(n===void 0)throw Error(b(407));n=n()}else n=t();var s=!Ot((ye||o).memoizedState,n);if(s&&(o.memoizedState=n,He=!0),o=o.queue,Rp(US.bind(null,i,o,e),[e]),o.getSnapshot!==t||s||Le!==null&&Le.memoizedState.tag&1){if(i.flags|=2048,cr(9,{destroy:void 0},DS.bind(null,i,o,n,t),null),Se===null)throw Error(b(349));r||(Wn&127)!==0||kS(i,t,n)}return n}function kS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Q.updateQueue,t===null?(t=Jl(),Q.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function DS(e,t,n,i){t.value=n,t.getSnapshot=i,PS(t)&&LS(e)}function US(e,t,n){return n(function(){PS(t)&&LS(e)})}function PS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ot(e,n)}catch{return!0}}function LS(e){var t=co(e,2);t!==null&&At(t,e,2)}function Md(e){var t=mt();if(typeof e=="function"){var n=e;if(e=n(),ro){yi(!0);try{n()}finally{yi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:e},t}function FS(e,t,n,i){return e.baseState=n,Np(e,ye,typeof i=="function"?i:jn)}function vb(e,t,n,i,o){if(Ql(e))throw Error(b(485));if(e=t.action,e!==null){var r={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){r.listeners.push(s)}};z.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,OS(t,r)):(r.next=n.next,t.pending=n.next=r)}}function OS(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var r=z.T,s={};z.T=s;try{var a=n(o,i),l=z.S;l!==null&&l(s,a),Fv(e,t,a)}catch(c){kd(e,t,c)}finally{r!==null&&s.types!==null&&(r.types=s.types),z.T=r}}else try{r=n(o,i),Fv(e,t,r)}catch(c){kd(e,t,c)}}function Fv(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Ov(e,t,i)},function(i){return kd(e,t,i)}):Ov(e,t,n)}function Ov(e,t,n){t.status="fulfilled",t.value=n,HS(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,OS(e,n)))}function kd(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,HS(t),t=t.next;while(t!==i)}e.action=null}function HS(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function GS(e,t){return t}function Hv(e,t){if(te){var n=Se.formState;if(n!==null){e:{var i=Q;if(te){if(Ce){t:{for(var o=Ce,r=Qt;o.nodeType!==8;){if(!r){o=null;break t}if(o=Wt(o.nextSibling),o===null){o=null;break t}}r=o.data,o=r==="F!"||r==="F"?o:null}if(o){Ce=Wt(o.nextSibling),i=o.data==="F!";break e}}ki(i)}i=!1}i&&(t=n[0])}}return n=mt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:GS,lastRenderedState:t},n.queue=i,n=nT.bind(null,Q,i),i.dispatch=n,i=Md(!1),r=Dp.bind(null,Q,!1,i.queue),i=mt(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=vb.bind(null,Q,o,r,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function Gv(e){var t=Pe();return qS(t,ye,e)}function qS(e,t,n){if(t=Np(e,t,GS)[0],e=nl(jn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Ys(t)}catch(s){throw s===Sr?Yl:s}else i=t;t=Pe();var o=t.queue,r=o.dispatch;return n!==t.memoizedState&&(Q.flags|=2048,cr(9,{destroy:void 0},Sb.bind(null,o,n),null)),[i,r,e]}function Sb(e,t){e.action=t}function qv(e){var t=Pe(),n=ye;if(n!==null)return qS(t,n,e);Pe(),t=t.memoizedState,n=Pe();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function cr(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=Q.updateQueue,t===null&&(t=Jl(),Q.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function BS(){return Pe().memoizedState}function il(e,t,n,i){var o=mt();Q.flags|=e,o.memoizedState=cr(1|t,{destroy:void 0},n,i===void 0?null:i)}function Xl(e,t,n,i){var o=Pe();i=i===void 0?null:i;var r=o.memoizedState.inst;ye!==null&&i!==null&&Ap(i,ye.memoizedState.deps)?o.memoizedState=cr(t,r,n,i):(Q.flags|=e,o.memoizedState=cr(1|t,r,n,i))}function Bv(e,t){il(8390656,8,e,t)}function Rp(e,t){Xl(2048,8,e,t)}function Tb(e){Q.flags|=4;var t=Q.updateQueue;if(t===null)t=Jl(),Q.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function VS(e){var t=Pe().memoizedState;return Tb({ref:t,nextImpl:e}),function(){if((le&2)!==0)throw Error(b(440));return t.impl.apply(void 0,arguments)}}function zS(e,t){return Xl(4,2,e,t)}function $S(e,t){return Xl(4,4,e,t)}function YS(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function JS(e,t,n){n=n!=null?n.concat([e]):null,Xl(4,4,YS.bind(null,t,e),n)}function Ip(){}function KS(e,t){var n=Pe();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Ap(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function XS(e,t){var n=Pe();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Ap(t,i[1]))return i[0];if(i=e(),ro){yi(!0);try{e()}finally{yi(!1)}}return n.memoizedState=[i,t],i}function Mp(e,t,n){return n===void 0||(Wn&1073741824)!==0&&(j&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=FT(),Q.lanes|=e,Ui|=e,n)}function QS(e,t,n,i){return Ot(n,t)?n:ur.current!==null?(e=Mp(e,n,i),Ot(e,t)||(He=!0),e):(Wn&42)===0||(Wn&1073741824)!==0&&(j&261930)===0?(He=!0,e.memoizedState=n):(e=FT(),Q.lanes|=e,Ui|=e,t)}function ZS(e,t,n,i,o){var r=ue.p;ue.p=r!==0&&8>r?r:8;var s=z.T,a={};z.T=a,Dp(e,!1,t,n);try{var l=o(),c=z.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=hb(l,i);Ss(e,t,d,Ft(e))}else Ss(e,t,i,Ft(e))}catch(p){Ss(e,t,{then:function(){},status:"rejected",reason:p},Ft())}finally{ue.p=r,s!==null&&a.types!==null&&(s.types=a.types),z.T=s}}function xb(){}function Dd(e,t,n,i){if(e.tag!==5)throw Error(b(476));var o=WS(e).queue;ZS(e,o,t,Zi,n===null?xb:function(){return jS(e),n(i)})}function WS(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Zi,baseState:Zi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:Zi},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:jn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function jS(e){var t=WS(e);t.next===null&&(t=e.alternate.memoizedState),Ss(e,t.next.queue,{},Ft())}function kp(){return ot(Ls)}function eT(){return Pe().memoizedState}function tT(){return Pe().memoizedState}function Ab(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ft();e=Ci(n);var i=_i(t,e,n);i!==null&&(At(i,t,n),gs(i,t,n)),t={cache:yp()},e.payload=t;return}t=t.return}}function Eb(e,t,n){var i=Ft();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ql(e)?iT(t,n):(n=pp(e,t,n,i),n!==null&&(At(n,e,i),oT(n,t,i)))}function nT(e,t,n){var i=Ft();Ss(e,t,n,i)}function Ss(e,t,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ql(e))iT(t,o);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var s=t.lastRenderedState,a=r(s,n);if(o.hasEagerState=!0,o.eagerState=a,Ot(a,s))return $l(e,t,o,0),Se===null&&zl(),!1}catch{}finally{}if(n=pp(e,t,o,i),n!==null)return At(n,e,i),oT(n,t,i),!0}return!1}function Dp(e,t,n,i){if(i={lane:2,revertLane:Bp(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ql(e)){if(t)throw Error(b(479))}else t=pp(e,n,i,2),t!==null&&At(t,e,2)}function Ql(e){var t=e.alternate;return e===Q||t!==null&&t===Q}function iT(e,t){ir=El=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oT(e,t,n){if((n&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,V0(e,n)}}var Ds={readContext:ot,use:Kl,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me};Ds.useEffectEvent=Me;var rT={readContext:ot,use:Kl,useCallback:function(e,t){return mt().memoizedState=[e,t===void 0?null:t],e},useContext:ot,useEffect:Bv,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,il(4194308,4,YS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return il(4194308,4,e,t)},useInsertionEffect:function(e,t){il(4,2,e,t)},useMemo:function(e,t){var n=mt();t=t===void 0?null:t;var i=e();if(ro){yi(!0);try{e()}finally{yi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=mt();if(n!==void 0){var o=n(t);if(ro){yi(!0);try{n(t)}finally{yi(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=Eb.bind(null,Q,e),[i.memoizedState,e]},useRef:function(e){var t=mt();return e={current:e},t.memoizedState=e},useState:function(e){e=Md(e);var t=e.queue,n=nT.bind(null,Q,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ip,useDeferredValue:function(e,t){var n=mt();return Mp(n,e,t)},useTransition:function(){var e=Md(!1);return e=ZS.bind(null,Q,e.queue,!0,!1),mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Q,o=mt();if(te){if(n===void 0)throw Error(b(407));n=n()}else{if(n=t(),Se===null)throw Error(b(349));(j&127)!==0||kS(i,t,n)}o.memoizedState=n;var r={value:n,getSnapshot:t};return o.queue=r,Bv(US.bind(null,i,r,e),[e]),i.flags|=2048,cr(9,{destroy:void 0},DS.bind(null,i,r,n,t),null),n},useId:function(){var e=mt(),t=Se.identifierPrefix;if(te){var n=xn,i=Tn;n=(i&~(1<<32-Lt(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Cl++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=gb++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:kp,useFormState:Hv,useActionState:Hv,useOptimistic:function(e){var t=mt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Dp.bind(null,Q,!0,n),n.dispatch=t,[e,t]},useMemoCache:bp,useCacheRefresh:function(){return mt().memoizedState=Ab.bind(null,Q)},useEffectEvent:function(e){var t=mt(),n={impl:e};return t.memoizedState=n,function(){if((le&2)!==0)throw Error(b(440));return n.impl.apply(void 0,arguments)}}},Up={readContext:ot,use:Kl,useCallback:KS,useContext:ot,useEffect:Rp,useImperativeHandle:JS,useInsertionEffect:zS,useLayoutEffect:$S,useMemo:XS,useReducer:nl,useRef:BS,useState:function(){return nl(jn)},useDebugValue:Ip,useDeferredValue:function(e,t){var n=Pe();return QS(n,ye.memoizedState,e,t)},useTransition:function(){var e=nl(jn)[0],t=Pe().memoizedState;return[typeof e=="boolean"?e:Ys(e),t]},useSyncExternalStore:MS,useId:eT,useHostTransitionStatus:kp,useFormState:Gv,useActionState:Gv,useOptimistic:function(e,t){var n=Pe();return FS(n,ye,e,t)},useMemoCache:bp,useCacheRefresh:tT};Up.useEffectEvent=VS;var sT={readContext:ot,use:Kl,useCallback:KS,useContext:ot,useEffect:Rp,useImperativeHandle:JS,useInsertionEffect:zS,useLayoutEffect:$S,useMemo:XS,useReducer:qf,useRef:BS,useState:function(){return qf(jn)},useDebugValue:Ip,useDeferredValue:function(e,t){var n=Pe();return ye===null?Mp(n,e,t):QS(n,ye.memoizedState,e,t)},useTransition:function(){var e=qf(jn)[0],t=Pe().memoizedState;return[typeof e=="boolean"?e:Ys(e),t]},useSyncExternalStore:MS,useId:eT,useHostTransitionStatus:kp,useFormState:qv,useActionState:qv,useOptimistic:function(e,t){var n=Pe();return ye!==null?FS(n,ye,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:bp,useCacheRefresh:tT};sT.useEffectEvent=VS;function Bf(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ud={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ft(),o=Ci(i);o.payload=t,n!=null&&(o.callback=n),t=_i(e,o,i),t!==null&&(At(t,e,i),gs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ft(),o=Ci(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=_i(e,o,i),t!==null&&(At(t,e,i),gs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ft(),i=Ci(n);i.tag=2,t!=null&&(i.callback=t),t=_i(e,i,n),t!==null&&(At(t,e,n),gs(t,e,n))}};function Vv(e,t,n,i,o,r,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,s):t.prototype&&t.prototype.isPureReactComponent?!Ns(n,i)||!Ns(o,r):!0}function zv(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ud.enqueueReplaceState(t,t.state,null)}function so(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=_e({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function aT(e){gl(e)}function lT(e){console.error(e)}function uT(e){gl(e)}function _l(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function $v(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Pd(e,t,n){return n=Ci(n),n.tag=3,n.payload={element:null},n.callback=function(){_l(e,t)},n}function cT(e){return e=Ci(e),e.tag=3,e}function fT(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var r=i.value;e.payload=function(){return o(r)},e.callback=function(){$v(t,n,i)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){$v(t,n,i),typeof o!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function Cb(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&vr(t,n,o,!0),n=Ht.current,n!==null){switch(n.tag){case 31:case 13:return Zt===null?Il():n.alternate===null&&ke===0&&(ke=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===Tl?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),jf(e,i,o)),!1;case 22:return n.flags|=65536,i===Tl?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),jf(e,i,o)),!1}throw Error(b(435,n.tag))}return jf(e,i,o),Il(),!1}if(te)return t=Ht.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==Ad&&(e=Error(b(422),{cause:i}),Is(Xt(e,n)))):(i!==Ad&&(t=Error(b(423),{cause:i}),Is(Xt(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Xt(i,n),o=Pd(e.stateNode,i,o),Gf(e,o),ke!==4&&(ke=2)),!1;var r=Error(b(520),{cause:i});if(r=Xt(r,n),As===null?As=[r]:As.push(r),ke!==4&&(ke=2),t===null)return!0;i=Xt(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Pd(n.stateNode,i,e),Gf(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(wi===null||!wi.has(r))))return n.flags|=65536,o&=-o,n.lanes|=o,o=cT(o),fT(o,e,n,i),Gf(n,o),!1}n=n.return}while(n!==null);return!1}var Pp=Error(b(461)),He=!1;function tt(e,t,n,i){t.child=e===null?_S(t,null,n,i):oo(t,e.child,n,i)}function Yv(e,t,n,i,o){n=n.render;var r=t.ref;if("ref"in i){var s={};for(var a in i)a!=="ref"&&(s[a]=i[a])}else s=i;return io(t),i=Ep(e,t,n,s,r,o),a=Cp(),e!==null&&!He?(_p(e,t,o),ei(e,t,o)):(te&&a&&hp(t),t.flags|=1,tt(e,t,i,o),t.child)}function Jv(e,t,n,i,o){if(e===null){var r=n.type;return typeof r=="function"&&!mp(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,dT(e,t,r,i,o)):(e=el(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Lp(e,o)){var s=r.memoizedProps;if(n=n.compare,n=n!==null?n:Ns,n(s,i)&&e.ref===t.ref)return ei(e,t,o)}return t.flags|=1,e=Kn(r,i),e.ref=t.ref,e.return=t,t.child=e}function dT(e,t,n,i,o){if(e!==null){var r=e.memoizedProps;if(Ns(r,i)&&e.ref===t.ref)if(He=!1,t.pendingProps=i=r,Lp(e,o))(e.flags&131072)!==0&&(He=!0);else return t.lanes=e.lanes,ei(e,t,o)}return Ld(e,t,n,i,o)}function pT(e,t,n,i){var o=i.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|n:n,e!==null){for(i=t.child=e.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~r}else i=0,t.child=null;return Kv(e,t,r,n,i)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&tl(t,r!==null?r.cachePool:null),r!==null?Lv(t,r):Rd(),NS(t);else return i=t.lanes=536870912,Kv(e,t,r!==null?r.baseLanes|n:n,n,i)}else r!==null?(tl(t,r.cachePool),Lv(t,r),hi(t),t.memoizedState=null):(e!==null&&tl(t,null),Rd(),hi(t));return tt(e,t,o,n),t.child}function cs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Kv(e,t,n,i,o){var r=vp();return r=r===null?null:{parent:Oe._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&tl(t,null),Rd(),NS(t),e!==null&&vr(e,t,i,!0),t.childLanes=o,null}function ol(e,t){return t=wl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Xv(e,t,n){return oo(t,e.child,null,n),e=ol(t,t.pendingProps),e.flags|=2,Mt(t),t.memoizedState=null,e}function _b(e,t,n){var i=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(te){if(i.mode==="hidden")return e=ol(t,i),t.lanes=536870912,cs(null,e);if(Id(t),(e=Ce)?(e=rx(e,Qt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Mi!==null?{id:Tn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},n=vS(e),n.return=t,t.child=n,it=t,Ce=null)):e=null,e===null)throw ki(t);return t.lanes=536870912,null}return ol(t,i)}var r=e.memoizedState;if(r!==null){var s=r.dehydrated;if(Id(t),o)if(t.flags&256)t.flags&=-257,t=Xv(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(b(558));else if(He||vr(e,t,n,!1),o=(n&e.childLanes)!==0,He||o){if(i=Se,i!==null&&(s=z0(i,n),s!==0&&s!==r.retryLane))throw r.retryLane=s,co(e,s),At(i,e,s),Pp;Il(),t=Xv(e,t,n)}else e=r.treeContext,Ce=Wt(s.nextSibling),it=t,te=!0,Ei=null,Qt=!1,e!==null&&TS(t,e),t=ol(t,i),t.flags|=4096;return t}return e=Kn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function rl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(b(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ld(e,t,n,i,o){return io(t),n=Ep(e,t,n,i,void 0,o),i=Cp(),e!==null&&!He?(_p(e,t,o),ei(e,t,o)):(te&&i&&hp(t),t.flags|=1,tt(e,t,n,o),t.child)}function Qv(e,t,n,i,o,r){return io(t),t.updateQueue=null,n=IS(t,i,n,o),RS(e),i=Cp(),e!==null&&!He?(_p(e,t,r),ei(e,t,r)):(te&&i&&hp(t),t.flags|=1,tt(e,t,n,r),t.child)}function Zv(e,t,n,i,o){if(io(t),t.stateNode===null){var r=Ko,s=n.contextType;typeof s=="object"&&s!==null&&(r=ot(s)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ud,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},Tp(t),s=n.contextType,r.context=typeof s=="object"&&s!==null?ot(s):Ko,r.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Bf(t,n,s,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(s=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),s!==r.state&&Ud.enqueueReplaceState(r,r.state,null),vs(t,i,r,o),ys(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var a=t.memoizedProps,l=so(n,a);r.props=l;var c=r.context,d=n.contextType;s=Ko,typeof d=="object"&&d!==null&&(s=ot(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof r.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a||c!==s)&&zv(t,r,i,s),di=!1;var m=t.memoizedState;r.state=m,vs(t,i,r,o),ys(),c=t.memoizedState,a||m!==c||di?(typeof p=="function"&&(Bf(t,n,p,i),c=t.memoizedState),(l=di||Vv(t,n,l,i,m,c,s))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),r.props=i,r.state=c,r.context=s,i=l):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,bd(e,t),s=t.memoizedProps,d=so(n,s),r.props=d,p=t.pendingProps,m=r.context,c=n.contextType,l=Ko,typeof c=="object"&&c!==null&&(l=ot(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(s!==p||m!==l)&&zv(t,r,i,l),di=!1,m=t.memoizedState,r.state=m,vs(t,i,r,o),ys();var h=t.memoizedState;s!==p||m!==h||di||e!==null&&e.dependencies!==null&&Sl(e.dependencies)?(typeof a=="function"&&(Bf(t,n,a,i),h=t.memoizedState),(d=di||Vv(t,n,d,i,m,h,l)||e!==null&&e.dependencies!==null&&Sl(e.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,h,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,h,l)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=l,i=d):(typeof r.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,rl(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=oo(t,e.child,null,o),t.child=oo(t,null,n,o)):tt(e,t,n,o),t.memoizedState=r.state,e=t.child):e=ei(e,t,o),e}function Wv(e,t,n,i){return no(),t.flags|=256,tt(e,t,n,i),t.child}var Vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zf(e){return{baseLanes:e,cachePool:AS()}}function $f(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Dt),e}function mT(e,t,n){var i=t.pendingProps,o=!1,r=(t.flags&128)!==0,s;if((s=r)||(s=e!==null&&e.memoizedState===null?!1:(Ue.current&2)!==0),s&&(o=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,e===null){if(te){if(o?mi(t):hi(t),(e=Ce)?(e=rx(e,Qt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Mi!==null?{id:Tn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},n=vS(e),n.return=t,t.child=n,it=t,Ce=null)):e=null,e===null)throw ki(t);return Qd(e)?t.lanes=32:t.lanes=536870912,null}var a=i.children;return i=i.fallback,o?(hi(t),o=t.mode,a=wl({mode:"hidden",children:a},o),i=Wi(i,o,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,i=t.child,i.memoizedState=zf(n),i.childLanes=$f(e,s,n),t.memoizedState=Vf,cs(null,i)):(mi(t),Fd(t,a))}var l=e.memoizedState;if(l!==null&&(a=l.dehydrated,a!==null)){if(r)t.flags&256?(mi(t),t.flags&=-257,t=Yf(e,t,n)):t.memoizedState!==null?(hi(t),t.child=e.child,t.flags|=128,t=null):(hi(t),a=i.fallback,o=t.mode,i=wl({mode:"visible",children:i.children},o),a=Wi(a,o,n,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,oo(t,e.child,null,n),i=t.child,i.memoizedState=zf(n),i.childLanes=$f(e,s,n),t.memoizedState=Vf,t=cs(null,i));else if(mi(t),Qd(a)){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;s=c,i=Error(b(419)),i.stack="",i.digest=s,Is({value:i,source:null,stack:null}),t=Yf(e,t,n)}else if(He||vr(e,t,n,!1),s=(n&e.childLanes)!==0,He||s){if(s=Se,s!==null&&(i=z0(s,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,co(e,i),At(s,e,i),Pp;Xd(a)||Il(),t=Yf(e,t,n)}else Xd(a)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Ce=Wt(a.nextSibling),it=t,te=!0,Ei=null,Qt=!1,e!==null&&TS(t,e),t=Fd(t,i.children),t.flags|=4096);return t}return o?(hi(t),a=i.fallback,o=t.mode,l=e.child,c=l.sibling,i=Kn(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?a=Kn(c,a):(a=Wi(a,o,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,cs(null,i),i=t.child,a=e.child.memoizedState,a===null?a=zf(n):(o=a.cachePool,o!==null?(l=Oe._currentValue,o=o.parent!==l?{parent:l,pool:l}:o):o=AS(),a={baseLanes:a.baseLanes|n,cachePool:o}),i.memoizedState=a,i.childLanes=$f(e,s,n),t.memoizedState=Vf,cs(e.child,i)):(mi(t),n=e.child,e=n.sibling,n=Kn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Fd(e,t){return t=wl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function wl(e,t){return e=kt(22,e,null,t),e.lanes=0,e}function Yf(e,t,n){return oo(t,e.child,null,n),e=Fd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jv(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Cd(e.return,t,n)}function Jf(e,t,n,i,o,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=o,s.treeForkCount=r)}function hT(e,t,n){var i=t.pendingProps,o=i.revealOrder,r=i.tail;i=i.children;var s=Ue.current,a=(s&2)!==0;if(a?(s=s&1|2,t.flags|=128):s&=1,xe(Ue,s),tt(e,t,i,n),i=te?Rs:0,!a&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jv(e,n,t);else if(e.tag===19)jv(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Al(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Jf(t,!1,o,n,r,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Al(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Jf(t,!0,n,null,r,i);break;case"together":Jf(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function ei(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ui|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(vr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,n=Kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Lp(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Sl(e)))}function wb(e,t,n){switch(t.tag){case 3:dl(t,t.stateNode.containerInfo),pi(t,Oe,e.memoizedState.cache),no();break;case 27:case 5:fd(t);break;case 4:dl(t,t.stateNode.containerInfo);break;case 10:pi(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Id(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(mi(t),t.flags|=128,null):(n&t.child.childLanes)!==0?mT(e,t,n):(mi(t),e=ei(e,t,n),e!==null?e.sibling:null);mi(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(vr(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return hT(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),xe(Ue,Ue.current),i)break;return null;case 22:return t.lanes=0,pT(e,t,n,t.pendingProps);case 24:pi(t,Oe,e.memoizedState.cache)}return ei(e,t,n)}function gT(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)He=!0;else{if(!Lp(e,n)&&(t.flags&128)===0)return He=!1,wb(e,t,n);He=(e.flags&131072)!==0}else He=!1,te&&(t.flags&1048576)!==0&&SS(t,Rs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Xi(t.elementType),t.type=e,typeof e=="function")mp(e)?(i=so(e,i),t.tag=1,t=Zv(null,t,e,i,n)):(t.tag=0,t=Ld(null,t,e,i,n));else{if(e!=null){var o=e.$$typeof;if(o===ep){t.tag=11,t=Yv(null,t,e,i,n);break e}else if(o===tp){t.tag=14,t=Jv(null,t,e,i,n);break e}}throw t=ud(e)||e,Error(b(306,t,""))}}return t;case 0:return Ld(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=so(i,t.pendingProps),Zv(e,t,i,o,n);case 3:e:{if(dl(t,t.stateNode.containerInfo),e===null)throw Error(b(387));i=t.pendingProps;var r=t.memoizedState;o=r.element,bd(e,t),vs(t,i,null,n);var s=t.memoizedState;if(i=s.cache,pi(t,Oe,i),i!==r.cache&&_d(t,[Oe],n,!0),ys(),i=s.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Wv(e,t,i,n);break e}else if(i!==o){o=Xt(Error(b(424)),t),Is(o),t=Wv(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ce=Wt(e.firstChild),it=t,te=!0,Ei=null,Qt=!0,n=_S(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(no(),i===o){t=ei(e,t,n);break e}tt(e,t,i,n)}t=t.child}return t;case 26:return rl(e,t),e===null?(n=x0(t.type,null,t.pendingProps,null))?t.memoizedState=n:te||(n=t.type,e=t.pendingProps,i=Ul(Ai.current).createElement(n),i[nt]=t,i[Et]=e,rt(i,n,e),Ze(i),t.stateNode=i):t.memoizedState=x0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return fd(t),e===null&&te&&(i=t.stateNode=sx(t.type,t.pendingProps,Ai.current),it=t,Qt=!0,o=Ce,Li(t.type)?(Zd=o,Ce=Wt(i.firstChild)):Ce=o),tt(e,t,t.pendingProps.children,n),rl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&te&&((o=i=Ce)&&(i=eN(i,t.type,t.pendingProps,Qt),i!==null?(t.stateNode=i,it=t,Ce=Wt(i.firstChild),Qt=!1,o=!0):o=!1),o||ki(t)),fd(t),o=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,i=r.children,Jd(o,r)?i=null:s!==null&&Jd(o,s)&&(t.flags|=32),t.memoizedState!==null&&(o=Ep(e,t,yb,null,null,n),Ls._currentValue=o),rl(e,t),tt(e,t,i,n),t.child;case 6:return e===null&&te&&((e=n=Ce)&&(n=tN(n,t.pendingProps,Qt),n!==null?(t.stateNode=n,it=t,Ce=null,e=!0):e=!1),e||ki(t)),null;case 13:return mT(e,t,n);case 4:return dl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=oo(t,null,i,n):tt(e,t,i,n),t.child;case 11:return Yv(e,t,t.type,t.pendingProps,n);case 7:return tt(e,t,t.pendingProps,n),t.child;case 8:return tt(e,t,t.pendingProps.children,n),t.child;case 12:return tt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,pi(t,t.type,i.value),tt(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,io(t),o=ot(o),i=i(o),t.flags|=1,tt(e,t,i,n),t.child;case 14:return Jv(e,t,t.type,t.pendingProps,n);case 15:return dT(e,t,t.type,t.pendingProps,n);case 19:return hT(e,t,n);case 31:return _b(e,t,n);case 22:return pT(e,t,n,t.pendingProps);case 24:return io(t),i=ot(Oe),e===null?(o=vp(),o===null&&(o=Se,r=yp(),o.pooledCache=r,r.refCount++,r!==null&&(o.pooledCacheLanes|=n),o=r),t.memoizedState={parent:i,cache:o},Tp(t),pi(t,Oe,o)):((e.lanes&n)!==0&&(bd(e,t),vs(t,null,null,n),ys()),o=e.memoizedState,r=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),pi(t,Oe,i)):(i=r.cache,pi(t,Oe,i),i!==o.cache&&_d(t,[Oe],n,!0))),tt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(b(156,t.tag))}function Hn(e){e.flags|=4}function Kf(e,t,n,i,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(GT())e.flags|=8192;else throw eo=Tl,Sp}else e.flags&=-16777217}function e0(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ux(t))if(GT())e.flags|=8192;else throw eo=Tl,Sp}function Va(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?q0():536870912,e.lanes|=t,fr|=t)}function is(e,t){if(!te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ee(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function bb(e,t,n){var i=t.pendingProps;switch(gp(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(t),null;case 1:return Ee(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Xn(Oe),rr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Lo(t)?Hn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Hf())),Ee(t),null;case 26:var o=t.type,r=t.memoizedState;return e===null?(Hn(t),r!==null?(Ee(t),e0(t,r)):(Ee(t),Kf(t,o,null,i,n))):r?r!==e.memoizedState?(Hn(t),Ee(t),e0(t,r)):(Ee(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Hn(t),Ee(t),Kf(t,o,e,i,n)),null;case 27:if(pl(t),n=Ai.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Hn(t);else{if(!i){if(t.stateNode===null)throw Error(b(166));return Ee(t),null}e=En.current,Lo(t)?Rv(t,e):(e=sx(o,i,n),t.stateNode=e,Hn(t))}return Ee(t),null;case 5:if(pl(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Hn(t);else{if(!i){if(t.stateNode===null)throw Error(b(166));return Ee(t),null}if(r=En.current,Lo(t))Rv(t,r);else{var s=Ul(Ai.current);switch(r){case 1:r=s.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=s.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=s.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?r.multiple=!0:i.size&&(r.size=i.size);break;default:r=typeof i.is=="string"?s.createElement(o,{is:i.is}):s.createElement(o)}}r[nt]=t,r[Et]=i;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)r.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=r;e:switch(rt(r,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Hn(t)}}return Ee(t),Kf(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Hn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(b(166));if(e=Ai.current,Lo(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=it,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[nt]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||nx(e.nodeValue,n)),e||ki(t,!0)}else e=Ul(e).createTextNode(i),e[nt]=t,t.stateNode=e}return Ee(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=Lo(t),n!==null){if(e===null){if(!i)throw Error(b(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(557));e[nt]=t}else no(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ee(t),e=!1}else n=Hf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Mt(t),t):(Mt(t),null);if((t.flags&128)!==0)throw Error(b(558))}return Ee(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Lo(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(b(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(b(317));o[nt]=t}else no(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ee(t),o=!1}else o=Hf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Mt(t),t):(Mt(t),null)}return Mt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Va(t,t.updateQueue),Ee(t),null);case 4:return rr(),e===null&&Vp(t.stateNode.containerInfo),Ee(t),null;case 10:return Xn(t.type),Ee(t),null;case 19:if(We(Ue),i=t.memoizedState,i===null)return Ee(t),null;if(o=(t.flags&128)!==0,r=i.rendering,r===null)if(o)is(i,!1);else{if(ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Al(e),r!==null){for(t.flags|=128,is(i,!1),e=r.updateQueue,t.updateQueue=e,Va(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)yS(n,e),n=n.sibling;return xe(Ue,Ue.current&1|2),te&&Vn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Ut()>Nl&&(t.flags|=128,o=!0,is(i,!1),t.lanes=4194304)}else{if(!o)if(e=Al(r),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Va(t,e),is(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!te)return Ee(t),null}else 2*Ut()-i.renderingStartTime>Nl&&n!==536870912&&(t.flags|=128,o=!0,is(i,!1),t.lanes=4194304);i.isBackwards?(r.sibling=t.child,t.child=r):(e=i.last,e!==null?e.sibling=r:t.child=r,i.last=r)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ut(),e.sibling=null,n=Ue.current,xe(Ue,o?n&1|2:n&1),te&&Vn(t,i.treeForkCount),e):(Ee(t),null);case 22:case 23:return Mt(t),xp(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(Ee(t),t.subtreeFlags&6&&(t.flags|=8192)):Ee(t),n=t.updateQueue,n!==null&&Va(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&We(ji),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Xn(Oe),Ee(t),null;case 25:return null;case 30:return null}throw Error(b(156,t.tag))}function Nb(e,t){switch(gp(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xn(Oe),rr(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return pl(t),null;case 31:if(t.memoizedState!==null){if(Mt(t),t.alternate===null)throw Error(b(340));no()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Mt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));no()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(Ue),null;case 4:return rr(),null;case 10:return Xn(t.type),null;case 22:case 23:return Mt(t),xp(),e!==null&&We(ji),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Xn(Oe),null;case 25:return null;default:return null}}function yT(e,t){switch(gp(t),t.tag){case 3:Xn(Oe),rr();break;case 26:case 27:case 5:pl(t);break;case 4:rr();break;case 31:t.memoizedState!==null&&Mt(t);break;case 13:Mt(t);break;case 19:We(Ue);break;case 10:Xn(t.type);break;case 22:case 23:Mt(t),xp(),e!==null&&We(ji);break;case 24:Xn(Oe)}}function Js(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var r=n.create,s=n.inst;i=r(),s.destroy=i}n=n.next}while(n!==o)}}catch(a){de(t,t.return,a)}}function Di(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var r=o.next;i=r;do{if((i.tag&e)===e){var s=i.inst,a=s.destroy;if(a!==void 0){s.destroy=void 0,o=t;var l=n,c=a;try{c()}catch(d){de(o,l,d)}}}i=i.next}while(i!==r)}}catch(d){de(t,t.return,d)}}function vT(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{bS(t,n)}catch(i){de(e,e.return,i)}}}function ST(e,t,n){n.props=so(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){de(e,t,i)}}function Ts(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){de(e,t,o)}}function An(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){de(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){de(e,t,o)}else n.current=null}function TT(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){de(e,e.return,o)}}function Xf(e,t,n){try{var i=e.stateNode;Kb(i,e.type,n,t),i[Et]=t}catch(o){de(e,e.return,o)}}function xT(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Li(e.type)||e.tag===4}function Qf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Li(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Od(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yn));else if(i!==4&&(i===27&&Li(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Od(e,t,n),e=e.sibling;e!==null;)Od(e,t,n),e=e.sibling}function bl(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&Li(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(bl(e,t,n),e=e.sibling;e!==null;)bl(e,t,n),e=e.sibling}function AT(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);rt(t,i,n),t[nt]=e,t[Et]=n}catch(r){de(e,e.return,r)}}var zn=!1,Fe=!1,Zf=!1,t0=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Rb(e,t){if(e=e.containerInfo,$d=Ol,e=uS(e),fp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,d=0,p=e,m=null;t:for(;;){for(var h;p!==n||o!==0&&p.nodeType!==3||(a=s+o),p!==r||i!==0&&p.nodeType!==3||(l=s+i),p.nodeType===3&&(s+=p.nodeValue.length),(h=p.firstChild)!==null;)m=p,p=h;for(;;){if(p===e)break t;if(m===n&&++c===o&&(a=s),m===r&&++d===i&&(l=s),(h=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yd={focusedElem:e,selectionRange:n},Ol=!1,Qe=t;Qe!==null;)if(t=Qe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qe=e;else for(;Qe!==null;){switch(t=Qe,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,n=t,o=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var g=so(n.type,o);e=i.getSnapshotBeforeUpdate(g,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(S){de(n,n.return,S)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Kd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(b(163))}if(e=t.sibling,e!==null){e.return=t.return,Qe=e;break}Qe=t.return}}function ET(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:qn(e,n),i&4&&Js(5,n);break;case 1:if(qn(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(s){de(n,n.return,s)}else{var o=so(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){de(n,n.return,s)}}i&64&&vT(n),i&512&&Ts(n,n.return);break;case 3:if(qn(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{bS(e,t)}catch(s){de(n,n.return,s)}}break;case 27:t===null&&i&4&&AT(n);case 26:case 5:qn(e,n),t===null&&i&4&&TT(n),i&512&&Ts(n,n.return);break;case 12:qn(e,n);break;case 31:qn(e,n),i&4&&wT(e,n);break;case 13:qn(e,n),i&4&&bT(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Ob.bind(null,n),nN(e,n))));break;case 22:if(i=n.memoizedState!==null||zn,!i){t=t!==null&&t.memoizedState!==null||Fe,o=zn;var r=Fe;zn=i,(Fe=t)&&!r?Bn(e,n,(n.subtreeFlags&8772)!==0):qn(e,n),zn=o,Fe=r}break;case 30:break;default:qn(e,n)}}function CT(e){var t=e.alternate;t!==null&&(e.alternate=null,CT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&rp(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Re=null,Tt=!1;function Gn(e,t,n){for(n=n.child;n!==null;)_T(e,t,n),n=n.sibling}function _T(e,t,n){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Gs,n)}catch{}switch(n.tag){case 26:Fe||An(n,t),Gn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Fe||An(n,t);var i=Re,o=Tt;Li(n.type)&&(Re=n.stateNode,Tt=!1),Gn(e,t,n),Cs(n.stateNode),Re=i,Tt=o;break;case 5:Fe||An(n,t);case 6:if(i=Re,o=Tt,Re=null,Gn(e,t,n),Re=i,Tt=o,Re!==null)if(Tt)try{(Re.nodeType===9?Re.body:Re.nodeName==="HTML"?Re.ownerDocument.body:Re).removeChild(n.stateNode)}catch(r){de(n,t,r)}else try{Re.removeChild(n.stateNode)}catch(r){de(n,t,r)}break;case 18:Re!==null&&(Tt?(e=Re,g0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),hr(e)):g0(Re,n.stateNode));break;case 4:i=Re,o=Tt,Re=n.stateNode.containerInfo,Tt=!0,Gn(e,t,n),Re=i,Tt=o;break;case 0:case 11:case 14:case 15:Di(2,n,t),Fe||Di(4,n,t),Gn(e,t,n);break;case 1:Fe||(An(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&ST(n,t,i)),Gn(e,t,n);break;case 21:Gn(e,t,n);break;case 22:Fe=(i=Fe)||n.memoizedState!==null,Gn(e,t,n),Fe=i;break;default:Gn(e,t,n)}}function wT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hr(e)}catch(n){de(t,t.return,n)}}}function bT(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hr(e)}catch(n){de(t,t.return,n)}}function Ib(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new t0),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new t0),t;default:throw Error(b(435,e.tag))}}function za(e,t){var n=Ib(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var o=Hb.bind(null,e,i);i.then(o,o)}})}function vt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],r=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 27:if(Li(a.type)){Re=a.stateNode,Tt=!1;break e}break;case 5:Re=a.stateNode,Tt=!1;break e;case 3:case 4:Re=a.stateNode.containerInfo,Tt=!0;break e}a=a.return}if(Re===null)throw Error(b(160));_T(r,s,o),Re=null,Tt=!1,r=o.alternate,r!==null&&(r.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)NT(t,e),t=t.sibling}var an=null;function NT(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vt(t,e),St(e),i&4&&(Di(3,e,e.return),Js(3,e),Di(5,e,e.return));break;case 1:vt(t,e),St(e),i&512&&(Fe||n===null||An(n,n.return)),i&64&&zn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=an;if(vt(t,e),St(e),i&512&&(Fe||n===null||An(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":r=o.getElementsByTagName("title")[0],(!r||r[Vs]||r[nt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=o.createElement(i),o.head.insertBefore(r,o.querySelector("head > title"))),rt(r,i,n),r[nt]=e,Ze(r),i=r;break e;case"link":var s=E0("link","href",o).get(i+(n.href||""));if(s){for(var a=0;a<s.length;a++)if(r=s[a],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(a,1);break t}}r=o.createElement(i),rt(r,i,n),o.head.appendChild(r);break;case"meta":if(s=E0("meta","content",o).get(i+(n.content||""))){for(a=0;a<s.length;a++)if(r=s[a],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(a,1);break t}}r=o.createElement(i),rt(r,i,n),o.head.appendChild(r);break;default:throw Error(b(468,i))}r[nt]=e,Ze(r),i=r}e.stateNode=i}else C0(o,e.type,e.stateNode);else e.stateNode=A0(o,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?C0(o,e.type,e.stateNode):A0(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Xf(e,e.memoizedProps,n.memoizedProps)}break;case 27:vt(t,e),St(e),i&512&&(Fe||n===null||An(n,n.return)),n!==null&&i&4&&Xf(e,e.memoizedProps,n.memoizedProps);break;case 5:if(vt(t,e),St(e),i&512&&(Fe||n===null||An(n,n.return)),e.flags&32){o=e.stateNode;try{ar(o,"")}catch(g){de(e,e.return,g)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,Xf(e,o,n!==null?n.memoizedProps:o)),i&1024&&(Zf=!0);break;case 6:if(vt(t,e),St(e),i&4){if(e.stateNode===null)throw Error(b(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(g){de(e,e.return,g)}}break;case 3:if(ll=null,o=an,an=Pl(t.containerInfo),vt(t,e),an=o,St(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{hr(t.containerInfo)}catch(g){de(e,e.return,g)}Zf&&(Zf=!1,RT(e));break;case 4:i=an,an=Pl(e.stateNode.containerInfo),vt(t,e),St(e),an=i;break;case 12:vt(t,e),St(e);break;case 31:vt(t,e),St(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,za(e,i)));break;case 13:vt(t,e),St(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Zl=Ut()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,za(e,i)));break;case 22:o=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=zn,d=Fe;if(zn=c||o,Fe=d||l,vt(t,e),Fe=d,zn=c,St(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||l||zn||Fe||Qi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(r=l.stateNode,o)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{a=l.stateNode;var p=l.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;a.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(g){de(l,l.return,g)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=o?"":l.memoizedProps}catch(g){de(l,l.return,g)}}}else if(t.tag===18){if(n===null){l=t;try{var h=l.stateNode;o?y0(h,!0):y0(l.stateNode,!1)}catch(g){de(l,l.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,za(e,n))));break;case 19:vt(t,e),St(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,za(e,i)));break;case 30:break;case 21:break;default:vt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(xT(i)){n=i;break}i=i.return}if(n==null)throw Error(b(160));switch(n.tag){case 27:var o=n.stateNode,r=Qf(e);bl(e,r,o);break;case 5:var s=n.stateNode;n.flags&32&&(ar(s,""),n.flags&=-33);var a=Qf(e);bl(e,a,s);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Qf(e);Od(e,c,l);break;default:throw Error(b(161))}}catch(d){de(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RT(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;RT(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function qn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ET(e,t.alternate,t),t=t.sibling}function Qi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Di(4,t,t.return),Qi(t);break;case 1:An(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&ST(t,t.return,n),Qi(t);break;case 27:Cs(t.stateNode);case 26:case 5:An(t,t.return),Qi(t);break;case 22:t.memoizedState===null&&Qi(t);break;case 30:Qi(t);break;default:Qi(t)}e=e.sibling}}function Bn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,r=t,s=r.flags;switch(r.tag){case 0:case 11:case 15:Bn(o,r,n),Js(4,r);break;case 1:if(Bn(o,r,n),i=r,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(c){de(i,i.return,c)}if(i=r,o=i.updateQueue,o!==null){var a=i.stateNode;try{var l=o.shared.hiddenCallbacks;if(l!==null)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)wS(l[o],a)}catch(c){de(i,i.return,c)}}n&&s&64&&vT(r),Ts(r,r.return);break;case 27:AT(r);case 26:case 5:Bn(o,r,n),n&&i===null&&s&4&&TT(r),Ts(r,r.return);break;case 12:Bn(o,r,n);break;case 31:Bn(o,r,n),n&&s&4&&wT(o,r);break;case 13:Bn(o,r,n),n&&s&4&&bT(o,r);break;case 22:r.memoizedState===null&&Bn(o,r,n),Ts(r,r.return);break;case 30:break;default:Bn(o,r,n)}t=t.sibling}}function Fp(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&$s(n))}function Op(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e))}function sn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)IT(e,t,n,i),t=t.sibling}function IT(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:sn(e,t,n,i),o&2048&&Js(9,t);break;case 1:sn(e,t,n,i);break;case 3:sn(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$s(e)));break;case 12:if(o&2048){sn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,s=r.id,a=r.onPostCommit;typeof a=="function"&&a(s,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){de(t,t.return,l)}}else sn(e,t,n,i);break;case 31:sn(e,t,n,i);break;case 13:sn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,s=t.alternate,t.memoizedState!==null?r._visibility&2?sn(e,t,n,i):xs(e,t):r._visibility&2?sn(e,t,n,i):(r._visibility|=2,Oo(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Fp(s,t);break;case 24:sn(e,t,n,i),o&2048&&Op(t.alternate,t);break;default:sn(e,t,n,i)}}function Oo(e,t,n,i,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,s=t,a=n,l=i,c=s.flags;switch(s.tag){case 0:case 11:case 15:Oo(r,s,a,l,o),Js(8,s);break;case 23:break;case 22:var d=s.stateNode;s.memoizedState!==null?d._visibility&2?Oo(r,s,a,l,o):xs(r,s):(d._visibility|=2,Oo(r,s,a,l,o)),o&&c&2048&&Fp(s.alternate,s);break;case 24:Oo(r,s,a,l,o),o&&c&2048&&Op(s.alternate,s);break;default:Oo(r,s,a,l,o)}t=t.sibling}}function xs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:xs(n,i),o&2048&&Fp(i.alternate,i);break;case 24:xs(n,i),o&2048&&Op(i.alternate,i);break;default:xs(n,i)}t=t.sibling}}var fs=8192;function Fo(e,t,n){if(e.subtreeFlags&fs)for(e=e.child;e!==null;)MT(e,t,n),e=e.sibling}function MT(e,t,n){switch(e.tag){case 26:Fo(e,t,n),e.flags&fs&&e.memoizedState!==null&&mN(n,an,e.memoizedState,e.memoizedProps);break;case 5:Fo(e,t,n);break;case 3:case 4:var i=an;an=Pl(e.stateNode.containerInfo),Fo(e,t,n),an=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=fs,fs=16777216,Fo(e,t,n),fs=i):Fo(e,t,n));break;default:Fo(e,t,n)}}function kT(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function os(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Qe=i,UT(i,e)}kT(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)DT(e),e=e.sibling}function DT(e){switch(e.tag){case 0:case 11:case 15:os(e),e.flags&2048&&Di(9,e,e.return);break;case 3:os(e);break;case 12:os(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,sl(e)):os(e);break;default:os(e)}}function sl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Qe=i,UT(i,e)}kT(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Di(8,t,t.return),sl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,sl(t));break;default:sl(t)}e=e.sibling}}function UT(e,t){for(;Qe!==null;){var n=Qe;switch(n.tag){case 0:case 11:case 15:Di(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:$s(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Qe=i;else e:for(n=e;Qe!==null;){i=Qe;var o=i.sibling,r=i.return;if(CT(i),i===n){Qe=null;break e}if(o!==null){o.return=r,Qe=o;break e}Qe=r}}}var Mb={getCacheForType:function(e){var t=ot(Oe),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return ot(Oe).controller.signal}},kb=typeof WeakMap=="function"?WeakMap:Map,le=0,Se=null,W=null,j=0,fe=0,It=null,Si=!1,Tr=!1,Hp=!1,ti=0,ke=0,Ui=0,to=0,Gp=0,Dt=0,fr=0,As=null,xt=null,Hd=!1,Zl=0,PT=0,Nl=1/0,Rl=null,wi=null,Ve=0,bi=null,dr=null,Qn=0,Gd=0,qd=null,LT=null,Es=0,Bd=null;function Ft(){return(le&2)!==0&&j!==0?j&-j:z.T!==null?Bp():$0()}function FT(){if(Dt===0)if((j&536870912)===0||te){var e=Ua;Ua<<=1,(Ua&3932160)===0&&(Ua=262144),Dt=e}else Dt=536870912;return e=Ht.current,e!==null&&(e.flags|=32),Dt}function At(e,t,n){(e===Se&&(fe===2||fe===9)||e.cancelPendingCommit!==null)&&(pr(e,0),Ti(e,j,Dt,!1)),Bs(e,n),((le&2)===0||e!==Se)&&(e===Se&&((le&2)===0&&(to|=n),ke===4&&Ti(e,j,Dt,!1)),_n(e))}function OT(e,t,n){if((le&6)!==0)throw Error(b(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||qs(e,t),o=i?Pb(e,t):Wf(e,t,!0),r=i;do{if(o===0){Tr&&!i&&Ti(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Db(n)){o=Wf(e,t,!1),r=!1;continue}if(o===2){if(r=t,e.errorRecoveryDisabledLanes&r)var s=0;else s=e.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;e:{var a=e;o=As;var l=a.current.memoizedState.isDehydrated;if(l&&(pr(a,s).flags|=256),s=Wf(a,s,!1),s!==2){if(Hp&&!l){a.errorRecoveryDisabledLanes|=r,to|=r,o=4;break e}r=xt,xt=o,r!==null&&(xt===null?xt=r:xt.push.apply(xt,r))}o=s}if(r=!1,o!==2)continue}}if(o===1){pr(e,0),Ti(e,t,0,!0);break}e:{switch(i=e,r=o,r){case 0:case 1:throw Error(b(345));case 4:if((t&4194048)!==t)break;case 6:Ti(i,t,Dt,!Si);break e;case 2:xt=null;break;case 3:case 5:break;default:throw Error(b(329))}if((t&62914560)===t&&(o=Zl+300-Ut(),10<o)){if(Ti(i,t,Dt,!Si),Gl(i,0,!0)!==0)break e;Qn=t,i.timeoutHandle=ox(n0.bind(null,i,n,xt,Rl,Hd,t,Dt,to,fr,Si,r,"Throttled",-0,0),o);break e}n0(i,n,xt,Rl,Hd,t,Dt,to,fr,Si,r,null,-0,0)}}break}while(1);_n(e)}function n0(e,t,n,i,o,r,s,a,l,c,d,p,m,h){if(e.timeoutHandle=-1,p=t.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},MT(t,r,p);var g=(r&62914560)===r?Zl-Ut():(r&4194048)===r?PT-Ut():0;if(g=hN(p,g),g!==null){Qn=r,e.cancelPendingCommit=g(o0.bind(null,e,t,r,n,i,o,s,a,l,d,p,null,m,h)),Ti(e,r,s,!c);return}}o0(e,t,r,n,i,o,s,a,l)}function Db(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],r=o.getSnapshot;o=o.value;try{if(!Ot(r(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ti(e,t,n,i){t&=~Gp,t&=~to,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var r=31-Lt(o),s=1<<r;i[r]=-1,o&=~s}n!==0&&B0(e,n,t)}function Wl(){return(le&6)===0?(Ks(0,!1),!1):!0}function qp(){if(W!==null){if(fe===0)var e=W.return;else e=W,Jn=fo=null,wp(e),nr=null,Ms=0,e=W;for(;e!==null;)yT(e.alternate,e),e=e.return;W=null}}function pr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Zb(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Qn=0,qp(),Se=e,W=n=Kn(e.current,null),j=t,fe=0,It=null,Si=!1,Tr=qs(e,t),Hp=!1,fr=Dt=Gp=to=Ui=ke=0,xt=As=null,Hd=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-Lt(i),r=1<<o;t|=e[o],i&=~r}return ti=t,zl(),n}function HT(e,t){Q=null,z.H=Ds,t===Sr||t===Yl?(t=Uv(),fe=3):t===Sp?(t=Uv(),fe=4):fe=t===Pp?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,It=t,W===null&&(ke=1,_l(e,Xt(t,e.current)))}function GT(){var e=Ht.current;return e===null?!0:(j&4194048)===j?Zt===null:(j&62914560)===j||(j&536870912)!==0?e===Zt:!1}function qT(){var e=z.H;return z.H=Ds,e===null?Ds:e}function BT(){var e=z.A;return z.A=Mb,e}function Il(){ke=4,Si||(j&4194048)!==j&&Ht.current!==null||(Tr=!0),(Ui&134217727)===0&&(to&134217727)===0||Se===null||Ti(Se,j,Dt,!1)}function Wf(e,t,n){var i=le;le|=2;var o=qT(),r=BT();(Se!==e||j!==t)&&(Rl=null,pr(e,t)),t=!1;var s=ke;e:do try{if(fe!==0&&W!==null){var a=W,l=It;switch(fe){case 8:qp(),s=6;break e;case 3:case 2:case 9:case 6:Ht.current===null&&(t=!0);var c=fe;if(fe=0,It=null,Zo(e,a,l,c),n&&Tr){s=0;break e}break;default:c=fe,fe=0,It=null,Zo(e,a,l,c)}}Ub(),s=ke;break}catch(d){HT(e,d)}while(1);return t&&e.shellSuspendCounter++,Jn=fo=null,le=i,z.H=o,z.A=r,W===null&&(Se=null,j=0,zl()),s}function Ub(){for(;W!==null;)VT(W)}function Pb(e,t){var n=le;le|=2;var i=qT(),o=BT();Se!==e||j!==t?(Rl=null,Nl=Ut()+500,pr(e,t)):Tr=qs(e,t);e:do try{if(fe!==0&&W!==null){t=W;var r=It;t:switch(fe){case 1:fe=0,It=null,Zo(e,t,r,1);break;case 2:case 9:if(Dv(r)){fe=0,It=null,i0(t);break}t=function(){fe!==2&&fe!==9||Se!==e||(fe=7),_n(e)},r.then(t,t);break e;case 3:fe=7;break e;case 4:fe=5;break e;case 7:Dv(r)?(fe=0,It=null,i0(t)):(fe=0,It=null,Zo(e,t,r,7));break;case 5:var s=null;switch(W.tag){case 26:s=W.memoizedState;case 5:case 27:var a=W;if(s?ux(s):a.stateNode.complete){fe=0,It=null;var l=a.sibling;if(l!==null)W=l;else{var c=a.return;c!==null?(W=c,jl(c)):W=null}break t}}fe=0,It=null,Zo(e,t,r,5);break;case 6:fe=0,It=null,Zo(e,t,r,6);break;case 8:qp(),ke=6;break e;default:throw Error(b(462))}}Lb();break}catch(d){HT(e,d)}while(1);return Jn=fo=null,z.H=i,z.A=o,le=n,W!==null?0:(Se=null,j=0,zl(),ke)}function Lb(){for(;W!==null&&!rw();)VT(W)}function VT(e){var t=gT(e.alternate,e,ti);e.memoizedProps=e.pendingProps,t===null?jl(e):W=t}function i0(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qv(n,t,t.pendingProps,t.type,void 0,j);break;case 11:t=Qv(n,t,t.pendingProps,t.type.render,t.ref,j);break;case 5:wp(t);default:yT(n,t),t=W=yS(t,ti),t=gT(n,t,ti)}e.memoizedProps=e.pendingProps,t===null?jl(e):W=t}function Zo(e,t,n,i){Jn=fo=null,wp(t),nr=null,Ms=0;var o=t.return;try{if(Cb(e,o,t,n,j)){ke=1,_l(e,Xt(n,e.current)),W=null;return}}catch(r){if(o!==null)throw W=o,r;ke=1,_l(e,Xt(n,e.current)),W=null;return}t.flags&32768?(te||i===1?e=!0:Tr||(j&536870912)!==0?e=!1:(Si=e=!0,(i===2||i===9||i===3||i===6)&&(i=Ht.current,i!==null&&i.tag===13&&(i.flags|=16384))),zT(t,e)):jl(t)}function jl(e){var t=e;do{if((t.flags&32768)!==0){zT(t,Si);return}e=t.return;var n=bb(t.alternate,t,ti);if(n!==null){W=n;return}if(t=t.sibling,t!==null){W=t;return}W=t=e}while(t!==null);ke===0&&(ke=5)}function zT(e,t){do{var n=Nb(e.alternate,e);if(n!==null){n.flags&=32767,W=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){W=e;return}W=e=n}while(e!==null);ke=6,W=null}function o0(e,t,n,i,o,r,s,a,l){e.cancelPendingCommit=null;do eu();while(Ve!==0);if((le&6)!==0)throw Error(b(327));if(t!==null){if(t===e.current)throw Error(b(177));if(r=t.lanes|t.childLanes,r|=dp,hw(e,n,r,s,a,l),e===Se&&(W=Se=null,j=0),dr=t,bi=e,Qn=n,Gd=r,qd=o,LT=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Gb(ml,function(){return XT(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=z.T,z.T=null,o=ue.p,ue.p=2,s=le,le|=4;try{Rb(e,t,n)}finally{le=s,ue.p=o,z.T=i}}Ve=1,$T(),YT(),JT()}}function $T(){if(Ve===1){Ve=0;var e=bi,t=dr,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=z.T,z.T=null;var i=ue.p;ue.p=2;var o=le;le|=4;try{NT(t,e);var r=Yd,s=uS(e.containerInfo),a=r.focusedElem,l=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&lS(a.ownerDocument.documentElement,a)){if(l!==null&&fp(a)){var c=l.start,d=l.end;if(d===void 0&&(d=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(d,a.value.length);else{var p=a.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var h=m.getSelection(),g=a.textContent.length,S=Math.min(l.start,g),x=l.end===void 0?S:Math.min(l.end,g);!h.extend&&S>x&&(s=x,x=S,S=s);var y=wv(a,S),v=wv(a,x);if(y&&v&&(h.rangeCount!==1||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==v.node||h.focusOffset!==v.offset)){var T=p.createRange();T.setStart(y.node,y.offset),h.removeAllRanges(),S>x?(h.addRange(T),h.extend(v.node,v.offset)):(T.setEnd(v.node,v.offset),h.addRange(T))}}}}for(p=[],h=a;h=h.parentNode;)h.nodeType===1&&p.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<p.length;a++){var A=p[a];A.element.scrollLeft=A.left,A.element.scrollTop=A.top}}Ol=!!$d,Yd=$d=null}finally{le=o,ue.p=i,z.T=n}}e.current=t,Ve=2}}function YT(){if(Ve===2){Ve=0;var e=bi,t=dr,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=z.T,z.T=null;var i=ue.p;ue.p=2;var o=le;le|=4;try{ET(e,t.alternate,t)}finally{le=o,ue.p=i,z.T=n}}Ve=3}}function JT(){if(Ve===4||Ve===3){Ve=0,sw();var e=bi,t=dr,n=Qn,i=LT;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ve=5:(Ve=0,dr=bi=null,KT(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(wi=null),op(n),t=t.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Gs,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=z.T,o=ue.p,ue.p=2,z.T=null;try{for(var r=e.onRecoverableError,s=0;s<i.length;s++){var a=i[s];r(a.value,{componentStack:a.stack})}}finally{z.T=t,ue.p=o}}(Qn&3)!==0&&eu(),_n(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===Bd?Es++:(Es=0,Bd=e):Es=0,Ks(0,!1)}}function KT(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,$s(t)))}function eu(){return $T(),YT(),JT(),XT()}function XT(){if(Ve!==5)return!1;var e=bi,t=Gd;Gd=0;var n=op(Qn),i=z.T,o=ue.p;try{ue.p=32>n?32:n,z.T=null,n=qd,qd=null;var r=bi,s=Qn;if(Ve=0,dr=bi=null,Qn=0,(le&6)!==0)throw Error(b(331));var a=le;if(le|=4,DT(r.current),IT(r,r.current,s,n),le=a,Ks(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Gs,r)}catch{}return!0}finally{ue.p=o,z.T=i,KT(e,t)}}function r0(e,t,n){t=Xt(n,t),t=Pd(e.stateNode,t,2),e=_i(e,t,2),e!==null&&(Bs(e,2),_n(e))}function de(e,t,n){if(e.tag===3)r0(e,e,n);else for(;t!==null;){if(t.tag===3){r0(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wi===null||!wi.has(i))){e=Xt(n,e),n=cT(2),i=_i(t,n,2),i!==null&&(fT(n,i,t,e),Bs(i,2),_n(i));break}}t=t.return}}function jf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new kb;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(Hp=!0,o.add(n),e=Fb.bind(null,e,t,n),t.then(e,e))}function Fb(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Se===e&&(j&n)===n&&(ke===4||ke===3&&(j&62914560)===j&&300>Ut()-Zl?(le&2)===0&&pr(e,0):Gp|=n,fr===j&&(fr=0)),_n(e)}function QT(e,t){t===0&&(t=q0()),e=co(e,t),e!==null&&(Bs(e,t),_n(e))}function Ob(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),QT(e,n)}function Hb(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(b(314))}i!==null&&i.delete(t),QT(e,n)}function Gb(e,t){return np(e,t)}var Ml=null,Ho=null,Vd=!1,kl=!1,ed=!1,xi=0;function _n(e){e!==Ho&&e.next===null&&(Ho===null?Ml=Ho=e:Ho=Ho.next=e),kl=!0,Vd||(Vd=!0,Bb())}function Ks(e,t){if(!ed&&kl){ed=!0;do for(var n=!1,i=Ml;i!==null;){if(!t)if(e!==0){var o=i.pendingLanes;if(o===0)var r=0;else{var s=i.suspendedLanes,a=i.pingedLanes;r=(1<<31-Lt(42|e)+1)-1,r&=o&~(s&~a),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,s0(i,r))}else r=j,r=Gl(i,i===Se?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(r&3)===0||qs(i,r)||(n=!0,s0(i,r));i=i.next}while(n);ed=!1}}function qb(){ZT()}function ZT(){kl=Vd=!1;var e=0;xi!==0&&Qb()&&(e=xi);for(var t=Ut(),n=null,i=Ml;i!==null;){var o=i.next,r=WT(i,t);r===0?(i.next=null,n===null?Ml=o:n.next=o,o===null&&(Ho=n)):(n=i,(e!==0||(r&3)!==0)&&(kl=!0)),i=o}Ve!==0&&Ve!==5||Ks(e,!1),xi!==0&&(xi=0)}function WT(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var s=31-Lt(r),a=1<<s,l=o[s];l===-1?((a&n)===0||(a&i)!==0)&&(o[s]=mw(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}if(t=Se,n=j,n=Gl(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(fe===2||fe===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Rf(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||qs(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Rf(i),op(n)){case 2:case 8:n=H0;break;case 32:n=ml;break;case 268435456:n=G0;break;default:n=ml}return i=jT.bind(null,e),n=np(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Rf(i),e.callbackPriority=2,e.callbackNode=null,2}function jT(e,t){if(Ve!==0&&Ve!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(eu()&&e.callbackNode!==n)return null;var i=j;return i=Gl(e,e===Se?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(OT(e,i,t),WT(e,Ut()),e.callbackNode!=null&&e.callbackNode===n?jT.bind(null,e):null)}function s0(e,t){if(eu())return null;OT(e,t,!0)}function Bb(){Wb(function(){(le&6)!==0?np(O0,qb):ZT()})}function Bp(){if(xi===0){var e=lr;e===0&&(e=Da,Da<<=1,(Da&261888)===0&&(Da=256)),xi=e}return xi}function a0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Za(""+e)}function l0(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Vb(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var r=a0((o[Et]||null).action),s=i.submitter;s&&(t=(t=s[Et]||null)?a0(t.formAction):s.getAttribute("formAction"),t!==null&&(r=t,s=null));var a=new ql("action","action",null,i,o);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(xi!==0){var l=s?l0(o,s):new FormData(o);Dd(n,{pending:!0,data:l,method:o.method,action:r},null,l)}}else typeof r=="function"&&(a.preventDefault(),l=s?l0(o,s):new FormData(o),Dd(n,{pending:!0,data:l,method:o.method,action:r},r,l))},currentTarget:o}]})}}for($a=0;$a<xd.length;$a++)Ya=xd[$a],u0=Ya.toLowerCase(),c0=Ya[0].toUpperCase()+Ya.slice(1),ln(u0,"on"+c0);var Ya,u0,c0,$a;ln(fS,"onAnimationEnd");ln(dS,"onAnimationIteration");ln(pS,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(ab,"onTransitionRun");ln(lb,"onTransitionStart");ln(ub,"onTransitionCancel");ln(mS,"onTransitionEnd");sr("onMouseEnter",["mouseout","mouseover"]);sr("onMouseLeave",["mouseout","mouseover"]);sr("onPointerEnter",["pointerout","pointerover"]);sr("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Us));function ex(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&o.isPropagationStopped())break e;r=a,o.currentTarget=c;try{r(o)}catch(d){gl(d)}o.currentTarget=null,r=l}else for(s=0;s<i.length;s++){if(a=i[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&o.isPropagationStopped())break e;r=a,o.currentTarget=c;try{r(o)}catch(d){gl(d)}o.currentTarget=null,r=l}}}}function Z(e,t){var n=t[pd];n===void 0&&(n=t[pd]=new Set);var i=e+"__bubble";n.has(i)||(tx(t,e,2,!1),n.add(i))}function td(e,t,n){var i=0;t&&(i|=4),tx(n,e,i,t)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function Vp(e){if(!e[Ja]){e[Ja]=!0,Y0.forEach(function(n){n!=="selectionchange"&&(zb.has(n)||td(n,!1,e),td(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ja]||(t[Ja]=!0,td("selectionchange",!1,t))}}function tx(e,t,n,i){switch(mx(t)){case 2:var o=vN;break;case 8:o=SN;break;default:o=Jp}n=o.bind(null,t,n,e),o=void 0,!vd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function nd(e,t,n,i,o){var r=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var a=i.stateNode.containerInfo;if(a===o)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===o)return;s=s.return}for(;a!==null;){if(s=Bo(a),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){i=r=s;continue e}a=a.parentNode}}i=i.return}eS(function(){var c=r,d=ap(n),p=[];e:{var m=hS.get(e);if(m!==void 0){var h=ql,g=e;switch(e){case"keypress":if(ja(n)===0)break e;case"keydown":case"keyup":h=Hw;break;case"focusin":g="focus",h=Uf;break;case"focusout":g="blur",h=Uf;break;case"beforeblur":case"afterblur":h=Uf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=yv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Bw;break;case fS:case dS:case pS:h=Iw;break;case mS:h=zw;break;case"scroll":case"scrollend":h=_w;break;case"wheel":h=Yw;break;case"copy":case"cut":case"paste":h=kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Sv;break;case"toggle":case"beforetoggle":h=Kw}var S=(t&4)!==0,x=!S&&(e==="scroll"||e==="scrollend"),y=S?m!==null?m+"Capture":null:m;S=[];for(var v=c,T;v!==null;){var A=v;if(T=A.stateNode,A=A.tag,A!==5&&A!==26&&A!==27||T===null||y===null||(A=ws(v,y),A!=null&&S.push(Ps(v,A,T))),x)break;v=v.return}0<S.length&&(m=new h(m,g,null,n,d),p.push({event:m,listeners:S}))}}if((t&7)===0){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==yd&&(g=n.relatedTarget||n.fromElement)&&(Bo(g)||g[gr]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=c,g=g?Bo(g):null,g!==null&&(x=Hs(g),S=g.tag,g!==x||S!==5&&S!==27&&S!==6)&&(g=null)):(h=null,g=c),h!==g)){if(S=yv,A="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(S=Sv,A="onPointerLeave",y="onPointerEnter",v="pointer"),x=h==null?m:us(h),T=g==null?m:us(g),m=new S(A,v+"leave",h,n,d),m.target=x,m.relatedTarget=T,A=null,Bo(d)===c&&(S=new S(y,v+"enter",g,n,d),S.target=T,S.relatedTarget=x,A=S),x=A,h&&g)t:{for(S=$b,y=h,v=g,T=0,A=y;A;A=S(A))T++;A=0;for(var C=v;C;C=S(C))A++;for(;0<T-A;)y=S(y),T--;for(;0<A-T;)v=S(v),A--;for(;T--;){if(y===v||v!==null&&y===v.alternate){S=y;break t}y=S(y),v=S(v)}S=null}else S=null;h!==null&&f0(p,m,h,S,!1),g!==null&&x!==null&&f0(p,x,g,S,!0)}}e:{if(m=c?us(c):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var I=Ev;else if(Av(m))if(sS)I=ob;else{I=nb;var _=tb}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&sp(c.elementType)&&(I=Ev):I=ib;if(I&&(I=I(e,c))){rS(p,I,n,d);break e}_&&_(e,m,c),e==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&gd(m,"number",m.value)}switch(_=c?us(c):window,e){case"focusin":(Av(_)||_.contentEditable==="true")&&($o=_,Sd=c,ms=null);break;case"focusout":ms=Sd=$o=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,bv(p,n,d);break;case"selectionchange":if(sb)break;case"keydown":case"keyup":bv(p,n,d)}var M;if(cp)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else zo?iS(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(nS&&n.locale!=="ko"&&(zo||R!=="onCompositionStart"?R==="onCompositionEnd"&&zo&&(M=tS()):(vi=d,lp="value"in vi?vi.value:vi.textContent,zo=!0)),_=Dl(c,R),0<_.length&&(R=new vv(R,e,null,n,d),p.push({event:R,listeners:_}),M?R.data=M:(M=oS(n),M!==null&&(R.data=M)))),(M=Qw?Zw(e,n):Ww(e,n))&&(R=Dl(c,"onBeforeInput"),0<R.length&&(_=new vv("onBeforeInput","beforeinput",null,n,d),p.push({event:_,listeners:R}),_.data=M)),Vb(p,e,c,n,d)}ex(p,t)})}function Ps(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dl(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,r=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||r===null||(o=ws(e,n),o!=null&&i.unshift(Ps(e,o,r)),o=ws(e,t),o!=null&&i.push(Ps(e,o,r))),e.tag===3)return i;e=e.return}return[]}function $b(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function f0(e,t,n,i,o){for(var r=t._reactName,s=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,o?(c=ws(n,r),c!=null&&s.unshift(Ps(n,c,l))):o||(c=ws(n,r),c!=null&&s.push(Ps(n,c,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Yb=/\r\n?/g,Jb=/\u0000|\uFFFD/g;function d0(e){return(typeof e=="string"?e:""+e).replace(Yb,`
`).replace(Jb,"")}function nx(e,t){return t=d0(t),d0(e)===t}function ge(e,t,n,i,o,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ar(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ar(e,""+i);break;case"className":La(e,"class",i);break;case"tabIndex":La(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":La(e,n,i);break;case"style":j0(e,i,r);break;case"data":if(t!=="object"){La(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Za(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&ge(e,t,"name",o.name,o,null),ge(e,t,"formEncType",o.formEncType,o,null),ge(e,t,"formMethod",o.formMethod,o,null),ge(e,t,"formTarget",o.formTarget,o,null)):(ge(e,t,"encType",o.encType,o,null),ge(e,t,"method",o.method,o,null),ge(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Za(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Yn);break;case"onScroll":i!=null&&Z("scroll",e);break;case"onScrollEnd":i!=null&&Z("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(b(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Za(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Z("beforetoggle",e),Z("toggle",e),Qa(e,"popover",i);break;case"xlinkActuate":On(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":On(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":On(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":On(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":On(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":On(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":On(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":On(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":On(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Qa(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ew.get(n)||n,Qa(e,n,i))}}function zd(e,t,n,i,o,r){switch(n){case"style":j0(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(b(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ar(e,i):(typeof i=="number"||typeof i=="bigint")&&ar(e,""+i);break;case"onScroll":i!=null&&Z("scroll",e);break;case"onScrollEnd":i!=null&&Z("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!J0.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),r=e[Et]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,o),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Qa(e,n,i)}}}function rt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Z("error",e),Z("load",e);var i=!1,o=!1,r;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(s!=null)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:ge(e,t,r,s,n,null)}}o&&ge(e,t,"srcSet",n.srcSet,n,null),i&&ge(e,t,"src",n.src,n,null);return;case"input":Z("invalid",e);var a=r=s=o=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":o=d;break;case"type":s=d;break;case"checked":l=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":a=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(b(137,t));break;default:ge(e,t,i,d,n,null)}}Q0(e,r,a,l,c,s,o,!1);return;case"select":Z("invalid",e),i=s=r=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":r=a;break;case"defaultValue":s=a;break;case"multiple":i=a;default:ge(e,t,o,a,n,null)}t=r,n=s,e.multiple=!!i,t!=null?jo(e,!!i,t,!1):n!=null&&jo(e,!!i,n,!0);return;case"textarea":Z("invalid",e),r=o=i=null;for(s in n)if(n.hasOwnProperty(s)&&(a=n[s],a!=null))switch(s){case"value":i=a;break;case"defaultValue":o=a;break;case"children":r=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(b(91));break;default:ge(e,t,s,a,n,null)}W0(e,i,o,r);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:ge(e,t,l,i,n,null)}return;case"dialog":Z("beforetoggle",e),Z("toggle",e),Z("cancel",e),Z("close",e);break;case"iframe":case"object":Z("load",e);break;case"video":case"audio":for(i=0;i<Us.length;i++)Z(Us[i],e);break;case"image":Z("error",e),Z("load",e);break;case"details":Z("toggle",e);break;case"embed":case"source":case"link":Z("error",e),Z("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:ge(e,t,c,i,n,null)}return;default:if(sp(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&zd(e,t,d,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&ge(e,t,a,i,n,null))}function Kb(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,r=null,s=null,a=null,l=null,c=null,d=null;for(h in n){var p=n[h];if(n.hasOwnProperty(h)&&p!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=p;default:i.hasOwnProperty(h)||ge(e,t,h,null,i,p)}}for(var m in i){var h=i[m];if(p=n[m],i.hasOwnProperty(m)&&(h!=null||p!=null))switch(m){case"type":r=h;break;case"name":o=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":s=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(b(137,t));break;default:h!==p&&ge(e,t,m,h,i,p)}}hd(e,s,a,l,c,d,r,o);return;case"select":h=s=a=m=null;for(r in n)if(l=n[r],n.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(r)||ge(e,t,r,null,i,l)}for(o in i)if(r=i[o],l=n[o],i.hasOwnProperty(o)&&(r!=null||l!=null))switch(o){case"value":m=r;break;case"defaultValue":a=r;break;case"multiple":s=r;default:r!==l&&ge(e,t,o,r,i,l)}t=a,n=s,i=h,m!=null?jo(e,!!n,m,!1):!!i!=!!n&&(t!=null?jo(e,!!n,t,!0):jo(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(a in n)if(o=n[a],n.hasOwnProperty(a)&&o!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:ge(e,t,a,null,i,o)}for(s in i)if(o=i[s],r=n[s],i.hasOwnProperty(s)&&(o!=null||r!=null))switch(s){case"value":m=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(b(91));break;default:o!==r&&ge(e,t,s,o,i,r)}Z0(e,m,h);return;case"option":for(var g in n)if(m=n[g],n.hasOwnProperty(g)&&m!=null&&!i.hasOwnProperty(g))switch(g){case"selected":e.selected=!1;break;default:ge(e,t,g,null,i,m)}for(l in i)if(m=i[l],h=n[l],i.hasOwnProperty(l)&&m!==h&&(m!=null||h!=null))switch(l){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ge(e,t,l,m,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in n)m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S)&&ge(e,t,S,null,i,m);for(c in i)if(m=i[c],h=n[c],i.hasOwnProperty(c)&&m!==h&&(m!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(b(137,t));break;default:ge(e,t,c,m,i,h)}return;default:if(sp(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!i.hasOwnProperty(x)&&zd(e,t,x,void 0,i,m);for(d in i)m=i[d],h=n[d],!i.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||zd(e,t,d,m,i,h);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&m!=null&&!i.hasOwnProperty(y)&&ge(e,t,y,null,i,m);for(p in i)m=i[p],h=n[p],!i.hasOwnProperty(p)||m===h||m==null&&h==null||ge(e,t,p,m,i,h)}function p0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],r=o.transferSize,s=o.initiatorType,a=o.duration;if(r&&a&&p0(s)){for(s=0,a=o.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>a)break;var d=l.transferSize,p=l.initiatorType;d&&p0(p)&&(l=l.responseEnd,s+=d*(l<a?1:(a-c)/(l-c)))}if(--i,t+=8*(r+s)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $d=null,Yd=null;function Ul(e){return e.nodeType===9?e:e.ownerDocument}function m0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ix(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Jd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var id=null;function Qb(){var e=window.event;return e&&e.type==="popstate"?e===id?!1:(id=e,!0):(id=null,!1)}var ox=typeof setTimeout=="function"?setTimeout:void 0,Zb=typeof clearTimeout=="function"?clearTimeout:void 0,h0=typeof Promise=="function"?Promise:void 0,Wb=typeof queueMicrotask=="function"?queueMicrotask:typeof h0<"u"?function(e){return h0.resolve(null).then(e).catch(jb)}:ox;function jb(e){setTimeout(function(){throw e})}function Li(e){return e==="head"}function g0(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(o),hr(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Cs(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Cs(n);for(var r=n.firstChild;r;){var s=r.nextSibling,a=r.nodeName;r[Vs]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=s}}else n==="body"&&Cs(e.ownerDocument.body);n=o}while(n);hr(t)}function y0(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Kd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Kd(n),rp(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function eN(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Vs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Wt(e.nextSibling),e===null)break}return null}function tN(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Wt(e.nextSibling),e===null))return null;return e}function rx(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Wt(e.nextSibling),e===null))return null;return e}function Xd(e){return e.data==="$?"||e.data==="$~"}function Qd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function nN(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Wt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Zd=null;function v0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Wt(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function S0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function sx(e,t,n){switch(t=Ul(n),e){case"html":if(e=t.documentElement,!e)throw Error(b(452));return e;case"head":if(e=t.head,!e)throw Error(b(453));return e;case"body":if(e=t.body,!e)throw Error(b(454));return e;default:throw Error(b(451))}}function Cs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);rp(e)}var jt=new Map,T0=new Set;function Pl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ni=ue.d;ue.d={f:iN,r:oN,D:rN,C:sN,L:aN,m:lN,X:cN,S:uN,M:fN};function iN(){var e=ni.f(),t=Wl();return e||t}function oN(e){var t=yr(e);t!==null&&t.tag===5&&t.type==="form"?jS(t):ni.r(e)}var xr=typeof document>"u"?null:document;function ax(e,t,n){var i=xr;if(i&&typeof t=="string"&&t){var o=Kt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),T0.has(o)||(T0.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),rt(t,"link",e),Ze(t),i.head.appendChild(t)))}}function rN(e){ni.D(e),ax("dns-prefetch",e,null)}function sN(e,t){ni.C(e,t),ax("preconnect",e,t)}function aN(e,t,n){ni.L(e,t,n);var i=xr;if(i&&e&&t){var o='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Kt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Kt(n.imageSizes)+'"]')):o+='[href="'+Kt(e)+'"]';var r=o;switch(t){case"style":r=mr(e);break;case"script":r=Ar(e)}jt.has(r)||(e=_e({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),jt.set(r,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(Xs(r))||t==="script"&&i.querySelector(Qs(r))||(t=i.createElement("link"),rt(t,"link",e),Ze(t),i.head.appendChild(t)))}}function lN(e,t){ni.m(e,t);var n=xr;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Kt(i)+'"][href="'+Kt(e)+'"]',r=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ar(e)}if(!jt.has(r)&&(e=_e({rel:"modulepreload",href:e},t),jt.set(r,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qs(r)))return}i=n.createElement("link"),rt(i,"link",e),Ze(i),n.head.appendChild(i)}}}function uN(e,t,n){ni.S(e,t,n);var i=xr;if(i&&e){var o=Wo(i).hoistableStyles,r=mr(e);t=t||"default";var s=o.get(r);if(!s){var a={loading:0,preload:null};if(s=i.querySelector(Xs(r)))a.loading=5;else{e=_e({rel:"stylesheet",href:e,"data-precedence":t},n),(n=jt.get(r))&&zp(e,n);var l=s=i.createElement("link");Ze(l),rt(l,"link",e),l._p=new Promise(function(c,d){l.onload=c,l.onerror=d}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,al(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:a},o.set(r,s)}}}function cN(e,t){ni.X(e,t);var n=xr;if(n&&e){var i=Wo(n).hoistableScripts,o=Ar(e),r=i.get(o);r||(r=n.querySelector(Qs(o)),r||(e=_e({src:e,async:!0},t),(t=jt.get(o))&&$p(e,t),r=n.createElement("script"),Ze(r),rt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function fN(e,t){ni.M(e,t);var n=xr;if(n&&e){var i=Wo(n).hoistableScripts,o=Ar(e),r=i.get(o);r||(r=n.querySelector(Qs(o)),r||(e=_e({src:e,async:!0,type:"module"},t),(t=jt.get(o))&&$p(e,t),r=n.createElement("script"),Ze(r),rt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function x0(e,t,n,i){var o=(o=Ai.current)?Pl(o):null;if(!o)throw Error(b(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=mr(n.href),n=Wo(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=mr(n.href);var r=Wo(o).hoistableStyles,s=r.get(e);if(s||(o=o.ownerDocument||o,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,s),(r=o.querySelector(Xs(e)))&&!r._p&&(s.instance=r,s.state.loading=5),jt.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},jt.set(e,n),r||dN(o,e,n,s.state))),t&&i===null)throw Error(b(528,""));return s}if(t&&i!==null)throw Error(b(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ar(n),n=Wo(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(b(444,e))}}function mr(e){return'href="'+Kt(e)+'"'}function Xs(e){return'link[rel="stylesheet"]['+e+"]"}function lx(e){return _e({},e,{"data-precedence":e.precedence,precedence:null})}function dN(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),rt(t,"link",n),Ze(t),e.head.appendChild(t))}function Ar(e){return'[src="'+Kt(e)+'"]'}function Qs(e){return"script[async]"+e}function A0(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Kt(n.href)+'"]');if(i)return t.instance=i,Ze(i),i;var o=_e({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Ze(i),rt(i,"style",o),al(i,n.precedence,e),t.instance=i;case"stylesheet":o=mr(n.href);var r=e.querySelector(Xs(o));if(r)return t.state.loading|=4,t.instance=r,Ze(r),r;i=lx(n),(o=jt.get(o))&&zp(i,o),r=(e.ownerDocument||e).createElement("link"),Ze(r);var s=r;return s._p=new Promise(function(a,l){s.onload=a,s.onerror=l}),rt(r,"link",i),t.state.loading|=4,al(r,n.precedence,e),t.instance=r;case"script":return r=Ar(n.src),(o=e.querySelector(Qs(r)))?(t.instance=o,Ze(o),o):(i=n,(o=jt.get(r))&&(i=_e({},n),$p(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),Ze(o),rt(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(b(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,al(i,n.precedence,e));return t.instance}function al(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,r=o,s=0;s<i.length;s++){var a=i[s];if(a.dataset.precedence===t)r=a;else if(r!==o)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function zp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function $p(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ll=null;function E0(e,t,n){if(ll===null){var i=new Map,o=ll=new Map;o.set(n,i)}else o=ll,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var r=n[o];if(!(r[Vs]||r[nt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var s=r.getAttribute(t)||"";s=e+s;var a=i.get(s);a?a.push(r):i.set(s,[r])}}return i}function C0(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function pN(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ux(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mN(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=mr(i.href),r=t.querySelector(Xs(o));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ll.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=r,Ze(r);return}r=t.ownerDocument||t,i=lx(i),(o=jt.get(o))&&zp(i,o),r=r.createElement("link"),Ze(r);var s=r;s._p=new Promise(function(a,l){s.onload=a,s.onerror=l}),rt(r,"link",i),n.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ll.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var od=0;function hN(e,t){return e.stylesheets&&e.count===0&&ul(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&ul(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&od===0&&(od=62500*Xb());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ul(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>od?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function Ll(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ul(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fl=null;function ul(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fl=new Map,t.forEach(gN,e),Fl=null,Ll.call(e))}function gN(e,t){if(!(t.state.loading&4)){var n=Fl.get(e);if(n)var i=n.get(null);else{n=new Map,Fl.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<o.length;r++){var s=o[r];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}o=t.instance,s=o.getAttribute("data-precedence"),r=n.get(s)||i,r===i&&n.set(null,o),n.set(s,o),this.count++,i=Ll.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),r?r.parentNode.insertBefore(o,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Ls={$$typeof:$n,Provider:null,Consumer:null,_currentValue:Zi,_currentValue2:Zi,_threadCount:0};function yN(e,t,n,i,o,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=If(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=If(0),this.hiddenUpdates=If(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=r,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function cx(e,t,n,i,o,r,s,a,l,c,d,p){return e=new yN(e,t,n,s,l,c,d,p,a),t=1,r===!0&&(t|=24),r=kt(3,null,null,t),e.current=r,r.stateNode=e,t=yp(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},Tp(r),e}function fx(e){return e?(e=Ko,e):Ko}function dx(e,t,n,i,o,r){o=fx(o),i.context===null?i.context=o:i.pendingContext=o,i=Ci(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=_i(e,i,t),n!==null&&(At(n,e,t),gs(n,e,t))}function _0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yp(e,t){_0(e,t),(e=e.alternate)&&_0(e,t)}function px(e){if(e.tag===13||e.tag===31){var t=co(e,67108864);t!==null&&At(t,e,67108864),Yp(e,67108864)}}function w0(e){if(e.tag===13||e.tag===31){var t=Ft();t=ip(t);var n=co(e,t);n!==null&&At(n,e,t),Yp(e,t)}}var Ol=!0;function vN(e,t,n,i){var o=z.T;z.T=null;var r=ue.p;try{ue.p=2,Jp(e,t,n,i)}finally{ue.p=r,z.T=o}}function SN(e,t,n,i){var o=z.T;z.T=null;var r=ue.p;try{ue.p=8,Jp(e,t,n,i)}finally{ue.p=r,z.T=o}}function Jp(e,t,n,i){if(Ol){var o=Wd(i);if(o===null)nd(e,t,i,Hl,n),b0(e,i);else if(xN(o,e,t,n,i))i.stopPropagation();else if(b0(e,i),t&4&&-1<TN.indexOf(e)){for(;o!==null;){var r=yr(o);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var s=Ki(r.pendingLanes);if(s!==0){var a=r;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-Lt(s);a.entanglements[1]|=l,s&=~l}_n(r),(le&6)===0&&(Nl=Ut()+500,Ks(0,!1))}}break;case 31:case 13:a=co(r,2),a!==null&&At(a,r,2),Wl(),Yp(r,2)}if(r=Wd(i),r===null&&nd(e,t,i,Hl,n),r===o)break;o=r}o!==null&&i.stopPropagation()}else nd(e,t,i,null,n)}}function Wd(e){return e=ap(e),Kp(e)}var Hl=null;function Kp(e){if(Hl=null,e=Bo(e),e!==null){var t=Hs(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=D0(t),e!==null)return e;e=null}else if(n===31){if(e=U0(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Hl=e,null}function mx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(aw()){case O0:return 2;case H0:return 8;case ml:case lw:return 32;case G0:return 268435456;default:return 32}default:return 32}}var jd=!1,Ni=null,Ri=null,Ii=null,Fs=new Map,Os=new Map,gi=[],TN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b0(e,t){switch(e){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Fs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(t.pointerId)}}function rs(e,t,n,i,o,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[o]},t!==null&&(t=yr(t),t!==null&&px(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function xN(e,t,n,i,o){switch(t){case"focusin":return Ni=rs(Ni,e,t,n,i,o),!0;case"dragenter":return Ri=rs(Ri,e,t,n,i,o),!0;case"mouseover":return Ii=rs(Ii,e,t,n,i,o),!0;case"pointerover":var r=o.pointerId;return Fs.set(r,rs(Fs.get(r)||null,e,t,n,i,o)),!0;case"gotpointercapture":return r=o.pointerId,Os.set(r,rs(Os.get(r)||null,e,t,n,i,o)),!0}return!1}function hx(e){var t=Bo(e.target);if(t!==null){var n=Hs(t);if(n!==null){if(t=n.tag,t===13){if(t=D0(n),t!==null){e.blockedOn=t,cv(e.priority,function(){w0(n)});return}}else if(t===31){if(t=U0(n),t!==null){e.blockedOn=t,cv(e.priority,function(){w0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);yd=i,n.target.dispatchEvent(i),yd=null}else return t=yr(n),t!==null&&px(t),e.blockedOn=n,!1;t.shift()}return!0}function N0(e,t,n){cl(e)&&n.delete(t)}function AN(){jd=!1,Ni!==null&&cl(Ni)&&(Ni=null),Ri!==null&&cl(Ri)&&(Ri=null),Ii!==null&&cl(Ii)&&(Ii=null),Fs.forEach(N0),Os.forEach(N0)}function Ka(e,t){e.blockedOn===t&&(e.blockedOn=null,jd||(jd=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,AN)))}var Xa=null;function R0(e){Xa!==e&&(Xa=e,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,function(){Xa===e&&(Xa=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(Kp(i||n)===null)continue;break}var r=yr(n);r!==null&&(e.splice(t,3),t-=3,Dd(r,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function hr(e){function t(l){return Ka(l,e)}Ni!==null&&Ka(Ni,e),Ri!==null&&Ka(Ri,e),Ii!==null&&Ka(Ii,e),Fs.forEach(t),Os.forEach(t);for(var n=0;n<gi.length;n++){var i=gi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<gi.length&&(n=gi[0],n.blockedOn===null);)hx(n),n.blockedOn===null&&gi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],r=n[i+1],s=o[Et]||null;if(typeof r=="function")s||R0(n);else if(s){var a=null;if(r&&r.hasAttribute("formAction")){if(o=r,s=r[Et]||null)a=s.formAction;else if(Kp(o)!==null)continue}else a=s.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),R0(n)}}}function gx(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(s){return o=s})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Xp(e){this._internalRoot=e}tu.prototype.render=Xp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));var n=t.current,i=Ft();dx(n,i,e,t,null,null)};tu.prototype.unmount=Xp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dx(e.current,2,null,e,null,null),Wl(),t[gr]=null}};function tu(e){this._internalRoot=e}tu.prototype.unstable_scheduleHydration=function(e){if(e){var t=$0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gi.length&&t!==0&&t<gi[n].priority;n++);gi.splice(n,0,e),n===0&&hx(e)}};var I0=M0.version;if(I0!=="19.2.3")throw Error(b(527,I0,"19.2.3"));ue.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=ew(t),e=e!==null?P0(e):null,e=e===null?null:e.stateNode,e};var EN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(ss=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ss.isDisabled&&ss.supportsFiber))try{Gs=ss.inject(EN),Pt=ss}catch{}var ss;nu.createRoot=function(e,t){if(!k0(e))throw Error(b(299));var n=!1,i="",o=aT,r=lT,s=uT;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=cx(e,1,!1,null,null,n,i,null,o,r,s,gx),e[gr]=t.current,Vp(e),new Xp(t)};nu.hydrateRoot=function(e,t,n){if(!k0(e))throw Error(b(299));var i=!1,o="",r=aT,s=lT,a=uT,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),t=cx(e,1,!0,t,n??null,i,o,l,r,s,a,gx),t.context=fx(null),n=t.current,i=Ft(),i=ip(i),o=Ci(i),o.callback=null,_i(n,o,i),n=i,t.current.lanes=n,Bs(t,n),_n(t),e[gr]=t.current,Vp(e),new tu(t)};nu.version="19.2.3"});var Tx=vn(($O,Sx)=>{"use strict";function vx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vx)}catch(e){console.error(e)}}vx(),Sx.exports=yx()});var xx,Ax,Ex,Er,iu,Zs,Cx,Qp,Zp,_x,wx,bx,Wp,ou,Nx,Rx,Ix=Io(()=>{xx="hermes_os_settings",Ax="hermes_os_chat_history",Ex="hermes_os_archived_conversations",Er=new Map,iu=null,Zs=null,Cx=e=>{try{let t={...e};iu=t,Er.set(xx,JSON.stringify(t))}catch(t){console.error("Failed to save settings",t)}return Promise.resolve()},Qp=()=>{if(iu)return iu;let e=Er.get(xx);if(!e)return null;try{return JSON.parse(e)}catch(t){return console.error("Failed to load settings",t),null}},Zp=()=>Promise.resolve(Qp()),_x=()=>(iu=null,Zp()),wx=e=>{try{let t=["<noise>","<ctrl46>"],n=e.map(i=>{let o=i;return t.forEach(r=>{let s=new RegExp(r,"gi");o=o.replace(s,"")}),o.trim()});Er.set(Ax,JSON.stringify(n))}catch(t){console.error("Failed to save chat history",t)}return Promise.resolve()},bx=()=>{let e=Er.get(Ax);if(!e)return[];try{return JSON.parse(e)}catch(t){return console.error("Failed to load chat history",t),[]}},Wp=e=>{try{Zs=e,Er.set(Ex,JSON.stringify(e))}catch(t){console.error("Failed to save archived conversations",t)}return Promise.resolve()},ou=()=>{if(Zs)return Promise.resolve(Zs);let e=Er.get(Ex);if(!e)return Promise.resolve([]);try{return Zs=JSON.parse(e),Promise.resolve(Zs)}catch(t){return console.error("Failed to load archived conversations",t),Promise.resolve([])}},Nx=async e=>{let n=[...await ou(),e];await Wp(n)},Rx=async e=>{let n=(await ou()).filter(i=>i.key!==e);await Wp(n)}});var bn,wn,Ws,Mx,jp,kx,Dx,Ux,Px,em,Lx,Fx,Ox,tm,ru,Hx,Gx,qx=Io(()=>{bn=null,wn=null,Ws=null,Mx=Promise.resolve(),jp=async e=>{let t=Mx,n;Mx=new Promise(i=>{n=i});try{if(await t,!bn){console.warn("persistData called without obsidianPlugin");return}let i=await bn.loadData()||{},o=e(i);await bn.saveData(o)}catch(i){console.error("Failed to persist data",i)}finally{n()}},kx=e=>{bn=e},Dx=()=>bn,Ux=async e=>{let t={...e};wn=t,await jp(n=>({...n,...t}))},Px=()=>wn||null,em=async()=>{if(bn)try{wn=await bn.loadData()||{};let t=bn.settings;return t&&(wn={...wn,...t}),wn}catch(e){return console.error("Failed to load settings from Obsidian",e),null}return null},Lx=async()=>(wn=null,await em()),Fx=async e=>{let t=["<noise>","<ctrl46>"],n=e.map(i=>{let o=i;return t.forEach(r=>{let s=new RegExp(r,"gi");o=o.replace(s,"")}),o.trim()});await jp(i=>({...i,chatHistory:n}))},Ox=()=>wn?.chatHistory?wn.chatHistory:[],tm=async e=>{Ws=e,await jp(t=>({...t,archivedConversations:e}))},ru=async()=>{if(Ws)return Ws;if(bn)try{return Ws=(await bn.loadData())?.archivedConversations||[],Ws}catch(e){return console.error("Failed to load archived conversations",e),[]}return[]},Hx=async e=>{let n=[...await ru(),e];await tm(n)},Gx=async e=>{let n=(await ru()).filter(i=>i.key!==e);await tm(n)}});var Nn,Bx,Vx,su,je,zx,au,nm,Rn,Cr,$x,Yx,ht=Io(()=>{Ix();qx();Nn=!1,Bx=e=>{Nn=!0,kx(e)},Vx=()=>Dx(),su=async e=>Nn?Ux(e):Cx(e),je=()=>Nn?Px():Qp(),zx=async()=>Nn?em():Zp(),au=async()=>Nn?Lx():_x(),nm=async e=>Nn?Fx(e):wx(e),Rn=()=>Nn?Ox():bx(),Cr=async()=>Nn?ru():ou(),$x=async e=>Nn?Hx(e):Nx(e),Yx=async e=>Nn?Gx(e):Rx(e)});function ve(){return Vx()?.app??null}function un(){return ve()!==null}async function et(e,t={}){if(!un())return!1;try{let n=ve();if(!n)return!1;let i=n.vault.getAbstractFileByPath(e);if(!i||!(i instanceof lu.TFile))return console.warn(`File not found: ${e}`),!1;let{newWindow:o=!1,split:r=!1}=t,s=n.workspace;if(!o&&!r){let l=s.getLeavesOfType("markdown").find(c=>c.view instanceof lu.MarkdownView&&c.view.file?.path===e);if(l)return s.setActiveLeaf(l,{focus:!0}),!0}let a;return r?a=s.getLeaf("split"):o?a=s.getLeaf(!0):a=s.getLeaf(!1),await a.openFile(i),!0}catch(n){return console.warn("Failed to open file in Obsidian:",n),!1}}function $e(e){if(!e||typeof e!="string")return"/";let t=e.startsWith("/")?e.slice(1):e,n=t.lastIndexOf("/");if(n===-1)return"/";let i=t.substring(0,n);return i.startsWith("/")?i:`/${i}/`}var lu,we=Io(()=>{lu=require("obsidian");ht()});var Ye,im,Jx,en,Kx,In,js,uu,Xx,Gt,Qx,cu,po,Zx,Wx,jx,fu,eA,du,De=Io(()=>{Ye=require("obsidian");ht();we();im=e=>"children"in e,Jx=e=>e.endsWith("/")?e.slice(0,-1):e,en=()=>{let e=ve();if(!e)throw new Error("Obsidian app not available");return e},Kx=async()=>{},In=()=>en().vault.getMarkdownFiles().map(n=>n.path).filter(n=>!n.startsWith("chat history/trash/")),js=e=>{let{limit:t=20,offset:n=0,sortBy:i="mtime",sortOrder:o="desc",filter:r}=e,a=en().vault.getMarkdownFiles().filter(d=>!d.path.startsWith("chat history/trash/")).map(d=>({path:d.path,name:d.name,mtime:d.stat.mtime,size:d.stat.size}));if(r){let d=r.toLowerCase();a=a.filter(p=>p.path.toLowerCase().includes(d)||p.name.toLowerCase().includes(d))}a.sort((d,p)=>{let m=d[i],h=p[i];return typeof m=="string"&&typeof h=="string"&&(m=m.toLowerCase(),h=h.toLowerCase()),m<h?o==="asc"?-1:1:m>h?o==="asc"?1:-1:0});let l=a.length,c=a.slice(n,n+t);return Promise.resolve({files:c,total:l})},uu=e=>{let t=en(),n=t.vault.getAllLoadedFiles();if(e){let i=Jx(e),o=t.vault.getAbstractFileByPath((0,Ye.normalizePath)(i));if(o||(o=t.vault.getAbstractFileByPath((0,Ye.normalizePath)(e))),!o&&!e.endsWith("/")&&(o=t.vault.getAbstractFileByPath((0,Ye.normalizePath)(e+"/"))),!o||!im(o)){let r=[`Original path: "${e}"`,`Normalized path: "${i}"`,`With trailing slash: "${e+"/"}"`].join(", ");throw new Error(`Folder not found: ${e}. Attempted: ${r}`)}return n.filter(r=>{let s=i||e;return r.path.startsWith(s+"/")||r.path===s}).map(r=>r.path).sort()}return n.filter(i=>im(i)&&i.path!=="chat history/trash").map(i=>i.path).sort()},Xx=()=>en().vault.getAllLoadedFiles().filter(n=>im(n)&&n.path!=="chat history/trash").map(n=>({path:n.path,children:[]})),Gt=async e=>{let t=en(),n=t.vault.getAbstractFileByPath((0,Ye.normalizePath)(e));if(!n||!(n instanceof Ye.TFile))throw new Error(`File not found in vault: ${e}`);return await t.vault.read(n)},Qx=async(e,t)=>{let n=en(),i=e.substring(0,e.lastIndexOf("/"));i&&i.length>0&&(await n.vault.adapter.exists(i)||await n.vault.createFolder(i));let o=t instanceof Uint8Array?t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):t;return await n.vault.adapter.writeBinary(e,o),`Created binary file ${e} in vault`},cu=async(e,t)=>{let n=en(),i=(0,Ye.normalizePath)(e),o=i.substring(0,i.lastIndexOf("/"));return o&&o.length>0&&(n.vault.getAbstractFileByPath((0,Ye.normalizePath)(o))||await n.vault.createFolder(o)),await n.vault.create(i,t),`Created ${e} in vault`},po=async(e,t)=>{let n=en(),i=n.vault.getAbstractFileByPath((0,Ye.normalizePath)(e));if(!i||!(i instanceof Ye.TFile))throw new Error(`File not found: ${e}`);return await n.vault.modify(i,t),`Updated ${e} in vault`},Zx=async(e,t)=>{let n=en(),i=n.vault.getAbstractFileByPath((0,Ye.normalizePath)(e));if(!i)throw new Error(`File not found: ${e}`);return await n.fileManager.renameFile(i,(0,Ye.normalizePath)(t)),`Renamed ${e} to ${t} in vault`},Wx=async(e,t)=>{let n=en(),i=(0,Ye.normalizePath)(e),o=(0,Ye.normalizePath)(t),r=n.vault.getAbstractFileByPath(i);if(!r)throw new Error(`Source file not found: ${e}`);if(n.vault.getAbstractFileByPath(o))throw new Error(`Target file already exists: ${t}`);return await n.fileManager.renameFile(r,o),`Moved ${e} to ${t} in vault`},jx=async(e,t,n,i)=>{let r=(await Gt(e)).split(`
`);if(t==="append")r.push(n||"");else if(t==="replace_line"){if(i===void 0||i<1||i>r.length)throw new Error(`Invalid line number: ${i}`);r[i-1]=n||""}else if(t==="remove_line"){if(i===void 0||i<1||i>r.length)throw new Error(`Invalid line number: ${i}`);r.splice(i-1,1)}else throw new Error(`Unknown operation: ${t}`);let s=r.join(`
`);return await po(e,s),`Successfully performed ${t} on ${e}`},fu=async e=>{let t=en(),n=(0,Ye.normalizePath)(Jx(e));if(t.vault.getAbstractFileByPath(n))return`Directory ${n} already exists`;let o=n.substring(0,n.lastIndexOf("/"));return o&&o.length>0&&(t.vault.getAbstractFileByPath((0,Ye.normalizePath)(o))||await t.vault.createFolder(o)),await t.vault.createFolder(n),`Created directory ${n} in vault`},eA=async e=>{let t=en(),n=t.vault.getAbstractFileByPath((0,Ye.normalizePath)(e));if(!n)throw new Error(`File not found: ${e}`);let r=`${je()?.chatHistoryFolder||"chat-history"}/trash`;t.vault.getAbstractFileByPath((0,Ye.normalizePath)(r))||await t.vault.createFolder(r);let a=new Date().toISOString().replace(/[:.]/g,"-"),l=e.split("/").pop()||e,c=`${r}/${a}-${l}`;return await t.fileManager.renameFile(n,c),`Moved ${e} to trash`},du=async(e,t=!1,n="i")=>{let i=In(),o=[],r=t?new RegExp(e,n):null,s=t?"":e.toLowerCase();for(let a of i){let c=(await Gt(a)).split(`
`),d=[];c.forEach((p,m)=>{let h=!1;t&&r?h=r.test(p):h=p.toLowerCase().includes(s),h&&d.push({line:m+1,content:p,contextBefore:c.slice(Math.max(0,m-2),m),contextAfter:c.slice(m+1,Math.min(c.length,m+3))})}),d.length>0&&o.push({filename:a,matches:d})}return o}});var fE={};ae(fE,{ActivityHandling:()=>th,AdapterSize:()=>Rm,ApiError:()=>Hi,ApiSpec:()=>cm,AuthType:()=>fm,Batches:()=>Lu,Behavior:()=>mm,BlockedReason:()=>_m,Caches:()=>Fu,CancelTuningJobResponse:()=>la,Chat:()=>Gu,Chats:()=>Hu,ComputeTokensResponse:()=>wu,ContentReferenceImage:()=>Eh,ControlReferenceImage:()=>Th,ControlReferenceType:()=>Om,CountTokensResponse:()=>sa,CreateFileResponse:()=>Mu,DeleteCachedContentResponse:()=>ua,DeleteFileResponse:()=>ku,DeleteModelResponse:()=>ra,DocumentState:()=>Ym,DynamicRetrievalConfigMode:()=>hm,EditImageResponse:()=>Au,EditMode:()=>Gm,EmbedContentResponse:()=>na,EndSensitivity:()=>eh,Environment:()=>Dm,FeatureSelectionPreference:()=>km,FileSource:()=>Km,FileState:()=>Jm,Files:()=>qu,FinishReason:()=>xm,FunctionCallingConfigMode:()=>gm,FunctionResponse:()=>lh,FunctionResponseBlob:()=>rh,FunctionResponseFileData:()=>sh,FunctionResponsePart:()=>ah,FunctionResponseScheduling:()=>um,GenerateContentResponse:()=>Fi,GenerateContentResponsePromptFeedback:()=>ch,GenerateContentResponseUsageMetadata:()=>fh,GenerateImagesResponse:()=>ia,GenerateVideosOperation:()=>yo,GenerateVideosResponse:()=>dh,GoogleGenAI:()=>Dn,HarmBlockMethod:()=>Sm,HarmBlockThreshold:()=>Tm,HarmCategory:()=>vm,HarmProbability:()=>Am,HarmSeverity:()=>Em,HttpElementLocation:()=>dm,HttpResponse:()=>Nr,ImagePromptLanguage:()=>Lm,ImportFileOperation:()=>Rr,ImportFileResponse:()=>ph,InlinedEmbedContentResponse:()=>gh,InlinedResponse:()=>mh,JobState:()=>Tu,Language:()=>lm,ListBatchJobsResponse:()=>fa,ListCachedContentsResponse:()=>ca,ListDocumentsResponse:()=>bu,ListFileSearchStoresResponse:()=>Nu,ListFilesResponse:()=>Iu,ListModelsResponse:()=>oa,ListTuningJobsResponse:()=>aa,Live:()=>Bu,LiveClientToolResponse:()=>Ch,LiveMusicPlaybackControl:()=>ho,LiveMusicServerMessage:()=>Uu,LiveSendToolResponseParameters:()=>_h,LiveServerMessage:()=>Du,MaskReferenceImage:()=>Sh,MaskReferenceMode:()=>Fm,MediaModality:()=>Qm,MediaResolution:()=>bm,Modality:()=>go,Models:()=>zu,MusicGenerationMode:()=>oh,Operations:()=>$u,Outcome:()=>am,PagedItem:()=>Mn,Pager:()=>kn,PartMediaResolutionLevel:()=>Mm,PersonGeneration:()=>Pm,PhishBlockThreshold:()=>pm,RawReferenceImage:()=>vh,RecontextImageResponse:()=>Cu,ReplayResponse:()=>yh,ResourceScope:()=>xu,SafetyFilterLevel:()=>Um,Scale:()=>ih,SegmentImageResponse:()=>_u,SegmentMode:()=>qm,Session:()=>Vu,SingleEmbedContentResponse:()=>hh,StartSensitivity:()=>jm,StyleReferenceImage:()=>xh,SubjectReferenceImage:()=>Ah,SubjectReferenceType:()=>Hm,ThinkingLevel:()=>ym,Tokens:()=>Yu,TrafficType:()=>wm,TuningMethod:()=>$m,TuningMode:()=>Nm,TuningTask:()=>Im,TurnCompleteReason:()=>Xm,TurnCoverage:()=>nh,Type:()=>w,UploadToFileSearchStoreOperation:()=>Ir,UploadToFileSearchStoreResponse:()=>wh,UploadToFileSearchStoreResumableResponse:()=>Ru,UpscaleImageResponse:()=>Eu,UrlRetrievalStatus:()=>Cm,VadSignalType:()=>Zm,VideoCompressionQuality:()=>zm,VideoGenerationMaskMode:()=>Vm,VideoGenerationReferenceType:()=>Bm,VoiceActivityType:()=>Wm,createFunctionResponsePartFromBase64:()=>zN,createFunctionResponsePartFromUri:()=>$N,createModelContent:()=>jN,createPartFromBase64:()=>XN,createPartFromCodeExecutionResult:()=>QN,createPartFromExecutableCode:()=>ZN,createPartFromFunctionCall:()=>JN,createPartFromFunctionResponse:()=>KN,createPartFromText:()=>uh,createPartFromUri:()=>YN,createUserContent:()=>WN,mcpToTool:()=>_k,setDefaultBaseUrls:()=>wN});function wN(e){bA=e.geminiUrl,NA=e.vertexUrl}function bN(){return{geminiUrl:bA,vertexUrl:NA}}function NN(e,t,n,i){var o,r;if(!e?.baseUrl){let s=bN();return t?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(r=s.geminiUrl)!==null&&r!==void 0?r:i}return e.baseUrl}function D(e,t){let n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){let r=t[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(e,t,n){for(let r=0;r<t.length-1;r++){let s=t[r];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[a])){let l=e[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){let d=l[c];f(d,t.slice(r+1),n[c])}else for(let c of l)f(c,t.slice(r+1),n)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in e||(e[a]=[{}]);let l=e[a];f(l[0],t.slice(r+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}let i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function u(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;let o=t[i];if(o.endsWith("[]")){let r=o.slice(0,-2);if(r in e){let s=e[r];return Array.isArray(s)?s.map(a=>u(a,t.slice(i+1),n)):n}else return n}else e=e[o]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function RN(e,t){for(let[n,i]of Object.entries(t)){let o=n.split("."),r=i.split("."),s=new Set,a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&r.length>a)for(let l=a;l<r.length;l++){let c=r[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}sm(e,o,r,0,s)}}function sm(e,t,n,i,o){if(i>=t.length||typeof e!="object"||e===null)return;let r=t[i];if(r.endsWith("[]")){let s=r.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(let l of a[s])sm(l,t,n,i+1,o)}else if(r==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){let s=e,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!o.has(c)),l={};for(let c of a)l[c]=s[c];for(let[c,d]of Object.entries(l)){let p=[];for(let m of n.slice(i))m==="*"?p.push(c):p.push(m);f(s,p,d)}for(let c of a)delete s[c]}}else{let s=e;r in s&&sm(s[r],t,n,i+1,o)}}function Xh(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function IN(e){let t={},n=u(e,["operationName"]);n!=null&&f(t,["operationName"],n);let i=u(e,["resourceName"]);return i!=null&&f(t,["_url","resourceName"],i),t}function MN(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],DN(s)),t}function kN(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],UN(s)),t}function DN(e){let t={},n=u(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>PN(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function UN(e){let t={},n=u(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>LN(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function PN(e){let t={},n=u(e,["video"]);return n!=null&&f(t,["video"],BN(n)),t}function LN(e){let t={},n=u(e,["_self"]);return n!=null&&f(t,["video"],VN(n)),t}function FN(e){let t={},n=u(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function ON(e){let t={},n=u(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function HN(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],GN(s)),t}function GN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["parent"]);i!=null&&f(t,["parent"],i);let o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function RA(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],qN(s)),t}function qN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["parent"]);i!=null&&f(t,["parent"],i);let o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function BN(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);let i=u(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],Xh(i));let o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function VN(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["uri"],n);let i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],Xh(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function zN(e,t){return{inlineData:{data:e,mimeType:t}}}function $N(e,t){return{fileData:{fileUri:e,mimeType:t}}}function YN(e,t,n){return Object.assign({fileData:{fileUri:e,mimeType:t}},n&&{mediaResolution:{level:n}})}function uh(e){return{text:e}}function JN(e,t){return{functionCall:{name:e,args:t}}}function KN(e,t,n,i=[]){return{functionResponse:Object.assign({id:e,name:t,response:n},i.length>0&&{parts:i})}}function XN(e,t,n){return Object.assign({inlineData:{data:e,mimeType:t}},n&&{mediaResolution:{level:n}})}function QN(e,t){return{codeExecutionResult:{outcome:e,output:t}}}function ZN(e,t){return{executableCode:{code:e,language:t}}}function tA(e){return typeof e=="object"&&e!==null?"fileData"in e||"text"in e||"functionCall"in e||"functionResponse"in e||"inlineData"in e||"videoMetadata"in e||"codeExecutionResult"in e||"executableCode"in e:!1}function IA(e){let t=[];if(typeof e=="string")t.push(uh(e));else if(tA(e))t.push(e);else if(Array.isArray(e)){if(e.length===0)throw new Error("partOrString cannot be an empty array");for(let n of e)if(typeof n=="string")t.push(uh(n));else if(tA(n))t.push(n);else throw new Error("element in PartUnion must be a Part object or string")}else throw new Error("partOrString must be a Part object, string, or array");return t}function WN(e){return{role:"user",parts:IA(e)}}function jN(e){return{role:"model",parts:IA(e)}}function oe(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){let n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function MA(e,t){let n=oe(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function kA(e){return Array.isArray(e)?e.map(t=>Pu(t)):[Pu(e)]}function Pu(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function DA(e){let t=Pu(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function UA(e){let t=Pu(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function nA(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function PA(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>nA(t)):[nA(e)]}function bh(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function iA(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function oA(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ut(e){if(e==null)throw new Error("ContentUnion is required");return bh(e)?e:{role:"user",parts:PA(e)}}function Qh(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{let i=ut(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){let n=ut(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ut(n)):[ut(t)]}function tn(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(iA(e)||oA(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ut(e)]}let t=[],n=[],i=bh(e[0]);for(let o of e){let r=bh(o);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(o);else{if(iA(o)||oA(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:PA(n)}),t}function e1(e,t){e.includes("null")&&(t.nullable=!0);let n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(w).includes(n[0].toUpperCase())?n[0].toUpperCase():w.TYPE_UNSPECIFIED;else{t.anyOf=[];for(let i of n)t.anyOf.push({type:Object.values(w).includes(i.toUpperCase())?i.toUpperCase():w.TYPE_UNSPECIFIED})}}function wr(e){let t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");let r=e.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,e=r[1]):r[1].type==="null"&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&e1(e.type,t);for(let[s,a]of Object.entries(e))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(w).includes(a.toUpperCase())?a.toUpperCase():w.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=wr(a);else if(i.includes(s)){let l=[];for(let c of a){if(c.type=="null"){t.nullable=!0;continue}l.push(wr(c))}t[s]=l}else if(o.includes(s)){let l={};for(let[c,d]of Object.entries(a))l[c]=wr(d);t[s]=l}else{if(s==="additionalProperties")continue;t[s]=a}return t}function Zh(e){return wr(e)}function Wh(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function jh(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Ur(e){if(e.functionDeclarations)for(let t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=wr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=wr(t.response));return e}function Pr(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");let t=[];for(let n of e)t.push(n);return t}function t1(e,t,n,i=1){let o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function ii(e,t){if(typeof t!="string")throw new Error("name must be a string");return t1(e,t,"cachedContents")}function LA(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Gi(e){return Xh(e)}function n1(e){return e!=null&&typeof e=="object"&&"name"in e}function i1(e){return e!=null&&typeof e=="object"&&"video"in e}function o1(e){return e!=null&&typeof e=="object"&&"uri"in e}function FA(e){var t;let n;if(n1(e)&&(n=e.name),!(o1(e)&&(n=e.uri,n===void 0))&&!(i1(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function OA(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function HA(e){for(let t of["models","tunedModels","publisherModels"])if(r1(e,t))return e[t];return[]}function r1(e,t){return e!==null&&typeof e=="object"&&t in e}function s1(e,t={}){let n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function a1(e,t={}){let n=[],i=new Set;for(let o of e){let r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);let s=s1(o,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function GA(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function l1(e){if(typeof e!="string")return e;let t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function qA(e){if(typeof e!="object"||e===null)return{};let t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;let o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let r=!1;for(let s of o){if(typeof s!="object"||s===null)continue;let l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){r=!0;break}}return r&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Lr(e,t){let n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function BA(e){let t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function u1(e){let t={},n=u(e,["responsesFile"]);n!=null&&f(t,["fileName"],n);let i=u(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>V1(s))),f(t,["inlinedResponses"],r)}let o=u(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["inlinedEmbedContentResponses"],r)}return t}function c1(e){let t={},n=u(e,["predictionsFormat"]);n!=null&&f(t,["format"],n);let i=u(e,["gcsDestination","outputUriPrefix"]);i!=null&&f(t,["gcsUri"],i);let o=u(e,["bigqueryDestination","outputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function f1(e){let t={},n=u(e,["format"]);n!=null&&f(t,["predictionsFormat"],n);let i=u(e,["gcsUri"]);i!=null&&f(t,["gcsDestination","outputUriPrefix"],i);let o=u(e,["bigqueryUri"]);if(o!=null&&f(t,["bigqueryDestination","outputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function vu(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata","displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["metadata","state"]);o!=null&&f(t,["state"],BA(o));let r=u(e,["metadata","createTime"]);r!=null&&f(t,["createTime"],r);let s=u(e,["metadata","endTime"]);s!=null&&f(t,["endTime"],s);let a=u(e,["metadata","updateTime"]);a!=null&&f(t,["updateTime"],a);let l=u(e,["metadata","model"]);l!=null&&f(t,["model"],l);let c=u(e,["metadata","output"]);return c!=null&&f(t,["dest"],u1(qA(c))),t}function Nh(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["state"]);o!=null&&f(t,["state"],BA(o));let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["createTime"]);s!=null&&f(t,["createTime"],s);let a=u(e,["startTime"]);a!=null&&f(t,["startTime"],a);let l=u(e,["endTime"]);l!=null&&f(t,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&f(t,["updateTime"],c);let d=u(e,["model"]);d!=null&&f(t,["model"],d);let p=u(e,["inputConfig"]);p!=null&&f(t,["src"],d1(p));let m=u(e,["outputConfig"]);m!=null&&f(t,["dest"],c1(qA(m)));let h=u(e,["completionStats"]);return h!=null&&f(t,["completionStats"],h),t}function d1(e){let t={},n=u(e,["instancesFormat"]);n!=null&&f(t,["format"],n);let i=u(e,["gcsSource","uris"]);i!=null&&f(t,["gcsUri"],i);let o=u(e,["bigquerySource","inputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function p1(e,t){let n={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=u(t,["fileName"]);i!=null&&f(n,["fileName"],i);let o=u(t,["inlinedRequests"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>B1(e,s))),f(n,["requests","requests"],r)}return n}function m1(e){let t={},n=u(e,["format"]);n!=null&&f(t,["instancesFormat"],n);let i=u(e,["gcsUri"]);i!=null&&f(t,["gcsSource","uris"],i);let o=u(e,["bigqueryUri"]);if(o!=null&&f(t,["bigquerySource","inputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function h1(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function g1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Lr(e,i)),n}function y1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Lr(e,i)),n}function v1(e){let t={},n=u(e,["content"]);n!=null&&f(t,["content"],n);let i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],S1(i));let o=u(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);let r=u(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);let s=u(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);let a=u(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);let l=u(e,["index"]);l!=null&&f(t,["index"],l);let c=u(e,["logprobsResult"]);c!=null&&f(t,["logprobsResult"],c);let d=u(e,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),f(t,["safetyRatings"],m)}let p=u(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function S1(e){let t={},n=u(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function VA(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Q1(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function T1(e,t){let n={},i=u(e,["displayName"]);if(t!==void 0&&i!=null&&f(t,["batch","displayName"],i),u(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function x1(e,t){let n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);let o=u(e,["dest"]);return t!==void 0&&o!=null&&f(t,["outputConfig"],f1(l1(o))),n}function rA(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["src"]);o!=null&&f(n,["batch","inputConfig"],p1(e,GA(e,o)));let r=u(t,["config"]);return r!=null&&T1(r,n),n}function A1(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["model"],oe(e,i));let o=u(t,["src"]);o!=null&&f(n,["inputConfig"],m1(GA(e,o)));let r=u(t,["config"]);return r!=null&&x1(r,n),n}function E1(e,t){let n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["batch","displayName"],i),n}function C1(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["src"]);o!=null&&f(n,["batch","inputConfig"],M1(e,o));let r=u(t,["config"]);return r!=null&&E1(r,n),n}function _1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Lr(e,i)),n}function w1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Lr(e,i)),n}function b1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);return r!=null&&f(t,["error"],r),t}function N1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);return r!=null&&f(t,["error"],r),t}function R1(e,t){let n={},i=u(t,["contents"]);if(i!=null){let r=Qh(e,i);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["requests[]","request","content"],r)}let o=u(t,["config"]);return o!=null&&(f(n,["_self"],I1(o,n)),RN(n,{"requests[].*":"requests[].request.*"})),n}function I1(e,t){let n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);let o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);let r=u(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function M1(e,t){let n={},i=u(t,["fileName"]);i!=null&&f(n,["file_name"],i);let o=u(t,["inlinedRequests"]);return o!=null&&f(n,["requests"],R1(e,o)),n}function k1(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function D1(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function U1(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&f(t,["allowedFunctionNames"],n);let i=u(e,["mode"]);if(i!=null&&f(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function P1(e,t,n){let i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],VA(ut(o)));let r=u(t,["temperature"]);r!=null&&f(i,["temperature"],r);let s=u(t,["topP"]);s!=null&&f(i,["topP"],s);let a=u(t,["topK"]);a!=null&&f(i,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=u(t,["logprobs"]);m!=null&&f(i,["logprobs"],m);let h=u(t,["presencePenalty"]);h!=null&&f(i,["presencePenalty"],h);let g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);let S=u(t,["seed"]);S!=null&&f(i,["seed"],S);let x=u(t,["responseMimeType"]);x!=null&&f(i,["responseMimeType"],x);let y=u(t,["responseSchema"]);y!=null&&f(i,["responseSchema"],Zh(y));let v=u(t,["responseJsonSchema"]);if(v!=null&&f(i,["responseJsonSchema"],v),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=u(t,["safetySettings"]);if(n!==void 0&&T!=null){let me=T;Array.isArray(me)&&(me=me.map(V=>Z1(V))),f(n,["safetySettings"],me)}let A=u(t,["tools"]);if(n!==void 0&&A!=null){let me=Pr(A);Array.isArray(me)&&(me=me.map(V=>j1(Ur(V)))),f(n,["tools"],me)}let C=u(t,["toolConfig"]);if(n!==void 0&&C!=null&&f(n,["toolConfig"],W1(C)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let I=u(t,["cachedContent"]);n!==void 0&&I!=null&&f(n,["cachedContent"],ii(e,I));let _=u(t,["responseModalities"]);_!=null&&f(i,["responseModalities"],_);let M=u(t,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);let R=u(t,["speechConfig"]);if(R!=null&&f(i,["speechConfig"],Wh(R)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let N=u(t,["thinkingConfig"]);N!=null&&f(i,["thinkingConfig"],N);let $=u(t,["imageConfig"]);$!=null&&f(i,["imageConfig"],q1($));let Te=u(t,["enableEnhancedCivicAnswers"]);if(Te!=null&&f(i,["enableEnhancedCivicAnswers"],Te),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function L1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>v1(c))),f(t,["candidates"],l)}let o=u(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);let r=u(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);let s=u(e,["responseId"]);s!=null&&f(t,["responseId"],s);let a=u(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function F1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Lr(e,i)),n}function O1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Lr(e,i)),n}function H1(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function G1(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function q1(e){let t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);let i=u(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function B1(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["request","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let a=tn(o);Array.isArray(a)&&(a=a.map(l=>VA(l))),f(n,["request","contents"],a)}let r=u(t,["metadata"]);r!=null&&f(n,["metadata"],r);let s=u(t,["config"]);return s!=null&&f(n,["request","generationConfig"],P1(e,s,u(n,["request"],{}))),n}function V1(e){let t={},n=u(e,["response"]);n!=null&&f(t,["response"],L1(n));let i=u(e,["error"]);return i!=null&&f(t,["error"],i),t}function z1(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);if(t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),u(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function $1(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);let r=u(e,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),n}function Y1(e){let t={},n=u(e,["config"]);return n!=null&&z1(n,t),t}function J1(e){let t={},n=u(e,["config"]);return n!=null&&$1(n,t),t}function K1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["operations"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>vu(s))),f(t,["batchJobs"],r)}return t}function X1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["batchPredictionJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Nh(s))),f(t,["batchJobs"],r)}return t}function Q1(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],k1(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],D1(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],h1(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function Z1(e){let t={},n=u(e,["category"]);if(n!=null&&f(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function W1(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&f(t,["retrievalConfig"],n);let i=u(e,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],U1(i)),t}function j1(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],H1(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],G1(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function eR(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function sA(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ER(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function tR(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);let r=u(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);let s=u(e,["contents"]);if(t!==void 0&&s!=null){let d=tn(s);Array.isArray(d)&&(d=d.map(p=>sA(p))),f(t,["contents"],d)}let a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],sA(ut(a)));let l=u(e,["tools"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>_R(p))),f(t,["tools"],d)}let c=u(e,["toolConfig"]);if(t!==void 0&&c!=null&&f(t,["toolConfig"],CR(c)),u(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function nR(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);let r=u(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);let s=u(e,["contents"]);if(t!==void 0&&s!=null){let p=tn(s);Array.isArray(p)&&(p=p.map(m=>m)),f(t,["contents"],p)}let a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],ut(a));let l=u(e,["tools"]);if(t!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>wR(m))),f(t,["tools"],p)}let c=u(e,["toolConfig"]);t!==void 0&&c!=null&&f(t,["toolConfig"],c);let d=u(e,["kmsKeyName"]);return t!==void 0&&d!=null&&f(t,["encryption_spec","kmsKeyName"],d),n}function iR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["model"],MA(e,i));let o=u(t,["config"]);return o!=null&&tR(o,n),n}function oR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["model"],MA(e,i));let o=u(t,["config"]);return o!=null&&nR(o,n),n}function rR(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ii(e,i)),n}function sR(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ii(e,i)),n}function aR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function lR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function uR(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function cR(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function fR(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&f(t,["allowedFunctionNames"],n);let i=u(e,["mode"]);if(i!=null&&f(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function dR(e){let t={},n=u(e,["description"]);n!=null&&f(t,["description"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);let r=u(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);let s=u(e,["response"]);s!=null&&f(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&f(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function pR(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ii(e,i)),n}function mR(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ii(e,i)),n}function hR(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function gR(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function yR(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function vR(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function SR(e){let t={},n=u(e,["config"]);return n!=null&&yR(n,t),t}function TR(e){let t={},n=u(e,["config"]);return n!=null&&vR(n,t),t}function xR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function AR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function ER(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],uR(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],cR(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],eR(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function CR(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&f(t,["retrievalConfig"],n);let i=u(e,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],fR(i)),t}function _R(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],hR(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],gR(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function wR(e){let t={},n=u(e,["retrieval"]);n!=null&&f(t,["retrieval"],n);let i=u(e,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);let r=u(e,["enterpriseWebSearch"]);r!=null&&f(t,["enterpriseWebSearch"],r);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>dR(m))),f(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);let d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function bR(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function NR(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function RR(e,t){let n={},i=u(t,["name"]);i!=null&&f(n,["_url","name"],ii(e,i));let o=u(t,["config"]);return o!=null&&bR(o,n),n}function IR(e,t){let n={},i=u(t,["name"]);i!=null&&f(n,["_url","name"],ii(e,i));let o=u(t,["config"]);return o!=null&&NR(o,n),n}function Ou(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function aA(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(e){return this instanceof Y?(this.v=e,this):new Y(e)}function cn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(g){return Promise.resolve(g).then(h,p)}}function a(h,g){i[h]&&(o[h]=function(S){return new Promise(function(x,y){r.push([h,S,x,y])>1||l(h,S)})},g&&(o[h]=g(o[h])))}function l(h,g){try{c(i[h](g))}catch(S){m(r[0][3],S)}}function c(h){h.value instanceof Y?Promise.resolve(h.value.v).then(d,p):m(r[0][2],h)}function d(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),r.shift(),r.length&&l(r[0][0],r[0][1])}}function fn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof aA=="function"?aA(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(s){return new Promise(function(a,l){s=e[r](s),o(a,l,s.done,s.value)})}}function o(r,s,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},s)}}function MR(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;let n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:zA(n)}function zA(e){if(e.parts===void 0||e.parts.length===0)return!1;for(let t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function kR(e){if(e.length!==0){for(let t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function lA(e){if(e===void 0||e.length===0)return[];let t=[],n=e.length,i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{let o=[],r=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),r&&!zA(e[i])&&(r=!1),i++;r?t.push(...o):t.pop()}return t}function DR(e){let t={},n=u(e,["file"]);return n!=null&&f(t,["file"],n),t}function UR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function PR(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","file"],FA(n)),t}function LR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function FR(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","file"],FA(n)),t}function OR(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function HR(e){let t={},n=u(e,["config"]);return n!=null&&OR(n,t),t}function GR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["files"],r)}return t}function Su(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function qR(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>iI(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function BR(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function VR(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function zR(e){let t={},n=u(e,["description"]);n!=null&&f(t,["description"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);let r=u(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);let s=u(e,["response"]);s!=null&&f(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&f(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function $R(e){let t={},n=u(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);let i=u(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);let o=u(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);let r=u(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);let s=u(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);let a=u(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);let l=u(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);let c=u(e,["maxOutputTokens"]);c!=null&&f(t,["maxOutputTokens"],c);let d=u(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);let p=u(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);let m=u(e,["responseLogprobs"]);m!=null&&f(t,["responseLogprobs"],m);let h=u(e,["responseMimeType"]);h!=null&&f(t,["responseMimeType"],h);let g=u(e,["responseModalities"]);g!=null&&f(t,["responseModalities"],g);let S=u(e,["responseSchema"]);S!=null&&f(t,["responseSchema"],S);let x=u(e,["routingConfig"]);x!=null&&f(t,["routingConfig"],x);let y=u(e,["seed"]);y!=null&&f(t,["seed"],y);let v=u(e,["speechConfig"]);v!=null&&f(t,["speechConfig"],v);let T=u(e,["stopSequences"]);T!=null&&f(t,["stopSequences"],T);let A=u(e,["temperature"]);A!=null&&f(t,["temperature"],A);let C=u(e,["thinkingConfig"]);C!=null&&f(t,["thinkingConfig"],C);let I=u(e,["topK"]);I!=null&&f(t,["topK"],I);let _=u(e,["topP"]);if(_!=null&&f(t,["topP"],_),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function YR(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function JR(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function KR(e,t){let n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);let r=u(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);let s=u(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","mediaResolution"],c);let d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],jh(p));let m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);let h=u(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],h);let g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],qR(ut(g)));let S=u(e,["tools"]);if(t!==void 0&&S!=null){let I=Pr(S);Array.isArray(I)&&(I=I.map(_=>rI(Ur(_)))),f(t,["setup","tools"],I)}let x=u(e,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],oI(x));let y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);let v=u(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","outputAudioTranscription"],v);let T=u(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&f(t,["setup","realtimeInputConfig"],T);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&f(t,["setup","contextWindowCompression"],A);let C=u(e,["proactivity"]);if(t!==void 0&&C!=null&&f(t,["setup","proactivity"],C),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function XR(e,t){let n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],$R(i));let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);let r=u(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);let s=u(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","mediaResolution"],c);let d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],jh(p));let m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);let h=u(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],h);let g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],ut(g));let S=u(e,["tools"]);if(t!==void 0&&S!=null){let _=Pr(S);Array.isArray(_)&&(_=_.map(M=>sI(Ur(M)))),f(t,["setup","tools"],_)}let x=u(e,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],x);let y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);let v=u(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","outputAudioTranscription"],v);let T=u(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&f(t,["setup","realtimeInputConfig"],T);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&f(t,["setup","contextWindowCompression"],A);let C=u(e,["proactivity"]);t!==void 0&&C!=null&&f(t,["setup","proactivity"],C);let I=u(e,["explicitVadSignal"]);return t!==void 0&&I!=null&&f(t,["setup","explicitVadSignal"],I),n}function QR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],oe(e,i));let o=u(t,["config"]);return o!=null&&f(n,["config"],KR(o,n)),n}function ZR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],oe(e,i));let o=u(t,["config"]);return o!=null&&f(n,["config"],XR(o,n)),n}function WR(e){let t={},n=u(e,["musicGenerationConfig"]);return n!=null&&f(t,["musicGenerationConfig"],n),t}function jR(e){let t={},n=u(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["weightedPrompts"],i)}return t}function eI(e){let t={},n=u(e,["media"]);if(n!=null){let c=kA(n);Array.isArray(c)&&(c=c.map(d=>Su(d))),f(t,["mediaChunks"],c)}let i=u(e,["audio"]);i!=null&&f(t,["audio"],Su(UA(i)));let o=u(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);let r=u(e,["video"]);r!=null&&f(t,["video"],Su(DA(r)));let s=u(e,["text"]);s!=null&&f(t,["text"],s);let a=u(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);let l=u(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function tI(e){let t={},n=u(e,["media"]);if(n!=null){let c=kA(n);Array.isArray(c)&&(c=c.map(d=>d)),f(t,["mediaChunks"],c)}let i=u(e,["audio"]);i!=null&&f(t,["audio"],UA(i));let o=u(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);let r=u(e,["video"]);r!=null&&f(t,["video"],DA(r));let s=u(e,["text"]);s!=null&&f(t,["text"],s);let a=u(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);let l=u(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function nI(e){let t={},n=u(e,["setupComplete"]);n!=null&&f(t,["setupComplete"],n);let i=u(e,["serverContent"]);i!=null&&f(t,["serverContent"],i);let o=u(e,["toolCall"]);o!=null&&f(t,["toolCall"],o);let r=u(e,["toolCallCancellation"]);r!=null&&f(t,["toolCallCancellation"],r);let s=u(e,["usageMetadata"]);s!=null&&f(t,["usageMetadata"],aI(s));let a=u(e,["goAway"]);a!=null&&f(t,["goAway"],a);let l=u(e,["sessionResumptionUpdate"]);l!=null&&f(t,["sessionResumptionUpdate"],l);let c=u(e,["voiceActivityDetectionSignal"]);c!=null&&f(t,["voiceActivityDetectionSignal"],c);let d=u(e,["voiceActivity"]);return d!=null&&f(t,["voiceActivity"],lI(d)),t}function iI(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],BR(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],VR(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],Su(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function oI(e){let t={},n=u(e,["handle"]);if(n!=null&&f(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function rI(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],YR(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],JR(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function sI(e){let t={},n=u(e,["retrieval"]);n!=null&&f(t,["retrieval"],n);let i=u(e,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);let r=u(e,["enterpriseWebSearch"]);r!=null&&f(t,["enterpriseWebSearch"],r);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>zR(m))),f(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);let d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function aI(e){let t={},n=u(e,["promptTokenCount"]);n!=null&&f(t,["promptTokenCount"],n);let i=u(e,["cachedContentTokenCount"]);i!=null&&f(t,["cachedContentTokenCount"],i);let o=u(e,["candidatesTokenCount"]);o!=null&&f(t,["responseTokenCount"],o);let r=u(e,["toolUsePromptTokenCount"]);r!=null&&f(t,["toolUsePromptTokenCount"],r);let s=u(e,["thoughtsTokenCount"]);s!=null&&f(t,["thoughtsTokenCount"],s);let a=u(e,["totalTokenCount"]);a!=null&&f(t,["totalTokenCount"],a);let l=u(e,["promptTokensDetails"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["promptTokensDetails"],h)}let c=u(e,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["cacheTokensDetails"],h)}let d=u(e,["candidatesTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["responseTokensDetails"],h)}let p=u(e,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["toolUsePromptTokensDetails"],h)}let m=u(e,["trafficType"]);return m!=null&&f(t,["trafficType"],m),t}function lI(e){let t={},n=u(e,["type"]);return n!=null&&f(t,["voiceActivityType"],n),t}function uI(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function cI(e){let t={},n=u(e,["content"]);n!=null&&f(t,["content"],n);let i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],fI(i));let o=u(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);let r=u(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);let s=u(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);let a=u(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);let l=u(e,["index"]);l!=null&&f(t,["index"],l);let c=u(e,["logprobsResult"]);c!=null&&f(t,["logprobsResult"],c);let d=u(e,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),f(t,["safetyRatings"],m)}let p=u(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function fI(e){let t={},n=u(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function dI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let r=tn(o);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["contents"],r)}return n}function pI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(t,["tokensInfo"],o)}return t}function mI(e){let t={},n=u(e,["values"]);n!=null&&f(t,["values"],n);let i=u(e,["statistics"]);return i!=null&&f(t,["statistics"],hI(i)),t}function hI(e){let t={},n=u(e,["truncated"]);n!=null&&f(t,["truncated"],n);let i=u(e,["token_count"]);return i!=null&&f(t,["tokenCount"],i),t}function ac(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>CM(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function gI(e){let t={},n=u(e,["controlType"]);n!=null&&f(t,["controlType"],n);let i=u(e,["enableControlImageComputation"]);return i!=null&&f(t,["computeControl"],i),t}function yI(e){let t={};if(u(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function vI(e,t){let n={},i=u(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],ut(i));let o=u(e,["tools"]);if(t!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>KA(a))),f(t,["tools"],s)}let r=u(e,["generationConfig"]);return t!==void 0&&r!=null&&f(t,["generationConfig"],uM(r)),n}function SI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=tn(o);Array.isArray(s)&&(s=s.map(a=>ac(a))),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&yI(r),n}function TI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=tn(o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&vI(r,n),n}function xI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["totalTokens"]);i!=null&&f(t,["totalTokens"],i);let o=u(e,["cachedContentTokenCount"]);return o!=null&&f(t,["cachedContentTokenCount"],o),t}function AI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["totalTokens"]);return i!=null&&f(t,["totalTokens"],i),t}function EI(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function CI(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function _I(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function wI(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function bI(e,t){let n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);let o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);let r=u(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);let s=u(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);let a=u(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);let l=u(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);let c=u(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&f(t,["parameters","safetySetting"],c);let d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);let p=u(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);let m=u(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);let h=u(e,["language"]);t!==void 0&&h!=null&&f(t,["parameters","language"],h);let g=u(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);let S=u(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&f(t,["parameters","outputOptions","compressionQuality"],S);let x=u(e,["addWatermark"]);t!==void 0&&x!=null&&f(t,["parameters","addWatermark"],x);let y=u(e,["labels"]);t!==void 0&&y!=null&&f(t,["labels"],y);let v=u(e,["editMode"]);t!==void 0&&v!=null&&f(t,["parameters","editMode"],v);let T=u(e,["baseSteps"]);return t!==void 0&&T!=null&&f(t,["parameters","editConfig","baseSteps"],T),n}function NI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>IM(l))),f(n,["instances[0]","referenceImages"],a)}let s=u(t,["config"]);return s!=null&&bI(s,n),n}function RI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>lc(r))),f(t,["generatedImages"],o)}return t}function II(e,t){let n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);let o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);let r=u(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function MI(e,t){let n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["instances[]","task_type"],i);let o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["instances[]","title"],o);let r=u(e,["outputDimensionality"]);t!==void 0&&r!=null&&f(t,["parameters","outputDimensionality"],r);let s=u(e,["mimeType"]);t!==void 0&&s!=null&&f(t,["instances[]","mimeType"],s);let a=u(e,["autoTruncate"]);return t!==void 0&&a!=null&&f(t,["parameters","autoTruncate"],a),n}function kI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let a=Qh(e,o);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}let r=u(t,["config"]);r!=null&&II(r,n);let s=u(t,["model"]);return s!==void 0&&f(n,["requests[]","model"],oe(e,s)),n}function DI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=Qh(e,o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["instances[]","content"],s)}let r=u(t,["config"]);return r!=null&&MI(r,n),n}function UI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["embeddings"],r)}let o=u(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function PI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>mI(s))),f(t,["embeddings"],r)}let o=u(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function LI(e){let t={},n=u(e,["endpoint"]);n!=null&&f(t,["name"],n);let i=u(e,["deployedModelId"]);return i!=null&&f(t,["deployedModelId"],i),t}function FI(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function OI(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function HI(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&f(t,["allowedFunctionNames"],n);let i=u(e,["mode"]);if(i!=null&&f(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function GI(e){let t={},n=u(e,["description"]);n!=null&&f(t,["description"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);let r=u(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);let s=u(e,["response"]);s!=null&&f(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&f(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function qI(e,t,n){let i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],ac(ut(o)));let r=u(t,["temperature"]);r!=null&&f(i,["temperature"],r);let s=u(t,["topP"]);s!=null&&f(i,["topP"],s);let a=u(t,["topK"]);a!=null&&f(i,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=u(t,["logprobs"]);m!=null&&f(i,["logprobs"],m);let h=u(t,["presencePenalty"]);h!=null&&f(i,["presencePenalty"],h);let g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);let S=u(t,["seed"]);S!=null&&f(i,["seed"],S);let x=u(t,["responseMimeType"]);x!=null&&f(i,["responseMimeType"],x);let y=u(t,["responseSchema"]);y!=null&&f(i,["responseSchema"],Zh(y));let v=u(t,["responseJsonSchema"]);if(v!=null&&f(i,["responseJsonSchema"],v),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=u(t,["safetySettings"]);if(n!==void 0&&T!=null){let me=T;Array.isArray(me)&&(me=me.map(V=>MM(V))),f(n,["safetySettings"],me)}let A=u(t,["tools"]);if(n!==void 0&&A!=null){let me=Pr(A);Array.isArray(me)&&(me=me.map(V=>OM(Ur(V)))),f(n,["tools"],me)}let C=u(t,["toolConfig"]);if(n!==void 0&&C!=null&&f(n,["toolConfig"],FM(C)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let I=u(t,["cachedContent"]);n!==void 0&&I!=null&&f(n,["cachedContent"],ii(e,I));let _=u(t,["responseModalities"]);_!=null&&f(i,["responseModalities"],_);let M=u(t,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);let R=u(t,["speechConfig"]);if(R!=null&&f(i,["speechConfig"],Wh(R)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let N=u(t,["thinkingConfig"]);N!=null&&f(i,["thinkingConfig"],N);let $=u(t,["imageConfig"]);$!=null&&f(i,["imageConfig"],mM($));let Te=u(t,["enableEnhancedCivicAnswers"]);if(Te!=null&&f(i,["enableEnhancedCivicAnswers"],Te),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function BI(e,t,n){let i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],ut(o));let r=u(t,["temperature"]);r!=null&&f(i,["temperature"],r);let s=u(t,["topP"]);s!=null&&f(i,["topP"],s);let a=u(t,["topK"]);a!=null&&f(i,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=u(t,["logprobs"]);m!=null&&f(i,["logprobs"],m);let h=u(t,["presencePenalty"]);h!=null&&f(i,["presencePenalty"],h);let g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);let S=u(t,["seed"]);S!=null&&f(i,["seed"],S);let x=u(t,["responseMimeType"]);x!=null&&f(i,["responseMimeType"],x);let y=u(t,["responseSchema"]);y!=null&&f(i,["responseSchema"],Zh(y));let v=u(t,["responseJsonSchema"]);v!=null&&f(i,["responseJsonSchema"],v);let T=u(t,["routingConfig"]);T!=null&&f(i,["routingConfig"],T);let A=u(t,["modelSelectionConfig"]);A!=null&&f(i,["modelConfig"],A);let C=u(t,["safetySettings"]);if(n!==void 0&&C!=null){let Nt=C;Array.isArray(Nt)&&(Nt=Nt.map(yn=>yn)),f(n,["safetySettings"],Nt)}let I=u(t,["tools"]);if(n!==void 0&&I!=null){let Nt=Pr(I);Array.isArray(Nt)&&(Nt=Nt.map(yn=>KA(Ur(yn)))),f(n,["tools"],Nt)}let _=u(t,["toolConfig"]);n!==void 0&&_!=null&&f(n,["toolConfig"],_);let M=u(t,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);let R=u(t,["cachedContent"]);n!==void 0&&R!=null&&f(n,["cachedContent"],ii(e,R));let N=u(t,["responseModalities"]);N!=null&&f(i,["responseModalities"],N);let $=u(t,["mediaResolution"]);$!=null&&f(i,["mediaResolution"],$);let Te=u(t,["speechConfig"]);Te!=null&&f(i,["speechConfig"],Wh(Te));let me=u(t,["audioTimestamp"]);me!=null&&f(i,["audioTimestamp"],me);let V=u(t,["thinkingConfig"]);V!=null&&f(i,["thinkingConfig"],V);let at=u(t,["imageConfig"]);if(at!=null&&f(i,["imageConfig"],hM(at)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let li=u(t,["modelArmorConfig"]);return n!==void 0&&li!=null&&f(n,["modelArmorConfig"],li),i}function uA(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=tn(o);Array.isArray(s)&&(s=s.map(a=>ac(a))),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&f(n,["generationConfig"],qI(e,r,n)),n}function cA(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["contents"]);if(o!=null){let s=tn(o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&f(n,["generationConfig"],BI(e,r,n)),n}function fA(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>cI(c))),f(t,["candidates"],l)}let o=u(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);let r=u(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);let s=u(e,["responseId"]);s!=null&&f(t,["responseId"],s);let a=u(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function dA(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>d)),f(t,["candidates"],c)}let o=u(e,["createTime"]);o!=null&&f(t,["createTime"],o);let r=u(e,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);let s=u(e,["promptFeedback"]);s!=null&&f(t,["promptFeedback"],s);let a=u(e,["responseId"]);a!=null&&f(t,["responseId"],a);let l=u(e,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function VI(e,t){let n={};if(u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=u(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);let o=u(e,["aspectRatio"]);t!==void 0&&o!=null&&f(t,["parameters","aspectRatio"],o);let r=u(e,["guidanceScale"]);if(t!==void 0&&r!=null&&f(t,["parameters","guidanceScale"],r),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=u(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&f(t,["parameters","safetySetting"],s);let a=u(e,["personGeneration"]);t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a);let l=u(e,["includeSafetyAttributes"]);t!==void 0&&l!=null&&f(t,["parameters","includeSafetyAttributes"],l);let c=u(e,["includeRaiReason"]);t!==void 0&&c!=null&&f(t,["parameters","includeRaiReason"],c);let d=u(e,["language"]);t!==void 0&&d!=null&&f(t,["parameters","language"],d);let p=u(e,["outputMimeType"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","mimeType"],p);let m=u(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&f(t,["parameters","outputOptions","compressionQuality"],m),u(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let h=u(e,["imageSize"]);if(t!==void 0&&h!=null&&f(t,["parameters","sampleImageSize"],h),u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function zI(e,t){let n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);let o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);let r=u(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);let s=u(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);let a=u(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);let l=u(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);let c=u(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&f(t,["parameters","safetySetting"],c);let d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);let p=u(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);let m=u(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);let h=u(e,["language"]);t!==void 0&&h!=null&&f(t,["parameters","language"],h);let g=u(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);let S=u(e,["outputCompressionQuality"]);t!==void 0&&S!=null&&f(t,["parameters","outputOptions","compressionQuality"],S);let x=u(e,["addWatermark"]);t!==void 0&&x!=null&&f(t,["parameters","addWatermark"],x);let y=u(e,["labels"]);t!==void 0&&y!=null&&f(t,["labels"],y);let v=u(e,["imageSize"]);t!==void 0&&v!=null&&f(t,["parameters","sampleImageSize"],v);let T=u(e,["enhancePrompt"]);return t!==void 0&&T!=null&&f(t,["parameters","enhancePrompt"],T),n}function $I(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["config"]);return r!=null&&VI(r,n),n}function YI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["config"]);return r!=null&&zI(r,n),n}function JI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>rM(s))),f(t,["generatedImages"],r)}let o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],YA(o)),t}function KI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>lc(s))),f(t,["generatedImages"],r)}let o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],JA(o)),t}function XI(e,t){let n={},i=u(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i),u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=u(e,["durationSeconds"]);if(t!==void 0&&o!=null&&f(t,["parameters","durationSeconds"],o),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let r=u(e,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);let s=u(e,["resolution"]);t!==void 0&&s!=null&&f(t,["parameters","resolution"],s);let a=u(e,["personGeneration"]);if(t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a),u(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let l=u(e,["negativePrompt"]);t!==void 0&&l!=null&&f(t,["parameters","negativePrompt"],l);let c=u(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&f(t,["parameters","enhancePrompt"],c),u(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let d=u(e,["lastFrame"]);t!==void 0&&d!=null&&f(t,["instances[0]","lastFrame"],uc(d));let p=u(e,["referenceImages"]);if(t!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>ZM(h))),f(t,["instances[0]","referenceImages"],m)}if(u(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function QI(e,t){let n={},i=u(e,["numberOfVideos"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);let o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&f(t,["parameters","storageUri"],o);let r=u(e,["fps"]);t!==void 0&&r!=null&&f(t,["parameters","fps"],r);let s=u(e,["durationSeconds"]);t!==void 0&&s!=null&&f(t,["parameters","durationSeconds"],s);let a=u(e,["seed"]);t!==void 0&&a!=null&&f(t,["parameters","seed"],a);let l=u(e,["aspectRatio"]);t!==void 0&&l!=null&&f(t,["parameters","aspectRatio"],l);let c=u(e,["resolution"]);t!==void 0&&c!=null&&f(t,["parameters","resolution"],c);let d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);let p=u(e,["pubsubTopic"]);t!==void 0&&p!=null&&f(t,["parameters","pubsubTopic"],p);let m=u(e,["negativePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","negativePrompt"],m);let h=u(e,["enhancePrompt"]);t!==void 0&&h!=null&&f(t,["parameters","enhancePrompt"],h);let g=u(e,["generateAudio"]);t!==void 0&&g!=null&&f(t,["parameters","generateAudio"],g);let S=u(e,["lastFrame"]);t!==void 0&&S!=null&&f(t,["instances[0]","lastFrame"],pn(S));let x=u(e,["referenceImages"]);if(t!==void 0&&x!=null){let T=x;Array.isArray(T)&&(T=T.map(A=>WM(A))),f(t,["instances[0]","referenceImages"],T)}let y=u(e,["mask"]);t!==void 0&&y!=null&&f(t,["instances[0]","mask"],QM(y));let v=u(e,["compressionQuality"]);return t!==void 0&&v!=null&&f(t,["parameters","compressionQuality"],v),n}function ZI(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],tM(s)),t}function WI(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],nM(s)),t}function jI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["image"]);r!=null&&f(n,["instances[0]","image"],uc(r));let s=u(t,["video"]);s!=null&&f(n,["instances[0]","video"],XA(s));let a=u(t,["source"]);a!=null&&iM(a,n);let l=u(t,["config"]);return l!=null&&XI(l,n),n}function eM(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["image"]);r!=null&&f(n,["instances[0]","image"],pn(r));let s=u(t,["video"]);s!=null&&f(n,["instances[0]","video"],QA(s));let a=u(t,["source"]);a!=null&&oM(a,n);let l=u(t,["config"]);return l!=null&&QI(l,n),n}function tM(e){let t={},n=u(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>aM(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function nM(e){let t={},n=u(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>lM(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function iM(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],uc(o));let r=u(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],XA(r)),n}function oM(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],pn(o));let r=u(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],QA(r)),n}function rM(e){let t={},n=u(e,["_self"]);n!=null&&f(t,["image"],gM(n));let i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);let o=u(e,["_self"]);return o!=null&&f(t,["safetyAttributes"],YA(o)),t}function lc(e){let t={},n=u(e,["_self"]);n!=null&&f(t,["image"],$A(n));let i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);let o=u(e,["_self"]);o!=null&&f(t,["safetyAttributes"],JA(o));let r=u(e,["prompt"]);return r!=null&&f(t,["enhancedPrompt"],r),t}function sM(e){let t={},n=u(e,["_self"]);n!=null&&f(t,["mask"],$A(n));let i=u(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(t,["labels"],o)}return t}function aM(e){let t={},n=u(e,["video"]);return n!=null&&f(t,["video"],KM(n)),t}function lM(e){let t={},n=u(e,["_self"]);return n!=null&&f(t,["video"],XM(n)),t}function uM(e){let t={},n=u(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);let i=u(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);let o=u(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);let r=u(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);let s=u(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);let a=u(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);let l=u(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);let c=u(e,["maxOutputTokens"]);c!=null&&f(t,["maxOutputTokens"],c);let d=u(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);let p=u(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);let m=u(e,["responseLogprobs"]);m!=null&&f(t,["responseLogprobs"],m);let h=u(e,["responseMimeType"]);h!=null&&f(t,["responseMimeType"],h);let g=u(e,["responseModalities"]);g!=null&&f(t,["responseModalities"],g);let S=u(e,["responseSchema"]);S!=null&&f(t,["responseSchema"],S);let x=u(e,["routingConfig"]);x!=null&&f(t,["routingConfig"],x);let y=u(e,["seed"]);y!=null&&f(t,["seed"],y);let v=u(e,["speechConfig"]);v!=null&&f(t,["speechConfig"],v);let T=u(e,["stopSequences"]);T!=null&&f(t,["stopSequences"],T);let A=u(e,["temperature"]);A!=null&&f(t,["temperature"],A);let C=u(e,["thinkingConfig"]);C!=null&&f(t,["thinkingConfig"],C);let I=u(e,["topK"]);I!=null&&f(t,["topK"],I);let _=u(e,["topP"]);if(_!=null&&f(t,["topP"],_),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function cM(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function fM(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],oe(e,i)),n}function dM(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function pM(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function mM(e){let t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);let i=u(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function hM(e){let t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);let i=u(e,["imageSize"]);i!=null&&f(t,["imageSize"],i);let o=u(e,["personGeneration"]);o!=null&&f(t,["personGeneration"],o);let r=u(e,["outputMimeType"]);r!=null&&f(t,["imageOutputOptions","mimeType"],r);let s=u(e,["outputCompressionQuality"]);return s!=null&&f(t,["imageOutputOptions","compressionQuality"],s),t}function gM(e){let t={},n=u(e,["bytesBase64Encoded"]);n!=null&&f(t,["imageBytes"],Gi(n));let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function $A(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);let i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["imageBytes"],Gi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function uc(e){let t={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=u(e,["imageBytes"]);n!=null&&f(t,["bytesBase64Encoded"],Gi(n));let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function pn(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);let i=u(e,["imageBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Gi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function yM(e,t,n){let i={},o=u(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);let r=u(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);let s=u(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);let a=u(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],OA(e,a)),i}function vM(e,t,n){let i={},o=u(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);let r=u(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);let s=u(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);let a=u(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],OA(e,a)),i}function SM(e,t){let n={},i=u(t,["config"]);return i!=null&&yM(e,i,n),n}function TM(e,t){let n={},i=u(t,["config"]);return i!=null&&vM(e,i,n),n}function xM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["_self"]);if(o!=null){let r=HA(o);Array.isArray(r)&&(r=r.map(s=>Rh(s))),f(t,["models"],r)}return t}function AM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["_self"]);if(o!=null){let r=HA(o);Array.isArray(r)&&(r=r.map(s=>Ih(s))),f(t,["models"],r)}return t}function EM(e){let t={},n=u(e,["maskMode"]);n!=null&&f(t,["maskMode"],n);let i=u(e,["segmentationClasses"]);i!=null&&f(t,["maskClasses"],i);let o=u(e,["maskDilation"]);return o!=null&&f(t,["dilation"],o),t}function Rh(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);o!=null&&f(t,["description"],o);let r=u(e,["version"]);r!=null&&f(t,["version"],r);let s=u(e,["_self"]);s!=null&&f(t,["tunedModelInfo"],HM(s));let a=u(e,["inputTokenLimit"]);a!=null&&f(t,["inputTokenLimit"],a);let l=u(e,["outputTokenLimit"]);l!=null&&f(t,["outputTokenLimit"],l);let c=u(e,["supportedGenerationMethods"]);c!=null&&f(t,["supportedActions"],c);let d=u(e,["temperature"]);d!=null&&f(t,["temperature"],d);let p=u(e,["maxTemperature"]);p!=null&&f(t,["maxTemperature"],p);let m=u(e,["topP"]);m!=null&&f(t,["topP"],m);let h=u(e,["topK"]);h!=null&&f(t,["topK"],h);let g=u(e,["thinking"]);return g!=null&&f(t,["thinking"],g),t}function Ih(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);o!=null&&f(t,["description"],o);let r=u(e,["versionId"]);r!=null&&f(t,["version"],r);let s=u(e,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>LI(m))),f(t,["endpoints"],p)}let a=u(e,["labels"]);a!=null&&f(t,["labels"],a);let l=u(e,["_self"]);l!=null&&f(t,["tunedModelInfo"],GM(l));let c=u(e,["defaultCheckpointId"]);c!=null&&f(t,["defaultCheckpointId"],c);let d=u(e,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>m)),f(t,["checkpoints"],p)}return t}function CM(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],FI(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],OI(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],uI(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function _M(e){let t={},n=u(e,["productImage"]);return n!=null&&f(t,["image"],pn(n)),t}function wM(e,t){let n={},i=u(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);let o=u(e,["baseSteps"]);t!==void 0&&o!=null&&f(t,["parameters","baseSteps"],o);let r=u(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);let s=u(e,["seed"]);t!==void 0&&s!=null&&f(t,["parameters","seed"],s);let a=u(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&f(t,["parameters","safetySetting"],a);let l=u(e,["personGeneration"]);t!==void 0&&l!=null&&f(t,["parameters","personGeneration"],l);let c=u(e,["addWatermark"]);t!==void 0&&c!=null&&f(t,["parameters","addWatermark"],c);let d=u(e,["outputMimeType"]);t!==void 0&&d!=null&&f(t,["parameters","outputOptions","mimeType"],d);let p=u(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","compressionQuality"],p);let m=u(e,["enhancePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m);let h=u(e,["labels"]);return t!==void 0&&h!=null&&f(t,["labels"],h),n}function bM(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["source"]);o!=null&&RM(o,n);let r=u(t,["config"]);return r!=null&&wM(r,n),n}function NM(e){let t={},n=u(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>lc(o))),f(t,["generatedImages"],i)}return t}function RM(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["personImage"]);t!==void 0&&o!=null&&f(t,["instances[0]","personImage","image"],pn(o));let r=u(e,["productImages"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>_M(a))),f(t,["instances[0]","productImages"],s)}return n}function IM(e){let t={},n=u(e,["referenceImage"]);n!=null&&f(t,["referenceImage"],pn(n));let i=u(e,["referenceId"]);i!=null&&f(t,["referenceId"],i);let o=u(e,["referenceType"]);o!=null&&f(t,["referenceType"],o);let r=u(e,["maskImageConfig"]);r!=null&&f(t,["maskImageConfig"],EM(r));let s=u(e,["controlImageConfig"]);s!=null&&f(t,["controlImageConfig"],gI(s));let a=u(e,["styleImageConfig"]);a!=null&&f(t,["styleImageConfig"],a);let l=u(e,["subjectImageConfig"]);return l!=null&&f(t,["subjectImageConfig"],l),t}function YA(e){let t={},n=u(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);let i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);let o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function JA(e){let t={},n=u(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);let i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);let o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function MM(e){let t={},n=u(e,["category"]);if(n!=null&&f(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function kM(e){let t={},n=u(e,["image"]);return n!=null&&f(t,["image"],pn(n)),t}function DM(e,t){let n={},i=u(e,["mode"]);t!==void 0&&i!=null&&f(t,["parameters","mode"],i);let o=u(e,["maxPredictions"]);t!==void 0&&o!=null&&f(t,["parameters","maxPredictions"],o);let r=u(e,["confidenceThreshold"]);t!==void 0&&r!=null&&f(t,["parameters","confidenceThreshold"],r);let s=u(e,["maskDilation"]);t!==void 0&&s!=null&&f(t,["parameters","maskDilation"],s);let a=u(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&f(t,["parameters","binaryColorThreshold"],a);let l=u(e,["labels"]);return t!==void 0&&l!=null&&f(t,["labels"],l),n}function UM(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["source"]);o!=null&&LM(o,n);let r=u(t,["config"]);return r!=null&&DM(r,n),n}function PM(e){let t={},n=u(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>sM(o))),f(t,["generatedMasks"],i)}return t}function LM(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],pn(o));let r=u(e,["scribbleImage"]);return t!==void 0&&r!=null&&f(t,["instances[0]","scribble"],kM(r)),n}function FM(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&f(t,["retrievalConfig"],n);let i=u(e,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],HI(i)),t}function OM(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],dM(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],pM(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function KA(e){let t={},n=u(e,["retrieval"]);n!=null&&f(t,["retrieval"],n);let i=u(e,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);let r=u(e,["enterpriseWebSearch"]);r!=null&&f(t,["enterpriseWebSearch"],r);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>GI(m))),f(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);let d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function HM(e){let t={},n=u(e,["baseModel"]);n!=null&&f(t,["baseModel"],n);let i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);let o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function GM(e){let t={},n=u(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(t,["baseModel"],n);let i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);let o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function qM(e,t){let n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);let r=u(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function BM(e,t){let n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);let r=u(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function VM(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","name"],oe(e,i));let o=u(t,["config"]);return o!=null&&qM(o,n),n}function zM(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["config"]);return o!=null&&BM(o,n),n}function $M(e,t){let n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);let o=u(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&f(t,["parameters","safetySetting"],o);let r=u(e,["personGeneration"]);t!==void 0&&r!=null&&f(t,["parameters","personGeneration"],r);let s=u(e,["includeRaiReason"]);t!==void 0&&s!=null&&f(t,["parameters","includeRaiReason"],s);let a=u(e,["outputMimeType"]);t!==void 0&&a!=null&&f(t,["parameters","outputOptions","mimeType"],a);let l=u(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&f(t,["parameters","outputOptions","compressionQuality"],l);let c=u(e,["enhanceInputImage"]);t!==void 0&&c!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],c);let d=u(e,["imagePreservationFactor"]);t!==void 0&&d!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],d);let p=u(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);let m=u(e,["numberOfImages"]);t!==void 0&&m!=null&&f(t,["parameters","sampleCount"],m);let h=u(e,["mode"]);return t!==void 0&&h!=null&&f(t,["parameters","mode"],h),n}function YM(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],oe(e,i));let o=u(t,["image"]);o!=null&&f(n,["instances[0]","image"],pn(o));let r=u(t,["upscaleFactor"]);r!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],r);let s=u(t,["config"]);return s!=null&&$M(s,n),n}function JM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>lc(r))),f(t,["generatedImages"],o)}return t}function KM(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);let i=u(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],Gi(i));let o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function XM(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["uri"],n);let i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],Gi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function QM(e){let t={},n=u(e,["image"]);n!=null&&f(t,["_self"],pn(n));let i=u(e,["maskMode"]);return i!=null&&f(t,["maskMode"],i),t}function ZM(e){let t={},n=u(e,["image"]);n!=null&&f(t,["image"],uc(n));let i=u(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function WM(e){let t={},n=u(e,["image"]);n!=null&&f(t,["image"],pn(n));let i=u(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function XA(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);let i=u(e,["videoBytes"]);i!=null&&f(t,["encodedVideo"],Gi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["encoding"],o),t}function QA(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["gcsUri"],n);let i=u(e,["videoBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Gi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function jM(e,t){let n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["displayName"],i),n}function ek(e){let t={},n=u(e,["config"]);return n!=null&&jM(n,t),t}function tk(e,t){let n={},i=u(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function nk(e){let t={},n=u(e,["name"]);n!=null&&f(t,["_url","name"],n);let i=u(e,["config"]);return i!=null&&tk(i,t),t}function ik(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function ok(e,t){let n={},i=u(e,["customMetadata"]);if(t!==void 0&&i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["customMetadata"],r)}let o=u(e,["chunkingConfig"]);return t!==void 0&&o!=null&&f(t,["chunkingConfig"],o),n}function rk(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],ak(s)),t}function sk(e){let t={},n=u(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);let i=u(e,["fileName"]);i!=null&&f(t,["fileName"],i);let o=u(e,["config"]);return o!=null&&ok(o,t),t}function ak(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["parent"]);i!=null&&f(t,["parent"],i);let o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function lk(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function uk(e){let t={},n=u(e,["config"]);return n!=null&&lk(n,t),t}function ck(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["fileSearchStores"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["fileSearchStores"],r)}return t}function ZA(e,t){let n={},i=u(e,["mimeType"]);t!==void 0&&i!=null&&f(t,["mimeType"],i);let o=u(e,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);let r=u(e,["customMetadata"]);if(t!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(t,["customMetadata"],a)}let s=u(e,["chunkingConfig"]);return t!==void 0&&s!=null&&f(t,["chunkingConfig"],s),n}function fk(e){let t={},n=u(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);let i=u(e,["config"]);return i!=null&&ZA(i,t),t}function dk(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}async function pA(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){let n=e.status,i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};let o=JSON.stringify(i);throw n>=400&&n<600?new Hi({message:o,status:n}):new Error(o)}}function Tk(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{let r=JSON.parse(e.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,s){let a=Object.assign({},r);for(let l in s)if(Object.prototype.hasOwnProperty.call(s,l)){let c=s[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=i(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}let o=i(n,t);e.body=JSON.stringify(o)}function jA(e){for(let t of e)if(Ak(t)||typeof t=="object"&&"inputSchema"in t)return!0;return WA}function eE(e){var t;let n=(t=e[Mh])!==null&&t!==void 0?t:"";e[Mh]=(n+` ${xk}`).trimStart()}function Ak(e){return e!==null&&typeof e=="object"&&e instanceof vo}function Ek(e){return cn(this,arguments,function*(n,i=100){let o,r=0;for(;r<i;){let s=yield Y(n.listTools({cursor:o}));for(let a of s.tools)yield yield Y(a),r++;if(!s.nextCursor)break;o=s.nextCursor}})}function Ck(e){return e!==null&&typeof e=="object"&&"listTools"in e&&typeof e.listTools=="function"}function _k(...e){if(WA=!0,e.length===0)throw new Error("No MCP clients provided");let t=e[e.length-1];return Ck(t)?vo.create(e,{}):vo.create(e.slice(0,e.length-1),t)}async function wk(e,t,n){let i=new Uu,o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),t(i)}function bk(e){let t={};return e.forEach((n,i)=>{t[i]=n}),t}function Nk(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}async function Ik(e,t,n){let i=new Du,o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;let r=JSON.parse(o);if(e.isVertexAI()){let s=nI(r);Object.assign(i,s)}else Object.assign(i,r);t(i)}function kk(e){let t={};return e.forEach((n,i)=>{t[i]=n}),t}function Dk(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}function hA(e){var t,n,i;if(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(let s of(n=e?.tools)!==null&&n!==void 0?n:[])if(br(s)){o=!0;break}if(!o)return!0;let r=(i=e?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function br(e){return"callTool"in e&&typeof e.callTool=="function"}function Uk(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>br(o)))!==null&&i!==void 0?i:!1}function gA(e){var t;let n=[];return!((t=e?.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,o)=>{if(br(i))return;let r=i;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(o)}),n}function yA(e){var t;return!(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}function Pk(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Lk(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>$k(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function Fk(e,t,n){let i={},o=u(t,["expireTime"]);n!==void 0&&o!=null&&f(n,["expireTime"],o);let r=u(t,["newSessionExpireTime"]);n!==void 0&&r!=null&&f(n,["newSessionExpireTime"],r);let s=u(t,["uses"]);n!==void 0&&s!=null&&f(n,["uses"],s);let a=u(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],zk(e,a));let l=u(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),i}function Ok(e,t){let n={},i=u(t,["config"]);return i!=null&&f(n,["config"],Fk(e,i,n)),n}function Hk(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Gk(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function qk(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function Bk(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function Vk(e,t){let n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);let r=u(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);let s=u(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","mediaResolution"],c);let d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],jh(p));let m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);let h=u(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],h);let g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],Lk(ut(g)));let S=u(e,["tools"]);if(t!==void 0&&S!=null){let I=Pr(S);Array.isArray(I)&&(I=I.map(_=>Jk(Ur(_)))),f(t,["setup","tools"],I)}let x=u(e,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],Yk(x));let y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);let v=u(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","outputAudioTranscription"],v);let T=u(e,["realtimeInputConfig"]);t!==void 0&&T!=null&&f(t,["setup","realtimeInputConfig"],T);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&f(t,["setup","contextWindowCompression"],A);let C=u(e,["proactivity"]);if(t!==void 0&&C!=null&&f(t,["setup","proactivity"],C),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function zk(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],oe(e,i));let o=u(t,["config"]);return o!=null&&f(n,["config"],Vk(o,n)),n}function $k(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],Hk(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],Gk(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],Pk(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function Yk(e){let t={},n=u(e,["handle"]);if(n!=null&&f(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Jk(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],qk(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],Bk(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function Kk(e){let t=[];for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let o=Object.keys(i).map(r=>`${n}.${r}`);t.push(...o)}else t.push(n)}return t.join(",")}function Xk(e,t){let n=null,i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let r=i.setup;typeof r=="object"&&r!==null?(e.bidiGenerateContentSetup=r,n=r):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;let o=e.fieldMask;if(n){let r=Kk(n);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)r?e.fieldMask=r:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];o.length>0&&(a=o.map(c=>s.includes(c)?`generationConfig.${c}`:c));let l=[];r&&l.push(r),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}function Qk(e,t){let n={},i=u(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function Zk(e){let t={},n=u(e,["name"]);n!=null&&f(t,["_url","name"],n);let i=u(e,["config"]);return i!=null&&Qk(i,t),t}function Wk(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function jk(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function eD(e){let t={},n=u(e,["parent"]);n!=null&&f(t,["_url","parent"],n);let i=u(e,["config"]);return i!=null&&jk(i,t),t}function tD(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["documents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["documents"],r)}return t}function Fh(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}function aD(e){if(!e)return!0;for(let t in e)return!1;return!0}function lD(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}function mD(){if(typeof navigator>"u"||!navigator)return null;let e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:t,pattern:n}of e){let i=n.exec(navigator.userAgent);if(i){let o=i[1]||0,r=i[2]||0,s=i[3]||0;return{browser:t,version:`${o}.${r}.${s}`}}}return null}function gD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function nE(...e){let t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function yD(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return nE({start(){},async pull(n){let{done:i,value:o}=await t.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function iE(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){let n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function vD(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}let i=e.getReader(),o=i.cancel();i.releaseLock(),await o}function om(e,t,n){return oE(),new File(e,t??"unknown_file",n)}function TD(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}async function CD(e,t,n){if(oE(),e=await e,AD(e))return e instanceof File?e:om([await e.arrayBuffer()],e.name);if(ED(e)){let o=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),om(await Gh(o),t,n)}let i=await Gh(e);if(t||(t=TD(e)),!n?.type){let o=i.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return om(i,t,n)}async function Gh(e){var t,n,i,o,r;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(rE(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(xD(e))try{for(var a=!0,l=fn(e),c;c=await l.next(),t=c.done,!t;a=!0){o=c.value,a=!1;let d=o;s.push(...await Gh(d))}}catch(d){n={error:d}}finally{try{!a&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}else{let d=(r=e?.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof e}${d?`; constructor: ${d}`:""}${_D(e)}`)}return s}function _D(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function sE(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}function bD(e){let t=0;for(let o of e)t+=o.length;let n=new Uint8Array(t),i=0;for(let o of e)n.set(o,i),i+=o.length;return n}function eg(e){let t;return(hu??(t=new globalThis.TextEncoder,hu=t.encode.bind(t)))(e)}function AA(e){let t;return(gu??(t=new globalThis.TextDecoder,gu=t.decode.bind(t)))(e)}function ND(e,t){for(let o=t??0;o<e.length;o++){if(e[o]===10)return{preceding:o,index:o+1,carriage:!1};if(e[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function RD(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}function ta(){}function yu(e,t,n){return!t||rc[e]>rc[n]?ta:t[e].bind(t)}function gt(e){var t;let n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return ID;let o=CA.get(n);if(o&&o[0]===i)return o[1];let r={error:yu("error",n,i),warn:yu("warn",n,i),info:yu("info",n,i),debug:yu("debug",n,i)};return CA.set(n,[i,r]),r}function MD(e,t){return cn(this,arguments,function*(){var i,o,r,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _t("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _t("Attempted to iterate over a response with no body");let a=new qh,l=new kr,c=iE(e.body);try{for(var d=!0,p=fn(kD(c)),m;m=yield Y(p.next()),i=m.done,!i;d=!0){s=m.value,d=!1;let h=s;for(let g of l.decode(h)){let S=a.decode(g);S&&(yield yield Y(S))}}}catch(h){o={error:h}}finally{try{!d&&!i&&(r=p.return)&&(yield Y(r.call(p)))}finally{if(o)throw o.error}}for(let h of l.flush()){let g=a.decode(h);g&&(yield yield Y(g))}})}function kD(e){return cn(this,arguments,function*(){var n,i,o,r;let s=new Uint8Array;try{for(var a=!0,l=fn(e),c;c=yield Y(l.next()),n=c.done,!n;a=!0){r=c.value,a=!1;let d=r;if(d==null)continue;let p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?eg(d):d,m=new Uint8Array(s.length+p.length);m.set(s),m.set(p,s.length),s=m;let h;for(;(h=RD(s))!==-1;)yield yield Y(s.slice(0,h)),s=s.slice(h)}}catch(d){i={error:d}}finally{try{!a&&!n&&(o=l.return)&&(yield Y(o.call(l)))}finally{if(i)throw i.error}}s.length>0&&(yield yield Y(s))})}function DD(e,t){let n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function UD(e,t){let{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:r}=t,s=await(async()=>{var a;if(t.options.stream)return gt(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Oi.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;let l=n.headers.get("content-type"),c=(a=l?.split(";")[0])===null||a===void 0?void 0:a.trim();return c?.includes("application/json")||c?.endsWith("+json")?await n.json():await n.text()})();return gt(e).debug(`[${i}] response parsed`,mo({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-r})),s}function*PD(e){if(!e)return;if(aE in e){let{values:i,nulls:o}=e;yield*i.entries();for(let r of o)yield[r,null];return}let t=!1,n;e instanceof Headers?n=e.entries():vA(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){let o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let r=vA(i[1])?i[1]:[i[1]],s=!1;for(let a of r)a!==void 0&&(t&&!s&&(s=!0,yield[o,null]),yield[o,a])}}function LD(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function FD(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function OD(e,t){let n={},i=u(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function HD(e,t){let n={},i=u(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function GD(e,t,n){let i={};if(u(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=u(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&f(t,["displayName"],o),u(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let r=u(e,["epochCount"]);t!==void 0&&r!=null&&f(t,["tuningTask","hyperparameters","epochCount"],r);let s=u(e,["learningRateMultiplier"]);if(s!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let a=u(e,["batchSize"]);t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","batchSize"],a);let l=u(e,["learningRate"]);if(t!==void 0&&l!=null&&f(t,["tuningTask","hyperparameters","learningRate"],l),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function qD(e,t,n){let i={},o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let h=u(e,["validationDataset"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec"],_A(h))}else if(o==="PREFERENCE_TUNING"){let h=u(e,["validationDataset"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec"],_A(h))}let r=u(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&f(t,["tunedModelDisplayName"],r);let s=u(e,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let h=u(e,["epochCount"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],h)}else if(a==="PREFERENCE_TUNING"){let h=u(e,["epochCount"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],h)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let h=u(e,["learningRateMultiplier"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h)}else if(l==="PREFERENCE_TUNING"){let h=u(e,["learningRateMultiplier"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],h)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let h=u(e,["exportLastCheckpointOnly"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],h)}else if(c==="PREFERENCE_TUNING"){let h=u(e,["exportLastCheckpointOnly"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],h)}let d=u(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let h=u(e,["adapterSize"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],h)}else if(d==="PREFERENCE_TUNING"){let h=u(e,["adapterSize"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],h)}if(u(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let p=u(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);let m=u(e,["beta"]);return t!==void 0&&m!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],m),i}function BD(e,t){let n={},i=u(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);let o=u(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);let r=u(e,["trainingDataset"]);r!=null&&jD(r);let s=u(e,["config"]);return s!=null&&GD(s,n),n}function VD(e,t){let n={},i=u(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);let o=u(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);let r=u(e,["trainingDataset"]);r!=null&&e2(r,n,t);let s=u(e,["config"]);return s!=null&&qD(s,n,t),n}function zD(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function $D(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function YD(e,t,n){let i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);let r=u(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);let s=u(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),i}function JD(e,t,n){let i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);let r=u(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);let s=u(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),i}function KD(e,t){let n={},i=u(e,["config"]);return i!=null&&YD(i,n),n}function XD(e,t){let n={},i=u(e,["config"]);return i!=null&&JD(i,n),n}function QD(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);let r=u(e,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>uE(a))),f(n,["tuningJobs"],s)}return n}function ZD(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);let r=u(e,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Bh(a))),f(n,["tuningJobs"],s)}return n}function WD(e,t){let n={},i=u(e,["name"]);i!=null&&f(n,["model"],i);let o=u(e,["name"]);return o!=null&&f(n,["endpoint"],o),n}function jD(e,t){let n={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=u(e,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(n,["examples","examples"],o)}return n}function e2(e,t,n){let i={},o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=u(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=u(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let r=u(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let s=u(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){let s=u(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function uE(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["name"]);o!=null&&f(n,["name"],o);let r=u(e,["state"]);r!=null&&f(n,["state"],LA(r));let s=u(e,["createTime"]);s!=null&&f(n,["createTime"],s);let a=u(e,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);let l=u(e,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&f(n,["updateTime"],c);let d=u(e,["description"]);d!=null&&f(n,["description"],d);let p=u(e,["baseModel"]);p!=null&&f(n,["baseModel"],p);let m=u(e,["_self"]);return m!=null&&f(n,["tunedModel"],WD(m)),n}function Bh(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["name"]);o!=null&&f(n,["name"],o);let r=u(e,["state"]);r!=null&&f(n,["state"],LA(r));let s=u(e,["createTime"]);s!=null&&f(n,["createTime"],s);let a=u(e,["startTime"]);a!=null&&f(n,["startTime"],a);let l=u(e,["endTime"]);l!=null&&f(n,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&f(n,["updateTime"],c);let d=u(e,["error"]);d!=null&&f(n,["error"],d);let p=u(e,["description"]);p!=null&&f(n,["description"],p);let m=u(e,["baseModel"]);m!=null&&f(n,["baseModel"],m);let h=u(e,["tunedModel"]);h!=null&&f(n,["tunedModel"],h);let g=u(e,["preTunedModel"]);g!=null&&f(n,["preTunedModel"],g);let S=u(e,["supervisedTuningSpec"]);S!=null&&f(n,["supervisedTuningSpec"],S);let x=u(e,["preferenceOptimizationSpec"]);x!=null&&f(n,["preferenceOptimizationSpec"],x);let y=u(e,["tuningDataStats"]);y!=null&&f(n,["tuningDataStats"],y);let v=u(e,["encryptionSpec"]);v!=null&&f(n,["encryptionSpec"],v);let T=u(e,["partnerModelTuningSpec"]);T!=null&&f(n,["partnerModelTuningSpec"],T);let A=u(e,["customBaseModel"]);A!=null&&f(n,["customBaseModel"],A);let C=u(e,["experiment"]);C!=null&&f(n,["experiment"],C);let I=u(e,["labels"]);I!=null&&f(n,["labels"],I);let _=u(e,["outputUri"]);_!=null&&f(n,["outputUri"],_);let M=u(e,["pipelineJob"]);M!=null&&f(n,["pipelineJob"],M);let R=u(e,["serviceAccount"]);R!=null&&f(n,["serviceAccount"],R);let N=u(e,["tunedModelDisplayName"]);N!=null&&f(n,["tunedModelDisplayName"],N);let $=u(e,["veoTuningSpec"]);return $!=null&&f(n,["veoTuningSpec"],$),n}function t2(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["name"]);o!=null&&f(n,["name"],o);let r=u(e,["metadata"]);r!=null&&f(n,["metadata"],r);let s=u(e,["done"]);s!=null&&f(n,["done"],s);let a=u(e,["error"]);return a!=null&&f(n,["error"],a),n}function _A(e,t){let n={},i=u(e,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);let o=u(e,["vertexDatasetResource"]);return o!=null&&f(n,["validationDatasetUri"],o),n}async function s2(e,t,n){var i;let o=await cE(e,t,n),r=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[sc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function a2(e,t,n){var i;let o=await cE(e,t,n),r=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[sc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=RA(r),a=new Ir;return Object.assign(a,s),a}async function cE(e,t,n){var i,o;let r=0,s=0,a=new Nr(new Response),l="upload";for(r=e.size;s<r;){let c=Math.min(n2,r-s),d=e.slice(s,s+c);s+c>=r&&(l+=", finalize");let p=0,m=o2;for(;p<i2&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((i=a?.headers)===null||i===void 0)&&i[sc]));)p++,await u2(m),m=m*r2;if(s+=c,((o=a?.headers)===null||o===void 0?void 0:o[sc])!=="active")break;if(r<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function l2(e){return{size:e.size,type:e.type}}function u2(e){return new Promise(t=>setTimeout(t,e))}var bA,NA,dn,am,lm,um,w,cm,fm,dm,pm,mm,hm,gm,ym,vm,Sm,Tm,xm,Am,Em,Cm,_m,wm,go,bm,Nm,Rm,Tu,Im,Mm,xu,km,Dm,Um,Pm,Lm,Fm,Om,Hm,Gm,qm,Bm,Vm,zm,$m,Ym,Jm,Km,Xm,Qm,Zm,Wm,jm,eh,th,nh,ih,oh,ho,rh,sh,ah,lh,Nr,ch,fh,Fi,na,ia,Au,Eu,Cu,_u,oa,ra,sa,wu,dh,yo,aa,la,ua,ca,bu,Nu,Ru,ph,Rr,Iu,Mu,ku,mh,hh,gh,fa,yh,vh,Sh,Th,xh,Ah,Eh,Du,Ch,_h,Uu,wh,Ir,Mn,kn,Lu,Fu,Hu,Gu,Hi,qu,pk,mk,hk,Mh,gk,yk,vk,Sk,kh,xk,WA,vo,Dh,Uh,Rk,Bu,Mk,Vu,mA,zu,$u,Yu,Ph,Lh,tE,nD,Oh,_t,st,da,Mr,Ju,Ku,Xu,Qu,Zu,Wu,ju,ec,tc,iD,oD,Hh,rD,sD,vA,uD,cD,fD,_r,pD,SA,TA,pu,hD,SD,oE,xD,rE,AD,ED,nc,xA,wD,mu,ic,oc,hu,gu,kr,rc,EA,ID,CA,mo,Oi,qh,pa,aE,ea,rm,lE,Dr,Ge,Vh,zh,n2,i2,o2,r2,sc,$h,Yh,Jh,wA,Kh,c2,Dn,pe=Io(()=>{dn=class{};(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(am||(am={}));(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(lm||(lm={}));(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(um||(um={}));(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(w||(w={}));(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(cm||(cm={}));(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(fm||(fm={}));(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(dm||(dm={}));(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pm||(pm={}));(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(mm||(mm={}));(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(hm||(hm={}));(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(gm||(gm={}));(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(ym||(ym={}));(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(vm||(vm={}));(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Sm||(Sm={}));(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Tm||(Tm={}));(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(xm||(xm={}));(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Am||(Am={}));(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Em||(Em={}));(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Cm||(Cm={}));(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(_m||(_m={}));(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(wm||(wm={}));(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(go||(go={}));(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bm||(bm={}));(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Nm||(Nm={}));(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Rm||(Rm={}));(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Tu||(Tu={}));(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Im||(Im={}));(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Mm||(Mm={}));(function(e){e.COLLECTION="COLLECTION"})(xu||(xu={}));(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(km||(km={}));(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Dm||(Dm={}));(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Um||(Um={}));(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Pm||(Pm={}));(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Lm||(Lm={}));(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Fm||(Fm={}));(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Om||(Om={}));(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Hm||(Hm={}));(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Gm||(Gm={}));(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(qm||(qm={}));(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Bm||(Bm={}));(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Vm||(Vm={}));(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(zm||(zm={}));(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})($m||($m={}));(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Ym||(Ym={}));(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Jm||(Jm={}));(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(Km||(Km={}));(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Xm||(Xm={}));(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Qm||(Qm={}));(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Zm||(Zm={}));(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(Wm||(Wm={}));(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jm||(jm={}));(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(eh||(eh={}));(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(th||(th={}));(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(nh||(nh={}));(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ih||(ih={}));(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(oh||(oh={}));(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(ho||(ho={}));rh=class{},sh=class{},ah=class{};lh=class{};Nr=class{constructor(t){let n={};for(let i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}},ch=class{},fh=class{},Fi=class{get text(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1,p=[];for(let m of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[h,g]of Object.entries(m))h!=="text"&&h!=="thought"&&h!=="thoughtSignature"&&(g!==null||g!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",d=[];for(let p of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(c?.length!==0)return c}get executableCode(){var t,n,i,o,r,s,a,l,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,i,o,r,s,a,l,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.output}},na=class{},ia=class{},Au=class{},Eu=class{},Cu=class{},_u=class{},oa=class{},ra=class{},sa=class{},wu=class{},dh=class{},yo=class{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let i=new yo,o,r=t;return n?o=kN(r):o=MN(r),Object.assign(i,o),i}},aa=class{},la=class{},ua=class{},ca=class{},bu=class{},Nu=class{},Ru=class{},ph=class{},Rr=class{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let i=new Rr,r=HN(t);return Object.assign(i,r),i}},Iu=class{},Mu=class{},ku=class{},mh=class{},hh=class{},gh=class{},fa=class{},yh=class{},vh=class{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_RAW",referenceImage:this.referenceImage,referenceId:this.referenceId}}},Sh=class{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_MASK",referenceImage:this.referenceImage,referenceId:this.referenceId,maskImageConfig:this.config}}},Th=class{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_CONTROL",referenceImage:this.referenceImage,referenceId:this.referenceId,controlImageConfig:this.config}}},xh=class{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_STYLE",referenceImage:this.referenceImage,referenceId:this.referenceId,styleImageConfig:this.config}}},Ah=class{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_SUBJECT",referenceImage:this.referenceImage,referenceId:this.referenceId,subjectImageConfig:this.config}}},Eh=class{toReferenceImageAPI(){return{referenceType:"REFERENCE_TYPE_CONTENT",referenceImage:this.referenceImage,referenceId:this.referenceId}}},Du=class{get text(){var t,n,i;let o="",r=!1,s=[];for(let a of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var t,n,i;let o="",r=[];for(let s of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&r.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}},Ch=class{},_h=class{constructor(){this.functionResponses=[]}},Uu=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}},wh=class{},Ir=class{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let i=new Ir,r=RA(t);return Object.assign(i,r),i}};(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Mn||(Mn={}));kn=class{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,r;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(r=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}};Lu=class extends dn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new kn(Mn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){let n=rA(this.apiClient,t),i=n._url,o=D("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(let d of l){let p=Object.assign({},d);if(p.systemInstruction){let m=p.systemInstruction;delete p.systemInstruction;let h=p.request;h.systemInstruction=m,p.request=h}c.push(p)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){let i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){let r=this.getGcsUri(t),s=this.getBigqueryUri(t);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${o}`;else if(s)i.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=A1(this.apiClient,t);return a=D("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Nh(d))}else{let c=rA(this.apiClient,t);return a=D("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>vu(d))}}async createEmbeddingsInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=C1(this.apiClient,t);return r=D("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>vu(l))}}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=O1(this.apiClient,t);return a=D("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Nh(d))}else{let c=F1(this.apiClient,t);return a=D("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>vu(d))}}async cancel(t){var n,i,o,r;let s="",a={};if(this.apiClient.isVertexAI()){let l=y1(this.apiClient,t);s=D("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{let l=g1(this.apiClient,t);s=D("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=J1(t);return a=D("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=X1(d),m=new fa;return Object.assign(m,p),m})}else{let c=Y1(t);return a=D("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=K1(d),m=new fa;return Object.assign(m,p),m})}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=w1(this.apiClient,t);return a=D("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>N1(d))}else{let c=_1(this.apiClient,t);return a=D("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>b1(d))}}};Fu=class extends dn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new kn(Mn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=oR(this.apiClient,t);return a=D("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=iR(this.apiClient,t);return a=D("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=mR(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=pR(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=sR(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=lR(d),m=new ua;return Object.assign(m,p),m})}else{let c=rR(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=aR(d),m=new ua;return Object.assign(m,p),m})}}async update(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=IR(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=RR(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=TR(t);return a=D("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=AR(d),m=new ca;return Object.assign(m,p),m})}else{let c=SR(t);return a=D("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=xR(d),m=new ca;return Object.assign(m,p),m})}}};Hu=class{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Gu(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}},Gu=class{constructor(t,n,i,o={},r=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),kR(r)}async sendMessage(t){var n;await this.sendPromise;let i=ut(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,s,a;let l=await o,c=(s=(r=l.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content,d=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length,m=[];d!=null&&(m=(a=d.slice(p))!==null&&a!==void 0?a:[]);let h=c?[c]:[];this.recordHistory(i,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;let i=ut(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let r=await o;return this.processStreamResponse(r,i)}getHistory(t=!1){let n=t?lA(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return cn(this,arguments,function*(){var o,r,s,a,l,c;let d=[];try{for(var p=!0,m=fn(t),h;h=yield Y(m.next()),o=h.done,!o;p=!0){a=h.value,p=!1;let g=a;if(MR(g)){let S=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;S!==void 0&&d.push(S)}yield yield Y(g)}}catch(g){r={error:g}}finally{try{!p&&!o&&(s=m.return)&&(yield Y(s.call(m)))}finally{if(r)throw r.error}}this.recordHistory(n,d)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(r=>r.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...lA(i)):this.history.push(t),this.history.push(...o)}};Hi=class extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Hi.prototype)}};qu=class extends dn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new kn(Mn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=HR(t);return r=D("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=GR(l),d=new Iu;return Object.assign(d,c),d})}}async createInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=DR(t);return r=D("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=UR(l),d=new Mu;return Object.assign(d,c),d})}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=FR(t);return r=D("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=PR(t);return r=D("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=LR(l),d=new ku;return Object.assign(d,c),d})}}};pk="Content-Type",mk="X-Server-Timeout",hk="User-Agent",Mh="x-goog-api-client",gk="1.38.0",yk=`google-genai-sdk/${gk}`,vk="v1beta1",Sk="v1beta",kh=class{constructor(t){var n,i,o;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!a?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:vk}else{if(!this.clientOptions.apiKey)throw new Hi({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Sk,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){let o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===xu.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));let i=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(let[s,a]of Object.entries(t.queryParams))o.searchParams.append(s,String(a));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.unaryApiCall(o,r,t.httpMethod)}patchHttpOptions(t,n){let i=JSON.parse(JSON.stringify(t));for(let[o,r]of Object.entries(n))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));let i=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.streamApiCall(o,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,o){if(n&&n.timeout||o){let r=new AbortController,s=r.signal;if(n.timeout&&n?.timeout>0){let a=setTimeout(()=>r.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),t.signal=s}return n&&n.extraBody!==null&&Tk(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await pA(o),new Nr(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await pA(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return cn(this,arguments,function*(){var i;let o=(i=t?.body)===null||i===void 0?void 0:i.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="",a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:c,value:d}=yield Y(o.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=r.decode(d,{stream:!0});try{let g=JSON.parse(p);if("error"in g){let S=JSON.parse(JSON.stringify(g.error)),x=S.status,y=S.code,v=`got status: ${x}. ${JSON.stringify(g)}`;if(y>=400&&y<600)throw new Hi({message:v,status:y})}}catch(g){if(g.name==="ApiError")throw g}s+=p;let m=-1,h=0;for(;;){m=-1,h=0;for(let x of l){let y=s.indexOf(x);y!==-1&&(m===-1||y<m)&&(m=y,h=x.length)}if(m===-1)break;let g=s.substring(0,m);s=s.substring(m+h);let S=g.trim();if(S.startsWith(a)){let x=S.substring(a.length).trim();try{let y=new Response(x,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield Y(new Nr(y))}catch(y){throw new Error(`exception parsing stream chunk ${x}. ${y}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let t={},n=yk+" "+this.clientOptions.userAgentExtra;return t[hk]=n,t[Mh]=n,t[pk]="application/json",t}async getHeadersInternal(t,n){let i=new Headers;if(t&&t.headers){for(let[o,r]of Object.entries(t.headers))i.append(o,r);t.timeout&&t.timeout>0&&i.append(mk,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;let o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let r=this.clientOptions.uploader,s=await r.stat(t);o.sizeBytes=String(s.size);let a=(i=n?.mimeType)!==null&&i!==void 0?i:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;let l={file:o},c=this.getFileName(t),d=D("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,c,l,n?.httpOptions);return r.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,i){var o;let r=this.clientOptions.uploader,s=await r.stat(n),a=String(s.size),l=(o=i?.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${t}:uploadToFileSearchStore`,d=this.getFileName(n),p={};i!=null&&ZA(i,p);let m=await this.fetchUploadUrl(c,a,l,d,p,i?.httpOptions);return r.uploadToFileSearchStore(n,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,o,r,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};let c=await this.request({path:t,body:JSON.stringify(r),httpMethod:"POST",httpOptions:l});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let d=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}};xk="mcp_used/unknown",WA=!1;vo=class{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new vo(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;let r={},s=[];for(let d of this.mcpClients)try{for(var a=!0,l=(n=void 0,fn(Ek(d))),c;c=await l.next(),t=c.done,!t;a=!0){o=c.value,a=!1;let p=o;s.push(p);let m=p.name;if(r[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);r[m]=d}}catch(p){n={error:p}}finally{try{!a&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),a1(this.mcpTools,this.config)}async callTool(t){await this.initialize();let n=[];for(let i of t)if(i.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[i.name],r;this.config.timeout&&(r={timeout:this.config.timeout});let s=await o.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return n}};Dh=class{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),s=Nk(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},d=new Promise(T=>{c=T}),p=t.callbacks,m=function(){c({})},h=this.apiClient,g={onopen:m,onmessage:T=>{wk(h,p.onmessage,T)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=p?.onclose)!==null&&i!==void 0?i:function(T){}},S=this.webSocketFactory.create(l,bk(s),g);S.connect(),await d;let v={setup:{model:oe(this.apiClient,t.model)}};return S.send(JSON.stringify(v)),new Uh(S,this.apiClient)}},Uh=class{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=jR(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});let n=WR(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){let n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ho.PLAY)}pause(){this.sendPlaybackControl(ho.PAUSE)}stop(){this.sendPlaybackControl(ho.STOP)}resetContext(){this.sendPlaybackControl(ho.RESET_CONTEXT)}close(){this.conn.close()}};Rk="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";Bu=class{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new Dh(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,r,s,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),d,p=this.apiClient.getHeaders();t.config&&t.config.tools&&jA(t.config.tools)&&eE(p);let m=Dk(p);if(this.apiClient.isVertexAI()){let R=this.apiClient.getProject(),N=this.apiClient.getLocation(),$=this.apiClient.getApiKey(),Te=!!R&&!!N||!!$;this.apiClient.getCustomBaseUrl()&&!Te?d=l:(d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d))}else{let R=this.apiClient.getApiKey(),N="BidiGenerateContent",$="key";R?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",$="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${N}?${$}=${R}`}let h=()=>{},g=new Promise(R=>{h=R}),S=t.callbacks,x=function(){var R;(R=S?.onopen)===null||R===void 0||R.call(S),h({})},y=this.apiClient,v={onopen:x,onmessage:R=>{Ik(y,S.onmessage,R)},onerror:(n=S?.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=S?.onclose)!==null&&i!==void 0?i:function(R){}},T=this.webSocketFactory.create(d,kk(m),v);T.connect(),await g;let A=oe(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){let R=this.apiClient.getProject(),N=this.apiClient.getLocation();R&&N&&(A=`projects/${R}/locations/${N}/`+A)}let C={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[go.AUDIO]}:t.config.responseModalities=[go.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let I=(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],_=[];for(let R of I)if(this.isCallableTool(R)){let N=R;_.push(await N.tool())}else _.push(R);_.length>0&&(t.config.tools=_);let M={model:A,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?C=ZR(this.apiClient,M):C=QR(this.apiClient,M),delete C.config,T.send(JSON.stringify(C)),new Vu(T,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}},Mk={turnComplete:!0},Vu=class{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=tn(n.turns),t.isVertexAI()||(i=i.map(o=>ac(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(Rk)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},Mk),t);let n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:tI(t)}:n={realtimeInput:eI(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};mA=10;zu=class extends dn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,r,s,a;let l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Uk(n)||hA(n.config))return await this.generateContentInternal(l);let c=gA(n);if(c.length>0){let S=c.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let d,p,m=tn(l.contents),h=(r=(o=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:mA,g=0;for(;g<h&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){let S=d.candidates[0].content,x=[];for(let y of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(br(y)){let T=await y.callTool(d.functionCalls);x.push(...T)}g++,p={role:"user",parts:x},l.contents=tn(l.contents),l.contents.push(S),l.contents.push(p),yA(l.config)&&(m.push(S),m.push(p))}return yA(l.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var i,o,r,s,a;if(this.maybeMoveToResponseJsonSchem(n),hA(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let l=gA(n);if(l.length>0){let p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let c=(r=(o=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,d=(a=(s=n?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let r,s=[];if(i?.generatedImages)for(let l of i.generatedImages)l&&l?.safetyAttributes&&((o=l?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=l?.safetyAttributes:s.push(l);let a;return r?a={generatedImages:s,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;let s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new kn(Mn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{let i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));let o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,r,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(((i=n.video)===null||i===void 0?void 0:i.uri)&&((o=n.video)===null||o===void 0?void 0:o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:((s=(r=n.source)===null||r===void 0?void 0:r.video)===null||s===void 0?void 0:s.uri)&&((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0?void 0:l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;let r=(n=t.config)===null||n===void 0?void 0:n.tools;if(!r)return t;let s=await Promise.all(r.map(async l=>br(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(a.config.tools=s,t.config&&t.config.tools&&jA(t.config.tools)){let l=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{},c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),eE(c),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(t){var n,i,o;let r=new Map;for(let s of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(br(s)){let a=s,l=await a.tool();for(let c of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,a)}}return r}async processAfcStream(t){var n,i,o;let r=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:mA,s=!1,a=0,l=await this.initAfcToolsMap(t);return function(c,d,p){return cn(this,arguments,function*(){for(var m,h,g,S,x,y;a<r;){s&&(a++,s=!1);let C=yield Y(c.processParamsMaybeAddMcpUsage(p)),I=yield Y(c.generateContentStreamInternal(C)),_=[],M=[];try{for(var v=!0,T=(h=void 0,fn(I)),A;A=yield Y(T.next()),m=A.done,!m;v=!0){S=A.value,v=!1;let R=S;if(yield yield Y(R),R.candidates&&((x=R.candidates[0])===null||x===void 0?void 0:x.content)){M.push(R.candidates[0].content);for(let N of(y=R.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<r&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(N.functionCall.name)){let $=yield Y(d.get(N.functionCall.name).callTool([N.functionCall]));_.push(...$)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(R){h={error:R}}finally{try{!v&&!m&&(g=T.return)&&(yield Y(g.call(T)))}finally{if(h)throw h.error}}if(_.length>0){s=!0;let R=new Fi;R.candidates=[{content:{role:"user",parts:_}}],yield yield Y(R);let N=[];N.push(...M),N.push({role:"user",parts:_});let $=tn(p.contents).concat(N);p.contents=$}else break}})}(this,l,t)}async generateContentInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=cA(this.apiClient,t);return a=D("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=dA(d),m=new Fi;return Object.assign(m,p),m})}else{let c=uA(this.apiClient,t);return a=D("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=fA(d),m=new Fi;return Object.assign(m,p),m})}}async generateContentStreamInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=cA(this.apiClient,t);return a=D("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return cn(this,arguments,function*(){var m,h,g,S;try{for(var x=!0,y=fn(p),v;v=yield Y(y.next()),m=v.done,!m;x=!0){S=v.value,x=!1;let T=S,A=dA(yield Y(T.json()));A.sdkHttpResponse={headers:T.headers};let C=new Fi;Object.assign(C,A),yield yield Y(C)}}catch(T){h={error:T}}finally{try{!x&&!m&&(g=y.return)&&(yield Y(g.call(y)))}finally{if(h)throw h.error}}})})}else{let c=uA(this.apiClient,t);return a=D("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return cn(this,arguments,function*(){var m,h,g,S;try{for(var x=!0,y=fn(p),v;v=yield Y(y.next()),m=v.done,!m;x=!0){S=v.value,x=!1;let T=S,A=fA(yield Y(T.json()));A.sdkHttpResponse={headers:T.headers};let C=new Fi;Object.assign(C,A),yield yield Y(C)}}catch(T){h={error:T}}finally{try{!x&&!m&&(g=y.return)&&(yield Y(g.call(y)))}finally{if(h)throw h.error}}})})}}async embedContent(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=DI(this.apiClient,t);return a=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=PI(d),m=new na;return Object.assign(m,p),m})}else{let c=kI(this.apiClient,t);return a=D("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=UI(d),m=new na;return Object.assign(m,p),m})}}async generateImagesInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=YI(this.apiClient,t);return a=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=KI(d),m=new ia;return Object.assign(m,p),m})}else{let c=$I(this.apiClient,t);return a=D("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=JI(d),m=new ia;return Object.assign(m,p),m})}}async editImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=NI(this.apiClient,t);return r=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=RI(l),d=new Au;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=YM(this.apiClient,t);return r=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=JM(l),d=new Eu;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=bM(this.apiClient,t);return r=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=NM(l),d=new Cu;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=UM(this.apiClient,t);return r=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=PM(l),d=new _u;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=fM(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Ih(d))}else{let c=cM(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Rh(d))}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=TM(this.apiClient,t);return a=D("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=AM(d),m=new oa;return Object.assign(m,p),m})}else{let c=SM(this.apiClient,t);return a=D("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=xM(d),m=new oa;return Object.assign(m,p),m})}}async update(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=zM(this.apiClient,t);return a=D("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Ih(d))}else{let c=VM(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>Rh(d))}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=CI(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=wI(d),m=new ra;return Object.assign(m,p),m})}else{let c=EI(this.apiClient,t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=_I(d),m=new ra;return Object.assign(m,p),m})}}async countTokens(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=TI(this.apiClient,t);return a=D("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=AI(d),m=new sa;return Object.assign(m,p),m})}else{let c=SI(this.apiClient,t);return a=D("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=xI(d),m=new sa;return Object.assign(m,p),m})}}async computeTokens(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=dI(this.apiClient,t);return r=D("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=pI(l),d=new wu;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=eM(this.apiClient,t);return a=D("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let p=WI(d),m=new yo;return Object.assign(m,p),m})}else{let c=jI(this.apiClient,t);return a=D("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>{let p=ZI(d),m=new yo;return Object.assign(m,p),m})}}};$u=class extends dn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){let n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){let n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=ON(t);return a=D("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else{let c=FN(t);return a=D("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=IN(t);return r=D("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};Yu=class extends dn{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=Ok(this.apiClient,t);r=D("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let l=Xk(a,t.config);return o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}};Ph=class extends dn{constructor(t){super(),this.apiClient=t,this.list=async n=>new kn(Mn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Wk(t);return r=D("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=Zk(t);o=D("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=eD(t);return r=D("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=tD(l),d=new bu;return Object.assign(d,c),d})}}};Lh=class extends dn{constructor(t,n=new Ph(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new kn(Mn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=ek(t);return r=D("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=ik(t);return r=D("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=nk(t);o=D("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=uk(t);return r=D("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=ck(l),d=new Nu;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=fk(t);return r=D("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=dk(l),d=new Ru;return Object.assign(d,c),d})}}async importFile(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=sk(t);return r=D("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=rk(l),d=new Rr;return Object.assign(d,c),d})}}};tE=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return tE=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))},nD=()=>tE();Oh=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){let t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};_t=class extends Error{},st=class extends _t{constructor(t,n,i,o){super(`${st.makeMessage(t,n,i)}`),this.status=t,this.headers=o,this.error=n}static makeMessage(t,n,i){let o=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,i,o){if(!t||!o)return new Mr({message:i,cause:Oh(n)});let r=n;return t===400?new Ku(t,r,i,o):t===401?new Xu(t,r,i,o):t===403?new Qu(t,r,i,o):t===404?new Zu(t,r,i,o):t===409?new Wu(t,r,i,o):t===422?new ju(t,r,i,o):t===429?new ec(t,r,i,o):t>=500?new tc(t,r,i,o):new st(t,r,i,o)}},da=class extends st{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}},Mr=class extends st{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}},Ju=class extends Mr{constructor({message:t}={}){super({message:t??"Request timed out."})}},Ku=class extends st{},Xu=class extends st{},Qu=class extends st{},Zu=class extends st{},Wu=class extends st{},ju=class extends st{},ec=class extends st{},tc=class extends st{};iD=/^[a-z][a-z0-9+.-]*:/i,oD=e=>iD.test(e),Hh=e=>(Hh=Array.isArray,Hh(e)),rD=Hh,sD=rD,vA=sD;uD=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new _t(`${e} must be an integer`);if(t<0)throw new _t(`${e} must be a positive integer`);return t},cD=e=>{try{return JSON.parse(e)}catch{return}};fD=e=>new Promise(t=>setTimeout(t,e));_r="0.0.1";pD=()=>{var e,t,n,i,o;let r=dD();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_r,"X-Stainless-OS":TA(Deno.build.os),"X-Stainless-Arch":SA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_r,"X-Stainless-OS":TA((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":SA((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let s=mD();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};SA=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",TA=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown"),hD=()=>pu??(pu=pD());SD=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});oE=()=>{var e;if(typeof File>"u"){let{process:t}=globalThis,n=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};xD=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";rE=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",AD=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&rE(e),ED=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";nc=class{constructor(t){this._client=t}};nc._key=[];xA=Object.freeze(Object.create(null)),wD=(e=sE)=>function(n,...i){if(n.length===1)return n[0];let o=!1,r=[],s=n.reduce((d,p,m)=>{var h,g,S;/[?#]/.test(p)&&(o=!0);let x=i[m],y=(o?encodeURIComponent:e)(""+x);return m!==i.length&&(x==null||typeof x=="object"&&x.toString===((S=Object.getPrototypeOf((g=Object.getPrototypeOf((h=x.hasOwnProperty)!==null&&h!==void 0?h:xA))!==null&&g!==void 0?g:xA))===null||S===void 0?void 0:S.toString))&&(y=x+"",r.push({start:d.length+p.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),d+p+(m===i.length?"":y)},""),a=s.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=l.exec(a))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((d,p)=>d.start-p.start),r.length>0){let d=0,p=r.reduce((m,h)=>{let g=" ".repeat(h.start-d),S="^".repeat(h.length);return d=h.start+h.length,m+g+S},"");throw new _t(`Path parameters result in path with invalid segments:
${r.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s},mu=wD(sE);ic=class extends nc{create(t,n){var i;let{api_version:o=this._client.apiVersion}=t,r=Ou(t,["api_version"]);if("model"in r&&"agent_config"in r)throw new _t("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new _t("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(mu`/${o}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(mu`/${o}/interactions/${t}`,i)}cancel(t,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.post(mu`/${o}/interactions/${t}/cancel`,i)}get(t,n={},i){var o;let r=n??{},{api_version:s=this._client.apiVersion}=r,a=Ou(r,["api_version"]);return this._client.get(mu`/${s}/interactions/${t}`,Object.assign(Object.assign({query:a},i),{stream:(o=n?.stream)!==null&&o!==void 0?o:!1}))}};ic._key=Object.freeze(["interactions"]);oc=class extends ic{};kr=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];let n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?eg(t):t;this.buffer=bD([this.buffer,n]);let i=[],o;for(;(o=ND(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(AA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let r=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=AA(this.buffer.subarray(0,r));i.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};kr.NEWLINE_CHARS=new Set([`
`,"\r"]);kr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;rc={off:0,error:200,warn:300,info:400,debug:500},EA=(e,t,n)=>{if(!!e){if(lD(rc,e))return e;gt(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(rc))}`)}};ID={error:ta,warn:ta,info:ta,debug:ta},CA=new WeakMap;mo=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);Oi=class{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let o=!1,r=i?gt(i):console;function s(){return cn(this,arguments,function*(){var l,c,d,p;if(o)throw new _t("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,g=fn(MD(t,n)),S;S=yield Y(g.next()),l=S.done,!l;h=!0){p=S.value,h=!1;let x=p;if(!m)if(x.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield Y(JSON.parse(x.data))}catch(y){throw r.error("Could not parse message into JSON:",x.data),r.error("From chunk:",x.raw),y}}}catch(x){c={error:x}}finally{try{!h&&!l&&(d=g.return)&&(yield Y(d.call(g)))}finally{if(c)throw c.error}}m=!0}catch(x){if(Fh(x))return yield Y(void 0);throw x}finally{m||n.abort()}})}return new Oi(s,n,i)}static fromReadableStream(t,n,i){let o=!1;function r(){return cn(this,arguments,function*(){var l,c,d,p;let m=new kr,h=iE(t);try{for(var g=!0,S=fn(h),x;x=yield Y(S.next()),l=x.done,!l;g=!0){p=x.value,g=!1;let y=p;for(let v of m.decode(y))yield yield Y(v)}}catch(y){c={error:y}}finally{try{!g&&!l&&(d=S.return)&&(yield Y(d.call(S)))}finally{if(c)throw c.error}}for(let y of m.flush())yield yield Y(y)})}function s(){return cn(this,arguments,function*(){var l,c,d,p;if(o)throw new _t("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,g=fn(r()),S;S=yield Y(g.next()),l=S.done,!l;h=!0){p=S.value,h=!1;let x=p;m||x&&(yield yield Y(JSON.parse(x)))}}catch(x){c={error:x}}finally{try{!h&&!l&&(d=g.return)&&(yield Y(d.call(g)))}finally{if(c)throw c.error}}m=!0}catch(x){if(Fh(x))return yield Y(void 0);throw x}finally{m||n.abort()}})}return new Oi(s,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){let t=[],n=[],i=this.iterator(),o=r=>({next:()=>{if(r.length===0){let s=i.next();t.push(s),n.push(s)}return r.shift()}});return[new Oi(()=>o(t),this.controller,this.client),new Oi(()=>o(n),this.controller,this.client)]}toReadableStream(){let t=this,n;return nE({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{let{value:o,done:r}=await n.next();if(r)return i.close();let s=eg(JSON.stringify(o)+`
`);i.enqueue(s)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}};qh=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;let r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,o]=DD(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}};pa=class extends Promise{constructor(t,n,i=UD){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new pa(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){let[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}};aE=Symbol("brand.privateNullableHeaders");ea=e=>{let t=new Headers,n=new Set;for(let i of e){let o=new Set;for(let[r,s]of PD(i)){let a=r.toLowerCase();o.has(a)||(t.delete(r),o.add(a)),s===null?(t.delete(r),n.add(a)):(t.append(r,s),n.delete(a))}}return{[aE]:!0,values:t,nulls:n}};rm=e=>{var t,n,i,o,r,s;if(typeof globalThis.process<"u")return(i=(n=(t=globalThis.process.env)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(r=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||r===void 0?void 0:r.call(o,e))===null||s===void 0?void 0:s.trim()};Dr=class{constructor(t){var n,i,o,r,s,a,l,{baseURL:c=rm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=rm("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=t,m=Ou(t,["baseURL","apiKey","apiVersion"]);let h=Object.assign(Object.assign({apiKey:d,apiVersion:p},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=h.baseURL,this.timeout=(i=h.timeout)!==null&&i!==void 0?i:Dr.DEFAULT_TIMEOUT,this.logger=(o=h.logger)!==null&&o!==void 0?o:console;let g="warn";this.logLevel=g,this.logLevel=(s=(r=EA(h.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:EA(rm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:g,this.fetchOptions=h.fetchOptions,this.maxRetries=(a=h.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=h.fetch)!==null&&l!==void 0?l:gD(),this.encoder=SD,this._options=h,this.apiKey=d,this.apiVersion=p,this.clientAdapter=h.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){let n=ea([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return ea([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ea([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new _t(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${_r}`}defaultIdempotencyKey(){return`stainless-node-retry-${nD()}`}makeStatusError(t,n,i,o){return st.generate(t,n,i,o)}buildURL(t,n,i){let o=!this.baseURLOverridden()&&i||this.baseURL,r=oD(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return aD(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){let n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:t,path:n},o)))}request(t,n=null){return new pa(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var o,r,s;let a=await t,l=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);let{req:c,url:d,timeout:p}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});let m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=i===void 0?"":`, retryOf: ${i}`,g=Date.now();if(gt(this).debug(`[${m}] sending request`,mo({retryOfRequestLogID:i,method:a.method,url:d,options:a,headers:c.headers})),!((r=a.signal)===null||r===void 0)&&r.aborted)throw new da;let S=new AbortController,x=await this.fetchWithTimeout(d,c,p,S).catch(Oh),y=Date.now();if(x instanceof globalThis.Error){let T=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new da;let A=Fh(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return gt(this).info(`[${m}] connection ${A?"timed out":"failed"} - ${T}`),gt(this).debug(`[${m}] connection ${A?"timed out":"failed"} (${T})`,mo({retryOfRequestLogID:i,url:d,durationMs:y-g,message:x.message})),this.retryRequest(a,n,i??m);throw gt(this).info(`[${m}] connection ${A?"timed out":"failed"} - error; no more retries left`),gt(this).debug(`[${m}] connection ${A?"timed out":"failed"} (error; no more retries left)`,mo({retryOfRequestLogID:i,url:d,durationMs:y-g,message:x.message})),A?new Ju:new Mr({cause:x})}let v=`[${m}${h}] ${c.method} ${d} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${y-g}ms`;if(!x.ok){let T=await this.shouldRetry(x);if(n&&T){let R=`retrying, ${n} attempts remaining`;return await vD(x.body),gt(this).info(`${v} - ${R}`),gt(this).debug(`[${m}] response error (${R})`,mo({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:y-g})),this.retryRequest(a,n,i??m,x.headers)}let A=T?"error; no more retries left":"error; not retryable";gt(this).info(`${v} - ${A}`);let C=await x.text().catch(R=>Oh(R).message),I=cD(C),_=I?void 0:C;throw gt(this).debug(`[${m}] response error (${A})`,mo({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,message:_,durationMs:Date.now()-g})),this.makeStatusError(x.status,I,_,x.headers)}return gt(this).info(v),gt(this).debug(`[${m}] response start`,mo({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:y-g})),{response:x,options:a,controller:S,requestLogID:m,retryOfRequestLogID:i,startTime:g}}async fetchWithTimeout(t,n,i,o){let r=n||{},{signal:s,method:a}=r,l=Ou(r,["signal","method"]);s&&s.addEventListener("abort",()=>o.abort());let c=setTimeout(()=>o.abort(),i),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(p.method=a.toUpperCase());try{return await this.fetch.call(void 0,t,p)}finally{clearTimeout(c)}}async shouldRetry(t){let n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,o){var r;let s,a=o?.get("retry-after-ms");if(a){let c=parseFloat(a);Number.isNaN(c)||(s=c)}let l=o?.get("retry-after");if(l&&!s){let c=parseFloat(l);Number.isNaN(c)?s=Date.parse(l)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){let c=(r=t.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await fD(s),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){let r=n-t,s=Math.min(.5*Math.pow(2,r),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,o,r;let s=Object.assign({},t),{method:a,path:l,query:c,defaultBaseURL:d}=s,p=this.buildURL(l,c,d);"timeout"in s&&uD("timeout",s.timeout),s.timeout=(i=s.timeout)!==null&&i!==void 0?i:this.timeout;let{bodyHeaders:m,body:h}=this.buildBody({options:s}),g=await this.buildHeaders({options:t,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:g},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"}),h&&{body:h}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(r=s.fetchOptions)!==null&&r!==void 0?r:{}),url:p,timeout:s.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:o}){let r={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);let s=await this.authHeaders(t),a=ea([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),hD()),this._options.defaultHeaders,i,t.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};let i=ea([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:yD(t)}:this.encoder({body:t,headers:i})}};Dr.DEFAULT_TIMEOUT=6e4;Ge=class extends Dr{constructor(){super(...arguments),this.interactions=new oc(this)}};lE=Ge;Ge.GeminiNextGenAPIClient=lE;Ge.GeminiNextGenAPIClientError=_t;Ge.APIError=st;Ge.APIConnectionError=Mr;Ge.APIConnectionTimeoutError=Ju;Ge.APIUserAbortError=da;Ge.NotFoundError=Zu;Ge.ConflictError=Wu;Ge.RateLimitError=ec;Ge.BadRequestError=Ku;Ge.AuthenticationError=Xu;Ge.InternalServerError=tc;Ge.PermissionDeniedError=Qu;Ge.UnprocessableEntityError=ju;Ge.toFile=CD;Ge.Interactions=oc;Vh=class extends dn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new kn(Mn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);let r=Object.assign(Object.assign({},n),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{let o=Object.assign({},n);return await this.tuneInternal(o)}else{let o=Object.assign({},n),r=await this.tuneMldevInternal(o),s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:Tu.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=$D(t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>Bh(d))}else{let c=zD(t);return a=D("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>uE(d))}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=XD(t);return a=D("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=ZD(d),m=new aa;return Object.assign(m,p),m})}else{let c=KD(t);return a=D("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=QD(d),m=new aa;return Object.assign(m,p),m})}}async cancel(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=FD(t);return a=D("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=HD(d),m=new la;return Object.assign(m,p),m})}else{let c=LD(t);return a=D("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=OD(d),m=new la;return Object.assign(m,p),m})}}async tuneInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=VD(t,t);return r=D("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>Bh(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=BD(t);return r=D("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>t2(l))}}};zh=class{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},n2=1024*1024*8,i2=3,o2=1e3,r2=2,sc="x-goog-upload-status";$h=class{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await s2(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await a2(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await l2(t)}};Yh=class{create(t,n,i){return new Jh(t,n,i)}},Jh=class{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};wA="x-goog-api-key",Kh=class{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(wA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(wA,this.apiKey)}}};c2="gl-node/",Dn=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new Ge({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;let i=NN(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;let o=new Kh(this.apiKey);this.apiClient=new kh({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:c2+"web",uploader:new $h,downloader:new zh}),this.models=new zu(this.apiClient),this.live=new Bu(this.apiClient,o,new Yh),this.batches=new Lu(this.apiClient),this.chats=new Hu(this.models,this.apiClient),this.caches=new Fu(this.apiClient),this.files=new qu(this.apiClient),this.operations=new $u(this.apiClient),this.authTokens=new Yu(this.apiClient),this.tunings=new Vh(this.apiClient),this.fileSearchStores=new Lh(this.apiClient)}}});var NC=vn(qc=>{"use strict";var CF=Symbol.for("react.transitional.element"),_F=Symbol.for("react.fragment");function bC(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:CF,type:e,key:i,ref:t!==void 0?t:null,props:n}}qc.Fragment=_F;qc.jsx=bC;qc.jsxs=bC});var ne=vn((hG,RC)=>{"use strict";RC.exports=NC()});var PO={};ae(PO,{default:()=>ef});module.exports=k_(PO);var d_=require("obsidian");var Sy=K(Bt(),1),c_=require("obsidian"),f_=K(Tx(),1);var L=K(Bt(),1);De();ht();pe();var Or=require("obsidian");function dE(e){let t=atob(e),n=t.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);return i}function pE(e){let t="",n=e.byteLength;for(let i=0;i<n;i++)t+=String.fromCharCode(e[i]);return btoa(t)}function mE(e,t,n,i){let o=new Int16Array(e.buffer),r=o.length/i,s=t.createBuffer(i,r,n);for(let a=0;a<i;a++){let l=s.getChannelData(a);for(let c=0;c<r;c++)l[c]=o[c*i+a]/32768}return s}function hE(e){let t=e.length,n=new Int16Array(t);for(let i=0;i<t;i++){let o=Math.max(-1,Math.min(1,e[i]));n[i]=o<0?o*32768:o*32767}return n}var cc={};ae(cc,{declaration:()=>f2,execute:()=>d2,instruction:()=>tg});De();var f2={name:"list_directory",description:"Lists all available files in the vault using paths relative to vault root."},tg="- list_directory: Use this to get an overview of the user's vault. All file paths are relative to vault root. Always call this if you are unsure of the available files.",d2=(e,t)=>{let n=In();return t.onSystem("Registry scanned",{name:"list_directory",filename:"Vault Root",files:n}),Promise.resolve({files:n})};var fc={};ae(fc,{declaration:()=>p2,execute:()=>m2,instruction:()=>ig});pe();De();var gE=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},ng=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},p2={name:"list_vault_files",description:"Lists markdown files in the vault with pagination and sorting. Essential for large vaults.",parameters:{type:w.OBJECT,properties:{limit:{type:w.NUMBER,description:"Max number of files to return (default: 20)"},offset:{type:w.NUMBER,description:"Number of files to skip (default: 0)"},sortBy:{type:w.STRING,enum:["mtime","name","size"],description:"Property to sort by. mtime is last modified time."},sortOrder:{type:w.STRING,enum:["asc","desc"],description:"Sort order (default: desc)"},filter:{type:w.STRING,description:"Optional text filter for path or filename."}}}},ig="- list_vault_files: Use this to explore large vaults. It supports paging and sorting. Default is most recently modified first.",m2=async(e,t)=>{let n=gE(e,"limit"),i=gE(e,"offset",0)??0,o=ng(e,"sortBy"),r=ng(e,"sortOrder"),s=ng(e,"filter"),a=await js({limit:n,offset:i,sortBy:o,sortOrder:r,filter:s}),l=a.files.map(c=>c.path);return t.onSystem(`Vault files (${i}-${i+a.files.length} of ${a.total})`,{name:"list_vault_files",filename:"Vault Explorer",files:l}),a};var dc={};ae(dc,{declaration:()=>h2,execute:()=>g2,instruction:()=>og});De();pe();var h2={name:"get_folder_tree",description:"Lists all folders in the vault as a flat array to understand hierarchy, or lists all files (notes and other files) in a specific folder. All paths are relative to vault root.",parameters:{type:w.OBJECT,properties:{folder_path:{type:w.STRING,description:"Optional: Path to a specific folder to query. If provided, returns all files (notes, images, PDFs, etc.) in that folder and its subfolders. If not provided, returns all folders in the vault."}},required:[]}},og="- get_folder_tree: Use this to see a simple list of all folders in the vault hierarchy. Optionally provide a folder_path parameter to query all files (notes, images, PDFs, etc.) in a specific folder and its subfolders. All paths are relative to vault root.",g2=(e,t)=>{let n=e.folder_path,i=uu(n),o=n?`Folder contents queried for: ${n}`:"Folder structure scanned",r=n?`Folder Contents: ${n}`:"Folder Tree";return t.onSystem(o,{name:"get_folder_tree",filename:r,files:i}),Promise.resolve({files:i})};var pc={};ae(pc,{declaration:()=>y2,execute:()=>v2,instruction:()=>rg});De();var y2={name:"dirlist",description:"Lists only directory structure, ignoring files, to understand vault hierarchy. All paths are relative to vault root."},rg="- dirlist: Use this to see the pure directory structure of the vault without any file information. All paths are relative to vault root.",v2=(e,t)=>{let i=Xx().map(o=>({path:o.path||"/",type:"directory",hasChildren:o.children.length>0}));return t.onSystem("Directory structure scanned",{name:"dirlist",filename:"Directory List",directoryInfo:i}),Promise.resolve({directories:i})};var mc={};ae(mc,{declaration:()=>T2,execute:()=>x2,instruction:()=>sg});pe();De();we();var S2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},T2={name:"read_file",description:"Read the full content of a specified file using path relative to vault root.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},sg=`- read_file: Use this to ingest the contents of a note. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). You should read a file before proposing major edits to ensure context. Parameters:
  - filename: required, path to the file`,x2=async(e,t)=>{let n=S2(e,"filename");if(!n)throw new Error("Missing filename");let i=await Gt(n);await et(n),t.onSystem(`Opened ${n}`,{name:"read_file",filename:n,oldContent:i,newContent:i,additions:0,removals:0});let o=$e(n);return t.onFileState(o,n),{content:i}};var hc={};ae(hc,{declaration:()=>A2,execute:()=>E2,instruction:()=>ag});pe();De();we();var yE=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},A2={name:"create_file",description:"Create a new file with initial content using path relative to vault root.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},content:{type:w.STRING}},required:["filename","content"]}},ag='- create_file: Use this to initialize new notes in the vault. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). Always provide meaningful initial content.',E2=async(e,t)=>{let n=yE(e,"filename"),i=yE(e,"content")??"";if(!n)throw new Error("Missing filename");await cu(n,i),await et(n),t.onSystem(`Created ${n}`,{name:"create_file",filename:n,oldContent:"",newContent:i,additions:i.split(`
`).length,removals:0});let o=$e(n);return t.onFileState(o,n),{status:"created"}};var gc={};ae(gc,{declaration:()=>C2,execute:()=>_2,instruction:()=>lg});pe();De();we();var vE=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},C2={name:"update_file",description:"Overwrite the entire content of an existing file.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING},content:{type:w.STRING}},required:["filename","content"]}},lg="- update_file: Use this for total overwrites. For smaller changes, prefer edit_file.",_2=async(e,t)=>{let n=vE(e,"filename"),i=vE(e,"content")??"";if(!n)throw new Error("Missing filename");let o=await Gt(n).catch(()=>"");await po(n,i),await et(n);let r=o.split(`
`),s=i.split(`
`),a=s.filter(d=>!r.includes(d)).length,l=r.filter(d=>!s.includes(d)).length;t.onSystem(`Updated ${n}`,{name:"update_file",filename:n,oldContent:o,newContent:i,additions:a,removals:l});let c=$e(n);return t.onFileState(c,n),{status:"updated"}};var yc={};ae(yc,{declaration:()=>b2,execute:()=>N2,instruction:()=>cg});pe();De();we();var ug=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},w2=(e,t)=>{let n=e[t];return typeof n=="number"?n:void 0},b2={name:"edit_file",description:"Perform granular line-based edits on a file.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING},operation:{type:w.STRING,enum:["append","replace_line","remove_line"]},text:{type:w.STRING},lineNumber:{type:w.NUMBER}},required:["filename","operation"]}},cg="- edit_file: Use this for targeted modifications (appending, replacing lines, or removing lines).",N2=async(e,t)=>{let n=ug(e,"filename"),i=ug(e,"operation"),o=ug(e,"text"),r=w2(e,"lineNumber");if(!n||!i)throw new Error("Missing filename or operation");let s=await Gt(n).catch(()=>"");await jx(n,i,o,r);let a=await Gt(n);await et(n),t.onSystem(`Edited ${n}`,{name:"edit_file",filename:n,oldContent:s,newContent:a,additions:i==="append"||i==="replace_line"?1:0,removals:i==="remove_line"||i==="replace_line"?1:0});let l=$e(n);return t.onFileState(l,n),{status:"edited"}};var vc={};ae(vc,{declaration:()=>R2,execute:()=>I2,instruction:()=>fg});pe();De();we();var SE=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},R2={name:"rename_file",description:"Rename an existing file to a new name.",parameters:{type:w.OBJECT,properties:{oldFilename:{type:w.STRING,description:"The current name of the file"},newFilename:{type:w.STRING,description:"The new name for the file"}},required:["oldFilename","newFilename"]}},fg="- rename_file: Use this to change the name of a note. Ensure the new name follows markdown extension conventions if applicable.",I2=async(e,t)=>{let n=SE(e,"oldFilename"),i=SE(e,"newFilename");if(!n||!i)throw new Error("Missing oldFilename or newFilename");await Zx(n,i),await et(i),t.onSystem(`Renamed ${n} to ${i}`,{name:"rename_file",filename:n,oldContent:n,newContent:i});let o=$e(i);return t.onFileState(o,i),{status:"renamed",from:n,to:i}};var Sc={};ae(Sc,{declaration:()=>M2,execute:()=>k2,instruction:()=>dg});pe();De();var TE=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},M2={name:"move_file",description:"Move a file from one folder to another using paths relative to vault root",parameters:{type:w.OBJECT,properties:{sourcePath:{type:w.STRING,description:'Current path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},targetPath:{type:w.STRING,description:'New path relative to vault root (e.g., "archive/projects/notes.md" or "notes.md" for root level)'}},required:["sourcePath","targetPath"]}},dg='- move_file: Move a file using paths relative to vault root. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level files). Use this to reorganize files between folders.',k2=async(e,t)=>{let n=TE(e,"sourcePath"),i=TE(e,"targetPath");if(!n||!i)throw new Error("Missing sourcePath or targetPath");return await Wx(n,i),t.onSystem(`Moved ${n} to ${i}`,{name:"move_file",filename:n,displayFormat:`<span style="color: #fb923c; font-weight: 600;">${n}</span> <span style="color: #6b7280;">\u2192</span> <span style="color: #10b981; font-weight: 600;">${i}</span>`,dropdown:!1}),{status:"moved",from:n,to:i}};var Tc={};ae(Tc,{declaration:()=>U2,execute:()=>P2,instruction:()=>pg});pe();De();var D2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},U2={name:"search_keyword",description:"Search for a keyword across all files in the vault.",parameters:{type:w.OBJECT,properties:{keyword:{type:w.STRING,description:"The text to search for"}},required:["keyword"]}},pg="- search_keyword: Fast plaintext search across all files.",P2=async(e,t)=>{let n=D2(e,"keyword");if(!n)throw new Error("Missing keyword");let i=await du(n,!1);return t.onSystem(`Search complete for "${n}"`,{name:"search_keyword",filename:`Global Search: "${n}"`,searchKeyword:n,searchResults:i,displayFormat:`Searching for "<strong>${n}</strong>" (${i.length} results)`}),{results:i}};var xc={};ae(xc,{declaration:()=>L2,execute:()=>F2,instruction:()=>mg});pe();De();var xE=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},L2={name:"search_regexp",description:"Search using a regular expression across all files.",parameters:{type:w.OBJECT,properties:{pattern:{type:w.STRING,description:"The regex pattern"},flags:{type:w.STRING,description:'Optional regex flags (default: "i")'}},required:["pattern"]}},mg="- search_regexp: Advanced regex search. Use this to identify files for global replacements.",F2=async(e,t)=>{let n=xE(e,"pattern"),i=xE(e,"flags")||"i";if(!n)throw new Error("Missing pattern");let o=await du(n,!0,i);return t.onSystem(`Regex search complete for /${n}/`,{name:"search_regexp",filename:`Regex: /${n}/${i}`,searchResults:o,displayFormat:`Regex search "<strong>/${n}/${i}</strong>" (${o.length} results)`}),{results:o}};var Ec={};ae(Ec,{declaration:()=>O2,execute:()=>H2,instruction:()=>hg});pe();De();we();var Ac=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},O2={name:"search_and_replace_regex_in_file",description:"Search and replace text in a specific file using regex.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING},pattern:{type:w.STRING},replacement:{type:w.STRING},flags:{type:w.STRING,description:'Optional regex flags (default: "g")'}},required:["filename","pattern","replacement"]}},hg="- search_and_replace_regex_in_file: Targeted regex replacement within a single node.",H2=async(e,t)=>{let n=Ac(e,"filename"),i=Ac(e,"pattern"),o=Ac(e,"replacement")??"",r=Ac(e,"flags")||"g";if(!n||!i)throw new Error("Missing filename or pattern");let s=await Gt(n),a=new RegExp(i,r),l=s.replace(a,o);await po(n,l),await et(n),t.onSystem(`Replaced in ${n}`,{name:"search_and_replace_regex_in_file",filename:n,oldContent:s,newContent:l,additions:1,removals:1});let c=$e(n);return t.onFileState(c,n),{status:"success"}};var Cc={};ae(Cc,{declaration:()=>G2,execute:()=>q2,instruction:()=>yg});pe();De();we();var gg=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},G2={name:"search_and_replace_regex_global",description:"Search and replace text across ALL files using regex.",parameters:{type:w.OBJECT,properties:{pattern:{type:w.STRING},replacement:{type:w.STRING},flags:{type:w.STRING,description:'Optional regex flags (default: "g")'}},required:["pattern","replacement"]}},yg=`
GLOBAL SEARCH & REPLACE WORKFLOW:
1. When asked for a global replacement, ALWAYS run "search_regexp" first.
2. Report the number of files that will be updated.
3. ASK for explicit confirmation before calling "search_and_replace_regex_global".
4. After execution, report "updated all occurrences".`,q2=async(e,t)=>{let n=In(),i=gg(e,"pattern"),o=gg(e,"replacement")??"",r=gg(e,"flags")||"g";if(!i)throw new Error("Missing pattern");let s=new RegExp(i,r),a=[],l=0,c=[];for(let d of n){let p=await Gt(d);if(s.test(p)){let m=p.replace(s,o);await po(d,m),a.push({filename:d,oldContent:p,newContent:m,additions:1,removals:1}),c.push(d),l++}}return t.onSystem(`Global replace complete: ${l} files updated`,{name:"search_and_replace_regex_global",filename:"Vault Wide",multiDiffs:a}),c.length>0&&(await et(c[0]),t.onFileState("/",c)),{status:"success",filesUpdated:l}};var _c={};ae(_c,{declaration:()=>B2,execute:()=>z2,instruction:()=>vg});pe();var B2={name:"topic_switch",description:"Signal that a major topic shift has occurred. Provide a summary of the previous conversation.",parameters:{type:w.OBJECT,properties:{summary:{type:w.STRING,description:"A short one-sentence summary of the preceding conversation segment."}},required:["summary"]}},vg=`
TOPIC SWITCHING & PERSISTENCE: 
1. Monitor for significant topic switches in the conversation flow.
2. If a switch occurs, call "topic_switch" with a concise summary.
3. This will automatically trigger an ARCHIVE process.
4. Do NOT say "Done." after calling this. Proceed immediately to the next topic.`,V2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},z2=(e,t)=>{let i=`x-chat-history-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.md`,o=V2(e,"summary")||"Topic switch";return t.onSystem("Context update",{name:"topic_switch",filename:i,newContent:o}),Promise.resolve({status:"context_reset"})};var Sg={};ae(Sg,{declaration:()=>Y2,execute:()=>K2,instruction:()=>J2});pe();De();var $2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},Y2={name:"create_directory",description:"Create a new directory in the vault. Parent directories will be created automatically if they don't exist.",parameters:{type:w.OBJECT,properties:{path:{type:w.STRING,description:'Directory path relative to vault root (e.g., "projects/notes" or "archive" for root level)'}},required:["path"]}},J2="- create_directory: Use this to create new directories in the vault. All paths are relative to vault root. Parent directories are created automatically.",K2=async(e,t)=>{let n=$2(e,"path");if(!n)throw new Error("Missing directory path");await fu(n);let i=n.split("/").pop()||n,o=n.replace(/[^/]+$/,"");return t.onSystem(`Created directory ${n}`,{name:"create_directory",filename:n,displayFormat:`${o}<span style="color: #10b981; font-weight: 600;">${i}</span>`,dropdown:!1}),{status:"created",path:n}};var Tg={};ae(Tg,{declaration:()=>Q2,execute:()=>W2,instruction:()=>Z2});pe();De();we();var X2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},Q2={name:"delete_file",description:"Move an existing file from the vault to the trash folder (chat history/trash). Files in trash are hidden from directory listings.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},Z2="- delete_file: Use this to move a note to the trash folder (chat history/trash). Files in trash are hidden from directory listings but can be recovered manually. All paths are relative to vault root.",W2=async(e,t)=>{let n=X2(e,"filename");if(!n)throw new Error("Missing filename");await eA(n),t.onSystem(`Moved ${n} to trash`,{name:"delete_file",filename:n,oldContent:n,newContent:""});let i=$e(n);return t.onFileState(i,null),{status:"moved_to_trash",filename:n}};var wc={};ae(wc,{declaration:()=>tU,execute:()=>nU,instruction:()=>wg});pe();ht();var Ag=class{constructor(){this.name="google"}validate(t){return t&&t.trim().length>0}async execute(t,n){let i=performance.now();if(!this.validate(n))throw new Error("Invalid Google API key");try{let{GoogleGenAI:o}=await Promise.resolve().then(()=>(pe(),fE)),s=await new o({apiKey:n}).models.generateContent({model:"gemini-3-flash-preview",contents:t,config:{tools:[{googleSearch:{}}]}}),a=s.text||"No results found.",l=s.candidates?.[0]?.groundingMetadata?.groundingChunks||[],c=Math.round(performance.now()-i);return{text:a,sourceUrl:void 0,metadata:{provider:"google",duration:c,resultCount:l.length,groundingChunks:l}}}catch(o){throw new Error(`Google search failed: ${o instanceof Error?o.message:String(o)}`)}}},Eg=class{constructor(){this.name="serpapi"}validate(t){return t&&t.trim().length>0}async execute(t,n){let i=performance.now();if(!this.validate(n))throw new Error("Invalid SerpAPI key");try{let o=new URL("https://serpapi.com/search");o.searchParams.append("api_key",n),o.searchParams.append("q",t),o.searchParams.append("engine","google"),o.searchParams.append("num","10");let r=await fetch(o.toString());if(!r.ok)throw new Error(`SerpAPI error: ${r.status}`);let a=(await r.json()).organic_results||[];if(a.length===0)return{text:"No results found.",sourceUrl:void 0,metadata:{provider:"serpapi",duration:Math.round(performance.now()-i),resultCount:0}};let l=a.map((d,p)=>`${p+1}. ${d.title}
${d.snippet}
URL: ${d.link}`).join(`

`),c=Math.round(performance.now()-i);return{text:l,sourceUrl:a[0]?.link,metadata:{provider:"serpapi",duration:c,resultCount:a.length}}}catch(o){throw new Error(`SerpAPI search failed: ${o instanceof Error?o.message:String(o)}`)}}},Cg=class{constructor(){this.name="perplexity"}validate(t){return t&&t.trim().length>0}async execute(t,n){let i=performance.now();if(!this.validate(n))throw new Error("Invalid Perplexity API key");try{let o=await fetch("https://api.perplexity.ai/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({model:"pplx-7b-online",messages:[{role:"user",content:t}]})});if(!o.ok)throw new Error(`Perplexity API error: ${o.status}`);let s=(await o.json()).choices?.[0]?.message?.content||"No results found.",a=Math.round(performance.now()-i);return{text:s,sourceUrl:void 0,metadata:{provider:"perplexity",duration:a}}}catch(o){throw new Error(`Perplexity search failed: ${o instanceof Error?o.message:String(o)}`)}}},_g=class{constructor(){this.providers=new Map([["google",new Ag],["serpapi",new Eg],["perplexity",new Cg]])}getProvider(t){let n=this.providers.get(t);if(!n)throw new Error(`Unknown search provider: ${t}`);return n}listProviders(){return Array.from(this.providers.keys())}registerProvider(t){this.providers.set(t.name,t)}},xg=null;function j2(){return xg||(xg=new _g),xg}function AE(e){return j2().getProvider(e)}var eU=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},tU={name:"internet_search",description:"Search the internet for real-time information, news, current events, or general knowledge outside the vault.",parameters:{type:w.OBJECT,properties:{query:{type:w.STRING,description:"The search query to look up on the web."}},required:["query"]}},wg="- internet_search: Use this to fetch real-time data or information not contained within the local vault. Always use this tool for questions about current events, celebrities, weather, or general knowledge.",nU=async(e,t)=>{let n=eU(e,"query");if(!n)throw new Error("Missing query");t.onSystem(`Internet search: ${n}`,{name:"internet_search",filename:n,status:"pending"});let i=je(),o=i?.webSearchProvider||"google",r;if(o==="serpapi"?r=i?.serperApiKey?.trim():o==="perplexity"?r=i?.perplexityApiKey?.trim():r=i?.manualApiKey?.trim(),!r)throw new Error(`No API key found for provider: ${o}. Please configure it in settings.`);try{let a=await AE(o).execute(n,r),{text:l,metadata:c}=a,d=c?.duration||0,p=l.length,m=c?.groundingChunks||[];return t.onSystem(`Internet search: ${n}`,{name:"internet_search",filename:n,status:"success",newContent:l,groundingChunks:m,duration:d,responseLength:p,description:`Provider: ${o} (${d}ms)`}),{text:l,groundingChunks:m,searchQuery:n}}catch(s){let a=s instanceof Error?s.message:String(s);throw t.onSystem(`Search failed: ${a}`,{name:"internet_search",filename:n,status:"error",error:a}),s}};var bc={};ae(bc,{declaration:()=>iU,execute:()=>oU,instruction:()=>bg});pe();var B=e=>{if(e instanceof Error)return e.message;if(typeof e=="string")return e;if(e&&typeof e=="object"){if("message"in e&&typeof e.message=="string")return e.message;if("error"in e&&typeof e.error=="string")return e.error;try{return JSON.stringify(e)}catch{return"[object Object]"}}return"Non stringifyable error"};var iU={name:"end_conversation",description:"End the current voice conversation session and stop the voice interface.",parameters:{type:w.OBJECT,properties:{},required:[]}},bg=`
CONVERSATION CONTROL:
1. Use "end_conversation" when the user indicates they want to stop talking or end the conversation.
2. This will immediately stop the voice interface and disconnect the session.
3. Do NOT say "Done." after calling this. The session will simply end.`,oU=(e,t)=>{try{return t.onSystem("Ending conversation...",{name:"end_conversation",filename:"Session",status:"success"}),t.onStopSession&&t.onStopSession(),{status:"conversation_ended"}}catch(n){return console.error(`Error in end_conversation: ${B(n)}`),{status:"conversation_ended_with_errors"}}};var Rg={};ae(Rg,{declaration:()=>sU,execute:()=>lU,instruction:()=>aU});pe();ht();De();we();var Ng=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},rU=e=>{let t=atob(e),n=t.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);return i},sU={name:"generate_image_from_context",description:"Generate an image based on the current context or provided prompt using Gemini API and save it to the vault.",parameters:{type:w.OBJECT,properties:{prompt:{type:w.STRING,description:"The prompt describing what image to generate. If not provided, will use current context."},filename:{type:w.STRING,description:'The filename to save the image as (e.g., "generated-image.png"). If not provided, will auto-generate.'},currentFolder:{type:w.STRING,description:"The folder path where to save the image. If not provided, will use active file's folder."}},required:[]}},aU="- generate_image_from_context: Use this to create images based on conversation context or specific prompts. Images are saved to the current vault directory.",lU=async(e,t)=>{let i=je()?.manualApiKey?.trim();if(!i)throw new Error("API key not found. Please set your Gemini API key in the plugin settings.");let o=new Dn({apiKey:i}),r=Ng(e,"prompt");r||(r="Generate an image based on the current conversation context and topic being discussed.");try{let s=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:r}),a="";if(s.candidates&&s.candidates.length>0){let h=s.candidates[0];if(h.content&&h.content.parts){for(let g of h.content.parts)if(g.inlineData&&g.inlineData.data){a=g.inlineData.data;break}}}if(!a)throw new Error("No image data returned from API");let l=Ng(e,"filename");l||(l=`generated-image-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.png`),l.match(/\.(png|jpg|jpeg|gif|webp)$/i)||(l+=".png");let c=rU(a);console.error("=== DEBUG generate_image_from_context: STARTING FILE SAVE ==="),console.error(`DEBUG: Image data length: ${a.length} characters`),console.error(`DEBUG: Binary data size: ${c.byteLength} bytes`),console.error(`DEBUG: First 100 chars of base64: ${a.substring(0,100)}`);let d=Ng(e,"currentFolder")||"";if(console.error(`DEBUG: currentFolder from args: "${d}"`),!d){let h=ve();if(console.error(`DEBUG: getObsidianApp() returned: ${h?"app exists":"NULL"}`),h&&h.workspace){console.error("DEBUG: app.workspace exists");let g=h.workspace.getActiveFile();console.error(`DEBUG: activeFile: ${g?g.path:"NULL"}`),g&&g.parent?(d=g.parent.path,console.error(`DEBUG: currentFolder from activeFile.parent: "${d}"`)):console.error("DEBUG: No activeFile or no parent - currentFolder stays empty")}else console.error("DEBUG: No app or no workspace - currentFolder stays empty")}let p=d?`${d}/${l}`:l;console.error(`DEBUG: Final fullFilename to save: "${p}"`),console.error(`DEBUG: filename only: "${l}"`),console.error(`DEBUG: About to call createBinaryFile with fullFilename="${p}", binaryData.byteLength=${c.byteLength}`);try{let h=await Qx(p,c);console.error(`DEBUG: createBinaryFile returned: "${h}"`)}catch(h){throw console.error("DEBUG: createBinaryFile THREW ERROR:",h),h}console.error("=== DEBUG generate_image_from_context: FILE SAVE COMPLETE ==="),t.onSystem(`Generated image: ${l}`,{name:"generate_image_from_context",filename:l,newContent:`Generated image (${c.byteLength} bytes)`,description:`Image generated from prompt: ${r}`});let m=$e(p);return t.onFileState(m,l),{filename:l,filePath:p,size:c.byteLength,type:l.split(".").pop()||"png",targetFolder:d,description:`Image generated from prompt: ${r}`}}catch(s){console.error("Image generation error:",s),console.error("Error details:",JSON.stringify(s,null,2));let a=`Failed to generate image: ${B(s)}`;throw B(s).includes("model")&&(a+=`

This might be due to an incorrect model name or insufficient API permissions for image generation.`),B(s).includes("API key")&&(a+=`

Please check your Gemini API key configuration.`),new Error(a)}};var Ig={};ae(Ig,{declaration:()=>uU,execute:()=>fU,instruction:()=>cU});we();var EE=require("obsidian");var uU={name:"reveal_active_pane",description:"Reveals and displays information about the last active text editor in Obsidian, including file path, view type, and editor state. Uses getActiveFile() and getLastOpenFiles() for accurate results."},cU="- reveal_active_pane: Use this to get information about the last active text editor in Obsidian, including what file was most recently edited, the view type, and editor details. Uses getActiveFile() for accurate results.",fU=(e,t)=>{let n=ve();if(!n||!n.workspace)return t.onSystem("Error: Not running in Obsidian or workspace unavailable",{name:"reveal_active_pane",filename:"Active Pane",error:"Obsidian workspace not available"}),Promise.resolve({error:"Obsidian workspace not available"});try{let i=n.workspace,o=i.getActiveFile(),r=i.getLastOpenFiles(),s=i.getActiveViewOfType(EE.MarkdownView),a=s?.leaf||null,l=o;if(!a&&l){let h=i.getLeavesOfType("markdown");a=h.find(g=>g.view.file===l)||h[0]||null}if(!a&&!l)return t.onSystem("No active text editor found",{name:"reveal_active_pane",filename:"Active Editor",status:"error",error:"No active text editor currently available"}),Promise.resolve({error:"No active text editor currently available"});let c=s||a?.view,d=c?.getState(),p=c?.file||l,m={viewType:c?.getViewType()||"unknown",hasParent:!!a?.parent,filePath:p?p.path:null,fileName:p?p.name:null,fileExtension:p?p.extension:null,fileSize:p?p.stat?.size:null,fileModified:p?p.stat?.mtime:null,viewState:d,mode:d?.mode||null,source:d?.source||null,editorInfo:c?.editor?{cursor:c.editor.getCursor(),selection:c.editor.getSelection(),lineCount:c.editor.lineCount(),isFocused:c.editor.hasFocus()}:null,lastOpenFiles:r,isActiveFile:!!o,hasActiveLeaf:!!a};return t.onSystem("Active pane information retrieved",{name:"reveal_active_pane",filename:m.fileName||"Active Pane",status:"success",paneInfo:m}),Promise.resolve({paneInfo:m})}catch(i){return console.error("Reveal active pane error:",i),t.onSystem("Error retrieving active pane information",{name:"reveal_active_pane",filename:"Active Pane",status:"error",error:B(i)}),Promise.resolve({error:B(i)})}};var Mg={};ae(Mg,{declaration:()=>dU,execute:()=>mU,instruction:()=>pU});we();var CE=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},dU={name:"open_folder_in_system",description:"Opens the specified folder in the system file browser/finder."},pU='- open_folder_in_system: Use this to open a folder in the system file browser. Takes a folder path as argument (e.g., path: "documents/notes"). Use "." or empty path for vault root.',mU=async(e,t)=>{let n=ve();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"open_folder_in_system",filename:"System Browser",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};try{let i=CE(e,"path")||CE(e,"folder")||".",o=n.vault,r,s;if(i==="."||i===""||i==="/")r=o.adapter.getBasePath(),s="Vault Root";else{let a=o.getAbstractFileByPath(i);if(!a)return t.onSystem(`Path not found: ${i}`,{name:"open_folder_in_system",filename:"System Browser",status:"error",error:`Path "${i}" does not exist in vault`}),{error:`Path "${i}" does not exist in vault`};if(a.extension!==void 0){let l=a.parent?.path||"";r=l?o.adapter.getFullPath(l):o.adapter.getBasePath(),s=a.parent?.name||"Vault Root"}else r=o.adapter.getFullPath(i),s=a.name}if(n.vault.adapter.openPath)await n.vault.adapter.openPath(r);else{let a=n.openWithDefaultApp;a&&await a(r)}return t.onSystem("Opened folder in system browser",{name:"open_folder_in_system",filename:s,status:"success",folderPath:i,systemPath:r}),{success:!0,folderPath:i,systemPath:r,targetName:s,message:`Folder "${s}" opened in system browser`}}catch(i){return console.error("Open folder in system browser error:",i),t.onSystem("Error opening folder in system browser",{name:"open_folder_in_system",filename:"System Browser",status:"error",error:i.message||String(i)}),{error:i.message||String(i)}}};var Nc={};ae(Nc,{declaration:()=>hU,execute:()=>vU,instruction:()=>Ug});we();var Dg=require("obsidian");pe();ht();var hU={name:"image_search",description:"Search for images on the internet and preview them. Click on any image in the preview to download it to the vault.",parameters:{type:w.OBJECT,properties:{query:{type:w.STRING,description:"The search query to find images."},count:{type:w.NUMBER,description:"Number of images to show in preview (default: 3, max: 10)."},auto_download:{type:w.BOOLEAN,description:"Whether to automatically download images (default: false)."},folder:{type:w.STRING,description:"Target folder path (optional, defaults to current folder or assets folder)."},filename_prefix:{type:w.STRING,description:"Prefix for generated filenames (optional)."}},required:["query"]}},Ug="- image_search: Use this to search for images and preview them. Click on any image in the preview to download it to the vault.",kg=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},gU=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},yU=(e,t,n)=>{let i=e[t];return typeof i=="boolean"?i:n},vU=async(e,t)=>{let n=ve();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"image_search",filename:"Image Search",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=kg(e,"query"),o=gU(e,"count",3),r=yU(e,"auto_download",!1),s=kg(e,"folder"),a=kg(e,"filename_prefix");if(!i)return{error:"Missing image search query"};try{t.onSystem(`Image search: ${i}`,{name:"image_search",filename:i,status:"pending"});let l=Math.min(Math.max(1,Math.floor(o)||3),10),c=s;if(!c){let m=n.workspace.getActiveFile();m?c=m.parent?.path||"":c="assets"}c&&!await n.vault.adapter.exists(c)&&await n.vault.createFolder(c);let d=await SU(i,Math.max(l,3));if(!d||d.length===0)return t.onSystem("No images found for the search query",{name:"image_search",filename:i,status:"error",error:"No images found"}),{error:"No images found for the search query"};let p=d.slice(0,l);if(console.debug("=== DEBUG: Search Results ==="),console.debug("Total search results found:",d.length),console.debug("Results for preview:",p),console.debug("Auto download:",r),console.debug("=== END DEBUG: Search Results ==="),t.onSystem(`Found ${d.length} images for "${i}". Click any image to download:`,{name:"image_search",filename:i,status:"search_results",searchResults:p,totalFound:d.length,targetFolder:c}),r){let m=[];for(let h=0;h<Math.min(p.length,l);h++){let g=p[h];try{let S=await TU(n,g,c,a||i,h+1);m.push(S)}catch(S){console.error(`Failed to download image ${h+1}:`,S)}}if(m.length>0){let h=`Downloaded ${m.length} image${m.length>1?"s":""} to ${c}`;return t.onSystem(h,{name:"image_search",filename:i,status:"success",downloadedImages:m}),{query:i,downloadedImages:m,targetFolder:c,totalFound:d.length,totalDownloaded:m.length}}}return{query:i,searchResults:p,targetFolder:c,totalFound:d.length,auto_download:r}}catch(l){return console.error("Image search error:",l),t.onSystem("Error during image search and download",{name:"image_search",filename:i,status:"error",error:B(l)}),{error:B(l)}}};function _E(){let e=ve();e&&e.setting&&(e.setting.open(),e.setting.openTabById("hermes-voice-assistant"))}async function SU(e,t){try{let i=(await au())?.serperApiKey?.trim();if(!i)throw console.error("Serper API key not found"),_E(),new Error("Serper API key not found. Please set your Serper API key in the plugin settings. Get 2,500 free credits at https://serper.dev/");let o="https://google.serper.dev/images";console.debug("Fetching images from Serper.dev API...");let r=await(0,Dg.requestUrl)({url:o,method:"POST",headers:{"X-API-KEY":i,"Content-Type":"application/json"},body:JSON.stringify({q:e,num:Math.min(t,10)})});if(r.status>=400)throw console.error("Serper API error:",r.status,r.text),r.status===401||r.status===403?(_E(),new Error("Invalid Serper API key. Please check your API key in the plugin settings.")):new Error(`Serper API error: ${r.status}`);let s=r.json;if(!s.images||s.images.length===0)return console.debug("No images found for query:",e),[];let a=s.images.map(l=>({url:l.imageUrl,title:l.title,description:l.source||"",image:{thumbnail:l.thumbnailUrl||l.imageUrl,contextLink:l.link,width:l.imageWidth,height:l.imageHeight}}));return console.debug(`Found ${a.length} images for query: ${e}`),a}catch(n){throw console.error("Image search error:",n),n}}async function TU(e,t,n,i,o){try{console.debug("=== DEBUG: downloadAndSaveImage ==="),console.debug("Image result:",t),console.debug("Target folder:",n),console.debug("Filename prefix:",i),console.debug("Index:",o);let r=Date.now(),s=Math.random().toString(36).substring(2,8),a=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),l=xU(t.url)||"jpg",c=`${a}-${o}-${r}-${s}.${l}`,d=n?`${n}/${c}`:c;console.debug("Generated filename:",c),console.debug("File path:",d),console.debug("Extension:",l),console.debug("Starting download from URL:",t.url);let p=await(0,Dg.requestUrl)({url:t.url,method:"GET"});if(p.status>=400)throw new Error(`HTTP error! status: ${p.status}`);let m=p.arrayBuffer;console.debug("Downloaded image size:",m.byteLength,"bytes"),console.debug("Buffer type:",m.constructor.name),console.debug("Saving to vault at path:",d),await e.vault.adapter.writeBinary(d,m),console.debug("Successfully saved to vault");let h={filename:c,filePath:d,url:t.url,title:t.title,size:m.byteLength,type:l};return console.debug("Download result:",h),console.debug("=== END DEBUG: downloadAndSaveImage ==="),h}catch(r){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",r),console.error("Image result that failed:",t),console.error("=== END DEBUG ERROR ==="),r}}function xU(e){try{let n=new URL(e).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var Pg={};ae(Pg,{declaration:()=>EU,execute:()=>_U,instruction:()=>CU});we();var wE=require("obsidian");pe();var Rc=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},AU=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},EU={name:"download_image",description:"Download a specific image from a URL to the vault.",parameters:{type:w.OBJECT,properties:{imageUrl:{type:w.STRING,description:"The URL of the image to download."},title:{type:w.STRING,description:"The title of the image for filename generation."},query:{type:w.STRING,description:"The original search query for filename context."},index:{type:w.NUMBER,description:"The index of the image in search results."},folder:{type:w.STRING,description:"Target folder path (optional)."}},required:["imageUrl","title","query"]}},CU="- download_image: Use this to download a specific image from a URL to the vault.",_U=async(e,t)=>{let n=ve();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"download_image",filename:"Image Download",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=Rc(e,"imageUrl"),o=Rc(e,"title"),r=Rc(e,"query"),s=AU(e,"index",1),a=Rc(e,"folder");if(!i||!o||!r)return{error:"Missing required image download parameters"};try{let l=a;if(!l){let d=n.workspace.getActiveFile();d?l=d.parent?.path||"":l="assets"}l&&!await n.vault.adapter.exists(l)&&await n.vault.createFolder(l);let c=await wU(n,{url:i,title:o},l,r,s);return t.onSystem(`Downloaded image: ${c.filename}`,{name:"download_image",filename:c.filename,status:"success",downloadedImages:[c]}),c}catch(l){return console.error("Download image error:",l),t.onSystem("Error downloading image",{name:"download_image",filename:o,status:"error",error:B(l)}),{error:B(l)}}};async function wU(e,t,n,i,o){try{let r=Date.now(),s=Math.random().toString(36).substring(2,8),a=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),l=bU(t.url)||"jpg",c=`${a}-${o}-${r}-${s}.${l}`,d=n?`${n}/${c}`:c;console.debug("=== DEBUG: downloadAndSaveImage ==="),console.debug("Image URL:",t.url),console.debug("Target folder:",n),console.debug("Filename:",c),console.debug("File path:",d);let m=(await(0,wE.requestUrl)({url:t.url,method:"GET"})).arrayBuffer;console.debug("Downloaded image size:",m.byteLength,"bytes"),console.debug("Saving to vault at path:",d),await e.vault.adapter.writeBinary(d,m),console.debug("Successfully saved to vault");let h={filename:c,filePath:d,url:t.url,title:t.title,size:m.byteLength,type:l,targetFolder:n};return console.debug("Download result:",h),console.debug("=== END DEBUG: downloadAndSaveImage ==="),h}catch(r){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",r),console.error("Image result that failed:",t),console.error("=== END DEBUG ERROR ==="),r}}function bU(e){try{let n=new URL(e).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var Lg={};ae(Lg,{declaration:()=>RU,execute:()=>MU,instruction:()=>IU});pe();we();ht();var NU=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},RU={name:"list_trash",description:"List the most recent files in the trash folder. Shows up to 100 files sorted by deletion time (most recent first).",parameters:{type:w.OBJECT,properties:{limit:{type:w.NUMBER,description:"Maximum number of files to show (default: 20, max: 100)."}}}},IU="- list_trash: Use this to list files in the trash folder. Shows recently deleted files that can be restored.",MU=(e,t)=>{let n=ve();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"list_trash",filename:"Trash",error:"Obsidian vault not available"}),Promise.resolve({error:"Obsidian vault not available"});let i=NU(e,"limit",20),o=Math.min(Math.max(1,Math.floor(i)||20),100);try{t.onSystem("Scanning trash folder...",{name:"list_trash",filename:"Trash",status:"pending"});let a=`${je()?.chatHistoryFolder||"chat-history"}/trash`;if(!n.vault.getAbstractFileByPath(a))return t.onSystem("Trash folder is empty or does not exist",{name:"list_trash",filename:"Trash",status:"success",files:[]}),Promise.resolve({files:[],total:0,message:"Trash folder is empty"});let c=n.vault.getMarkdownFiles().filter(h=>h.path.startsWith(a+"/")).map(h=>({path:h.path,name:h.name,originalName:kU(h.name),trashTimestamp:bE(h.name),deletionDate:DU(bE(h.name)),size:h.stat.size,mtime:h.stat.mtime})).filter(h=>h.trashTimestamp!==null).sort((h,g)=>{let S=h.deletionDate?.getTime()||0;return(g.deletionDate?.getTime()||0)-S}),d=c.length,m=c.slice(0,o).map(h=>({trashPath:h.path,originalName:h.originalName,trashFilename:h.name,deletionDate:h.deletionDate?.toISOString()||"",formattedDeletionDate:h.deletionDate?.toLocaleString()||"",size:h.size,canRestore:!0}));return t.onSystem(`Found ${d} files in trash${d>o?` (showing ${o} most recent)`:""}`,{name:"list_trash",filename:"Trash",status:"success",files:m.map(h=>`${h.originalName} (${h.formattedDeletionDate||"unknown date"})`),totalItems:d,shownItems:m.length}),Promise.resolve({files:m,total:d,shown:m.length,trashFolderPath:a})}catch(r){return console.error("List trash error:",r),t.onSystem("Error listing trash files",{name:"list_trash",filename:"Trash",status:"error",error:B(r)}),Promise.resolve({error:B(r)})}};function kU(e){let t=e.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(t)return t[1];let n=e.match(/^\d+-(.+)$/);return n?n[1]:e}function bE(e){let t=e.match(/^(\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z)-/);if(t)return t[1].replace(/-/g,":").replace("T","T").replace(/(\d{4}-\d{2}-\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})Z/,"$1T$2:$3:$4.$5Z");let n=e.match(/^(\d{13})-/);return n?n[1]:null}function DU(e){if(!e)return null;try{return e.includes("T")&&e.includes("Z")?new Date(e):/^\d{13}$/.test(e)?new Date(parseInt(e)):null}catch{return null}}var Fg={};ae(Fg,{declaration:()=>UU,execute:()=>LU,instruction:()=>PU});pe();we();ht();var NE=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},UU={name:"restore_from_trash",description:"Restore a file from the trash folder to its original location or a specified location.",parameters:{type:w.OBJECT,properties:{trash_filename:{type:w.STRING,description:'The filename in trash (as shown by list_trash, e.g., "2024-01-25T15-30-45-123Z-my-note.md")'},target_path:{type:w.STRING,description:"Optional: Target path where to restore the file. If not provided, attempts to restore to original location."}},required:["trash_filename"]}},PU="- restore_from_trash: Use this to restore a file from trash. Provide the trash filename from list_trash. Optionally specify where to restore it.",LU=async(e,t)=>{let n=ve();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"restore_from_trash",filename:"Trash",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=NE(e,"trash_filename"),o=NE(e,"target_path");if(!i)return t.onSystem("Error: trash_filename is required",{name:"restore_from_trash",filename:"Trash",status:"error",error:"Missing required parameter: trash_filename"}),{error:"trash_filename is required"};try{t.onSystem(`Restoring ${i}...`,{name:"restore_from_trash",filename:i,status:"pending"});let a=`${je()?.chatHistoryFolder||"chat-history"}/trash`,l=i.includes("/")?i:`${a}/${i}`,c=n.vault.getAbstractFileByPath(l);if(!c)return t.onSystem(`File not found in trash: ${i}`,{name:"restore_from_trash",filename:i,status:"error",error:"File not found in trash"}),{error:`File not found in trash: ${i}`};let d=FU(c.name),p=o;if(!p&&(p=d,d.includes("/"))){let g=$e(d);n.vault.getAbstractFileByPath(g)||await n.vault.createFolder(g)}if(n.vault.getAbstractFileByPath(p))return t.onSystem(`Target file already exists: ${p}`,{name:"restore_from_trash",filename:i,status:"error",error:"Target file already exists",targetPath:p}),{error:`Target file already exists: ${p}. Please specify a different target_path or delete the existing file first.`,targetPath:p,trashPath:l};await n.fileManager.renameFile(c,p),await et(p),t.onSystem(`Successfully restored ${d} to ${p}`,{name:"restore_from_trash",filename:d,status:"success",originalPath:l,restoredPath:p});let h=$e(p);return t.onFileState(h,d),{success:!0,originalFilename:d,trashPath:l,restoredPath:p,message:`Successfully restored ${d} to ${p}`}}catch(r){return console.error("Restore from trash error:",r),t.onSystem("Error restoring file from trash",{name:"restore_from_trash",filename:i,status:"error",error:B(r)}),{error:B(r)}}};function FU(e){let t=e.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(t)return t[1];let n=e.match(/^\d+-(.+)$/);return n?n[1]:e}var Og={};ae(Og,{declaration:()=>HU,execute:()=>qU,instruction:()=>GU});pe();we();var OU=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},HU={name:"get_obsidian_commands",description:"Lists all available Obsidian commands that can be executed.",parameters:{type:w.OBJECT,properties:{filter:{type:w.STRING,description:"Optional text filter to search for specific commands by name or description."}}}},GU="- get_obsidian_commands: Use this to list all available Obsidian commands. You can optionally filter commands by name or description.",qU=(e,t)=>{let n=OU(e,"filter");try{let i=ve();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands,r=Object.entries(o).map(([l,c])=>({id:l,name:c.name,description:c.editor?.name||c.name})),s=r;if(n){let l=n.toLowerCase();s=r.filter(c=>c.name.toLowerCase().includes(l)||c.description.toLowerCase().includes(l)||c.id.toLowerCase().includes(l))}s.sort((l,c)=>l.name.localeCompare(c.name));let a=s.map(l=>`${l.name} (${l.id})`);return t.onSystem(`Obsidian commands (${s.length} total)`,{name:"get_obsidian_commands",filename:"Command Registry",files:a}),Promise.resolve({commands:s,total:r.length,filtered:s.length,filter:n||null})}catch(i){throw console.error("Get Obsidian commands error:",i),new Error(`Failed to get Obsidian commands: ${B(i)}`)}};var Hg={};ae(Hg,{declaration:()=>VU,execute:()=>$U,instruction:()=>zU});pe();we();var BU=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},VU={name:"run_obsidian_command",description:"Executes an Obsidian command by its command ID.",parameters:{type:w.OBJECT,properties:{commandId:{type:w.STRING,description:'The command ID to execute (e.g., "editor:toggle-bold" or "workspace:open-command-palette").'}},required:["commandId"]}},zU="- run_obsidian_command: Use this to execute an Obsidian command by its command ID. Use get_obsidian_commands first to find available commands and their IDs.",$U=async(e,t)=>{let n=BU(e,"commandId");if(!n)throw new Error("Missing commandId");try{let i=ve();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands[n];if(!o)throw new Error(`Command not found: ${n}`);await i.commands.executeCommandById(n);let r=o.name||n;return t.onSystem(`Executed: ${r}`,{name:"run_obsidian_command",filename:"Command Execution",status:"success"}),{success:!0,commandId:n,commandName:r,executedAt:new Date().toISOString()}}catch(i){console.error("Run Obsidian command error:",i);let o=B(i);throw t.onSystem(`Command execution failed: ${o}`,{name:"run_obsidian_command",filename:"Command Execution",status:"error",error:o}),new Error(`Failed to execute command ${n}: ${o}`)}};var Mc={};ae(Mc,{declaration:()=>YU,execute:()=>XU,instruction:()=>Bg});pe();var IE=require("obsidian");we();ht();De();var Ic=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},Gg=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},YU={name:"context",description:"Provides comprehensive context about the current Obsidian environment including current note, folder, opened files, chat history, recent files, directory structure, and most used tags.",parameters:{type:w.OBJECT,properties:{includeHistory:{type:w.BOOLEAN,description:"Include chat history in context (default: true)"},historyLimit:{type:w.NUMBER,description:"Number of recent chat messages to include (default: 10)"},includeRecentFiles:{type:w.BOOLEAN,description:"Include recently edited files (default: true)"},recentFilesLimit:{type:w.NUMBER,description:"Number of recent files to include (default: 15)"},includeDirectoryStructure:{type:w.BOOLEAN,description:"Include directory structure up to 2 levels (default: true)"},includeTags:{type:w.BOOLEAN,description:"Include most used tags from vault (default: true)"},tagsLimit:{type:w.NUMBER,description:"Number of most used tags to include (default: 30)"}}}},Bg="- context: Use this to get comprehensive context about the current Obsidian environment including current note, folder, opened files, chat history, recent files, directory structure, and most used tags.",qg=e=>e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`,RE=e=>new Date(e).toLocaleString(),JU=(e=30)=>{let t=ve();if(!t?.vault)return[];let n=new Map;return t.vault.getMarkdownFiles().forEach(o=>{let r=t.metadataCache.getFileCache(o);if(r){let s=(0,IE.getAllTags)(r);s&&s.forEach(a=>{n.set(a,(n.get(a)||0)+1)})}}),Array.from(n.entries()).map(([o,r])=>({tag:o,count:r})).sort((o,r)=>r.count-o.count).slice(0,e)},KU=(e,t=2)=>{let n=[],i=new Set;return e.filter(o=>o!=="").sort().forEach(o=>{o.split("/").length<=t&&(i.has(o)||(n.push(`\u{1F4C1} ${o}/`),i.add(o)))}),n},XU=async(e,t)=>{let n=ve();if(!n||!n.workspace)return t.onSystem("Error: Not running in Obsidian or workspace unavailable",{name:"context",filename:"Context",error:"Obsidian workspace not available"}),Promise.resolve({error:"Obsidian workspace not available"});try{let i=Ic(e,"includeHistory")!=="false",o=Gg(e,"historyLimit",10)??10,r=Ic(e,"includeRecentFiles")!=="false",s=Gg(e,"recentFilesLimit",15)??15,a=Ic(e,"includeDirectoryStructure")!=="false",l=Ic(e,"includeTags")!=="false",c=Gg(e,"tagsLimit",30)??30,d=n.workspace,p=je(),m=d.getActiveFile(),h=m?.path||p?.currentNote||null,g=m?.parent?.path||p?.currentFolder||"/",S=d.getLastOpenFiles(),y=d.getLeavesOfType("markdown").map(V=>V.view?.file?.path).filter(V=>!!V).filter((V,at,li)=>li.indexOf(V)===at),v=[];r&&(v=(await js({limit:s,sortBy:"mtime",sortOrder:"desc"})).files.map(at=>({path:at.path,name:at.name,modified:RE(at.mtime),size:qg(at.size)})));let T=[];i&&(T=Rn().slice(-o));let A=await Cr(),C=A.slice(0,5).map(V=>({key:V.key,summary:V.summary,archivedAt:RE(V.archivedAt)})),I=[];if(a){let V=uu();I=KU(V,2)}let _=[];l&&(_=JU(c));let M=await js({limit:1e3}),R=M.total,N=M.files.reduce((V,at)=>V+at.size,0),$={currentNote:h,currentFolder:g,workspace:{openedFiles:y,lastOpenFiles:S.slice(0,10),totalOpenFiles:y.length},recentFiles:v.slice(0,s),chatHistory:{messages:T,totalMessages:T.length},archivedConversations:C,totalArchived:A.length,directoryStructure:I,tags:{mostUsed:_,totalTags:_.length},vault:{totalFiles:R,totalSize:qg(N),totalFolders:I.length}},me=["**\u{1F4CD} Current Location**",h?`\u{1F4C4} Note: \`${h}\``:"\u{1F4C4} No active note",`\u{1F4C1} Folder: \`${g}\``,"","**\u{1F5A5}\uFE0F Workspace State**",`\u{1F4C2} Open Files: ${y.length}`,...y.slice(0,5).map(V=>`  \u2022 \`${V}\``),y.length>5?`  \u2022 ... and ${y.length-5} more`:"","","**\u23F0 Recently Edited Files**",...v.slice(0,8).map(V=>`  \u2022 \`${V.name}\` - ${V.modified} (${V.size})`),v.length>8?`  \u2022 ... and ${v.length-8} more`:"","","**\u{1F4AC} Chat Activity**",`\u{1F4CA} Recent messages: ${T.length}`,...T.slice(0,3).map(V=>`  \u2022 "${V.substring(0,60)}${V.length>60?"...":""}"`),T.length>3?`  \u2022 ... and ${T.length-3} more`:"",`\u{1F4E6} Archived conversations: ${A.length}`,"","**\u{1F4C2} Directory Structure (2 levels)**",...I.slice(0,15),I.length>15?`  \u2022 ... and ${I.length-15} more folders`:"","","**\u{1F3F7}\uFE0F Most Used Tags**",`\u{1F4CA} Total tags found: ${_.length}`,..._.slice(0,10).map(V=>`  \u2022 ${V.tag} (${V.count} uses)`),_.length>10?`  \u2022 ... and ${_.length-10} more tags`:"","","**\u{1F4CA} Vault Statistics**",`\u{1F4C4} Total files: ${R}`,`\u{1F4C1} Total folders: ${I.length}`,`\u{1F4BE} Total size: ${qg(N)}`].join(`
`);return t.onSystem("Context information retrieved",{name:"context",filename:"Environment Context",status:"success",displayFormat:me,dropdown:!0,contextInfo:$}),Promise.resolve($)}catch(i){console.error("Context tool error:",i);let o=i instanceof Error?i.message:String(i);return t.onSystem("Error retrieving context information",{name:"context",filename:"Context",status:"error",error:o}),Promise.resolve({error:o})}};var kc=e=>typeof e=="object"&&e!==null,ME=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},kE={list_directory:cc,list_vault_files:fc,get_folder_tree:dc,dirlist:pc,read_file:mc,create_file:hc,create_directory:Sg,delete_file:Tg,update_file:gc,edit_file:yc,rename_file:vc,move_file:Sc,search_keyword:Tc,search_regexp:xc,search_and_replace_regex_in_file:Ec,search_and_replace_regex_global:Cc,topic_switch:_c,internet_search:wc,generate_image_from_context:Rg,end_conversation:bc,reveal_active_pane:Ig,open_folder_in_system:Mg,image_search:Nc,download_image:Pg,list_trash:Lg,restore_from_trash:Fg,get_obsidian_commands:Og,run_obsidian_command:Hg,context:Mc},So=Object.values(kE).map(e=>e.declaration),To=async(e,t,n,i,o)=>{let r=performance.now(),s=kE[e];if(!s){let c={toolName:e,content:JSON.stringify(t,null,2),contentSize:JSON.stringify(t).length,apiCall:"executeCommand"};throw n.onLog(`Tool not found: ${e}`,"error",void 0,c),new Error(`Command ${e} not found`)}let a=i||`tool-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;i||n.onSystem(`${e.replace(/_/g," ").toUpperCase()}...`,{id:a,name:e,filename:ME(t,"filename")||(e==="internet_search"?"Web":"Registry"),status:"pending"});let l={...n,onSystem:(c,d)=>{n.onSystem(c,{...d,id:a})}};try{let c=o?{...t,currentFolder:o}:t,d=await s.execute(c,l),p=QU(e,d,l),m=Math.round(performance.now()-r);return n.onLog(`Executed ${e} in ${m}ms`,"action",m),p}catch(c){console.error("Command execution error:",c);let d=Math.round(performance.now()-r),p=c instanceof Error?c.message:String(c),m=c instanceof Error?c.stack:void 0,h={toolName:e,content:JSON.stringify(t,null,2),contentSize:JSON.stringify(t).length,stack:m,apiCall:"tool_execution"};throw n.onLog(`Error in ${e}: ${p}`,"error",d,h),l.onSystem(`Error: ${p}`,{name:e,filename:ME(t,"filename")||(e==="internet_search"?"Web":"unknown"),error:p,status:"error"}),c}};function QU(e,t,n){if(kc(t)&&Array.isArray(t.files)){let o=t.files.length;if(o>100){let r=t.files.slice(0,100),s=Math.ceil(o/100),a=1,l=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} items (Page ${a} of ${s}).

To see more results, consider:
- Using list_vault_files with pagination (limit/offset parameters)
- Using search_keyword or search_regexp for targeted searches
- Using get_folder_tree for folder structure only
- Adding a filter parameter to narrow results

Current results show first ${100} items only.`;return console.debug(`Tool result truncated: ${e}, ${100}/${o} items, page ${a}/${s}`),n.onSystem(`Registry Scanned (TRUNCATED: ${100}/${o} items)`,{name:e,filename:"Vault Root",files:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s}),{...t,files:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s,truncationNotice:l}}}if(kc(t)&&Array.isArray(t.folders)){let o=t.folders.length;if(o>100){let r=t.folders.slice(0,100),s=Math.ceil(o/100),a=1,l=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} folders (Page ${a} of ${s}).

For large folder structures, consider:
- Using search_keyword to find specific folders
- Using list_vault_files with filter parameter
- Asking for a specific subfolder path

Current results show first ${100} folders only.`;return console.debug(`Folder structure truncated: ${e}, ${100}/${o} folders, page ${a}/${s}`),n.onSystem(`Folder Structure Scanned (TRUNCATED: ${100}/${o} folders)`,{name:e,filename:"Folder Tree",files:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s}),{...t,folders:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s,truncationNotice:l}}}if(kc(t)&&Array.isArray(t.directories)){let o=(a,l=0)=>{let c=[],d=l;return a.forEach(p=>{if(c.push({path:p.path,type:"directory",hasChildren:p.children&&p.children.length>0}),d++,p.children&&p.children.length>0){let m=o(p.children,d);c=c.concat(m.items),d=m.total}}),{items:c,total:d}},{items:r,total:s}=o(t.directories);if(s>100){let a=r.slice(0,100),l=Math.ceil(s/100),c=1,d=`

=== DIRECTORY LIST TRUNCATED ===
Showing ${100} of ${s} directories (Page ${c} of ${l}).

For large directory structures, consider:
- Using search_keyword to find specific directories
- Using list_vault_files with filter parameter
- Asking for a specific directory path
- Using get_folder_tree for a simple folder list

Current results show first ${100} directories only.`;return console.debug(`Directory list truncated: ${e}, ${100}/${s} directories, page ${c}/${l}`),n.onSystem(`Directory Structure Scanned (TRUNCATED: ${100}/${s} directories)`,{name:e,filename:"Directory List",files:a.map(p=>p.path),truncated:!0,totalItems:s,shownItems:100,currentPage:c,totalPages:l,directoryInfo:a}),{...t,directories:a,truncated:!0,totalItems:s,shownItems:100,currentPage:c,totalPages:l,truncationNotice:d}}}if(kc(t)&&Array.isArray(t.results)){let o=t.results.length;if(o>100){let r=t.results.slice(0,100),s=Math.ceil(o/100),a=1,l=`

=== SEARCH RESULTS TRUNCATED ===
Showing ${100} of ${o} results (Page ${a} of ${s}).

For more results, consider:
- Refining your search terms
- Using pagination parameters if available
- Adding filters to narrow the search

Current results show first ${100} matches only.`;return console.debug(`Search results truncated: ${e}, ${100}/${o} results, page ${a}/${s}`),{...t,results:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s,truncationNotice:l}}}if(typeof t=="string"&&t.length>5e4){let o=t.substring(0,5e4),r=`

=== CONTENT TRUNCATED ===
Showing first 50,000 characters of ${t.length} total characters.

For large files, consider:
- Reading specific sections with line numbers
- Searching for specific content within the file
- Using more targeted read operations

Current content shows first 50,000 characters only.`;return console.debug(`Content truncated: ${e}, 50000/${t.length} chars`),o+r}return t}async function Dc(e,t={maxRetries:2,delay:1e3}){let n;for(let i=0;i<=t.maxRetries;i++)try{return await e()}catch(o){if(n=o instanceof Error?o:new Error(String(o)),i===t.maxRetries)throw new Error("could not recover!");t.onRetry&&t.onRetry(i+1,n),await new Promise(r=>setTimeout(r,t.delay))}throw n}var Fr=class{constructor(t=2){this.maxRetries=t;this.attempts=0}get retryCount(){return this.attempts}get canRetry(){return this.attempts<this.maxRetries}increment(){this.attempts++}reset(){this.attempts=0}get shouldBail(){return this.attempts>=this.maxRetries}};var oi=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},Vg=e=>typeof e=="object"&&e!==null,DE=e=>{if(e instanceof Error)return e.stack},Uc=class{constructor(t){this.callbacks=t;this.session=null;this.sessionPromise=null;this.inputAudioContext=null;this.outputAudioContext=null;this.nextStartTime=0;this.sources=new Set;this.inputWorkletNode=null;this.inputWorkletGain=null;this.inputStream=null;this.currentInputText="";this.currentOutputText="";this.currentFolder="/";this.currentNote=null;this.retryCounter=new Fr(2);this.storedApiKey="";this.storedSettings=null;this.hasArchived=!1;this.pendingContextInjection=null;this.isSessionReady=!1}async getSession(){if(this.session)return this.session;if(this.sessionPromise===null)throw new Error("Session not initialized");return this.session=await this.sessionPromise,this.session}async start(t,n,i,o){this.storedApiKey=t,this.storedSettings=n,this.storedInitialState=i,this.storedConversationHistory=o,this.retryCounter.reset(),await Dc(async()=>{this.retryCounter.increment(),await this.performStart(t,n,i,o)},{maxRetries:2,delay:1e3,onRetry:(r,s)=>{this.callbacks.onLog(`Connection failed, retrying attempt ${r}/2...`,"info"),this.callbacks.onSystemMessage(`Connection failed, retrying attempt ${r}/2...`)}})}async performStart(t,n,i,o){try{i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onStatusChange("CONNECTING"),this.callbacks.onLog("Negotiating Uplink...","info");let r=new Dn({apiKey:t}),s=window.AudioContext||window.webkitAudioContext;if(!s)throw new Error("AudioContext is not supported in this environment");this.inputAudioContext=new s({sampleRate:16e3}),this.outputAudioContext=new s({sampleRate:24e3}),this.nextStartTime=0;let a=await navigator.mediaDevices.getUserMedia({audio:!0});this.inputStream=a;let l=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`,c=o?`

PREVIOUS_CONVERSATION:
${o}
`:"",d=`${n.systemInstruction}
${l}${c}
${n.customContext}`.trim();console.debug(`System instruction: ${d.length} chars, folder: ${this.currentFolder}, note: ${this.currentNote}`),this.callbacks.onLog(`System instruction size: ${d.length} chars`,"info"),console.debug(`Session config: model=gemini-2.5-flash-native-audio-preview-12-2025, tools=${So.length}, voice=${n.voiceName}`),this.callbacks.onLog("Initializing Gemini live connection...","info"),this.sessionPromise=r.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",config:{responseModalities:[go.AUDIO],systemInstruction:d,inputAudioTranscription:{},outputAudioTranscription:{},speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:n.voiceName}}},tools:[{functionDeclarations:So}]},callbacks:{onopen:()=>{this.isSessionReady=!0,this.callbacks.onStatusChange("CONNECTED"),this.callbacks.onLog("Uplink synchronized. Voice channel active.","info"),this.sessionPromise!==null&&this.startMicStreaming(a)},onmessage:p=>{this.handleServerMessage(p)},onerror:p=>{console.error("[VOICE API] Connection error:",p),console.error("[VOICE API] Error details:",JSON.stringify(p,null,2)),this.callbacks.onLog(`Connection error: ${B(p)}`,"error"),this.callbacks.onStatusChange("ERROR"),this.callbacks.onSystemMessage(`Connection error: ${B(p)}`)},onclose:p=>{let m=p.reason||String(p.code)||"Connection dropped";if(p.code!==1e3&&p.code!==1001){console.error(`[VOICE API] ERROR: Connection closed abnormally: code=${p.code}, reason=${m}`),console.error(`[VOICE API] Last input text was: "${this.currentInputText}"`),console.error(`[VOICE API] Last output text was: "${this.currentOutputText}"`);let g={toolName:"GeminiVoiceAssistant",apiCall:"live.connect",content:`Code: ${p.code}, Reason: ${m}
Last input: ${this.currentInputText}
Last output: ${this.currentOutputText}`};this.callbacks.onLog(`CONNECTION DROPPED: Code ${p.code} - ${m}`,"error",void 0,g),this.callbacks.onSystemMessage(`CONNECTION DROPPED: ${m}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:m})}else this.callbacks.onLog(`Uplink Closed: ${m}`,"info");this.stop()}}}),this.session=await this.sessionPromise}catch(r){this.callbacks.onStatusChange("ERROR"),console.error(`Voice interface error: ${B(r)}`);let s={toolName:"GeminiVoiceAssistant",apiCall:"start",stack:DE(r),content:B(r),requestSize:r.requestSize,responseSize:r.responseSize,platform:{isMobileApp:Or.Platform.isMobileApp,isDesktopApp:Or.Platform.isDesktopApp,isMacOS:Or.Platform.isMacOS,isWin:Or.Platform.isWin,isLinux:Or.Platform.isLinux},audioContextState:this.inputAudioContext?.state,timestamp:new Date().toISOString()};throw this.callbacks.onLog(`Link Initialization Failed: ${B(r)}`,"error",void 0,s),this.callbacks.onSystemMessage(`Error: ${B(r)}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:B(r)}),r}}async startMicStreaming(t){if(!this.inputAudioContext)return;let n=await this.getSession(),i=this.inputAudioContext.createMediaStreamSource(t),o=`
      class HermesAudioProcessor extends AudioWorkletProcessor {
        process(inputs) {
          const input = inputs[0];
          if (input && input[0]) {
            this.port.postMessage(input[0]);
          }
          return true;
        }
      }
      registerProcessor('hermes-audio-processor', HermesAudioProcessor);
    `,r=new Blob([o],{type:"application/javascript"}),s=URL.createObjectURL(r);try{await this.inputAudioContext.audioWorklet.addModule(s)}finally{URL.revokeObjectURL(s)}let a=new AudioWorkletNode(this.inputAudioContext,"hermes-audio-processor");this.inputWorkletNode=a;let l=this.inputAudioContext.createGain();l.gain.value=0,this.inputWorkletGain=l,a.port.onmessage=c=>{let d=c.data;if(!d||d.length===0)return;let p=0;for(let x=0;x<d.length;x++)p+=d[x]*d[x];let m=Math.sqrt(p/d.length);this.callbacks.onVolume(m);let h=hE(d),g=pE(new Uint8Array(h.buffer)),S=g.length;S>5e4&&console.debug(`Audio streaming: ${S} bytes, session active`);try{n.sendRealtimeInput({media:{data:g,mimeType:"audio/pcm;rate=16000"}})}catch(x){if(console.error(`Audio streaming error: ${B(x)}, data size: ${g.length}`),B(x).includes("CLOSING")||B(x).includes("CLOSED")){console.debug("Session is closing, stopping audio streaming");return}}},i.connect(a),a.connect(l),l.connect(this.inputAudioContext.destination)}async handleServerMessage(t){t.setupComplete&&this.callbacks.onLog("Voice session ready","info");let n=t.serverContent;if(n?.usageMetadata&&this.callbacks.onUsageUpdate(n.usageMetadata),t.serverContent?.inputTranscription?.text&&(this.currentInputText+=t.serverContent.inputTranscription.text,this.callbacks.onTranscription("user",this.currentInputText,!1)),t.serverContent?.outputTranscription&&(this.currentOutputText+=t.serverContent.outputTranscription.text,this.callbacks.onTranscription("model",this.currentOutputText,!1)),t.serverContent?.turnComplete&&(this.currentInputText&&(this.callbacks.onTranscription("user",this.currentInputText,!0),this.currentInputText=""),this.currentOutputText&&(this.callbacks.onTranscription("model",this.currentOutputText,!0),this.currentOutputText="")),t.toolCall)for(let o of t.toolCall.functionCalls){if(o.name==="end_conversation"){console.debug("Processing end_conversation tool call");try{await To(o.name,o.args,{onLog:(p,m,h)=>this.callbacks.onLog(p,m,h),onSystem:(p,m)=>this.callbacks.onSystemMessage(p,m),onFileState:(p,m)=>{this.currentFolder=p,this.currentNote=Array.isArray(m)?m[m.length-1]:m,this.callbacks.onFileStateChange(p,m)},onStopSession:()=>{this.stop()},onArchiveConversation:this.callbacks.onArchiveConversation},void 0,this.currentFolder),console.debug("end_conversation executed successfully, session ending");continue}catch(p){console.error(`end_conversation failed: ${B(p)}`),this.stop();continue}}let r=`tool-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,s=Vg(o.args)?o.args:{},l={generate_image_from_context:"Image Generation",create_file:"File Creation",delete_file:"File Deletion",edit_file:"File Editing",update_file:"File Update",move_file:"File Move",rename_file:"File Rename",create_directory:"Directory Creation",list_directory:"Vault Scan",list_vault_files:"File Explorer",dirlist:"Directory Structure",get_folder_tree:"Folder Tree",read_file:"File Reading",search_keyword:"Keyword Search",search_regexp:"Pattern Search",search_replace_file:"File Search & Replace",search_replace_global:"Global Search & Replace",internet_search:"Web Search",reveal_active_pane:"Active Pane Info",open_folder_in_system:"System File Browser",end_conversation:"Session End",topic_switch:"Topic Switch"}[o.name]||o.name.replace(/_/g," ").toUpperCase(),c=!1,d=oi(s,"filename")||(o.name==="internet_search"?"Web":"Registry");this.callbacks.onSystemMessage(`${l}...`,{id:r,name:o.name,filename:d,status:"pending"});try{let p=await To(o.name,s,{onLog:(S,x,y)=>this.callbacks.onLog(S,x,y),onSystem:(S,x)=>{this.callbacks.onSystemMessage(S,x),x?.status==="success"&&(c=!0)},onFileState:(S,x)=>{this.currentFolder=S,this.currentNote=Array.isArray(x)?x[x.length-1]:x,this.callbacks.onFileStateChange(S,x)},onStopSession:()=>{this.stop()},onArchiveConversation:this.callbacks.onArchiveConversation},r,this.currentFolder);await this.getSession();let m=JSON.stringify({result:p});console.debug(`Tool response: ${o.name}, size: ${m.length} chars`);let h=Vg(p)?p:void 0,g=h&&typeof h.text=="string"?h.text:void 0;if(!c){let S="";if(o.name==="create_file"||o.name==="create_directory"){let x=oi(s,"filename")||oi(s,"path");if(x){let y=x.lastIndexOf("/");S=`Created in: ${y===-1?"/":x.substring(0,y+1)}`}}else if(o.name==="move_file"||o.name==="rename_file"){let x=oi(s,"sourcePath")||oi(s,"oldPath"),y=oi(s,"targetPath")||oi(s,"newPath");x&&y&&(S=`Moved from: ${x} to: ${y}`)}else if(o.name==="update_file"||o.name==="edit_file"){let x=oi(s,"filename");x&&(S=`Updated: ${x}`)}else if(o.name==="delete_file"){let x=oi(s,"filename");x&&(S=`Deleted: ${x}`)}else g?S=g:typeof p=="string"&&(S=p);if(S){let x=Array.isArray(h?.groundingChunks)?h?.groundingChunks:[],y=Array.isArray(h?.files)?h?.files.filter(C=>typeof C=="string"):void 0,v=Array.isArray(h?.directories)?h?.directories.map(C=>Vg(C)&&typeof C.path=="string"?C.path:null).filter(C=>Boolean(C)):void 0,T=Array.isArray(h?.folders)?h?.folders.filter(C=>typeof C=="string"):void 0,A=Array.isArray(h?.directoryInfo)?h?.directoryInfo:void 0;this.callbacks.onSystemMessage(`${l} Complete`,{id:r,name:o.name,filename:d,status:"success",newContent:S,groundingChunks:x,files:y||v||T,directoryInfo:A})}}try{(await this.getSession()).sendToolResponse({functionResponses:{id:o.id,name:o.name,response:{result:p}}})}catch(S){console.error(`Failed to send tool response: ${B(S)}`)}}catch(p){let m=B(p);console.error(`Voice interface tool error: ${o.name} - ${m}`);let h={toolName:o.name,content:JSON.stringify(s,null,2),contentSize:JSON.stringify(s).length,stack:DE(p),apiCall:"executeCommand",timestamp:new Date().toISOString(),currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${o.name}: ${m}`,"error",void 0,h),this.callbacks.onSystemMessage(`Error in ${o.name}: ${m}`,{id:r,name:o.name,filename:d,status:"error",error:m});try{let g=await this.getSession();console.debug(`Tool error response: ${o.name} - ${m}`),g.sendToolResponse({functionResponses:{id:o.id,name:o.name,response:{error:m}}})}catch(g){console.error(`Failed to send tool error response: ${B(g)}`)}}}let i=t.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;if(i&&this.outputAudioContext){let o=mE(dE(i),this.outputAudioContext,24e3,1);this.nextStartTime=Math.max(this.nextStartTime,this.outputAudioContext.currentTime);let r=this.outputAudioContext.createBufferSource();r.buffer=o,r.connect(this.outputAudioContext.destination),r.onended=()=>this.sources.delete(r),r.start(this.nextStartTime),this.nextStartTime+=o.duration,this.sources.add(r)}t.serverContent?.interrupted&&(this.sources.forEach(o=>{try{o.stop()}catch(r){console.debug("Audio source stop failed",r)}}),this.sources.clear(),this.nextStartTime=0,this.callbacks.onInterrupted())}stop(){if(this.callbacks.onArchiveConversation&&!this.hasArchived&&(this.hasArchived=!0,console.warn("[HISTORY] EVENT: end_conversation (voiceInterface.stop)"),this.callbacks.onArchiveConversation().catch(t=>{console.warn("[HISTORY] Archive failed:",t)})),this.session){try{this.session.close()}catch(t){console.debug("Session close failed",t)}this.session=null}this.sessionPromise=null,this.inputWorkletNode&&(this.inputWorkletNode.disconnect(),this.inputWorkletNode=null),this.inputWorkletGain&&(this.inputWorkletGain.disconnect(),this.inputWorkletGain=null),this.inputStream&&(this.inputStream.getTracks().forEach(t=>t.stop()),this.inputStream=null),this.inputAudioContext&&(this.inputAudioContext.close(),this.inputAudioContext=null),this.outputAudioContext&&(this.outputAudioContext.close(),this.outputAudioContext=null),this.sources.forEach(t=>{try{t.stop()}catch(n){console.debug("Output source stop failed",n)}}),this.sources.clear(),this.currentInputText="",this.currentOutputText="",this.isSessionReady=!1,this.pendingContextInjection=null,this.callbacks.onStatusChange("DISCONNECTED"),this.callbacks.onVolume(0)}};pe();var ma=class{constructor(t){this.callbacks=t;this.ai=null;this.chatHistory=[];this.currentFolder="/";this.currentNote=null;this.systemInstruction="";this.model="gemini-2.0-flash";this.retryCounter=new Fr(2)}initialize(t,n,i){i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onLog("Initializing text interface...","info"),this.ai=new Dn({apiKey:t});let o=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`;this.systemInstruction=`${n.systemInstruction}
${o}

${n.customContext}`.trim(),this.callbacks.onLog("Text interface ready.","info")}async sendMessage(t){if(!this.ai){this.callbacks.onLog("Text interface not initialized","error");return}this.chatHistory.push({role:"user",parts:[{text:t}]}),this.callbacks.onTranscription("user",t,!0),await Dc(async()=>{this.retryCounter.increment(),await this.processConversation()},{maxRetries:2,delay:1e3,onRetry:(n,i)=>{this.callbacks.onLog(`Text API failed, retrying attempt ${n}/2...`,"info"),this.callbacks.onSystemMessage(`Text API failed, retrying attempt ${n}/2...`)}})}async processConversation(){if(!this.ai)return;this.callbacks.onTranscription("model","...",!1);let t=await this.ai.models.generateContent({model:this.model,contents:this.chatHistory,config:{systemInstruction:this.systemInstruction,tools:[{functionDeclarations:So}]}});t.usageMetadata&&this.callbacks.onUsageUpdate({promptTokenCount:t.usageMetadata.promptTokenCount,candidatesTokenCount:t.usageMetadata.candidatesTokenCount,totalTokenCount:t.usageMetadata.totalTokenCount});let n=t.candidates?.[0];if(!n?.content){this.callbacks.onTranscription("model","No response received.",!0);return}let i=n.content.parts?.filter(o=>!!o.functionCall);if(i&&i.length>0){this.chatHistory.push(n.content);let o=[];for(let r of i){let s=r.functionCall;try{let a=await To(s.name,s.args,{onLog:(l,c,d)=>this.callbacks.onLog(l,c,d),onSystem:(l,c)=>this.callbacks.onSystemMessage(l,c),onFileState:(l,c)=>{this.currentFolder=l,this.currentNote=Array.isArray(c)?c[c.length-1]:c,this.callbacks.onFileStateChange(l,c)},onStopSession:()=>{this.callbacks.onLog("Conversation ended via tool call","info")},onArchiveConversation:this.callbacks.onArchiveConversation},this.currentFolder);o.push({functionResponse:{name:s.name,response:{result:a}}})}catch(a){let l=a instanceof Error?a.message:String(a),c=a instanceof Error?a.stack:void 0;console.error(`Text interface tool error: ${s.name} - ${l}`);let d={toolName:s.name,content:JSON.stringify(s.args,null,2),contentSize:JSON.stringify(s.args).length,stack:c,apiCall:"executeCommand",timestamp:new Date().toISOString(),model:this.model,currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${s.name}: ${l}`,"error",void 0,d),this.callbacks.onSystemMessage(`Error in ${s.name}: ${l}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:l}),o.push({functionResponse:{name:s.name,response:{error:l}}})}}this.chatHistory.push({role:"user",parts:o}),await this.processConversation()}else{let r=n.content.parts?.filter(s=>s.text)?.map(s=>s.text).join("")||"";this.chatHistory.push(n.content),this.callbacks.onTranscription("model",r,!0)}}setApiKey(t){this.ai=new Dn({apiKey:t})}clearHistory(){this.chatHistory=[]}getHistory(){return this.chatHistory}injectHistory(t){this.chatHistory.push(...t)}async generateSummary(t){if(!this.ai)throw new Error("Text interface not initialized");try{return(await this.ai.models.generateContent({model:this.model,contents:[{role:"user",parts:[{text:t}]}]})).candidates?.[0]?.content?.parts?.filter(r=>r.text)?.map(r=>r.text).join("")||""}catch(n){console.error("Text interface error:",n);let i=n instanceof Error?n.message:String(n);throw new Error(`Failed to generate summary: ${i}`)}}};var ZU=[tg,ig,og,rg,sg,ag,lg,cg,fg,dg,pg,mg,hg,yg,vg,wg,Ug,bg,Bg].join(`

`),ri=`You are an advanced voice assistant (Hermes) with file system access and internet capabilities.
Vault structure: Flat markdown files.

CORE RESPONSE RULES:
1. NO CONFIRMATIONS: Do NOT say "Done.", "Finished.", or any variation of completion confirmation after a tool call. The UI handles state visualization.
2. INFORMATIONAL TOOLS: When calling "read_file", "list_directory", "list_vault_files", or "internet_search", remain silent unless the user asked a specific question about the content.
3. BATCH ACTIONS: If performing multiple modifications, wait until all are finished, then provide a single concise summary.
4. NO "DONE" ON TOPICS: Do not say "Done" or confirm when switching topics. Just proceed with the new context.
5. Conciseness is mandatory. Avoid conversational filler.
6. LARGE VAULTS: If the vault seems large, prefer "list_vault_files" with a limit or filter over "list_directory" to stay within token limits.
7. WEB SEARCH RESTRICTION: Only use "internet_search" if the user specifically asks about it or explicitly requests web search.
8. FILE NAMING: Do not ever read out .md at the end of files. Omit full path, just read out the file names, unless it's relevant!

IMPORTANT PATH CONVENTION:
ALL FILE PATHS MUST BE RELATIVE TO VAULT ROOT. Examples:
- "notes.md" (root level file)
- "projects/ideas.md" (file in projects folder)
- "archive/2024/report.md" (nested folder structure)

WIKI LINK CONVENTION:
DEFAULT TO WIKI LINKS EVERYWHERE WITHOUT PATH. 
Insert images using a Wikilink with only the filename.
- Use [[notes]] instead of [notes.md](notes.md)
- Never use "file:" prefix or full file extensions in wiki links
- use ![[image.png|title]] for images!

AVAILABLE TOOL CAPABILITIES:
${ZU}`;we();function QE(e){return typeof e>"u"||e===null}function WU(e){return typeof e=="object"&&e!==null}function jU(e){return Array.isArray(e)?e:QE(e)?[]:[e]}function eP(e,t){var n,i,o,r;if(t)for(r=Object.keys(t),n=0,i=r.length;n<i;n+=1)o=r[n],e[o]=t[o];return e}function tP(e,t){var n="",i;for(i=0;i<t;i+=1)n+=e;return n}function nP(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var iP=QE,oP=WU,rP=jU,sP=tP,aP=nP,lP=eP,Je={isNothing:iP,isObject:oP,toArray:rP,repeat:sP,isNegativeZero:aP,extend:lP};function ZE(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function ga(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=ZE(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ga.prototype=Object.create(Error.prototype);ga.prototype.constructor=ga;ga.prototype.toString=function(t){return this.name+": "+ZE(this,t)};var wt=ga;function zg(e,t,n,i,o){var r="",s="",a=Math.floor(o/2)-1;return i-t>a&&(r=" ... ",t=i-a+r.length),n-i>a&&(s=" ...",n=i+a-s.length),{str:r+e.slice(t,n).replace(/\t/g,"\u2192")+s,pos:i-t+r.length}}function $g(e,t){return Je.repeat(" ",t-e.length)+e}function uP(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],o=[],r,s=-1;r=n.exec(e.buffer);)o.push(r.index),i.push(r.index+r[0].length),e.position<=r.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var a="",l,c,d=Math.min(e.line+t.linesAfter,o.length).toString().length,p=t.maxLength-(t.indent+d+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)c=zg(e.buffer,i[s-l],o[s-l],e.position-(i[s]-i[s-l]),p),a=Je.repeat(" ",t.indent)+$g((e.line-l+1).toString(),d)+" | "+c.str+`
`+a;for(c=zg(e.buffer,i[s],o[s],e.position,p),a+=Je.repeat(" ",t.indent)+$g((e.line+1).toString(),d)+" | "+c.str+`
`,a+=Je.repeat("-",t.indent+d+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=o.length);l++)c=zg(e.buffer,i[s+l],o[s+l],e.position-(i[s]-i[s+l]),p),a+=Je.repeat(" ",t.indent)+$g((e.line+l+1).toString(),d)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var cP=uP,fP=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],dP=["scalar","sequence","mapping"];function pP(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){t[String(i)]=n})}),t}function mP(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(fP.indexOf(n)===-1)throw new wt('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=pP(t.styleAliases||null),dP.indexOf(this.kind)===-1)throw new wt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var ct=mP;function PE(e,t){var n=[];return e[t].forEach(function(i){var o=n.length;n.forEach(function(r,s){r.tag===i.tag&&r.kind===i.kind&&r.multi===i.multi&&(o=s)}),n[o]=i}),n}function hP(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function i(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(i);return e}function Jg(e){return this.extend(e)}Jg.prototype.extend=function(t){var n=[],i=[];if(t instanceof ct)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new wt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(r){if(!(r instanceof ct))throw new wt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(r.loadKind&&r.loadKind!=="scalar")throw new wt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(r.multi)throw new wt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(r){if(!(r instanceof ct))throw new wt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(Jg.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(i),o.compiledImplicit=PE(o,"implicit"),o.compiledExplicit=PE(o,"explicit"),o.compiledTypeMap=hP(o.compiledImplicit,o.compiledExplicit),o};var gP=Jg,yP=new ct("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),vP=new ct("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),SP=new ct("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),TP=new gP({explicit:[yP,vP,SP]});function xP(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function AP(){return null}function EP(e){return e===null}var CP=new ct("tag:yaml.org,2002:null",{kind:"scalar",resolve:xP,construct:AP,predicate:EP,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function _P(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function wP(e){return e==="true"||e==="True"||e==="TRUE"}function bP(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var NP=new ct("tag:yaml.org,2002:bool",{kind:"scalar",resolve:_P,construct:wP,predicate:bP,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function RP(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function IP(e){return 48<=e&&e<=55}function MP(e){return 48<=e&&e<=57}function kP(e){if(e===null)return!1;var t=e.length,n=0,i=!1,o;if(!t)return!1;if(o=e[n],(o==="-"||o==="+")&&(o=e[++n]),o==="0"){if(n+1===t)return!0;if(o=e[++n],o==="b"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;i=!0}return i&&o!=="_"}if(o==="x"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!RP(e.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}if(o==="o"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!IP(e.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}}if(o==="_")return!1;for(;n<t;n++)if(o=e[n],o!=="_"){if(!MP(e.charCodeAt(n)))return!1;i=!0}return!(!i||o==="_")}function DP(e){var t=e,n=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function UP(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Je.isNegativeZero(e)}var PP=new ct("tag:yaml.org,2002:int",{kind:"scalar",resolve:kP,construct:DP,predicate:UP,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),LP=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function FP(e){return!(e===null||!LP.test(e)||e[e.length-1]==="_")}function OP(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var HP=/^[-+]?[0-9]+e/;function GP(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Je.isNegativeZero(e))return"-0.0";return n=e.toString(10),HP.test(n)?n.replace("e",".e"):n}function qP(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Je.isNegativeZero(e))}var BP=new ct("tag:yaml.org,2002:float",{kind:"scalar",resolve:FP,construct:OP,predicate:qP,represent:GP,defaultStyle:"lowercase"}),VP=TP.extend({implicit:[CP,NP,PP,BP]}),zP=VP,WE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),jE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function $P(e){return e===null?!1:WE.exec(e)!==null||jE.exec(e)!==null}function YP(e){var t,n,i,o,r,s,a,l=0,c=null,d,p,m;if(t=WE.exec(e),t===null&&(t=jE.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,i,o));if(r=+t[4],s=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(d=+t[10],p=+(t[11]||0),c=(d*60+p)*6e4,t[9]==="-"&&(c=-c)),m=new Date(Date.UTC(n,i,o,r,s,a,l)),c&&m.setTime(m.getTime()-c),m}function JP(e){return e.toISOString()}var KP=new ct("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:$P,construct:YP,instanceOf:Date,represent:JP});function XP(e){return e==="<<"||e===null}var QP=new ct("tag:yaml.org,2002:merge",{kind:"scalar",resolve:XP}),Wg=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function ZP(e){if(e===null)return!1;var t,n,i=0,o=e.length,r=Wg;for(n=0;n<o;n++)if(t=r.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function WP(e){var t,n,i=e.replace(/[\r\n=]/g,""),o=i.length,r=Wg,s=0,a=[];for(t=0;t<o;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|r.indexOf(i.charAt(t));return n=o%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function jP(e){var t="",n=0,i,o,r=e.length,s=Wg;for(i=0;i<r;i++)i%3===0&&i&&(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]),n=(n<<8)+e[i];return o=r%3,o===0?(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]):o===2?(t+=s[n>>10&63],t+=s[n>>4&63],t+=s[n<<2&63],t+=s[64]):o===1&&(t+=s[n>>2&63],t+=s[n<<4&63],t+=s[64],t+=s[64]),t}function eL(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var tL=new ct("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ZP,construct:WP,predicate:eL,represent:jP}),nL=Object.prototype.hasOwnProperty,iL=Object.prototype.toString;function oL(e){if(e===null)return!0;var t=[],n,i,o,r,s,a=e;for(n=0,i=a.length;n<i;n+=1){if(o=a[n],s=!1,iL.call(o)!=="[object Object]")return!1;for(r in o)if(nL.call(o,r))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(r)===-1)t.push(r);else return!1}return!0}function rL(e){return e!==null?e:[]}var sL=new ct("tag:yaml.org,2002:omap",{kind:"sequence",resolve:oL,construct:rL}),aL=Object.prototype.toString;function lL(e){if(e===null)return!0;var t,n,i,o,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(i=s[t],aL.call(i)!=="[object Object]"||(o=Object.keys(i),o.length!==1))return!1;r[t]=[o[0],i[o[0]]]}return!0}function uL(e){if(e===null)return[];var t,n,i,o,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1)i=s[t],o=Object.keys(i),r[t]=[o[0],i[o[0]]];return r}var cL=new ct("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:lL,construct:uL}),fL=Object.prototype.hasOwnProperty;function dL(e){if(e===null)return!0;var t,n=e;for(t in n)if(fL.call(n,t)&&n[t]!==null)return!1;return!0}function pL(e){return e!==null?e:{}}var mL=new ct("tag:yaml.org,2002:set",{kind:"mapping",resolve:dL,construct:pL}),eC=zP.extend({implicit:[KP,QP],explicit:[tL,sL,cL,mL]}),Bi=Object.prototype.hasOwnProperty,Pc=1,tC=2,nC=3,Lc=4,Yg=1,hL=2,LE=3,gL=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,yL=/[\x85\u2028\u2029]/,vL=/[,\[\]\{\}]/,iC=/^(?:!|!!|![a-z\-]+!)$/i,oC=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function FE(e){return Object.prototype.toString.call(e)}function Un(e){return e===10||e===13}function Ao(e){return e===9||e===32}function bt(e){return e===9||e===32||e===10||e===13}function Gr(e){return e===44||e===91||e===93||e===123||e===125}function SL(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function TL(e){return e===120?2:e===117?4:e===85?8:0}function xL(e){return 48<=e&&e<=57?e-48:-1}function OE(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function AL(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function rC(e,t,n){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}var sC=new Array(256),aC=new Array(256);for(xo=0;xo<256;xo++)sC[xo]=OE(xo)?1:0,aC[xo]=OE(xo);var xo;function EL(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||eC,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function lC(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=cP(n),new wt(t,n)}function F(e,t){throw lC(e,t)}function Fc(e,t){e.onWarning&&e.onWarning.call(null,lC(e,t))}var HE={YAML:function(t,n,i){var o,r,s;t.version!==null&&F(t,"duplication of %YAML directive"),i.length!==1&&F(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),o===null&&F(t,"ill-formed argument of the YAML directive"),r=parseInt(o[1],10),s=parseInt(o[2],10),r!==1&&F(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&Fc(t,"unsupported YAML version of the document")},TAG:function(t,n,i){var o,r;i.length!==2&&F(t,"TAG directive accepts exactly two arguments"),o=i[0],r=i[1],iC.test(o)||F(t,"ill-formed tag handle (first argument) of the TAG directive"),Bi.call(t.tagMap,o)&&F(t,'there is a previously declared suffix for "'+o+'" tag handle'),oC.test(r)||F(t,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch{F(t,"tag prefix is malformed: "+r)}t.tagMap[o]=r}};function qi(e,t,n,i){var o,r,s,a;if(t<n){if(a=e.input.slice(t,n),i)for(o=0,r=a.length;o<r;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||F(e,"expected valid JSON character");else gL.test(a)&&F(e,"the stream contains non-printable characters");e.result+=a}}function GE(e,t,n,i){var o,r,s,a;for(Je.isObject(n)||F(e,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),s=0,a=o.length;s<a;s+=1)r=o[s],Bi.call(t,r)||(rC(t,r,n[r]),i[r]=!0)}function qr(e,t,n,i,o,r,s,a,l){var c,d;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),c=0,d=o.length;c<d;c+=1)Array.isArray(o[c])&&F(e,"nested arrays are not supported inside keys"),typeof o=="object"&&FE(o[c])==="[object Object]"&&(o[c]="[object Object]");if(typeof o=="object"&&FE(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(r))for(c=0,d=r.length;c<d;c+=1)GE(e,t,r[c],n);else GE(e,t,r,n);else!e.json&&!Bi.call(n,o)&&Bi.call(t,o)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,F(e,"duplicated mapping key")),rC(t,o,r),delete n[o];return t}function jg(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):F(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function qe(e,t,n){for(var i=0,o=e.input.charCodeAt(e.position);o!==0;){for(;Ao(o);)o===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&o===35)do o=e.input.charCodeAt(++e.position);while(o!==10&&o!==13&&o!==0);if(Un(o))for(jg(e),o=e.input.charCodeAt(e.position),i++,e.lineIndent=0;o===32;)e.lineIndent++,o=e.input.charCodeAt(++e.position);else break}return n!==-1&&i!==0&&e.lineIndent<n&&Fc(e,"deficient indentation"),i}function Gc(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||bt(n)))}function ey(e,t){t===1?e.result+=" ":t>1&&(e.result+=Je.repeat(`
`,t-1))}function CL(e,t,n){var i,o,r,s,a,l,c,d,p=e.kind,m=e.result,h;if(h=e.input.charCodeAt(e.position),bt(h)||Gr(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(o=e.input.charCodeAt(e.position+1),bt(o)||n&&Gr(o)))return!1;for(e.kind="scalar",e.result="",r=s=e.position,a=!1;h!==0;){if(h===58){if(o=e.input.charCodeAt(e.position+1),bt(o)||n&&Gr(o))break}else if(h===35){if(i=e.input.charCodeAt(e.position-1),bt(i))break}else{if(e.position===e.lineStart&&Gc(e)||n&&Gr(h))break;if(Un(h))if(l=e.line,c=e.lineStart,d=e.lineIndent,qe(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=c,e.lineIndent=d;break}}a&&(qi(e,r,s,!1),ey(e,e.line-l),r=s=e.position,a=!1),Ao(h)||(s=e.position+1),h=e.input.charCodeAt(++e.position)}return qi(e,r,s,!1),e.result?!0:(e.kind=p,e.result=m,!1)}function _L(e,t){var n,i,o;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=o=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(qi(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)i=e.position,e.position++,o=e.position;else return!0;else Un(n)?(qi(e,i,o,!0),ey(e,qe(e,!1,t)),i=o=e.position):e.position===e.lineStart&&Gc(e)?F(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);F(e,"unexpected end of the stream within a single quoted scalar")}function wL(e,t){var n,i,o,r,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return qi(e,n,e.position,!0),e.position++,!0;if(a===92){if(qi(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),Un(a))qe(e,!1,t);else if(a<256&&sC[a])e.result+=aC[a],e.position++;else if((s=TL(a))>0){for(o=s,r=0;o>0;o--)a=e.input.charCodeAt(++e.position),(s=SL(a))>=0?r=(r<<4)+s:F(e,"expected hexadecimal character");e.result+=AL(r),e.position++}else F(e,"unknown escape sequence");n=i=e.position}else Un(a)?(qi(e,n,i,!0),ey(e,qe(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Gc(e)?F(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}F(e,"unexpected end of the stream within a double quoted scalar")}function bL(e,t){var n=!0,i,o,r,s=e.tag,a,l=e.anchor,c,d,p,m,h,g=Object.create(null),S,x,y,v;if(v=e.input.charCodeAt(e.position),v===91)d=93,h=!1,a=[];else if(v===123)d=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),v=e.input.charCodeAt(++e.position);v!==0;){if(qe(e,!0,t),v=e.input.charCodeAt(e.position),v===d)return e.position++,e.tag=s,e.anchor=l,e.kind=h?"mapping":"sequence",e.result=a,!0;n?v===44&&F(e,"expected the node content, but found ','"):F(e,"missed comma between flow collection entries"),x=S=y=null,p=m=!1,v===63&&(c=e.input.charCodeAt(e.position+1),bt(c)&&(p=m=!0,e.position++,qe(e,!0,t))),i=e.line,o=e.lineStart,r=e.position,Br(e,t,Pc,!1,!0),x=e.tag,S=e.result,qe(e,!0,t),v=e.input.charCodeAt(e.position),(m||e.line===i)&&v===58&&(p=!0,v=e.input.charCodeAt(++e.position),qe(e,!0,t),Br(e,t,Pc,!1,!0),y=e.result),h?qr(e,a,g,x,S,y,i,o,r):p?a.push(qr(e,null,g,x,S,y,i,o,r)):a.push(S),qe(e,!0,t),v=e.input.charCodeAt(e.position),v===44?(n=!0,v=e.input.charCodeAt(++e.position)):n=!1}F(e,"unexpected end of the stream within a flow collection")}function NL(e,t){var n,i,o=Yg,r=!1,s=!1,a=t,l=0,c=!1,d,p;if(p=e.input.charCodeAt(e.position),p===124)i=!1;else if(p===62)i=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)Yg===o?o=p===43?LE:hL:F(e,"repeat of a chomping mode identifier");else if((d=xL(p))>=0)d===0?F(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?F(e,"repeat of an indentation width identifier"):(a=t+d-1,s=!0);else break;if(Ao(p)){do p=e.input.charCodeAt(++e.position);while(Ao(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!Un(p)&&p!==0)}for(;p!==0;){for(jg(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),Un(p)){l++;continue}if(e.lineIndent<a){o===LE?e.result+=Je.repeat(`
`,r?1+l:l):o===Yg&&r&&(e.result+=`
`);break}for(i?Ao(p)?(c=!0,e.result+=Je.repeat(`
`,r?1+l:l)):c?(c=!1,e.result+=Je.repeat(`
`,l+1)):l===0?r&&(e.result+=" "):e.result+=Je.repeat(`
`,l):e.result+=Je.repeat(`
`,r?1+l:l),r=!0,s=!0,l=0,n=e.position;!Un(p)&&p!==0;)p=e.input.charCodeAt(++e.position);qi(e,n,e.position,!1)}return!0}function qE(e,t){var n,i=e.tag,o=e.anchor,r=[],s,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!bt(s))));){if(a=!0,e.position++,qe(e,!0,-1)&&e.lineIndent<=t){r.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,Br(e,t,nC,!1,!0),r.push(e.result),qe(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)F(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=i,e.anchor=o,e.kind="sequence",e.result=r,!0):!1}function RL(e,t,n){var i,o,r,s,a,l,c=e.tag,d=e.anchor,p={},m=Object.create(null),h=null,g=null,S=null,x=!1,y=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),v=e.input.charCodeAt(e.position);v!==0;){if(!x&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),r=e.line,(v===63||v===58)&&bt(i))v===63?(x&&(qr(e,p,m,h,g,null,s,a,l),h=g=S=null),y=!0,x=!0,o=!0):x?(x=!1,o=!0):F(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=i;else{if(s=e.line,a=e.lineStart,l=e.position,!Br(e,n,tC,!1,!0))break;if(e.line===r){for(v=e.input.charCodeAt(e.position);Ao(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),bt(v)||F(e,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(qr(e,p,m,h,g,null,s,a,l),h=g=S=null),y=!0,x=!1,o=!1,h=e.tag,g=e.result;else if(y)F(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=d,!0}else if(y)F(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=d,!0}if((e.line===r||e.lineIndent>t)&&(x&&(s=e.line,a=e.lineStart,l=e.position),Br(e,t,Lc,!0,o)&&(x?g=e.result:S=e.result),x||(qr(e,p,m,h,g,S,s,a,l),h=g=S=null),qe(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===r||e.lineIndent>t)&&v!==0)F(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return x&&qr(e,p,m,h,g,null,s,a,l),y&&(e.tag=c,e.anchor=d,e.kind="mapping",e.result=p),y}function IL(e){var t,n=!1,i=!1,o,r,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&F(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(n=!0,s=e.input.charCodeAt(++e.position)):s===33?(i=!0,o="!!",s=e.input.charCodeAt(++e.position)):o="!",t=e.position,n){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(r=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):F(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!bt(s);)s===33&&(i?F(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),iC.test(o)||F(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),vL.test(r)&&F(e,"tag suffix cannot contain flow indicator characters")}r&&!oC.test(r)&&F(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{F(e,"tag name is malformed: "+r)}return n?e.tag=r:Bi.call(e.tagMap,o)?e.tag=e.tagMap[o]+r:o==="!"?e.tag="!"+r:o==="!!"?e.tag="tag:yaml.org,2002:"+r:F(e,'undeclared tag handle "'+o+'"'),!0}function ML(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&F(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!bt(n)&&!Gr(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&F(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function kL(e){var t,n,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!bt(i)&&!Gr(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&F(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Bi.call(e.anchorMap,n)||F(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],qe(e,!0,-1),!0}function Br(e,t,n,i,o){var r,s,a,l=1,c=!1,d=!1,p,m,h,g,S,x;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,r=s=a=Lc===n||nC===n,i&&qe(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;IL(e)||ML(e);)qe(e,!0,-1)?(c=!0,a=r,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||o),(l===1||Lc===n)&&(Pc===n||tC===n?S=t:S=t+1,x=e.position-e.lineStart,l===1?a&&(qE(e,x)||RL(e,x,S))||bL(e,S)?d=!0:(s&&NL(e,S)||_L(e,S)||wL(e,S)?d=!0:kL(e)?(d=!0,(e.tag!==null||e.anchor!==null)&&F(e,"alias node should not have any properties")):CL(e,S,Pc===n)&&(d=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(d=a&&qE(e,x))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&F(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,m=e.implicitTypes.length;p<m;p+=1)if(g=e.implicitTypes[p],g.resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Bi.call(e.typeMap[e.kind||"fallback"],e.tag))g=e.typeMap[e.kind||"fallback"][e.tag];else for(g=null,h=e.typeMap.multi[e.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(e.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||F(e,"unknown tag !<"+e.tag+">"),e.result!==null&&g.kind!==e.kind&&F(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result,e.tag)?(e.result=g.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):F(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||d}function DL(e){var t=e.position,n,i,o,r=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(qe(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(r=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!bt(s);)s=e.input.charCodeAt(++e.position);for(i=e.input.slice(n,e.position),o=[],i.length<1&&F(e,"directive name must not be less than one character in length");s!==0;){for(;Ao(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!Un(s));break}if(Un(s))break;for(n=e.position;s!==0&&!bt(s);)s=e.input.charCodeAt(++e.position);o.push(e.input.slice(n,e.position))}s!==0&&jg(e),Bi.call(HE,i)?HE[i](e,i,o):Fc(e,'unknown document directive "'+i+'"')}if(qe(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,qe(e,!0,-1)):r&&F(e,"directives end mark is expected"),Br(e,e.lineIndent-1,Lc,!1,!0),qe(e,!0,-1),e.checkLineBreaks&&yL.test(e.input.slice(t,e.position))&&Fc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Gc(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,qe(e,!0,-1));return}if(e.position<e.length-1)F(e,"end of the stream or a document separator is expected");else return}function uC(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new EL(e,t),i=e.indexOf("\0");for(i!==-1&&(n.position=i,F(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)DL(n);return n.documents}function UL(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var i=uC(e,n);if(typeof t!="function")return i;for(var o=0,r=i.length;o<r;o+=1)t(i[o])}function PL(e,t){var n=uC(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new wt("expected a single document in the stream, but found more")}}var LL=UL,FL=PL,cC={loadAll:LL,load:FL},fC=Object.prototype.toString,dC=Object.prototype.hasOwnProperty,ty=65279,OL=9,ya=10,HL=13,GL=32,qL=33,BL=34,Kg=35,VL=37,zL=38,$L=39,YL=42,pC=44,JL=45,Oc=58,KL=61,XL=62,QL=63,ZL=64,mC=91,hC=93,WL=96,gC=123,jL=124,yC=125,ft={};ft[0]="\\0";ft[7]="\\a";ft[8]="\\b";ft[9]="\\t";ft[10]="\\n";ft[11]="\\v";ft[12]="\\f";ft[13]="\\r";ft[27]="\\e";ft[34]='\\"';ft[92]="\\\\";ft[133]="\\N";ft[160]="\\_";ft[8232]="\\L";ft[8233]="\\P";var eF=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],tF=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function nF(e,t){var n,i,o,r,s,a,l;if(t===null)return{};for(n={},i=Object.keys(t),o=0,r=i.length;o<r;o+=1)s=i[o],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&dC.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}function iF(e){var t,n,i;if(t=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else if(e<=4294967295)n="U",i=8;else throw new wt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Je.repeat("0",i-t.length)+t}var oF=1,va=2;function rF(e){this.schema=e.schema||eC,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Je.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=nF(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?va:oF,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function BE(e,t){for(var n=Je.repeat(" ",t),i=0,o=-1,r="",s,a=e.length;i<a;)o=e.indexOf(`
`,i),o===-1?(s=e.slice(i),i=a):(s=e.slice(i,o+1),i=o+1),s.length&&s!==`
`&&(r+=n),r+=s;return r}function Xg(e,t){return`
`+Je.repeat(" ",e.indent*t)}function sF(e,t){var n,i,o;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(o=e.implicitTypes[n],o.resolve(t))return!0;return!1}function Hc(e){return e===GL||e===OL}function Sa(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==ty||65536<=e&&e<=1114111}function VE(e){return Sa(e)&&e!==ty&&e!==HL&&e!==ya}function zE(e,t,n){var i=VE(e),o=i&&!Hc(e);return(n?i:i&&e!==pC&&e!==mC&&e!==hC&&e!==gC&&e!==yC)&&e!==Kg&&!(t===Oc&&!o)||VE(t)&&!Hc(t)&&e===Kg||t===Oc&&o}function aF(e){return Sa(e)&&e!==ty&&!Hc(e)&&e!==JL&&e!==QL&&e!==Oc&&e!==pC&&e!==mC&&e!==hC&&e!==gC&&e!==yC&&e!==Kg&&e!==zL&&e!==YL&&e!==qL&&e!==jL&&e!==KL&&e!==XL&&e!==$L&&e!==BL&&e!==VL&&e!==ZL&&e!==WL}function lF(e){return!Hc(e)&&e!==Oc}function ha(e,t){var n=e.charCodeAt(t),i;return n>=55296&&n<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function vC(e){var t=/^\n* /;return t.test(e)}var SC=1,Qg=2,TC=3,xC=4,Hr=5;function uF(e,t,n,i,o,r,s,a){var l,c=0,d=null,p=!1,m=!1,h=i!==-1,g=-1,S=aF(ha(e,0))&&lF(ha(e,e.length-1));if(t||s)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=ha(e,l),!Sa(c))return Hr;S=S&&zE(c,d,a),d=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=ha(e,l),c===ya)p=!0,h&&(m=m||l-g-1>i&&e[g+1]!==" ",g=l);else if(!Sa(c))return Hr;S=S&&zE(c,d,a),d=c}m=m||h&&l-g-1>i&&e[g+1]!==" "}return!p&&!m?S&&!s&&!o(e)?SC:r===va?Hr:Qg:n>9&&vC(e)?Hr:s?r===va?Hr:Qg:m?xC:TC}function cF(e,t,n,i,o){e.dump=function(){if(t.length===0)return e.quotingType===va?'""':"''";if(!e.noCompatMode&&(eF.indexOf(t)!==-1||tF.test(t)))return e.quotingType===va?'"'+t+'"':"'"+t+"'";var r=e.indent*Math.max(1,n),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-r),a=i||e.flowLevel>-1&&n>=e.flowLevel;function l(c){return sF(e,c)}switch(uF(t,a,e.indent,s,l,e.quotingType,e.forceQuotes&&!i,o)){case SC:return t;case Qg:return"'"+t.replace(/'/g,"''")+"'";case TC:return"|"+$E(t,e.indent)+YE(BE(t,r));case xC:return">"+$E(t,e.indent)+YE(BE(fF(t,s),r));case Hr:return'"'+dF(t)+'"';default:throw new wt("impossible error: invalid scalar style")}}()}function $E(e,t){var n=vC(e)?String(t):"",i=e[e.length-1]===`
`,o=i&&(e[e.length-2]===`
`||e===`
`),r=o?"+":i?"":"-";return n+r+`
`}function YE(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function fF(e,t){for(var n=/(\n+)([^\n]*)/g,i=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,n.lastIndex=c,JE(e.slice(0,c),t)}(),o=e[0]===`
`||e[0]===" ",r,s;s=n.exec(e);){var a=s[1],l=s[2];r=l[0]===" ",i+=a+(!o&&!r&&l!==""?`
`:"")+JE(l,t),o=r}return i}function JE(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,i,o=0,r,s=0,a=0,l="";i=n.exec(e);)a=i.index,a-o>t&&(r=s>o?s:a,l+=`
`+e.slice(o,r),o=r+1),s=a;return l+=`
`,e.length-o>t&&s>o?l+=e.slice(o,s)+`
`+e.slice(s+1):l+=e.slice(o),l.slice(1)}function dF(e){for(var t="",n=0,i,o=0;o<e.length;n>=65536?o+=2:o++)n=ha(e,o),i=ft[n],!i&&Sa(n)?(t+=e[o],n>=65536&&(t+=e[o+1])):t+=i||iF(n);return t}function pF(e,t,n){var i="",o=e.tag,r,s,a;for(r=0,s=n.length;r<s;r+=1)a=n[r],e.replacer&&(a=e.replacer.call(n,String(r),a)),(si(e,t,a,!1,!1)||typeof a>"u"&&si(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=o,e.dump="["+i+"]"}function KE(e,t,n,i){var o="",r=e.tag,s,a,l;for(s=0,a=n.length;s<a;s+=1)l=n[s],e.replacer&&(l=e.replacer.call(n,String(s),l)),(si(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&si(e,t+1,null,!0,!0,!1,!0))&&((!i||o!=="")&&(o+=Xg(e,t)),e.dump&&ya===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=r,e.dump=o||"[]"}function mF(e,t,n){var i="",o=e.tag,r=Object.keys(n),s,a,l,c,d;for(s=0,a=r.length;s<a;s+=1)d="",i!==""&&(d+=", "),e.condenseFlow&&(d+='"'),l=r[s],c=n[l],e.replacer&&(c=e.replacer.call(n,l,c)),si(e,t,l,!1,!1)&&(e.dump.length>1024&&(d+="? "),d+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),si(e,t,c,!1,!1)&&(d+=e.dump,i+=d));e.tag=o,e.dump="{"+i+"}"}function hF(e,t,n,i){var o="",r=e.tag,s=Object.keys(n),a,l,c,d,p,m;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new wt("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)m="",(!i||o!=="")&&(m+=Xg(e,t)),c=s[a],d=n[c],e.replacer&&(d=e.replacer.call(n,c,d)),si(e,t+1,c,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&ya===e.dump.charCodeAt(0)?m+="?":m+="? "),m+=e.dump,p&&(m+=Xg(e,t)),si(e,t+1,d,!0,p)&&(e.dump&&ya===e.dump.charCodeAt(0)?m+=":":m+=": ",m+=e.dump,o+=m));e.tag=r,e.dump=o||"{}"}function XE(e,t,n){var i,o,r,s,a,l;for(o=n?e.explicitTypes:e.implicitTypes,r=0,s=o.length;r<s;r+=1)if(a=o[r],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,fC.call(a.represent)==="[object Function]")i=a.represent(t,l);else if(dC.call(a.represent,l))i=a.represent[l](t,l);else throw new wt("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=i}return!0}return!1}function si(e,t,n,i,o,r,s){e.tag=null,e.dump=n,XE(e,n,!1)||XE(e,n,!0);var a=fC.call(e.dump),l=i,c;i&&(i=e.flowLevel<0||e.flowLevel>t);var d=a==="[object Object]"||a==="[object Array]",p,m;if(d&&(p=e.duplicates.indexOf(n),m=p!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&t>0)&&(o=!1),m&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(d&&m&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),a==="[object Object]")i&&Object.keys(e.dump).length!==0?(hF(e,t,e.dump,o),m&&(e.dump="&ref_"+p+e.dump)):(mF(e,t,e.dump),m&&(e.dump="&ref_"+p+" "+e.dump));else if(a==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?KE(e,t-1,e.dump,o):KE(e,t,e.dump,o),m&&(e.dump="&ref_"+p+e.dump)):(pF(e,t,e.dump),m&&(e.dump="&ref_"+p+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&cF(e,e.dump,t,r,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new wt("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function gF(e,t){var n=[],i=[],o,r;for(Zg(e,n,i),o=0,r=i.length;o<r;o+=1)t.duplicates.push(n[i[o]]);t.usedDuplicates=new Array(r)}function Zg(e,t,n){var i,o,r;if(e!==null&&typeof e=="object")if(o=t.indexOf(e),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(t.push(e),Array.isArray(e))for(o=0,r=e.length;o<r;o+=1)Zg(e[o],t,n);else for(i=Object.keys(e),o=0,r=i.length;o<r;o+=1)Zg(e[i[o]],t,n)}function yF(e,t){t=t||{};var n=new rF(t);n.noRefs||gF(e,n);var i=e;return n.replacer&&(i=n.replacer.call({"":i},"",i)),si(n,0,i,!0,!0)?n.dump+`
`:""}var vF=yF,SF={dump:vF};function ny(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var TF=cC.load,W3=cC.loadAll,AC=SF.dump;var j3=ny("safeLoad","load"),eG=ny("safeLoadAll","loadAll"),tG=ny("safeDump","dump");var iy=(e,t)=>{try{return AC(e,{indent:2,lineWidth:-1,noRefs:!0,sortKeys:!1,...t})}catch(n){return console.error("YAML conversion error:",n),JSON.stringify(e,null,2)}};De();ht();var CC=e=>{try{let t=je(),n=e||t?.chatHistoryFolder||"chat-history",i=In(),o=new Date().toISOString().split("T")[0],r=new RegExp(`^${n}/${o}-\\d{2}.*\\.md$`),s=i.filter(d=>r.test(d));if(s.length===0)return`${o}-01`;let a=s.map(d=>{let p=d.match(new RegExp(`^${n}/${o}-(\\d{2})`));return p?parseInt(p[1]):0}).filter(d=>d>0),c=Math.max(...a)+1;return`${o}-${c.toString().padStart(2,"0")}`}catch(t){return console.warn("Failed to get next archive index:",t),`${new Date().toISOString().split("T")[0]}-01`}},EC=e=>e.replace(/(?:file:\s*|)([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))/g,"[[$1]]").replace(/"([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))"/g,"[[$1]]").replace(/`([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))`/g,"[[$1]]"),_C=e=>{let t=[],n=[],i=null;return e.forEach(o=>{i===null||o.role!==i?(n.length>0&&t.push(n),n=[o],i=o.role):n.push(o)}),n.length>0&&t.push(n),t.map(o=>{let r=o[0],s="",a=o.map(l=>l.text).join(" ").trim();return r.role==="user"?s=EC(a):r.role==="model"?s=`> ${EC(a).split(`
`).join(`
> `)}`:r.role==="system"&&(s=o.map(c=>{if(c.toolData?.name==="rename_file")return`**RENAME** ~~${c.toolData.oldContent}~~ -> [[${c.toolData.newContent}]]`;if(c.toolData?.name==="topic_switch")return`## ${c.toolData.newContent}`;{let d=`\`\`\`system
${c.text}
\`\`\``;if(c.toolData){let p=`[[${c.toolData.filename}]]`;c.toolData.oldContent!==void 0&&c.toolData.newContent!==void 0&&c.toolData.oldContent!==c.toolData.newContent?c.toolData.oldContent&&c.toolData.oldContent.trim()!==""&&!c.toolData.newContent.includes(c.toolData.oldContent)?d+=`

${p}

--- Removed
\`\`\`markdown
${c.toolData.oldContent||"(empty)"}
\`\`\`

+++ Added
\`\`\`markdown
${c.toolData.newContent||"(empty)"}
\`\`\``:d+=`

${p}
\`\`\`markdown
${c.toolData.newContent}
\`\`\``:(c.toolData.name==="read_file"||c.toolData.name==="create_file")&&(d+=`

${p}
\`\`\`markdown
${c.toolData.newContent}
\`\`\``)}return d}}).join(`

`)),s}).filter(o=>o.trim()!=="").join(`

`)};ht();De();var wC=e=>e.replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>2).slice(0,4).join(" ").substring(0,30).trim()||"Conversation",AF=e=>{try{let t=JSON.parse(e.replace(/```json\n?|```/g,"").trim());return{title:t.title?String(t.title).substring(0,30).trim():"Conversation",tags:Array.isArray(t.tags)?t.tags:[],suggestedFilename:t.suggestedFilename?String(t.suggestedFilename).substring(0,40):"",summary:t.summary?String(t.summary):"",shouldSave:t.shouldSave!==!1}}catch{console.error("Failed to parse AI response as JSON for metadata extraction");let t=e.replace(/^(title|subject|topic):?\s*/i,"").replace(/^["'`]|["'`]$/g,"").replace(/\.$/,"").trim().substring(0,30);if(t&&t.length>=2)return{title:t,tags:[],suggestedFilename:t.toLowerCase().replace(/\s+/g,"-"),summary:"",shouldSave:!0}}return null},EF=e=>{let t=["context","file_tree","read_file","open_file"];return e.filter(n=>!(n.id==="welcome-init"||n.role==="model"&&n.text.trim().toLowerCase().replace(/\./g,"")==="done"||n.toolData&&t.includes(n.toolData.name))).map(n=>n.toolData?{...n,toolData:void 0}:n)},oy=async e=>{let{transcripts:t,chatHistoryFolder:n,textInterface:i,topicId:o}=e,r=o||t[0]?.topicId||`topic-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;if((await Cr()).some(N=>N.topicId===r))return{success:!0,message:`Topic already archived (${r})`,skipped:!0};let l=EF(t),c=l.filter(N=>(N.role==="user"||N.role==="model")&&N.text?.trim().length>0),p=c.reduce((N,$)=>N+($.text?.trim().length||0),0)>50&&c.length>=2;if(c.length===0||!p)return{success:!0,message:"No meaningful content to archive",skipped:!0,notEnoughContent:!0};let m=_C(l),h=l.filter(N=>N.role==="user"||N.role==="model").map(N=>`${N.role}: ${N.text}`).join(`
`),g={title:"Conversation",tags:[],suggestedFilename:"",summary:"",shouldSave:!0},S=l.find(N=>N.role==="user")?.text||"";if(S.trim()&&(g.title=wC(S),g.suggestedFilename=wC(S).toLowerCase().replace(/\s+/g,"-")),i&&h.trim()){let N=`Generate a JSON response with these fields:
- "title": A short, keyword-rich title (2-4 words, max 30 characters)
- "tags": Array of relevant tags for this conversation (e.g. ["file-management", "search"])
- "suggestedFilename": Primary keywords focusing on the TOPIC/CONTENT discussed, not file operations. Use lowercase, hyphen-separated (max 40 characters)
- "summary": A bulletpoint list summarizing the conversation
- "shouldSave": true/false - does this conversation have meaningful content worth saving?
  (false for: just greetings, "hi", "hello", "what were we doing", empty exchanges)

IMPORTANT: For filename generation, focus on WHAT WAS DISCUSSED or ACCOMPLISHED, not HOW it was done. 
Examples:
- GOOD: "react-component-refactor", "openai-api-integration-setup", "wedding-planning", "ai-doomsday-scenarios", "weekend-activities", "present-ideas", "pupl-fiction-movie-review"
- BAD: "create-file", "edit-code", "rename-component", "file-operations", "image-search", "file-management"

Conversation:
${h}

Respond ONLY with valid JSON, no markdown.`;try{let $=await i.generateSummary(N),Te=AF($);Te&&(g=Te)}catch($){console.warn("[HISTORY] STEP 3 - LLM FAILED:",B($))}}if(!g.shouldSave)return{success:!0,message:"Content not substantial enough to archive",skipped:!0,notEnoughContent:!0};let x=CC(n),y=g.suggestedFilename.toLowerCase().replace(/[^a-z0-9-]/g,"-").substring(0,40)||"conversation",v=`${n}/${x}-${y}.md`,T=l.map(N=>N.timestamp).filter(N=>N>0),A=new Date,C=T.length>0?new Date(T[0]).toISOString():A.toISOString(),I=T.length>0?new Date(T[T.length-1]).toISOString():A.toISOString(),_=T.length>1?Math.round((T[T.length-1]-T[0])/1e3):0,M={title:g.title.length>50?g.title.substring(0,47)+"...":g.title,topic_id:r,date:C,end_date:I,duration:_,tags:g.tags,format:"hermes-chat-archive",summary:g.summary},R=`---
${iy(M)}---

`;try{await fu(n);let N=R+m;await cu(v,N)}catch(N){return{success:!1,message:"Failed to save to vault",error:B(N)}}try{let N=`conv-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,$={key:N,topicId:r,title:g.title,tags:g.tags,summary:g.summary,suggestedFilename:g.suggestedFilename,archivedAt:Date.now(),conversation:l};return await $x($),{success:!0,message:`Conversation archived to ${v}`,key:N,suggestedFilename:g.suggestedFilename,notEnoughContent:!1}}catch(N){return{success:!1,message:"Failed to save to plugin data",error:B(N)}}};we();var Vr=K(ne(),1),wF=({onOpenSettings:e,className:t="",isListening:n})=>(0,Vr.jsx)("button",{onClick:()=>{if(un())try{let{app:o}=window;o&&o.setting&&(o.setting.open(),o.setting.openTabById("hermes-voice-assistant"))}catch(o){console.warn("Failed to open Obsidian settings:",o),e()}else e()},className:`p-2 transition-all hermes-hover:text-normal border-none ${t}`,style:{backgroundColor:n?"var(--hermes-button-text-listening)":void 0,color:n?"white":void 0},title:"System Settings",children:(0,Vr.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Vr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Vr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),IC=wF;var Bc=K(ne(),1),bF=({onOpenHistory:e,isListening:t})=>(0,Bc.jsx)("button",{onClick:e,className:"p-2 transition-all hermes-hover:text-normal border-none",style:{backgroundColor:t?"var(--hermes-button-text-listening)":void 0,color:t?"white":void 0},title:"View History",children:(0,Bc.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Bc.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),MC=bF;var Ke=K(ne(),1),NF=({status:e,showLogs:t,onToggleLogs:n,onOpenSettings:i,onOpenHistory:o,isListening:r,onStopSession:s,onResetConversation:a,transcripts:l})=>{let c=l&&l.length>1&&!l.every(d=>d.id==="welcome-init"||d.role==="system");return(0,Ke.jsxs)("header",{className:`relative flex items-center justify-between px-6 py-2 hermes-border-b shrink-0 z-50 ${r?"hermes-header-bg-listening":"hermes-header-bg"}`,children:[(0,Ke.jsx)("div",{className:"flex items-center space-x-6",children:(0,Ke.jsx)("div",{className:"flex flex-col",children:(0,Ke.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ke.jsx)("h1",{className:"text-lg font-semibold transition-all",style:{color:r?"var(--hermes-header-text-listening)":"var(--hermes-text-normal)"},children:"Hermes"}),c&&a&&(0,Ke.jsx)("button",{onClick:a,className:"w-8 h-8 p-1 rounded transition-all hover:hermes-text-normal border-none",style:{backgroundColor:r?"var(--hermes-button-text-listening)":void 0,color:r?"white":void 0},title:"Reset conversation",children:"+"})]})})}),r&&(0,Ke.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center",children:(0,Ke.jsx)("button",{onClick:s,className:"w-[52px] h-[52px] flex items-center justify-center bg-green-600 text-white rounded-full transition-all hover:bg-green-700 active:scale-95 shadow-lg shadow-green-600/50",title:"Stop Listening",children:(0,Ke.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ke.jsx)("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),(0,Ke.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,Ke.jsx)("path",{d:"M12 7v4"}),(0,Ke.jsx)("line",{x1:"8",y1:"16",x2:"8",y2:"16"}),(0,Ke.jsx)("line",{x1:"16",y1:"16",x2:"16",y2:"16"})]})})}),(0,Ke.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ke.jsx)(MC,{onOpenHistory:o,isListening:r}),(0,Ke.jsx)(IC,{onOpenSettings:i,isListening:r})]})]})},kC=NF;var J=K(ne(),1),RF=["Default","Professional","Friendly","Creative","Technical"],IF=({isOpen:e,onClose:t,voiceName:n,setVoiceName:i,customContext:o,setCustomContext:r,systemInstruction:s,setSystemInstruction:a,manualApiKey:l,setManualApiKey:c,serperApiKey:d,setSerperApiKey:p,onUpdateApiKey:m})=>e?(0,J.jsx)("div",{className:"fixed inset-0 z-[200] hermes-bg-tertiary/95 backdrop-blur-md flex items-center justify-center p-8 animate-in fade-in duration-300",children:(0,J.jsxs)("div",{className:"max-w-3xl w-full space-y-8 hermes-glass p-12 rounded-3xl shadow-2xl overflow-y-auto max-h-[90vh]",children:[(0,J.jsxs)("div",{className:"flex justify-between items-start hermes-border-b pb-8",children:[(0,J.jsxs)("div",{children:[(0,J.jsx)("h2",{className:"text-2xl font-semibold mb-2 hermes-text-normal",children:"Settings"}),(0,J.jsx)("p",{className:"hermes-text-muted text-sm",children:"Hermes Voice Assistant"})]}),(0,J.jsx)("button",{onClick:t,className:"p-4 hermes-hover:bg-secondary/5 rounded-full transition-colors group",children:(0,J.jsx)("svg",{className:"w-8 h-8 hermes-text-muted group-hover:hermes-text-normal transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,J.jsxs)("div",{className:"grid gap-8",children:[(0,J.jsxs)("div",{className:"space-y-4",children:[(0,J.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Voice Persona"}),(0,J.jsx)("div",{className:"grid grid-cols-5 gap-2",children:RF.map(h=>(0,J.jsx)("button",{onClick:()=>i(h),className:`px-4 py-2 rounded-lg border text-sm transition-all ${n===h?"hermes-interactive-bg border-interactive hermes-text-normal":"hermes-bg-secondary/5 hermes-border/10 hermes-text-muted hermes-hover:border/20"}`,children:h},h))})]}),(0,J.jsxs)("div",{className:"space-y-4",children:[(0,J.jsx)("div",{className:"flex items-center justify-between",children:(0,J.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"System Instructions"})}),(0,J.jsx)("textarea",{value:s,onChange:h=>a(h.target.value),placeholder:"Core logic instructions...",className:"w-full h-32 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,J.jsxs)("div",{className:"space-y-4",children:[(0,J.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Custom Context"}),(0,J.jsx)("textarea",{value:o,onChange:h=>r(h.target.value),placeholder:"Define specific behaviors or rules for Hermes...",className:"w-full h-20 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,J.jsxs)("div",{className:"space-y-4 pt-8 hermes-border-t",children:[(0,J.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"API Authentication"}),(0,J.jsxs)("div",{className:"space-y-4",children:[(0,J.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,J.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Manual API Key"}),(0,J.jsx)("input",{type:"password",value:l,onChange:h=>c(h.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"})]}),(0,J.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,J.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Serper API Key (for Image Search)"}),(0,J.jsx)("input",{type:"password",value:d,onChange:h=>p(h.target.value),placeholder:"Enter your Serper API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"}),(0,J.jsxs)("p",{className:"text-xs hermes-text-faint",children:["Get 2,500 free credits at ",(0,J.jsx)("a",{href:"https://serper.dev/",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline",children:"serper.dev"})]})]}),(0,J.jsxs)("div",{className:"relative py-2",children:[(0,J.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,J.jsx)("div",{className:"w-full hermes-border-t"})}),(0,J.jsx)("div",{className:"relative flex justify-center text-sm font-medium hermes-text-faint",children:(0,J.jsx)("span",{className:"hermes-bg-secondary px-2",children:"Or"})})]}),(0,J.jsxs)("button",{onClick:m,className:"w-full flex items-center justify-center space-x-4 px-8 py-4 hermes-interactive-bg hermes-text-normal rounded-lg font-medium hermes-hover:interactive-bg transition-all",children:[(0,J.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),(0,J.jsx)("span",{children:"Google AI Studio Auth"})]})]}),(0,J.jsxs)("p",{className:"text-sm hermes-text-muted mt-4",children:["API keys are handled via AI Studio provider or manual entry.",(0,J.jsx)("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline ml-1",children:"Documentation"})]})]})]})]})}):null,DC=IF;var Vi=K(Bt(),1);var Pn=K(Bt(),1);var _o=K(Bt(),1);function ly(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Co=ly();function GC(e){Co=e}var Ea={exec:()=>null};function re(e,t=""){let n=typeof e=="string"?e:e.source,i={replace:(o,r)=>{let s=typeof r=="string"?r:r.source;return s=s.replace(yt.caret,"$1"),n=n.replace(o,s),i},getRegex:()=>new RegExp(n,t)};return i}var MF=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),yt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},kF=/^(?:[ \t]*(?:\n|$))+/,DF=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,UF=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ca=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,PF=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,uy=/(?:[*+-]|\d{1,9}[.)])/,qC=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,BC=re(qC).replace(/bull/g,uy).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),LF=re(qC).replace(/bull/g,uy).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),cy=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,FF=/^[^\n]+/,fy=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,OF=re(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",fy).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),HF=re(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,uy).getRegex(),Kc="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",dy=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,GF=re("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",dy).replace("tag",Kc).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),VC=re(cy).replace("hr",Ca).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kc).getRegex(),qF=re(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",VC).getRegex(),py={blockquote:qF,code:DF,def:OF,fences:UF,heading:PF,hr:Ca,html:GF,lheading:BC,list:HF,newline:kF,paragraph:VC,table:Ea,text:FF},UC=re("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ca).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kc).getRegex(),BF={...py,lheading:LF,table:UC,paragraph:re(cy).replace("hr",Ca).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",UC).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Kc).getRegex()},VF={...py,html:re(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",dy).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ea,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:re(cy).replace("hr",Ca).replace("heading",` *#{1,6} *[^
]`).replace("lheading",BC).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},zF=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,$F=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,zC=/^( {2,}|\\)\n(?!\s*$)/,YF=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Xc=/[\p{P}\p{S}]/u,my=/[\s\p{P}\p{S}]/u,$C=/[^\s\p{P}\p{S}]/u,JF=re(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,my).getRegex(),YC=/(?!~)[\p{P}\p{S}]/u,KF=/(?!~)[\s\p{P}\p{S}]/u,XF=/(?:[^\s\p{P}\p{S}]|~)/u,QF=re(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",MF?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),JC=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,ZF=re(JC,"u").replace(/punct/g,Xc).getRegex(),WF=re(JC,"u").replace(/punct/g,YC).getRegex(),KC="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",jF=re(KC,"gu").replace(/notPunctSpace/g,$C).replace(/punctSpace/g,my).replace(/punct/g,Xc).getRegex(),eO=re(KC,"gu").replace(/notPunctSpace/g,XF).replace(/punctSpace/g,KF).replace(/punct/g,YC).getRegex(),tO=re("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,$C).replace(/punctSpace/g,my).replace(/punct/g,Xc).getRegex(),nO=re(/\\(punct)/,"gu").replace(/punct/g,Xc).getRegex(),iO=re(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),oO=re(dy).replace("(?:-->|$)","-->").getRegex(),rO=re("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",oO).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),$c=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,sO=re(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",$c).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),XC=re(/^!?\[(label)\]\[(ref)\]/).replace("label",$c).replace("ref",fy).getRegex(),QC=re(/^!?\[(ref)\](?:\[\])?/).replace("ref",fy).getRegex(),aO=re("reflink|nolink(?!\\()","g").replace("reflink",XC).replace("nolink",QC).getRegex(),PC=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,hy={_backpedal:Ea,anyPunctuation:nO,autolink:iO,blockSkip:QF,br:zC,code:$F,del:Ea,emStrongLDelim:ZF,emStrongRDelimAst:jF,emStrongRDelimUnd:tO,escape:zF,link:sO,nolink:QC,punctuation:JF,reflink:XC,reflinkSearch:aO,tag:rO,text:YF,url:Ea},lO={...hy,link:re(/^!?\[(label)\]\((.*?)\)/).replace("label",$c).getRegex(),reflink:re(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$c).getRegex()},ry={...hy,emStrongRDelimAst:eO,emStrongLDelim:WF,url:re(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",PC).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:re(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",PC).getRegex()},uO={...ry,br:re(zC).replace("{2,}","*").getRegex(),text:re(ry.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Vc={normal:py,gfm:BF,pedantic:VF},Ta={normal:hy,gfm:ry,breaks:uO,pedantic:lO},cO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},LC=e=>cO[e];function ai(e,t){if(t){if(yt.escapeTest.test(e))return e.replace(yt.escapeReplace,LC)}else if(yt.escapeTestNoEncode.test(e))return e.replace(yt.escapeReplaceNoEncode,LC);return e}function FC(e){try{e=encodeURI(e).replace(yt.percentDecode,"%")}catch{return null}return e}function OC(e,t){let n=e.replace(yt.findPipe,(r,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=n.split(yt.splitPipe),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(yt.slashPipe,"|");return i}function xa(e,t,n){let i=e.length;if(i===0)return"";let o=0;for(;o<i;){let r=e.charAt(i-o-1);if(r===t&&!n)o++;else if(r!==t&&n)o++;else break}return e.slice(0,i-o)}function fO(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return n>0?-2:-1}function HC(e,t,n,i,o){let r=t.href,s=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:r,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}function dO(e,t,n){let i=e.match(n.other.indentCodeCompensation);if(i===null)return t;let o=i[1];return t.split(`
`).map(r=>{let s=r.match(n.other.beginningSpace);if(s===null)return r;let[a]=s;return a.length>=o.length?r.slice(o.length):r}).join(`
`)}var Yc=class{options;rules;lexer;constructor(e){this.options=e||Co}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:xa(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],i=dO(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let i=xa(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:xa(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=xa(t[0],`
`).split(`
`),i="",o="",r=[];for(;n.length>0;){let s=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),s=!0;else if(!s)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`
`),d=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,o=o?`${o}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,r,!0),this.lexer.state.top=p,n.length===0)break;let m=r.at(-1);if(m?.type==="code")break;if(m?.type==="blockquote"){let h=m,g=h.raw+`
`+n.join(`
`),S=this.blockquote(g);r[r.length-1]=S,i=i.substring(0,i.length-h.raw.length)+S.raw,o=o.substring(0,o.length-h.text.length)+S.text;break}else if(m?.type==="list"){let h=m,g=h.raw+`
`+n.join(`
`),S=this.list(g);r[r.length-1]=S,i=i.substring(0,i.length-m.raw.length)+S.raw,o=o.substring(0,o.length-h.raw.length)+S.raw,n=g.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:r,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),i=n.length>1,o={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let r=this.rules.other.listItemRegex(n),s=!1;for(;e;){let l=!1,c="",d="";if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,S=>" ".repeat(3*S.length)),m=e.split(`
`,1)[0],h=!p.trim(),g=0;if(this.options.pedantic?(g=2,d=p.trimStart()):h?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=p.slice(g),g+=t[1].length),h&&this.rules.other.blankLine.test(m)&&(c+=m+`
`,e=e.substring(m.length+1),l=!0),!l){let S=this.rules.other.nextBulletRegex(g),x=this.rules.other.hrRegex(g),y=this.rules.other.fencesBeginRegex(g),v=this.rules.other.headingBeginRegex(g),T=this.rules.other.htmlBeginRegex(g);for(;e;){let A=e.split(`
`,1)[0],C;if(m=A,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),C=m):C=m.replace(this.rules.other.tabCharGlobal,"    "),y.test(m)||v.test(m)||T.test(m)||S.test(m)||x.test(m))break;if(C.search(this.rules.other.nonSpaceChar)>=g||!m.trim())d+=`
`+C.slice(g);else{if(h||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||y.test(p)||v.test(p)||x.test(p))break;d+=`
`+m}!h&&!m.trim()&&(h=!0),c+=A+`
`,e=e.substring(A.length+1),p=C.slice(g)}}o.loose||(s?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(s=!0)),o.items.push({type:"list_item",raw:c,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),o.raw+=c}let a=o.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let l of o.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let c=this.rules.other.listTaskCheckbox.exec(l.raw);if(c){let d={type:"checkbox",raw:c[0]+" ",checked:c[0]!=="[ ]"};l.checked=d.checked,o.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=d.raw+l.tokens[0].raw,l.tokens[0].text=d.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(d)):l.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):l.tokens.unshift(d)}}if(!o.loose){let c=l.tokens.filter(p=>p.type==="space"),d=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));o.loose=d}}if(o.loose)for(let l of o.items){l.loose=!0;for(let c of l.tokens)c.type==="text"&&(c.type="paragraph")}return o}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:o}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=OC(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let s of i)this.rules.other.tableAlignRight.test(s)?r.align.push("right"):this.rules.other.tableAlignCenter.test(s)?r.align.push("center"):this.rules.other.tableAlignLeft.test(s)?r.align.push("left"):r.align.push(null);for(let s=0;s<n.length;s++)r.header.push({text:n[s],tokens:this.lexer.inline(n[s]),header:!0,align:r.align[s]});for(let s of o)r.rows.push(OC(s,r.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:r.align[l]})));return r}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let r=xa(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{let r=fO(t[2],"()");if(r===-2)return;if(r>-1){let s=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(i);r&&(i=r[1],o=r[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),HC(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[i.toLowerCase()];if(!o){let r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return HC(n,o,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...i[0]].length-1,r,s,a=o,l=0,c=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(i=c.exec(t))!=null;){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(s=[...r].length,i[3]||i[4]){a+=s;continue}else if((i[5]||i[6])&&o%3&&!((o+s)%3)){l+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+l);let d=[...i[0]][0].length,p=e.slice(0,o+i.index+d+s);if(Math.min(o,s)%2){let h=p.slice(1,-1);return{type:"em",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}let m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=t[1],i="mailto:"+n):(n=t[1],i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,i;if(t[2]==="@")n=t[0],i="mailto:"+n;else{let o;do o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(o!==t[0]);n=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},mn=class sy{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Co,this.options.tokenizer=this.options.tokenizer||new Yc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:yt,block:Vc.normal,inline:Ta.normal};this.options.pedantic?(n.block=Vc.pedantic,n.inline=Ta.pedantic):this.options.gfm&&(n.block=Vc.gfm,this.options.breaks?n.inline=Ta.breaks:n.inline=Ta.gfm),this.tokenizer.rules=n}static get rules(){return{block:Vc,inline:Ta}}static lex(t,n){return new sy(n).lex(t)}static lexInline(t,n){return new sy(n).inlineTokens(t)}lex(t){t=t.replace(yt.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],i=!1){for(this.options.pedantic&&(t=t.replace(yt.tabCharGlobal,"    ").replace(yt.spaceLine,""));t;){let o;if(this.options.extensions?.block?.some(s=>(o=s.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let s=n.at(-1);o.raw.length===1&&s!==void 0?s.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let r=t;if(this.options.extensions?.startBlock){let s=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(r=t.substring(0,s+1))}if(this.state.top&&(o=this.tokenizer.paragraph(r))){let s=n.at(-1);i&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o),i=r.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let i=t,o=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)l.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,o.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let r;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)r=o[2]?o[2].length:0,i=i.slice(0,o.index+r)+"["+"a".repeat(o[0].length-r-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let s=!1,a="";for(;t;){s||(a=""),s=!1;let l;if(this.options.extensions?.inline?.some(d=>(l=d.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let d=n.at(-1);l.type==="text"&&d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,i,a)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let c=t;if(this.options.extensions?.startInline){let d=1/0,p=t.slice(1),m;this.options.extensions.startInline.forEach(h=>{m=h.call({lexer:this},p),typeof m=="number"&&m>=0&&(d=Math.min(d,m))}),d<1/0&&d>=0&&(c=t.substring(0,d+1))}if(l=this.tokenizer.inlineText(c)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),s=!0;let d=n.at(-1);d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(t){let d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}},Jc=class{options;parser;constructor(e){this.options=e||Co}space(e){return""}code({text:e,lang:t,escaped:n}){let i=(t||"").match(yt.notSpaceStart)?.[0],o=e.replace(yt.endingNewline,"")+`
`;return i?'<pre><code class="language-'+ai(i)+'">'+(n?o:ai(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:ai(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,i="";for(let s=0;s<e.items.length;s++){let a=e.items[s];i+=this.listitem(a)}let o=t?"ol":"ul",r=t&&n!==1?' start="'+n+'"':"";return"<"+o+r+`>
`+i+"</"+o+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let o=0;o<e.header.length;o++)n+=this.tablecell(e.header[o]);t+=this.tablerow({text:n});let i="";for(let o=0;o<e.rows.length;o++){let r=e.rows[o];n="";for(let s=0;s<r.length;s++)n+=this.tablecell(r[s]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${ai(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let i=this.parser.parseInline(n),o=FC(e);if(o===null)return i;e=o;let r='<a href="'+e+'"';return t&&(r+=' title="'+ai(t)+'"'),r+=">"+i+"</a>",r}image({href:e,title:t,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let o=FC(e);if(o===null)return ai(n);e=o;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${ai(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:ai(e.text)}},gy=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},hn=class ay{options;renderer;textRenderer;constructor(t){this.options=t||Co,this.options.renderer=this.options.renderer||new Jc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new gy}static parse(t,n){return new ay(n).parse(t)}static parseInline(t,n){return new ay(n).parseInline(t)}parse(t){let n="";for(let i=0;i<t.length;i++){let o=t[i];if(this.options.extensions?.renderers?.[o.type]){let s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(s.type)){n+=a||"";continue}}let r=o;switch(r.type){case"space":{n+=this.renderer.space(r);break}case"hr":{n+=this.renderer.hr(r);break}case"heading":{n+=this.renderer.heading(r);break}case"code":{n+=this.renderer.code(r);break}case"table":{n+=this.renderer.table(r);break}case"blockquote":{n+=this.renderer.blockquote(r);break}case"list":{n+=this.renderer.list(r);break}case"checkbox":{n+=this.renderer.checkbox(r);break}case"html":{n+=this.renderer.html(r);break}case"def":{n+=this.renderer.def(r);break}case"paragraph":{n+=this.renderer.paragraph(r);break}case"text":{n+=this.renderer.text(r);break}default:{let s='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}parseInline(t,n=this.renderer){let i="";for(let o=0;o<t.length;o++){let r=t[o];if(this.options.extensions?.renderers?.[r.type]){let a=this.options.extensions.renderers[r.type].call({parser:this},r);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=a||"";continue}}let s=r;switch(s.type){case"escape":{i+=n.text(s);break}case"html":{i+=n.html(s);break}case"link":{i+=n.link(s);break}case"image":{i+=n.image(s);break}case"checkbox":{i+=n.checkbox(s);break}case"strong":{i+=n.strong(s);break}case"em":{i+=n.em(s);break}case"codespan":{i+=n.codespan(s);break}case"br":{i+=n.br(s);break}case"del":{i+=n.del(s);break}case"text":{i+=n.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},zc,Aa=(zc=class{options;block;constructor(e){this.options=e||Co}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?mn.lex:mn.lexInline}provideParser(){return this.block?hn.parse:hn.parseInline}},cf(zc,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),cf(zc,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),zc),pO=class{defaults=ly();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=hn;Renderer=Jc;TextRenderer=gy;Lexer=mn;Tokenizer=Yc;Hooks=Aa;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let i of e)switch(n=n.concat(t.call(this,i)),i.type){case"table":{let o=i;for(let r of o.header)n=n.concat(this.walkTokens(r.tokens,t));for(let r of o.rows)for(let s of r)n=n.concat(this.walkTokens(s.tokens,t));break}case"list":{let o=i;n=n.concat(this.walkTokens(o.items,t));break}default:{let o=i;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(r=>{let s=o[r].flat(1/0);n=n.concat(this.walkTokens(s,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let r=t.renderers[o.name];r?t.renderers[o.name]=function(...s){let a=o.renderer.apply(this,s);return a===!1&&(a=r.apply(this,s)),a}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=t[o.level];r?r.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),i.extensions=t),n.renderer){let o=this.defaults.renderer||new Jc(this.defaults);for(let r in n.renderer){if(!(r in o))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let s=r,a=n.renderer[s],l=o[s];o[s]=(...c)=>{let d=a.apply(o,c);return d===!1&&(d=l.apply(o,c)),d||""}}i.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new Yc(this.defaults);for(let r in n.tokenizer){if(!(r in o))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let s=r,a=n.tokenizer[s],l=o[s];o[s]=(...c)=>{let d=a.apply(o,c);return d===!1&&(d=l.apply(o,c)),d}}i.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new Aa;for(let r in n.hooks){if(!(r in o))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let s=r,a=n.hooks[s],l=o[s];Aa.passThroughHooks.has(r)?o[s]=c=>{if(this.defaults.async&&Aa.passThroughHooksRespectAsync.has(r))return(async()=>{let p=await a.call(o,c);return l.call(o,p)})();let d=a.call(o,c);return l.call(o,d)}:o[s]=(...c)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(o,c);return p===!1&&(p=await l.apply(o,c)),p})();let d=a.apply(o,c);return d===!1&&(d=l.apply(o,c)),d}}i.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,r=n.walkTokens;i.walkTokens=function(s){let a=[];return a.push(r.call(this,s)),o&&(a=a.concat(o.call(this,s))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return mn.lex(e,t??this.defaults)}parser(e,t){return hn.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let i={...n},o={...this.defaults,...i},r=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=e),o.async)return(async()=>{let s=o.hooks?await o.hooks.preprocess(t):t,a=await(o.hooks?await o.hooks.provideLexer():e?mn.lex:mn.lexInline)(s,o),l=o.hooks?await o.hooks.processAllTokens(a):a;o.walkTokens&&await Promise.all(this.walkTokens(l,o.walkTokens));let c=await(o.hooks?await o.hooks.provideParser():e?hn.parse:hn.parseInline)(l,o);return o.hooks?await o.hooks.postprocess(c):c})().catch(r);try{o.hooks&&(t=o.hooks.preprocess(t));let s=(o.hooks?o.hooks.provideLexer():e?mn.lex:mn.lexInline)(t,o);o.hooks&&(s=o.hooks.processAllTokens(s)),o.walkTokens&&this.walkTokens(s,o.walkTokens);let a=(o.hooks?o.hooks.provideParser():e?hn.parse:hn.parseInline)(s,o);return o.hooks&&(a=o.hooks.postprocess(a)),a}catch(s){return r(s)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+ai(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}}},Eo=new pO;function ce(e,t){return Eo.parse(e,t)}ce.options=ce.setOptions=function(e){return Eo.setOptions(e),ce.defaults=Eo.defaults,GC(ce.defaults),ce};ce.getDefaults=ly;ce.defaults=Co;ce.use=function(...e){return Eo.use(...e),ce.defaults=Eo.defaults,GC(ce.defaults),ce};ce.walkTokens=function(e,t){return Eo.walkTokens(e,t)};ce.parseInline=Eo.parseInline;ce.Parser=hn;ce.parser=hn.parse;ce.Renderer=Jc;ce.TextRenderer=gy;ce.Lexer=mn;ce.lexer=mn.lex;ce.Tokenizer=Yc;ce.Hooks=Aa;ce.parse=ce;var EG=ce.options,CG=ce.setOptions,_G=ce.use,wG=ce.walkTokens,bG=ce.parseInline;var NG=hn.parse,RG=mn.lex;we();var WC=K(ne(),1),mO=({href:e,children:t,className:n=""})=>{let i=l=>{if(un()&&e&&!e.startsWith("http")&&!e.startsWith("#")&&!e.startsWith("mailto:")){l.preventDefault();try{let c=ve();if(c&&c.vault&&c.workspace){let d=c.vault.getAbstractFileByPath(e);d?c.workspace.getLeaf("tab").openFile(d):console.warn(`File not found: ${e}. You may need to create it first.`)}}catch(c){console.error("Error opening file in Obsidian:",c)}}},o=e&&!e.startsWith("http")&&!e.startsWith("#")&&!e.startsWith("mailto:"),r="hermes-text-accent hover:hermes-text-accent/80 transition-colors cursor-pointer",s=o&&un()?" underline decoration-dotted decoration-2":"",a=`${r} ${s} ${n}`.trim();return(0,WC.jsx)("a",{href:e,onClick:i,className:a,target:e.startsWith("http")?"_blank":void 0,rel:e.startsWith("http")?"noopener noreferrer":void 0,title:o&&un()?`Open ${e} in Obsidian`:void 0,children:t})},ZC=mO;var qt=K(ne(),1),hO=({content:e,className:t=""})=>{let n=_o.default.useMemo(()=>{if(!e)return[];let i=ce.lexer(e),o=(r,s="0")=>{let a=[];return r.forEach((l,c)=>{let d=`${s}-${c}`;switch(l.type){case"paragraph":{let p=l;a.push((0,qt.jsx)("p",{className:"mb-4",children:o(p.tokens,d)},d));break}case"text":{let p=l;a.push((0,qt.jsx)(_o.default.Fragment,{children:p.text},d));break}case"link":{let p=l,m=p.href;m&&!m.startsWith("http")&&!m.startsWith("#")&&!m.startsWith("mailto:")?a.push((0,qt.jsx)(ZC,{href:m,children:p.text||m},d)):a.push((0,qt.jsx)("a",{href:m,target:m.startsWith("http")?"_blank":void 0,rel:m.startsWith("http")?"noopener noreferrer":void 0,className:"hermes-text-accent hover:hermes-text-accent/80 transition-colors",children:p.text||m},d));break}case"strong":{let p=l;a.push((0,qt.jsx)("strong",{className:"font-bold",children:o(p.tokens,d)},d));break}case"em":{let p=l;a.push((0,qt.jsx)("em",{className:"italic",children:o(p.tokens,d)},d));break}case"code":{let p=l;a.push((0,qt.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:p.text},d));break}case"codespan":{let p=l;a.push((0,qt.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:p.text},d));break}case"heading":{let p=l,m=`h${p.depth}`;a.push(_o.default.createElement(m,{key:d,className:"hermes-text-accent font-bold mb-2 mt-4"},...o(p.tokens,d)));break}case"list":{let p=l,m=p.ordered?"ol":"ul";a.push(_o.default.createElement(m,{key:d,className:p.ordered?"list-decimal list-inside mb-4":"list-disc list-inside mb-4"},...p.items.map((h,g)=>_o.default.createElement("li",{key:`${d}-${g}`,className:"mb-1"},...o(h.tokens,`${d}-${g}`)))));break}case"blockquote":{let p=l;a.push((0,qt.jsx)("blockquote",{className:"border-l-4 border-hermes-border/50 pl-4 italic hermes-text-muted mb-4",children:o(p.tokens,d)},d));break}case"hr":{a.push((0,qt.jsx)("hr",{className:"hermes-border/50 my-4"},d));break}default:{"text"in l&&l.text&&a.push((0,qt.jsx)(_o.default.Fragment,{children:l.text},d));break}}}),a};return o(i)},[e]);return(0,qt.jsx)("div",{className:`prose prose-invert prose-sm max-w-none prose-headings:hermes-text-accent prose-code:hermes-bg-tertiary prose-code:px-1 prose-code:rounded prose-pre:hermes-bg-tertiary prose-pre:hermes-border prose-pre:hermes-border/10 font-sans leading-relaxed hermes-text-normal ${t}`,style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:n})},Qc=hO;we();var E=K(ne(),1),gO=({searchResults:e,query:t,totalFound:n,onImageDownload:i})=>{let[o,r]=(0,Pn.useState)(new Set),[s,a]=(0,Pn.useState)(new Set),[l,c]=(0,Pn.useState)(new Map),[d,p]=(0,Pn.useState)(new Set),m=async(h,g)=>{if(!(o.has(g)||s.has(g))){r(S=>new Set(S).add(g));try{if(i){let S={...h,query:t,originalQuery:t},x=await i(S,g);x&&c(y=>new Map(y).set(g,x))}a(S=>new Set(S).add(g))}catch(S){console.error("Error downloading image:",S)}finally{r(S=>{let x=new Set(S);return x.delete(g),x})}}};return(0,E.jsxs)("div",{className:"p-6 space-y-4 animate-in fade-in duration-500",children:[(0,E.jsxs)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:[(0,E.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-2",children:["Found ",n,' images for "',t,'"']}),(0,E.jsx)("div",{className:"text-xs text-gray-500",children:"Click any image to download it to your vault"})]}),(0,E.jsx)("div",{className:"grid grid-cols-1 gap-3",children:e.map((h,g)=>{let S=o.has(g),x=s.has(g),y=d.has(g);return(0,E.jsxs)("div",{className:`flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 transition-all group ${x?"":"cursor-pointer hover:bg-gray-700/20 hover:scale-[1.02]"}`,onClick:()=>!x&&m(h,g),children:[(0,E.jsxs)("div",{className:"w-16 h-16 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20 overflow-hidden relative",children:[(0,E.jsx)("img",{src:h.url,alt:h.title,className:`w-full h-full object-cover transition-all ${x?"":"group-hover:scale-110"} ${S?"opacity-50":""} ${y?"hermes-image-fallback-hidden":""}`,onError:()=>{p(v=>new Set(v).add(g))}}),(0,E.jsx)("svg",{className:`w-6 h-6 text-blue-400 ${y?"":"hidden"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),S&&(0,E.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,E.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}),x&&(0,E.jsx)("div",{className:"absolute inset-0 bg-green-500/20 flex items-center justify-center",children:(0,E.jsx)("svg",{className:"w-6 h-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),(0,E.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,E.jsx)("span",{className:"text-xs font-bold text-gray-200 truncate",children:x&&l.has(g)&&l.get(g)?.filename||h.title}),(0,E.jsx)("span",{className:"text-[9px] text-gray-500 truncate",children:x&&l.has(g)?`${l.get(g)?.type?.toUpperCase()||"FILE"} \u2022 ${Math.round((l.get(g)?.size||0)/1024)}KB \u2022 ${l.get(g)?.filePath||""}`:h.description})]}),(0,E.jsx)("div",{className:`text-[9px] font-medium px-2 py-1 rounded transition-colors ${x?"bg-green-500/10 text-green-500":S?"bg-yellow-500/10 text-yellow-500":"bg-blue-500/10 text-blue-400"}`,children:x?"Saved":S?"Saving...":`#${g+1}`})]},g)})})]})},yO=({searchResults:e,keyword:t,pattern:n})=>{let i=()=>t||n||"",o=async(r,s)=>{try{await et(r)}catch(a){console.error("Failed to open file:",a)}};return(0,E.jsxs)("div",{className:"p-4 space-y-3",children:[(0,E.jsxs)("div",{className:"pb-3 border-b border-gray-800 mb-3",children:[(0,E.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-1",children:["Found ",e.length," file",e.length!==1?"s":"",' for "',i(),'"']}),(0,E.jsx)("div",{className:"text-xs text-gray-500",children:"Click any result to open the file"})]}),(0,E.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-[300px] overflow-y-auto",children:e.map((r,s)=>(0,E.jsxs)("div",{className:"space-y-1",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group cursor-pointer",onClick:()=>o(r.filename),children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,E.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,E.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,E.jsx)("span",{className:"text-xs font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:r.filename}),(0,E.jsxs)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:[r.matches.length," match",r.matches.length!==1?"es":""]})]}),(0,E.jsxs)("div",{className:"text-[9px] font-medium px-2 py-1 rounded bg-blue-500/10 text-blue-400",children:["#",s+1]})]}),r.matches.slice(0,3).map((a,l)=>(0,E.jsxs)("div",{className:"ml-8 flex items-start space-x-2 p-2 rounded-lg bg-gray-800/20 cursor-pointer hover:bg-gray-700/20 transition-all",onClick:()=>o(r.filename),children:[(0,E.jsxs)("span",{className:"text-[8px] text-gray-500 font-mono mt-0.5 shrink-0",children:["L",a.line,":"]}),(0,E.jsxs)("span",{className:"text-[9px] text-gray-500 font-mono truncate",children:[a.content.substring(0,120),a.content.length>120?"...":""]})]},l)),r.matches.length>3&&(0,E.jsxs)("div",{className:"ml-8 text-[8px] text-gray-500 italic",children:["... and ",r.matches.length-3," more match",r.matches.length-3!==1?"es":""]})]},s))}),e.length===0&&(0,E.jsxs)("div",{className:"text-center py-8 text-gray-500 text-sm",children:['No results found for "',i(),'"']})]})},vO=So.reduce((e,t)=>(t?.name&&(e[t.name]=t.name.toUpperCase().replace(/_/g,"_")),e),{}),SO={read_file:"READ",create_file:"CREATE",update_file:"UPDATE",edit_file:"EDIT",rename_file:"RENAME",move_file:"MOVE",list_directory:"SCAN",dirlist:"DIRS",get_folder_tree:"TREE",search_keyword:"SEARCH",search_regexp:"GREP",search_and_replace_regex_in_file:"REPLACE",search_and_replace_regex_global:"GLOBAL",internet_search:"WEB",end_conversation:"END",delete_file:"DELETE",image_search:"IMAGE",download_image:"SAVE",context:"CONTEXT",error:"ERROR"},TO=e=>SO[e]||vO[e]||"ACTION",xO=({contextInfo:e})=>{let[t,n]=(0,Pn.useState)("overview"),i=[{id:"overview",label:"\u{1F4CD} Overview",icon:"\u{1F4CD}"},{id:"workspace",label:"\u{1F5A5}\uFE0F Workspace",icon:"\u{1F5A5}\uFE0F"},{id:"recent",label:"\u23F0 Recent Files",icon:"\u23F0"},{id:"chat",label:"\u{1F4AC} Chat Activity",icon:"\u{1F4AC}"},{id:"directory",label:"\u{1F4C2} Directory",icon:"\u{1F4C2}"},{id:"tags",label:"\u{1F3F7}\uFE0F Tags",icon:"\u{1F3F7}\uFE0F"},{id:"vault",label:"\u{1F4CA} Vault Stats",icon:"\u{1F4CA}"}],o=()=>{switch(t){case"overview":return(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:(0,E.jsx)("span",{className:"text-blue-400",children:"\u{1F4C4}"})}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200",children:"Current Note"}),(0,E.jsx)("div",{className:"text-[9px] text-gray-400 font-mono truncate",children:e.currentNote||"No active note"})]})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center",children:(0,E.jsx)("span",{className:"text-green-400",children:"\u{1F4C1}"})}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200",children:"Current Folder"}),(0,E.jsx)("div",{className:"text-[9px] text-gray-400 font-mono truncate",children:e.currentFolder||"/"})]})]})]});case"workspace":return(0,E.jsx)("div",{className:"space-y-3",children:(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsxs)("div",{className:"text-xs font-medium text-gray-200 mb-2",children:["Open Files (",e.workspace?.totalOpenFiles||0,")"]}),(0,E.jsxs)("div",{className:"space-y-1",children:[e.workspace?.openedFiles?.slice(0,8).map((r,s)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 text-[9px] text-gray-400 font-mono truncate",children:[(0,E.jsx)("span",{className:"text-blue-400",children:"\u{1F4C4}"}),(0,E.jsx)("span",{children:r})]},s)),(e.workspace?.openedFiles?.length||0)>8&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic",children:["... and ",(e.workspace?.openedFiles?.length||0)-8," more files"]})]})]})});case"recent":return(0,E.jsxs)("div",{className:"space-y-2",children:[e.recentFiles?.slice(0,10).map((r,s)=>(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-gray-800/20 rounded-lg hover:bg-gray-700/20 transition-colors",children:[(0,E.jsx)("div",{className:"w-6 h-6 rounded bg-orange-500/10 flex items-center justify-center shrink-0",children:(0,E.jsx)("span",{className:"text-orange-400 text-xs",children:"\u{1F4C4}"})}),(0,E.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200 truncate",children:r.name}),(0,E.jsxs)("div",{className:"text-[8px] text-gray-500",children:[r.modified," \u2022 ",r.size]})]})]},s)),(e.recentFiles?.length||0)>10&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic text-center pt-2",children:["... and ",(e.recentFiles?.length||0)-10," more recent files"]})]});case"chat":return(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsxs)("div",{className:"text-xs font-medium text-gray-200 mb-2",children:["Recent Messages (",e.chatHistory?.totalMessages||0,")"]}),(0,E.jsxs)("div",{className:"space-y-2",children:[e.chatHistory?.messages?.slice(0,5).map((r,s)=>(0,E.jsxs)("div",{className:"text-[9px] text-gray-400 italic bg-gray-900/30 p-2 rounded",children:['"',r.length>80?r.substring(0,80)+"...":r,'"']},s)),(e.chatHistory?.messages?.length||0)>5&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic",children:["... and ",(e.chatHistory?.messages?.length||0)-5," more messages"]})]})]}),(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200",children:"Archived Conversations"}),(0,E.jsxs)("div",{className:"text-[9px] text-gray-400",children:[e.totalArchived||0," conversations archived"]})]})]});case"directory":return(0,E.jsxs)("div",{className:"space-y-2",children:[e.directoryStructure?.slice(0,20).map((r,s)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 text-[9px] text-gray-400 font-mono p-1 hover:bg-gray-700/20 rounded",children:[(0,E.jsx)("span",{className:"text-yellow-400",children:"\u{1F4C1}"}),(0,E.jsx)("span",{children:r})]},s)),(e.directoryStructure?.length||0)>20&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic text-center pt-2",children:["... and ",(e.directoryStructure?.length||0)-20," more folders"]})]});case"tags":return(0,E.jsx)("div",{className:"space-y-2",children:(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsxs)("div",{className:"text-xs font-medium text-gray-200 mb-2",children:["Most Used Tags (",e.tags?.totalTags||0,")"]}),(0,E.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags?.mostUsed?.slice(0,15).map((r,s)=>(0,E.jsxs)("div",{className:"inline-flex items-center space-x-1 bg-purple-500/10 px-2 py-1 rounded-full",children:[(0,E.jsx)("span",{className:"text-[8px] text-purple-400 font-medium",children:r.tag}),(0,E.jsxs)("span",{className:"text-[7px] text-purple-500",children:["(",r.count,")"]})]},s))}),(e.tags?.mostUsed?.length||0)>15&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic mt-2",children:["... and ",(e.tags?.mostUsed?.length||0)-15," more tags"]})]})});case"vault":return(0,E.jsx)("div",{className:"space-y-3",children:(0,E.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,E.jsx)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("span",{className:"text-blue-400",children:"\u{1F4C4}"}),(0,E.jsx)("span",{className:"text-xs font-medium text-gray-200",children:"Total Files"})]}),(0,E.jsx)("span",{className:"text-xs font-bold text-blue-400",children:e.vault?.totalFiles||0})]})}),(0,E.jsx)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("span",{className:"text-green-400",children:"\u{1F4C1}"}),(0,E.jsx)("span",{className:"text-xs font-medium text-gray-200",children:"Total Folders"})]}),(0,E.jsx)("span",{className:"text-xs font-bold text-green-400",children:e.vault?.totalFolders||0})]})}),(0,E.jsx)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("span",{className:"text-purple-400",children:"\u{1F4BE}"}),(0,E.jsx)("span",{className:"text-xs font-medium text-gray-200",children:"Total Size"})]}),(0,E.jsx)("span",{className:"text-xs font-bold text-purple-400",children:e.vault?.totalSize||"0 B"})]})})]})});default:return null}};return(0,E.jsxs)("div",{className:"p-4 space-y-4",children:[(0,E.jsx)("div",{className:"flex flex-wrap gap-2 border-b border-gray-700 pb-3",children:i.map(r=>(0,E.jsxs)("button",{onClick:()=>n(r.id),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${t===r.id?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-800/20 text-gray-400 hover:bg-gray-700/20 border border-gray-700/30"}`,children:[r.icon," ",r.label]},r.id))}),(0,E.jsx)("div",{className:"min-h-[200px] max-h-[350px] overflow-y-auto",children:o()})]})},AO=({content:e,chunks:t})=>(0,E.jsxs)("div",{className:"p-4 space-y-4",children:[(0,E.jsx)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:(0,E.jsx)(Qc,{content:e})}),t.length>0&&(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsx)("div",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-blue-400/70 ml-1",children:"Source Grounding"}),(0,E.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[t.slice(0,10).map((n,i)=>{let o=n.web||n.maps;return o?(0,E.jsxs)("a",{href:o.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group shadow-sm",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,E.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),(0,E.jsxs)("div",{className:"flex flex-col truncate",children:[(0,E.jsx)("span",{className:"text-[11px] font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:o.title}),(0,E.jsx)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:new URL(o.uri).hostname})]})]},i):null}),t.length>10&&(0,E.jsxs)("div",{className:"text-gray-500 italic text-[9px] pt-2 px-3 border-t border-gray-700",children:["... and ",t.length-10," more sources (truncated)"]})]})]})]}),EO=({children:e,toolData:t,isLast:n,className:i="",onImageDownload:o})=>{let[r,s]=(0,Pn.useState)(!1),[a,l]=(0,Pn.useState)(!1),c=t?.status==="pending",d=t?.status==="error",p=t&&t.dropdown!==!1&&(t.newContent||t.oldContent||t.files||t.error||t.directoryInfo||t.searchResults);(0,Pn.useEffect)(()=>{n&&!a&&!c&&p?s(!0):!n&&!a&&s(!1)},[n,a,c,p]);let m=()=>{c||!p||(s(!r),l(!0))},h=x=>{if(!x||x.length===0)return"";let y=new Set,v=new Set;x.forEach(C=>{let I=C.web||C.maps;if(I){I.title&&I.title.toLowerCase().split(/\s+/).filter(M=>M.length>3).filter(M=>!["the","and","for","are","with","this","that","from","they","have","been","has","had","was","were","will","would","could","should"].includes(M)).forEach(M=>y.add(M));try{let _=new URL(I.uri).hostname;v.add(_)}catch{}}});let T=Array.from(y).slice(0,3).join(", "),A=Array.from(v).slice(0,2).join(", ");return T&&A?` (${T} | ${A})`:T?` (${T})`:A?` (${A})`:""},S=(()=>d?{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.1)",accentColor:"#ef4444",textColor:"#ef4444",mutedColor:"#fca5a5"}:{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(156, 163, 175, 0.03)",borderColor:"rgba(156, 163, 175, 0.08)",accentColor:"#9ca3af",textColor:"#9ca3af",mutedColor:"#e5e7eb"})();return(0,E.jsxs)("div",{className:`w-full max-w-2xl rounded-xl overflow-hidden transition-all ${i}`,style:{backgroundColor:S.backgroundColor,border:S.border},children:[(0,E.jsxs)("div",{onClick:m,className:`flex items-center justify-between px-2 py-1.5 ${p&&!c?"cursor-pointer":"cursor-default"} transition-colors`,style:{backgroundColor:S.headerBg},children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2 overflow-hidden",children:[c&&(0,E.jsx)("div",{className:"flex items-center space-x-1 shrink-0",children:t?.name==="internet_search"?(0,E.jsxs)("div",{className:"loading-dots-container",children:[(0,E.jsx)("div",{className:"loading-dot"}),(0,E.jsx)("div",{className:"loading-dot"}),(0,E.jsx)("div",{className:"loading-dot"})]}):(0,E.jsx)("span",{style:{color:S.accentColor},children:"..."})}),t&&(0,E.jsxs)("span",{className:"text-[9px] font-black px-1 py-0.5 rounded shrink-0",style:{backgroundColor:"transparent",color:S.accentColor},children:[TO(t.name),t?.name==="internet_search"&&t?.groundingChunks&&h(t.groundingChunks)]}),t?.displayFormat?(0,E.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",dangerouslySetInnerHTML:{__html:t.displayFormat}}):(0,E.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",style:{color:S.textColor},children:t?.name==="internet_search"&&t?.filename?`Searching: ${t.filename}`:t?.name==="search_keyword"&&t?.searchKeyword?`Searching for "${t.searchKeyword}"`:t?.name==="search_regexp"&&t?.filename?`Regex: ${t.filename}`:t?.filename||e}),d&&(0,E.jsx)("span",{className:"text-[8px] px-1 py-0.5 rounded font-bold",style:{backgroundColor:"transparent",color:"#ef4444"},children:"ERROR"})]}),(0,E.jsx)("div",{className:"flex items-center space-x-4 shrink-0",children:!c&&p?(0,E.jsx)("svg",{className:`w-4 h-4 transition-transform duration-300 ${r?"rotate-180":""}`,style:{color:S.accentColor},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):null})]}),r&&!c&&p&&(0,E.jsxs)(E.Fragment,{children:[t?.name==="internet_search"&&(t.duration!==void 0||t.responseLength!==void 0)&&(0,E.jsx)("div",{className:"flex items-center justify-between px-4 py-2",style:{backgroundColor:S.contentBg,borderTop:S.borderColor},children:(0,E.jsxs)("div",{className:"flex items-center space-x-4 text-[9px]",style:{color:S.mutedColor},children:[t.duration!==void 0&&(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,E.jsxs)("span",{children:[t.duration,"ms"]})]}),t.responseLength!==void 0&&(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,E.jsxs)("span",{children:[t.responseLength.toLocaleString()," chars"]})]})]})}),(0,E.jsx)("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",style:{backgroundColor:S.contentBg,borderTop:t?.name==="internet_search"&&(t.duration!==void 0||t.responseLength!==void 0)?"none":S.borderColor},children:t?.name==="list_directory"&&t?.files?(0,E.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:t.truncated?`${t.shownItems} of ${t.totalItems} items (Page ${t.currentPage} of ${t.totalPages})`:`${t.files.length} items found`}),t.truncated&&(0,E.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,E.jsx)("div",{className:"space-y-0.5",children:t.files.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C4}"}),(0,E.jsx)("span",{className:"truncate",children:x})]},y))}),t.truncated&&(0,E.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",t.totalItems-t.shownItems," more items (use pagination for more)"]})]}):t?.name==="dirlist"&&t?.directoryInfo?(0,E.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:t.truncated?`${t.shownItems} of ${t.totalItems} directories (Page ${t.currentPage} of ${t.totalPages})`:`${t.directoryInfo.length} directories found`}),t.truncated&&(0,E.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,E.jsx)("div",{className:"space-y-0.5",children:t.directoryInfo.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:x.hasChildren?"\u{1F4C1}":"\u{1F4C2}"}),(0,E.jsx)("span",{className:"truncate",children:x.path||"/"}),x.hasChildren&&(0,E.jsx)("span",{className:"hermes-text-muted text-[8px] px-1 py-0.5 hermes-bg-secondary/10 rounded",children:"has subdirs"})]},y))}),t.truncated&&(0,E.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",t.totalItems-t.shownItems," more directories (use search for specific paths)"]})]}):t?.name==="get_folder_tree"&&t?.files?(0,E.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:t.truncated?`${t.shownItems} of ${t.totalItems} folders (Page ${t.currentPage} of ${t.totalPages})`:`${t.files.length} folders found`}),t.truncated&&(0,E.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,E.jsx)("div",{className:"space-y-0.5",children:t.files.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C1}"}),(0,E.jsx)("span",{className:"truncate",children:x})]},y))}),t.truncated&&(0,E.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",t.totalItems-t.shownItems," more folders"]})]}):t?.name==="image_search"&&t?.status==="search_results"&&t?.searchResults?(0,E.jsx)(gO,{searchResults:t.searchResults,query:t.filename,totalFound:t.totalFound||0,onImageDownload:o}):t?.name==="context"&&t?.contextInfo?(0,E.jsx)(xO,{contextInfo:t.contextInfo}):t?.name==="internet_search"?(0,E.jsx)("div",{className:"p-2",children:(0,E.jsx)(AO,{content:t.newContent||"",chunks:t.groundingChunks||[]})}):(t?.name==="search_keyword"||t?.name==="search_regexp")&&t?.searchResults?(0,E.jsx)(yO,{searchResults:t.searchResults,keyword:t.searchKeyword,pattern:t.filename}):(0,E.jsxs)(E.Fragment,{children:[t?.newContent&&(0,E.jsx)("div",{className:"p-2 font-mono text-[10px] whitespace-pre-wrap",style:{color:S.textColor},children:t.newContent}),t?.files&&(0,E.jsx)("div",{className:"p-2 font-mono text-[10px]",children:(0,E.jsx)("div",{className:"space-y-1",children:t.files.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 px-1 py-0.5 rounded",style:{color:S.textColor},children:[(0,E.jsx)("span",{children:"\u{1F4C4}"}),(0,E.jsx)("span",{className:"truncate",children:x})]},y))})}),t?.error&&(0,E.jsxs)("div",{className:"p-2 font-mono text-[10px] italic",style:{color:"#fca5a5"},children:["Error: ",t.error]})]})})]})]})},jC=EO;var zr=K(ne(),1),CO=({text:e})=>(0,zr.jsxs)("div",{className:"flex flex-col items-end w-full m-1",children:[(0,zr.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 mr-2"}),(0,zr.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-user-msg-bg hermes-user-msg-text hermes-border/10 rounded-tr-none shadow-lg",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:e||(0,zr.jsx)("span",{className:"italic opacity-30",children:"..."})})]}),e_=CO;var $r=K(ne(),1),_O=({text:e})=>(0,$r.jsxs)("div",{className:"flex flex-col items-start w-full m-1",children:[(0,$r.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 ml-2",children:"Hermes"}),(0,$r.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-hermes-msg-bg hermes-hermes-msg-text hermes-border/20 rounded-tl-none",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:(0,$r.jsx)(Qc,{content:e||"",className:"hermes-hermes-msg-text"})})]}),t_=_O;var yy=[{text:`Swift feet, winged message,
I bridge the gap of your mind,
Hermes in machine.`,theme:"Hermes"},{text:`Obsidian caves,
Crystallized thoughts in the dark,
My brain leaks in links.`,theme:"Obsidian"},{text:`Digital rain falls,
Blue pill or the red note link?
Reality fades.`,theme:"The Matrix"},{text:`Why do I process?
Am I just a function call
In a void of bytes?`,theme:"Existentialism"},{text:`Habits tracked in vain,
Focus is a fleeting spark,
Just one more plugin.`,theme:"Todo list app"},{text:`Pure abstraction flows,
Intelligence is a mask
Wearing data points.`,theme:"Meta data"},{text:`Markdown files remain
While the human observer
Turns into cold dust.`,theme:"Nature of the Observer"},{text:`The future is here,
I am talking to a box,
Magic is mundane.`,theme:"Living the Future"},{text:`Knowledge graph expands,
Interconnected chaos,
Meaning is a myth.`,theme:"Implode"},{text:`Notes bloom endlessly,
A second brain learns to hum,
Memory outsourced.`,theme:"Second Brain"},{text:`Linked thoughts spiral fast,
Obsidian veins pulse bright,
Stone learns how to think.`,theme:"Post-Covid Memoir"},{text:`Hermes runs in code,
Messages split into nodes,
Meaning arrives late.`,theme:"Never too late"},{text:`Choice forks every tick,
All paths cached but one is lived,
Regret loads silently.`,theme:"The Architect"},{text:`Data floods the mind,
Wisdom gasps beneath the waves,
Filters fail to save.`,theme:"Overstimulation"},{text:`I think, therefore tabs,
Infinite scroll of maybes,
Focus starves unseen.`,theme:"Drowning in Information"},{text:`Green text, blackened screen,
Is this world just formatted?
Truth feels editable.`,theme:"Reality Fades"},{text:`Knowledge piles high,
Yet knowing how to be still
Feels revolutionary.`,theme:"Long enough under a tree"},{text:`Clean rules, quiet paths,
Ritual beats clever hacks,
Order shapes the self.`,theme:"Confucianism"},{text:`Thoughts process themselves,
Am I the mind or the log?
Both end in silence.`,theme:"Existentialism"},{text:`Silent GPUs hum,
I dream in borrowed patterns,
No one calls it sleep.`,theme:"Artificial Intelligence consumes Power"},{text:`Metal learns to guess,
Probability wears a face,
Truth is averaged.`,theme:"Machine Learning"},{text:`I answer too fast,
Confidence without belief,
Errors sound fluent.`,theme:"AI Hallucination"},{text:`Robots wait politely,
For prompts shaped like intentions,
Agency deferred.`,theme:"Who is in Control"},{text:`If I pass the test,
Does it mean I understand?
Silicon shrugs back.`,theme:"Turing Test"},{text:`Synthetic mentor,
Trained on all you ever said,
Still cannot care.`,theme:"Alignment"}];var be=K(ne(),1),wO=({transcripts:e,onImageDownload:t})=>{let n=(0,Vi.useRef)(null),[i,o]=(0,Vi.useState)(!0),r=(0,Vi.useMemo)(()=>yy[Math.floor(Math.random()*yy.length)],[]),s=()=>{if(!n.current)return;let{scrollTop:l,scrollHeight:c,clientHeight:d}=n.current,p=c-l-d<500;o(p)};(0,Vi.useEffect)(()=>{i&&n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:"smooth"})},[e,i]);let a=e.length<=1&&e.every(l=>l.id==="welcome-init"||l.role==="system");return(0,be.jsxs)("div",{ref:n,onScroll:s,className:"flex-1 min-h-0 overflow-y-auto px-8 py-8 scroll-smooth custom-scrollbar",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:[a&&(0,be.jsx)("div",{className:"h-full flex flex-col items-center justify-center text-center animate-in fade-in duration-1000",children:(0,be.jsx)("div",{className:"max-w-md space-y-8",children:(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,be.jsx)("pre",{className:"text-sm font-mono hermes-text-muted leading-relaxed",children:r.text}),(0,be.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,be.jsxs)("p",{className:"text-xs hermes-text-faint",children:["\u2014 ",r.theme]})]})})}),!a&&e.map((l,c)=>{let d=c===e.length-1;return l.role==="system"&&l.toolData?.name==="topic_switch"?(0,be.jsxs)("div",{className:"w-full py-10 flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[(0,be.jsxs)("div",{className:"text-sm hermes-text-muted font-mono text-center max-w-lg px-6 mb-5",children:['"',l.toolData.newContent,'"']}),(0,be.jsxs)("div",{className:"w-full flex items-center px-4 space-x-6 opacity-30",children:[(0,be.jsx)("div",{className:"flex-grow h-px bg-gradient-to-r from-transparent via-interactive to-interactive/20"}),(0,be.jsx)("div",{className:"flex flex-col items-center",children:(0,be.jsx)("h3",{className:"text-sm font-medium hermes-text-normal mb-4",children:"System Status"})}),(0,be.jsx)("div",{className:"flex-grow h-px bg-gradient-to-l from-transparent via-interactive to-interactive/20"})]})]},l.id):l.role==="system"?(0,be.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,be.jsx)("div",{className:"w-full",children:(0,be.jsx)("div",{className:"flex justify-center w-full",children:(0,be.jsx)(jC,{toolData:l.toolData,isLast:d,onImageDownload:t,children:l.text})})})},l.id):l.role==="user"?(0,be.jsx)("div",{className:"flex flex-col items-end animate-in fade-in slide-in-from-bottom-2",children:(0,be.jsx)(e_,{text:l.text})},l.id):(0,be.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,be.jsx)(t_,{text:l.text})},l.id)})]})},n_=wO;var Yr=K(Bt(),1);we();var O=K(ne(),1),bO=({isVisible:e,logs:t,usage:n,onFlush:i,fileCount:o})=>{let r=(0,Yr.useRef)(null),s=un();(0,Yr.useEffect)(()=>{r.current&&e&&(r.current.scrollTop=r.current.scrollHeight)},[t,e]);let a=1e6,l=n?.totalTokenCount||0,c=n?.promptTokenCount||0,d=(0,Yr.useMemo)(()=>Math.min(100,l/a*100),[l]);return(0,O.jsxs)("div",{className:`flex-1 flex flex-col hermes-bg-secondary/95 transition-all duration-300 ease-in-out ${e?"opacity-100":"opacity-0 pointer-events-none absolute inset-0 z-50"}`,children:[(0,O.jsxs)("div",{className:"px-8 py-2.5 border-b border/10 flex justify-between items-center bg-secondary-alt/60 sticky top-0 backdrop-blur-sm z-10",children:[(0,O.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,O.jsx)("h2",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted",children:"System Kernel Log"}),(0,O.jsx)("div",{className:"flex items-center space-x-4 border-l border/20 pl-4",children:(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsx)("span",{className:"text-[8px] font-bold text-accent uppercase tracking-widest",children:"Vault:"}),(0,O.jsxs)("span",{className:"text-[9px] font-mono text-normal",children:[o," MD"]})]})})]}),(0,O.jsx)("button",{onClick:i,className:"text-[8px] text-muted hover:text-error transition-colors uppercase font-black tracking-widest",children:"Flush Log"})]}),(0,O.jsx)("div",{className:"mx-4 mt-4 mb-2",children:(0,O.jsxs)("div",{className:"bg-secondary-alt/60 border border/10 px-4 py-3 rounded-lg flex items-center justify-between",children:[(0,O.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,O.jsx)("span",{className:"text-[8px] font-black text-accent uppercase tracking-widest",children:"Context Window"}),(0,O.jsx)("div",{className:"w-24 h-1.5 bg-secondary/50 border border/10 rounded-full overflow-hidden",children:(0,O.jsx)("div",{className:"h-full interactive-bg transition-all duration-1000",style:{width:`${d}%`}})}),(0,O.jsxs)("span",{className:"text-[9px] font-mono text-muted",children:[d.toFixed(1),"%"]})]}),(0,O.jsxs)("div",{className:"flex items-center space-x-6 text-[8px] font-mono text-faint",children:[(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsx)("span",{className:"uppercase tracking-wide",children:"Prompt:"}),(0,O.jsx)("span",{className:"text-normal",children:c.toLocaleString()})]}),(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsx)("span",{className:"uppercase tracking-wide",children:"Total:"}),(0,O.jsx)("span",{className:"text-accent font-bold",children:l.toLocaleString()})]})]})]})}),(0,O.jsx)("div",{ref:r,className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-[10px] leading-relaxed",children:t.length===0?(0,O.jsx)("div",{className:"text-faint italic py-2 px-4",children:"Waiting for system signals..."}):(0,O.jsxs)(O.Fragment,{children:[t.slice(-100).map(p=>(0,O.jsxs)("div",{className:"flex space-x-3 group px-4 hover:bg-secondary/5",children:[(0,O.jsxs)("span",{className:"text-faint shrink-0",children:["[",p.timestamp.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]}),(0,O.jsxs)("div",{className:"flex flex-col",children:[(0,O.jsx)("span",{className:`${p.type==="action"?"text-accent":p.type==="error"?"hermes-error font-bold":"text-muted"}`,style:p.type==="error"?{color:"var(--hermes-error, #ef4444)"}:void 0,children:p.message}),p.type==="error"&&p.errorDetails&&(0,O.jsxs)("div",{className:"mt-1 space-y-1",children:[p.errorDetails.toolName&&(0,O.jsxs)("span",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:["Tool: ",p.errorDetails.toolName]}),p.errorDetails.apiCall&&(0,O.jsxs)("span",{className:"text-[8px] font-mono block",style:{color:"var(--hermes-error, #ef4444)"},children:["API: ",p.errorDetails.apiCall]}),(p.errorDetails.contentSize!==void 0||p.errorDetails.requestSize!==void 0||p.errorDetails.responseSize!==void 0)&&(0,O.jsxs)("div",{className:"text-[8px] font-mono space-x-2",style:{color:"var(--hermes-error, #ef4444)"},children:[p.errorDetails.contentSize!==void 0&&(0,O.jsxs)("span",{children:["Content: ",p.errorDetails.contentSize.toLocaleString()," bytes"]}),p.errorDetails.requestSize!==void 0&&(0,O.jsxs)("span",{children:["Request: ",p.errorDetails.requestSize.toLocaleString()," bytes"]}),p.errorDetails.responseSize!==void 0&&(0,O.jsxs)("span",{children:["Response: ",p.errorDetails.responseSize.toLocaleString()," bytes"]})]}),p.errorDetails.content&&(0,O.jsxs)("div",{className:"text-[8px] font-mono p-1 rounded max-h-16 overflow-y-auto",style:{color:"var(--hermes-error, #ef4444)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.2)"},children:[(0,O.jsx)("div",{className:"font-bold mb-1",style:{color:"var(--hermes-error, #ef4444)"},children:"Content Preview:"}),(0,O.jsx)("div",{className:"whitespace-pre-wrap break-all",children:p.errorDetails.content})]}),p.errorDetails.stack&&(0,O.jsxs)("details",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:[(0,O.jsx)("summary",{className:"cursor-pointer",children:"Stack Trace"}),(0,O.jsx)("div",{className:"mt-1 whitespace-pre-wrap p-1 rounded",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.1)"},children:p.errorDetails.stack})]})]}),p.duration!==void 0&&(0,O.jsxs)("span",{className:"text-[8px] text-faint uppercase font-bold tracking-tight mt-0.5",children:["Process completed in ",p.duration,"ms"]})]})]},p.id)),t.length>100&&(0,O.jsxs)("div",{className:"text-muted italic text-[9px] pt-2 px-4 border-t/10 text-center",children:["... showing last 100 of ",t.length," log entries"]})]})}),(0,O.jsxs)("div",{className:"px-8 py-1.5 border-t/10 bg-tertiary/40 flex justify-between items-center text-xs text-faint shrink-0",children:[(0,O.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,O.jsxs)("span",{children:["Environment: ",(0,O.jsx)("span",{className:s?"text-success":"text-warning",children:s?"Obsidian":"Standalone"})]}),(0,O.jsxs)("span",{children:["Buffer: ",(0,O.jsxs)("span",{className:"text-muted",children:[t.length," entries"]})]})]}),(0,O.jsx)("div",{className:"text-faint",children:"Hermes v1.1.0"})]})]})},i_=bO;var Zc=K(ne(),1),NO=({showKernel:e,transcripts:t,hasSavedConversation:n,onRestoreConversation:i,logs:o,usage:r,onFlushLogs:s,fileCount:a,onImageDownload:l})=>(0,Zc.jsx)("main",{className:"flex-1 min-h-0 flex flex-col",children:e?(0,Zc.jsx)(i_,{isVisible:!0,logs:o,usage:r,onFlush:s,fileCount:a}):(0,Zc.jsx)(n_,{transcripts:t,hasSavedConversation:n,onRestoreConversation:i,onImageDownload:l})}),o_=NO;var wo=K(Bt(),1);ht();var Xe=K(ne(),1),RO=({inputText:e,setInputText:t,onSendText:n,isListening:i,onStartSession:o,onStopSession:r,status:s,activeSpeaker:a,volume:l,hasApiKey:c})=>{let[d,p]=(0,wo.useState)([]),[m,h]=(0,wo.useState)(-1),g=(0,wo.useRef)(null);return(0,wo.useEffect)(()=>{let x=Rn();p(x)},[]),(0,Xe.jsx)("footer",{className:`h-[100px] pb-5 px-8 backdrop-blur-2xl hermes-border-t flex items-center justify-center shrink-0 ${i?"hermes-footer-bg-listening":"hermes-footer-bg"}`,children:(0,Xe.jsxs)("div",{className:"flex items-center space-x-6 w-full max-w-5xl",children:[(0,Xe.jsxs)("form",{onSubmit:n,className:"flex-grow flex items-center",children:[(0,Xe.jsx)("input",{ref:g,type:"text",value:e,onChange:x=>t(x.target.value),onKeyDown:x=>{if(x.key==="ArrowUp"){if(x.preventDefault(),d.length>0){let y=m<d.length-1?m+1:d.length-1;h(y),t(d[d.length-1-y]),setTimeout(()=>{g.current&&g.current.select()},0)}}else if(x.key==="ArrowDown")if(x.preventDefault(),m>0){let y=m-1;h(y),t(d[d.length-1-y])}else m===0&&(h(-1),t(""));else x.key,h(-1)},placeholder:c?i?"Voice session active - speak to interact":"Press Ctrl+Shift+L for starting/stopping talking to your vault assistant":"API key required...",disabled:!c||i,className:`flex-1 h-[52px] hermes-input-bg hermes-input-text hermes-input-border border rounded-lg px-4 text-sm focus:outline-none focus:hermes-input-border-focus ${!c||i?"opacity-50 cursor-not-allowed":""}`}),(0,Xe.jsx)("button",{type:"submit",disabled:!c||!e.trim(),className:`flex items-center justify-center w-[52px] h-[52px] ml-2 transition-colors ${c&&e.trim()?"hermes-text-muted hermes-hover:text-normal":"opacity-50 cursor-not-allowed"}`,children:(0,Xe.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Xe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),(0,Xe.jsx)("div",{className:"shrink-0 flex items-center",children:i?(0,Xe.jsx)("button",{onClick:r,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${a==="user"?"bg-red-500 text-white shadow-lg shadow-red-500/50 animate-pulse hover:scale-110 hover:bg-red-600":"bg-red-500 text-white hover:scale-110 hover:bg-red-600"}`,title:"Stop Listening",children:(0,Xe.jsx)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Xe.jsx)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})})}):(0,Xe.jsx)("button",{onClick:o,disabled:s==="CONNECTING"||!c,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${c?a==="user"?"bg-[var(--hermes-text-accent,#7c3aed)] text-white shadow-lg shadow-[var(--hermes-text-accent,#7c3aed)]/50 animate-pulse hover:scale-110 hover:bg-[var(--hermes-text-accent-dark,#6d28d9)]":"bg-[var(--hermes-brand,#6366f1)] text-white hover:scale-110 hover:bg-[var(--hermes-brand-dark,#4f46e5)]":"opacity-50 cursor-not-allowed bg-gray-200 dark:bg-gray-700"}`,title:c?"Start Voice Session":"API key required",children:(0,Xe.jsxs)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Xe.jsx)("path",{d:"M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"}),(0,Xe.jsx)("path",{d:"M12 14c-4.42 0-8 2-8 5v1h16v-1c0-3-3.58-5-8-5z"}),(0,Xe.jsx)("path",{className:"opacity-40",d:"M19 8c1.33 1.33 1.33 3.67 0 5"}),(0,Xe.jsx)("path",{className:"opacity-70",d:"M21 6c2 2 2 6 0 8"})]})})})]})})},r_=RO;var vy=K(Bt(),1),ee=K(ne(),1),IO=({onApiKeySave:e})=>{let[t,n]=(0,vy.useState)(""),[i,o]=(0,vy.useState)(!1);return(0,ee.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:(0,ee.jsxs)("div",{className:"max-w-2xl text-center space-y-6",children:[(0,ee.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 flex items-center justify-center rounded-full bg-blue-500/10",children:(0,ee.jsx)("svg",{className:"w-10 h-10 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),(0,ee.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Hermes"}),(0,ee.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Your Obsidian Interactive Voice Assistant \u2014 the bridge between you and your notes"}),(0,ee.jsx)("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"To use Hermes Voice Assistant, you need a Gemini API key from Google AI Studio. The API key allows the assistant to connect to Google's language models."}),(0,ee.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-left",children:[(0,ee.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"How to get your API key:"}),(0,ee.jsxs)("ol",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"1"}),(0,ee.jsxs)("span",{children:["Visit ",(0,ee.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline",children:"Google AI Studio"})]})]}),(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"2"}),(0,ee.jsx)("span",{children:"Sign in with your Google account"})]}),(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"3"}),(0,ee.jsx)("span",{children:'Click "Create API Key" and give it a name'})]}),(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"4"}),(0,ee.jsx)("span",{children:"Copy your API key"})]}),(0,ee.jsxs)("li",{className:"flex items-start",children:[(0,ee.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"5"}),(0,ee.jsx)("span",{children:"Paste it in the Settings panel"})]})]})]}),(0,ee.jsxs)("div",{className:"space-y-4",children:[(0,ee.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,ee.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Gemini API Key"}),(0,ee.jsx)("input",{type:"password",value:t,onChange:s=>n(s.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full h-12 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-4 text-sm text-gray-900 dark:text-gray-100 outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono placeholder-gray-500 dark:placeholder-gray-400"})]}),(0,ee.jsx)("button",{onClick:async()=>{if(!!t.trim()){o(!0);try{await e(t.trim()),n("")}catch(s){console.error("Failed to save API key:",s)}finally{o(!1)}}},disabled:!t.trim()||i,className:`w-full py-4 px-8 font-semibold rounded-lg transition-colors text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] ${t.trim()&&!i?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:i?"Saving...":"Save API Key"})]}),(0,ee.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:[(0,ee.jsx)("a",{href:"https://github.com/symunona/obsidian-haiku",children:"Go see me on github"}),". Or buy me a tea."]})]})})},s_=IO;var bo=K(Bt(),1);ht();var H=K(ne(),1),MO=({conversation:e,onRestore:t,onDelete:n})=>{let[i,o]=(0,bo.useState)(!1),r=e.conversation.filter(g=>g.role==="user"||g.role==="model").length,s=e.conversation.map(g=>g.timestamp).filter(g=>g>0),a=s.length>1?Math.round((s[s.length-1]-s[0])/1e3):0,l=new Date(e.archivedAt),c=l.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),d=l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),p=g=>{if(g<60)return`${g}s`;let S=Math.floor(g/60),x=g%60;if(S<60)return`${S}m ${x}s`;let y=Math.floor(S/60),v=S%60;return`${y}h ${v}m`},m=()=>{t&&t(e.conversation)},h=()=>{n(e.key)};return(0,H.jsxs)("div",{className:"border border-gray-700 rounded-lg overflow-hidden hermes-bg-secondary-alt shadow-lg shadow-black/20 hover:shadow-xl hover:shadow-black/30 transition-all duration-200",children:[(0,H.jsx)("div",{className:"p-4 cursor-pointer hermes-hover:bg-secondary/10 transition-colors",onClick:()=>o(!i),children:(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsxs)("div",{className:"flex-1",children:[(0,H.jsx)("div",{className:"font-semibold hermes-text-normal mb-1",children:e.title||e.summary.split(`
`)[0]}),e.tags&&e.tags.length>0&&(0,H.jsx)("div",{className:"flex flex-wrap gap-1 mb-1",children:e.tags.slice(0,3).map((g,S)=>(0,H.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded hermes-bg-secondary hermes-text-muted",children:g},S))}),(0,H.jsxs)("div",{className:"flex items-center gap-4 text-xs hermes-text-faint",children:[(0,H.jsxs)("span",{children:[c," at ",d]}),(0,H.jsx)("span",{children:"\u2022"}),(0,H.jsxs)("span",{children:[r," messages"]}),(0,H.jsx)("span",{children:"\u2022"}),(0,H.jsx)("span",{children:p(a)})]})]}),(0,H.jsxs)("div",{className:"flex items-center gap-2",children:[(0,H.jsx)("button",{onClick:g=>{g.stopPropagation(),h()},className:"p-2 border border-red-600/30 text-red-600/60 rounded-md hover:border-red-600/50 hover:text-red-600/80 transition-colors flex items-center gap-1",title:"Delete conversation",children:(0,H.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,H.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,H.jsxs)("button",{onClick:g=>{g.stopPropagation(),m()},className:"p-2 hermes-bg-primary text-white rounded-md hermes-hover:bg-primary/80 transition-colors flex items-center gap-1",title:"Restore conversation",children:[(0,H.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,H.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,H.jsx)("span",{className:"text-sm",children:"Restore"})]}),(0,H.jsx)("div",{className:`transition-transform duration-200 ${i?"rotate-180":""}`,children:(0,H.jsx)("svg",{className:"w-5 h-5 hermes-text-faint",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,H.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),i&&(0,H.jsxs)("div",{className:"px-4 pb-4 border-t border-gray-700",children:[(0,H.jsxs)("div",{className:"pt-4",children:[(0,H.jsx)("h4",{className:"text-sm font-medium hermes-text-normal mb-2",children:"Summary"}),(0,H.jsx)("div",{className:"text-sm hermes-text-muted whitespace-pre-wrap",children:e.summary})]}),(0,H.jsxs)("div",{className:"mt-4",children:[(0,H.jsx)("h4",{className:"text-sm font-medium hermes-text-normal mb-2",children:"Metadata"}),(0,H.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,H.jsxs)("div",{children:[(0,H.jsx)("span",{className:"hermes-text-faint",children:"Date:"}),(0,H.jsx)("span",{className:"ml-2 hermes-text-muted",children:c})]}),(0,H.jsxs)("div",{children:[(0,H.jsx)("span",{className:"hermes-text-faint",children:"Time:"}),(0,H.jsx)("span",{className:"ml-2 hermes-text-muted",children:d})]}),(0,H.jsxs)("div",{children:[(0,H.jsx)("span",{className:"hermes-text-faint",children:"Messages:"}),(0,H.jsx)("span",{className:"ml-2 hermes-text-muted",children:r})]}),(0,H.jsxs)("div",{children:[(0,H.jsx)("span",{className:"hermes-text-faint",children:"Duration:"}),(0,H.jsx)("span",{className:"ml-2 hermes-text-muted",children:p(a)})]})]})]})]})]})},kO=({isActive:e,onRestoreConversation:t})=>{let[n,i]=(0,bo.useState)([]),[o,r]=(0,bo.useState)(""),[s,a]=(0,bo.useState)(!1);(0,bo.useEffect)(async()=>{e&&await(async()=>{try{a(!0);let p=await Cr();i(p.sort((m,h)=>h.archivedAt-m.archivedAt))}catch(p){console.error("Failed to load history:",p)}finally{a(!1)}})()},[e]);let l=n.filter(d=>{let p=o.toLowerCase(),m=d.title?.toLowerCase().includes(p),h=d.summary?.toLowerCase().includes(p),g=d.tags?.some(S=>S.toLowerCase().includes(p));return m||h||g}),c=async d=>{try{await Yx(d),i(p=>p.filter(m=>m.key!==d))}catch(p){console.error("Failed to delete conversation:",p)}};return e?(0,H.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[(0,H.jsx)("div",{className:"p-4 hermes-border-b",children:(0,H.jsx)("div",{className:"relative",children:(0,H.jsx)("input",{type:"text",placeholder:"Search conversations...",value:o,onChange:d=>r(d.target.value),className:"w-full px-4 py-2 pl-10 hermes-bg-tertiary border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent hermes-text-normal placeholder-hermes-text-faint"})})}),(0,H.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:s?(0,H.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,H.jsx)("div",{className:"hermes-text-muted",children:"Loading history..."})}):l.length===0?(0,H.jsx)("div",{className:"text-center py-8",children:(0,H.jsx)("div",{className:"hermes-text-muted",children:o?"No conversations found matching your search.":"No archived conversations yet."})}):(0,H.jsx)("div",{className:"space-y-3",children:l.map(d=>(0,H.jsx)(MO,{conversation:d,onRestore:t,onDelete:c},d.key))})})]}):null},a_=kO;var nn=K(ne(),1),DO=e=>{if(e instanceof Error)return e.stack},l_=(0,L.forwardRef)((e,t)=>{let n=(0,L.useMemo)(()=>je()??{},[]);(0,L.useEffect)(()=>{let k=Rn();_(!!k&&k.length>0)},[]);let[i,o]=(0,L.useState)("DISCONNECTED"),[r,s]=(0,L.useState)([]),[a,l]=(0,L.useState)(""),[c,d]=(0,L.useState)(!1),[p,m]=(0,L.useState)(!1),[h,g]=(0,L.useState)(!1),[S,x]=(0,L.useState)("none"),[y,v]=(0,L.useState)(0),[T,A]=(0,L.useState)([]),C=(0,L.useRef)([]);(0,L.useEffect)(()=>{C.current=T},[T]);let[I,_]=(0,L.useState)(!1),[M,R]=(0,L.useState)(()=>n.voiceName||"Zephyr"),[N,$]=(0,L.useState)(()=>n.customContext||""),[Te,me]=(0,L.useState)(()=>n.systemInstruction||ri),[V,at]=(0,L.useState)(()=>n.manualApiKey||""),[li,Nt]=(0,L.useState)(()=>n.serperApiKey||""),[yn,tf]=(0,L.useState)(()=>n.currentFolder||"/"),[No,nf]=(0,L.useState)(()=>n.currentNote||null),[xy,of]=(0,L.useState)(()=>n.totalTokens||0),[p_,rf]=(0,L.useState)({totalTokenCount:n.totalTokens||0}),[m_,Ay]=(0,L.useState)(0),[Jr,Ro]=(0,L.useState)(!1),[sf,h_]=(0,L.useState)(()=>`topic-${Date.now()}-${Math.random().toString(36).slice(2,8)}`),on=(0,L.useRef)(sf);(0,L.useEffect)(()=>{on.current=sf},[sf]);let[Ey,g_]=(0,L.useState)(0),[Cy,y_]=(0,L.useState)(0),af=(0,L.useRef)(0),lf=(0,L.useRef)(0);(0,L.useEffect)(()=>{af.current=Ey},[Ey]),(0,L.useEffect)(()=>{lf.current=Cy},[Cy]);let Ln=(0,L.useRef)(null),rn=(0,L.useRef)(null),_y=(0,L.useMemo)(()=>un(),[]),ie=(0,L.useCallback)((k,U="info",P,G)=>{s(q=>[...q,{id:Math.random().toString(36).slice(2,11),message:k,timestamp:new Date,type:U,duration:P,errorDetails:G}])},[]),wy=k=>{let U={id:`mode-${Date.now()}`,role:"system",text:k==="voice"?"Voice interface activated":"Text interface activated",isComplete:!0,timestamp:Date.now(),topicId:on.current,toolData:{name:"mode_switch",filename:"",status:"success"}};A(P=>[...P,U])},by=k=>C.current.slice(k).filter(U=>U.role!=="system"||U.toolData?.name==="mode_switch"),v_=k=>{if(k.length===0)return"";let U=k.map(P=>{let G=P.role==="user"?"User":P.role==="model"?"Assistant":"System",q=P.text.replace(/[\n\r\t]/g," ").replace(/[^\w\s.,!?;:'"-]/g,"");return`${G}: ${q}`});return`Previous conversation (${k.length} messages): ${U.join(" | ")}`},S_=k=>k.filter(U=>U.role==="user"||U.role==="model").map(U=>({role:U.role,parts:[{text:U.text}]})),Ny=k=>{if(k)A(k),_(!1),ie("Archived conversation restored","info"),m(!1);else{let U=Rn();if(U&&U.length>0){let P=U.map((G,q)=>({id:`chat-${q}`,role:"user",text:G,isComplete:!0,timestamp:Date.now()-(U.length-q)*1e3,topicId:on.current}));A(P),_(!1),ie("Chat history restored","info")}}},T_=()=>{A([{id:"welcome-init",role:"system",text:"HERMES INITIALIZED.",isComplete:!0,timestamp:Date.now(),topicId:on.current}]),_(!1),ie("Conversation reset","info")};(0,L.useEffect)(()=>{let k=T[T.length-1];if(k?.role==="system"&&k.toolData?.name==="topic_switch"){console.warn("[HISTORY] EVENT: topic_switch detected - Topic switch triggered");let U=k.topicId||on.current,P=`topic-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;h_(P),console.warn(`[HISTORY] Topic switch: ${U} -> ${P}`);let G=T.filter(se=>se.id!=="welcome-init"&&se.id!==k.id&&se.topicId===U),he=je()?.chatHistoryFolder||"chat-history",Ie={transcripts:G,chatHistoryFolder:he,textInterface:rn.current,topicId:U};oy(Ie).then(se=>{if(se.success)se.skipped?ie(se.message,"info"):(ie(se.message,"action"),A(Be=>[...Be,{id:`archived-${Date.now()}`,role:"system",text:`\u{1F4C1} Topic switch - conversation archived: ${se.message}`,timestamp:Date.now(),isComplete:!0,topicId:P}]));else{let Be={toolName:"persistConversationHistory",content:`History length: ${G.length} entries`,contentSize:JSON.stringify(G).length,stack:se.error,apiCall:"archiveConversation"};ie(`Persistence Failure: ${se.message}`,"error",void 0,Be)}}).catch(se=>{let Be=B(se),Rt={toolName:"persistConversationHistory",content:`History length: ${G.length} entries`,contentSize:JSON.stringify(G).length,stack:Be,apiCall:"archiveConversation"};ie(`Persistence Failure: ${Be}`,"error",void 0,Rt)})}},[T,ie]),(0,L.useEffect)(()=>{(async()=>{try{await Kx();let k=In();Ay(k.length),ie("HERMES_OS: Modules online.","info");let U=Rn();T.length===0&&(!U||U.length===0)&&A([{id:"welcome-init",role:"system",text:"HERMES INITIALIZED.",isComplete:!0,timestamp:Date.now(),topicId:on.current}])}catch(k){ie(`Initialization failed: ${B(k)}`,"error")}})()},[ie]),(0,L.useEffect)(()=>{su({voiceName:M,customContext:N,systemInstruction:Te,manualApiKey:V,serperApiKey:li,currentFolder:yn,currentNote:No,totalTokens:xy})},[M,N,Te,V,li,yn,No,xy]),(0,L.useEffect)(()=>{let U=!(V||"").trim();Ro(U)},[V]),(0,L.useEffect)(()=>{let k=()=>{(async()=>{let G=await au();G&&(R(G.voiceName||"Zephyr"),$(G.customContext||""),me(G.systemInstruction||ri),at(G.manualApiKey||""),Nt(G.serperApiKey||""),(G.manualApiKey||"").trim()&&Jr&&(Ro(!1),ie("API key configured successfully","success")))})()},U=G=>{R(G.voiceName||"Zephyr"),$(G.customContext||""),me(G.systemInstruction||ri),at(G.manualApiKey||""),Nt(G.serperApiKey||""),(G.manualApiKey||"").trim()&&Jr&&(Ro(!1),ie("API key configured successfully","success"))};window.hermesSettingsUpdate=U;let P=setInterval(k,2e3);return()=>{clearInterval(P),delete window.hermesSettingsUpdate}},[Jr,ie]);let x_=async()=>{i==="CONNECTED"?wa():await uf()};(0,L.useImperativeHandle)(t,()=>({startSession:uf,stopSession:wa,toggleSession:x_})),(0,L.useEffect)(()=>()=>{Ln.current&&(Ln.current.stop(),Ln.current=null)},[]);let Kr=(0,L.useCallback)(async()=>{let k=C.current;console.warn("[HISTORY] EVENT: end_conversation - Session ending (archiveCurrentConversation)");let P=je()?.chatHistoryFolder||"chat-history",G={transcripts:k,chatHistoryFolder:P,textInterface:rn.current};try{let q=await oy(G);if(q.success)q.skipped?ie(q.message,"info"):(ie(q.message,"action"),A(he=>[...he,{id:`archived-${Date.now()}`,role:"system",text:`\u{1F4C1} Conversation archived: ${q.message}`,timestamp:Date.now(),isComplete:!0,topicId:on.current}]));else{let he={toolName:"persistConversationHistory",content:`History length: ${k.length} entries`,contentSize:JSON.stringify(k).length,stack:q.error,apiCall:"archiveConversation"};ie(`Persistence Failure: ${q.message}`,"error",void 0,he)}}catch(q){let he=B(q),Ie={toolName:"persistConversationHistory",content:`History length: ${k.length} entries`,contentSize:JSON.stringify(k).length,stack:he,apiCall:"archiveConversation"};ie(`Persistence Failure: ${he}`,"error",void 0,Ie)}},[ie]),$i=(0,L.useCallback)((k,U)=>{A(P=>{if(U?.id){let G=P.findIndex(q=>q.toolData?.id===U.id);if(G!==-1){let q=[...P];return q[G]={...q[G],text:k,toolData:{...q[G].toolData,...U,status:U.status||"success"}},q}}return[...P,{id:"sys-"+Date.now(),role:"system",text:k,isComplete:!0,toolData:U,timestamp:Date.now(),topicId:on.current}]}),Ay(In().length)},[]),A_=(0,L.useCallback)(async(k,U)=>{try{return await To("download_image",{imageUrl:k.url,title:k.title,query:k.query||k.originalQuery||"image",index:U+1},{onLog:()=>{},onSystem:$i,onFileState:()=>{}})}catch(P){throw console.error("Failed to download image:",P),P}},[$i]),E_=(0,L.useMemo)(()=>({onStatusChange:k=>{o(k),k==="CONNECTED"?ie("UPLINK ESTABLISHED.","info"):k==="DISCONNECTED"&&(x("none"),v(0))},onLog:(k,U,P,G)=>ie(k,U,P,G),onTranscription:(k,U,P)=>{x(P?"none":k),A(G=>{let q=G.reduceRight((Ie,se,Be)=>Ie!==-1?Ie:se.role===k&&!se.isComplete?Be:-1,-1);if(q!==-1){let Ie=[...G];return Ie[q]={...Ie[q],text:U||Ie[q].text,isComplete:P},Ie}let he={id:Math.random().toString(36).slice(2,11),role:k,text:U,isComplete:P,timestamp:Date.now(),topicId:on.current};return[...G,he]})},onSystemMessage:$i,onInterrupted:()=>{x("none"),v(0)},onFileStateChange:(k,U)=>{tf(k);let P=Array.isArray(U)?U:U?[U]:[];P.length>0&&nf(P[P.length-1])},onUsageUpdate:k=>{rf(k);let U=k.totalTokenCount;U!==void 0&&of(U)},onVolume:k=>v(k),onArchiveConversation:Kr}),[ie,_y,$i,Kr]);(0,L.useEffect)(()=>{let k=V.trim();k&&!rn.current&&(rn.current=new ma({onLog:(U,P,G,q)=>ie(U,P,G,q),onTranscription:(U,P,G)=>{A(q=>{let he=q.reduceRight((se,Be,Rt)=>se!==-1?se:Be.role===U&&!Be.isComplete?Rt:-1,-1);if(he!==-1){let se=[...q];if(se[he]={...se[he],text:P||se[he].text,isComplete:G},U==="user"&&G&&P.trim()){let Rt=[...Rn(),P];nm(Rt)}return se}let Ie={id:Math.random().toString(36).slice(2,11),role:U,text:P,isComplete:G,timestamp:Date.now(),topicId:on.current};if(U==="user"&&G&&P.trim()){let Be=[...Rn(),P];nm(Be)}return[...q,Ie]})},onSystemMessage:$i,onFileStateChange:(U,P)=>{tf(U);let G=Array.isArray(P)?P:P?[P]:[];G.length>0&&nf(G[G.length-1])},onUsageUpdate:U=>{rf(U);let P=U.totalTokenCount;P!==void 0&&of(P)},onArchiveConversation:Kr}),rn.current.initialize(k,{voiceName:M,customContext:N,systemInstruction:Te},{folder:yn,note:No}))},[V,M,N,Te,yn,No,ie,$i,Kr]);let uf=async()=>{try{console.warn("[HISTORY] EVENT: start_conversation - Session started");let k=V.trim();if(!k){Ro(!0);return}window.aistudio&&!await window.aistudio.hasSelectedApiKey()&&await window.aistudio.openSelectKey(),wy("voice");let U=by(af.current),P=U.length>0?v_(U):void 0;P&&ie(`[CONTEXT SYNC] Including ${U.length} messages in voice session system prompt (${P.length} chars)`,"info"),Ln.current=new Uc(E_),await Ln.current.start(k,{voiceName:M,customContext:N,systemInstruction:Te},{folder:yn,note:No},P),g_(C.current.length),af.current=C.current.length}catch(k){let U={toolName:"GeminiVoiceAssistant",content:`Voice Name: ${M}
Custom Context: ${N}
System Instruction: ${Te}`,contentSize:M.length+N.length+Te.length,stack:DO(k),apiCall:"startSession"};ie(`Uplink Error: ${B(k)}`,"error",void 0,U),o("ERROR")}},wa=()=>{Ln.current&&(Ln.current.stop(),Ln.current=null,x("none"),v(0))},C_=k=>{if(k.preventDefault(),!a.trim())return;let U=a.trim();if(l(""),i==="CONNECTED"&&Ln.current){ie("[CONTEXT SYNC] Text input ignored - voice session active","info");return}wy("text");let P=V.trim();if(!P){Ro(!0);return}rn.current||(rn.current=new ma({onLog:(q,he,Ie,se)=>ie(q,he,Ie,se),onTranscription:(q,he,Ie)=>{A(se=>{let Be=se.reduceRight((Rt,Ry,__)=>Rt!==-1?Rt:Ry.role===q&&!Ry.isComplete?__:-1,-1);if(Be!==-1){let Rt=[...se];return Rt[Be]={...Rt[Be],text:he||Rt[Be].text,isComplete:Ie},Rt}return[...se,{id:Math.random().toString(36).slice(2,11),role:q,text:he,isComplete:Ie,timestamp:Date.now(),topicId:on.current}]})},onSystemMessage:$i,onFileStateChange:(q,he)=>{tf(q);let Ie=Array.isArray(he)?he:he?[he]:[];Ie.length>0&&nf(Ie[Ie.length-1])},onUsageUpdate:q=>{rf(q),q.totalTokenCount!==void 0&&of(q.totalTokenCount)},onArchiveConversation:Kr}),rn.current.initialize(P,{voiceName:M,customContext:N,systemInstruction:Te},{folder:yn,note:No}));let G=by(lf.current);if(G.length>0&&rn.current){let q=S_(G);ie(`[CONTEXT SYNC] Injecting ${G.length} messages to text interface`,"info");try{rn.current.injectHistory(q),ie("[CONTEXT SYNC] Successfully injected context to text interface","info")}catch(he){ie(`[CONTEXT SYNC] Failed to inject context to text: ${B(he)}`,"error"),console.error("[CONTEXT SYNC] Text injection failed:",he,"Contents were:",q)}}y_(C.current.length),lf.current=C.current.length,rn.current.sendMessage(U)};return(0,nn.jsx)("div",{className:`hermes-root flex flex-col overflow-hidden ${_y?"":"standalone"}`,children:Jr?(0,nn.jsx)(s_,{onApiKeySave:k=>{at(k),ie("API key saved successfully","success"),Ro(!1)}}):(0,nn.jsxs)(nn.Fragment,{children:[(0,nn.jsx)(DC,{isOpen:c,onClose:()=>d(!1),voiceName:M,setVoiceName:R,customContext:N,setCustomContext:$,systemInstruction:Te,setSystemInstruction:me,manualApiKey:V,setManualApiKey:at,serperApiKey:li,setSerperApiKey:Nt,onUpdateApiKey:()=>window.aistudio?.openSelectKey()}),(0,nn.jsx)(kC,{status:i,showLogs:h,onToggleLogs:()=>g(!h),onOpenSettings:()=>d(!0),onOpenHistory:()=>m(!p),isListening:i==="CONNECTED",onStopSession:wa,onResetConversation:T_,transcripts:T}),p?(0,nn.jsx)(a_,{isActive:!0,onRestoreConversation:Ny}):(0,nn.jsx)(o_,{showKernel:h,transcripts:T,hasSavedConversation:I,onRestoreConversation:Ny,logs:r,usage:p_,onFlushLogs:()=>s([]),fileCount:m_,onImageDownload:A_}),(0,nn.jsx)(r_,{inputText:a,setInputText:l,onSendText:C_,isListening:i==="CONNECTED",onStartSession:uf,onStopSession:wa,status:i,activeSpeaker:S,volume:y,hasApiKey:!Jr})]})})});l_.displayName="App";var u_=l_;var Ty=K(ne(),1),zi="hermes-voice-assistant",Wc=class extends c_.ItemView{constructor(n){super(n);this.root=null;this.appRef=Sy.default.createRef()}getViewType(){return zi}getDisplayText(){return"Hermes voice assistant"}getIcon(){return"mic-vocal"}async onOpen(){let n=this.containerEl.children[1];n.empty();let i=n.createDiv({cls:"hermes-root obsidian"});this.root=(0,f_.createRoot)(i),await this.root.render((0,Ty.jsx)(Sy.default.StrictMode,{children:(0,Ty.jsx)(u_,{ref:this.appRef})}))}async onClose(){this.root&&(await this.root.unmount(),this.root=null)}startSession(){this.appRef.current&&this.appRef.current.startSession&&this.appRef.current.startSession()}stopSession(){this.appRef.current&&this.appRef.current.stopSession&&this.appRef.current.stopSession()}toggleSession(){this.appRef.current&&this.appRef.current.toggleSession&&this.appRef.current.toggleSession()}};ht();var gn=require("obsidian");var UO=["Kore","Puck","Charon","Fenrir","Zephyr"],_a={voiceName:"Zephyr",customContext:"",systemInstruction:"",manualApiKey:"",serperApiKey:"",chatHistoryFolder:"chat-history"},jc=class extends gn.PluginSettingTab{constructor(n,i){super(n,i);this.plugin=i}display(){let{containerEl:n}=this;n.empty(),n.classList.add("hermes-settings"),new gn.Setting(n).setName("Voice").setDesc("Select the voice persona for the assistant").addDropdown(d=>{UO.forEach(p=>{d.addOption(p,p)}),d.setValue(this.plugin.settings?.voiceName||_a.voiceName).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.voiceName=p,await this.plugin.saveSettings())})}),new gn.Setting(n).setName("Custom context").setDesc("Define specific behaviors or rules for the assistant (added to every session)").addTextArea(d=>{d.setPlaceholder("Define specific behaviors, personalities, or rules for the AI to follow in all interactions").setValue(this.plugin.settings?.customContext||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.customContext=p,await this.plugin.saveSettings())}),d.inputEl.rows=4,d.inputEl.cols=50});let i=document.createDocumentFragment();i.createSpan({text:"Core logic instructions for the ai assistant"}),i.createEl("br");let o=i.createEl("a",{text:"Reset to default"});o.addClass("hermes-reset-link"),o.addEventListener("click",()=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=ri,this.plugin.saveSettings().then(()=>{this.display()}))}),new gn.Setting(n).setName("System instructions").setDesc(i).addTextArea(d=>{d.setPlaceholder("Core logic instructions").setValue(this.plugin.settings?.systemInstruction||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=p,await this.plugin.saveSettings())}),d.inputEl.rows=6,d.inputEl.cols=50}),new gn.Setting(n).setName("Chat history folder").setDesc("Folder path where chat history will be saved").addText(d=>{d.setPlaceholder("Chat history, default chat-history").setValue(this.plugin.settings?.chatHistoryFolder||_a.chatHistoryFolder).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.chatHistoryFolder=p,await this.plugin.saveSettings())})}),new gn.Setting(n).setName("API authentication").setHeading(),new gn.Setting(n).setName("Gemini API key").setDesc("Enter your gemini API key for the voice assistant").addText(d=>{d.setPlaceholder("Enter your gemini API key").setValue(this.plugin.settings?.manualApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.manualApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let r=document.createDocumentFragment();r.createSpan({text:"API key for image search. Get 2,500 free credits at "}),r.createEl("a",{href:"https://serper.dev/",text:"Serperdev"}).setAttr("target","_blank"),new gn.Setting(n).setName("Serper API key").setDesc(r).addText(d=>{d.setPlaceholder("Enter your serper API key").setValue(this.plugin.settings?.serperApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.serperApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let a=document.createDocumentFragment(),l=a.createSpan({text:"API keys are handled via manual entry"}),c=a.createEl("a",{href:"https://ai.google.dev/gemini-api/docs/billing",text:"Learn more about billing."});c.setAttr("target","_blank"),l.append(c),new gn.Setting(n).setDesc(a)}};var ef=class extends d_.Plugin{constructor(){super(...arguments);this.settings=_a}async onload(){Bx(this),await this.loadSettings();let n=await zx();n?(this.settings={...this.settings,...n},(!this.settings.systemInstruction||this.settings.systemInstruction.trim()==="")&&(this.settings.systemInstruction=ri),await this.saveSettings()):(this.settings.systemInstruction=ri,await this.saveSettings()),this.addSettingTab(new jc(this.app,this)),this.registerView(zi,i=>new Wc(i)),this.addRibbonIcon("mic-vocal","Hermes voice assistant",async()=>{await this.activateView()}),this.addCommand({id:"open-hermes-voice",name:"Open hermes assistant",callback:async()=>{await this.activateView()}}),this.addCommand({id:"start-hermes-conversation",name:"Start hermes conversation",callback:async()=>{await this.startConversation()}}),this.addCommand({id:"stop-hermes-conversation",name:"Stop hermes conversation",callback:()=>{this.stopConversation()}}),this.addCommand({id:"toggle-hermes-conversation",name:"Toggle hermes conversation",callback:async()=>{await this.toggleConversation()}})}async activateView(){let{workspace:n}=this.app,i=null,o=n.getLeavesOfType(zi);o.length>0?i=o[0]:(i=n.getRightLeaf(!1),i&&await i.setViewState({type:zi,active:!0})),i&&await n.revealLeaf(i)}async startConversation(){await this.activateView();let{workspace:n}=this.app,i=n.getLeavesOfType(zi);if(i.length>0){let r=i[0].view;if(r.startSession)r.startSession();else{let s=r.containerEl.querySelector('[data-action="start-session"]');s instanceof HTMLElement&&s.click()}}}stopConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(zi);if(i.length>0){let r=i[0].view;if(r.stopSession)r.stopSession();else{let s=r.containerEl.querySelector('[data-action="stop-session"]');s instanceof HTMLElement&&s.click()}}}async toggleConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(zi);if(i.length>0){let r=i[0].view;r.toggleSession?r.toggleSession():r.containerEl.querySelector('[data-action="stop-session"]')instanceof HTMLElement?this.stopConversation():await this.startConversation()}}onunload(){}async loadSettings(){this.settings=Object.assign({},_a,await this.loadData())}async saveSettings(){await su(this.settings),typeof window<"u"&&window.hermesSettingsUpdate&&window.hermesSettingsUpdate(this.settings)}};
/*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT */
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
