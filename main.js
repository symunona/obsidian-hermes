var sE=Object.create;var Ss=Object.defineProperty;var rE=Object.getOwnPropertyDescriptor;var aE=Object.getOwnPropertyNames;var lE=Object.getPrototypeOf,uE=Object.prototype.hasOwnProperty;var cE=(t,e,n)=>e in t?Ss(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oo=(t,e)=>()=>(t&&(e=t(t=0)),e);var rn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ee=(t,e)=>{for(var n in e)Ss(t,n,{get:e[n],enumerable:!0})},qm=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of aE(e))!uE.call(t,o)&&o!==n&&Ss(t,o,{get:()=>e[o],enumerable:!(i=rE(e,o))||i.enumerable});return t};var $=(t,e,n)=>(n=t!=null?sE(lE(t)):{},qm(e||!t||!t.__esModule?Ss(n,"default",{value:t,enumerable:!0}):n,t)),fE=t=>qm(Ss({},"__esModule",{value:!0}),t);var Hu=(t,e,n)=>(cE(t,typeof e!="symbol"?e+"":e,n),n);var Qm=rn(z=>{"use strict";var Ou=Symbol.for("react.transitional.element"),dE=Symbol.for("react.portal"),pE=Symbol.for("react.fragment"),mE=Symbol.for("react.strict_mode"),hE=Symbol.for("react.profiler"),gE=Symbol.for("react.consumer"),yE=Symbol.for("react.context"),vE=Symbol.for("react.forward_ref"),SE=Symbol.for("react.suspense"),TE=Symbol.for("react.memo"),Bm=Symbol.for("react.lazy"),_E=Symbol.for("react.activity"),Om=Symbol.iterator;function EE(t){return t===null||typeof t!="object"?null:(t=Om&&t[Om]||t["@@iterator"],typeof t=="function"?t:null)}var $m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ym=Object.assign,Jm={};function ro(t,e,n){this.props=t,this.context=e,this.refs=Jm,this.updater=n||$m}ro.prototype.isReactComponent={};ro.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ro.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Km(){}Km.prototype=ro.prototype;function Fu(t,e,n){this.props=t,this.context=e,this.refs=Jm,this.updater=n||$m}var zu=Fu.prototype=new Km;zu.constructor=Fu;Ym(zu,ro.prototype);zu.isPureReactComponent=!0;var Fm=Array.isArray;function qu(){}var ge={H:null,A:null,T:null,S:null},Xm=Object.prototype.hasOwnProperty;function Vu(t,e,n){var i=n.ref;return{$$typeof:Ou,type:t,key:e,ref:i!==void 0?i:null,props:n}}function CE(t,e){return Vu(t.type,e,t.props)}function Bu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ou}function AE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zm=/\/+/g;function Gu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AE(""+t.key):e.toString(36)}function xE(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(qu,qu):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function so(t,e,n,i,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case Ou:case dE:r=!0;break;case Bm:return r=t._init,so(r(t._payload),e,n,i,o)}}if(r)return o=o(t),r=i===""?"."+Gu(t,0):i,Fm(o)?(n="",r!=null&&(n=r.replace(zm,"$&/")+"/"),so(o,e,n,"",function(f){return f})):o!=null&&(Bu(o)&&(o=CE(o,n+(o.key==null||t&&t.key===o.key?"":(""+o.key).replace(zm,"$&/")+"/")+r)),e.push(o)),1;r=0;var l=i===""?".":i+":";if(Fm(t))for(var u=0;u<t.length;u++)i=t[u],s=l+Gu(i,u),r+=so(i,e,n,s,o);else if(u=EE(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,s=l+Gu(i,u++),r+=so(i,e,n,s,o);else if(s==="object"){if(typeof t.then=="function")return so(xE(t),e,n,i,o);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function Or(t,e,n){if(t==null)return t;var i=[],o=0;return so(t,i,"","",function(s){return e.call(n,s,o++)}),i}function wE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vm=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},bE={map:Or,forEach:function(t,e,n){Or(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Or(t,function(){e++}),e},toArray:function(t){return Or(t,function(e){return e})||[]},only:function(t){if(!Bu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Activity=_E;z.Children=bE;z.Component=ro;z.Fragment=pE;z.Profiler=hE;z.PureComponent=Fu;z.StrictMode=mE;z.Suspense=SE;z.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ge;z.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ge.H.useMemoCache(t)}};z.cache=function(t){return function(){return t.apply(null,arguments)}};z.cacheSignal=function(){return null};z.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=Ym({},t.props),o=t.key;if(e!=null)for(s in e.key!==void 0&&(o=""+e.key),e)!Xm.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var r=Array(s),l=0;l<s;l++)r[l]=arguments[l+2];i.children=r}return Vu(t.type,o,i)};z.createContext=function(t){return t={$$typeof:yE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:gE,_context:t},t};z.createElement=function(t,e,n){var i,o={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)Xm.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=e[i]);var r=arguments.length-2;if(r===1)o.children=n;else if(1<r){for(var l=Array(r),u=0;u<r;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(i in r=t.defaultProps,r)o[i]===void 0&&(o[i]=r[i]);return Vu(t,s,o)};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:vE,render:t}};z.isValidElement=Bu;z.lazy=function(t){return{$$typeof:Bm,_payload:{_status:-1,_result:t},_init:wE}};z.memo=function(t,e){return{$$typeof:TE,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=ge.T,n={};ge.T=n;try{var i=t(),o=ge.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(qu,Vm)}catch(s){Vm(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),ge.T=e}};z.unstable_useCacheRefresh=function(){return ge.H.useCacheRefresh()};z.use=function(t){return ge.H.use(t)};z.useActionState=function(t,e,n){return ge.H.useActionState(t,e,n)};z.useCallback=function(t,e){return ge.H.useCallback(t,e)};z.useContext=function(t){return ge.H.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t,e){return ge.H.useDeferredValue(t,e)};z.useEffect=function(t,e){return ge.H.useEffect(t,e)};z.useEffectEvent=function(t){return ge.H.useEffectEvent(t)};z.useId=function(){return ge.H.useId()};z.useImperativeHandle=function(t,e,n){return ge.H.useImperativeHandle(t,e,n)};z.useInsertionEffect=function(t,e){return ge.H.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return ge.H.useLayoutEffect(t,e)};z.useMemo=function(t,e){return ge.H.useMemo(t,e)};z.useOptimistic=function(t,e){return ge.H.useOptimistic(t,e)};z.useReducer=function(t,e,n){return ge.H.useReducer(t,e,n)};z.useRef=function(t){return ge.H.useRef(t)};z.useState=function(t){return ge.H.useState(t)};z.useSyncExternalStore=function(t,e,n){return ge.H.useSyncExternalStore(t,e,n)};z.useTransition=function(){return ge.H.useTransition()};z.version="19.2.3"});var Bt=rn((gk,Zm)=>{"use strict";Zm.exports=Qm()});var ah=rn(_e=>{"use strict";function Ku(t,e){var n=t.length;t.push(e);e:for(;0<n;){var i=n-1>>>1,o=t[i];if(0<Fr(o,e))t[i]=e,t[n]=o,n=i;else break e}}function an(t){return t.length===0?null:t[0]}function Vr(t){if(t.length===0)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;e:for(var i=0,o=t.length,s=o>>>1;i<s;){var r=2*(i+1)-1,l=t[r],u=r+1,f=t[u];if(0>Fr(l,n))u<o&&0>Fr(f,l)?(t[i]=f,t[u]=n,i=u):(t[i]=l,t[r]=n,i=r);else if(u<o&&0>Fr(f,n))t[i]=f,t[u]=n,i=u;else break e}}return e}function Fr(t,e){var n=t.sortIndex-e.sortIndex;return n!==0?n:t.id-e.id}_e.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(Wm=performance,_e.unstable_now=function(){return Wm.now()}):($u=Date,jm=$u.now(),_e.unstable_now=function(){return $u.now()-jm});var Wm,$u,jm,gn=[],Yn=[],RE=1,Dt=null,je=3,Xu=!1,Ts=!1,_s=!1,Qu=!1,nh=typeof setTimeout=="function"?setTimeout:null,ih=typeof clearTimeout=="function"?clearTimeout:null,eh=typeof setImmediate<"u"?setImmediate:null;function zr(t){for(var e=an(Yn);e!==null;){if(e.callback===null)Vr(Yn);else if(e.startTime<=t)Vr(Yn),e.sortIndex=e.expirationTime,Ku(gn,e);else break;e=an(Yn)}}function Zu(t){if(_s=!1,zr(t),!Ts)if(an(gn)!==null)Ts=!0,lo||(lo=!0,ao());else{var e=an(Yn);e!==null&&Wu(Zu,e.startTime-t)}}var lo=!1,Es=-1,oh=5,sh=-1;function rh(){return Qu?!0:!(_e.unstable_now()-sh<oh)}function Yu(){if(Qu=!1,lo){var t=_e.unstable_now();sh=t;var e=!0;try{e:{Ts=!1,_s&&(_s=!1,ih(Es),Es=-1),Xu=!0;var n=je;try{t:{for(zr(t),Dt=an(gn);Dt!==null&&!(Dt.expirationTime>t&&rh());){var i=Dt.callback;if(typeof i=="function"){Dt.callback=null,je=Dt.priorityLevel;var o=i(Dt.expirationTime<=t);if(t=_e.unstable_now(),typeof o=="function"){Dt.callback=o,zr(t),e=!0;break t}Dt===an(gn)&&Vr(gn),zr(t)}else Vr(gn);Dt=an(gn)}if(Dt!==null)e=!0;else{var s=an(Yn);s!==null&&Wu(Zu,s.startTime-t),e=!1}}break e}finally{Dt=null,je=n,Xu=!1}e=void 0}}finally{e?ao():lo=!1}}}var ao;typeof eh=="function"?ao=function(){eh(Yu)}:typeof MessageChannel<"u"?(Ju=new MessageChannel,th=Ju.port2,Ju.port1.onmessage=Yu,ao=function(){th.postMessage(null)}):ao=function(){nh(Yu,0)};var Ju,th;function Wu(t,e){Es=nh(function(){t(_e.unstable_now())},e)}_e.unstable_IdlePriority=5;_e.unstable_ImmediatePriority=1;_e.unstable_LowPriority=4;_e.unstable_NormalPriority=3;_e.unstable_Profiling=null;_e.unstable_UserBlockingPriority=2;_e.unstable_cancelCallback=function(t){t.callback=null};_e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oh=0<t?Math.floor(1e3/t):5};_e.unstable_getCurrentPriorityLevel=function(){return je};_e.unstable_next=function(t){switch(je){case 1:case 2:case 3:var e=3;break;default:e=je}var n=je;je=e;try{return t()}finally{je=n}};_e.unstable_requestPaint=function(){Qu=!0};_e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=je;je=t;try{return e()}finally{je=n}};_e.unstable_scheduleCallback=function(t,e,n){var i=_e.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?i+n:i):n=i,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=n+o,t={id:RE++,callback:e,priorityLevel:t,startTime:n,expirationTime:o,sortIndex:-1},n>i?(t.sortIndex=n,Ku(Yn,t),an(gn)===null&&t===an(Yn)&&(_s?(ih(Es),Es=-1):_s=!0,Wu(Zu,n-i))):(t.sortIndex=o,Ku(gn,t),Ts||Xu||(Ts=!0,lo||(lo=!0,ao()))),t};_e.unstable_shouldYield=rh;_e.unstable_wrapCallback=function(t){var e=je;return function(){var n=je;je=e;try{return t.apply(this,arguments)}finally{je=n}}}});var uh=rn((vk,lh)=>{"use strict";lh.exports=ah()});var fh=rn(it=>{"use strict";var NE=Bt();function ch(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Jn(){}var nt={d:{f:Jn,r:function(){throw Error(ch(522))},D:Jn,C:Jn,L:Jn,m:Jn,X:Jn,S:Jn,M:Jn},p:0,findDOMNode:null},IE=Symbol.for("react.portal");function ME(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:IE,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Cs=NE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Br(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}it.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=nt;it.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(ch(299));return ME(t,e,null,n)};it.flushSync=function(t){var e=Cs.T,n=nt.p;try{if(Cs.T=null,nt.p=2,t)return t()}finally{Cs.T=e,nt.p=n,nt.d.f()}};it.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,nt.d.C(t,e))};it.prefetchDNS=function(t){typeof t=="string"&&nt.d.D(t)};it.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Br(n,e.crossOrigin),o=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?nt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:s}):n==="script"&&nt.d.X(t,{crossOrigin:i,integrity:o,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};it.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Br(e.as,e.crossOrigin);nt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&nt.d.M(t)};it.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Br(n,e.crossOrigin);nt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};it.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Br(e.as,e.crossOrigin);nt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else nt.d.m(t)};it.requestFormReset=function(t){nt.d.r(t)};it.unstable_batchedUpdates=function(t,e){return t(e)};it.useFormState=function(t,e,n){return Cs.H.useFormState(t,e,n)};it.useFormStatus=function(){return Cs.H.useHostTransitionStatus()};it.version="19.2.3"});var mh=rn((Tk,ph)=>{"use strict";function dh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dh)}catch(t){console.error(t)}}dh(),ph.exports=fh()});var w0=rn(hl=>{"use strict";var qe=uh(),Og=Bt(),DE=mh();function w(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Fg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ur(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vg(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hh(t){if(ur(t)!==t)throw Error(w(188))}function kE(t){var e=t.alternate;if(!e){if(e=ur(t),e===null)throw Error(w(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return hh(o),t;if(s===i)return hh(o),e;s=s.sibling}throw Error(w(188))}if(n.return!==i.return)n=o,i=s;else{for(var r=!1,l=o.child;l;){if(l===n){r=!0,n=o,i=s;break}if(l===i){r=!0,i=o,n=s;break}l=l.sibling}if(!r){for(l=s.child;l;){if(l===n){r=!0,n=s,i=o;break}if(l===i){r=!0,i=s,n=o;break}l=l.sibling}if(!r)throw Error(w(189))}}if(n.alternate!==i)throw Error(w(190))}if(n.tag!==3)throw Error(w(188));return n.stateNode.current===n?t:e}function Bg(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Bg(t),e!==null)return e;t=t.sibling}return null}var Se=Object.assign,UE=Symbol.for("react.element"),$r=Symbol.for("react.transitional.element"),Ms=Symbol.for("react.portal"),ho=Symbol.for("react.fragment"),$g=Symbol.for("react.strict_mode"),Dc=Symbol.for("react.profiler"),Yg=Symbol.for("react.consumer"),An=Symbol.for("react.context"),Rf=Symbol.for("react.forward_ref"),kc=Symbol.for("react.suspense"),Uc=Symbol.for("react.suspense_list"),Nf=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy");Symbol.for("react.scope");var Pc=Symbol.for("react.activity");Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var PE=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var gh=Symbol.iterator;function As(t){return t===null||typeof t!="object"?null:(t=gh&&t[gh]||t["@@iterator"],typeof t=="function"?t:null)}var LE=Symbol.for("react.client.reference");function Lc(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===LE?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ho:return"Fragment";case Dc:return"Profiler";case $g:return"StrictMode";case kc:return"Suspense";case Uc:return"SuspenseList";case Pc:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Ms:return"Portal";case An:return t.displayName||"Context";case Yg:return(t._context.displayName||"Context")+".Consumer";case Rf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nf:return e=t.displayName||null,e!==null?e:Lc(t.type)||"Memo";case Kn:e=t._payload,t=t._init;try{return Lc(t(e))}catch{}}return null}var Ds=Array.isArray,L=Og.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=DE.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Di={pending:!1,data:null,method:null,action:null},Hc=[],go=-1;function dn(t){return{current:t}}function Be(t){0>go||(t.current=Hc[go],Hc[go]=null,go--)}function he(t,e){go++,Hc[go]=t.current,t.current=e}var fn=dn(null),Xs=dn(null),si=dn(null),Aa=dn(null);function xa(t,e){switch(he(si,e),he(Xs,t),he(fn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Cg(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Cg(e),t=d0(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Be(fn),he(fn,t)}function Uo(){Be(fn),Be(Xs),Be(si)}function Gc(t){t.memoizedState!==null&&he(Aa,t);var e=fn.current,n=d0(e,t.type);e!==n&&(he(Xs,t),he(fn,n))}function wa(t){Xs.current===t&&(Be(fn),Be(Xs)),Aa.current===t&&(Be(Aa),rr._currentValue=Di)}var ju,yh;function Ri(t){if(ju===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ju=e&&e[1]||"",yh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ju+t+yh}var ec=!1;function tc(t,e){if(!t||ec)return"";ec=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(h){var m=h}Reflect.construct(t,[],p)}else{try{p.call()}catch(h){m=h}t.call(p.prototype)}}else{try{throw Error()}catch(h){m=h}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),r=s[0],l=s[1];if(r&&l){var u=r.split(`
`),f=l.split(`
`);for(o=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;o<f.length&&!f[o].includes("DetermineComponentFrameRoot");)o++;if(i===u.length||o===f.length)for(i=u.length-1,o=f.length-1;1<=i&&0<=o&&u[i]!==f[o];)o--;for(;1<=i&&0<=o;i--,o--)if(u[i]!==f[o]){if(i!==1||o!==1)do if(i--,o--,0>o||u[i]!==f[o]){var d=`
`+u[i].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=i&&0<=o);break}}}finally{ec=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ri(n):""}function HE(t,e){switch(t.tag){case 26:case 27:case 5:return Ri(t.type);case 16:return Ri("Lazy");case 13:return t.child!==e&&e!==null?Ri("Suspense Fallback"):Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return tc(t.type,!1);case 11:return tc(t.type.render,!1);case 1:return tc(t.type,!0);case 31:return Ri("Activity");default:return""}}function vh(t){try{var e="",n=null;do e+=HE(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var qc=Object.prototype.hasOwnProperty,If=qe.unstable_scheduleCallback,nc=qe.unstable_cancelCallback,GE=qe.unstable_shouldYield,qE=qe.unstable_requestPaint,Ct=qe.unstable_now,OE=qe.unstable_getCurrentPriorityLevel,Jg=qe.unstable_ImmediatePriority,Kg=qe.unstable_UserBlockingPriority,ba=qe.unstable_NormalPriority,FE=qe.unstable_LowPriority,Xg=qe.unstable_IdlePriority,zE=qe.log,VE=qe.unstable_setDisableYieldValue,cr=null,At=null;function ei(t){if(typeof zE=="function"&&VE(t),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(cr,t)}catch{}}var xt=Math.clz32?Math.clz32:YE,BE=Math.log,$E=Math.LN2;function YE(t){return t>>>=0,t===0?32:31-(BE(t)/$E|0)|0}var Yr=256,Jr=262144,Kr=4194304;function Ni(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ja(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var o=0,s=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?o=Ni(i):(r&=l,r!==0?o=Ni(r):n||(n=l&~t,n!==0&&(o=Ni(n))))):(l=i&~s,l!==0?o=Ni(l):r!==0?o=Ni(r):n||(n=i&~t,n!==0&&(o=Ni(n)))),o===0?0:e!==0&&e!==o&&(e&s)===0&&(s=o&-o,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:o}function fr(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function JE(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qg(){var t=Kr;return Kr<<=1,(Kr&62914560)===0&&(Kr=4194304),t}function ic(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dr(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function KE(t,e,n,i,o,s){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,f=t.hiddenUpdates;for(n=r&~n;0<n;){var d=31-xt(n),p=1<<d;l[d]=0,u[d]=-1;var m=f[d];if(m!==null)for(f[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~p}i!==0&&Zg(t,i,0),s!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=s&~(r&~e))}function Zg(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-xt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function Wg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-xt(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}function jg(t,e){var n=e&-e;return n=(n&42)!==0?1:Mf(n),(n&(t.suspendedLanes|e))!==0?0:n}function Mf(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Df(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ey(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:C0(t.type))}function Sh(t,e){var n=ne.p;try{return ne.p=t,e()}finally{ne.p=n}}var vi=Math.random().toString(36).slice(2),Ke="__reactFiber$"+vi,pt="__reactProps$"+vi,$o="__reactContainer$"+vi,Oc="__reactEvents$"+vi,XE="__reactListeners$"+vi,QE="__reactHandles$"+vi,Th="__reactResources$"+vi,pr="__reactMarker$"+vi;function kf(t){delete t[Ke],delete t[pt],delete t[Oc],delete t[XE],delete t[QE]}function yo(t){var e=t[Ke];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$o]||n[Ke]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rg(t);t!==null;){if(n=t[Ke])return n;t=Rg(t)}return e}t=n,n=t.parentNode}return null}function Yo(t){if(t=t[Ke]||t[$o]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function ks(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(w(33))}function bo(t){var e=t[Th];return e||(e=t[Th]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ve(t){t[pr]=!0}var ty=new Set,ny={};function zi(t,e){Po(t,e),Po(t+"Capture",e)}function Po(t,e){for(ny[t]=e,t=0;t<e.length;t++)ty.add(e[t])}var ZE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_h={},Eh={};function WE(t){return qc.call(Eh,t)?!0:qc.call(_h,t)?!1:ZE.test(t)?Eh[t]=!0:(_h[t]=!0,!1)}function ua(t,e,n){if(WE(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Xr(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function yn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Ut(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jE(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fc(t){if(!t._valueTracker){var e=iy(t)?"checked":"value";t._valueTracker=jE(t,e,""+t[e])}}function oy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=iy(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ra(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var eC=/[\n"\\]/g;function Ht(t){return t.replace(eC,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function zc(t,e,n,i,o,s,r,l){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Ut(e)):t.value!==""+Ut(e)&&(t.value=""+Ut(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?Vc(t,r,Ut(e)):n!=null?Vc(t,r,Ut(n)):i!=null&&t.removeAttribute("value"),o==null&&s!=null&&(t.defaultChecked=!!s),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Ut(l):t.removeAttribute("name")}function sy(t,e,n,i,o,s,r,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){Fc(t);return}n=n!=null?""+Ut(n):"",e=e!=null?""+Ut(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r),Fc(t)}function Vc(t,e,n){e==="number"&&Ra(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ro(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ut(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function ry(t,e,n){if(e!=null&&(e=""+Ut(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Ut(n):""}function ay(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(w(92));if(Ds(i)){if(1<i.length)throw Error(w(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Ut(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),Fc(t)}function Lo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ch(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||tC.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function ly(t,e,n){if(e!=null&&typeof e!="object")throw Error(w(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var o in e)i=e[o],e.hasOwnProperty(o)&&n[o]!==i&&Ch(t,o,i)}else for(var s in e)e.hasOwnProperty(s)&&Ch(t,s,e[s])}function Uf(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ca(t){return iC.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function xn(){}var Bc=null;function Pf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vo=null,No=null;function Ah(t){var e=Yo(t);if(e&&(t=e.stateNode)){var n=t[pt]||null;e:switch(t=e.stateNode,e.type){case"input":if(zc(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Ht(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=i[pt]||null;if(!o)throw Error(w(90));zc(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&oy(i)}break e;case"textarea":ry(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Ro(t,!!n.multiple,e,!1)}}}var oc=!1;function uy(t,e,n){if(oc)return t(e,n);oc=!0;try{var i=t(e);return i}finally{if(oc=!1,(vo!==null||No!==null)&&(fl(),vo&&(e=vo,t=No,No=vo=null,Ah(e),t)))for(e=0;e<t.length;e++)Ah(t[e])}}function Qs(t,e){var n=t.stateNode;if(n===null)return null;var i=n[pt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(w(231,e,typeof n));return n}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$c=!1;if(In)try{uo={},Object.defineProperty(uo,"passive",{get:function(){$c=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{$c=!1}var uo,ti=null,Lf=null,fa=null;function cy(){if(fa)return fa;var t,e=Lf,n=e.length,i,o="value"in ti?ti.value:ti.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var r=n-t;for(i=1;i<=r&&e[n-i]===o[s-i];i++);return fa=o.slice(t,1<i?1-i:void 0)}function da(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qr(){return!0}function xh(){return!1}function mt(t){function e(n,i,o,s,r){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qr:xh,this.isPropagationStopped=xh,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qr)},persist:function(){},isPersistent:Qr}),e}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},el=mt(Vi),mr=Se({},Vi,{view:0,detail:0}),oC=mt(mr),sc,rc,xs,tl=Se({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xs&&(xs&&t.type==="mousemove"?(sc=t.screenX-xs.screenX,rc=t.screenY-xs.screenY):rc=sc=0,xs=t),sc)},movementY:function(t){return"movementY"in t?t.movementY:rc}}),wh=mt(tl),sC=Se({},tl,{dataTransfer:0}),rC=mt(sC),aC=Se({},mr,{relatedTarget:0}),ac=mt(aC),lC=Se({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),uC=mt(lC),cC=Se({},Vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fC=mt(cC),dC=Se({},Vi,{data:0}),bh=mt(dC),pC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hC[t])?!!e[t]:!1}function Hf(){return gC}var yC=Se({},mr,{key:function(t){if(t.key){var e=pC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=da(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hf,charCode:function(t){return t.type==="keypress"?da(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?da(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vC=mt(yC),SC=Se({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rh=mt(SC),TC=Se({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hf}),_C=mt(TC),EC=Se({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),CC=mt(EC),AC=Se({},tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xC=mt(AC),wC=Se({},Vi,{newState:0,oldState:0}),bC=mt(wC),RC=[9,13,27,32],Gf=In&&"CompositionEvent"in window,Ls=null;In&&"documentMode"in document&&(Ls=document.documentMode);var NC=In&&"TextEvent"in window&&!Ls,fy=In&&(!Gf||Ls&&8<Ls&&11>=Ls),Nh=String.fromCharCode(32),Ih=!1;function dy(t,e){switch(t){case"keyup":return RC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function py(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var So=!1;function IC(t,e){switch(t){case"compositionend":return py(e);case"keypress":return e.which!==32?null:(Ih=!0,Nh);case"textInput":return t=e.data,t===Nh&&Ih?null:t;default:return null}}function MC(t,e){if(So)return t==="compositionend"||!Gf&&dy(t,e)?(t=cy(),fa=Lf=ti=null,So=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fy&&e.locale!=="ko"?null:e.data;default:return null}}var DC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DC[t.type]:e==="textarea"}function my(t,e,n,i){vo?No?No.push(i):No=[i]:vo=i,e=Ya(e,"onChange"),0<e.length&&(n=new el("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Hs=null,Zs=null;function kC(t){u0(t,0)}function nl(t){var e=ks(t);if(oy(e))return t}function Dh(t,e){if(t==="change")return e}var hy=!1;In&&(In?(Wr="oninput"in document,Wr||(lc=document.createElement("div"),lc.setAttribute("oninput","return;"),Wr=typeof lc.oninput=="function"),Zr=Wr):Zr=!1,hy=Zr&&(!document.documentMode||9<document.documentMode));var Zr,Wr,lc;function kh(){Hs&&(Hs.detachEvent("onpropertychange",gy),Zs=Hs=null)}function gy(t){if(t.propertyName==="value"&&nl(Zs)){var e=[];my(e,Zs,t,Pf(t)),uy(kC,e)}}function UC(t,e,n){t==="focusin"?(kh(),Hs=e,Zs=n,Hs.attachEvent("onpropertychange",gy)):t==="focusout"&&kh()}function PC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nl(Zs)}function LC(t,e){if(t==="click")return nl(e)}function HC(t,e){if(t==="input"||t==="change")return nl(e)}function GC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bt=typeof Object.is=="function"?Object.is:GC;function Ws(t,e){if(bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!qc.call(e,o)||!bt(t[o],e[o]))return!1}return!0}function Uh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ph(t,e){var n=Uh(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uh(n)}}function yy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Ra(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ra(t.document)}return e}function qf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var qC=In&&"documentMode"in document&&11>=document.documentMode,To=null,Yc=null,Gs=null,Jc=!1;function Lh(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jc||To==null||To!==Ra(i)||(i=To,"selectionStart"in i&&qf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Gs&&Ws(Gs,i)||(Gs=i,i=Ya(Yc,"onSelect"),0<i.length&&(e=new el("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=To)))}function bi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _o={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionrun:bi("Transition","TransitionRun"),transitionstart:bi("Transition","TransitionStart"),transitioncancel:bi("Transition","TransitionCancel"),transitionend:bi("Transition","TransitionEnd")},uc={},Sy={};In&&(Sy=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function Bi(t){if(uc[t])return uc[t];if(!_o[t])return t;var e=_o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sy)return uc[t]=e[n];return t}var Ty=Bi("animationend"),_y=Bi("animationiteration"),Ey=Bi("animationstart"),OC=Bi("transitionrun"),FC=Bi("transitionstart"),zC=Bi("transitioncancel"),Cy=Bi("transitionend"),Ay=new Map,Kc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kc.push("scrollEnd");function Jt(t,e){Ay.set(t,e),zi(e,[t])}var Na=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},kt=[],Eo=0,Of=0;function il(){for(var t=Eo,e=Of=Eo=0;e<t;){var n=kt[e];kt[e++]=null;var i=kt[e];kt[e++]=null;var o=kt[e];kt[e++]=null;var s=kt[e];if(kt[e++]=null,i!==null&&o!==null){var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}s!==0&&xy(n,o,s)}}function ol(t,e,n,i){kt[Eo++]=t,kt[Eo++]=e,kt[Eo++]=n,kt[Eo++]=i,Of|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Ff(t,e,n,i){return ol(t,e,n,i),Ia(t)}function $i(t,e){return ol(t,null,null,e),Ia(t)}function xy(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var o=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(o=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,o&&e!==null&&(o=31-xt(n),t=s.hiddenUpdates,i=t[o],i===null?t[o]=[e]:i.push(e),e.lane=n|536870912),s):null}function Ia(t){if(50<Js)throw Js=0,gf=null,Error(w(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Co={};function VC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(t,e,n,i){return new VC(t,e,n,i)}function zf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bn(t,e){var n=t.alternate;return n===null?(n=_t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function wy(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function pa(t,e,n,i,o,s){var r=0;if(i=t,typeof t=="function")zf(t)&&(r=1);else if(typeof t=="string")r=YA(t,n,fn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Pc:return t=_t(31,n,e,o),t.elementType=Pc,t.lanes=s,t;case ho:return ki(n.children,o,s,e);case $g:r=8,o|=24;break;case Dc:return t=_t(12,n,e,o|2),t.elementType=Dc,t.lanes=s,t;case kc:return t=_t(13,n,e,o),t.elementType=kc,t.lanes=s,t;case Uc:return t=_t(19,n,e,o),t.elementType=Uc,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case An:r=10;break e;case Yg:r=9;break e;case Rf:r=11;break e;case Nf:r=14;break e;case Kn:r=16,i=null;break e}r=29,n=Error(w(130,t===null?"null":typeof t,"")),i=null}return e=_t(r,n,e,o),e.elementType=t,e.type=i,e.lanes=s,e}function ki(t,e,n,i){return t=_t(7,t,i,e),t.lanes=n,t}function cc(t,e,n){return t=_t(6,t,null,e),t.lanes=n,t}function by(t){var e=_t(18,null,null,0);return e.stateNode=t,e}function fc(t,e,n){return e=_t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Hh=new WeakMap;function Gt(t,e){if(typeof t=="object"&&t!==null){var n=Hh.get(t);return n!==void 0?n:(e={value:t,source:e,stack:vh(e)},Hh.set(t,e),e)}return{value:t,source:e,stack:vh(e)}}var Ao=[],xo=0,Ma=null,js=0,Pt=[],Lt=0,mi=null,ln=1,un="";function En(t,e){Ao[xo++]=js,Ao[xo++]=Ma,Ma=t,js=e}function Ry(t,e,n){Pt[Lt++]=ln,Pt[Lt++]=un,Pt[Lt++]=mi,mi=t;var i=ln;t=un;var o=32-xt(i)-1;i&=~(1<<o),n+=1;var s=32-xt(e)+o;if(30<s){var r=o-o%5;s=(i&(1<<r)-1).toString(32),i>>=r,o-=r,ln=1<<32-xt(e)+o|n<<o|i,un=s+t}else ln=1<<s|n<<o|i,un=t}function Vf(t){t.return!==null&&(En(t,1),Ry(t,1,0))}function Bf(t){for(;t===Ma;)Ma=Ao[--xo],Ao[xo]=null,js=Ao[--xo],Ao[xo]=null;for(;t===mi;)mi=Pt[--Lt],Pt[Lt]=null,un=Pt[--Lt],Pt[Lt]=null,ln=Pt[--Lt],Pt[Lt]=null}function Ny(t,e){Pt[Lt++]=ln,Pt[Lt++]=un,Pt[Lt++]=mi,ln=e.id,un=e.overflow,mi=t}var Xe=null,ve=null,Q=!1,ri=null,qt=!1,Xc=Error(w(519));function hi(t){var e=Error(w(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw er(Gt(e,t)),Xc}function Gh(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Ke]=t,e[pt]=i,n){case"dialog":Y("cancel",e),Y("close",e);break;case"iframe":case"object":case"embed":Y("load",e);break;case"video":case"audio":for(n=0;n<or.length;n++)Y(or[n],e);break;case"source":Y("error",e);break;case"img":case"image":case"link":Y("error",e),Y("load",e);break;case"details":Y("toggle",e);break;case"input":Y("invalid",e),sy(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Y("invalid",e);break;case"textarea":Y("invalid",e),ay(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||f0(e.textContent,n)?(i.popover!=null&&(Y("beforetoggle",e),Y("toggle",e)),i.onScroll!=null&&Y("scroll",e),i.onScrollEnd!=null&&Y("scrollend",e),i.onClick!=null&&(e.onclick=xn),e=!0):e=!1,e||hi(t,!0)}function qh(t){for(Xe=t.return;Xe;)switch(Xe.tag){case 5:case 31:case 13:qt=!1;return;case 27:case 3:qt=!0;return;default:Xe=Xe.return}}function co(t){if(t!==Xe)return!1;if(!Q)return qh(t),Q=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||_f(t.type,t.memoizedProps)),n=!n),n&&ve&&hi(t),qh(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(w(317));ve=bg(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(w(317));ve=bg(t)}else e===27?(e=ve,Si(t.type)?(t=xf,xf=null,ve=t):ve=e):ve=Xe?Ft(t.stateNode.nextSibling):null;return!0}function Hi(){ve=Xe=null,Q=!1}function dc(){var t=ri;return t!==null&&(ft===null?ft=t:ft.push.apply(ft,t),ri=null),t}function er(t){ri===null?ri=[t]:ri.push(t)}var Qc=dn(null),Yi=null,wn=null;function Qn(t,e,n){he(Qc,e._currentValue),e._currentValue=n}function Rn(t){t._currentValue=Qc.current,Be(Qc)}function Zc(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Wc(t,e,n,i){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){var r=o.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=o;for(var u=0;u<e.length;u++)if(l.context===e[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Zc(s.return,n,t),i||(r=null);break e}s=l.next}}else if(o.tag===18){if(r=o.return,r===null)throw Error(w(341));r.lanes|=n,s=r.alternate,s!==null&&(s.lanes|=n),Zc(r,n,t),r=null}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===t){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}}function Jo(t,e,n,i){t=null;for(var o=e,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var r=o.alternate;if(r===null)throw Error(w(387));if(r=r.memoizedProps,r!==null){var l=o.type;bt(o.pendingProps.value,r.value)||(t!==null?t.push(l):t=[l])}}else if(o===Aa.current){if(r=o.alternate,r===null)throw Error(w(387));r.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(rr):t=[rr])}o=o.return}t!==null&&Wc(e,t,n,i),e.flags|=262144}function Da(t){for(t=t.firstContext;t!==null;){if(!bt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gi(t){Yi=t,wn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qe(t){return Iy(Yi,t)}function jr(t,e){return Yi===null&&Gi(t),Iy(t,e)}function Iy(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},wn===null){if(t===null)throw Error(w(308));wn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else wn=wn.next=e;return n}var BC=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},$C=qe.unstable_scheduleCallback,YC=qe.unstable_NormalPriority,ke={$$typeof:An,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $f(){return{controller:new BC,data:new Map,refCount:0}}function hr(t){t.refCount--,t.refCount===0&&$C(YC,function(){t.controller.abort()})}var qs=null,jc=0,Ho=0,Io=null;function JC(t,e){if(qs===null){var n=qs=[];jc=0,Ho=gd(),Io={status:"pending",value:void 0,then:function(i){n.push(i)}}}return jc++,e.then(Oh,Oh),e}function Oh(){if(--jc===0&&qs!==null){Io!==null&&(Io.status="fulfilled");var t=qs;qs=null,Ho=0,Io=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function KC(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var o=0;o<n.length;o++)(0,n[o])(e)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var Fh=L.S;L.S=function(t,e){Bv=Ct(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&JC(t,e),Fh!==null&&Fh(t,e)};var Ui=dn(null);function Yf(){var t=Ui.current;return t!==null?t:pe.pooledCache}function ma(t,e){e===null?he(Ui,Ui.current):he(Ui,e.pool)}function My(){var t=Yf();return t===null?null:{parent:ke._currentValue,pool:t}}var Ko=Error(w(460)),Jf=Error(w(474)),sl=Error(w(542)),ka={then:function(){}};function zh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Dy(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(xn,xn),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Bh(t),t;default:if(typeof e.status=="string")e.then(xn,xn);else{if(t=pe,t!==null&&100<t.shellSuspendCounter)throw Error(w(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var o=e;o.status="fulfilled",o.value=i}},function(i){if(e.status==="pending"){var o=e;o.status="rejected",o.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Bh(t),t}throw Pi=e,Ko}}function Ii(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Pi=n,Ko):n}}var Pi=null;function Vh(){if(Pi===null)throw Error(w(459));var t=Pi;return Pi=null,t}function Bh(t){if(t===Ko||t===sl)throw Error(w(483))}var Mo=null,tr=0;function ea(t){var e=tr;return tr+=1,Mo===null&&(Mo=[]),Dy(Mo,t,e)}function ws(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function ta(t,e){throw e.$$typeof===UE?Error(w(525)):(t=Object.prototype.toString.call(e),Error(w(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function ky(t){function e(g,y){if(t){var S=g.deletions;S===null?(g.deletions=[y],g.flags|=16):S.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function i(g){for(var y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function o(g,y){return g=bn(g,y),g.index=0,g.sibling=null,g}function s(g,y,S){return g.index=S,t?(S=g.alternate,S!==null?(S=S.index,S<y?(g.flags|=67108866,y):S):(g.flags|=67108866,y)):(g.flags|=1048576,y)}function r(g){return t&&g.alternate===null&&(g.flags|=67108866),g}function l(g,y,S,_){return y===null||y.tag!==6?(y=cc(S,g.mode,_),y.return=g,y):(y=o(y,S),y.return=g,y)}function u(g,y,S,_){var A=S.type;return A===ho?d(g,y,S.props.children,_,S.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Kn&&Ii(A)===y.type)?(y=o(y,S.props),ws(y,S),y.return=g,y):(y=pa(S.type,S.key,S.props,null,g.mode,_),ws(y,S),y.return=g,y)}function f(g,y,S,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=fc(S,g.mode,_),y.return=g,y):(y=o(y,S.children||[]),y.return=g,y)}function d(g,y,S,_,A){return y===null||y.tag!==7?(y=ki(S,g.mode,_,A),y.return=g,y):(y=o(y,S),y.return=g,y)}function p(g,y,S){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=cc(""+y,g.mode,S),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $r:return S=pa(y.type,y.key,y.props,null,g.mode,S),ws(S,y),S.return=g,S;case Ms:return y=fc(y,g.mode,S),y.return=g,y;case Kn:return y=Ii(y),p(g,y,S)}if(Ds(y)||As(y))return y=ki(y,g.mode,S,null),y.return=g,y;if(typeof y.then=="function")return p(g,ea(y),S);if(y.$$typeof===An)return p(g,jr(g,y),S);ta(g,y)}return null}function m(g,y,S,_){var A=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return A!==null?null:l(g,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $r:return S.key===A?u(g,y,S,_):null;case Ms:return S.key===A?f(g,y,S,_):null;case Kn:return S=Ii(S),m(g,y,S,_)}if(Ds(S)||As(S))return A!==null?null:d(g,y,S,_,null);if(typeof S.then=="function")return m(g,y,ea(S),_);if(S.$$typeof===An)return m(g,y,jr(g,S),_);ta(g,S)}return null}function h(g,y,S,_,A){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return g=g.get(S)||null,l(y,g,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $r:return g=g.get(_.key===null?S:_.key)||null,u(y,g,_,A);case Ms:return g=g.get(_.key===null?S:_.key)||null,f(y,g,_,A);case Kn:return _=Ii(_),h(g,y,S,_,A)}if(Ds(_)||As(_))return g=g.get(S)||null,d(y,g,_,A,null);if(typeof _.then=="function")return h(g,y,S,ea(_),A);if(_.$$typeof===An)return h(g,y,S,jr(y,_),A);ta(y,_)}return null}function v(g,y,S,_){for(var A=null,I=null,x=y,M=y=0,C=null;x!==null&&M<S.length;M++){x.index>M?(C=x,x=null):C=x.sibling;var N=m(g,x,S[M],_);if(N===null){x===null&&(x=C);break}t&&x&&N.alternate===null&&e(g,x),y=s(N,y,M),I===null?A=N:I.sibling=N,I=N,x=C}if(M===S.length)return n(g,x),Q&&En(g,M),A;if(x===null){for(;M<S.length;M++)x=p(g,S[M],_),x!==null&&(y=s(x,y,M),I===null?A=x:I.sibling=x,I=x);return Q&&En(g,M),A}for(x=i(x);M<S.length;M++)C=h(x,g,M,S[M],_),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?M:C.key),y=s(C,y,M),I===null?A=C:I.sibling=C,I=C);return t&&x.forEach(function(F){return e(g,F)}),Q&&En(g,M),A}function T(g,y,S,_){if(S==null)throw Error(w(151));for(var A=null,I=null,x=y,M=y=0,C=null,N=S.next();x!==null&&!N.done;M++,N=S.next()){x.index>M?(C=x,x=null):C=x.sibling;var F=m(g,x,N.value,_);if(F===null){x===null&&(x=C);break}t&&x&&F.alternate===null&&e(g,x),y=s(F,y,M),I===null?A=F:I.sibling=F,I=F,x=C}if(N.done)return n(g,x),Q&&En(g,M),A;if(x===null){for(;!N.done;M++,N=S.next())N=p(g,N.value,_),N!==null&&(y=s(N,y,M),I===null?A=N:I.sibling=N,I=N);return Q&&En(g,M),A}for(x=i(x);!N.done;M++,N=S.next())N=h(x,g,M,N.value,_),N!==null&&(t&&N.alternate!==null&&x.delete(N.key===null?M:N.key),y=s(N,y,M),I===null?A=N:I.sibling=N,I=N);return t&&x.forEach(function(me){return e(g,me)}),Q&&En(g,M),A}function E(g,y,S,_){if(typeof S=="object"&&S!==null&&S.type===ho&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case $r:e:{for(var A=S.key;y!==null;){if(y.key===A){if(A=S.type,A===ho){if(y.tag===7){n(g,y.sibling),_=o(y,S.props.children),_.return=g,g=_;break e}}else if(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Kn&&Ii(A)===y.type){n(g,y.sibling),_=o(y,S.props),ws(_,S),_.return=g,g=_;break e}n(g,y);break}else e(g,y);y=y.sibling}S.type===ho?(_=ki(S.props.children,g.mode,_,S.key),_.return=g,g=_):(_=pa(S.type,S.key,S.props,null,g.mode,_),ws(_,S),_.return=g,g=_)}return r(g);case Ms:e:{for(A=S.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(g,y.sibling),_=o(y,S.children||[]),_.return=g,g=_;break e}else{n(g,y);break}else e(g,y);y=y.sibling}_=fc(S,g.mode,_),_.return=g,g=_}return r(g);case Kn:return S=Ii(S),E(g,y,S,_)}if(Ds(S))return v(g,y,S,_);if(As(S)){if(A=As(S),typeof A!="function")throw Error(w(150));return S=A.call(S),T(g,y,S,_)}if(typeof S.then=="function")return E(g,y,ea(S),_);if(S.$$typeof===An)return E(g,y,jr(g,S),_);ta(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,y!==null&&y.tag===6?(n(g,y.sibling),_=o(y,S),_.return=g,g=_):(n(g,y),_=cc(S,g.mode,_),_.return=g,g=_),r(g)):n(g,y)}return function(g,y,S,_){try{tr=0;var A=E(g,y,S,_);return Mo=null,A}catch(x){if(x===Ko||x===sl)throw x;var I=_t(29,x,null,g.mode);return I.lanes=_,I.return=g,I}finally{}}}var qi=ky(!0),Uy=ky(!1),Xn=!1;function Kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ai(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function li(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,(te&2)!==0){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,e=Ia(t),xy(t,null,n),e}return ol(t,i,e,n),Ia(t)}function Os(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Wg(t,n)}}function pc(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var tf=!1;function Fs(){if(tf){var t=Io;if(t!==null)throw t}}function zs(t,e,n,i){tf=!1;var o=t.updateQueue;Xn=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var u=l,f=u.next;u.next=null,r===null?s=f:r.next=f,r=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==r&&(l===null?d.firstBaseUpdate=f:l.next=f,d.lastBaseUpdate=u))}if(s!==null){var p=o.baseState;r=0,d=f=u=null,l=s;do{var m=l.lane&-536870913,h=m!==l.lane;if(h?(K&m)===m:(i&m)===m){m!==0&&m===Ho&&(tf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var v=t,T=l;m=e;var E=n;switch(T.tag){case 1:if(v=T.payload,typeof v=="function"){p=v.call(E,p,m);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,m=typeof v=="function"?v.call(E,p,m):v,m==null)break e;p=Se({},p,m);break e;case 2:Xn=!0}}m=l.callback,m!==null&&(t.flags|=64,h&&(t.flags|=8192),h=o.callbacks,h===null?o.callbacks=[m]:h.push(m))}else h={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(f=d=h,u=p):d=d.next=h,r|=m;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);d===null&&(u=p),o.baseState=u,o.firstBaseUpdate=f,o.lastBaseUpdate=d,s===null&&(o.shared.lanes=0),yi|=r,t.lanes=r,t.memoizedState=p}}function Py(t,e){if(typeof t!="function")throw Error(w(191,t));t.call(e)}function Ly(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Py(n[t],e)}var Go=dn(null),Ua=dn(0);function $h(t,e){t=Un,he(Ua,t),he(Go,e),Un=t|e.baseLanes}function nf(){he(Ua,Un),he(Go,Go.current)}function Xf(){Un=Ua.current,Be(Go),Be(Ua)}var Rt=dn(null),Ot=null;function Zn(t){var e=t.alternate;he(Re,Re.current&1),he(Rt,t),Ot===null&&(e===null||Go.current!==null||e.memoizedState!==null)&&(Ot=t)}function of(t){he(Re,Re.current),he(Rt,t),Ot===null&&(Ot=t)}function Hy(t){t.tag===22?(he(Re,Re.current),he(Rt,t),Ot===null&&(Ot=t)):Wn(t)}function Wn(){he(Re,Re.current),he(Rt,Rt.current)}function Tt(t){Be(Rt),Ot===t&&(Ot=null),Be(Re)}var Re=dn(0);function Pa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Cf(n)||Af(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mn=0,V=null,de=null,Me=null,La=!1,Do=!1,Oi=!1,Ha=0,nr=0,ko=null,XC=0;function xe(){throw Error(w(321))}function Qf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bt(t[n],e[n]))return!1;return!0}function Zf(t,e,n,i,o,s){return Mn=s,V=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,L.H=t===null||t.memoizedState===null?mv:ld,Oi=!1,s=n(i,o),Oi=!1,Do&&(s=qy(e,n,i,o)),Gy(t),s}function Gy(t){L.H=ir;var e=de!==null&&de.next!==null;if(Mn=0,Me=de=V=null,La=!1,nr=0,ko=null,e)throw Error(w(300));t===null||Ue||(t=t.dependencies,t!==null&&Da(t)&&(Ue=!0))}function qy(t,e,n,i){V=t;var o=0;do{if(Do&&(ko=null),nr=0,Do=!1,25<=o)throw Error(w(301));if(o+=1,Me=de=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}L.H=hv,s=e(n,i)}while(Do);return s}function QC(){var t=L.H,e=t.useState()[0];return e=typeof e.then=="function"?gr(e):e,t=t.useState()[0],(de!==null?de.memoizedState:null)!==t&&(V.flags|=1024),e}function Wf(){var t=Ha!==0;return Ha=0,t}function jf(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ed(t){if(La){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}La=!1}Mn=0,Me=de=V=null,Do=!1,nr=Ha=0,ko=null}function ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?V.memoizedState=Me=t:Me=Me.next=t,Me}function Ne(){if(de===null){var t=V.alternate;t=t!==null?t.memoizedState:null}else t=de.next;var e=Me===null?V.memoizedState:Me.next;if(e!==null)Me=e,de=t;else{if(t===null)throw V.alternate===null?Error(w(467)):Error(w(310));de=t,t={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},Me===null?V.memoizedState=Me=t:Me=Me.next=t}return Me}function rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gr(t){var e=nr;return nr+=1,ko===null&&(ko=[]),t=Dy(ko,t,e),e=V,(Me===null?e.memoizedState:Me.next)===null&&(e=e.alternate,L.H=e===null||e.memoizedState===null?mv:ld),t}function al(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gr(t);if(t.$$typeof===An)return Qe(t)}throw Error(w(438,String(t)))}function td(t){var e=null,n=V.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=V.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(o){return o.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=rl(),V.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=PE;return e.index++,n}function Dn(t,e){return typeof e=="function"?e(t):e}function ha(t){var e=Ne();return nd(e,de,t)}function nd(t,e,n){var i=t.queue;if(i===null)throw Error(w(311));i.lastRenderedReducer=n;var o=t.baseQueue,s=i.pending;if(s!==null){if(o!==null){var r=o.next;o.next=s.next,s.next=r}e.baseQueue=o=s,i.pending=null}if(s=t.baseState,o===null)t.memoizedState=s;else{e=o.next;var l=r=null,u=null,f=e,d=!1;do{var p=f.lane&-536870913;if(p!==f.lane?(K&p)===p:(Mn&p)===p){var m=f.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),p===Ho&&(d=!0);else if((Mn&m)===m){f=f.next,m===Ho&&(d=!0);continue}else p={lane:0,revertLane:f.revertLane,gesture:null,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=p,r=s):u=u.next=p,V.lanes|=m,yi|=m;p=f.action,Oi&&n(s,p),s=f.hasEagerState?f.eagerState:n(s,p)}else m={lane:p,revertLane:f.revertLane,gesture:f.gesture,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null},u===null?(l=u=m,r=s):u=u.next=m,V.lanes|=p,yi|=p;f=f.next}while(f!==null&&f!==e);if(u===null?r=s:u.next=l,!bt(s,t.memoizedState)&&(Ue=!0,d&&(n=Io,n!==null)))throw n;t.memoizedState=s,t.baseState=r,t.baseQueue=u,i.lastRenderedState=s}return o===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function mc(t){var e=Ne(),n=e.queue;if(n===null)throw Error(w(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do s=t(s,r.action),r=r.next;while(r!==o);bt(s,e.memoizedState)||(Ue=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Oy(t,e,n){var i=V,o=Ne(),s=Q;if(s){if(n===void 0)throw Error(w(407));n=n()}else n=e();var r=!bt((de||o).memoizedState,n);if(r&&(o.memoizedState=n,Ue=!0),o=o.queue,id(Vy.bind(null,i,o,t),[t]),o.getSnapshot!==e||r||Me!==null&&Me.memoizedState.tag&1){if(i.flags|=2048,qo(9,{destroy:void 0},zy.bind(null,i,o,n,e),null),pe===null)throw Error(w(349));s||(Mn&127)!==0||Fy(i,e,n)}return n}function Fy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=V.updateQueue,e===null?(e=rl(),V.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zy(t,e,n,i){e.value=n,e.getSnapshot=i,By(e)&&$y(t)}function Vy(t,e,n){return n(function(){By(e)&&$y(t)})}function By(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bt(t,n)}catch{return!0}}function $y(t){var e=$i(t,2);e!==null&&dt(e,t,2)}function sf(t){var e=ot();if(typeof t=="function"){var n=t;if(t=n(),Oi){ei(!0);try{n()}finally{ei(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:t},e}function Yy(t,e,n,i){return t.baseState=n,nd(t,de,typeof i=="function"?i:Dn)}function ZC(t,e,n,i,o){if(ul(t))throw Error(w(485));if(t=e.action,t!==null){var s={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};L.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,Jy(e,s)):(s.next=n.next,e.pending=n.next=s)}}function Jy(t,e){var n=e.action,i=e.payload,o=t.state;if(e.isTransition){var s=L.T,r={};L.T=r;try{var l=n(o,i),u=L.S;u!==null&&u(r,l),Yh(t,e,l)}catch(f){rf(t,e,f)}finally{s!==null&&r.types!==null&&(s.types=r.types),L.T=s}}else try{s=n(o,i),Yh(t,e,s)}catch(f){rf(t,e,f)}}function Yh(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Jh(t,e,i)},function(i){return rf(t,e,i)}):Jh(t,e,n)}function Jh(t,e,n){e.status="fulfilled",e.value=n,Ky(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Jy(t,n)))}function rf(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,Ky(e),e=e.next;while(e!==i)}t.action=null}function Ky(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Xy(t,e){return e}function Kh(t,e){if(Q){var n=pe.formState;if(n!==null){e:{var i=V;if(Q){if(ve){t:{for(var o=ve,s=qt;o.nodeType!==8;){if(!s){o=null;break t}if(o=Ft(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){ve=Ft(o.nextSibling),i=o.data==="F!";break e}}hi(i)}i=!1}i&&(e=n[0])}}return n=ot(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xy,lastRenderedState:e},n.queue=i,n=fv.bind(null,V,i),i.dispatch=n,i=sf(!1),s=ad.bind(null,V,!1,i.queue),i=ot(),o={state:e,dispatch:null,action:t,pending:null},i.queue=o,n=ZC.bind(null,V,o,s,n),o.dispatch=n,i.memoizedState=t,[e,n,!1]}function Xh(t){var e=Ne();return Qy(e,de,t)}function Qy(t,e,n){if(e=nd(t,e,Xy)[0],t=ha(Dn)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=gr(e)}catch(r){throw r===Ko?sl:r}else i=e;e=Ne();var o=e.queue,s=o.dispatch;return n!==e.memoizedState&&(V.flags|=2048,qo(9,{destroy:void 0},WC.bind(null,o,n),null)),[i,s,t]}function WC(t,e){t.action=e}function Qh(t){var e=Ne(),n=de;if(n!==null)return Qy(e,n,t);Ne(),e=e.memoizedState,n=Ne();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function qo(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=V.updateQueue,e===null&&(e=rl(),V.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Zy(){return Ne().memoizedState}function ga(t,e,n,i){var o=ot();V.flags|=t,o.memoizedState=qo(1|e,{destroy:void 0},n,i===void 0?null:i)}function ll(t,e,n,i){var o=Ne();i=i===void 0?null:i;var s=o.memoizedState.inst;de!==null&&i!==null&&Qf(i,de.memoizedState.deps)?o.memoizedState=qo(e,s,n,i):(V.flags|=t,o.memoizedState=qo(1|e,s,n,i))}function Zh(t,e){ga(8390656,8,t,e)}function id(t,e){ll(2048,8,t,e)}function jC(t){V.flags|=4;var e=V.updateQueue;if(e===null)e=rl(),V.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function Wy(t){var e=Ne().memoizedState;return jC({ref:e,nextImpl:t}),function(){if((te&2)!==0)throw Error(w(440));return e.impl.apply(void 0,arguments)}}function jy(t,e){return ll(4,2,t,e)}function ev(t,e){return ll(4,4,t,e)}function tv(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nv(t,e,n){n=n!=null?n.concat([t]):null,ll(4,4,tv.bind(null,e,t),n)}function od(){}function iv(t,e){var n=Ne();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Qf(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function ov(t,e){var n=Ne();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Qf(e,i[1]))return i[0];if(i=t(),Oi){ei(!0);try{t()}finally{ei(!1)}}return n.memoizedState=[i,e],i}function sd(t,e,n){return n===void 0||(Mn&1073741824)!==0&&(K&261930)===0?t.memoizedState=e:(t.memoizedState=n,t=Yv(),V.lanes|=t,yi|=t,n)}function sv(t,e,n,i){return bt(n,e)?n:Go.current!==null?(t=sd(t,n,i),bt(t,e)||(Ue=!0),t):(Mn&42)===0||(Mn&1073741824)!==0&&(K&261930)===0?(Ue=!0,t.memoizedState=n):(t=Yv(),V.lanes|=t,yi|=t,e)}function rv(t,e,n,i,o){var s=ne.p;ne.p=s!==0&&8>s?s:8;var r=L.T,l={};L.T=l,ad(t,!1,e,n);try{var u=o(),f=L.S;if(f!==null&&f(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=KC(u,i);Vs(t,e,d,wt(t))}else Vs(t,e,i,wt(t))}catch(p){Vs(t,e,{then:function(){},status:"rejected",reason:p},wt())}finally{ne.p=s,r!==null&&l.types!==null&&(r.types=l.types),L.T=r}}function eA(){}function af(t,e,n,i){if(t.tag!==5)throw Error(w(476));var o=av(t).queue;rv(t,o,e,Di,n===null?eA:function(){return lv(t),n(i)})}function av(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Di,baseState:Di,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:Di},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function lv(t){var e=av(t);e.next===null&&(e=t.alternate.memoizedState),Vs(t,e.next.queue,{},wt())}function rd(){return Qe(rr)}function uv(){return Ne().memoizedState}function cv(){return Ne().memoizedState}function tA(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=wt();t=ai(n);var i=li(e,t,n);i!==null&&(dt(i,e,n),Os(i,e,n)),e={cache:$f()},t.payload=e;return}e=e.return}}function nA(t,e,n){var i=wt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ul(t)?dv(e,n):(n=Ff(t,e,n,i),n!==null&&(dt(n,t,i),pv(n,e,i)))}function fv(t,e,n){var i=wt();Vs(t,e,n,i)}function Vs(t,e,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ul(t))dv(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var r=e.lastRenderedState,l=s(r,n);if(o.hasEagerState=!0,o.eagerState=l,bt(l,r))return ol(t,e,o,0),pe===null&&il(),!1}catch{}finally{}if(n=Ff(t,e,o,i),n!==null)return dt(n,t,i),pv(n,e,i),!0}return!1}function ad(t,e,n,i){if(i={lane:2,revertLane:gd(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ul(t)){if(e)throw Error(w(479))}else e=Ff(t,n,i,2),e!==null&&dt(e,t,2)}function ul(t){var e=t.alternate;return t===V||e!==null&&e===V}function dv(t,e){Do=La=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pv(t,e,n){if((n&4194048)!==0){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Wg(t,n)}}var ir={readContext:Qe,use:al,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe};ir.useEffectEvent=xe;var mv={readContext:Qe,use:al,useCallback:function(t,e){return ot().memoizedState=[t,e===void 0?null:e],t},useContext:Qe,useEffect:Zh,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,ga(4194308,4,tv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ga(4194308,4,t,e)},useInsertionEffect:function(t,e){ga(4,2,t,e)},useMemo:function(t,e){var n=ot();e=e===void 0?null:e;var i=t();if(Oi){ei(!0);try{t()}finally{ei(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=ot();if(n!==void 0){var o=n(e);if(Oi){ei(!0);try{n(e)}finally{ei(!1)}}}else o=e;return i.memoizedState=i.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},i.queue=t,t=t.dispatch=nA.bind(null,V,t),[i.memoizedState,t]},useRef:function(t){var e=ot();return t={current:t},e.memoizedState=t},useState:function(t){t=sf(t);var e=t.queue,n=fv.bind(null,V,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:od,useDeferredValue:function(t,e){var n=ot();return sd(n,t,e)},useTransition:function(){var t=sf(!1);return t=rv.bind(null,V,t.queue,!0,!1),ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=V,o=ot();if(Q){if(n===void 0)throw Error(w(407));n=n()}else{if(n=e(),pe===null)throw Error(w(349));(K&127)!==0||Fy(i,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,Zh(Vy.bind(null,i,s,t),[t]),i.flags|=2048,qo(9,{destroy:void 0},zy.bind(null,i,s,n,e),null),n},useId:function(){var t=ot(),e=pe.identifierPrefix;if(Q){var n=un,i=ln;n=(i&~(1<<32-xt(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Ha++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=XC++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:rd,useFormState:Kh,useActionState:Kh,useOptimistic:function(t){var e=ot();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ad.bind(null,V,!0,n),n.dispatch=e,[t,e]},useMemoCache:td,useCacheRefresh:function(){return ot().memoizedState=tA.bind(null,V)},useEffectEvent:function(t){var e=ot(),n={impl:t};return e.memoizedState=n,function(){if((te&2)!==0)throw Error(w(440));return n.impl.apply(void 0,arguments)}}},ld={readContext:Qe,use:al,useCallback:iv,useContext:Qe,useEffect:id,useImperativeHandle:nv,useInsertionEffect:jy,useLayoutEffect:ev,useMemo:ov,useReducer:ha,useRef:Zy,useState:function(){return ha(Dn)},useDebugValue:od,useDeferredValue:function(t,e){var n=Ne();return sv(n,de.memoizedState,t,e)},useTransition:function(){var t=ha(Dn)[0],e=Ne().memoizedState;return[typeof t=="boolean"?t:gr(t),e]},useSyncExternalStore:Oy,useId:uv,useHostTransitionStatus:rd,useFormState:Xh,useActionState:Xh,useOptimistic:function(t,e){var n=Ne();return Yy(n,de,t,e)},useMemoCache:td,useCacheRefresh:cv};ld.useEffectEvent=Wy;var hv={readContext:Qe,use:al,useCallback:iv,useContext:Qe,useEffect:id,useImperativeHandle:nv,useInsertionEffect:jy,useLayoutEffect:ev,useMemo:ov,useReducer:mc,useRef:Zy,useState:function(){return mc(Dn)},useDebugValue:od,useDeferredValue:function(t,e){var n=Ne();return de===null?sd(n,t,e):sv(n,de.memoizedState,t,e)},useTransition:function(){var t=mc(Dn)[0],e=Ne().memoizedState;return[typeof t=="boolean"?t:gr(t),e]},useSyncExternalStore:Oy,useId:uv,useHostTransitionStatus:rd,useFormState:Qh,useActionState:Qh,useOptimistic:function(t,e){var n=Ne();return de!==null?Yy(n,de,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:td,useCacheRefresh:cv};hv.useEffectEvent=Wy;function hc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lf={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=wt(),o=ai(i);o.payload=e,n!=null&&(o.callback=n),e=li(t,o,i),e!==null&&(dt(e,t,i),Os(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=wt(),o=ai(i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=li(t,o,i),e!==null&&(dt(e,t,i),Os(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),i=ai(n);i.tag=2,e!=null&&(i.callback=e),e=li(t,i,n),e!==null&&(dt(e,t,n),Os(e,t,n))}};function Wh(t,e,n,i,o,s,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,r):e.prototype&&e.prototype.isPureReactComponent?!Ws(n,i)||!Ws(o,s):!0}function jh(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&lf.enqueueReplaceState(e,e.state,null)}function Fi(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Se({},n));for(var o in t)n[o]===void 0&&(n[o]=t[o])}return n}function gv(t){Na(t)}function yv(t){console.error(t)}function vv(t){Na(t)}function Ga(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function eg(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function uf(t,e,n){return n=ai(n),n.tag=3,n.payload={element:null},n.callback=function(){Ga(t,e)},n}function Sv(t){return t=ai(t),t.tag=3,t}function Tv(t,e,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=i.value;t.payload=function(){return o(s)},t.callback=function(){eg(e,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){eg(e,n,i),typeof o!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function iA(t,e,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Jo(e,n,o,!0),n=Rt.current,n!==null){switch(n.tag){case 31:case 13:return Ot===null?Va():n.alternate===null&&we===0&&(we=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===ka?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),wc(t,i,o)),!1;case 22:return n.flags|=65536,i===ka?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),wc(t,i,o)),!1}throw Error(w(435,n.tag))}return wc(t,i,o),Va(),!1}if(Q)return e=Rt.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=o,i!==Xc&&(t=Error(w(422),{cause:i}),er(Gt(t,n)))):(i!==Xc&&(e=Error(w(423),{cause:i}),er(Gt(e,n))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,i=Gt(i,n),o=uf(t.stateNode,i,o),pc(t,o),we!==4&&(we=2)),!1;var s=Error(w(520),{cause:i});if(s=Gt(s,n),Ys===null?Ys=[s]:Ys.push(s),we!==4&&(we=2),e===null)return!0;i=Gt(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,t=uf(n.stateNode,i,t),pc(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(ui===null||!ui.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Sv(o),Tv(o,t,n,i),pc(n,o),!1}n=n.return}while(n!==null);return!1}var ud=Error(w(461)),Ue=!1;function Je(t,e,n,i){e.child=t===null?Uy(e,null,n,i):qi(e,t.child,n,i)}function tg(t,e,n,i,o){n=n.render;var s=e.ref;if("ref"in i){var r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}else r=i;return Gi(e),i=Zf(t,e,n,r,s,o),l=Wf(),t!==null&&!Ue?(jf(t,e,o),kn(t,e,o)):(Q&&l&&Vf(e),e.flags|=1,Je(t,e,i,o),e.child)}function ng(t,e,n,i,o){if(t===null){var s=n.type;return typeof s=="function"&&!zf(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,_v(t,e,s,i,o)):(t=pa(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!cd(t,o)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ws,n(r,i)&&t.ref===e.ref)return kn(t,e,o)}return e.flags|=1,t=bn(s,i),t.ref=e.ref,t.return=e,e.child=t}function _v(t,e,n,i,o){if(t!==null){var s=t.memoizedProps;if(Ws(s,i)&&t.ref===e.ref)if(Ue=!1,e.pendingProps=i=s,cd(t,o))(t.flags&131072)!==0&&(Ue=!0);else return e.lanes=t.lanes,kn(t,e,o)}return cf(t,e,n,i,o)}function Ev(t,e,n,i){var o=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((e.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~s}else i=0,e.child=null;return ig(t,e,s,n,i)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&ma(e,s!==null?s.cachePool:null),s!==null?$h(e,s):nf(),Hy(e);else return i=e.lanes=536870912,ig(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(ma(e,s.cachePool),$h(e,s),Wn(e),e.memoizedState=null):(t!==null&&ma(e,null),nf(),Wn(e));return Je(t,e,o,n),e.child}function Us(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function ig(t,e,n,i,o){var s=Yf();return s=s===null?null:{parent:ke._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&ma(e,null),nf(),Hy(e),t!==null&&Jo(t,e,i,!0),e.childLanes=o,null}function ya(t,e){return e=qa({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function og(t,e,n){return qi(e,t.child,null,n),t=ya(e,e.pendingProps),t.flags|=2,Tt(e),e.memoizedState=null,t}function oA(t,e,n){var i=e.pendingProps,o=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Q){if(i.mode==="hidden")return t=ya(e,i),e.lanes=536870912,Us(null,t);if(of(e),(t=ve)?(t=m0(t,qt),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:mi!==null?{id:ln,overflow:un}:null,retryLane:536870912,hydrationErrors:null},n=by(t),n.return=e,e.child=n,Xe=e,ve=null)):t=null,t===null)throw hi(e);return e.lanes=536870912,null}return ya(e,i)}var s=t.memoizedState;if(s!==null){var r=s.dehydrated;if(of(e),o)if(e.flags&256)e.flags&=-257,e=og(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(w(558));else if(Ue||Jo(t,e,n,!1),o=(n&t.childLanes)!==0,Ue||o){if(i=pe,i!==null&&(r=jg(i,n),r!==0&&r!==s.retryLane))throw s.retryLane=r,$i(t,r),dt(i,t,r),ud;Va(),e=og(t,e,n)}else t=s.treeContext,ve=Ft(r.nextSibling),Xe=e,Q=!0,ri=null,qt=!1,t!==null&&Ny(e,t),e=ya(e,i),e.flags|=4096;return e}return t=bn(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function va(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(w(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function cf(t,e,n,i,o){return Gi(e),n=Zf(t,e,n,i,void 0,o),i=Wf(),t!==null&&!Ue?(jf(t,e,o),kn(t,e,o)):(Q&&i&&Vf(e),e.flags|=1,Je(t,e,n,o),e.child)}function sg(t,e,n,i,o,s){return Gi(e),e.updateQueue=null,n=qy(e,i,n,o),Gy(t),i=Wf(),t!==null&&!Ue?(jf(t,e,s),kn(t,e,s)):(Q&&i&&Vf(e),e.flags|=1,Je(t,e,n,s),e.child)}function rg(t,e,n,i,o){if(Gi(e),e.stateNode===null){var s=Co,r=n.contextType;typeof r=="object"&&r!==null&&(s=Qe(r)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=lf,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},Kf(e),r=n.contextType,s.context=typeof r=="object"&&r!==null?Qe(r):Co,s.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(hc(e,n,r,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&lf.enqueueReplaceState(s,s.state,null),zs(e,i,s,o),Fs(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,u=Fi(n,l);s.props=u;var f=s.context,d=n.contextType;r=Co,typeof d=="object"&&d!==null&&(r=Qe(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||f!==r)&&jh(e,s,i,r),Xn=!1;var m=e.memoizedState;s.state=m,zs(e,i,s,o),Fs(),f=e.memoizedState,l||m!==f||Xn?(typeof p=="function"&&(hc(e,n,p,i),f=e.memoizedState),(u=Xn||Wh(e,n,u,i,m,f,r))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),s.props=i,s.state=f,s.context=r,i=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,ef(t,e),r=e.memoizedProps,d=Fi(n,r),s.props=d,p=e.pendingProps,m=s.context,f=n.contextType,u=Co,typeof f=="object"&&f!==null&&(u=Qe(f)),l=n.getDerivedStateFromProps,(f=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==p||m!==u)&&jh(e,s,i,u),Xn=!1,m=e.memoizedState,s.state=m,zs(e,i,s,o),Fs();var h=e.memoizedState;r!==p||m!==h||Xn||t!==null&&t.dependencies!==null&&Da(t.dependencies)?(typeof l=="function"&&(hc(e,n,l,i),h=e.memoizedState),(d=Xn||Wh(e,n,d,i,m,h,u)||t!==null&&t.dependencies!==null&&Da(t.dependencies))?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,h,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,h,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=h),s.props=i,s.state=h,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,va(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=qi(e,t.child,null,o),e.child=qi(e,null,n,o)):Je(t,e,n,o),e.memoizedState=s.state,t=e.child):t=kn(t,e,o),t}function ag(t,e,n,i){return Hi(),e.flags|=256,Je(t,e,n,i),e.child}var gc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yc(t){return{baseLanes:t,cachePool:My()}}function vc(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Et),t}function Cv(t,e,n){var i=e.pendingProps,o=!1,s=(e.flags&128)!==0,r;if((r=s)||(r=t!==null&&t.memoizedState===null?!1:(Re.current&2)!==0),r&&(o=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(Q){if(o?Zn(e):Wn(e),(t=ve)?(t=m0(t,qt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:mi!==null?{id:ln,overflow:un}:null,retryLane:536870912,hydrationErrors:null},n=by(t),n.return=e,e.child=n,Xe=e,ve=null)):t=null,t===null)throw hi(e);return Af(t)?e.lanes=32:e.lanes=536870912,null}var l=i.children;return i=i.fallback,o?(Wn(e),o=e.mode,l=qa({mode:"hidden",children:l},o),i=ki(i,o,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,i=e.child,i.memoizedState=yc(n),i.childLanes=vc(t,r,n),e.memoizedState=gc,Us(null,i)):(Zn(e),ff(e,l))}var u=t.memoizedState;if(u!==null&&(l=u.dehydrated,l!==null)){if(s)e.flags&256?(Zn(e),e.flags&=-257,e=Sc(t,e,n)):e.memoizedState!==null?(Wn(e),e.child=t.child,e.flags|=128,e=null):(Wn(e),l=i.fallback,o=e.mode,i=qa({mode:"visible",children:i.children},o),l=ki(l,o,n,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,qi(e,t.child,null,n),i=e.child,i.memoizedState=yc(n),i.childLanes=vc(t,r,n),e.memoizedState=gc,e=Us(null,i));else if(Zn(e),Af(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var f=r.dgst;r=f,i=Error(w(419)),i.stack="",i.digest=r,er({value:i,source:null,stack:null}),e=Sc(t,e,n)}else if(Ue||Jo(t,e,n,!1),r=(n&t.childLanes)!==0,Ue||r){if(r=pe,r!==null&&(i=jg(r,n),i!==0&&i!==u.retryLane))throw u.retryLane=i,$i(t,i),dt(r,t,i),ud;Cf(l)||Va(),e=Sc(t,e,n)}else Cf(l)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,ve=Ft(l.nextSibling),Xe=e,Q=!0,ri=null,qt=!1,t!==null&&Ny(e,t),e=ff(e,i.children),e.flags|=4096);return e}return o?(Wn(e),l=i.fallback,o=e.mode,u=t.child,f=u.sibling,i=bn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,f!==null?l=bn(f,l):(l=ki(l,o,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,Us(null,i),i=e.child,l=t.child.memoizedState,l===null?l=yc(n):(o=l.cachePool,o!==null?(u=ke._currentValue,o=o.parent!==u?{parent:u,pool:u}:o):o=My(),l={baseLanes:l.baseLanes|n,cachePool:o}),i.memoizedState=l,i.childLanes=vc(t,r,n),e.memoizedState=gc,Us(t.child,i)):(Zn(e),n=t.child,t=n.sibling,n=bn(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function ff(t,e){return e=qa({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function qa(t,e){return t=_t(22,t,null,e),t.lanes=0,t}function Sc(t,e,n){return qi(e,t.child,null,n),t=ff(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lg(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Zc(t.return,e,n)}function Tc(t,e,n,i,o,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=o,r.treeForkCount=s)}function Av(t,e,n){var i=e.pendingProps,o=i.revealOrder,s=i.tail;i=i.children;var r=Re.current,l=(r&2)!==0;if(l?(r=r&1|2,e.flags|=128):r&=1,he(Re,r),Je(t,e,i,n),i=Q?js:0,!l&&t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lg(t,n,e);else if(t.tag===19)lg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Pa(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Tc(e,!1,o,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Pa(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Tc(e,!0,n,null,s,i);break;case"together":Tc(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yi|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(Jo(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(w(153));if(e.child!==null){for(t=e.child,n=bn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cd(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&Da(t)))}function sA(t,e,n){switch(e.tag){case 3:xa(e,e.stateNode.containerInfo),Qn(e,ke,t.memoizedState.cache),Hi();break;case 27:case 5:Gc(e);break;case 4:xa(e,e.stateNode.containerInfo);break;case 10:Qn(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,of(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Zn(e),e.flags|=128,null):(n&e.child.childLanes)!==0?Cv(t,e,n):(Zn(e),t=kn(t,e,n),t!==null?t.sibling:null);Zn(e);break;case 19:var o=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Jo(t,e,n,!1),i=(n&e.childLanes)!==0),o){if(i)return Av(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),he(Re,Re.current),i)break;return null;case 22:return e.lanes=0,Ev(t,e,n,e.pendingProps);case 24:Qn(e,ke,t.memoizedState.cache)}return kn(t,e,n)}function xv(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Ue=!0;else{if(!cd(t,n)&&(e.flags&128)===0)return Ue=!1,sA(t,e,n);Ue=(t.flags&131072)!==0}else Ue=!1,Q&&(e.flags&1048576)!==0&&Ry(e,js,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Ii(e.elementType),e.type=t,typeof t=="function")zf(t)?(i=Fi(t,i),e.tag=1,e=rg(null,e,t,i,n)):(e.tag=0,e=cf(null,e,t,i,n));else{if(t!=null){var o=t.$$typeof;if(o===Rf){e.tag=11,e=tg(null,e,t,i,n);break e}else if(o===Nf){e.tag=14,e=ng(null,e,t,i,n);break e}}throw e=Lc(t)||t,Error(w(306,e,""))}}return e;case 0:return cf(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,o=Fi(i,e.pendingProps),rg(t,e,i,o,n);case 3:e:{if(xa(e,e.stateNode.containerInfo),t===null)throw Error(w(387));i=e.pendingProps;var s=e.memoizedState;o=s.element,ef(t,e),zs(e,i,null,n);var r=e.memoizedState;if(i=r.cache,Qn(e,ke,i),i!==s.cache&&Wc(e,[ke],n,!0),Fs(),i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=ag(t,e,i,n);break e}else if(i!==o){o=Gt(Error(w(424)),e),er(o),e=ag(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ve=Ft(t.firstChild),Xe=e,Q=!0,ri=null,qt=!0,n=Uy(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Hi(),i===o){e=kn(t,e,n);break e}Je(t,e,i,n)}e=e.child}return e;case 26:return va(t,e),t===null?(n=Ig(e.type,null,e.pendingProps,null))?e.memoizedState=n:Q||(n=e.type,t=e.pendingProps,i=Ja(si.current).createElement(n),i[Ke]=e,i[pt]=t,Ze(i,n,t),Ve(i),e.stateNode=i):e.memoizedState=Ig(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Gc(e),t===null&&Q&&(i=e.stateNode=h0(e.type,e.pendingProps,si.current),Xe=e,qt=!0,o=ve,Si(e.type)?(xf=o,ve=Ft(i.firstChild)):ve=o),Je(t,e,e.pendingProps.children,n),va(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Q&&((o=i=ve)&&(i=kA(i,e.type,e.pendingProps,qt),i!==null?(e.stateNode=i,Xe=e,ve=Ft(i.firstChild),qt=!1,o=!0):o=!1),o||hi(e)),Gc(e),o=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,i=s.children,_f(o,s)?i=null:r!==null&&_f(o,r)&&(e.flags|=32),e.memoizedState!==null&&(o=Zf(t,e,QC,null,null,n),rr._currentValue=o),va(t,e),Je(t,e,i,n),e.child;case 6:return t===null&&Q&&((t=n=ve)&&(n=UA(n,e.pendingProps,qt),n!==null?(e.stateNode=n,Xe=e,ve=null,t=!0):t=!1),t||hi(e)),null;case 13:return Cv(t,e,n);case 4:return xa(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=qi(e,null,i,n):Je(t,e,i,n),e.child;case 11:return tg(t,e,e.type,e.pendingProps,n);case 7:return Je(t,e,e.pendingProps,n),e.child;case 8:return Je(t,e,e.pendingProps.children,n),e.child;case 12:return Je(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Qn(e,e.type,i.value),Je(t,e,i.children,n),e.child;case 9:return o=e.type._context,i=e.pendingProps.children,Gi(e),o=Qe(o),i=i(o),e.flags|=1,Je(t,e,i,n),e.child;case 14:return ng(t,e,e.type,e.pendingProps,n);case 15:return _v(t,e,e.type,e.pendingProps,n);case 19:return Av(t,e,n);case 31:return oA(t,e,n);case 22:return Ev(t,e,n,e.pendingProps);case 24:return Gi(e),i=Qe(ke),t===null?(o=Yf(),o===null&&(o=pe,s=$f(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),e.memoizedState={parent:i,cache:o},Kf(e),Qn(e,ke,o)):((t.lanes&n)!==0&&(ef(t,e),zs(e,null,null,n),Fs()),o=t.memoizedState,s=e.memoizedState,o.parent!==i?(o={parent:i,cache:i},e.memoizedState=o,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=o),Qn(e,ke,i)):(i=s.cache,Qn(e,ke,i),i!==o.cache&&Wc(e,[ke],n,!0))),Je(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(w(156,e.tag))}function vn(t){t.flags|=4}function _c(t,e,n,i,o){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(Xv())t.flags|=8192;else throw Pi=ka,Jf}else t.flags&=-16777217}function ug(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!v0(e))if(Xv())t.flags|=8192;else throw Pi=ka,Jf}function na(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Qg():536870912,t.lanes|=e,Oo|=e)}function bs(t,e){if(!Q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function rA(t,e,n){var i=e.pendingProps;switch(Bf(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(e),null;case 1:return ye(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Rn(ke),Uo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(co(e)?vn(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,dc())),ye(e),null;case 26:var o=e.type,s=e.memoizedState;return t===null?(vn(e),s!==null?(ye(e),ug(e,s)):(ye(e),_c(e,o,null,i,n))):s?s!==t.memoizedState?(vn(e),ye(e),ug(e,s)):(ye(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&vn(e),ye(e),_c(e,o,t,i,n)),null;case 27:if(wa(e),n=si.current,o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&vn(e);else{if(!i){if(e.stateNode===null)throw Error(w(166));return ye(e),null}t=fn.current,co(e)?Gh(e,t):(t=h0(o,i,n),e.stateNode=t,vn(e))}return ye(e),null;case 5:if(wa(e),o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&vn(e);else{if(!i){if(e.stateNode===null)throw Error(w(166));return ye(e),null}if(s=fn.current,co(e))Gh(e,s);else{var r=Ja(si.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?r.createElement(o,{is:i.is}):r.createElement(o)}}s[Ke]=e,s[pt]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=s;e:switch(Ze(s,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&vn(e)}}return ye(e),_c(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&vn(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(w(166));if(t=si.current,co(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,o=Xe,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}t[Ke]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||f0(t.nodeValue,n)),t||hi(e,!0)}else t=Ja(t).createTextNode(i),t[Ke]=e,e.stateNode=t}return ye(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=co(e),n!==null){if(t===null){if(!i)throw Error(w(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(w(557));t[Ke]=e}else Hi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ye(e),t=!1}else n=dc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Tt(e),e):(Tt(e),null);if((e.flags&128)!==0)throw Error(w(558))}return ye(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=co(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(w(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(w(317));o[Ke]=e}else Hi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ye(e),o=!1}else o=dc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return e.flags&256?(Tt(e),e):(Tt(e),null)}return Tt(e),(e.flags&128)!==0?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),na(e,e.updateQueue),ye(e),null);case 4:return Uo(),t===null&&yd(e.stateNode.containerInfo),ye(e),null;case 10:return Rn(e.type),ye(e),null;case 19:if(Be(Re),i=e.memoizedState,i===null)return ye(e),null;if(o=(e.flags&128)!==0,s=i.rendering,s===null)if(o)bs(i,!1);else{if(we!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(s=Pa(t),s!==null){for(e.flags|=128,bs(i,!1),t=s.updateQueue,e.updateQueue=t,na(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)wy(n,t),n=n.sibling;return he(Re,Re.current&1|2),Q&&En(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Ct()>Fa&&(e.flags|=128,o=!0,bs(i,!1),e.lanes=4194304)}else{if(!o)if(t=Pa(s),t!==null){if(e.flags|=128,o=!0,t=t.updateQueue,e.updateQueue=t,na(e,t),bs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Q)return ye(e),null}else 2*Ct()-i.renderingStartTime>Fa&&n!==536870912&&(e.flags|=128,o=!0,bs(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ct(),t.sibling=null,n=Re.current,he(Re,o?n&1|2:n&1),Q&&En(e,i.treeForkCount),t):(ye(e),null);case 22:case 23:return Tt(e),Xf(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?(n&536870912)!==0&&(e.flags&128)===0&&(ye(e),e.subtreeFlags&6&&(e.flags|=8192)):ye(e),n=e.updateQueue,n!==null&&na(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Be(Ui),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Rn(ke),ye(e),null;case 25:return null;case 30:return null}throw Error(w(156,e.tag))}function aA(t,e){switch(Bf(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rn(ke),Uo(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return wa(e),null;case 31:if(e.memoizedState!==null){if(Tt(e),e.alternate===null)throw Error(w(340));Hi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Tt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(w(340));Hi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Re),null;case 4:return Uo(),null;case 10:return Rn(e.type),null;case 22:case 23:return Tt(e),Xf(),t!==null&&Be(Ui),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Rn(ke),null;case 25:return null;default:return null}}function wv(t,e){switch(Bf(e),e.tag){case 3:Rn(ke),Uo();break;case 26:case 27:case 5:wa(e);break;case 4:Uo();break;case 31:e.memoizedState!==null&&Tt(e);break;case 13:Tt(e);break;case 19:Be(Re);break;case 10:Rn(e.type);break;case 22:case 23:Tt(e),Xf(),t!==null&&Be(Ui);break;case 24:Rn(ke)}}function yr(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&t)===t){i=void 0;var s=n.create,r=n.inst;i=s(),r.destroy=i}n=n.next}while(n!==o)}}catch(l){ae(e,e.return,l)}}function gi(t,e,n){try{var i=e.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&t)===t){var r=i.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,o=e;var u=n,f=l;try{f()}catch(d){ae(o,u,d)}}}i=i.next}while(i!==s)}}catch(d){ae(e,e.return,d)}}function bv(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Ly(e,n)}catch(i){ae(t,t.return,i)}}}function Rv(t,e,n){n.props=Fi(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){ae(t,e,i)}}function Bs(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(o){ae(t,e,o)}}function cn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){ae(t,e,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){ae(t,e,o)}else n.current=null}function Nv(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){ae(t,t.return,o)}}function Ec(t,e,n){try{var i=t.stateNode;bA(i,t.type,n,e),i[pt]=e}catch(o){ae(t,t.return,o)}}function Iv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Si(t.type)||t.tag===4}function Cc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Si(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function df(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xn));else if(i!==4&&(i===27&&Si(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}function Oa(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Si(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Oa(t,e,n),t=t.sibling;t!==null;)Oa(t,e,n),t=t.sibling}function Mv(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,o=e.attributes;o.length;)e.removeAttributeNode(o[0]);Ze(e,i,n),e[Ke]=t,e[pt]=n}catch(s){ae(t,t.return,s)}}var Cn=!1,De=!1,Ac=!1,cg=typeof WeakSet=="function"?WeakSet:Set,ze=null;function lA(t,e){if(t=t.containerInfo,Sf=Za,t=vy(t),qf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,l=-1,u=-1,f=0,d=0,p=t,m=null;t:for(;;){for(var h;p!==n||o!==0&&p.nodeType!==3||(l=r+o),p!==s||i!==0&&p.nodeType!==3||(u=r+i),p.nodeType===3&&(r+=p.nodeValue.length),(h=p.firstChild)!==null;)m=p,p=h;for(;;){if(p===t)break t;if(m===n&&++f===o&&(l=r),m===s&&++d===i&&(u=r),(h=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=h}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tf={focusedElem:t,selectionRange:n},Za=!1,ze=e;ze!==null;)if(e=ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ze=t;else for(;ze!==null;){switch(e=ze,s=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)o=t[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&s!==null){t=void 0,n=e,o=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var v=Fi(n.type,o);t=i.getSnapshotBeforeUpdate(v,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(T){ae(n,n.return,T)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Ef(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ef(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(w(163))}if(t=e.sibling,t!==null){t.return=e.return,ze=t;break}ze=e.return}}function Dv(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Tn(t,n),i&4&&yr(5,n);break;case 1:if(Tn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){ae(n,n.return,r)}else{var o=Fi(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(o,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){ae(n,n.return,r)}}i&64&&bv(n),i&512&&Bs(n,n.return);break;case 3:if(Tn(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Ly(t,e)}catch(r){ae(n,n.return,r)}}break;case 27:e===null&&i&4&&Mv(n);case 26:case 5:Tn(t,n),e===null&&i&4&&Nv(n),i&512&&Bs(n,n.return);break;case 12:Tn(t,n);break;case 31:Tn(t,n),i&4&&Pv(t,n);break;case 13:Tn(t,n),i&4&&Lv(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=yA.bind(null,n),PA(t,n))));break;case 22:if(i=n.memoizedState!==null||Cn,!i){e=e!==null&&e.memoizedState!==null||De,o=Cn;var s=De;Cn=i,(De=e)&&!s?_n(t,n,(n.subtreeFlags&8772)!==0):Tn(t,n),Cn=o,De=s}break;case 30:break;default:Tn(t,n)}}function kv(t){var e=t.alternate;e!==null&&(t.alternate=null,kv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&kf(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ee=null,ct=!1;function Sn(t,e,n){for(n=n.child;n!==null;)Uv(t,e,n),n=n.sibling}function Uv(t,e,n){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(cr,n)}catch{}switch(n.tag){case 26:De||cn(n,e),Sn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:De||cn(n,e);var i=Ee,o=ct;Si(n.type)&&(Ee=n.stateNode,ct=!1),Sn(t,e,n),Ks(n.stateNode),Ee=i,ct=o;break;case 5:De||cn(n,e);case 6:if(i=Ee,o=ct,Ee=null,Sn(t,e,n),Ee=i,ct=o,Ee!==null)if(ct)try{(Ee.nodeType===9?Ee.body:Ee.nodeName==="HTML"?Ee.ownerDocument.body:Ee).removeChild(n.stateNode)}catch(s){ae(n,e,s)}else try{Ee.removeChild(n.stateNode)}catch(s){ae(n,e,s)}break;case 18:Ee!==null&&(ct?(t=Ee,xg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Bo(t)):xg(Ee,n.stateNode));break;case 4:i=Ee,o=ct,Ee=n.stateNode.containerInfo,ct=!0,Sn(t,e,n),Ee=i,ct=o;break;case 0:case 11:case 14:case 15:gi(2,n,e),De||gi(4,n,e),Sn(t,e,n);break;case 1:De||(cn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Rv(n,e,i)),Sn(t,e,n);break;case 21:Sn(t,e,n);break;case 22:De=(i=De)||n.memoizedState!==null,Sn(t,e,n),De=i;break;default:Sn(t,e,n)}}function Pv(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Bo(t)}catch(n){ae(e,e.return,n)}}}function Lv(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Bo(t)}catch(n){ae(e,e.return,n)}}function uA(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new cg),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new cg),e;default:throw Error(w(435,t.tag))}}function ia(t,e){var n=uA(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var o=vA.bind(null,t,i);i.then(o,o)}})}function lt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],s=t,r=e,l=r;e:for(;l!==null;){switch(l.tag){case 27:if(Si(l.type)){Ee=l.stateNode,ct=!1;break e}break;case 5:Ee=l.stateNode,ct=!1;break e;case 3:case 4:Ee=l.stateNode.containerInfo,ct=!0;break e}l=l.return}if(Ee===null)throw Error(w(160));Uv(s,r,o),Ee=null,ct=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Hv(e,t),e=e.sibling}var Yt=null;function Hv(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:lt(e,t),ut(t),i&4&&(gi(3,t,t.return),yr(3,t),gi(5,t,t.return));break;case 1:lt(e,t),ut(t),i&512&&(De||n===null||cn(n,n.return)),i&64&&Cn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=Yt;if(lt(e,t),ut(t),i&512&&(De||n===null||cn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":s=o.getElementsByTagName("title")[0],(!s||s[pr]||s[Ke]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(i),o.head.insertBefore(s,o.querySelector("head > title"))),Ze(s,i,n),s[Ke]=t,Ve(s),i=s;break e;case"link":var r=Dg("link","href",o).get(i+(n.href||""));if(r){for(var l=0;l<r.length;l++)if(s=r[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(l,1);break t}}s=o.createElement(i),Ze(s,i,n),o.head.appendChild(s);break;case"meta":if(r=Dg("meta","content",o).get(i+(n.content||""))){for(l=0;l<r.length;l++)if(s=r[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(l,1);break t}}s=o.createElement(i),Ze(s,i,n),o.head.appendChild(s);break;default:throw Error(w(468,i))}s[Ke]=t,Ve(s),i=s}t.stateNode=i}else kg(o,t.type,t.stateNode);else t.stateNode=Mg(o,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?kg(o,t.type,t.stateNode):Mg(o,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Ec(t,t.memoizedProps,n.memoizedProps)}break;case 27:lt(e,t),ut(t),i&512&&(De||n===null||cn(n,n.return)),n!==null&&i&4&&Ec(t,t.memoizedProps,n.memoizedProps);break;case 5:if(lt(e,t),ut(t),i&512&&(De||n===null||cn(n,n.return)),t.flags&32){o=t.stateNode;try{Lo(o,"")}catch(v){ae(t,t.return,v)}}i&4&&t.stateNode!=null&&(o=t.memoizedProps,Ec(t,o,n!==null?n.memoizedProps:o)),i&1024&&(Ac=!0);break;case 6:if(lt(e,t),ut(t),i&4){if(t.stateNode===null)throw Error(w(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(v){ae(t,t.return,v)}}break;case 3:if(_a=null,o=Yt,Yt=Ka(e.containerInfo),lt(e,t),Yt=o,ut(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Bo(e.containerInfo)}catch(v){ae(t,t.return,v)}Ac&&(Ac=!1,Gv(t));break;case 4:i=Yt,Yt=Ka(t.stateNode.containerInfo),lt(e,t),ut(t),Yt=i;break;case 12:lt(e,t),ut(t);break;case 31:lt(e,t),ut(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ia(t,i)));break;case 13:lt(e,t),ut(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(cl=Ct()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ia(t,i)));break;case 22:o=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,f=Cn,d=De;if(Cn=f||o,De=d||u,lt(e,t),De=d,Cn=f,ut(t),i&8192)e:for(e=t.stateNode,e._visibility=o?e._visibility&-2:e._visibility|1,o&&(n===null||u||Cn||De||Mi(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(s=u.stateNode,o)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(v){ae(u,u.return,v)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(v){ae(u,u.return,v)}}}else if(e.tag===18){if(n===null){u=e;try{var h=u.stateNode;o?wg(h,!0):wg(u.stateNode,!1)}catch(v){ae(u,u.return,v)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,ia(t,n))));break;case 19:lt(e,t),ut(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,ia(t,i)));break;case 30:break;case 21:break;default:lt(e,t),ut(t)}}function ut(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(Iv(i)){n=i;break}i=i.return}if(n==null)throw Error(w(160));switch(n.tag){case 27:var o=n.stateNode,s=Cc(t);Oa(t,s,o);break;case 5:var r=n.stateNode;n.flags&32&&(Lo(r,""),n.flags&=-33);var l=Cc(t);Oa(t,l,r);break;case 3:case 4:var u=n.stateNode.containerInfo,f=Cc(t);df(t,f,u);break;default:throw Error(w(161))}}catch(d){ae(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Gv(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Tn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Dv(t,e.alternate,e),e=e.sibling}function Mi(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:gi(4,e,e.return),Mi(e);break;case 1:cn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Rv(e,e.return,n),Mi(e);break;case 27:Ks(e.stateNode);case 26:case 5:cn(e,e.return),Mi(e);break;case 22:e.memoizedState===null&&Mi(e);break;case 30:Mi(e);break;default:Mi(e)}t=t.sibling}}function _n(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,o=t,s=e,r=s.flags;switch(s.tag){case 0:case 11:case 15:_n(o,s,n),yr(4,s);break;case 1:if(_n(o,s,n),i=s,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(f){ae(i,i.return,f)}if(i=s,o=i.updateQueue,o!==null){var l=i.stateNode;try{var u=o.shared.hiddenCallbacks;if(u!==null)for(o.shared.hiddenCallbacks=null,o=0;o<u.length;o++)Py(u[o],l)}catch(f){ae(i,i.return,f)}}n&&r&64&&bv(s),Bs(s,s.return);break;case 27:Mv(s);case 26:case 5:_n(o,s,n),n&&i===null&&r&4&&Nv(s),Bs(s,s.return);break;case 12:_n(o,s,n);break;case 31:_n(o,s,n),n&&r&4&&Pv(o,s);break;case 13:_n(o,s,n),n&&r&4&&Lv(o,s);break;case 22:s.memoizedState===null&&_n(o,s,n),Bs(s,s.return);break;case 30:break;default:_n(o,s,n)}e=e.sibling}}function fd(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&hr(n))}function dd(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&hr(t))}function $t(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)qv(t,e,n,i),e=e.sibling}function qv(t,e,n,i){var o=e.flags;switch(e.tag){case 0:case 11:case 15:$t(t,e,n,i),o&2048&&yr(9,e);break;case 1:$t(t,e,n,i);break;case 3:$t(t,e,n,i),o&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&hr(t)));break;case 12:if(o&2048){$t(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,r=s.id,l=s.onPostCommit;typeof l=="function"&&l(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){ae(e,e.return,u)}}else $t(t,e,n,i);break;case 31:$t(t,e,n,i);break;case 13:$t(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,r=e.alternate,e.memoizedState!==null?s._visibility&2?$t(t,e,n,i):$s(t,e):s._visibility&2?$t(t,e,n,i):(s._visibility|=2,po(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),o&2048&&fd(r,e);break;case 24:$t(t,e,n,i),o&2048&&dd(e.alternate,e);break;default:$t(t,e,n,i)}}function po(t,e,n,i,o){for(o=o&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,r=e,l=n,u=i,f=r.flags;switch(r.tag){case 0:case 11:case 15:po(s,r,l,u,o),yr(8,r);break;case 23:break;case 22:var d=r.stateNode;r.memoizedState!==null?d._visibility&2?po(s,r,l,u,o):$s(s,r):(d._visibility|=2,po(s,r,l,u,o)),o&&f&2048&&fd(r.alternate,r);break;case 24:po(s,r,l,u,o),o&&f&2048&&dd(r.alternate,r);break;default:po(s,r,l,u,o)}e=e.sibling}}function $s(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,o=i.flags;switch(i.tag){case 22:$s(n,i),o&2048&&fd(i.alternate,i);break;case 24:$s(n,i),o&2048&&dd(i.alternate,i);break;default:$s(n,i)}e=e.sibling}}var Ps=8192;function fo(t,e,n){if(t.subtreeFlags&Ps)for(t=t.child;t!==null;)Ov(t,e,n),t=t.sibling}function Ov(t,e,n){switch(t.tag){case 26:fo(t,e,n),t.flags&Ps&&t.memoizedState!==null&&JA(n,Yt,t.memoizedState,t.memoizedProps);break;case 5:fo(t,e,n);break;case 3:case 4:var i=Yt;Yt=Ka(t.stateNode.containerInfo),fo(t,e,n),Yt=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Ps,Ps=16777216,fo(t,e,n),Ps=i):fo(t,e,n));break;default:fo(t,e,n)}}function Fv(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Rs(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];ze=i,Vv(i,t)}Fv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zv(t),t=t.sibling}function zv(t){switch(t.tag){case 0:case 11:case 15:Rs(t),t.flags&2048&&gi(9,t,t.return);break;case 3:Rs(t);break;case 12:Rs(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Sa(t)):Rs(t);break;default:Rs(t)}}function Sa(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];ze=i,Vv(i,t)}Fv(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:gi(8,e,e.return),Sa(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Sa(e));break;default:Sa(e)}t=t.sibling}}function Vv(t,e){for(;ze!==null;){var n=ze;switch(n.tag){case 0:case 11:case 15:gi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:hr(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ze=i;else e:for(n=t;ze!==null;){i=ze;var o=i.sibling,s=i.return;if(kv(i),i===n){ze=null;break e}if(o!==null){o.return=s,ze=o;break e}ze=s}}}var cA={getCacheForType:function(t){var e=Qe(ke),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Qe(ke).controller.signal}},fA=typeof WeakMap=="function"?WeakMap:Map,te=0,pe=null,J=null,K=0,re=0,St=null,ni=!1,Xo=!1,pd=!1,Un=0,we=0,yi=0,Li=0,md=0,Et=0,Oo=0,Ys=null,ft=null,pf=!1,cl=0,Bv=0,Fa=1/0,za=null,ui=null,Ge=0,ci=null,Fo=null,Nn=0,mf=0,hf=null,$v=null,Js=0,gf=null;function wt(){return(te&2)!==0&&K!==0?K&-K:L.T!==null?gd():ey()}function Yv(){if(Et===0)if((K&536870912)===0||Q){var t=Jr;Jr<<=1,(Jr&3932160)===0&&(Jr=262144),Et=t}else Et=536870912;return t=Rt.current,t!==null&&(t.flags|=32),Et}function dt(t,e,n){(t===pe&&(re===2||re===9)||t.cancelPendingCommit!==null)&&(zo(t,0),ii(t,K,Et,!1)),dr(t,n),((te&2)===0||t!==pe)&&(t===pe&&((te&2)===0&&(Li|=n),we===4&&ii(t,K,Et,!1)),pn(t))}function Jv(t,e,n){if((te&6)!==0)throw Error(w(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||fr(t,e),o=i?mA(t,e):xc(t,e,!0),s=i;do{if(o===0){Xo&&!i&&ii(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!dA(n)){o=xc(t,e,!1),s=!1;continue}if(o===2){if(s=e,t.errorRecoveryDisabledLanes&s)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var l=t;o=Ys;var u=l.current.memoizedState.isDehydrated;if(u&&(zo(l,r).flags|=256),r=xc(l,r,!1),r!==2){if(pd&&!u){l.errorRecoveryDisabledLanes|=s,Li|=s,o=4;break e}s=ft,ft=o,s!==null&&(ft===null?ft=s:ft.push.apply(ft,s))}o=r}if(s=!1,o!==2)continue}}if(o===1){zo(t,0),ii(t,e,0,!0);break}e:{switch(i=t,s=o,s){case 0:case 1:throw Error(w(345));case 4:if((e&4194048)!==e)break;case 6:ii(i,e,Et,!ni);break e;case 2:ft=null;break;case 3:case 5:break;default:throw Error(w(329))}if((e&62914560)===e&&(o=cl+300-Ct(),10<o)){if(ii(i,e,Et,!ni),ja(i,0,!0)!==0)break e;Nn=e,i.timeoutHandle=p0(fg.bind(null,i,n,ft,za,pf,e,Et,Li,Oo,ni,s,"Throttled",-0,0),o);break e}fg(i,n,ft,za,pf,e,Et,Li,Oo,ni,s,null,-0,0)}}break}while(1);pn(t)}function fg(t,e,n,i,o,s,r,l,u,f,d,p,m,h){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xn},Ov(e,s,p);var v=(s&62914560)===s?cl-Ct():(s&4194048)===s?Bv-Ct():0;if(v=KA(p,v),v!==null){Nn=s,t.cancelPendingCommit=v(pg.bind(null,t,e,s,n,i,o,r,l,u,d,p,null,m,h)),ii(t,s,r,!f);return}}pg(t,e,s,n,i,o,r,l,u)}function dA(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!bt(s(),o))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ii(t,e,n,i){e&=~md,e&=~Li,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var o=e;0<o;){var s=31-xt(o),r=1<<s;i[s]=-1,o&=~r}n!==0&&Zg(t,n,e)}function fl(){return(te&6)===0?(vr(0,!1),!1):!0}function hd(){if(J!==null){if(re===0)var t=J.return;else t=J,wn=Yi=null,ed(t),Mo=null,tr=0,t=J;for(;t!==null;)wv(t.alternate,t),t=t.return;J=null}}function zo(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,IA(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Nn=0,hd(),pe=t,J=n=bn(t.current,null),K=e,re=0,St=null,ni=!1,Xo=fr(t,e),pd=!1,Oo=Et=md=Li=yi=we=0,ft=Ys=null,pf=!1,(e&8)!==0&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var o=31-xt(i),s=1<<o;e|=t[o],i&=~s}return Un=e,il(),n}function Kv(t,e){V=null,L.H=ir,e===Ko||e===sl?(e=Vh(),re=3):e===Jf?(e=Vh(),re=4):re=e===ud?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,St=e,J===null&&(we=1,Ga(t,Gt(e,t.current)))}function Xv(){var t=Rt.current;return t===null?!0:(K&4194048)===K?Ot===null:(K&62914560)===K||(K&536870912)!==0?t===Ot:!1}function Qv(){var t=L.H;return L.H=ir,t===null?ir:t}function Zv(){var t=L.A;return L.A=cA,t}function Va(){we=4,ni||(K&4194048)!==K&&Rt.current!==null||(Xo=!0),(yi&134217727)===0&&(Li&134217727)===0||pe===null||ii(pe,K,Et,!1)}function xc(t,e,n){var i=te;te|=2;var o=Qv(),s=Zv();(pe!==t||K!==e)&&(za=null,zo(t,e)),e=!1;var r=we;e:do try{if(re!==0&&J!==null){var l=J,u=St;switch(re){case 8:hd(),r=6;break e;case 3:case 2:case 9:case 6:Rt.current===null&&(e=!0);var f=re;if(re=0,St=null,wo(t,l,u,f),n&&Xo){r=0;break e}break;default:f=re,re=0,St=null,wo(t,l,u,f)}}pA(),r=we;break}catch(d){Kv(t,d)}while(1);return e&&t.shellSuspendCounter++,wn=Yi=null,te=i,L.H=o,L.A=s,J===null&&(pe=null,K=0,il()),r}function pA(){for(;J!==null;)Wv(J)}function mA(t,e){var n=te;te|=2;var i=Qv(),o=Zv();pe!==t||K!==e?(za=null,Fa=Ct()+500,zo(t,e)):Xo=fr(t,e);e:do try{if(re!==0&&J!==null){e=J;var s=St;t:switch(re){case 1:re=0,St=null,wo(t,e,s,1);break;case 2:case 9:if(zh(s)){re=0,St=null,dg(e);break}e=function(){re!==2&&re!==9||pe!==t||(re=7),pn(t)},s.then(e,e);break e;case 3:re=7;break e;case 4:re=5;break e;case 7:zh(s)?(re=0,St=null,dg(e)):(re=0,St=null,wo(t,e,s,7));break;case 5:var r=null;switch(J.tag){case 26:r=J.memoizedState;case 5:case 27:var l=J;if(r?v0(r):l.stateNode.complete){re=0,St=null;var u=l.sibling;if(u!==null)J=u;else{var f=l.return;f!==null?(J=f,dl(f)):J=null}break t}}re=0,St=null,wo(t,e,s,5);break;case 6:re=0,St=null,wo(t,e,s,6);break;case 8:hd(),we=6;break e;default:throw Error(w(462))}}hA();break}catch(d){Kv(t,d)}while(1);return wn=Yi=null,L.H=i,L.A=o,te=n,J!==null?0:(pe=null,K=0,il(),we)}function hA(){for(;J!==null&&!GE();)Wv(J)}function Wv(t){var e=xv(t.alternate,t,Un);t.memoizedProps=t.pendingProps,e===null?dl(t):J=e}function dg(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=sg(n,e,e.pendingProps,e.type,void 0,K);break;case 11:e=sg(n,e,e.pendingProps,e.type.render,e.ref,K);break;case 5:ed(e);default:wv(n,e),e=J=wy(e,Un),e=xv(n,e,Un)}t.memoizedProps=t.pendingProps,e===null?dl(t):J=e}function wo(t,e,n,i){wn=Yi=null,ed(e),Mo=null,tr=0;var o=e.return;try{if(iA(t,o,e,n,K)){we=1,Ga(t,Gt(n,t.current)),J=null;return}}catch(s){if(o!==null)throw J=o,s;we=1,Ga(t,Gt(n,t.current)),J=null;return}e.flags&32768?(Q||i===1?t=!0:Xo||(K&536870912)!==0?t=!1:(ni=t=!0,(i===2||i===9||i===3||i===6)&&(i=Rt.current,i!==null&&i.tag===13&&(i.flags|=16384))),jv(e,t)):dl(e)}function dl(t){var e=t;do{if((e.flags&32768)!==0){jv(e,ni);return}t=e.return;var n=rA(e.alternate,e,Un);if(n!==null){J=n;return}if(e=e.sibling,e!==null){J=e;return}J=e=t}while(e!==null);we===0&&(we=5)}function jv(t,e){do{var n=aA(t.alternate,t);if(n!==null){n.flags&=32767,J=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){J=t;return}J=t=n}while(t!==null);we=6,J=null}function pg(t,e,n,i,o,s,r,l,u){t.cancelPendingCommit=null;do pl();while(Ge!==0);if((te&6)!==0)throw Error(w(327));if(e!==null){if(e===t.current)throw Error(w(177));if(s=e.lanes|e.childLanes,s|=Of,KE(t,n,s,r,l,u),t===pe&&(J=pe=null,K=0),Fo=e,ci=t,Nn=n,mf=s,hf=o,$v=i,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,SA(ba,function(){return o0(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||i){i=L.T,L.T=null,o=ne.p,ne.p=2,r=te,te|=4;try{lA(t,e,n)}finally{te=r,ne.p=o,L.T=i}}Ge=1,e0(),t0(),n0()}}function e0(){if(Ge===1){Ge=0;var t=ci,e=Fo,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=L.T,L.T=null;var i=ne.p;ne.p=2;var o=te;te|=4;try{Hv(e,t);var s=Tf,r=vy(t.containerInfo),l=s.focusedElem,u=s.selectionRange;if(r!==l&&l&&l.ownerDocument&&yy(l.ownerDocument.documentElement,l)){if(u!==null&&qf(l)){var f=u.start,d=u.end;if(d===void 0&&(d=f),"selectionStart"in l)l.selectionStart=f,l.selectionEnd=Math.min(d,l.value.length);else{var p=l.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var h=m.getSelection(),v=l.textContent.length,T=Math.min(u.start,v),E=u.end===void 0?T:Math.min(u.end,v);!h.extend&&T>E&&(r=E,E=T,T=r);var g=Ph(l,T),y=Ph(l,E);if(g&&y&&(h.rangeCount!==1||h.anchorNode!==g.node||h.anchorOffset!==g.offset||h.focusNode!==y.node||h.focusOffset!==y.offset)){var S=p.createRange();S.setStart(g.node,g.offset),h.removeAllRanges(),T>E?(h.addRange(S),h.extend(y.node,y.offset)):(S.setEnd(y.node,y.offset),h.addRange(S))}}}}for(p=[],h=l;h=h.parentNode;)h.nodeType===1&&p.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<p.length;l++){var _=p[l];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}Za=!!Sf,Tf=Sf=null}finally{te=o,ne.p=i,L.T=n}}t.current=e,Ge=2}}function t0(){if(Ge===2){Ge=0;var t=ci,e=Fo,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=L.T,L.T=null;var i=ne.p;ne.p=2;var o=te;te|=4;try{Dv(t,e.alternate,e)}finally{te=o,ne.p=i,L.T=n}}Ge=3}}function n0(){if(Ge===4||Ge===3){Ge=0,qE();var t=ci,e=Fo,n=Nn,i=$v;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?Ge=5:(Ge=0,Fo=ci=null,i0(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(ui=null),Df(n),e=e.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(cr,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=L.T,o=ne.p,ne.p=2,L.T=null;try{for(var s=t.onRecoverableError,r=0;r<i.length;r++){var l=i[r];s(l.value,{componentStack:l.stack})}}finally{L.T=e,ne.p=o}}(Nn&3)!==0&&pl(),pn(t),o=t.pendingLanes,(n&261930)!==0&&(o&42)!==0?t===gf?Js++:(Js=0,gf=t):Js=0,vr(0,!1)}}function i0(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,hr(e)))}function pl(){return e0(),t0(),n0(),o0()}function o0(){if(Ge!==5)return!1;var t=ci,e=mf;mf=0;var n=Df(Nn),i=L.T,o=ne.p;try{ne.p=32>n?32:n,L.T=null,n=hf,hf=null;var s=ci,r=Nn;if(Ge=0,Fo=ci=null,Nn=0,(te&6)!==0)throw Error(w(331));var l=te;if(te|=4,zv(s.current),qv(s,s.current,r,n),te=l,vr(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(cr,s)}catch{}return!0}finally{ne.p=o,L.T=i,i0(t,e)}}function mg(t,e,n){e=Gt(n,e),e=uf(t.stateNode,e,2),t=li(t,e,2),t!==null&&(dr(t,2),pn(t))}function ae(t,e,n){if(t.tag===3)mg(t,t,n);else for(;e!==null;){if(e.tag===3){mg(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ui===null||!ui.has(i))){t=Gt(n,t),n=Sv(2),i=li(e,n,2),i!==null&&(Tv(n,i,e,t),dr(i,2),pn(i));break}}e=e.return}}function wc(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new fA;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(pd=!0,o.add(n),t=gA.bind(null,t,e,n),e.then(t,t))}function gA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,pe===t&&(K&n)===n&&(we===4||we===3&&(K&62914560)===K&&300>Ct()-cl?(te&2)===0&&zo(t,0):md|=n,Oo===K&&(Oo=0)),pn(t)}function s0(t,e){e===0&&(e=Qg()),t=$i(t,e),t!==null&&(dr(t,e),pn(t))}function yA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),s0(t,n)}function vA(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(w(314))}i!==null&&i.delete(e),s0(t,n)}function SA(t,e){return If(t,e)}var Ba=null,mo=null,yf=!1,$a=!1,bc=!1,oi=0;function pn(t){t!==mo&&t.next===null&&(mo===null?Ba=mo=t:mo=mo.next=t),$a=!0,yf||(yf=!0,_A())}function vr(t,e){if(!bc&&$a){bc=!0;do for(var n=!1,i=Ba;i!==null;){if(!e)if(t!==0){var o=i.pendingLanes;if(o===0)var s=0;else{var r=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-xt(42|t)+1)-1,s&=o&~(r&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,hg(i,s))}else s=K,s=ja(i,i===pe?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(s&3)===0||fr(i,s)||(n=!0,hg(i,s));i=i.next}while(n);bc=!1}}function TA(){r0()}function r0(){$a=yf=!1;var t=0;oi!==0&&NA()&&(t=oi);for(var e=Ct(),n=null,i=Ba;i!==null;){var o=i.next,s=a0(i,e);s===0?(i.next=null,n===null?Ba=o:n.next=o,o===null&&(mo=n)):(n=i,(t!==0||(s&3)!==0)&&($a=!0)),i=o}Ge!==0&&Ge!==5||vr(t,!1),oi!==0&&(oi=0)}function a0(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var r=31-xt(s),l=1<<r,u=o[r];u===-1?((l&n)===0||(l&i)!==0)&&(o[r]=JE(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}if(e=pe,n=K,n=ja(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(re===2||re===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&nc(i),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||fr(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&nc(i),Df(n)){case 2:case 8:n=Kg;break;case 32:n=ba;break;case 268435456:n=Xg;break;default:n=ba}return i=l0.bind(null,t),n=If(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&nc(i),t.callbackPriority=2,t.callbackNode=null,2}function l0(t,e){if(Ge!==0&&Ge!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(pl()&&t.callbackNode!==n)return null;var i=K;return i=ja(t,t===pe?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(Jv(t,i,e),a0(t,Ct()),t.callbackNode!=null&&t.callbackNode===n?l0.bind(null,t):null)}function hg(t,e){if(pl())return null;Jv(t,e,!0)}function _A(){MA(function(){(te&6)!==0?If(Jg,TA):r0()})}function gd(){if(oi===0){var t=Ho;t===0&&(t=Yr,Yr<<=1,(Yr&261888)===0&&(Yr=256)),oi=t}return oi}function gg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ca(""+t)}function yg(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function EA(t,e,n,i,o){if(e==="submit"&&n&&n.stateNode===o){var s=gg((o[pt]||null).action),r=i.submitter;r&&(e=(e=r[pt]||null)?gg(e.formAction):r.getAttribute("formAction"),e!==null&&(s=e,r=null));var l=new el("action","action",null,i,o);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(oi!==0){var u=r?yg(o,r):new FormData(o);af(n,{pending:!0,data:u,method:o.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=r?yg(o,r):new FormData(o),af(n,{pending:!0,data:u,method:o.method,action:s},s,u))},currentTarget:o}]})}}for(oa=0;oa<Kc.length;oa++)sa=Kc[oa],vg=sa.toLowerCase(),Sg=sa[0].toUpperCase()+sa.slice(1),Jt(vg,"on"+Sg);var sa,vg,Sg,oa;Jt(Ty,"onAnimationEnd");Jt(_y,"onAnimationIteration");Jt(Ey,"onAnimationStart");Jt("dblclick","onDoubleClick");Jt("focusin","onFocus");Jt("focusout","onBlur");Jt(OC,"onTransitionRun");Jt(FC,"onTransitionStart");Jt(zC,"onTransitionCancel");Jt(Cy,"onTransitionEnd");Po("onMouseEnter",["mouseout","mouseover"]);Po("onMouseLeave",["mouseout","mouseover"]);Po("onPointerEnter",["pointerout","pointerover"]);Po("onPointerLeave",["pointerout","pointerover"]);zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(or));function u0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var r=i.length-1;0<=r;r--){var l=i[r],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==s&&o.isPropagationStopped())break e;s=l,o.currentTarget=f;try{s(o)}catch(d){Na(d)}o.currentTarget=null,s=u}else for(r=0;r<i.length;r++){if(l=i[r],u=l.instance,f=l.currentTarget,l=l.listener,u!==s&&o.isPropagationStopped())break e;s=l,o.currentTarget=f;try{s(o)}catch(d){Na(d)}o.currentTarget=null,s=u}}}}function Y(t,e){var n=e[Oc];n===void 0&&(n=e[Oc]=new Set);var i=t+"__bubble";n.has(i)||(c0(e,t,2,!1),n.add(i))}function Rc(t,e,n){var i=0;e&&(i|=4),c0(n,t,i,e)}var ra="_reactListening"+Math.random().toString(36).slice(2);function yd(t){if(!t[ra]){t[ra]=!0,ty.forEach(function(n){n!=="selectionchange"&&(CA.has(n)||Rc(n,!1,t),Rc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ra]||(e[ra]=!0,Rc("selectionchange",!1,e))}}function c0(t,e,n,i){switch(C0(e)){case 2:var o=ZA;break;case 8:o=WA;break;default:o=_d}n=o.bind(null,e,n,t),o=void 0,!$c||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Nc(t,e,n,i,o){var s=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var l=i.stateNode.containerInfo;if(l===o)break;if(r===4)for(r=i.return;r!==null;){var u=r.tag;if((u===3||u===4)&&r.stateNode.containerInfo===o)return;r=r.return}for(;l!==null;){if(r=yo(l),r===null)return;if(u=r.tag,u===5||u===6||u===26||u===27){i=s=r;continue e}l=l.parentNode}}i=i.return}uy(function(){var f=s,d=Pf(n),p=[];e:{var m=Ay.get(t);if(m!==void 0){var h=el,v=t;switch(t){case"keypress":if(da(n)===0)break e;case"keydown":case"keyup":h=vC;break;case"focusin":v="focus",h=ac;break;case"focusout":v="blur",h=ac;break;case"beforeblur":case"afterblur":h=ac;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=rC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=_C;break;case Ty:case _y:case Ey:h=uC;break;case Cy:h=CC;break;case"scroll":case"scrollend":h=oC;break;case"wheel":h=xC;break;case"copy":case"cut":case"paste":h=fC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Rh;break;case"toggle":case"beforetoggle":h=bC}var T=(e&4)!==0,E=!T&&(t==="scroll"||t==="scrollend"),g=T?m!==null?m+"Capture":null:m;T=[];for(var y=f,S;y!==null;){var _=y;if(S=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||S===null||g===null||(_=Qs(y,g),_!=null&&T.push(sr(y,_,S))),E)break;y=y.return}0<T.length&&(m=new h(m,v,null,n,d),p.push({event:m,listeners:T}))}}if((e&7)===0){e:{if(m=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",m&&n!==Bc&&(v=n.relatedTarget||n.fromElement)&&(yo(v)||v[$o]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(v=n.relatedTarget||n.toElement,h=f,v=v?yo(v):null,v!==null&&(E=ur(v),T=v.tag,v!==E||T!==5&&T!==27&&T!==6)&&(v=null)):(h=null,v=f),h!==v)){if(T=wh,_="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(T=Rh,_="onPointerLeave",g="onPointerEnter",y="pointer"),E=h==null?m:ks(h),S=v==null?m:ks(v),m=new T(_,y+"leave",h,n,d),m.target=E,m.relatedTarget=S,_=null,yo(d)===f&&(T=new T(g,y+"enter",v,n,d),T.target=S,T.relatedTarget=E,_=T),E=_,h&&v)t:{for(T=AA,g=h,y=v,S=0,_=g;_;_=T(_))S++;_=0;for(var A=y;A;A=T(A))_++;for(;0<S-_;)g=T(g),S--;for(;0<_-S;)y=T(y),_--;for(;S--;){if(g===y||y!==null&&g===y.alternate){T=g;break t}g=T(g),y=T(y)}T=null}else T=null;h!==null&&Tg(p,m,h,T,!1),v!==null&&E!==null&&Tg(p,E,v,T,!0)}}e:{if(m=f?ks(f):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var I=Dh;else if(Mh(m))if(hy)I=HC;else{I=PC;var x=UC}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?f&&Uf(f.elementType)&&(I=Dh):I=LC;if(I&&(I=I(t,f))){my(p,I,n,d);break e}x&&x(t,m,f),t==="focusout"&&f&&m.type==="number"&&f.memoizedProps.value!=null&&Vc(m,"number",m.value)}switch(x=f?ks(f):window,t){case"focusin":(Mh(x)||x.contentEditable==="true")&&(To=x,Yc=f,Gs=null);break;case"focusout":Gs=Yc=To=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,Lh(p,n,d);break;case"selectionchange":if(qC)break;case"keydown":case"keyup":Lh(p,n,d)}var M;if(Gf)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else So?dy(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(fy&&n.locale!=="ko"&&(So||C!=="onCompositionStart"?C==="onCompositionEnd"&&So&&(M=cy()):(ti=d,Lf="value"in ti?ti.value:ti.textContent,So=!0)),x=Ya(f,C),0<x.length&&(C=new bh(C,t,null,n,d),p.push({event:C,listeners:x}),M?C.data=M:(M=py(n),M!==null&&(C.data=M)))),(M=NC?IC(t,n):MC(t,n))&&(C=Ya(f,"onBeforeInput"),0<C.length&&(x=new bh("onBeforeInput","beforeinput",null,n,d),p.push({event:x,listeners:C}),x.data=M)),EA(p,t,f,n,d)}u0(p,e)})}function sr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ya(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=Qs(t,n),o!=null&&i.unshift(sr(t,o,s)),o=Qs(t,e),o!=null&&i.push(sr(t,o,s))),t.tag===3)return i;t=t.return}return[]}function AA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Tg(t,e,n,i,o){for(var s=e._reactName,r=[];n!==null&&n!==i;){var l=n,u=l.alternate,f=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||f===null||(u=f,o?(f=Qs(n,s),f!=null&&r.unshift(sr(n,f,u))):o||(f=Qs(n,s),f!=null&&r.push(sr(n,f,u)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var xA=/\r\n?/g,wA=/\u0000|\uFFFD/g;function _g(t){return(typeof t=="string"?t:""+t).replace(xA,`
`).replace(wA,"")}function f0(t,e){return e=_g(e),_g(t)===e}function fe(t,e,n,i,o,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Lo(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Lo(t,""+i);break;case"className":Xr(t,"class",i);break;case"tabIndex":Xr(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(t,n,i);break;case"style":ly(t,i,s);break;case"data":if(e!=="object"){Xr(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=ca(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&fe(t,e,"name",o.name,o,null),fe(t,e,"formEncType",o.formEncType,o,null),fe(t,e,"formMethod",o.formMethod,o,null),fe(t,e,"formTarget",o.formTarget,o,null)):(fe(t,e,"encType",o.encType,o,null),fe(t,e,"method",o.method,o,null),fe(t,e,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=ca(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=xn);break;case"onScroll":i!=null&&Y("scroll",t);break;case"onScrollEnd":i!=null&&Y("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(w(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(w(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=ca(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":Y("beforetoggle",t),Y("toggle",t),ua(t,"popover",i);break;case"xlinkActuate":yn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":yn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":yn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":yn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":yn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":yn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":yn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":yn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":yn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ua(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=nC.get(n)||n,ua(t,n,i))}}function vf(t,e,n,i,o,s){switch(n){case"style":ly(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(w(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(w(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Lo(t,i):(typeof i=="number"||typeof i=="bigint")&&Lo(t,""+i);break;case"onScroll":i!=null&&Y("scroll",t);break;case"onScrollEnd":i!=null&&Y("scrollend",t);break;case"onClick":i!=null&&(t.onclick=xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ny.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),s=t[pt]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,o),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,o);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):ua(t,n,i)}}}function Ze(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Y("error",t),Y("load",t);var i=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var r=n[s];if(r!=null)switch(s){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(w(137,e));default:fe(t,e,s,r,n,null)}}o&&fe(t,e,"srcSet",n.srcSet,n,null),i&&fe(t,e,"src",n.src,n,null);return;case"input":Y("invalid",t);var l=s=r=o=null,u=null,f=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":o=d;break;case"type":r=d;break;case"checked":u=d;break;case"defaultChecked":f=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(w(137,e));break;default:fe(t,e,i,d,n,null)}}sy(t,s,l,u,f,r,o,!1);return;case"select":Y("invalid",t),i=r=s=null;for(o in n)if(n.hasOwnProperty(o)&&(l=n[o],l!=null))switch(o){case"value":s=l;break;case"defaultValue":r=l;break;case"multiple":i=l;default:fe(t,e,o,l,n,null)}e=s,n=r,t.multiple=!!i,e!=null?Ro(t,!!i,e,!1):n!=null&&Ro(t,!!i,n,!0);return;case"textarea":Y("invalid",t),s=o=i=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":o=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(w(91));break;default:fe(t,e,r,l,n,null)}ay(t,i,o,s);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:fe(t,e,u,i,n,null)}return;case"dialog":Y("beforetoggle",t),Y("toggle",t),Y("cancel",t),Y("close",t);break;case"iframe":case"object":Y("load",t);break;case"video":case"audio":for(i=0;i<or.length;i++)Y(or[i],t);break;case"image":Y("error",t),Y("load",t);break;case"details":Y("toggle",t);break;case"embed":case"source":case"link":Y("error",t),Y("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(f in n)if(n.hasOwnProperty(f)&&(i=n[f],i!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(w(137,e));default:fe(t,e,f,i,n,null)}return;default:if(Uf(e)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&vf(t,e,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&fe(t,e,l,i,n,null))}function bA(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,r=null,l=null,u=null,f=null,d=null;for(h in n){var p=n[h];if(n.hasOwnProperty(h)&&p!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(h)||fe(t,e,h,null,i,p)}}for(var m in i){var h=i[m];if(p=n[m],i.hasOwnProperty(m)&&(h!=null||p!=null))switch(m){case"type":s=h;break;case"name":o=h;break;case"checked":f=h;break;case"defaultChecked":d=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(w(137,e));break;default:h!==p&&fe(t,e,m,h,i,p)}}zc(t,r,l,u,f,d,s,o);return;case"select":h=r=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":h=u;default:i.hasOwnProperty(s)||fe(t,e,s,null,i,u)}for(o in i)if(s=i[o],u=n[o],i.hasOwnProperty(o)&&(s!=null||u!=null))switch(o){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":r=s;default:s!==u&&fe(t,e,o,s,i,u)}e=l,n=r,i=h,m!=null?Ro(t,!!n,m,!1):!!i!=!!n&&(e!=null?Ro(t,!!n,e,!0):Ro(t,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(l in n)if(o=n[l],n.hasOwnProperty(l)&&o!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:fe(t,e,l,null,i,o)}for(r in i)if(o=i[r],s=n[r],i.hasOwnProperty(r)&&(o!=null||s!=null))switch(r){case"value":m=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(w(91));break;default:o!==s&&fe(t,e,r,o,i,s)}ry(t,m,h);return;case"option":for(var v in n)if(m=n[v],n.hasOwnProperty(v)&&m!=null&&!i.hasOwnProperty(v))switch(v){case"selected":t.selected=!1;break;default:fe(t,e,v,null,i,m)}for(u in i)if(m=i[u],h=n[u],i.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:fe(t,e,u,m,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var T in n)m=n[T],n.hasOwnProperty(T)&&m!=null&&!i.hasOwnProperty(T)&&fe(t,e,T,null,i,m);for(f in i)if(m=i[f],h=n[f],i.hasOwnProperty(f)&&m!==h&&(m!=null||h!=null))switch(f){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(w(137,e));break;default:fe(t,e,f,m,i,h)}return;default:if(Uf(e)){for(var E in n)m=n[E],n.hasOwnProperty(E)&&m!==void 0&&!i.hasOwnProperty(E)&&vf(t,e,E,void 0,i,m);for(d in i)m=i[d],h=n[d],!i.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||vf(t,e,d,m,i,h);return}}for(var g in n)m=n[g],n.hasOwnProperty(g)&&m!=null&&!i.hasOwnProperty(g)&&fe(t,e,g,null,i,m);for(p in i)m=i[p],h=n[p],!i.hasOwnProperty(p)||m===h||m==null&&h==null||fe(t,e,p,m,i,h)}function Eg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],s=o.transferSize,r=o.initiatorType,l=o.duration;if(s&&l&&Eg(r)){for(r=0,l=o.responseEnd,i+=1;i<n.length;i++){var u=n[i],f=u.startTime;if(f>l)break;var d=u.transferSize,p=u.initiatorType;d&&Eg(p)&&(u=u.responseEnd,r+=d*(u<l?1:(l-f)/(u-f)))}if(--i,e+=8*(s+r)/(o.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Sf=null,Tf=null;function Ja(t){return t.nodeType===9?t:t.ownerDocument}function Cg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d0(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function _f(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ic=null;function NA(){var t=window.event;return t&&t.type==="popstate"?t===Ic?!1:(Ic=t,!0):(Ic=null,!1)}var p0=typeof setTimeout=="function"?setTimeout:void 0,IA=typeof clearTimeout=="function"?clearTimeout:void 0,Ag=typeof Promise=="function"?Promise:void 0,MA=typeof queueMicrotask=="function"?queueMicrotask:typeof Ag<"u"?function(t){return Ag.resolve(null).then(t).catch(DA)}:p0;function DA(t){setTimeout(function(){throw t})}function Si(t){return t==="head"}function xg(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(o),Bo(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Ks(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Ks(n);for(var s=n.firstChild;s;){var r=s.nextSibling,l=s.nodeName;s[pr]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=r}}else n==="body"&&Ks(t.ownerDocument.body);n=o}while(n);Bo(e)}function wg(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Ef(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ef(n),kf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function kA(t,e,n,i){for(;t.nodeType===1;){var o=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[pr])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Ft(t.nextSibling),t===null)break}return null}function UA(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ft(t.nextSibling),t===null))return null;return t}function m0(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Ft(t.nextSibling),t===null))return null;return t}function Cf(t){return t.data==="$?"||t.data==="$~"}function Af(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function PA(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Ft(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var xf=null;function bg(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Ft(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Rg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function h0(t,e,n){switch(e=Ja(n),t){case"html":if(t=e.documentElement,!t)throw Error(w(452));return t;case"head":if(t=e.head,!t)throw Error(w(453));return t;case"body":if(t=e.body,!t)throw Error(w(454));return t;default:throw Error(w(451))}}function Ks(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);kf(t)}var zt=new Map,Ng=new Set;function Ka(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Pn=ne.d;ne.d={f:LA,r:HA,D:GA,C:qA,L:OA,m:FA,X:VA,S:zA,M:BA};function LA(){var t=Pn.f(),e=fl();return t||e}function HA(t){var e=Yo(t);e!==null&&e.tag===5&&e.type==="form"?lv(e):Pn.r(t)}var Qo=typeof document>"u"?null:document;function g0(t,e,n){var i=Qo;if(i&&typeof e=="string"&&e){var o=Ht(e);o='link[rel="'+t+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Ng.has(o)||(Ng.add(o),t={rel:t,crossOrigin:n,href:e},i.querySelector(o)===null&&(e=i.createElement("link"),Ze(e,"link",t),Ve(e),i.head.appendChild(e)))}}function GA(t){Pn.D(t),g0("dns-prefetch",t,null)}function qA(t,e){Pn.C(t,e),g0("preconnect",t,e)}function OA(t,e,n){Pn.L(t,e,n);var i=Qo;if(i&&t&&e){var o='link[rel="preload"][as="'+Ht(e)+'"]';e==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Ht(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Ht(n.imageSizes)+'"]')):o+='[href="'+Ht(t)+'"]';var s=o;switch(e){case"style":s=Vo(t);break;case"script":s=Zo(t)}zt.has(s)||(t=Se({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),zt.set(s,t),i.querySelector(o)!==null||e==="style"&&i.querySelector(Sr(s))||e==="script"&&i.querySelector(Tr(s))||(e=i.createElement("link"),Ze(e,"link",t),Ve(e),i.head.appendChild(e)))}}function FA(t,e){Pn.m(t,e);var n=Qo;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",o='link[rel="modulepreload"][as="'+Ht(i)+'"][href="'+Ht(t)+'"]',s=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Zo(t)}if(!zt.has(s)&&(t=Se({rel:"modulepreload",href:t},e),zt.set(s,t),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Tr(s)))return}i=n.createElement("link"),Ze(i,"link",t),Ve(i),n.head.appendChild(i)}}}function zA(t,e,n){Pn.S(t,e,n);var i=Qo;if(i&&t){var o=bo(i).hoistableStyles,s=Vo(t);e=e||"default";var r=o.get(s);if(!r){var l={loading:0,preload:null};if(r=i.querySelector(Sr(s)))l.loading=5;else{t=Se({rel:"stylesheet",href:t,"data-precedence":e},n),(n=zt.get(s))&&vd(t,n);var u=r=i.createElement("link");Ve(u),Ze(u,"link",t),u._p=new Promise(function(f,d){u.onload=f,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Ta(r,e,i)}r={type:"stylesheet",instance:r,count:1,state:l},o.set(s,r)}}}function VA(t,e){Pn.X(t,e);var n=Qo;if(n&&t){var i=bo(n).hoistableScripts,o=Zo(t),s=i.get(o);s||(s=n.querySelector(Tr(o)),s||(t=Se({src:t,async:!0},e),(e=zt.get(o))&&Sd(t,e),s=n.createElement("script"),Ve(s),Ze(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function BA(t,e){Pn.M(t,e);var n=Qo;if(n&&t){var i=bo(n).hoistableScripts,o=Zo(t),s=i.get(o);s||(s=n.querySelector(Tr(o)),s||(t=Se({src:t,async:!0,type:"module"},e),(e=zt.get(o))&&Sd(t,e),s=n.createElement("script"),Ve(s),Ze(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function Ig(t,e,n,i){var o=(o=si.current)?Ka(o):null;if(!o)throw Error(w(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Vo(n.href),n=bo(o).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Vo(n.href);var s=bo(o).hoistableStyles,r=s.get(t);if(r||(o=o.ownerDocument||o,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,r),(s=o.querySelector(Sr(t)))&&!s._p&&(r.instance=s,r.state.loading=5),zt.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zt.set(t,n),s||$A(o,t,n,r.state))),e&&i===null)throw Error(w(528,""));return r}if(e&&i!==null)throw Error(w(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Zo(n),n=bo(o).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(w(444,t))}}function Vo(t){return'href="'+Ht(t)+'"'}function Sr(t){return'link[rel="stylesheet"]['+t+"]"}function y0(t){return Se({},t,{"data-precedence":t.precedence,precedence:null})}function $A(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Ze(e,"link",n),Ve(e),t.head.appendChild(e))}function Zo(t){return'[src="'+Ht(t)+'"]'}function Tr(t){return"script[async]"+t}function Mg(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Ht(n.href)+'"]');if(i)return e.instance=i,Ve(i),i;var o=Se({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Ve(i),Ze(i,"style",o),Ta(i,n.precedence,t),e.instance=i;case"stylesheet":o=Vo(n.href);var s=t.querySelector(Sr(o));if(s)return e.state.loading|=4,e.instance=s,Ve(s),s;i=y0(n),(o=zt.get(o))&&vd(i,o),s=(t.ownerDocument||t).createElement("link"),Ve(s);var r=s;return r._p=new Promise(function(l,u){r.onload=l,r.onerror=u}),Ze(s,"link",i),e.state.loading|=4,Ta(s,n.precedence,t),e.instance=s;case"script":return s=Zo(n.src),(o=t.querySelector(Tr(s)))?(e.instance=o,Ve(o),o):(i=n,(o=zt.get(s))&&(i=Se({},n),Sd(i,o)),t=t.ownerDocument||t,o=t.createElement("script"),Ve(o),Ze(o,"link",i),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(w(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(i=e.instance,e.state.loading|=4,Ta(i,n.precedence,t));return e.instance}function Ta(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,s=o,r=0;r<i.length;r++){var l=i[r];if(l.dataset.precedence===e)s=l;else if(s!==o)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function vd(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Sd(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var _a=null;function Dg(t,e,n){if(_a===null){var i=new Map,o=_a=new Map;o.set(n,i)}else o=_a,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),o=0;o<n.length;o++){var s=n[o];if(!(s[pr]||s[Ke]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(e)||"";r=t+r;var l=i.get(r);l?l.push(s):i.set(r,[s])}}return i}function kg(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function YA(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function v0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function JA(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=Vo(i.href),s=e.querySelector(Sr(o));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Xa.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Ve(s);return}s=e.ownerDocument||e,i=y0(i),(o=zt.get(o))&&vd(i,o),s=s.createElement("link"),Ve(s);var r=s;r._p=new Promise(function(l,u){r.onload=l,r.onerror=u}),Ze(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=Xa.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Mc=0;function KA(t,e){return t.stylesheets&&t.count===0&&Ea(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Ea(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Mc===0&&(Mc=62500*RA());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ea(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Mc?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function Xa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ea(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Qa=null;function Ea(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Qa=new Map,e.forEach(XA,t),Qa=null,Xa.call(t))}function XA(t,e){if(!(e.state.loading&4)){var n=Qa.get(t);if(n)var i=n.get(null);else{n=new Map,Qa.set(t,n);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var r=o[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}o=e.instance,r=o.getAttribute("data-precedence"),s=n.get(r)||i,s===i&&n.set(null,o),n.set(r,o),this.count++,i=Xa.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),s?s.parentNode.insertBefore(o,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),e.state.loading|=4}}var rr={$$typeof:An,Provider:null,Consumer:null,_currentValue:Di,_currentValue2:Di,_threadCount:0};function QA(t,e,n,i,o,s,r,l,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ic(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.hiddenUpdates=ic(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function S0(t,e,n,i,o,s,r,l,u,f,d,p){return t=new QA(t,e,n,r,u,f,d,p,l),e=1,s===!0&&(e|=24),s=_t(3,null,null,e),t.current=s,s.stateNode=t,e=$f(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},Kf(s),t}function T0(t){return t?(t=Co,t):Co}function _0(t,e,n,i,o,s){o=T0(o),i.context===null?i.context=o:i.pendingContext=o,i=ai(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=li(t,i,e),n!==null&&(dt(n,t,e),Os(n,t,e))}function Ug(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Td(t,e){Ug(t,e),(t=t.alternate)&&Ug(t,e)}function E0(t){if(t.tag===13||t.tag===31){var e=$i(t,67108864);e!==null&&dt(e,t,67108864),Td(t,67108864)}}function Pg(t){if(t.tag===13||t.tag===31){var e=wt();e=Mf(e);var n=$i(t,e);n!==null&&dt(n,t,e),Td(t,e)}}var Za=!0;function ZA(t,e,n,i){var o=L.T;L.T=null;var s=ne.p;try{ne.p=2,_d(t,e,n,i)}finally{ne.p=s,L.T=o}}function WA(t,e,n,i){var o=L.T;L.T=null;var s=ne.p;try{ne.p=8,_d(t,e,n,i)}finally{ne.p=s,L.T=o}}function _d(t,e,n,i){if(Za){var o=wf(i);if(o===null)Nc(t,e,i,Wa,n),Lg(t,i);else if(ex(o,t,e,n,i))i.stopPropagation();else if(Lg(t,i),e&4&&-1<jA.indexOf(t)){for(;o!==null;){var s=Yo(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=Ni(s.pendingLanes);if(r!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var u=1<<31-xt(r);l.entanglements[1]|=u,r&=~u}pn(s),(te&6)===0&&(Fa=Ct()+500,vr(0,!1))}}break;case 31:case 13:l=$i(s,2),l!==null&&dt(l,s,2),fl(),Td(s,2)}if(s=wf(i),s===null&&Nc(t,e,i,Wa,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else Nc(t,e,i,null,n)}}function wf(t){return t=Pf(t),Ed(t)}var Wa=null;function Ed(t){if(Wa=null,t=yo(t),t!==null){var e=ur(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=zg(e),t!==null)return t;t=null}else if(n===31){if(t=Vg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Wa=t,null}function C0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(OE()){case Jg:return 2;case Kg:return 8;case ba:case FE:return 32;case Xg:return 268435456;default:return 32}default:return 32}}var bf=!1,fi=null,di=null,pi=null,ar=new Map,lr=new Map,jn=[],jA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lg(t,e){switch(t){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":ar.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lr.delete(e.pointerId)}}function Ns(t,e,n,i,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Yo(e),e!==null&&E0(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function ex(t,e,n,i,o){switch(e){case"focusin":return fi=Ns(fi,t,e,n,i,o),!0;case"dragenter":return di=Ns(di,t,e,n,i,o),!0;case"mouseover":return pi=Ns(pi,t,e,n,i,o),!0;case"pointerover":var s=o.pointerId;return ar.set(s,Ns(ar.get(s)||null,t,e,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,lr.set(s,Ns(lr.get(s)||null,t,e,n,i,o)),!0}return!1}function A0(t){var e=yo(t.target);if(e!==null){var n=ur(e);if(n!==null){if(e=n.tag,e===13){if(e=zg(n),e!==null){t.blockedOn=e,Sh(t.priority,function(){Pg(n)});return}}else if(e===31){if(e=Vg(n),e!==null){t.blockedOn=e,Sh(t.priority,function(){Pg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ca(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wf(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Bc=i,n.target.dispatchEvent(i),Bc=null}else return e=Yo(n),e!==null&&E0(e),t.blockedOn=n,!1;e.shift()}return!0}function Hg(t,e,n){Ca(t)&&n.delete(e)}function tx(){bf=!1,fi!==null&&Ca(fi)&&(fi=null),di!==null&&Ca(di)&&(di=null),pi!==null&&Ca(pi)&&(pi=null),ar.forEach(Hg),lr.forEach(Hg)}function aa(t,e){t.blockedOn===e&&(t.blockedOn=null,bf||(bf=!0,qe.unstable_scheduleCallback(qe.unstable_NormalPriority,tx)))}var la=null;function Gg(t){la!==t&&(la=t,qe.unstable_scheduleCallback(qe.unstable_NormalPriority,function(){la===t&&(la=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],o=t[e+2];if(typeof i!="function"){if(Ed(i||n)===null)continue;break}var s=Yo(n);s!==null&&(t.splice(e,3),e-=3,af(s,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function Bo(t){function e(u){return aa(u,t)}fi!==null&&aa(fi,t),di!==null&&aa(di,t),pi!==null&&aa(pi,t),ar.forEach(e),lr.forEach(e);for(var n=0;n<jn.length;n++){var i=jn[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<jn.length&&(n=jn[0],n.blockedOn===null);)A0(n),n.blockedOn===null&&jn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],s=n[i+1],r=o[pt]||null;if(typeof s=="function")r||Gg(n);else if(r){var l=null;if(s&&s.hasAttribute("formAction")){if(o=s,r=s[pt]||null)l=r.formAction;else if(Ed(o)!==null)continue}else l=r.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Gg(n)}}}function x0(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return o=r})},focusReset:"manual",scroll:"manual"})}function e(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),o!==null&&(o(),o=null)}}}function Cd(t){this._internalRoot=t}ml.prototype.render=Cd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(w(409));var n=e.current,i=wt();_0(n,i,t,e,null,null)};ml.prototype.unmount=Cd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_0(t.current,2,null,t,null,null),fl(),e[$o]=null}};function ml(t){this._internalRoot=t}ml.prototype.unstable_scheduleHydration=function(t){if(t){var e=ey();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jn.length&&e!==0&&e<jn[n].priority;n++);jn.splice(n,0,t),n===0&&A0(t)}};var qg=Og.version;if(qg!=="19.2.3")throw Error(w(527,qg,"19.2.3"));ne.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(w(188)):(t=Object.keys(t).join(","),Error(w(268,t)));return t=kE(e),t=t!==null?Bg(t):null,t=t===null?null:t.stateNode,t};var nx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Is=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Is.isDisabled&&Is.supportsFiber))try{cr=Is.inject(nx),At=Is}catch{}var Is;hl.createRoot=function(t,e){if(!Fg(t))throw Error(w(299));var n=!1,i="",o=gv,s=yv,r=vv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=S0(t,1,!1,null,null,n,i,null,o,s,r,x0),t[$o]=e.current,yd(t),new Cd(e)};hl.hydrateRoot=function(t,e,n){if(!Fg(t))throw Error(w(299));var i=!1,o="",s=gv,r=yv,l=vv,u=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=S0(t,1,!0,e,n??null,i,o,u,s,r,l,x0),e.context=T0(null),n=e.current,i=wt(),i=Mf(i),o=ai(i),o.callback=null,li(n,o,i),n=i,e.current.lanes=n,dr(e,n),pn(e),t[$o]=e.current,yd(t),new ml(e)};hl.version="19.2.3"});var N0=rn((Ek,R0)=>{"use strict";function b0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b0)}catch(t){console.error(t)}}b0(),R0.exports=w0()});function I0(){try{let t=localStorage.getItem("hermes-settings");return t?JSON.parse(t):null}catch(t){return console.warn("Failed to load settings:",t),null}}function M0(){try{let t=localStorage.getItem("hermes-files");return t?JSON.parse(t):{}}catch(t){return console.warn("Failed to load files:",t),{}}}function Ji(t){try{localStorage.setItem("hermes-files",JSON.stringify(t))}catch(e){console.warn("Failed to save files:",e)}}var D0=oo(()=>{});function ht(){return typeof globalThis.app<"u"&&globalThis.app?.vault!==void 0}function G(){return ht()?globalThis.app:null}async function $e(t,e={}){if(!ht())return!1;try{let n=G(),i=n.vault.getAbstractFileByPath(t);if(!i)return console.warn(`File not found: ${t}`),!1;let{newWindow:o=!1,split:s=!1}=e,r=n.workspace;if(!o&&!s){let u=r.getLeavesOfType("markdown").find(f=>f.view?.file?.path===t);if(u)return r.setActiveLeaf(u,{focus:!0}),!0}let l;return s?l=r.getLeaf("split"):o?l=r.getLeaf(!0):l=r.getLeaf(!1),await l.openFile(i),!0}catch(n){return console.warn("Failed to open file in Obsidian:",n),!1}}function Oe(t){if(!t||typeof t!="string")return"/";let e=t.startsWith("/")?t.slice(1):t,n=e.lastIndexOf("/");if(n===-1)return"/";let i=e.substring(0,n);return i.startsWith("/")?i:`/${i}/`}var Ce=oo(()=>{});var U0={};ee(U0,{createBinaryFile:()=>Nd,createDirectory:()=>kd,createFile:()=>gl,deleteFile:()=>Ud,editFile:()=>Dd,getDirectoryList:()=>Rd,getFolderTree:()=>bd,getVaultFiles:()=>wd,initFileSystem:()=>xd,listDirectory:()=>Ln,moveFile:()=>Md,readFile:()=>gt,renameFile:()=>Id,searchFiles:()=>_r,updateFile:()=>Ti});var Nt,k0,le,Ad,xd,Ln,wd,bd,Rd,gt,Nd,gl,Ti,Id,Md,Dd,kd,Ud,_r,Pe=oo(()=>{D0();Ce();Nt=ht(),k0={"first.md":`Green leaves in the wind,
Softly dancing on the branch,
Nature's quiet song.`,"second.md":`Golden sun descends,
Painting clouds in fire light,
Day turns into night.`,"third.md":`Winter's cold embrace,
Snowflakes drift on silent air,
World is white and still.`,"projects/ideas.md":`# Project Ideas
- Voice controlled vault
- Markdown visualizer
- AI Haiku generator`,"projects/tasks.md":`# Task List
- [ ] Implement rename tool
- [ ] Fix markdown rendering
- [ ] Add batch action logic`,"projects/notes.md":`# Research Notes
Vaults are better when they are interactive. Hermes is the messenger.`},le={...k0},Ad=!1,xd=async()=>{if(Ad)return;if(Nt){Ad=!0;return}let t=await M0();t?le=t:await Ji(k0),Ad=!0},Ln=()=>Nt?G().vault.getMarkdownFiles().map(e=>e.path).filter(e=>!e.startsWith("chat history/trash/")):Object.keys(le),wd=async t=>{let{limit:e=20,offset:n=0,sortBy:i="mtime",sortOrder:o="desc",filter:s}=t,r=[];if(Nt?r=G().vault.getMarkdownFiles().map(d=>({path:d.path,name:d.name,mtime:d.stat.mtime,size:d.stat.size})).filter(d=>!d.path.startsWith("chat history/trash/")):r=Object.keys(le).map(f=>({path:f,name:f.split("/").pop()||f,mtime:Date.now(),size:le[f].length*2})),s){let f=s.toLowerCase();r=r.filter(d=>d.path.toLowerCase().includes(f)||d.name.toLowerCase().includes(f))}r.sort((f,d)=>{let p=f[i],m=d[i];return typeof p=="string"&&(p=p.toLowerCase(),m=m.toLowerCase()),p<m?o==="asc"?-1:1:p>m?o==="asc"?1:-1:0});let l=r.length;return{files:r.slice(n,n+e),total:l}},bd=()=>{if(Nt)return G().vault.getAllLoadedFiles().filter(e=>e.children!==void 0&&e.path!=="chat history/trash").map(e=>e.path).sort();{let t=Object.keys(le),e=new Set;return t.forEach(n=>{let i=n.split("/");i.pop();let o="";i.forEach(s=>{o+=(o?"/":"")+s,e.add(o)})}),Array.from(e).sort()}},Rd=()=>{if(Nt)return G().vault.getAllLoadedFiles().filter(e=>e.children!==void 0&&e.path!=="chat history/trash").map(e=>({path:e.path,children:[]}));{let t=Object.keys(le),e=new Map;t.forEach(i=>{let o=i.split("/");o.pop();for(let s=0;s<o.length;s++){let r=o.slice(0,s+1).join("/"),l=s===0?"/":o.slice(0,s).join("/");e.has(l)||e.set(l,new Set),e.get(l).add(r)}});let n=i=>{let o=Array.from(e.get(i)||[]).map(s=>n(s)).sort((s,r)=>s.path.localeCompare(r.path));return{path:i==="/"?"":i,children:o}};return[n("/")]}},gt=async t=>{if(Nt){let n=G().vault.getAbstractFileByPath(t);if(!n)throw new Error(`File not found in vault: ${t}`);return await G().vault.read(n)}let e=le[t.toLowerCase()];if(!e)throw new Error(`File not found: ${t}`);return e},Nd=async(t,e)=>{if(Nt){let i=t.substring(0,t.lastIndexOf("/"));return i&&i.length>0&&(G().vault.getAbstractFileByPath(i)||await G().vault.createFolder(i)),await G().vault.createBinary(t,e),`Created binary file ${t} in vault`}let n=`[Binary file data - ${e.byteLength||e.length} bytes]

This would be a binary file (${t}) in the Obsidian environment.`;return await gl(t,n)},gl=async(t,e)=>{if(Nt){let i=t.substring(0,t.lastIndexOf("/"));return i&&i.length>0&&(G().vault.getAbstractFileByPath(i)||await G().vault.createFolder(i)),await G().vault.create(t,e),`Created ${t} in vault`}let n=t.toLowerCase();if(le[n])throw new Error(`File already exists: ${t}`);return le[n]=e,await Ji(le),`Successfully created ${t}`},Ti=async(t,e)=>{if(Nt){let i=G().vault.getAbstractFileByPath(t);if(!i)throw new Error(`File not found: ${t}`);return await G().vault.modify(i,e),`Updated ${t} in vault`}let n=t.toLowerCase();if(!le[n])throw new Error(`File not found: ${t}`);return le[n]=e,await Ji(le),`Successfully updated ${t}`},Id=async(t,e)=>{if(Nt){let s=G().vault.getAbstractFileByPath(t);if(!s)throw new Error(`File not found: ${t}`);return await G().fileManager.renameFile(s,e),`Renamed ${t} to ${e} in vault`}let n=t.toLowerCase(),i=e.toLowerCase();if(!le[n])throw new Error(`File not found: ${t}`);if(le[i])throw new Error(`File already exists: ${e}`);let o=le[n];return delete le[n],le[i]=o,await Ji(le),`Successfully renamed ${t} to ${e}`},Md=async(t,e)=>{if(Nt){let s=G().vault.getAbstractFileByPath(t);if(!s)throw new Error(`Source file not found: ${t}`);if(G().vault.getAbstractFileByPath(e))throw new Error(`Target file already exists: ${e}`);return await G().fileManager.renameFile(s,e),`Moved ${t} to ${e} in vault`}let n=t.toLowerCase(),i=e.toLowerCase();if(!le[n])throw new Error(`Source file not found: ${t}`);if(le[i])throw new Error(`Target file already exists: ${e}`);let o=le[n];return delete le[n],le[i]=o,await Ji(le),`Successfully moved ${t} to ${e}`},Dd=async(t,e,n,i)=>{let s=(await gt(t)).split(`
`);if(e==="append")s.push(n||"");else if(e==="replace_line"){if(i===void 0||i<1||i>s.length)throw new Error(`Invalid line number: ${i}`);s[i-1]=n||""}else if(e==="remove_line"){if(i===void 0||i<1||i>s.length)throw new Error(`Invalid line number: ${i}`);s.splice(i-1,1)}else throw new Error(`Unknown operation: ${e}`);let r=s.join(`
`);return await Ti(t,r),`Successfully performed ${e} on ${t}`},kd=async t=>{if(Nt){if(G().vault.getAbstractFileByPath(t))throw new Error(`Directory already exists: ${t}`);return await G().vault.createFolder(t),`Created directory ${t} in vault`}let e=t.toLowerCase().replace(/\\/g,"/");if(Object.keys(le).filter(i=>i.startsWith(e+"/")).length>0)throw new Error(`Directory already exists or contains files: ${t}`);return`Successfully created directory ${t}`},Ud=async t=>{if(Nt){let n=G().vault.getAbstractFileByPath(t);if(!n)throw new Error(`File not found: ${t}`);let s=`${I0()?.chatHistoryFolder||"chat-history"}/trash`;G().vault.getAbstractFileByPath(s)||await G().vault.createFolder(s);let l=new Date().toISOString().replace(/[:.]/g,"-"),u=t.split("/").pop()||t,f=`${s}/${l}-${u}`;return await G().fileManager.renameFile(n,f),`Moved ${t} to trash`}let e=t.toLowerCase();if(!le[e])throw new Error(`File not found: ${t}`);return delete le[e],await Ji(le),`Successfully moved ${t} to trash`},_r=async(t,e=!1,n="i")=>{let i=Ln(),o=[],s=e?new RegExp(t,n):null,r=e?"":t.toLowerCase();for(let l of i){let f=(await gt(l)).split(`
`),d=[];f.forEach((p,m)=>{let h=!1;e&&s?h=s.test(p):h=p.toLowerCase().includes(r),h&&d.push({line:m+1,content:p,contextBefore:f.slice(Math.max(0,m-2),m),contextAfter:f.slice(m+1,Math.min(f.length,m+3))})}),d.length>0&&o.push({filename:l,matches:d})}return o}});var P0,Pd,L0,Ki,H0,G0,q0,Ld,O0,F0,z0,V0,B0=oo(()=>{P0="hermes_os_filesystem",Pd="hermes_os_settings",L0="hermes_os_chat_history",Ki=null,H0=async t=>{localStorage.setItem(P0,JSON.stringify(t))},G0=async()=>{let t=localStorage.getItem(P0);if(!t)return null;try{return JSON.parse(t)}catch(e){return console.error("Failed to parse persistent storage",e),null}},q0=async t=>{try{let e={...t};Ki=e,localStorage.setItem(Pd,JSON.stringify(e))}catch(e){console.error("Failed to save settings",e)}},Ld=()=>{if(Ki)return Ki;let t=localStorage.getItem(Pd);if(!t)return null;try{return JSON.parse(t)}catch(e){return console.error("Failed to load settings",e),null}},O0=async()=>Ki||Ld(),F0=async()=>{Ki=null;let t=localStorage.getItem(Pd);if(!t)return null;try{let e=JSON.parse(t);return Ki=e,e}catch(e){return console.error("Failed to load settings",e),null}},z0=async t=>{try{localStorage.setItem(L0,JSON.stringify(t))}catch(e){console.error("Failed to save chat history",e)}},V0=()=>{let t=localStorage.getItem(L0);if(!t)return[];try{return JSON.parse(t)}catch(e){return console.error("Failed to load chat history",e),[]}}});var Kt,mn,$0,Y0,J0,K0,X0,Q0,Hd,Z0,W0,j0,eS=oo(()=>{Kt=null,mn=null,$0=t=>{Kt=t},Y0=()=>Kt,J0=async t=>{console.warn("saveFiles called in Obsidian mode - files are managed by Obsidian vault")},K0=async()=>null,X0=async t=>{try{let e={...t};mn=e,Kt&&await Kt.saveData(e)}catch(e){console.error("Failed to save settings",e)}},Q0=()=>mn||null,Hd=async()=>{if(Kt)try{return mn=await Kt.loadData()||{},Kt.settings&&(mn={...mn,...Kt.settings}),mn}catch(t){return console.error("Failed to load settings from Obsidian",t),null}return null},Z0=async()=>(mn=null,await Hd()),W0=async t=>{try{if(Kt){let e=await Kt.loadData()||{};e.chatHistory=t,await Kt.saveData(e)}}catch(e){console.error("Failed to save chat history",e)}},j0=()=>mn?.chatHistory?mn.chatHistory:[]});var tS={};ee(tS,{getObsidianPlugin:()=>sx,loadAppSettings:()=>st,loadAppSettingsAsync:()=>qd,loadChatHistory:()=>Cr,loadFiles:()=>ax,reloadAppSettings:()=>yl,saveAppSettings:()=>Er,saveChatHistory:()=>Od,saveFiles:()=>rx,setObsidianPlugin:()=>Gd});var Hn,Gd,sx,rx,ax,Er,st,qd,yl,Od,Cr,Gn=oo(()=>{B0();eS();Hn=!1,Gd=t=>{Hn=!0,$0(t)},sx=()=>Y0(),rx=async t=>Hn?J0(t):H0(t),ax=async()=>Hn?K0():G0(),Er=async t=>Hn?X0(t):q0(t),st=()=>Hn?Q0():Ld(),qd=async()=>Hn?Hd():O0(),yl=async()=>Hn?Z0():F0(),Od=async t=>Hn?W0(t):z0(t),Cr=()=>Hn?j0():V0()});var p_=rn(_u=>{"use strict";var sD=Symbol.for("react.transitional.element"),rD=Symbol.for("react.fragment");function d_(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var o in e)o!=="key"&&(n[o]=e[o])}else n=e;return e=n.ref,{$$typeof:sD,type:t,key:i,ref:e!==void 0?e:null,props:n}}_u.Fragment=rD;_u.jsx=d_;_u.jsxs=d_});var ie=rn((o2,m_)=>{"use strict";m_.exports=p_()});var fk={};ee(fk,{default:()=>ku});module.exports=fE(fk);var X_=require("obsidian");var km=$(Bt()),J_=require("obsidian"),K_=$(N0());var H=$(Bt());Pe();Gn();var lx,ux;function cx(){return{geminiUrl:lx,vertexUrl:ux}}function fx(t,e,n,i){var o,s;if(!t?.baseUrl){let r=cx();return e?(o=r.vertexUrl)!==null&&o!==void 0?o:n:(s=r.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}var Zt=class{};function D(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){let s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function c(t,e,n){for(let s=0;s<e.length-1;s++){let r=e[s];if(r.endsWith("[]")){let l=r.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(t[l])){let u=t[l];if(Array.isArray(n))for(let f=0;f<u.length;f++){let d=u[f];c(d,e.slice(s+1),n[f])}else for(let f of u)c(f,e.slice(s+1),n)}return}else if(r.endsWith("[0]")){let l=r.slice(0,-3);l in t||(t[l]=[{}]);let u=t[l];c(u[0],e.slice(s+1),n);return}(!t[r]||typeof t[r]!="object")&&(t[r]={}),t=t[r]}let i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;let o=e[i];if(o.endsWith("[]")){let s=o.slice(0,-2);if(s in t){let r=t[s];return Array.isArray(r)?r.map(l=>a(l,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function dx(t,e){for(let[n,i]of Object.entries(e)){let o=n.split("."),s=i.split("."),r=new Set,l=-1;for(let u=0;u<o.length;u++)if(o[u]==="*"){l=u;break}if(l!==-1&&s.length>l)for(let u=l;u<s.length;u++){let f=s[u];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&r.add(f)}Vd(t,o,s,0,r)}}function Vd(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;let s=e[i];if(s.endsWith("[]")){let r=s.slice(0,-2),l=t;if(r in l&&Array.isArray(l[r]))for(let u of l[r])Vd(u,e,n,i+1,o)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let r=t,l=Object.keys(r).filter(f=>!f.startsWith("_")&&!o.has(f)),u={};for(let f of l)u[f]=r[f];for(let[f,d]of Object.entries(u)){let p=[];for(let m of n.slice(i))m==="*"?p.push(f):p.push(m);c(r,p,d)}for(let f of l)delete r[f]}}else{let r=t;s in r&&Vd(r[s],e,n,i+1,o)}}function Hp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function px(t){let e={},n=a(t,["operationName"]);n!=null&&c(e,["operationName"],n);let i=a(t,["resourceName"]);return i!=null&&c(e,["_url","resourceName"],i),e}function mx(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response","generateVideoResponse"]);return r!=null&&c(e,["response"],gx(r)),e}function hx(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],yx(r)),e}function gx(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>vx(r))),c(e,["generatedVideos"],s)}let i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);let o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function yx(t){let e={},n=a(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Sx(r))),c(e,["generatedVideos"],s)}let i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);let o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function vx(t){let e={},n=a(t,["video"]);return n!=null&&c(e,["video"],xx(n)),e}function Sx(t){let e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],wx(n)),e}function Tx(t){let e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function _x(t){let e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function Ex(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],Cx(r)),e}function Cx(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["parent"]);i!=null&&c(e,["parent"],i);let o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function xT(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],Ax(r)),e}function Ax(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["parent"]);i!=null&&c(e,["parent"],i);let o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function xx(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);let i=a(t,["encodedVideo"]);i!=null&&c(e,["videoBytes"],Hp(i));let o=a(t,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function wx(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);let i=a(t,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],Hp(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}var nS;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(nS||(nS={}));var iS;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(iS||(iS={}));var oS;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(oS||(oS={}));var R;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(R||(R={}));var sS;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(sS||(sS={}));var rS;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(rS||(rS={}));var aS;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(aS||(aS={}));var lS;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(lS||(lS={}));var uS;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(uS||(uS={}));var cS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cS||(cS={}));var fS;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(fS||(fS={}));var dS;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(dS||(dS={}));var pS;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(pS||(pS={}));var mS;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(mS||(mS={}));var hS;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(hS||(hS={}));var gS;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(gS||(gS={}));var yS;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(yS||(yS={}));var vS;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(vS||(vS={}));var SS;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(SS||(SS={}));var TS;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(TS||(TS={}));var _S;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_S||(_S={}));var ns;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ns||(ns={}));var ES;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ES||(ES={}));var CS;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(CS||(CS={}));var AS;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AS||(AS={}));var Bd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Bd||(Bd={}));var xS;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(xS||(xS={}));var wS;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(wS||(wS={}));var $d;(function(t){t.COLLECTION="COLLECTION"})($d||($d={}));var bS;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(bS||(bS={}));var RS;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(RS||(RS={}));var NS;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(NS||(NS={}));var IS;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(IS||(IS={}));var MS;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(MS||(MS={}));var DS;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(DS||(DS={}));var kS;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kS||(kS={}));var US;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(US||(US={}));var PS;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(PS||(PS={}));var LS;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(LS||(LS={}));var HS;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(HS||(HS={}));var GS;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(GS||(GS={}));var qS;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(qS||(qS={}));var OS;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(OS||(OS={}));var FS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(FS||(FS={}));var zS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(zS||(zS={}));var VS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(VS||(VS={}));var BS;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(BS||(BS={}));var $S;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})($S||($S={}));var YS;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(YS||(YS={}));var JS;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(JS||(JS={}));var KS;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(KS||(KS={}));var XS;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(XS||(XS={}));var QS;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(QS||(QS={}));var ZS;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ZS||(ZS={}));var WS;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(WS||(WS={}));var jS;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(jS||(jS={}));var jo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(jo||(jo={}));var wr=class{constructor(e){let n={};for(let i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var Qi=class{get text(){var e,n,i,o,s,r,l,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",d=!1,p=[];for(let m of(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(let[h,v]of Object.entries(m))h!=="text"&&h!=="thought"&&h!=="thoughtSignature"&&(v!==null||v!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,f+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?f:void 0}get data(){var e,n,i,o,s,r,l,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="",d=[];for(let p of(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(let[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(f+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,o,s,r,l,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let f=(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(f?.length!==0)return f}get executableCode(){var e,n,i,o,s,r,l,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let d=(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,o,s,r,l,u,f;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let d=(u=(l=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(f=d?.[0])===null||f===void 0?void 0:f.output}},xl=class{},wl=class{},Yd=class{},Jd=class{},Kd=class{},Xd=class{},bl=class{},Rl=class{},Nl=class{},Qd=class{};var is=class{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let i=new is,o,s=e;return n?o=hx(s):o=mx(s),Object.assign(i,o),i}},Il=class{},Ml=class{},Dl=class{},kl=class{},Zd=class{},Wd=class{},jd=class{};var br=class{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let i=new br,s=Ex(e);return Object.assign(i,s),i}},ep=class{},tp=class{},np=class{};var Ul=class{};var ip=class{get text(){var e,n,i;let o="",s=!1,r=[];for(let l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[u,f]of Object.entries(l))u!=="text"&&u!=="thought"&&f!==null&&r.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,o+=l.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,n,i;let o="",s=[];for(let r of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[l,u]of Object.entries(r))l!=="inlineData"&&u!==null&&s.push(l);r.inlineData&&typeof r.inlineData.data=="string"&&(o+=atob(r.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var op=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Rr=class{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let i=new Rr,s=xT(e);return Object.assign(i,s),i}};function W(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function wT(t,e){let n=W(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function bT(t){return Array.isArray(t)?t.map(e=>Pl(e)):[Pl(t)]}function Pl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function RT(t){let e=Pl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function NT(t){let e=Pl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function eT(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function IT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>eT(e)):[eT(t)]}function sp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function tT(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function nT(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function et(t){if(t==null)throw new Error("ContentUnion is required");return sp(t)?t:{role:"user",parts:IT(t)}}function Gp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let i=et(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){let n=et(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>et(n)):[et(e)]}function Vt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(tT(t)||nT(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[et(t)]}let e=[],n=[],i=sp(t[0]);for(let o of t){let s=sp(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(o);else{if(tT(o)||nT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:IT(n)}),e}function bx(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(R).includes(n[0].toUpperCase())?n[0].toUpperCase():R.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let i of n)e.anyOf.push({type:Object.values(R).includes(i.toUpperCase())?i.toUpperCase():R.TYPE_UNSPECIFIED})}}function es(t){let e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&bx(t.type,e);for(let[r,l]of Object.entries(t))if(l!=null)if(r=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(R).includes(l.toUpperCase())?l.toUpperCase():R.TYPE_UNSPECIFIED}else if(n.includes(r))e[r]=es(l);else if(i.includes(r)){let u=[];for(let f of l){if(f.type=="null"){e.nullable=!0;continue}u.push(es(f))}e[r]=u}else if(o.includes(r)){let u={};for(let[f,d]of Object.entries(l))u[f]=es(d);e[r]=u}else{if(r==="additionalProperties")continue;e[r]=l}return e}function qp(t){return es(t)}function Op(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Fp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function as(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=es(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=es(e.response));return t}function ls(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function Rx(t,e,n,i=1){let o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Fn(t,e){if(typeof e!="string")throw new Error("name must be a string");return Rx(t,e,"cachedContents")}function MT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ei(t){return Hp(t)}function Nx(t){return t!=null&&typeof t=="object"&&"name"in t}function Ix(t){return t!=null&&typeof t=="object"&&"video"in t}function Mx(t){return t!=null&&typeof t=="object"&&"uri"in t}function DT(t){var e;let n;if(Nx(t)&&(n=t.name),!(Mx(t)&&(n=t.uri,n===void 0))&&!(Ix(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function kT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function UT(t){for(let e of["models","tunedModels","publisherModels"])if(Dx(t,e))return t[e];return[]}function Dx(t,e){return t!==null&&typeof t=="object"&&e in t}function kx(t,e={}){let n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Ux(t,e={}){let n=[],i=new Set;for(let o of t){let s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);let r=kx(o,e);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function PT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Px(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function LT(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let s=!1;for(let r of o){if(typeof r!="object"||r===null)continue;let u=r.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function us(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function HT(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function Lx(t){let e={},n=a(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);let i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>gw(r))),c(e,["inlinedResponses"],s)}let o=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["inlinedEmbedContentResponses"],s)}return e}function Hx(t){let e={},n=a(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);let i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&c(e,["gcsUri"],i);let o=a(t,["bigqueryDestination","outputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function Gx(t){let e={},n=a(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);let i=a(t,["gcsUri"]);i!=null&&c(e,["gcsDestination","outputUriPrefix"],i);let o=a(t,["bigqueryUri"]);if(o!=null&&c(e,["bigqueryDestination","outputUri"],o),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Cl(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata","displayName"]);i!=null&&c(e,["displayName"],i);let o=a(t,["metadata","state"]);o!=null&&c(e,["state"],HT(o));let s=a(t,["metadata","createTime"]);s!=null&&c(e,["createTime"],s);let r=a(t,["metadata","endTime"]);r!=null&&c(e,["endTime"],r);let l=a(t,["metadata","updateTime"]);l!=null&&c(e,["updateTime"],l);let u=a(t,["metadata","model"]);u!=null&&c(e,["model"],u);let f=a(t,["metadata","output"]);return f!=null&&c(e,["dest"],Lx(LT(f))),e}function rp(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["displayName"]);i!=null&&c(e,["displayName"],i);let o=a(t,["state"]);o!=null&&c(e,["state"],HT(o));let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);let l=a(t,["startTime"]);l!=null&&c(e,["startTime"],l);let u=a(t,["endTime"]);u!=null&&c(e,["endTime"],u);let f=a(t,["updateTime"]);f!=null&&c(e,["updateTime"],f);let d=a(t,["model"]);d!=null&&c(e,["model"],d);let p=a(t,["inputConfig"]);p!=null&&c(e,["src"],qx(p));let m=a(t,["outputConfig"]);m!=null&&c(e,["dest"],Hx(LT(m)));let h=a(t,["completionStats"]);return h!=null&&c(e,["completionStats"],h),e}function qx(t){let e={},n=a(t,["instancesFormat"]);n!=null&&c(e,["format"],n);let i=a(t,["gcsSource","uris"]);i!=null&&c(e,["gcsUri"],i);let o=a(t,["bigquerySource","inputUri"]);return o!=null&&c(e,["bigqueryUri"],o),e}function Ox(t,e){let n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=a(e,["fileName"]);i!=null&&c(n,["fileName"],i);let o=a(e,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>hw(t,r))),c(n,["requests","requests"],s)}return n}function Fx(t){let e={},n=a(t,["format"]);n!=null&&c(e,["instancesFormat"],n);let i=a(t,["gcsUri"]);i!=null&&c(e,["gcsSource","uris"],i);let o=a(t,["bigqueryUri"]);if(o!=null&&c(e,["bigquerySource","inputUri"],o),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function zx(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Vx(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],us(t,i)),n}function Bx(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],us(t,i)),n}function $x(t){let e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);let i=a(t,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],Yx(i));let o=a(t,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);let s=a(t,["finishReason"]);s!=null&&c(e,["finishReason"],s);let r=a(t,["avgLogprobs"]);r!=null&&c(e,["avgLogprobs"],r);let l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);let u=a(t,["index"]);u!=null&&c(e,["index"],u);let f=a(t,["logprobsResult"]);f!=null&&c(e,["logprobsResult"],f);let d=a(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),c(e,["safetyRatings"],m)}let p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function Yx(t){let e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["citations"],i)}return e}function GT(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Cw(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function Jx(t,e){let n={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&c(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Kx(t,e){let n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);let o=a(t,["dest"]);return e!==void 0&&o!=null&&c(e,["outputConfig"],Gx(Px(o))),n}function iT(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["src"]);o!=null&&c(n,["batch","inputConfig"],Ox(t,PT(t,o)));let s=a(e,["config"]);return s!=null&&Jx(s,n),n}function Xx(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["model"],W(t,i));let o=a(e,["src"]);o!=null&&c(n,["inputConfig"],Fx(PT(t,o)));let s=a(e,["config"]);return s!=null&&Kx(s,n),n}function Qx(t,e){let n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&c(e,["batch","displayName"],i),n}function Zx(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["src"]);o!=null&&c(n,["batch","inputConfig"],ow(t,o));let s=a(e,["config"]);return s!=null&&Qx(s,n),n}function Wx(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],us(t,i)),n}function jx(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],us(t,i)),n}function ew(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);return s!=null&&c(e,["error"],s),e}function tw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);return s!=null&&c(e,["error"],s),e}function nw(t,e){let n={},i=a(e,["contents"]);if(i!=null){let s=Gp(t,i);Array.isArray(s)&&(s=s.map(r=>r)),c(n,["requests[]","request","content"],s)}let o=a(e,["config"]);return o!=null&&(c(n,["_self"],iw(o,n)),dx(n,{"requests[].*":"requests[].request.*"})),n}function iw(t,e){let n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);let o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);let s=a(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&c(e,["requests[]","outputDimensionality"],s),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ow(t,e){let n={},i=a(e,["fileName"]);i!=null&&c(n,["file_name"],i);let o=a(e,["inlinedRequests"]);return o!=null&&c(n,["requests"],nw(t,o)),n}function sw(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function rw(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aw(t){let e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);let i=a(t,["mode"]);if(i!=null&&c(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lw(t,e,n){let i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],GT(et(o)));let s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);let r=a(e,["topP"]);r!=null&&c(i,["topP"],r);let l=a(e,["topK"]);l!=null&&c(i,["topK"],l);let u=a(e,["candidateCount"]);u!=null&&c(i,["candidateCount"],u);let f=a(e,["maxOutputTokens"]);f!=null&&c(i,["maxOutputTokens"],f);let d=a(e,["stopSequences"]);d!=null&&c(i,["stopSequences"],d);let p=a(e,["responseLogprobs"]);p!=null&&c(i,["responseLogprobs"],p);let m=a(e,["logprobs"]);m!=null&&c(i,["logprobs"],m);let h=a(e,["presencePenalty"]);h!=null&&c(i,["presencePenalty"],h);let v=a(e,["frequencyPenalty"]);v!=null&&c(i,["frequencyPenalty"],v);let T=a(e,["seed"]);T!=null&&c(i,["seed"],T);let E=a(e,["responseMimeType"]);E!=null&&c(i,["responseMimeType"],E);let g=a(e,["responseSchema"]);g!=null&&c(i,["responseSchema"],qp(g));let y=a(e,["responseJsonSchema"]);if(y!=null&&c(i,["responseJsonSchema"],y),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let S=a(e,["safetySettings"]);if(n!==void 0&&S!=null){let se=S;Array.isArray(se)&&(se=se.map(Ye=>Aw(Ye))),c(n,["safetySettings"],se)}let _=a(e,["tools"]);if(n!==void 0&&_!=null){let se=ls(_);Array.isArray(se)&&(se=se.map(Ye=>ww(as(Ye)))),c(n,["tools"],se)}let A=a(e,["toolConfig"]);if(n!==void 0&&A!=null&&c(n,["toolConfig"],xw(A)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let I=a(e,["cachedContent"]);n!==void 0&&I!=null&&c(n,["cachedContent"],Fn(t,I));let x=a(e,["responseModalities"]);x!=null&&c(i,["responseModalities"],x);let M=a(e,["mediaResolution"]);M!=null&&c(i,["mediaResolution"],M);let C=a(e,["speechConfig"]);if(C!=null&&c(i,["speechConfig"],Op(C)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let N=a(e,["thinkingConfig"]);N!=null&&c(i,["thinkingConfig"],N);let F=a(e,["imageConfig"]);F!=null&&c(i,["imageConfig"],mw(F));let me=a(e,["enableEnhancedCivicAnswers"]);if(me!=null&&c(i,["enableEnhancedCivicAnswers"],me),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function uw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>$x(f))),c(e,["candidates"],u)}let o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);let s=a(t,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);let r=a(t,["responseId"]);r!=null&&c(e,["responseId"],r);let l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function cw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],us(t,i)),n}function fw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],us(t,i)),n}function dw(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function pw(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function mw(t){let e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);let i=a(t,["imageSize"]);if(i!=null&&c(e,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function hw(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["request","model"],W(t,i));let o=a(e,["contents"]);if(o!=null){let l=Vt(o);Array.isArray(l)&&(l=l.map(u=>GT(u))),c(n,["request","contents"],l)}let s=a(e,["metadata"]);s!=null&&c(n,["metadata"],s);let r=a(e,["config"]);return r!=null&&c(n,["request","generationConfig"],lw(t,r,a(n,["request"],{}))),n}function gw(t){let e={},n=a(t,["response"]);n!=null&&c(e,["response"],uw(n));let i=a(t,["error"]);return i!=null&&c(e,["error"],i),e}function yw(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);if(e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function vw(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);let s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),n}function Sw(t){let e={},n=a(t,["config"]);return n!=null&&yw(n,e),e}function Tw(t){let e={},n=a(t,["config"]);return n!=null&&vw(n,e),e}function _w(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Cl(r))),c(e,["batchJobs"],s)}return e}function Ew(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>rp(r))),c(e,["batchJobs"],s)}return e}function Cw(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],sw(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],rw(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],zx(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function Aw(t){let e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=a(t,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function xw(t){let e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);let i=a(t,["functionCallingConfig"]);return i!=null&&c(e,["functionCallingConfig"],aw(i)),e}function ww(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],dw(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],pw(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}var qn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(qn||(qn={}));var On=class{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(s=(o=r.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var ap=class extends Zt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new On(qn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){let n=iT(this.apiClient,e),i=n._url,o=D("{model}:batchGenerateContent",i),l=n.batch.inputConfig.requests,u=l.requests,f=[];for(let d of u){let p=Object.assign({},d);if(p.systemInstruction){let m=p.systemInstruction;delete p.systemInstruction;let h=p.request;h.systemInstruction=m,p.request=h}f.push(p)}return l.requests=f,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){let s=this.getGcsUri(e),r=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(r)i.dest=`${r}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Xx(this.apiClient,e);return l=D("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>rp(d))}else{let f=iT(this.apiClient,e);return l=D("{model}:batchGenerateContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>Cl(d))}}async createEmbeddingsInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=Zx(this.apiClient,e);return s=D("{model}:asyncBatchEmbedContent",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Cl(u))}}async get(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=fw(this.apiClient,e);return l=D("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>rp(d))}else{let f=cw(this.apiClient,e);return l=D("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>Cl(d))}}async cancel(e){var n,i,o,s;let r="",l={};if(this.apiClient.isVertexAI()){let u=Bx(this.apiClient,e);r=D("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{let u=Vx(this.apiClient,e);r=D("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Tw(e);return l=D("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Ew(d),m=new Ul;return Object.assign(m,p),m})}else{let f=Sw(e);return l=D("batches",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=_w(d),m=new Ul;return Object.assign(m,p),m})}}async delete(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=jx(this.apiClient,e);return l=D("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>tw(d))}else{let f=Wx(this.apiClient,e);return l=D("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>ew(d))}}};function bw(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function oT(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Qw(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function Rw(t,e){let n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);let o=a(t,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);let s=a(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);let r=a(t,["contents"]);if(e!==void 0&&r!=null){let d=Vt(r);Array.isArray(d)&&(d=d.map(p=>oT(p))),c(e,["contents"],d)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],oT(et(l)));let u=a(t,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>Ww(p))),c(e,["tools"],d)}let f=a(t,["toolConfig"]);if(e!==void 0&&f!=null&&c(e,["toolConfig"],Zw(f)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Nw(t,e){let n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);let o=a(t,["expireTime"]);e!==void 0&&o!=null&&c(e,["expireTime"],o);let s=a(t,["displayName"]);e!==void 0&&s!=null&&c(e,["displayName"],s);let r=a(t,["contents"]);if(e!==void 0&&r!=null){let p=Vt(r);Array.isArray(p)&&(p=p.map(m=>m)),c(e,["contents"],p)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],et(l));let u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>jw(m))),c(e,["tools"],p)}let f=a(t,["toolConfig"]);e!==void 0&&f!=null&&c(e,["toolConfig"],f);let d=a(t,["kmsKeyName"]);return e!==void 0&&d!=null&&c(e,["encryption_spec","kmsKeyName"],d),n}function Iw(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["model"],wT(t,i));let o=a(e,["config"]);return o!=null&&Rw(o,n),n}function Mw(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["model"],wT(t,i));let o=a(e,["config"]);return o!=null&&Nw(o,n),n}function Dw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],Fn(t,i)),n}function kw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],Fn(t,i)),n}function Uw(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function Pw(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function Lw(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Hw(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gw(t){let e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);let i=a(t,["mode"]);if(i!=null&&c(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qw(t){let e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);let s=a(t,["parametersJsonSchema"]);s!=null&&c(e,["parametersJsonSchema"],s);let r=a(t,["response"]);r!=null&&c(e,["response"],r);let l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Ow(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],Fn(t,i)),n}function Fw(t,e){let n={},i=a(e,["name"]);return i!=null&&c(n,["_url","name"],Fn(t,i)),n}function zw(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function Vw(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function Bw(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function $w(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function Yw(t){let e={},n=a(t,["config"]);return n!=null&&Bw(n,e),e}function Jw(t){let e={},n=a(t,["config"]);return n!=null&&$w(n,e),e}function Kw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["cachedContents"],s)}return e}function Xw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["cachedContents"],s)}return e}function Qw(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],Lw(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],Hw(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],bw(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function Zw(t){let e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);let i=a(t,["functionCallingConfig"]);return i!=null&&c(e,["functionCallingConfig"],Gw(i)),e}function Ww(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],zw(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],Vw(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function jw(t){let e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);let i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=a(t,["codeExecution"]);o!=null&&c(e,["codeExecution"],o);let s=a(t,["enterpriseWebSearch"]);s!=null&&c(e,["enterpriseWebSearch"],s);let r=a(t,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>qw(m))),c(e,["functionDeclarations"],p)}let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);let u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);let f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);let d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function eb(t,e){let n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);let o=a(t,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),n}function tb(t,e){let n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);let o=a(t,["expireTime"]);return e!==void 0&&o!=null&&c(e,["expireTime"],o),n}function nb(t,e){let n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],Fn(t,i));let o=a(e,["config"]);return o!=null&&eb(o,n),n}function ib(t,e){let n={},i=a(e,["name"]);i!=null&&c(n,["_url","name"],Fn(t,i));let o=a(e,["config"]);return o!=null&&tb(o,n),n}var lp=class extends Zt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new On(qn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Mw(this.apiClient,e);return l=D("cachedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{let f=Iw(this.apiClient,e);return l=D("cachedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async get(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Fw(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{let f=Ow(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async delete(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=kw(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Pw(d),m=new Dl;return Object.assign(m,p),m})}else{let f=Dw(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Uw(d),m=new Dl;return Object.assign(m,p),m})}}async update(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=ib(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}else{let f=nb(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>d)}}async listInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Jw(e);return l=D("cachedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Xw(d),m=new kl;return Object.assign(m,p),m})}else{let f=Yw(e);return l=D("cachedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Kw(d),m=new kl;return Object.assign(m,p),m})}}};function Ll(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function sT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function q(t){return this instanceof q?(this.v=t,this):new q(t)}function Xt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",r),o[Symbol.asyncIterator]=function(){return this},o;function r(h){return function(v){return Promise.resolve(v).then(h,p)}}function l(h,v){i[h]&&(o[h]=function(T){return new Promise(function(E,g){s.push([h,T,E,g])>1||u(h,T)})},v&&(o[h]=v(o[h])))}function u(h,v){try{f(i[h](v))}catch(T){m(s[0][3],T)}}function f(h){h.value instanceof q?Promise.resolve(h.value.v).then(d,p):m(s[0][2],h)}function d(h){u("next",h)}function p(h){u("throw",h)}function m(h,v){h(v),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Qt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sT=="function"?sT(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(r){return new Promise(function(l,u){r=t[s](r),o(l,u,r.done,r.value)})}}function o(s,r,l,u){Promise.resolve(u).then(function(f){s({value:f,done:l})},r)}}function ob(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:qT(n)}function qT(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function sb(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function rT(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{let o=[],s=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),s&&!qT(t[i])&&(s=!1),i++;s?e.push(...o):e.pop()}return e}var up=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new cp(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},cp=class{constructor(e,n,i,o={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),sb(s)}async sendMessage(e){var n;await this.sendPromise;let i=et(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,r,l;let u=await o,f=(r=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content,d=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length,m=[];d!=null&&(m=(l=d.slice(p))!==null&&l!==void 0?l:[]);let h=f?[f]:[];this.recordHistory(i,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;let i=et(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let s=await o;return this.processStreamResponse(s,i)}getHistory(e=!1){let n=e?rT(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Xt(this,arguments,function*(){var o,s,r,l,u,f;let d=[];try{for(var p=!0,m=Qt(e),h;h=yield q(m.next()),o=h.done,!o;p=!0){l=h.value,p=!1;let v=l;if(ob(v)){let T=(f=(u=v.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content;T!==void 0&&d.push(T)}yield yield q(v)}}catch(v){s={error:v}}finally{try{!p&&!o&&(r=m.return)&&(yield q(r.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,d)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...rT(i)):this.history.push(e),this.history.push(...o)}};var Zi=class extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Zi.prototype)}};function rb(t){let e={},n=a(t,["file"]);return n!=null&&c(e,["file"],n),e}function ab(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function lb(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],DT(n)),e}function ub(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function cb(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],DT(n)),e}function fb(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function db(t){let e={},n=a(t,["config"]);return n!=null&&fb(n,e),e}function pb(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["files"],s)}return e}var fp=class extends Zt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new On(qn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=db(e);return s=D("files",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=pb(u),d=new ep;return Object.assign(d,f),d})}}async createInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=rb(e);return s=D("upload/v1beta/files",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=ab(u),d=new tp;return Object.assign(d,f),d})}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=cb(e);return s=D("files/{file}",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=lb(e);return s=D("files/{file}",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=ub(u),d=new np;return Object.assign(d,f),d})}}};function Al(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function mb(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Ib(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function hb(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function gb(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yb(t){let e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);let s=a(t,["parametersJsonSchema"]);s!=null&&c(e,["parametersJsonSchema"],s);let r=a(t,["response"]);r!=null&&c(e,["response"],r);let l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function vb(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);let i=a(t,["responseJsonSchema"]);i!=null&&c(e,["responseJsonSchema"],i);let o=a(t,["audioTimestamp"]);o!=null&&c(e,["audioTimestamp"],o);let s=a(t,["candidateCount"]);s!=null&&c(e,["candidateCount"],s);let r=a(t,["enableAffectiveDialog"]);r!=null&&c(e,["enableAffectiveDialog"],r);let l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);let u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);let f=a(t,["maxOutputTokens"]);f!=null&&c(e,["maxOutputTokens"],f);let d=a(t,["mediaResolution"]);d!=null&&c(e,["mediaResolution"],d);let p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);let m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);let h=a(t,["responseMimeType"]);h!=null&&c(e,["responseMimeType"],h);let v=a(t,["responseModalities"]);v!=null&&c(e,["responseModalities"],v);let T=a(t,["responseSchema"]);T!=null&&c(e,["responseSchema"],T);let E=a(t,["routingConfig"]);E!=null&&c(e,["routingConfig"],E);let g=a(t,["seed"]);g!=null&&c(e,["seed"],g);let y=a(t,["speechConfig"]);y!=null&&c(e,["speechConfig"],y);let S=a(t,["stopSequences"]);S!=null&&c(e,["stopSequences"],S);let _=a(t,["temperature"]);_!=null&&c(e,["temperature"],_);let A=a(t,["thinkingConfig"]);A!=null&&c(e,["thinkingConfig"],A);let I=a(t,["topK"]);I!=null&&c(e,["topK"],I);let x=a(t,["topP"]);if(x!=null&&c(e,["topP"],x),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Sb(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function Tb(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function _b(t,e){let n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);let o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);let s=a(t,["temperature"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","temperature"],s);let r=a(t,["topP"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","topP"],r);let l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);let u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);let f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);let d=a(t,["seed"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","seed"],d);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],Fp(p));let m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);let h=a(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],h);let v=a(t,["systemInstruction"]);e!==void 0&&v!=null&&c(e,["setup","systemInstruction"],mb(et(v)));let T=a(t,["tools"]);if(e!==void 0&&T!=null){let I=ls(T);Array.isArray(I)&&(I=I.map(x=>Db(as(x)))),c(e,["setup","tools"],I)}let E=a(t,["sessionResumption"]);e!==void 0&&E!=null&&c(e,["setup","sessionResumption"],Mb(E));let g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);let y=a(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&c(e,["setup","outputAudioTranscription"],y);let S=a(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&c(e,["setup","realtimeInputConfig"],S);let _=a(t,["contextWindowCompression"]);e!==void 0&&_!=null&&c(e,["setup","contextWindowCompression"],_);let A=a(t,["proactivity"]);if(e!==void 0&&A!=null&&c(e,["setup","proactivity"],A),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Eb(t,e){let n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],vb(i));let o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);let s=a(t,["temperature"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","temperature"],s);let r=a(t,["topP"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","topP"],r);let l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);let u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);let f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);let d=a(t,["seed"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","seed"],d);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],Fp(p));let m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);let h=a(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],h);let v=a(t,["systemInstruction"]);e!==void 0&&v!=null&&c(e,["setup","systemInstruction"],et(v));let T=a(t,["tools"]);if(e!==void 0&&T!=null){let x=ls(T);Array.isArray(x)&&(x=x.map(M=>kb(as(M)))),c(e,["setup","tools"],x)}let E=a(t,["sessionResumption"]);e!==void 0&&E!=null&&c(e,["setup","sessionResumption"],E);let g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);let y=a(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&c(e,["setup","outputAudioTranscription"],y);let S=a(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&c(e,["setup","realtimeInputConfig"],S);let _=a(t,["contextWindowCompression"]);e!==void 0&&_!=null&&c(e,["setup","contextWindowCompression"],_);let A=a(t,["proactivity"]);e!==void 0&&A!=null&&c(e,["setup","proactivity"],A);let I=a(t,["explicitVadSignal"]);return e!==void 0&&I!=null&&c(e,["setup","explicitVadSignal"],I),n}function Cb(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["setup","model"],W(t,i));let o=a(e,["config"]);return o!=null&&c(n,["config"],_b(o,n)),n}function Ab(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["setup","model"],W(t,i));let o=a(e,["config"]);return o!=null&&c(n,["config"],Eb(o,n)),n}function xb(t){let e={},n=a(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],n),e}function wb(t){let e={},n=a(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["weightedPrompts"],i)}return e}function bb(t){let e={},n=a(t,["media"]);if(n!=null){let f=bT(n);Array.isArray(f)&&(f=f.map(d=>Al(d))),c(e,["mediaChunks"],f)}let i=a(t,["audio"]);i!=null&&c(e,["audio"],Al(NT(i)));let o=a(t,["audioStreamEnd"]);o!=null&&c(e,["audioStreamEnd"],o);let s=a(t,["video"]);s!=null&&c(e,["video"],Al(RT(s)));let r=a(t,["text"]);r!=null&&c(e,["text"],r);let l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);let u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function Rb(t){let e={},n=a(t,["media"]);if(n!=null){let f=bT(n);Array.isArray(f)&&(f=f.map(d=>d)),c(e,["mediaChunks"],f)}let i=a(t,["audio"]);i!=null&&c(e,["audio"],NT(i));let o=a(t,["audioStreamEnd"]);o!=null&&c(e,["audioStreamEnd"],o);let s=a(t,["video"]);s!=null&&c(e,["video"],RT(s));let r=a(t,["text"]);r!=null&&c(e,["text"],r);let l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);let u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function Nb(t){let e={},n=a(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],n);let i=a(t,["serverContent"]);i!=null&&c(e,["serverContent"],i);let o=a(t,["toolCall"]);o!=null&&c(e,["toolCall"],o);let s=a(t,["toolCallCancellation"]);s!=null&&c(e,["toolCallCancellation"],s);let r=a(t,["usageMetadata"]);r!=null&&c(e,["usageMetadata"],Ub(r));let l=a(t,["goAway"]);l!=null&&c(e,["goAway"],l);let u=a(t,["sessionResumptionUpdate"]);u!=null&&c(e,["sessionResumptionUpdate"],u);let f=a(t,["voiceActivityDetectionSignal"]);f!=null&&c(e,["voiceActivityDetectionSignal"],f);let d=a(t,["voiceActivity"]);return d!=null&&c(e,["voiceActivity"],Pb(d)),e}function Ib(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],hb(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],gb(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Al(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function Mb(t){let e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Db(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],Sb(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],Tb(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function kb(t){let e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);let i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=a(t,["codeExecution"]);o!=null&&c(e,["codeExecution"],o);let s=a(t,["enterpriseWebSearch"]);s!=null&&c(e,["enterpriseWebSearch"],s);let r=a(t,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>yb(m))),c(e,["functionDeclarations"],p)}let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);let u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);let f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);let d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function Ub(t){let e={},n=a(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);let i=a(t,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);let o=a(t,["candidatesTokenCount"]);o!=null&&c(e,["responseTokenCount"],o);let s=a(t,["toolUsePromptTokenCount"]);s!=null&&c(e,["toolUsePromptTokenCount"],s);let r=a(t,["thoughtsTokenCount"]);r!=null&&c(e,["thoughtsTokenCount"],r);let l=a(t,["totalTokenCount"]);l!=null&&c(e,["totalTokenCount"],l);let u=a(t,["promptTokensDetails"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(v=>v)),c(e,["promptTokensDetails"],h)}let f=a(t,["cacheTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(v=>v)),c(e,["cacheTokensDetails"],h)}let d=a(t,["candidatesTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(v=>v)),c(e,["responseTokensDetails"],h)}let p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(v=>v)),c(e,["toolUsePromptTokensDetails"],h)}let m=a(t,["trafficType"]);return m!=null&&c(e,["trafficType"],m),e}function Pb(t){let e={},n=a(t,["type"]);return n!=null&&c(e,["voiceActivityType"],n),e}function Lb(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Hb(t){let e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);let i=a(t,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],Gb(i));let o=a(t,["tokenCount"]);o!=null&&c(e,["tokenCount"],o);let s=a(t,["finishReason"]);s!=null&&c(e,["finishReason"],s);let r=a(t,["avgLogprobs"]);r!=null&&c(e,["avgLogprobs"],r);let l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);let u=a(t,["index"]);u!=null&&c(e,["index"],u);let f=a(t,["logprobsResult"]);f!=null&&c(e,["logprobsResult"],f);let d=a(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),c(e,["safetyRatings"],m)}let p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function Gb(t){let e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["citations"],i)}return e}function qb(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["contents"]);if(o!=null){let s=Vt(o);Array.isArray(s)&&(s=s.map(r=>r)),c(n,["contents"],s)}return n}function Ob(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["tokensInfo"],o)}return e}function Fb(t){let e={},n=a(t,["values"]);n!=null&&c(e,["values"],n);let i=a(t,["statistics"]);return i!=null&&c(e,["statistics"],zb(i)),e}function zb(t){let e={},n=a(t,["truncated"]);n!=null&&c(e,["truncated"],n);let i=a(t,["token_count"]);return i!=null&&c(e,["tokenCount"],i),e}function Zl(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ZR(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function Vb(t){let e={},n=a(t,["controlType"]);n!=null&&c(e,["controlType"],n);let i=a(t,["enableControlImageComputation"]);return i!=null&&c(e,["computeControl"],i),e}function Bb(t){let e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $b(t,e){let n={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&c(e,["systemInstruction"],et(i));let o=a(t,["tools"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>VT(l))),c(e,["tools"],r)}let s=a(t,["generationConfig"]);return e!==void 0&&s!=null&&c(e,["generationConfig"],LR(s)),n}function Yb(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["contents"]);if(o!=null){let r=Vt(o);Array.isArray(r)&&(r=r.map(l=>Zl(l))),c(n,["contents"],r)}let s=a(e,["config"]);return s!=null&&Bb(s),n}function Jb(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["contents"]);if(o!=null){let r=Vt(o);Array.isArray(r)&&(r=r.map(l=>l)),c(n,["contents"],r)}let s=a(e,["config"]);return s!=null&&$b(s,n),n}function Kb(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["totalTokens"]);i!=null&&c(e,["totalTokens"],i);let o=a(t,["cachedContentTokenCount"]);return o!=null&&c(e,["cachedContentTokenCount"],o),e}function Xb(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["totalTokens"]);return i!=null&&c(e,["totalTokens"],i),e}function Qb(t,e){let n={},i=a(e,["model"]);return i!=null&&c(n,["_url","name"],W(t,i)),n}function Zb(t,e){let n={},i=a(e,["model"]);return i!=null&&c(n,["_url","name"],W(t,i)),n}function Wb(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function jb(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function eR(t,e){let n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);let o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);let s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);let r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&c(e,["parameters","aspectRatio"],r);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);let u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);let f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);let d=a(t,["personGeneration"]);e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d);let p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);let m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);let h=a(t,["language"]);e!==void 0&&h!=null&&c(e,["parameters","language"],h);let v=a(t,["outputMimeType"]);e!==void 0&&v!=null&&c(e,["parameters","outputOptions","mimeType"],v);let T=a(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&c(e,["parameters","outputOptions","compressionQuality"],T);let E=a(t,["addWatermark"]);e!==void 0&&E!=null&&c(e,["parameters","addWatermark"],E);let g=a(t,["labels"]);e!==void 0&&g!=null&&c(e,["labels"],g);let y=a(t,["editMode"]);e!==void 0&&y!=null&&c(e,["parameters","editMode"],y);let S=a(t,["baseSteps"]);return e!==void 0&&S!=null&&c(e,["parameters","editConfig","baseSteps"],S),n}function tR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>iN(u))),c(n,["instances[0]","referenceImages"],l)}let r=a(e,["config"]);return r!=null&&eR(r,n),n}function nR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Wl(s))),c(e,["generatedImages"],o)}return e}function iR(t,e){let n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);let o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["requests[]","title"],o);let s=a(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&c(e,["requests[]","outputDimensionality"],s),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function oR(t,e){let n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&c(e,["instances[]","task_type"],i);let o=a(t,["title"]);e!==void 0&&o!=null&&c(e,["instances[]","title"],o);let s=a(t,["outputDimensionality"]);e!==void 0&&s!=null&&c(e,["parameters","outputDimensionality"],s);let r=a(t,["mimeType"]);e!==void 0&&r!=null&&c(e,["instances[]","mimeType"],r);let l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&c(e,["parameters","autoTruncate"],l),n}function sR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["contents"]);if(o!=null){let l=Gp(t,o);Array.isArray(l)&&(l=l.map(u=>u)),c(n,["requests[]","content"],l)}let s=a(e,["config"]);s!=null&&iR(s,n);let r=a(e,["model"]);return r!==void 0&&c(n,["requests[]","model"],W(t,r)),n}function rR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["contents"]);if(o!=null){let r=Gp(t,o);Array.isArray(r)&&(r=r.map(l=>l)),c(n,["instances[]","content"],r)}let s=a(e,["config"]);return s!=null&&oR(s,n),n}function aR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["embeddings"],s)}let o=a(t,["metadata"]);return o!=null&&c(e,["metadata"],o),e}function lR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Fb(r))),c(e,["embeddings"],s)}let o=a(t,["metadata"]);return o!=null&&c(e,["metadata"],o),e}function uR(t){let e={},n=a(t,["endpoint"]);n!=null&&c(e,["name"],n);let i=a(t,["deployedModelId"]);return i!=null&&c(e,["deployedModelId"],i),e}function cR(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function fR(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function dR(t){let e={},n=a(t,["allowedFunctionNames"]);n!=null&&c(e,["allowedFunctionNames"],n);let i=a(t,["mode"]);if(i!=null&&c(e,["mode"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pR(t){let e={},n=a(t,["description"]);n!=null&&c(e,["description"],n);let i=a(t,["name"]);i!=null&&c(e,["name"],i);let o=a(t,["parameters"]);o!=null&&c(e,["parameters"],o);let s=a(t,["parametersJsonSchema"]);s!=null&&c(e,["parametersJsonSchema"],s);let r=a(t,["response"]);r!=null&&c(e,["response"],r);let l=a(t,["responseJsonSchema"]);if(l!=null&&c(e,["responseJsonSchema"],l),a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function mR(t,e,n){let i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],Zl(et(o)));let s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);let r=a(e,["topP"]);r!=null&&c(i,["topP"],r);let l=a(e,["topK"]);l!=null&&c(i,["topK"],l);let u=a(e,["candidateCount"]);u!=null&&c(i,["candidateCount"],u);let f=a(e,["maxOutputTokens"]);f!=null&&c(i,["maxOutputTokens"],f);let d=a(e,["stopSequences"]);d!=null&&c(i,["stopSequences"],d);let p=a(e,["responseLogprobs"]);p!=null&&c(i,["responseLogprobs"],p);let m=a(e,["logprobs"]);m!=null&&c(i,["logprobs"],m);let h=a(e,["presencePenalty"]);h!=null&&c(i,["presencePenalty"],h);let v=a(e,["frequencyPenalty"]);v!=null&&c(i,["frequencyPenalty"],v);let T=a(e,["seed"]);T!=null&&c(i,["seed"],T);let E=a(e,["responseMimeType"]);E!=null&&c(i,["responseMimeType"],E);let g=a(e,["responseSchema"]);g!=null&&c(i,["responseSchema"],qp(g));let y=a(e,["responseJsonSchema"]);if(y!=null&&c(i,["responseJsonSchema"],y),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let S=a(e,["safetySettings"]);if(n!==void 0&&S!=null){let se=S;Array.isArray(se)&&(se=se.map(Ye=>oN(Ye))),c(n,["safetySettings"],se)}let _=a(e,["tools"]);if(n!==void 0&&_!=null){let se=ls(_);Array.isArray(se)&&(se=se.map(Ye=>fN(as(Ye)))),c(n,["tools"],se)}let A=a(e,["toolConfig"]);if(n!==void 0&&A!=null&&c(n,["toolConfig"],cN(A)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let I=a(e,["cachedContent"]);n!==void 0&&I!=null&&c(n,["cachedContent"],Fn(t,I));let x=a(e,["responseModalities"]);x!=null&&c(i,["responseModalities"],x);let M=a(e,["mediaResolution"]);M!=null&&c(i,["mediaResolution"],M);let C=a(e,["speechConfig"]);if(C!=null&&c(i,["speechConfig"],Op(C)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let N=a(e,["thinkingConfig"]);N!=null&&c(i,["thinkingConfig"],N);let F=a(e,["imageConfig"]);F!=null&&c(i,["imageConfig"],FR(F));let me=a(e,["enableEnhancedCivicAnswers"]);if(me!=null&&c(i,["enableEnhancedCivicAnswers"],me),a(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function hR(t,e,n){let i={},o=a(e,["systemInstruction"]);n!==void 0&&o!=null&&c(n,["systemInstruction"],et(o));let s=a(e,["temperature"]);s!=null&&c(i,["temperature"],s);let r=a(e,["topP"]);r!=null&&c(i,["topP"],r);let l=a(e,["topK"]);l!=null&&c(i,["topK"],l);let u=a(e,["candidateCount"]);u!=null&&c(i,["candidateCount"],u);let f=a(e,["maxOutputTokens"]);f!=null&&c(i,["maxOutputTokens"],f);let d=a(e,["stopSequences"]);d!=null&&c(i,["stopSequences"],d);let p=a(e,["responseLogprobs"]);p!=null&&c(i,["responseLogprobs"],p);let m=a(e,["logprobs"]);m!=null&&c(i,["logprobs"],m);let h=a(e,["presencePenalty"]);h!=null&&c(i,["presencePenalty"],h);let v=a(e,["frequencyPenalty"]);v!=null&&c(i,["frequencyPenalty"],v);let T=a(e,["seed"]);T!=null&&c(i,["seed"],T);let E=a(e,["responseMimeType"]);E!=null&&c(i,["responseMimeType"],E);let g=a(e,["responseSchema"]);g!=null&&c(i,["responseSchema"],qp(g));let y=a(e,["responseJsonSchema"]);y!=null&&c(i,["responseJsonSchema"],y);let S=a(e,["routingConfig"]);S!=null&&c(i,["routingConfig"],S);let _=a(e,["modelSelectionConfig"]);_!=null&&c(i,["modelConfig"],_);let A=a(e,["safetySettings"]);if(n!==void 0&&A!=null){let He=A;Array.isArray(He)&&(He=He.map(on=>on)),c(n,["safetySettings"],He)}let I=a(e,["tools"]);if(n!==void 0&&I!=null){let He=ls(I);Array.isArray(He)&&(He=He.map(on=>VT(as(on)))),c(n,["tools"],He)}let x=a(e,["toolConfig"]);n!==void 0&&x!=null&&c(n,["toolConfig"],x);let M=a(e,["labels"]);n!==void 0&&M!=null&&c(n,["labels"],M);let C=a(e,["cachedContent"]);n!==void 0&&C!=null&&c(n,["cachedContent"],Fn(t,C));let N=a(e,["responseModalities"]);N!=null&&c(i,["responseModalities"],N);let F=a(e,["mediaResolution"]);F!=null&&c(i,["mediaResolution"],F);let me=a(e,["speechConfig"]);me!=null&&c(i,["speechConfig"],Op(me));let se=a(e,["audioTimestamp"]);se!=null&&c(i,["audioTimestamp"],se);let Ye=a(e,["thinkingConfig"]);Ye!=null&&c(i,["thinkingConfig"],Ye);let Mt=a(e,["imageConfig"]);if(Mt!=null&&c(i,["imageConfig"],zR(Mt)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let ue=a(e,["modelArmorConfig"]);return n!==void 0&&ue!=null&&c(n,["modelArmorConfig"],ue),i}function aT(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["contents"]);if(o!=null){let r=Vt(o);Array.isArray(r)&&(r=r.map(l=>Zl(l))),c(n,["contents"],r)}let s=a(e,["config"]);return s!=null&&c(n,["generationConfig"],mR(t,s,n)),n}function lT(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["contents"]);if(o!=null){let r=Vt(o);Array.isArray(r)&&(r=r.map(l=>l)),c(n,["contents"],r)}let s=a(e,["config"]);return s!=null&&c(n,["generationConfig"],hR(t,s,n)),n}function uT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>Hb(f))),c(e,["candidates"],u)}let o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);let s=a(t,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);let r=a(t,["responseId"]);r!=null&&c(e,["responseId"],r);let l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function cT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>d)),c(e,["candidates"],f)}let o=a(t,["createTime"]);o!=null&&c(e,["createTime"],o);let s=a(t,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);let r=a(t,["promptFeedback"]);r!=null&&c(e,["promptFeedback"],r);let l=a(t,["responseId"]);l!=null&&c(e,["responseId"],l);let u=a(t,["usageMetadata"]);return u!=null&&c(e,["usageMetadata"],u),e}function gR(t,e){let n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);let o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&c(e,["parameters","aspectRatio"],o);let s=a(t,["guidanceScale"]);if(e!==void 0&&s!=null&&c(e,["parameters","guidanceScale"],s),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let r=a(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&c(e,["parameters","safetySetting"],r);let l=a(t,["personGeneration"]);e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l);let u=a(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&c(e,["parameters","includeSafetyAttributes"],u);let f=a(t,["includeRaiReason"]);e!==void 0&&f!=null&&c(e,["parameters","includeRaiReason"],f);let d=a(t,["language"]);e!==void 0&&d!=null&&c(e,["parameters","language"],d);let p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);let m=a(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&c(e,["parameters","outputOptions","compressionQuality"],m),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let h=a(t,["imageSize"]);if(e!==void 0&&h!=null&&c(e,["parameters","sampleImageSize"],h),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function yR(t,e){let n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);let o=a(t,["negativePrompt"]);e!==void 0&&o!=null&&c(e,["parameters","negativePrompt"],o);let s=a(t,["numberOfImages"]);e!==void 0&&s!=null&&c(e,["parameters","sampleCount"],s);let r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&c(e,["parameters","aspectRatio"],r);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);let u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);let f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);let d=a(t,["personGeneration"]);e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d);let p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);let m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);let h=a(t,["language"]);e!==void 0&&h!=null&&c(e,["parameters","language"],h);let v=a(t,["outputMimeType"]);e!==void 0&&v!=null&&c(e,["parameters","outputOptions","mimeType"],v);let T=a(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&c(e,["parameters","outputOptions","compressionQuality"],T);let E=a(t,["addWatermark"]);e!==void 0&&E!=null&&c(e,["parameters","addWatermark"],E);let g=a(t,["labels"]);e!==void 0&&g!=null&&c(e,["labels"],g);let y=a(t,["imageSize"]);e!==void 0&&y!=null&&c(e,["parameters","sampleImageSize"],y);let S=a(t,["enhancePrompt"]);return e!==void 0&&S!=null&&c(e,["parameters","enhancePrompt"],S),n}function vR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["config"]);return s!=null&&gR(s,n),n}function SR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["config"]);return s!=null&&yR(s,n),n}function TR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>DR(r))),c(e,["generatedImages"],s)}let o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(e,["positivePromptSafetyAttributes"],FT(o)),e}function _R(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Wl(r))),c(e,["generatedImages"],s)}let o=a(t,["positivePromptSafetyAttributes"]);return o!=null&&c(e,["positivePromptSafetyAttributes"],zT(o)),e}function ER(t,e){let n={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=a(t,["durationSeconds"]);if(e!==void 0&&o!=null&&c(e,["parameters","durationSeconds"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);let r=a(t,["resolution"]);e!==void 0&&r!=null&&c(e,["parameters","resolution"],r);let l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&c(e,["parameters","negativePrompt"],u);let f=a(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&c(e,["parameters","enhancePrompt"],f),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let d=a(t,["lastFrame"]);e!==void 0&&d!=null&&c(e,["instances[0]","lastFrame"],jl(d));let p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>AN(h))),c(e,["instances[0]","referenceImages"],m)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function CR(t,e){let n={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);let o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);let s=a(t,["fps"]);e!==void 0&&s!=null&&c(e,["parameters","fps"],s);let r=a(t,["durationSeconds"]);e!==void 0&&r!=null&&c(e,["parameters","durationSeconds"],r);let l=a(t,["seed"]);e!==void 0&&l!=null&&c(e,["parameters","seed"],l);let u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&c(e,["parameters","aspectRatio"],u);let f=a(t,["resolution"]);e!==void 0&&f!=null&&c(e,["parameters","resolution"],f);let d=a(t,["personGeneration"]);e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d);let p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&c(e,["parameters","pubsubTopic"],p);let m=a(t,["negativePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","negativePrompt"],m);let h=a(t,["enhancePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","enhancePrompt"],h);let v=a(t,["generateAudio"]);e!==void 0&&v!=null&&c(e,["parameters","generateAudio"],v);let T=a(t,["lastFrame"]);e!==void 0&&T!=null&&c(e,["instances[0]","lastFrame"],jt(T));let E=a(t,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(_=>xN(_))),c(e,["instances[0]","referenceImages"],S)}let g=a(t,["mask"]);e!==void 0&&g!=null&&c(e,["instances[0]","mask"],CN(g));let y=a(t,["compressionQuality"]);return e!==void 0&&y!=null&&c(e,["parameters","compressionQuality"],y),n}function AR(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response","generateVideoResponse"]);return r!=null&&c(e,["response"],RR(r)),e}function xR(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],NR(r)),e}function wR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["image"]);s!=null&&c(n,["instances[0]","image"],jl(s));let r=a(e,["video"]);r!=null&&c(n,["instances[0]","video"],BT(r));let l=a(e,["source"]);l!=null&&IR(l,n);let u=a(e,["config"]);return u!=null&&ER(u,n),n}function bR(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["prompt"]);o!=null&&c(n,["instances[0]","prompt"],o);let s=a(e,["image"]);s!=null&&c(n,["instances[0]","image"],jt(s));let r=a(e,["video"]);r!=null&&c(n,["instances[0]","video"],$T(r));let l=a(e,["source"]);l!=null&&MR(l,n);let u=a(e,["config"]);return u!=null&&CR(u,n),n}function RR(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>UR(r))),c(e,["generatedVideos"],s)}let i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);let o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function NR(t){let e={},n=a(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>PR(r))),c(e,["generatedVideos"],s)}let i=a(t,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);let o=a(t,["raiMediaFilteredReasons"]);return o!=null&&c(e,["raiMediaFilteredReasons"],o),e}function IR(t,e){let n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);let o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],jl(o));let s=a(t,["video"]);return e!==void 0&&s!=null&&c(e,["instances[0]","video"],BT(s)),n}function MR(t,e){let n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);let o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],jt(o));let s=a(t,["video"]);return e!==void 0&&s!=null&&c(e,["instances[0]","video"],$T(s)),n}function DR(t){let e={},n=a(t,["_self"]);n!=null&&c(e,["image"],VR(n));let i=a(t,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);let o=a(t,["_self"]);return o!=null&&c(e,["safetyAttributes"],FT(o)),e}function Wl(t){let e={},n=a(t,["_self"]);n!=null&&c(e,["image"],OT(n));let i=a(t,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);let o=a(t,["_self"]);o!=null&&c(e,["safetyAttributes"],zT(o));let s=a(t,["prompt"]);return s!=null&&c(e,["enhancedPrompt"],s),e}function kR(t){let e={},n=a(t,["_self"]);n!=null&&c(e,["mask"],OT(n));let i=a(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["labels"],o)}return e}function UR(t){let e={},n=a(t,["video"]);return n!=null&&c(e,["video"],_N(n)),e}function PR(t){let e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],EN(n)),e}function LR(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);let i=a(t,["responseJsonSchema"]);i!=null&&c(e,["responseJsonSchema"],i);let o=a(t,["audioTimestamp"]);o!=null&&c(e,["audioTimestamp"],o);let s=a(t,["candidateCount"]);s!=null&&c(e,["candidateCount"],s);let r=a(t,["enableAffectiveDialog"]);r!=null&&c(e,["enableAffectiveDialog"],r);let l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);let u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);let f=a(t,["maxOutputTokens"]);f!=null&&c(e,["maxOutputTokens"],f);let d=a(t,["mediaResolution"]);d!=null&&c(e,["mediaResolution"],d);let p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);let m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);let h=a(t,["responseMimeType"]);h!=null&&c(e,["responseMimeType"],h);let v=a(t,["responseModalities"]);v!=null&&c(e,["responseModalities"],v);let T=a(t,["responseSchema"]);T!=null&&c(e,["responseSchema"],T);let E=a(t,["routingConfig"]);E!=null&&c(e,["routingConfig"],E);let g=a(t,["seed"]);g!=null&&c(e,["seed"],g);let y=a(t,["speechConfig"]);y!=null&&c(e,["speechConfig"],y);let S=a(t,["stopSequences"]);S!=null&&c(e,["stopSequences"],S);let _=a(t,["temperature"]);_!=null&&c(e,["temperature"],_);let A=a(t,["thinkingConfig"]);A!=null&&c(e,["thinkingConfig"],A);let I=a(t,["topK"]);I!=null&&c(e,["topK"],I);let x=a(t,["topP"]);if(x!=null&&c(e,["topP"],x),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function HR(t,e){let n={},i=a(e,["model"]);return i!=null&&c(n,["_url","name"],W(t,i)),n}function GR(t,e){let n={},i=a(e,["model"]);return i!=null&&c(n,["_url","name"],W(t,i)),n}function qR(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function OR(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function FR(t){let e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);let i=a(t,["imageSize"]);if(i!=null&&c(e,["imageSize"],i),a(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function zR(t){let e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);let i=a(t,["imageSize"]);i!=null&&c(e,["imageSize"],i);let o=a(t,["personGeneration"]);o!=null&&c(e,["personGeneration"],o);let s=a(t,["outputMimeType"]);s!=null&&c(e,["imageOutputOptions","mimeType"],s);let r=a(t,["outputCompressionQuality"]);return r!=null&&c(e,["imageOutputOptions","compressionQuality"],r),e}function VR(t){let e={},n=a(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],Ei(n));let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function OT(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);let i=a(t,["bytesBase64Encoded"]);i!=null&&c(e,["imageBytes"],Ei(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function jl(t){let e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=a(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],Ei(n));let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function jt(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);let i=a(t,["imageBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Ei(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function BR(t,e,n){let i={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);let s=a(e,["pageToken"]);n!==void 0&&s!=null&&c(n,["_query","pageToken"],s);let r=a(e,["filter"]);n!==void 0&&r!=null&&c(n,["_query","filter"],r);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],kT(t,l)),i}function $R(t,e,n){let i={},o=a(e,["pageSize"]);n!==void 0&&o!=null&&c(n,["_query","pageSize"],o);let s=a(e,["pageToken"]);n!==void 0&&s!=null&&c(n,["_query","pageToken"],s);let r=a(e,["filter"]);n!==void 0&&r!=null&&c(n,["_query","filter"],r);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],kT(t,l)),i}function YR(t,e){let n={},i=a(e,["config"]);return i!=null&&BR(t,i,n),n}function JR(t,e){let n={},i=a(e,["config"]);return i!=null&&$R(t,i,n),n}function KR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["_self"]);if(o!=null){let s=UT(o);Array.isArray(s)&&(s=s.map(r=>dp(r))),c(e,["models"],s)}return e}function XR(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["_self"]);if(o!=null){let s=UT(o);Array.isArray(s)&&(s=s.map(r=>pp(r))),c(e,["models"],s)}return e}function QR(t){let e={},n=a(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);let i=a(t,["segmentationClasses"]);i!=null&&c(e,["maskClasses"],i);let o=a(t,["maskDilation"]);return o!=null&&c(e,["dilation"],o),e}function dp(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["displayName"]);i!=null&&c(e,["displayName"],i);let o=a(t,["description"]);o!=null&&c(e,["description"],o);let s=a(t,["version"]);s!=null&&c(e,["version"],s);let r=a(t,["_self"]);r!=null&&c(e,["tunedModelInfo"],dN(r));let l=a(t,["inputTokenLimit"]);l!=null&&c(e,["inputTokenLimit"],l);let u=a(t,["outputTokenLimit"]);u!=null&&c(e,["outputTokenLimit"],u);let f=a(t,["supportedGenerationMethods"]);f!=null&&c(e,["supportedActions"],f);let d=a(t,["temperature"]);d!=null&&c(e,["temperature"],d);let p=a(t,["maxTemperature"]);p!=null&&c(e,["maxTemperature"],p);let m=a(t,["topP"]);m!=null&&c(e,["topP"],m);let h=a(t,["topK"]);h!=null&&c(e,["topK"],h);let v=a(t,["thinking"]);return v!=null&&c(e,["thinking"],v),e}function pp(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["displayName"]);i!=null&&c(e,["displayName"],i);let o=a(t,["description"]);o!=null&&c(e,["description"],o);let s=a(t,["versionId"]);s!=null&&c(e,["version"],s);let r=a(t,["deployedModels"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>uR(m))),c(e,["endpoints"],p)}let l=a(t,["labels"]);l!=null&&c(e,["labels"],l);let u=a(t,["_self"]);u!=null&&c(e,["tunedModelInfo"],pN(u));let f=a(t,["defaultCheckpointId"]);f!=null&&c(e,["defaultCheckpointId"],f);let d=a(t,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>m)),c(e,["checkpoints"],p)}return e}function ZR(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],cR(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],fR(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],Lb(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function WR(t){let e={},n=a(t,["productImage"]);return n!=null&&c(e,["image"],jt(n)),e}function jR(t,e){let n={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);let o=a(t,["baseSteps"]);e!==void 0&&o!=null&&c(e,["parameters","baseSteps"],o);let s=a(t,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);let r=a(t,["seed"]);e!==void 0&&r!=null&&c(e,["parameters","seed"],r);let l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&c(e,["parameters","safetySetting"],l);let u=a(t,["personGeneration"]);e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u);let f=a(t,["addWatermark"]);e!==void 0&&f!=null&&c(e,["parameters","addWatermark"],f);let d=a(t,["outputMimeType"]);e!==void 0&&d!=null&&c(e,["parameters","outputOptions","mimeType"],d);let p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","compressionQuality"],p);let m=a(t,["enhancePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","enhancePrompt"],m);let h=a(t,["labels"]);return e!==void 0&&h!=null&&c(e,["labels"],h),n}function eN(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["source"]);o!=null&&nN(o,n);let s=a(e,["config"]);return s!=null&&jR(s,n),n}function tN(t){let e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Wl(o))),c(e,["generatedImages"],i)}return e}function nN(t,e){let n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);let o=a(t,["personImage"]);e!==void 0&&o!=null&&c(e,["instances[0]","personImage","image"],jt(o));let s=a(t,["productImages"]);if(e!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>WR(l))),c(e,["instances[0]","productImages"],r)}return n}function iN(t){let e={},n=a(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],jt(n));let i=a(t,["referenceId"]);i!=null&&c(e,["referenceId"],i);let o=a(t,["referenceType"]);o!=null&&c(e,["referenceType"],o);let s=a(t,["maskImageConfig"]);s!=null&&c(e,["maskImageConfig"],QR(s));let r=a(t,["controlImageConfig"]);r!=null&&c(e,["controlImageConfig"],Vb(r));let l=a(t,["styleImageConfig"]);l!=null&&c(e,["styleImageConfig"],l);let u=a(t,["subjectImageConfig"]);return u!=null&&c(e,["subjectImageConfig"],u),e}function FT(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);let i=a(t,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);let o=a(t,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function zT(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);let i=a(t,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);let o=a(t,["contentType"]);return o!=null&&c(e,["contentType"],o),e}function oN(t){let e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=a(t,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function sN(t){let e={},n=a(t,["image"]);return n!=null&&c(e,["image"],jt(n)),e}function rN(t,e){let n={},i=a(t,["mode"]);e!==void 0&&i!=null&&c(e,["parameters","mode"],i);let o=a(t,["maxPredictions"]);e!==void 0&&o!=null&&c(e,["parameters","maxPredictions"],o);let s=a(t,["confidenceThreshold"]);e!==void 0&&s!=null&&c(e,["parameters","confidenceThreshold"],s);let r=a(t,["maskDilation"]);e!==void 0&&r!=null&&c(e,["parameters","maskDilation"],r);let l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","binaryColorThreshold"],l);let u=a(t,["labels"]);return e!==void 0&&u!=null&&c(e,["labels"],u),n}function aN(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["source"]);o!=null&&uN(o,n);let s=a(e,["config"]);return s!=null&&rN(s,n),n}function lN(t){let e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>kR(o))),c(e,["generatedMasks"],i)}return e}function uN(t,e){let n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);let o=a(t,["image"]);e!==void 0&&o!=null&&c(e,["instances[0]","image"],jt(o));let s=a(t,["scribbleImage"]);return e!==void 0&&s!=null&&c(e,["instances[0]","scribble"],sN(s)),n}function cN(t){let e={},n=a(t,["retrievalConfig"]);n!=null&&c(e,["retrievalConfig"],n);let i=a(t,["functionCallingConfig"]);return i!=null&&c(e,["functionCallingConfig"],dR(i)),e}function fN(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],qR(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],OR(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function VT(t){let e={},n=a(t,["retrieval"]);n!=null&&c(e,["retrieval"],n);let i=a(t,["computerUse"]);if(i!=null&&c(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=a(t,["codeExecution"]);o!=null&&c(e,["codeExecution"],o);let s=a(t,["enterpriseWebSearch"]);s!=null&&c(e,["enterpriseWebSearch"],s);let r=a(t,["functionDeclarations"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>pR(m))),c(e,["functionDeclarations"],p)}let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],l);let u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);let f=a(t,["googleSearchRetrieval"]);f!=null&&c(e,["googleSearchRetrieval"],f);let d=a(t,["urlContext"]);return d!=null&&c(e,["urlContext"],d),e}function dN(t){let e={},n=a(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);let i=a(t,["createTime"]);i!=null&&c(e,["createTime"],i);let o=a(t,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function pN(t){let e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);let i=a(t,["createTime"]);i!=null&&c(e,["createTime"],i);let o=a(t,["updateTime"]);return o!=null&&c(e,["updateTime"],o),e}function mN(t,e){let n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);let o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);let s=a(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&c(e,["defaultCheckpointId"],s),n}function hN(t,e){let n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);let o=a(t,["description"]);e!==void 0&&o!=null&&c(e,["description"],o);let s=a(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&c(e,["defaultCheckpointId"],s),n}function gN(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","name"],W(t,i));let o=a(e,["config"]);return o!=null&&mN(o,n),n}function yN(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["config"]);return o!=null&&hN(o,n),n}function vN(t,e){let n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);let o=a(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&c(e,["parameters","safetySetting"],o);let s=a(t,["personGeneration"]);e!==void 0&&s!=null&&c(e,["parameters","personGeneration"],s);let r=a(t,["includeRaiReason"]);e!==void 0&&r!=null&&c(e,["parameters","includeRaiReason"],r);let l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);let u=a(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&c(e,["parameters","outputOptions","compressionQuality"],u);let f=a(t,["enhanceInputImage"]);e!==void 0&&f!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],f);let d=a(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],d);let p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);let m=a(t,["numberOfImages"]);e!==void 0&&m!=null&&c(e,["parameters","sampleCount"],m);let h=a(t,["mode"]);return e!==void 0&&h!=null&&c(e,["parameters","mode"],h),n}function SN(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["_url","model"],W(t,i));let o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],jt(o));let s=a(e,["upscaleFactor"]);s!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],s);let r=a(e,["config"]);return r!=null&&vN(r,n),n}function TN(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Wl(s))),c(e,["generatedImages"],o)}return e}function _N(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);let i=a(t,["encodedVideo"]);i!=null&&c(e,["videoBytes"],Ei(i));let o=a(t,["encoding"]);return o!=null&&c(e,["mimeType"],o),e}function EN(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);let i=a(t,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],Ei(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function CN(t){let e={},n=a(t,["image"]);n!=null&&c(e,["_self"],jt(n));let i=a(t,["maskMode"]);return i!=null&&c(e,["maskMode"],i),e}function AN(t){let e={},n=a(t,["image"]);n!=null&&c(e,["image"],jl(n));let i=a(t,["referenceType"]);return i!=null&&c(e,["referenceType"],i),e}function xN(t){let e={},n=a(t,["image"]);n!=null&&c(e,["image"],jt(n));let i=a(t,["referenceType"]);return i!=null&&c(e,["referenceType"],i),e}function BT(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);let i=a(t,["videoBytes"]);i!=null&&c(e,["encodedVideo"],Ei(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["encoding"],o),e}function $T(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["gcsUri"],n);let i=a(t,["videoBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Ei(i));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function wN(t,e){let n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&c(e,["displayName"],i),n}function bN(t){let e={},n=a(t,["config"]);return n!=null&&wN(n,e),e}function RN(t,e){let n={},i=a(t,["force"]);return e!==void 0&&i!=null&&c(e,["_query","force"],i),n}function NN(t){let e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);let i=a(t,["config"]);return i!=null&&RN(i,e),e}function IN(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function MN(t,e){let n={},i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["customMetadata"],s)}let o=a(t,["chunkingConfig"]);return e!==void 0&&o!=null&&c(e,["chunkingConfig"],o),n}function DN(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let i=a(t,["metadata"]);i!=null&&c(e,["metadata"],i);let o=a(t,["done"]);o!=null&&c(e,["done"],o);let s=a(t,["error"]);s!=null&&c(e,["error"],s);let r=a(t,["response"]);return r!=null&&c(e,["response"],UN(r)),e}function kN(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);let i=a(t,["fileName"]);i!=null&&c(e,["fileName"],i);let o=a(t,["config"]);return o!=null&&MN(o,e),e}function UN(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["parent"]);i!=null&&c(e,["parent"],i);let o=a(t,["documentName"]);return o!=null&&c(e,["documentName"],o),e}function PN(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function LN(t){let e={},n=a(t,["config"]);return n!=null&&PN(n,e),e}function HN(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["fileSearchStores"],s)}return e}function YT(t,e){let n={},i=a(t,["mimeType"]);e!==void 0&&i!=null&&c(e,["mimeType"],i);let o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);let s=a(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),c(e,["customMetadata"],l)}let r=a(t,["chunkingConfig"]);return e!==void 0&&r!=null&&c(e,["chunkingConfig"],r),n}function GN(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);let i=a(t,["config"]);return i!=null&&YT(i,e),e}function qN(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}var ON="Content-Type",FN="X-Server-Timeout",zN="User-Agent",mp="x-goog-api-client",VN="1.38.0",BN=`google-genai-sdk/${VN}`,$N="v1beta1",YN="v1beta",hp=class{constructor(e){var n,i,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let l=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!l?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:$N}else{if(!this.clientOptions.apiKey)throw new Zi({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:YN,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){let o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===$d.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(let[r,l]of Object.entries(e.queryParams))o.searchParams.append(r,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,n){let i=JSON.parse(JSON.stringify(e));for(let[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e,n),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){let s=new AbortController,r=s.signal;if(n.timeout&&n?.timeout>0){let l=setTimeout(()=>s.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&JN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await fT(o),new wr(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await fT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Xt(this,arguments,function*(){var i;let o=(i=e?.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let r="",l="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:f,value:d}=yield q(o.read());if(f){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=s.decode(d,{stream:!0});try{let v=JSON.parse(p);if("error"in v){let T=JSON.parse(JSON.stringify(v.error)),E=T.status,g=T.code,y=`got status: ${E}. ${JSON.stringify(v)}`;if(g>=400&&g<600)throw new Zi({message:y,status:g})}}catch(v){if(v.name==="ApiError")throw v}r+=p;let m=-1,h=0;for(;;){m=-1,h=0;for(let E of u){let g=r.indexOf(E);g!==-1&&(m===-1||g<m)&&(m=g,h=E.length)}if(m===-1)break;let v=r.substring(0,m);r=r.substring(m+h);let T=v.trim();if(T.startsWith(l)){let E=T.substring(l.length).trim();try{let g=new Response(E,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield q(new wr(g))}catch(g){throw new Error(`exception parsing stream chunk ${E}. ${g}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},n=BN+" "+this.clientOptions.userAgentExtra;return e[zN]=n,e[mp]=n,e[ON]="application/json",e}async getHeadersInternal(e,n){let i=new Headers;if(e&&e.headers){for(let[o,s]of Object.entries(e.headers))i.append(o,s);e.timeout&&e.timeout>0&&i.append(FN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;let o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let s=this.clientOptions.uploader,r=await s.stat(e);o.sizeBytes=String(r.size);let l=(i=n?.mimeType)!==null&&i!==void 0?i:r.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=l;let u={file:o},f=this.getFileName(e),d=D("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,f,u,n?.httpOptions);return s.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,i){var o;let s=this.clientOptions.uploader,r=await s.stat(n),l=String(r.size),u=(o=i?.mimeType)!==null&&o!==void 0?o:r.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let f=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),p={};i!=null&&YT(i,p);let m=await this.fetchUploadUrl(f,l,u,d,p,i?.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,s,r){var l;let u={};r?u=r:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};let f=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:u});if(!f||!f?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let d=(l=f?.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}};async function fT(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};let o=JSON.stringify(i);throw n>=400&&n<600?new Zi({message:o,status:n}):new Error(o)}}function JN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,r){let l=Object.assign({},s);for(let u in r)if(Object.prototype.hasOwnProperty.call(r,u)){let f=r[u],d=l[u];f&&typeof f=="object"&&!Array.isArray(f)&&d&&typeof d=="object"&&!Array.isArray(d)?l[u]=i(d,f):(d&&f&&typeof d!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof d}, New type: ${typeof f}. Overwriting.`),l[u]=f)}return l}let o=i(n,e);t.body=JSON.stringify(o)}var KN="mcp_used/unknown",XN=!1;function JT(t){for(let e of t)if(QN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return XN}function KT(t){var e;let n=(e=t[mp])!==null&&e!==void 0?e:"";t[mp]=(n+` ${KN}`).trimStart()}function QN(t){return t!==null&&typeof t=="object"&&t instanceof Nr}function ZN(t){return Xt(this,arguments,function*(n,i=100){let o,s=0;for(;s<i;){let r=yield q(n.listTools({cursor:o}));for(let l of r.tools)yield yield q(l),s++;if(!r.nextCursor)break;o=r.nextCursor}})}var Nr=class{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Nr(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;let s={},r=[];for(let d of this.mcpClients)try{for(var l=!0,u=(n=void 0,Qt(ZN(d))),f;f=await u.next(),e=f.done,!e;l=!0){o=f.value,l=!1;let p=o;r.push(p);let m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(p){n={error:p}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Ux(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let i of e)if(i.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[i.name],s;this.config.timeout&&(s={timeout:this.config.timeout});let r=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}};async function WN(t,e,n){let i=new op,o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}var gp=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),r=e1(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${l}`,f=()=>{},d=new Promise(S=>{f=S}),p=e.callbacks,m=function(){f({})},h=this.apiClient,v={onopen:m,onmessage:S=>{WN(h,p.onmessage,S)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(S){},onclose:(i=p?.onclose)!==null&&i!==void 0?i:function(S){}},T=this.webSocketFactory.create(u,jN(r),v);T.connect(),await d;let y={setup:{model:W(this.apiClient,e.model)}};return T.send(JSON.stringify(y)),new yp(T,this.apiClient)}},yp=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=wb(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=xb(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(jo.PLAY)}pause(){this.sendPlaybackControl(jo.PAUSE)}stop(){this.sendPlaybackControl(jo.STOP)}resetContext(){this.sendPlaybackControl(jo.RESET_CONTEXT)}close(){this.conn.close()}};function jN(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function e1(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var t1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function n1(t,e,n){let i=new ip,o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;let s=JSON.parse(o);if(t.isVertexAI()){let r=Nb(s);Object.assign(i,r)}else Object.assign(i,s);e(i)}var vp=class{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new gp(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,s,r,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),d,p=this.apiClient.getHeaders();e.config&&e.config.tools&&JT(e.config.tools)&&KT(p);let m=s1(p);if(this.apiClient.isVertexAI()){let C=this.apiClient.getProject(),N=this.apiClient.getLocation(),F=this.apiClient.getApiKey(),me=!!C&&!!N||!!F;this.apiClient.getCustomBaseUrl()&&!me?d=u:(d=`${u}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d))}else{let C=this.apiClient.getApiKey(),N="BidiGenerateContent",F="key";C?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",F="access_token"),d=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.${N}?${F}=${C}`}let h=()=>{},v=new Promise(C=>{h=C}),T=e.callbacks,E=function(){var C;(C=T?.onopen)===null||C===void 0||C.call(T),h({})},g=this.apiClient,y={onopen:E,onmessage:C=>{n1(g,T.onmessage,C)},onerror:(n=T?.onerror)!==null&&n!==void 0?n:function(C){},onclose:(i=T?.onclose)!==null&&i!==void 0?i:function(C){}},S=this.webSocketFactory.create(d,o1(m),y);S.connect(),await v;let _=W(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){let C=this.apiClient.getProject(),N=this.apiClient.getLocation();C&&N&&(_=`projects/${C}/locations/${N}/`+_)}let A={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ns.AUDIO]}:e.config.responseModalities=[ns.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let I=(l=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&l!==void 0?l:[],x=[];for(let C of I)if(this.isCallableTool(C)){let N=C;x.push(await N.tool())}else x.push(C);x.length>0&&(e.config.tools=x);let M={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?A=Ab(this.apiClient,M):A=Cb(this.apiClient,M),delete A.config,S.send(JSON.stringify(A)),new Sp(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},i1={turnComplete:!0},Sp=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Vt(n.turns),e.isVertexAI()||(i=i.map(o=>Zl(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(t1)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},i1),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Rb(e)}:n={realtimeInput:bb(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function o1(t){let e={};return t.forEach((n,i)=>{e[i]=n}),e}function s1(t){let e=new Headers;for(let[n,i]of Object.entries(t))e.append(n,i);return e}var dT=10;function pT(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(let r of(n=t?.tools)!==null&&n!==void 0?n:[])if(ts(r)){o=!0;break}if(!o)return!0;let s=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function ts(t){return"callTool"in t&&typeof t.callTool=="function"}function r1(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>ts(o)))!==null&&i!==void 0?i:!1}function mT(t){var e;let n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(ts(i))return;let s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function hT(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var Tp=class extends Zt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,s,r,l;let u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!r1(n)||pT(n.config))return await this.generateContentInternal(u);let f=mT(n);if(f.length>0){let T=f.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let d,p,m=Vt(u.contents),h=(s=(o=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:dT,v=0;for(;v<h&&(d=await this.generateContentInternal(u),!(!d.functionCalls||d.functionCalls.length===0));){let T=d.candidates[0].content,E=[];for(let g of(l=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&l!==void 0?l:[])if(ts(g)){let S=await g.callTool(d.functionCalls);E.push(...S)}v++,p={role:"user",parts:E},u.contents=Vt(u.contents),u.contents.push(T),u.contents.push(p),hT(u.config)&&(m.push(T),m.push(p))}return hT(u.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var i,o,s,r,l;if(this.maybeMoveToResponseJsonSchem(n),pT(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let u=mT(n);if(u.length>0){let p=u.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let f=(s=(o=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,d=(l=(r=n?.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(f&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s,r=[];if(i?.generatedImages)for(let u of i.generatedImages)u&&u?.safetyAttributes&&((o=u?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=u?.safetyAttributes:r.push(u);let l;return s?l={generatedImages:r,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:l={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},l}),this.list=async n=>{var i;let r={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new On(qn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(r),r)},this.editImage=async n=>{let i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));let o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,r,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(((i=n.video)===null||i===void 0?void 0:i.uri)&&((o=n.video)===null||o===void 0?void 0:o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:((r=(s=n.source)===null||s===void 0?void 0:s.video)===null||r===void 0?void 0:r.uri)&&((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0?void 0:u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;let s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;let r=await Promise.all(s.map(async u=>ts(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(l.config.tools=r,e.config&&e.config.tools&&JT(e.config.tools)){let u=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{},f=Object.assign({},u);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),KT(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var n,i,o;let s=new Map;for(let r of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ts(r)){let l=r,u=await l.tool();for(let f of(o=u.functionDeclarations)!==null&&o!==void 0?o:[]){if(!f.name)throw new Error("Function declaration name is required.");if(s.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);s.set(f.name,l)}}return s}async processAfcStream(e){var n,i,o;let s=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:dT,r=!1,l=0,u=await this.initAfcToolsMap(e);return function(f,d,p){return Xt(this,arguments,function*(){for(var m,h,v,T,E,g;l<s;){r&&(l++,r=!1);let A=yield q(f.processParamsMaybeAddMcpUsage(p)),I=yield q(f.generateContentStreamInternal(A)),x=[],M=[];try{for(var y=!0,S=(h=void 0,Qt(I)),_;_=yield q(S.next()),m=_.done,!m;y=!0){T=_.value,y=!1;let C=T;if(yield yield q(C),C.candidates&&((E=C.candidates[0])===null||E===void 0?void 0:E.content)){M.push(C.candidates[0].content);for(let N of(g=C.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(l<s&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(N.functionCall.name)){let F=yield q(d.get(N.functionCall.name).callTool([N.functionCall]));x.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(C){h={error:C}}finally{try{!y&&!m&&(v=S.return)&&(yield q(v.call(S)))}finally{if(h)throw h.error}}if(x.length>0){r=!0;let C=new Qi;C.candidates=[{content:{role:"user",parts:x}}],yield yield q(C);let N=[];N.push(...M),N.push({role:"user",parts:x});let F=Vt(p.contents).concat(N);p.contents=F}else break}})}(this,u,e)}async generateContentInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=lT(this.apiClient,e);return l=D("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=cT(d),m=new Qi;return Object.assign(m,p),m})}else{let f=aT(this.apiClient,e);return l=D("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=uT(d),m=new Qi;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=lT(this.apiClient,e);return l=D("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(p){return Xt(this,arguments,function*(){var m,h,v,T;try{for(var E=!0,g=Qt(p),y;y=yield q(g.next()),m=y.done,!m;E=!0){T=y.value,E=!1;let S=T,_=cT(yield q(S.json()));_.sdkHttpResponse={headers:S.headers};let A=new Qi;Object.assign(A,_),yield yield q(A)}}catch(S){h={error:S}}finally{try{!E&&!m&&(v=g.return)&&(yield q(v.call(g)))}finally{if(h)throw h.error}}})})}else{let f=aT(this.apiClient,e);return l=D("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),r.then(function(p){return Xt(this,arguments,function*(){var m,h,v,T;try{for(var E=!0,g=Qt(p),y;y=yield q(g.next()),m=y.done,!m;E=!0){T=y.value,E=!1;let S=T,_=uT(yield q(S.json()));_.sdkHttpResponse={headers:S.headers};let A=new Qi;Object.assign(A,_),yield yield q(A)}}catch(S){h={error:S}}finally{try{!E&&!m&&(v=g.return)&&(yield q(v.call(g)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=rR(this.apiClient,e);return l=D("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=lR(d),m=new xl;return Object.assign(m,p),m})}else{let f=sR(this.apiClient,e);return l=D("{model}:batchEmbedContents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=aR(d),m=new xl;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=SR(this.apiClient,e);return l=D("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=_R(d),m=new wl;return Object.assign(m,p),m})}else{let f=vR(this.apiClient,e);return l=D("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=TR(d),m=new wl;return Object.assign(m,p),m})}}async editImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=tR(this.apiClient,e);return s=D("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=nR(u),d=new Yd;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=SN(this.apiClient,e);return s=D("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=TN(u),d=new Jd;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=eN(this.apiClient,e);return s=D("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=tN(u),d=new Kd;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=aN(this.apiClient,e);return s=D("{model}:predict",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=lN(u),d=new Xd;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=GR(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>pp(d))}else{let f=HR(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>dp(d))}}async listInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=JR(this.apiClient,e);return l=D("{models_url}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=XR(d),m=new bl;return Object.assign(m,p),m})}else{let f=YR(this.apiClient,e);return l=D("{models_url}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=KR(d),m=new bl;return Object.assign(m,p),m})}}async update(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=yN(this.apiClient,e);return l=D("{model}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>pp(d))}else{let f=gN(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>dp(d))}}async delete(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Zb(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=jb(d),m=new Rl;return Object.assign(m,p),m})}else{let f=Qb(this.apiClient,e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Wb(d),m=new Rl;return Object.assign(m,p),m})}}async countTokens(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=Jb(this.apiClient,e);return l=D("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Xb(d),m=new Nl;return Object.assign(m,p),m})}else{let f=Yb(this.apiClient,e);return l=D("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=Kb(d),m=new Nl;return Object.assign(m,p),m})}}async computeTokens(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=qb(this.apiClient,e);return s=D("{model}:computeTokens",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>{let f=Ob(u),d=new Qd;return Object.assign(d,f),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=bR(this.apiClient,e);return l=D("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>{let p=xR(d),m=new is;return Object.assign(m,p),m})}else{let f=wR(this.apiClient,e);return l=D("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r.then(d=>{let p=AR(d),m=new is;return Object.assign(m,p),m})}}};var _p=class extends Zt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],s;i&&"httpOptions"in i&&(s=i.httpOptions);let r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){let n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],s;i&&"httpOptions"in i&&(s=i.httpOptions);let r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=_x(e);return l=D("{operationName}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r}else{let f=Tx(e);return l=D("{operationName}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),r}}async fetchPredictVideosOperationInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=px(e);return s=D("{resourceName}:fetchPredictOperation",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function a1(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function l1(t){let e={},n=a(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>y1(s))),c(e,["parts"],o)}let i=a(t,["role"]);return i!=null&&c(e,["role"],i),e}function u1(t,e,n){let i={},o=a(e,["expireTime"]);n!==void 0&&o!=null&&c(n,["expireTime"],o);let s=a(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&c(n,["newSessionExpireTime"],s);let r=a(e,["uses"]);n!==void 0&&r!=null&&c(n,["uses"],r);let l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&c(n,["bidiGenerateContentSetup"],g1(t,l));let u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&c(n,["fieldMask"],u),i}function c1(t,e){let n={},i=a(e,["config"]);return i!=null&&c(n,["config"],u1(t,i,n)),n}function f1(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function d1(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let i=a(t,["args"]);i!=null&&c(e,["args"],i);let o=a(t,["name"]);if(o!=null&&c(e,["name"],o),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function p1(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function m1(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function h1(t,e){let n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);let o=a(t,["responseModalities"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","responseModalities"],o);let s=a(t,["temperature"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","temperature"],s);let r=a(t,["topP"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","topP"],r);let l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);let u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);let f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);let d=a(t,["seed"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","seed"],d);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],Fp(p));let m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);let h=a(t,["enableAffectiveDialog"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],h);let v=a(t,["systemInstruction"]);e!==void 0&&v!=null&&c(e,["setup","systemInstruction"],l1(et(v)));let T=a(t,["tools"]);if(e!==void 0&&T!=null){let I=ls(T);Array.isArray(I)&&(I=I.map(x=>S1(as(x)))),c(e,["setup","tools"],I)}let E=a(t,["sessionResumption"]);e!==void 0&&E!=null&&c(e,["setup","sessionResumption"],v1(E));let g=a(t,["inputAudioTranscription"]);e!==void 0&&g!=null&&c(e,["setup","inputAudioTranscription"],g);let y=a(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&c(e,["setup","outputAudioTranscription"],y);let S=a(t,["realtimeInputConfig"]);e!==void 0&&S!=null&&c(e,["setup","realtimeInputConfig"],S);let _=a(t,["contextWindowCompression"]);e!==void 0&&_!=null&&c(e,["setup","contextWindowCompression"],_);let A=a(t,["proactivity"]);if(e!==void 0&&A!=null&&c(e,["setup","proactivity"],A),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function g1(t,e){let n={},i=a(e,["model"]);i!=null&&c(n,["setup","model"],W(t,i));let o=a(e,["config"]);return o!=null&&c(n,["config"],h1(o,n)),n}function y1(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let i=a(t,["codeExecutionResult"]);i!=null&&c(e,["codeExecutionResult"],i);let o=a(t,["executableCode"]);o!=null&&c(e,["executableCode"],o);let s=a(t,["fileData"]);s!=null&&c(e,["fileData"],f1(s));let r=a(t,["functionCall"]);r!=null&&c(e,["functionCall"],d1(r));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],a1(u));let f=a(t,["text"]);f!=null&&c(e,["text"],f);let d=a(t,["thought"]);d!=null&&c(e,["thought"],d);let p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);let m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function v1(t){let e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function S1(t){let e={};if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=a(t,["computerUse"]);n!=null&&c(e,["computerUse"],n);let i=a(t,["fileSearch"]);i!=null&&c(e,["fileSearch"],i);let o=a(t,["codeExecution"]);if(o!=null&&c(e,["codeExecution"],o),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=a(t,["functionDeclarations"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>p)),c(e,["functionDeclarations"],d)}let r=a(t,["googleMaps"]);r!=null&&c(e,["googleMaps"],p1(r));let l=a(t,["googleSearch"]);l!=null&&c(e,["googleSearch"],m1(l));let u=a(t,["googleSearchRetrieval"]);u!=null&&c(e,["googleSearchRetrieval"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function T1(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let o=Object.keys(i).map(s=>`${n}.${s}`);e.push(...o)}else e.push(n)}return e.join(",")}function _1(t,e){let n=null,i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;let o=t.fieldMask;if(n){let s=T1(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],l=[];o.length>0&&(l=o.map(f=>r.includes(f)?`generationConfig.${f}`:f));let u=[];s&&u.push(s),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}var Ep=class extends Zt{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let l=c1(this.apiClient,e);s=D("auth_tokens",l._url),r=l._query,delete l.config,delete l._url,delete l._query;let u=_1(l,e.config);return o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}}};function E1(t,e){let n={},i=a(t,["force"]);return e!==void 0&&i!=null&&c(e,["_query","force"],i),n}function C1(t){let e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);let i=a(t,["config"]);return i!=null&&E1(i,e),e}function A1(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function x1(t,e){let n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let o=a(t,["pageToken"]);return e!==void 0&&o!=null&&c(e,["_query","pageToken"],o),n}function w1(t){let e={},n=a(t,["parent"]);n!=null&&c(e,["_url","parent"],n);let i=a(t,["config"]);return i!=null&&x1(i,e),e}function b1(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let i=a(t,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);let o=a(t,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),c(e,["documents"],s)}return e}var Cp=class extends Zt{constructor(e){super(),this.apiClient=e,this.list=async n=>new On(qn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=A1(e);return s=D("{name}",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let r=C1(e);o=D("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=w1(e);return s=D("{parent}/documents",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=b1(u),d=new Zd;return Object.assign(d,f),d})}}};var Ap=class extends Zt{constructor(e,n=new Cp(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new On(qn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=bN(e);return s=D("fileSearchStores",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=IN(e);return s=D("{name}",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let r=NN(e);o=D("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=LN(e);return s=D("fileSearchStores",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=HN(u),d=new Wd;return Object.assign(d,f),d})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=GN(e);return s=D("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=qN(u),d=new jd;return Object.assign(d,f),d})}}async importFile(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=kN(e);return s=D("{file_search_store_name}:importFile",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{let f=DN(u),d=new br;return Object.assign(d,f),d})}}};var XT=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return XT=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))},R1=()=>XT();function xp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var wp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var yt=class extends Error{},We=class extends yt{constructor(e,n,i,o){super(`${We.makeMessage(e,n,i)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,i){let o=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,i,o){if(!e||!o)return new os({message:i,cause:wp(n)});let s=n;return e===400?new Gl(e,s,i,o):e===401?new ql(e,s,i,o):e===403?new Ol(e,s,i,o):e===404?new Fl(e,s,i,o):e===409?new zl(e,s,i,o):e===422?new Vl(e,s,i,o):e===429?new Bl(e,s,i,o):e>=500?new $l(e,s,i,o):new We(e,s,i,o)}},Ir=class extends We{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},os=class extends We{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},Hl=class extends os{constructor({message:e}={}){super({message:e??"Request timed out."})}},Gl=class extends We{},ql=class extends We{},Ol=class extends We{},Fl=class extends We{},zl=class extends We{},Vl=class extends We{},Bl=class extends We{},$l=class extends We{};var N1=/^[a-z][a-z0-9+.-]*:/i,I1=t=>N1.test(t),bp=t=>(bp=Array.isArray,bp(t)),M1=bp,D1=M1,gT=D1;function k1(t){if(!t)return!0;for(let e in t)return!1;return!0}function U1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var P1=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new yt(`${t} must be an integer`);if(e<0)throw new yt(`${t} must be a positive integer`);return e},L1=t=>{try{return JSON.parse(t)}catch{return}};var H1=t=>new Promise(e=>setTimeout(e,t));var Wo="0.0.1";function G1(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var q1=()=>{var t,e,n,i,o;let s=G1();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":vT(Deno.build.os),"X-Stainless-Arch":yT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":vT((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":yT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let r=O1();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function O1(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:n}of t){let i=n.exec(navigator.userAgent);if(i){let o=i[1]||0,s=i[2]||0,r=i[3]||0;return{browser:e,version:`${o}.${s}.${r}`}}}return null}var yT=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",vT=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),vl,F1=()=>vl??(vl=q1());function z1(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function QT(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function V1(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return QT({start(){},async pull(n){let{done:i,value:o}=await e.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function ZT(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){let n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function B1(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}let i=t.getReader(),o=i.cancel();i.releaseLock(),await o}var $1=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var WT=()=>{var t;if(typeof File>"u"){let{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Fd(t,e,n){return WT(),new File(t,e??"unknown_file",n)}function Y1(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var J1=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var jT=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",K1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&jT(t),X1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Q1(t,e,n){if(WT(),t=await t,K1(t))return t instanceof File?t:Fd([await t.arrayBuffer()],t.name);if(X1(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Fd(await Rp(o),e,n)}let i=await Rp(t);if(e||(e=Y1(t)),!n?.type){let o=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return Fd(i,e,n)}async function Rp(t){var e,n,i,o,s;let r=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)r.push(t);else if(jT(t))r.push(t instanceof Blob?t:await t.arrayBuffer());else if(J1(t))try{for(var l=!0,u=Qt(t),f;f=await u.next(),e=f.done,!e;l=!0){o=f.value,l=!1;let d=o;r.push(...await Rp(d))}}catch(d){n={error:d}}finally{try{!l&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}else{let d=(s=t?.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${Z1(t)}`)}return r}function Z1(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}var Yl=class{constructor(e){this._client=e}};Yl._key=[];function e_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var ST=Object.freeze(Object.create(null)),W1=(t=e_)=>function(n,...i){if(n.length===1)return n[0];let o=!1,s=[],r=n.reduce((d,p,m)=>{var h,v,T;/[?#]/.test(p)&&(o=!0);let E=i[m],g=(o?encodeURIComponent:t)(""+E);return m!==i.length&&(E==null||typeof E=="object"&&E.toString===((T=Object.getPrototypeOf((v=Object.getPrototypeOf((h=E.hasOwnProperty)!==null&&h!==void 0?h:ST))!==null&&v!==void 0?v:ST))===null||T===void 0?void 0:T.toString))&&(g=E+"",s.push({start:d.length+p.length,length:g.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),d+p+(m===i.length?"":g)},""),l=r.split(/[?#]/,1)[0],u=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,f;for(;(f=u.exec(l))!==null;)s.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(s.sort((d,p)=>d.start-p.start),s.length>0){let d=0,p=s.reduce((m,h)=>{let v=" ".repeat(h.start-d),T="^".repeat(h.length);return d=h.start+h.length,m+v+T},"");throw new yt(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${r}
${p}`)}return r},Sl=W1(e_);var Jl=class extends Yl{create(e,n){var i;let{api_version:o=this._client.apiVersion}=e,s=Ll(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new yt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new yt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Sl`/${o}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(Sl`/${o}/interactions/${e}`,i)}cancel(e,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.post(Sl`/${o}/interactions/${e}/cancel`,i)}get(e,n={},i){var o;let s=n??{},{api_version:r=this._client.apiVersion}=s,l=Ll(s,["api_version"]);return this._client.get(Sl`/${r}/interactions/${e}`,Object.assign(Object.assign({query:l},i),{stream:(o=n?.stream)!==null&&o!==void 0?o:!1}))}};Jl._key=Object.freeze(["interactions"]);var Kl=class extends Jl{};function j1(t){let e=0;for(let o of t)e+=o.length;let n=new Uint8Array(e),i=0;for(let o of t)n.set(o,i),i+=o.length;return n}var Tl;function zp(t){let e;return(Tl??(e=new globalThis.TextEncoder,Tl=e.encode.bind(e)))(t)}var _l;function TT(t){let e;return(_l??(e=new globalThis.TextDecoder,_l=e.decode.bind(e)))(t)}var ss=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?zp(e):e;this.buffer=j1([this.buffer,n]);let i=[],o;for(;(o=eI(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(TT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let s=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,r=TT(this.buffer.subarray(0,s));i.push(r),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};ss.NEWLINE_CHARS=new Set([`
`,"\r"]);ss.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function eI(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function tI(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}var Xl={off:0,error:200,warn:300,info:400,debug:500},_T=(t,e,n)=>{if(!!t){if(U1(Xl,t))return t;rt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Xl))}`)}};function xr(){}function El(t,e,n){return!e||Xl[t]>Xl[n]?xr:e[t].bind(e)}var nI={error:xr,warn:xr,info:xr,debug:xr},ET=new WeakMap;function rt(t){var e;let n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return nI;let o=ET.get(n);if(o&&o[0]===i)return o[1];let s={error:El("error",n,i),warn:El("warn",n,i),info:El("info",n,i),debug:El("debug",n,i)};return ET.set(n,[i,s]),s}var Xi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var _i=class{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let o=!1,s=i?rt(i):console;function r(){return Xt(this,arguments,function*(){var u,f,d,p;if(o)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,v=Qt(iI(e,n)),T;T=yield q(v.next()),u=T.done,!u;h=!0){p=T.value,h=!1;let E=p;if(!m)if(E.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield q(JSON.parse(E.data))}catch(g){throw s.error("Could not parse message into JSON:",E.data),s.error("From chunk:",E.raw),g}}}catch(E){f={error:E}}finally{try{!h&&!u&&(d=v.return)&&(yield q(d.call(v)))}finally{if(f)throw f.error}}m=!0}catch(E){if(xp(E))return yield q(void 0);throw E}finally{m||n.abort()}})}return new _i(r,n,i)}static fromReadableStream(e,n,i){let o=!1;function s(){return Xt(this,arguments,function*(){var u,f,d,p;let m=new ss,h=ZT(e);try{for(var v=!0,T=Qt(h),E;E=yield q(T.next()),u=E.done,!u;v=!0){p=E.value,v=!1;let g=p;for(let y of m.decode(g))yield yield q(y)}}catch(g){f={error:g}}finally{try{!v&&!u&&(d=T.return)&&(yield q(d.call(T)))}finally{if(f)throw f.error}}for(let g of m.flush())yield yield q(g)})}function r(){return Xt(this,arguments,function*(){var u,f,d,p;if(o)throw new yt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,v=Qt(s()),T;T=yield q(v.next()),u=T.done,!u;h=!0){p=T.value,h=!1;let E=p;m||E&&(yield yield q(JSON.parse(E)))}}catch(E){f={error:E}}finally{try{!h&&!u&&(d=v.return)&&(yield q(d.call(v)))}finally{if(f)throw f.error}}m=!0}catch(E){if(xp(E))return yield q(void 0);throw E}finally{m||n.abort()}})}return new _i(r,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],n=[],i=this.iterator(),o=s=>({next:()=>{if(s.length===0){let r=i.next();e.push(r),n.push(r)}return s.shift()}});return[new _i(()=>o(e),this.controller,this.client),new _i(()=>o(n),this.controller,this.client)]}toReadableStream(){let e=this,n;return QT({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{let{value:o,done:s}=await n.next();if(s)return i.close();let r=zp(JSON.stringify(o)+`
`);i.enqueue(r)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}};function iI(t,e){return Xt(this,arguments,function*(){var i,o,s,r;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new yt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new yt("Attempted to iterate over a response with no body");let l=new Np,u=new ss,f=ZT(t.body);try{for(var d=!0,p=Qt(oI(f)),m;m=yield q(p.next()),i=m.done,!i;d=!0){r=m.value,d=!1;let h=r;for(let v of u.decode(h)){let T=l.decode(v);T&&(yield yield q(T))}}}catch(h){o={error:h}}finally{try{!d&&!i&&(s=p.return)&&(yield q(s.call(p)))}finally{if(o)throw o.error}}for(let h of u.flush()){let v=l.decode(h);v&&(yield yield q(v))}})}function oI(t){return Xt(this,arguments,function*(){var n,i,o,s;let r=new Uint8Array;try{for(var l=!0,u=Qt(t),f;f=yield q(u.next()),n=f.done,!n;l=!0){s=f.value,l=!1;let d=s;if(d==null)continue;let p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?zp(d):d,m=new Uint8Array(r.length+p.length);m.set(r),m.set(p,r.length),r=m;let h;for(;(h=tI(r))!==-1;)yield yield q(r.slice(0,h)),r=r.slice(h)}}catch(d){i={error:d}}finally{try{!l&&!n&&(o=u.return)&&(yield q(o.call(u)))}finally{if(i)throw i.error}}r.length>0&&(yield yield q(r))})}var Np=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,o]=sI(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}};function sI(t,e){let n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function rI(t,e){let{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:s}=e,r=await(async()=>{var l;if(e.options.stream)return rt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):_i.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;let u=n.headers.get("content-type"),f=(l=u?.split(";")[0])===null||l===void 0?void 0:l.trim();return f?.includes("application/json")||f?.endsWith("+json")?await n.json():await n.text()})();return rt(t).debug(`[${i}] response parsed`,Xi({retryOfRequestLogID:o,url:n.url,status:n.status,body:r,durationMs:Date.now()-s})),r}var Mr=class extends Promise{constructor(e,n,i=rI){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Mr(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var t_=Symbol("brand.privateNullableHeaders");function*aI(t){if(!t)return;if(t_ in t){let{values:i,nulls:o}=t;yield*i.entries();for(let s of o)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():gT(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){let o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let s=gT(i[1])?i[1]:[i[1]],r=!1;for(let l of s)l!==void 0&&(e&&!r&&(r=!0,yield[o,null]),yield[o,l])}}var Ar=t=>{let e=new Headers,n=new Set;for(let i of t){let o=new Set;for(let[s,r]of aI(i)){let l=s.toLowerCase();o.has(l)||(e.delete(s),o.add(l)),r===null?(e.delete(s),n.add(l)):(e.append(s,r),n.delete(l))}}return{[t_]:!0,values:e,nulls:n}};var zd=t=>{var e,n,i,o,s,r;if(typeof globalThis.process<"u")return(i=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(r=(s=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||s===void 0?void 0:s.call(o,t))===null||r===void 0?void 0:r.trim()};var n_,rs=class{constructor(e){var n,i,o,s,r,l,u,{baseURL:f=zd("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=zd("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,m=Ll(e,["baseURL","apiKey","apiVersion"]);let h=Object.assign(Object.assign({apiKey:d,apiVersion:p},m),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=h.baseURL,this.timeout=(i=h.timeout)!==null&&i!==void 0?i:rs.DEFAULT_TIMEOUT,this.logger=(o=h.logger)!==null&&o!==void 0?o:console;let v="warn";this.logLevel=v,this.logLevel=(r=(s=_T(h.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:_T(zd("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&r!==void 0?r:v,this.fetchOptions=h.fetchOptions,this.maxRetries=(l=h.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(u=h.fetch)!==null&&u!==void 0?u:z1(),this.encoder=$1,this._options=h,this.apiKey=d,this.apiVersion=p,this.clientAdapter=h.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){let n=Ar([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ar([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ar([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new yt(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Wo}`}defaultIdempotencyKey(){return`stainless-node-retry-${R1()}`}makeStatusError(e,n,i,o){return We.generate(e,n,i,o)}buildURL(e,n,i){let o=!this.baseURLOverridden()&&i||this.baseURL,s=I1(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return k1(r)||(n=Object.assign(Object.assign({},r),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){let n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new Mr(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var o,s,r;let l=await e,u=(o=l.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=u),await this.prepareOptions(l);let{req:f,url:d,timeout:p}=await this.buildRequest(l,{retryCount:u-n});await this.prepareRequest(f,{url:d,options:l});let m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=i===void 0?"":`, retryOf: ${i}`,v=Date.now();if(rt(this).debug(`[${m}] sending request`,Xi({retryOfRequestLogID:i,method:l.method,url:d,options:l,headers:f.headers})),!((s=l.signal)===null||s===void 0)&&s.aborted)throw new Ir;let T=new AbortController,E=await this.fetchWithTimeout(d,f,p,T).catch(wp),g=Date.now();if(E instanceof globalThis.Error){let S=`retrying, ${n} attempts remaining`;if(!((r=l.signal)===null||r===void 0)&&r.aborted)throw new Ir;let _=xp(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return rt(this).info(`[${m}] connection ${_?"timed out":"failed"} - ${S}`),rt(this).debug(`[${m}] connection ${_?"timed out":"failed"} (${S})`,Xi({retryOfRequestLogID:i,url:d,durationMs:g-v,message:E.message})),this.retryRequest(l,n,i??m);throw rt(this).info(`[${m}] connection ${_?"timed out":"failed"} - error; no more retries left`),rt(this).debug(`[${m}] connection ${_?"timed out":"failed"} (error; no more retries left)`,Xi({retryOfRequestLogID:i,url:d,durationMs:g-v,message:E.message})),_?new Hl:new os({cause:E})}let y=`[${m}${h}] ${f.method} ${d} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${g-v}ms`;if(!E.ok){let S=await this.shouldRetry(E);if(n&&S){let C=`retrying, ${n} attempts remaining`;return await B1(E.body),rt(this).info(`${y} - ${C}`),rt(this).debug(`[${m}] response error (${C})`,Xi({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:g-v})),this.retryRequest(l,n,i??m,E.headers)}let _=S?"error; no more retries left":"error; not retryable";rt(this).info(`${y} - ${_}`);let A=await E.text().catch(C=>wp(C).message),I=L1(A),x=I?void 0:A;throw rt(this).debug(`[${m}] response error (${_})`,Xi({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,message:x,durationMs:Date.now()-v})),this.makeStatusError(E.status,I,x,E.headers)}return rt(this).info(y),rt(this).debug(`[${m}] response start`,Xi({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:g-v})),{response:E,options:l,controller:T,requestLogID:m,retryOfRequestLogID:i,startTime:v}}async fetchWithTimeout(e,n,i,o){let s=n||{},{signal:r,method:l}=s,u=Ll(s,["signal","method"]);r&&r.addEventListener("abort",()=>o.abort());let f=setTimeout(()=>o.abort(),i),d=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},d?{duplex:"half"}:{}),{method:"GET"}),u);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(f)}}async shouldRetry(e){let n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,o){var s;let r,l=o?.get("retry-after-ms");if(l){let f=parseFloat(l);Number.isNaN(f)||(r=f)}let u=o?.get("retry-after");if(u&&!r){let f=parseFloat(u);Number.isNaN(f)?r=Date.parse(u)-Date.now():r=f*1e3}if(!(r&&0<=r&&r<60*1e3)){let f=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,f)}return await H1(r),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){let s=n-e,r=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return r*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,o,s;let r=Object.assign({},e),{method:l,path:u,query:f,defaultBaseURL:d}=r,p=this.buildURL(u,f,d);"timeout"in r&&P1("timeout",r.timeout),r.timeout=(i=r.timeout)!==null&&i!==void 0?i:this.timeout;let{bodyHeaders:m,body:h}=this.buildBody({options:r}),v=await this.buildHeaders({options:e,method:l,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:v},r.signal&&{signal:r.signal}),globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"}),h&&{body:h}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(s=r.fetchOptions)!==null&&s!==void 0?s:{}),url:p,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:o}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let r=await this.authHeaders(e),l=Ar([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),F1()),this._options.defaultHeaders,i,e.headers,r]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};let i=Ar([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:V1(e)}:this.encoder({body:e,headers:i})}};rs.DEFAULT_TIMEOUT=6e4;var Le=class extends rs{constructor(){super(...arguments),this.interactions=new Kl(this)}};n_=Le;Le.GeminiNextGenAPIClient=n_;Le.GeminiNextGenAPIClientError=yt;Le.APIError=We;Le.APIConnectionError=os;Le.APIConnectionTimeoutError=Hl;Le.APIUserAbortError=Ir;Le.NotFoundError=Fl;Le.ConflictError=zl;Le.RateLimitError=Bl;Le.BadRequestError=Gl;Le.AuthenticationError=ql;Le.InternalServerError=$l;Le.PermissionDeniedError=Ol;Le.UnprocessableEntityError=Vl;Le.toFile=Q1;Le.Interactions=Kl;function lI(t,e){let n={},i=a(t,["name"]);return i!=null&&c(n,["_url","name"],i),n}function uI(t,e){let n={},i=a(t,["name"]);return i!=null&&c(n,["_url","name"],i),n}function cI(t,e){let n={},i=a(t,["sdkHttpResponse"]);return i!=null&&c(n,["sdkHttpResponse"],i),n}function fI(t,e){let n={},i=a(t,["sdkHttpResponse"]);return i!=null&&c(n,["sdkHttpResponse"],i),n}function dI(t,e,n){let i={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=a(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&c(e,["displayName"],o),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let s=a(t,["epochCount"]);e!==void 0&&s!=null&&c(e,["tuningTask","hyperparameters","epochCount"],s);let r=a(t,["learningRateMultiplier"]);if(r!=null&&c(i,["tuningTask","hyperparameters","learningRateMultiplier"],r),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let l=a(t,["batchSize"]);e!==void 0&&l!=null&&c(e,["tuningTask","hyperparameters","batchSize"],l);let u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function pI(t,e,n){let i={},o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let h=a(t,["validationDataset"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec"],CT(h))}else if(o==="PREFERENCE_TUNING"){let h=a(t,["validationDataset"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec"],CT(h))}let s=a(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&c(e,["tunedModelDisplayName"],s);let r=a(t,["description"]);e!==void 0&&r!=null&&c(e,["description"],r);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let h=a(t,["epochCount"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],h)}else if(l==="PREFERENCE_TUNING"){let h=a(t,["epochCount"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],h)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let h=a(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h)}else if(u==="PREFERENCE_TUNING"){let h=a(t,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],h)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let h=a(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],h)}else if(f==="PREFERENCE_TUNING"){let h=a(t,["exportLastCheckpointOnly"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],h)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let h=a(t,["adapterSize"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h)}else if(d==="PREFERENCE_TUNING"){let h=a(t,["adapterSize"]);e!==void 0&&h!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],h)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);let m=a(t,["beta"]);return e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),i}function mI(t,e){let n={},i=a(t,["baseModel"]);i!=null&&c(n,["baseModel"],i);let o=a(t,["preTunedModel"]);o!=null&&c(n,["preTunedModel"],o);let s=a(t,["trainingDataset"]);s!=null&&xI(s);let r=a(t,["config"]);return r!=null&&dI(r,n),n}function hI(t,e){let n={},i=a(t,["baseModel"]);i!=null&&c(n,["baseModel"],i);let o=a(t,["preTunedModel"]);o!=null&&c(n,["preTunedModel"],o);let s=a(t,["trainingDataset"]);s!=null&&wI(s,n,e);let r=a(t,["config"]);return r!=null&&pI(r,n,e),n}function gI(t,e){let n={},i=a(t,["name"]);return i!=null&&c(n,["_url","name"],i),n}function yI(t,e){let n={},i=a(t,["name"]);return i!=null&&c(n,["_url","name"],i),n}function vI(t,e,n){let i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let s=a(t,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);let r=a(t,["filter"]);return e!==void 0&&r!=null&&c(e,["_query","filter"],r),i}function SI(t,e,n){let i={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let s=a(t,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);let r=a(t,["filter"]);return e!==void 0&&r!=null&&c(e,["_query","filter"],r),i}function TI(t,e){let n={},i=a(t,["config"]);return i!=null&&vI(i,n),n}function _I(t,e){let n={},i=a(t,["config"]);return i!=null&&SI(i,n),n}function EI(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["nextPageToken"]);o!=null&&c(n,["nextPageToken"],o);let s=a(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>i_(l))),c(n,["tuningJobs"],r)}return n}function CI(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["nextPageToken"]);o!=null&&c(n,["nextPageToken"],o);let s=a(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Ip(l))),c(n,["tuningJobs"],r)}return n}function AI(t,e){let n={},i=a(t,["name"]);i!=null&&c(n,["model"],i);let o=a(t,["name"]);return o!=null&&c(n,["endpoint"],o),n}function xI(t,e){let n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=a(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(n,["examples","examples"],o)}return n}function wI(t,e,n){let i={},o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let r=a(t,["gcsUri"]);e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(o==="PREFERENCE_TUNING"){let r=a(t,["gcsUri"]);e!==void 0&&r!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}let s=a(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){let r=a(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(s==="PREFERENCE_TUNING"){let r=a(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function i_(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["name"]);o!=null&&c(n,["name"],o);let s=a(t,["state"]);s!=null&&c(n,["state"],MT(s));let r=a(t,["createTime"]);r!=null&&c(n,["createTime"],r);let l=a(t,["tuningTask","startTime"]);l!=null&&c(n,["startTime"],l);let u=a(t,["tuningTask","completeTime"]);u!=null&&c(n,["endTime"],u);let f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);let d=a(t,["description"]);d!=null&&c(n,["description"],d);let p=a(t,["baseModel"]);p!=null&&c(n,["baseModel"],p);let m=a(t,["_self"]);return m!=null&&c(n,["tunedModel"],AI(m)),n}function Ip(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["name"]);o!=null&&c(n,["name"],o);let s=a(t,["state"]);s!=null&&c(n,["state"],MT(s));let r=a(t,["createTime"]);r!=null&&c(n,["createTime"],r);let l=a(t,["startTime"]);l!=null&&c(n,["startTime"],l);let u=a(t,["endTime"]);u!=null&&c(n,["endTime"],u);let f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);let d=a(t,["error"]);d!=null&&c(n,["error"],d);let p=a(t,["description"]);p!=null&&c(n,["description"],p);let m=a(t,["baseModel"]);m!=null&&c(n,["baseModel"],m);let h=a(t,["tunedModel"]);h!=null&&c(n,["tunedModel"],h);let v=a(t,["preTunedModel"]);v!=null&&c(n,["preTunedModel"],v);let T=a(t,["supervisedTuningSpec"]);T!=null&&c(n,["supervisedTuningSpec"],T);let E=a(t,["preferenceOptimizationSpec"]);E!=null&&c(n,["preferenceOptimizationSpec"],E);let g=a(t,["tuningDataStats"]);g!=null&&c(n,["tuningDataStats"],g);let y=a(t,["encryptionSpec"]);y!=null&&c(n,["encryptionSpec"],y);let S=a(t,["partnerModelTuningSpec"]);S!=null&&c(n,["partnerModelTuningSpec"],S);let _=a(t,["customBaseModel"]);_!=null&&c(n,["customBaseModel"],_);let A=a(t,["experiment"]);A!=null&&c(n,["experiment"],A);let I=a(t,["labels"]);I!=null&&c(n,["labels"],I);let x=a(t,["outputUri"]);x!=null&&c(n,["outputUri"],x);let M=a(t,["pipelineJob"]);M!=null&&c(n,["pipelineJob"],M);let C=a(t,["serviceAccount"]);C!=null&&c(n,["serviceAccount"],C);let N=a(t,["tunedModelDisplayName"]);N!=null&&c(n,["tunedModelDisplayName"],N);let F=a(t,["veoTuningSpec"]);return F!=null&&c(n,["veoTuningSpec"],F),n}function bI(t,e){let n={},i=a(t,["sdkHttpResponse"]);i!=null&&c(n,["sdkHttpResponse"],i);let o=a(t,["name"]);o!=null&&c(n,["name"],o);let s=a(t,["metadata"]);s!=null&&c(n,["metadata"],s);let r=a(t,["done"]);r!=null&&c(n,["done"],r);let l=a(t,["error"]);return l!=null&&c(n,["error"],l),n}function CT(t,e){let n={},i=a(t,["gcsUri"]);i!=null&&c(n,["validationDatasetUri"],i);let o=a(t,["vertexDatasetResource"]);return o!=null&&c(n,["validationDatasetUri"],o),n}var Mp=class extends Zt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new On(qn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);let s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{let o=Object.assign({},n);return await this.tuneInternal(o)}else{let o=Object.assign({},n),s=await this.tuneMldevInternal(o),r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:Bd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=yI(e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>Ip(d))}else{let f=gI(e);return l=D("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>i_(d))}}async listInternal(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=_I(e);return l=D("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=CI(d),m=new Il;return Object.assign(m,p),m})}else{let f=TI(e);return l=D("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=EI(d),m=new Il;return Object.assign(m,p),m})}}async cancel(e){var n,i,o,s;let r,l="",u={};if(this.apiClient.isVertexAI()){let f=uI(e);return l=D("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=fI(d),m=new Ml;return Object.assign(m,p),m})}else{let f=lI(e);return l=D("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),r.then(d=>{let p=cI(d),m=new Ml;return Object.assign(m,p),m})}}async tuneInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){let l=hI(e,e);return s=D("tuningJobs",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>Ip(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=mI(e);return s=D("tunedModels",l._url),r=l._query,delete l._url,delete l._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(f=>{let d=f;return d.sdkHttpResponse={headers:u.headers},d})),o.then(u=>bI(u))}}};var Dp=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},RI=1024*1024*8,NI=3,II=1e3,MI=2,Ql="x-goog-upload-status";async function DI(t,e,n){var i;let o=await o_(t,e,n),s=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[Ql])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function kI(t,e,n){var i;let o=await o_(t,e,n),s=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[Ql])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let r=xT(s),l=new Rr;return Object.assign(l,r),l}async function o_(t,e,n){var i,o;let s=0,r=0,l=new wr(new Response),u="upload";for(s=t.size;r<s;){let f=Math.min(RI,s-r),d=t.slice(r,r+f);r+f>=s&&(u+=", finalize");let p=0,m=II;for(;p<NI&&(l=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(r),"Content-Length":String(f)}}}),!(!((i=l?.headers)===null||i===void 0)&&i[Ql]));)p++,await PI(m),m=m*MI;if(r+=f,((o=l?.headers)===null||o===void 0?void 0:o[Ql])!=="active")break;if(s<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function UI(t){return{size:t.size,type:t.type}}function PI(t){return new Promise(e=>setTimeout(e,t))}var kp=class{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DI(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kI(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await UI(e)}};var Up=class{create(e,n,i){return new Pp(e,n,i)}},Pp=class{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var AT="x-goog-api-key",Lp=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(AT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(AT,this.apiKey)}}};var LI="gl-node/",Wt=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new Le({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let i=fx(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let o=new Lp(this.apiKey);this.apiClient=new hp({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:LI+"web",uploader:new kp,downloader:new Dp}),this.models=new Tp(this.apiClient),this.live=new vp(this.apiClient,o,new Up),this.batches=new ap(this.apiClient),this.chats=new up(this.models,this.apiClient),this.caches=new lp(this.apiClient),this.files=new fp(this.apiClient),this.operations=new _p(this.apiClient),this.authTokens=new Ep(this.apiClient),this.tunings=new Mp(this.apiClient),this.fileSearchStores=new Ap(this.apiClient)}};function s_(t){let e=atob(t),n=e.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=e.charCodeAt(o);return i}function Vp(t){let e="",n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return btoa(e)}async function r_(t,e,n,i){let o=new Int16Array(t.buffer),s=o.length/i,r=e.createBuffer(i,s,n);for(let l=0;l<i;l++){let u=r.getChannelData(l);for(let f=0;f<s;f++)u[f]=o[f*i+l]/32768}return r}function a_(t){let e=t.length,n=new Int16Array(e);for(let i=0;i<e;i++){let o=Math.max(-1,Math.min(1,t[i]));n[i]=o<0?o*32768:o*32767}return n}var eu={};ee(eu,{declaration:()=>HI,execute:()=>GI,instruction:()=>Bp});Pe();var HI={name:"list_directory",description:"Lists all available files in the vault using paths relative to vault root."},Bp="- list_directory: Use this to get an overview of the user's vault. All file paths are relative to vault root. Always call this if you are unsure of the available files.",GI=async(t,e)=>{let n=Ln();return e.onSystem("Registry Scanned",{name:"list_directory",filename:"Vault Root",files:n}),{files:n}};var tu={};ee(tu,{declaration:()=>qI,execute:()=>OI,instruction:()=>$p});Pe();var qI={name:"list_vault_files",description:"Lists markdown files in the vault with pagination and sorting. Essential for large vaults.",parameters:{type:R.OBJECT,properties:{limit:{type:R.NUMBER,description:"Max number of files to return (default: 20)"},offset:{type:R.NUMBER,description:"Number of files to skip (default: 0)"},sortBy:{type:R.STRING,enum:["mtime","name","size"],description:"Property to sort by. mtime is last modified time."},sortOrder:{type:R.STRING,enum:["asc","desc"],description:"Sort order (default: desc)"},filter:{type:R.STRING,description:"Optional text filter for path or filename."}}}},$p="- list_vault_files: Use this to explore large vaults. It supports paging and sorting. Default is most recently modified first.",OI=async(t,e)=>{let{limit:n,offset:i,sortBy:o,sortOrder:s,filter:r}=t,l=await wd({limit:n,offset:i,sortBy:o,sortOrder:s,filter:r}),u=l.files.map(f=>f.path);return e.onSystem(`Vault Files (${i}-${i+l.files.length} of ${l.total})`,{name:"list_vault_files",filename:"Vault Explorer",files:u}),l};var nu={};ee(nu,{declaration:()=>FI,execute:()=>zI,instruction:()=>Yp});Pe();var FI={name:"get_folder_tree",description:"Lists all folders in the vault as a flat array to understand hierarchy. All paths are relative to vault root."},Yp="- get_folder_tree: Use this to see a simple list of all folders in the vault hierarchy. All paths are relative to vault root.",zI=async(t,e)=>{let n=bd();return e.onSystem("Folder Structure Scanned",{name:"get_folder_tree",filename:"Folder Tree",files:n}),{folders:n}};var iu={};ee(iu,{declaration:()=>VI,execute:()=>BI,instruction:()=>Jp});Pe();var VI={name:"dirlist",description:"Lists only directory structure, ignoring files, to understand vault hierarchy. All paths are relative to vault root."},Jp="- dirlist: Use this to see the pure directory structure of the vault without any file information. All paths are relative to vault root.",BI=async(t,e)=>{let n=Rd();return e.onSystem("Directory Structure Scanned",{name:"dirlist",filename:"Directory List",directoryInfo:n.map(i=>({...i,hasChildren:i.children.length>0}))}),{directories:n}};var ou={};ee(ou,{declaration:()=>$I,execute:()=>YI,instruction:()=>Kp});Pe();Ce();var $I={name:"read_file",description:"Read the full content of a specified file using path relative to vault root.",parameters:{type:R.OBJECT,properties:{filename:{type:R.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},Kp=`- read_file: Use this to ingest the contents of a note. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). You should read a file before proposing major edits to ensure context. Parameters:
  - filename: required, path to the file`,YI=async(t,e)=>{let{filename:n}=t,i=await gt(n);await $e(n),e.onSystem(`Opened ${n}`,{name:"read_file",filename:n,oldContent:i,newContent:i,additions:0,removals:0});let o=Oe(n);return e.onFileState(o,n),{content:i}};var su={};ee(su,{declaration:()=>JI,execute:()=>KI,instruction:()=>Xp});Pe();Ce();var JI={name:"create_file",description:"Create a new file with initial content using path relative to vault root.",parameters:{type:R.OBJECT,properties:{filename:{type:R.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},content:{type:R.STRING}},required:["filename","content"]}},Xp='- create_file: Use this to initialize new notes in the vault. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). Always provide meaningful initial content.',KI=async(t,e)=>{await gl(t.filename,t.content),await $e(t.filename),e.onSystem(`Created ${t.filename}`,{name:"create_file",filename:t.filename,oldContent:"",newContent:t.content,additions:t.content.split(`
`).length,removals:0});let n=Oe(t.filename);return e.onFileState(n,t.filename),{status:"created"}};var ru={};ee(ru,{declaration:()=>XI,execute:()=>QI,instruction:()=>Qp});Pe();Ce();var XI={name:"update_file",description:"Overwrite the entire content of an existing file.",parameters:{type:R.OBJECT,properties:{filename:{type:R.STRING},content:{type:R.STRING}},required:["filename","content"]}},Qp="- update_file: Use this for total overwrites. For smaller changes, prefer edit_file.",QI=async(t,e)=>{let n=await gt(t.filename).catch(()=>"");await Ti(t.filename,t.content),await $e(t.filename);let i=n.split(`
`),o=t.content.split(`
`),s=o.filter(u=>!i.includes(u)).length,r=i.filter(u=>!o.includes(u)).length;e.onSystem(`Updated ${t.filename}`,{name:"update_file",filename:t.filename,oldContent:n,newContent:t.content,additions:s,removals:r});let l=Oe(t.filename);return e.onFileState(l,t.filename),{status:"updated"}};var au={};ee(au,{declaration:()=>ZI,execute:()=>WI,instruction:()=>Zp});Pe();Ce();var ZI={name:"edit_file",description:"Perform granular line-based edits on a file.",parameters:{type:R.OBJECT,properties:{filename:{type:R.STRING},operation:{type:R.STRING,enum:["append","replace_line","remove_line"]},text:{type:R.STRING},lineNumber:{type:R.NUMBER}},required:["filename","operation"]}},Zp="- edit_file: Use this for targeted modifications (appending, replacing lines, or removing lines).",WI=async(t,e)=>{let n=await gt(t.filename).catch(()=>"");await Dd(t.filename,t.operation,t.text,t.lineNumber);let i=await gt(t.filename);await $e(t.filename),e.onSystem(`Edited ${t.filename}`,{name:"edit_file",filename:t.filename,oldContent:n,newContent:i,additions:t.operation==="append"||t.operation==="replace_line"?1:0,removals:t.operation==="remove_line"||t.operation==="replace_line"?1:0});let o=Oe(t.filename);return e.onFileState(o,t.filename),{status:"edited"}};var lu={};ee(lu,{declaration:()=>jI,execute:()=>eM,instruction:()=>Wp});Pe();Ce();var jI={name:"rename_file",description:"Rename an existing file to a new name.",parameters:{type:R.OBJECT,properties:{oldFilename:{type:R.STRING,description:"The current name of the file"},newFilename:{type:R.STRING,description:"The new name for the file"}},required:["oldFilename","newFilename"]}},Wp="- rename_file: Use this to change the name of a note. Ensure the new name follows markdown extension conventions if applicable.",eM=async(t,e)=>{await Id(t.oldFilename,t.newFilename),await $e(t.newFilename),e.onSystem(`Renamed ${t.oldFilename} to ${t.newFilename}`,{name:"rename_file",filename:t.oldFilename,oldContent:t.oldFilename,newContent:t.newFilename});let n=Oe(t.newFilename);return e.onFileState(n,t.newFilename),{status:"renamed",from:t.oldFilename,to:t.newFilename}};var uu={};ee(uu,{declaration:()=>tM,execute:()=>nM,instruction:()=>jp});Pe();var tM={name:"move_file",description:"Move a file from one folder to another using paths relative to vault root",parameters:{type:R.OBJECT,properties:{sourcePath:{type:R.STRING,description:'Current path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},targetPath:{type:R.STRING,description:'New path relative to vault root (e.g., "archive/projects/notes.md" or "notes.md" for root level)'}},required:["sourcePath","targetPath"]}},jp='- move_file: Move a file using paths relative to vault root. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level files). Use this to reorganize files between folders.',nM=async(t,e)=>{let n=await Md(t.sourcePath,t.targetPath);return e.onSystem(`Moved ${t.sourcePath} to ${t.targetPath}`,{name:"move_file",filename:t.sourcePath,displayFormat:`<span style="color: #fb923c; font-weight: 600;">${t.sourcePath}</span> <span style="color: #6b7280;">\u2192</span> <span style="color: #10b981; font-weight: 600;">${t.targetPath}</span>`,dropdown:!1}),{status:"moved",from:t.sourcePath,to:t.targetPath}};var cu={};ee(cu,{declaration:()=>iM,execute:()=>oM,instruction:()=>em});Pe();var iM={name:"search_keyword",description:"Search for a keyword across all files in the vault.",parameters:{type:R.OBJECT,properties:{keyword:{type:R.STRING,description:"The text to search for"}},required:["keyword"]}},em="- search_keyword: Fast plaintext search across all files.",oM=async(t,e)=>{let n=await _r(t.keyword,!1);return e.onSystem(`Search complete for "${t.keyword}"`,{name:"search_keyword",filename:`Global Search: "${t.keyword}"`,searchKeyword:t.keyword,searchResults:n,displayFormat:`Searching for "<strong>${t.keyword}</strong>" (${n.length} results)`}),{results:n}};var fu={};ee(fu,{declaration:()=>sM,execute:()=>rM,instruction:()=>tm});Pe();var sM={name:"search_regexp",description:"Search using a regular expression across all files.",parameters:{type:R.OBJECT,properties:{pattern:{type:R.STRING,description:"The regex pattern"},flags:{type:R.STRING,description:'Optional regex flags (default: "i")'}},required:["pattern"]}},tm="- search_regexp: Advanced regex search. Use this to identify files for global replacements.",rM=async(t,e)=>{let n=await _r(t.pattern,!0,t.flags||"i");return e.onSystem(`Regex search complete for /${t.pattern}/`,{name:"search_regexp",filename:`Regex: /${t.pattern}/${t.flags||"i"}`,searchResults:n,displayFormat:`Regex search "<strong>/${t.pattern}/${t.flags||"i"}</strong>" (${n.length} results)`}),{results:n}};var du={};ee(du,{declaration:()=>aM,execute:()=>lM,instruction:()=>nm});Pe();Ce();var aM={name:"search_and_replace_regex_in_file",description:"Search and replace text in a specific file using regex.",parameters:{type:R.OBJECT,properties:{filename:{type:R.STRING},pattern:{type:R.STRING},replacement:{type:R.STRING},flags:{type:R.STRING,description:'Optional regex flags (default: "g")'}},required:["filename","pattern","replacement"]}},nm="- search_and_replace_regex_in_file: Targeted regex replacement within a single node.",lM=async(t,e)=>{let n=await gt(t.filename),i=new RegExp(t.pattern,t.flags||"g"),o=n.replace(i,t.replacement);await Ti(t.filename,o),await $e(t.filename),e.onSystem(`Replaced in ${t.filename}`,{name:"search_and_replace_regex_in_file",filename:t.filename,oldContent:n,newContent:o,additions:1,removals:1});let s=Oe(t.filename);return e.onFileState(s,t.filename),{status:"success"}};var pu={};ee(pu,{declaration:()=>uM,execute:()=>cM,instruction:()=>im});Pe();Ce();var uM={name:"search_and_replace_regex_global",description:"Search and replace text across ALL files using regex.",parameters:{type:R.OBJECT,properties:{pattern:{type:R.STRING},replacement:{type:R.STRING},flags:{type:R.STRING,description:'Optional regex flags (default: "g")'}},required:["pattern","replacement"]}},im=`
GLOBAL SEARCH & REPLACE WORKFLOW:
1. When asked for a global replacement, ALWAYS run "search_regexp" first.
2. Report the number of files that will be updated.
3. ASK for explicit confirmation before calling "search_and_replace_regex_global".
4. After execution, report "updated all occurrences".`,cM=async(t,e)=>{let n=Ln(),i=new RegExp(t.pattern,t.flags||"g"),o=[],s=0,r=[];for(let l of n){let u=await gt(l);if(i.test(u)){let f=u.replace(i,t.replacement);await Ti(l,f),o.push({filename:l,oldContent:u,newContent:f,additions:1,removals:1}),r.push(l),s++}}return e.onSystem(`Global replace complete: ${s} files updated`,{name:"search_and_replace_regex_global",filename:"Vault Wide",multiDiffs:o}),r.length>0&&(await $e(r[0]),e.onFileState("/",r)),{status:"success",filesUpdated:s}};var mu={};ee(mu,{declaration:()=>fM,execute:()=>dM,instruction:()=>om});var fM={name:"topic_switch",description:"Signal that a major topic shift has occurred. Provide a summary of the previous conversation.",parameters:{type:R.OBJECT,properties:{summary:{type:R.STRING,description:"A short one-sentence summary of the preceding conversation segment."}},required:["summary"]}},om=`
TOPIC SWITCHING & PERSISTENCE: 
1. Monitor for significant topic switches in the conversation flow.
2. If a switch occurs, call "topic_switch" with a concise summary.
3. This will automatically trigger an ARCHIVE process.
4. Do NOT say "Done." after calling this. Proceed immediately to the next topic.`,dM=async(t,e)=>{let i=`x-chat-history-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.md`;return e.onSystem("Context Update",{name:"topic_switch",filename:i,newContent:t.summary}),{status:"context_reset"}};var sm={};ee(sm,{declaration:()=>pM,execute:()=>hM,instruction:()=>mM});Pe();var pM={name:"create_directory",description:"Create a new directory in the vault. Parent directories will be created automatically if they don't exist.",parameters:{type:R.OBJECT,properties:{path:{type:R.STRING,description:'Directory path relative to vault root (e.g., "projects/notes" or "archive" for root level)'}},required:["path"]}},mM="- create_directory: Use this to create new directories in the vault. All paths are relative to vault root. Parent directories are created automatically.",hM=async(t,e)=>{await kd(t.path);let n=t.path.split("/").pop()||t.path,i=t.path.replace(/[^\/]+$/,"");return e.onSystem(`Created directory ${t.path}`,{name:"create_directory",filename:t.path,displayFormat:`${i}<span style="color: #10b981; font-weight: 600;">${n}</span>`,dropdown:!1}),{status:"created",path:t.path}};var rm={};ee(rm,{declaration:()=>gM,execute:()=>vM,instruction:()=>yM});Pe();Ce();var gM={name:"delete_file",description:"Move an existing file from the vault to the trash folder (chat history/trash). Files in trash are hidden from directory listings.",parameters:{type:R.OBJECT,properties:{filename:{type:R.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},yM="- delete_file: Use this to move a note to the trash folder (chat history/trash). Files in trash are hidden from directory listings but can be recovered manually. All paths are relative to vault root.",vM=async(t,e)=>{await Ud(t.filename),e.onSystem(`Moved ${t.filename} to trash`,{name:"delete_file",filename:t.filename,oldContent:t.filename,newContent:""});let n=Oe(t.filename);return e.onFileState(n,null),{status:"moved_to_trash",filename:t.filename}};var hu={};ee(hu,{declaration:()=>SM,execute:()=>TM,instruction:()=>am});Gn();var SM={name:"internet_search",description:"Search the internet for real-time information, news, current events, or general knowledge outside the vault.",parameters:{type:R.OBJECT,properties:{query:{type:R.STRING,description:"The search query to look up on the web."}},required:["query"]}},am="- internet_search: Use this to fetch real-time data or information not contained within the local vault. Always use this tool for questions about current events, celebrities, weather, or general knowledge.",TM=async(t,e)=>{let i=st()?.manualApiKey?.trim()||process.env.API_KEY;if(!i)throw new Error("API key not found. Please set your Gemini API key in the plugin settings.");e.onSystem(`Internet Search: ${t.query}`,{name:"internet_search",filename:t.query,status:"pending"});let s=await new Wt({apiKey:i}).models.generateContent({model:"gemini-3-flash-preview",contents:t.query,config:{tools:[{googleSearch:{}}]}}),r=s.text||"No results found.",l=s.candidates?.[0]?.groundingMetadata?.groundingChunks||[];return e.onSystem(`Internet Search: ${t.query}`,{name:"internet_search",filename:t.query,status:"success",newContent:r,groundingChunks:l}),{text:r,groundingChunks:l,searchQuery:t.query}};var gu={};ee(gu,{declaration:()=>_M,execute:()=>EM,instruction:()=>lm});var _M={name:"end_conversation",description:"End the current voice conversation session and stop the voice interface.",parameters:{type:R.OBJECT,properties:{},required:[]}},lm=`
CONVERSATION CONTROL:
1. Use "end_conversation" when the user indicates they want to stop talking or end the conversation.
2. This will immediately stop the voice interface and disconnect the session.
3. Do NOT say "Done." after calling this. The session will simply end.`,EM=async(t,e)=>{if(e.onSystem("Ending conversation...",{name:"end_conversation",filename:"Session",status:"success"}),e.onArchiveConversation)try{await e.onArchiveConversation()}catch(n){e.onLog(`Failed to archive conversation: ${n.message}`,"error")}return e.onStopSession&&e.onStopSession(),{status:"conversation_ended"}};var um={};ee(um,{declaration:()=>CM,execute:()=>xM,instruction:()=>AM});Gn();Pe();Ce();var CM={name:"generate_image_from_context",description:"Generate an image based on the current context or provided prompt using Gemini API and save it to the vault.",parameters:{type:R.OBJECT,properties:{prompt:{type:R.STRING,description:"The prompt describing what image to generate. If not provided, will use current context."},filename:{type:R.STRING,description:'The filename to save the image as (e.g., "generated-image.png"). If not provided, will auto-generate.'}},required:[]}},AM="- generate_image_from_context: Use this to create images based on conversation context or specific prompts. Images are saved to the current vault directory.",xM=async(t,e)=>{let i=st()?.manualApiKey?.trim()||process.env.API_KEY;if(!i)throw new Error("API key not found. Please set your Gemini API key in the plugin settings.");let o=new Wt({apiKey:i}),s=t.prompt;s||(s="Generate an image based on the current conversation context and topic being discussed.");try{let r=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:s}),l="";if(r.candidates&&r.candidates.length>0){let p=r.candidates[0];if(p.content&&p.content.parts){for(let m of p.content.parts)if(m.inlineData&&m.inlineData.data){l=m.inlineData.data;break}}}if(!l)throw new Error("No image data returned from API");let u=t.filename;u||(u=`generated-image-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.png`),u.match(/\.(png|jpg|jpeg|gif|webp)$/i)||(u+=".png");let f=Buffer.from(l,"base64");console.log(`Image data length: ${l.length} characters`),console.log(`Binary data size: ${f.byteLength} bytes`),console.log(`First 100 chars of base64: ${l.substring(0,100)}`),await Nd(u,f),e.onSystem(`Generated image: ${u}`,{name:"generate_image_from_context",filename:u,newContent:`Generated image (${f.byteLength} bytes)`,description:`Image generated from prompt: ${s}`});let d=Oe(u);return e.onFileState(d,u),{filename:u,size:f.byteLength,description:`Image generated from prompt: ${s}`}}catch(r){console.error("Image generation error:",r),console.error("Error details:",JSON.stringify(r,null,2));let l=`Failed to generate image: ${r.message}`;throw r.message?.includes("model")&&(l+=`

This might be due to an incorrect model name or insufficient API permissions for image generation.`),r.message?.includes("API key")&&(l+=`

Please check your Gemini API key configuration.`),new Error(l)}};var cm={};ee(cm,{declaration:()=>wM,execute:()=>RM,instruction:()=>bM});Ce();var wM={name:"reveal_active_pane",description:"Reveals and displays information about the last active text editor in Obsidian, including file path, view type, and editor state. Uses getActiveFile() and getLastOpenFiles() for accurate results."},bM="- reveal_active_pane: Use this to get information about the last active text editor in Obsidian, including what file was most recently edited, the view type, and editor details. Uses getActiveFile() for accurate results.",RM=async(t,e)=>{let n=G();if(!n||!n.workspace)return e.onSystem("Error: Not running in Obsidian or workspace unavailable",{name:"reveal_active_pane",filename:"Active Pane",error:"Obsidian workspace not available"}),{error:"Obsidian workspace not available"};try{let i=n.workspace,o=i.getActiveFile(),s=i.getLastOpenFiles(),r=i.activeLeaf,l=o;if(!r||r.view.getViewType()!=="markdown"){let m=i.getLeavesOfType("markdown");r=m.find(h=>h.view.file===o)||m[0]||null}if(!r&&!l)return e.onSystem("No active text editor found",{name:"reveal_active_pane",filename:"Active Editor",status:"error",error:"No active text editor currently available"}),{error:"No active text editor currently available"};let u=r?.view,f=u?.getState(),d=u?.file||l,p={viewType:u?.getViewType()||"unknown",leafType:r?.constructor.name||"none",isPinned:r?.pinned||!1,isRoot:r?.root||!1,isHidden:r?.hidden||!1,hasParent:!!r?.parent,side:r?.getSide?.()||"unknown",width:r?.width||0,height:r?.height||0,x:r?.x||0,y:r?.y||0,filePath:d?d.path:null,fileName:d?d.name:null,fileExtension:d?d.extension:null,fileSize:d?d.stat?.size:null,fileModified:d?d.stat?.mtime:null,viewState:f,mode:f?.mode||null,source:f?.source||null,editorInfo:u?.editor?{cursor:u.editor.getCursor?.(),selection:u.editor.getSelection?.(),lineCount:u.editor.lineCount?.(),isFocused:u.editor.hasFocus?.()}:null,lastOpenFiles:s,isActiveFile:!!o,hasActiveLeaf:!!r};return e.onSystem("Active Pane Information Retrieved",{name:"reveal_active_pane",filename:p.fileName||"Active Pane",status:"success",paneInfo:p}),{paneInfo:p}}catch(i){return e.onSystem("Error retrieving active pane information",{name:"reveal_active_pane",filename:"Active Pane",status:"error",error:i.message||String(i)}),{error:i.message||String(i)}}};var fm={};ee(fm,{declaration:()=>NM,execute:()=>MM,instruction:()=>IM});Ce();var NM={name:"open_folder_in_system",description:"Opens the specified folder in the system file browser/finder."},IM='- open_folder_in_system: Use this to open a folder in the system file browser. Takes a folder path as argument (e.g., path: "documents/notes"). Use "." or empty path for vault root.',MM=async(t,e)=>{let n=G();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"open_folder_in_system",filename:"System Browser",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};try{let i=t.path||t.folder||".",o=n.vault,s,r;if(i==="."||i===""||i==="/")s=o.adapter.getBasePath(),r="Vault Root";else{let l=o.getAbstractFileByPath(i);if(!l)return e.onSystem(`Path not found: ${i}`,{name:"open_folder_in_system",filename:"System Browser",status:"error",error:`Path "${i}" does not exist in vault`}),{error:`Path "${i}" does not exist in vault`};if(l.extension!==void 0){let u=l.parent?.path||"";s=u?o.adapter.getFullPath(u):o.adapter.getBasePath(),r=l.parent?.name||"Vault Root"}else s=o.adapter.getFullPath(i),r=l.name}if(n.vault.adapter.openPath)await n.vault.adapter.openPath(s);else{let{exec:l}=require("child_process");process.platform==="darwin"?l(`open "${s}"`):process.platform==="win32"?l(`explorer "${s}"`):l(`xdg-open "${s}"`)}return e.onSystem("Opened folder in system browser",{name:"open_folder_in_system",filename:r,status:"success",folderPath:i,systemPath:s}),{success:!0,folderPath:i,systemPath:s,targetName:r,message:`Folder "${r}" opened in system browser`}}catch(i){return e.onSystem("Error opening folder in system browser",{name:"open_folder_in_system",filename:"System Browser",status:"error",error:i.message||String(i)}),{error:i.message||String(i)}}};var yu={};ee(yu,{declaration:()=>DM,execute:()=>kM,instruction:()=>dm});Ce();var DM={name:"image_search",description:"Search for images on the internet and preview them. Click on any image in the preview to download it to the vault.",parameters:{type:"object",properties:{query:{type:"string",description:"The search query to find images."},count:{type:"number",description:"Number of images to show in preview (default: 3, max: 10)."},auto_download:{type:"boolean",description:"Whether to automatically download images (default: false)."},folder:{type:"string",description:"Target folder path (optional, defaults to current folder or assets folder)."},filename_prefix:{type:"string",description:"Prefix for generated filenames (optional)."}},required:["query"]}},dm="- image_search: Use this to search for images and preview them. Click on any image in the preview to download it to the vault.",kM=async(t,e)=>{let n=G();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"image_search",filename:"Image Search",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let{query:i,count:o=3,auto_download:s=!1,folder:r,filename_prefix:l}=t;try{e.onSystem(`Image Search: ${i}`,{name:"image_search",filename:i,status:"pending"});let u=Math.min(Math.max(1,parseInt(o)||3),10),f=r;if(!f){let m=n.workspace.getActiveFile();m?f=m.parent?.path||"":f="assets"}f&&!await n.vault.adapter.exists(f)&&await n.vault.createFolder(f);let d=await UM(i,Math.max(u,3));if(!d||d.length===0)return e.onSystem("No images found for the search query",{name:"image_search",filename:i,status:"error",error:"No images found"}),{error:"No images found for the search query"};let p=d.slice(0,u);if(console.log("=== DEBUG: Search Results ==="),console.log("Total search results found:",d.length),console.log("Results for preview:",p),console.log("Auto download:",s),console.log("=== END DEBUG: Search Results ==="),e.onSystem(`Found ${d.length} images for "${i}". Click any image to download:`,{name:"image_search",filename:i,status:"search_results",searchResults:p,totalFound:d.length,targetFolder:f}),s){let m=[];for(let h=0;h<Math.min(p.length,u);h++){let v=p[h];try{let T=await PM(n,v,f,l||i,h+1);m.push(T)}catch(T){console.error(`Failed to download image ${h+1}:`,T)}}if(m.length>0){let h=`Downloaded ${m.length} image${m.length>1?"s":""} to ${f}`;return e.onSystem(h,{name:"image_search",filename:i,status:"success",downloadedImages:m}),{query:i,downloadedImages:m,targetFolder:f,totalFound:d.length,totalDownloaded:m.length}}}return{query:i,searchResults:p,targetFolder:f,totalFound:d.length,auto_download:s}}catch(u){return e.onSystem("Error during image search and download",{name:"image_search",filename:i,status:"error",error:u.message||String(u)}),{error:u.message||String(u)}}};function l_(){try{let{app:t}=window;t&&t.setting&&(t.setting.open(),t.setting.openTabById("hermes-voice-assistant"))}catch(t){console.warn("Failed to open Obsidian settings:",t)}}async function UM(t,e){try{let i=(await Promise.resolve().then(()=>(Gn(),tS)).then(u=>u.reloadAppSettings()))?.serperApiKey?.trim();if(!i)throw console.error("Serper API key not found"),l_(),new Error("Serper API key not found. Please set your Serper API key in the plugin settings. Get 2,500 free credits at https://serper.dev/");let o="https://google.serper.dev/images";console.log("Fetching images from Serper.dev API...");let s=await fetch(o,{method:"POST",headers:{"X-API-KEY":i,"Content-Type":"application/json"},body:JSON.stringify({q:t,num:Math.min(e,10)})});if(!s.ok){let u=await s.text();throw console.error("Serper API error:",s.status,u),s.status===401||s.status===403?(l_(),new Error("Invalid Serper API key. Please check your API key in the plugin settings.")):new Error(`Serper API error: ${s.status}`)}let r=await s.json();if(!r.images||r.images.length===0)return console.log("No images found for query:",t),[];let l=r.images.map(u=>({url:u.imageUrl,title:u.title,description:u.source||"",thumbnailUrl:u.thumbnailUrl||u.imageUrl,contextUrl:u.link,width:u.imageWidth,height:u.imageHeight}));return console.log(`Found ${l.length} images for query: ${t}`),l}catch(n){throw console.error("Image search error:",n),n}}async function PM(t,e,n,i,o){try{console.log("=== DEBUG: downloadAndSaveImage ==="),console.log("Image result:",e),console.log("Target folder:",n),console.log("Filename prefix:",i),console.log("Index:",o);let s=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),r=LM(e.url)||"jpg",l=`${s}-${o}.${r}`,u=n?`${n}/${l}`:l;console.log("Generated filename:",l),console.log("File path:",u),console.log("Extension:",r),console.log("Starting download from URL:",e.url);let f=await fetch(e.url);if(console.log("Fetch response status:",f.status),console.log("Fetch response headers:",f.headers),!f.ok)throw new Error(`HTTP error! status: ${f.status}`);let d=await f.arrayBuffer();console.log("Downloaded image size:",d.byteLength,"bytes"),console.log("Buffer type:",d.constructor.name),console.log("Saving to vault at path:",u),await t.vault.adapter.writeBinary(u,d),console.log("Successfully saved to vault");let p={filename:l,filePath:u,url:e.url,title:e.title,size:d.byteLength,type:r};return console.log("Download result:",p),console.log("=== END DEBUG: downloadAndSaveImage ==="),p}catch(s){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",s),console.error("Image result that failed:",e),console.error("=== END DEBUG ERROR ==="),s}}function LM(t){try{let n=new URL(t).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var pm={};ee(pm,{declaration:()=>HM,execute:()=>qM,instruction:()=>GM});Ce();var HM={name:"download_image",description:"Download a specific image from a URL to the vault.",parameters:{type:"object",properties:{imageUrl:{type:"string",description:"The URL of the image to download."},title:{type:"string",description:"The title of the image for filename generation."},query:{type:"string",description:"The original search query for filename context."},index:{type:"number",description:"The index of the image in search results."},folder:{type:"string",description:"Target folder path (optional)."}},required:["imageUrl","title","query"]}},GM="- download_image: Use this to download a specific image from a URL to the vault.",qM=async(t,e)=>{let n=G();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"download_image",filename:"Image Download",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let{imageUrl:i,title:o,query:s,index:r=1,folder:l}=t;try{let u=l;if(!u){let d=n.workspace.getActiveFile();d?u=d.parent?.path||"":u="assets"}u&&!await n.vault.adapter.exists(u)&&await n.vault.createFolder(u);let f=await OM(n,{url:i,title:o},u,s,r);return e.onSystem(`Downloaded image: ${f.filename}`,{name:"download_image",filename:f.filename,status:"success",downloadedImage:f}),f}catch(u){return e.onSystem("Error downloading image",{name:"download_image",filename:o,status:"error",error:u.message||String(u)}),{error:u.message||String(u)}}};async function OM(t,e,n,i,o){try{let s=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),r=FM(e.url)||"jpg",l=`${s}-${o}.${r}`,u=n?`${n}/${l}`:l;console.log("=== DEBUG: downloadAndSaveImage ==="),console.log("Image URL:",e.url),console.log("Target folder:",n),console.log("Filename:",l),console.log("File path:",u);let f=await fetch(e.url);if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);let d=await f.arrayBuffer();console.log("Downloaded image size:",d.byteLength,"bytes"),console.log("Saving to vault at path:",u),await t.vault.adapter.writeBinary(u,d),console.log("Successfully saved to vault");let p={filename:l,filePath:u,url:e.url,title:e.title,size:d.byteLength,type:r,targetFolder:n};return console.log("Download result:",p),console.log("=== END DEBUG: downloadAndSaveImage ==="),p}catch(s){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",s),console.error("Image result that failed:",e),console.error("=== END DEBUG ERROR ==="),s}}function FM(t){try{let n=new URL(t).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var mm={};ee(mm,{declaration:()=>zM,execute:()=>BM,instruction:()=>VM});Ce();Gn();var zM={name:"list_trash",description:"List the most recent files in the trash folder. Shows up to 100 files sorted by deletion time (most recent first).",parameters:{type:R.OBJECT,properties:{limit:{type:R.NUMBER,description:"Maximum number of files to show (default: 20, max: 100)."}}}},VM="- list_trash: Use this to list files in the trash folder. Shows recently deleted files that can be restored.",BM=async(t,e)=>{let n=G();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"list_trash",filename:"Trash",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let{limit:i=20}=t,o=Math.min(Math.max(1,parseInt(i)||20),100);try{e.onSystem("Scanning trash folder...",{name:"list_trash",filename:"Trash",status:"pending"});let l=`${st()?.chatHistoryFolder||"chat-history"}/trash`;if(!n.vault.getAbstractFileByPath(l))return e.onSystem("Trash folder is empty or does not exist",{name:"list_trash",filename:"Trash",status:"success",files:[]}),{files:[],total:0,message:"Trash folder is empty"};let f=n.vault.getMarkdownFiles().filter(h=>h.path.startsWith(l+"/")).map(h=>({path:h.path,name:h.name,originalName:$M(h.name),trashTimestamp:u_(h.name),deletionDate:YM(u_(h.name)),size:h.stat.size,mtime:h.stat.mtime})).filter(h=>h.trashTimestamp!==null).sort((h,v)=>{let T=h.deletionDate?.getTime()||0;return(v.deletionDate?.getTime()||0)-T}),d=f.length,m=f.slice(0,o).map(h=>({trashPath:h.path,originalName:h.originalName,trashFilename:h.name,deletionDate:h.deletionDate?.toISOString()||"",formattedDeletionDate:h.deletionDate?.toLocaleString()||"",size:h.size,canRestore:!0}));return e.onSystem(`Found ${d} files in trash${d>o?` (showing ${o} most recent)`:""}`,{name:"list_trash",filename:"Trash",status:"success",files:m,total:d,shown:m.length}),{files:m,total:d,shown:m.length,trashFolderPath:l}}catch(s){return e.onSystem("Error listing trash files",{name:"list_trash",filename:"Trash",status:"error",error:s.message||String(s)}),{error:s.message||String(s)}}};function $M(t){let e=t.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(e)return e[1];let n=t.match(/^\d+-(.+)$/);return n?n[1]:t}function u_(t){let e=t.match(/^(\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z)-/);if(e)return e[1].replace(/-/g,":").replace("T","T").replace(/(\d{4}-\d{2}-\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})Z/,"$1T$2:$3:$4.$5Z");let n=t.match(/^(\d{13})-/);return n?n[1]:null}function YM(t){if(!t)return null;try{return t.includes("T")&&t.includes("Z")?new Date(t):/^\d{13}$/.test(t)?new Date(parseInt(t)):null}catch{return null}}var hm={};ee(hm,{declaration:()=>JM,execute:()=>XM,instruction:()=>KM});Ce();Gn();var JM={name:"restore_from_trash",description:"Restore a file from the trash folder to its original location or a specified location.",parameters:{type:R.OBJECT,properties:{trash_filename:{type:R.STRING,description:'The filename in trash (as shown by list_trash, e.g., "2024-01-25T15-30-45-123Z-my-note.md")'},target_path:{type:R.STRING,description:"Optional: Target path where to restore the file. If not provided, attempts to restore to original location."}},required:["trash_filename"]}},KM="- restore_from_trash: Use this to restore a file from trash. Provide the trash filename from list_trash. Optionally specify where to restore it.",XM=async(t,e)=>{let n=G();if(!n||!n.vault)return e.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"restore_from_trash",filename:"Trash",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let{trash_filename:i,target_path:o}=t;if(!i)return e.onSystem("Error: trash_filename is required",{name:"restore_from_trash",filename:"Trash",status:"error",error:"Missing required parameter: trash_filename"}),{error:"trash_filename is required"};try{e.onSystem(`Restoring ${i}...`,{name:"restore_from_trash",filename:i,status:"pending"});let l=`${st()?.chatHistoryFolder||"chat-history"}/trash`,u=i.includes("/")?i:`${l}/${i}`,f=n.vault.getAbstractFileByPath(u);if(!f)return e.onSystem(`File not found in trash: ${i}`,{name:"restore_from_trash",filename:i,status:"error",error:"File not found in trash"}),{error:`File not found in trash: ${i}`};let d=QM(f.name),p=o;if(!p&&(p=d,d.includes("/"))){let v=Oe(d);n.vault.getAbstractFileByPath(v)||await n.vault.createFolder(v)}if(n.vault.getAbstractFileByPath(p))return e.onSystem(`Target file already exists: ${p}`,{name:"restore_from_trash",filename:i,status:"error",error:"Target file already exists",targetPath:p}),{error:`Target file already exists: ${p}. Please specify a different target_path or delete the existing file first.`,targetPath:p,trashPath:u};await n.fileManager.renameFile(f,p),await $e(p),e.onSystem(`Successfully restored ${d} to ${p}`,{name:"restore_from_trash",filename:d,status:"success",originalPath:u,restoredPath:p});let h=Oe(p);return e.onFileState(h,d),{success:!0,originalFilename:d,trashPath:u,restoredPath:p,message:`Successfully restored ${d} to ${p}`}}catch(s){return e.onSystem("Error restoring file from trash",{name:"restore_from_trash",filename:i,status:"error",error:s.message||String(s)}),{error:s.message||String(s)}}};function QM(t){let e=t.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(e)return e[1];let n=t.match(/^\d+-(.+)$/);return n?n[1]:t}var gm={};ee(gm,{declaration:()=>ZM,execute:()=>jM,instruction:()=>WM});Ce();var ZM={name:"get_obsidian_commands",description:"Lists all available Obsidian commands that can be executed.",parameters:{type:R.OBJECT,properties:{filter:{type:R.STRING,description:"Optional text filter to search for specific commands by name or description."}}}},WM="- get_obsidian_commands: Use this to list all available Obsidian commands. You can optionally filter commands by name or description.",jM=async(t,e)=>{let{filter:n}=t;try{let i=G();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands,s=Object.entries(o).map(([u,f])=>({id:u,name:f.name,description:f.editor?.name||f.name})),r=s;if(n){let u=n.toLowerCase();r=s.filter(f=>f.name.toLowerCase().includes(u)||f.description.toLowerCase().includes(u)||f.id.toLowerCase().includes(u))}r.sort((u,f)=>u.name.localeCompare(f.name));let l=r.map(u=>`${u.name} (${u.id})`);return e.onSystem(`Obsidian Commands (${r.length} total)`,{name:"get_obsidian_commands",filename:"Command Registry",files:l}),{commands:r,total:s.length,filtered:r.length,filter:n||null}}catch(i){throw new Error(`Failed to get Obsidian commands: ${i.message}`)}};var ym={};ee(ym,{declaration:()=>eD,execute:()=>nD,instruction:()=>tD});Ce();var eD={name:"run_obsidian_command",description:"Executes an Obsidian command by its command ID.",parameters:{type:R.OBJECT,properties:{commandId:{type:R.STRING,description:'The command ID to execute (e.g., "editor:toggle-bold" or "workspace:open-command-palette").'}},required:["commandId"]}},tD="- run_obsidian_command: Use this to execute an Obsidian command by its command ID. Use get_obsidian_commands first to find available commands and their IDs.",nD=async(t,e)=>{let{commandId:n}=t;try{let i=G();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands[n];if(!o)throw new Error(`Command not found: ${n}`);await i.commands.executeCommandById(n);let s=o.name||n;return e.onSystem(`Executed: ${s}`,{name:"run_obsidian_command",filename:"Command Execution",status:"success"}),{success:!0,commandId:n,commandName:s,executedAt:new Date().toISOString()}}catch(i){throw e.onSystem(`Command execution failed: ${i.message}`,{name:"run_obsidian_command",filename:"Command Execution",status:"error",error:i.message}),new Error(`Failed to execute command ${n}: ${i.message}`)}};var c_={list_directory:eu,list_vault_files:tu,get_folder_tree:nu,dirlist:iu,read_file:ou,create_file:su,create_directory:sm,delete_file:rm,update_file:ru,edit_file:au,rename_file:lu,move_file:uu,search_keyword:cu,search_regexp:fu,search_and_replace_regex_in_file:du,search_and_replace_regex_global:pu,topic_switch:mu,internet_search:hu,generate_image_from_context:um,end_conversation:gu,reveal_active_pane:cm,open_folder_in_system:fm,image_search:yu,download_image:pm,list_trash:mm,restore_from_trash:hm,get_obsidian_commands:gm,run_obsidian_command:ym},Wi=Object.values(c_).map(t=>t.declaration),cs=async(t,e,n,i)=>{let o=performance.now(),s=c_[t];if(!s){let u={toolName:t,content:JSON.stringify(e,null,2),contentSize:JSON.stringify(e).length,apiCall:"executeCommand"};throw n.onLog(`Tool not found: ${t}`,"error",void 0,u),new Error(`Command ${t} not found`)}let r=i||`tool-${Date.now()}-${Math.random().toString(36).substr(2,5)}`;i||n.onSystem(`${t.replace(/_/g," ").toUpperCase()}...`,{id:r,name:t,filename:e.filename||(t==="internet_search"?"Web":"Registry"),status:"pending"});let l={...n,onSystem:(u,f)=>{n.onSystem(u,{...f,id:r})}};try{let u=await s.execute(e,l),f=iD(t,u,l),d=Math.round(performance.now()-o);return n.onLog(`Executed ${t} in ${d}ms`,"action",d),f}catch(u){let f=Math.round(performance.now()-o),d={toolName:t,content:JSON.stringify(e,null,2),contentSize:JSON.stringify(e).length,stack:u.stack,apiCall:"tool_execution"};throw n.onLog(`Error in ${t}: ${u.message}`,"error",f,d),l.onSystem(`Error: ${u.message}`,{name:t,filename:e.filename||(t==="internet_search"?"Web":"unknown"),error:u.message,status:"error"}),u}};function iD(t,e,n){if(e?.files&&Array.isArray(e.files)){let o=e.files.length;if(o>100){let s=e.files.slice(0,100),r=Math.ceil(o/100),l=1,u=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} items (Page ${l} of ${r}).

To see more results, consider:
- Using list_vault_files with pagination (limit/offset parameters)
- Using search_keyword or search_regexp for targeted searches
- Using get_folder_tree for folder structure only
- Adding a filter parameter to narrow results

Current results show first ${100} items only.`;return console.log(`Tool result truncated: ${t}, ${100}/${o} items, page ${l}/${r}`),n.onSystem(`Registry Scanned (TRUNCATED: ${100}/${o} items)`,{name:t,filename:"Vault Root",files:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r}),{...e,files:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r,truncationNotice:u}}}if(e?.folders&&Array.isArray(e.folders)){let o=e.folders.length;if(o>100){let s=e.folders.slice(0,100),r=Math.ceil(o/100),l=1,u=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} folders (Page ${l} of ${r}).

For large folder structures, consider:
- Using search_keyword to find specific folders
- Using list_vault_files with filter parameter
- Asking for a specific subfolder path

Current results show first ${100} folders only.`;return console.log(`Folder structure truncated: ${t}, ${100}/${o} folders, page ${l}/${r}`),n.onSystem(`Folder Structure Scanned (TRUNCATED: ${100}/${o} folders)`,{name:t,filename:"Folder Tree",files:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r}),{...e,folders:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r,truncationNotice:u}}}if(e?.directories&&Array.isArray(e.directories)){let o=(l,u=0)=>{let f=[],d=u;return l.forEach(p=>{if(f.push({path:p.path,type:"directory",hasChildren:p.children&&p.children.length>0}),d++,p.children&&p.children.length>0){let m=o(p.children,d);f=f.concat(m.items),d=m.total}}),{items:f,total:d}},{items:s,total:r}=o(e.directories);if(r>100){let l=s.slice(0,100),u=Math.ceil(r/100),f=1,d=`

=== DIRECTORY LIST TRUNCATED ===
Showing ${100} of ${r} directories (Page ${f} of ${u}).

For large directory structures, consider:
- Using search_keyword to find specific directories
- Using list_vault_files with filter parameter
- Asking for a specific directory path
- Using get_folder_tree for a simple folder list

Current results show first ${100} directories only.`;return console.log(`Directory list truncated: ${t}, ${100}/${r} directories, page ${f}/${u}`),n.onSystem(`Directory Structure Scanned (TRUNCATED: ${100}/${r} directories)`,{name:t,filename:"Directory List",files:l.map(p=>p.path),truncated:!0,totalItems:r,shownItems:100,currentPage:f,totalPages:u,directoryInfo:l}),{...e,directories:l,truncated:!0,totalItems:r,shownItems:100,currentPage:f,totalPages:u,truncationNotice:d}}}if(e?.results&&Array.isArray(e.results)){let o=e.results.length;if(o>100){let s=e.results.slice(0,100),r=Math.ceil(o/100),l=1,u=`

=== SEARCH RESULTS TRUNCATED ===
Showing ${100} of ${o} results (Page ${l} of ${r}).

For more results, consider:
- Refining your search terms
- Using pagination parameters if available
- Adding filters to narrow the search

Current results show first ${100} matches only.`;return console.log(`Search results truncated: ${t}, ${100}/${o} results, page ${l}/${r}`),{...e,results:s,truncated:!0,totalItems:o,shownItems:100,currentPage:l,totalPages:r,truncationNotice:u}}}if(typeof e=="string"&&e.length>5e4){let o=e.substring(0,5e4),s=`

=== CONTENT TRUNCATED ===
Showing first 50,000 characters of ${e.length} total characters.

For large files, consider:
- Reading specific sections with line numbers
- Searching for specific content within the file
- Using more targeted read operations

Current content shows first 50,000 characters only.`;return console.log(`Content truncated: ${t}, 50000/${e.length} chars`),o+s}return e}async function vu(t,e={maxRetries:2,delay:1e3}){let n;for(let i=0;i<=e.maxRetries;i++)try{return await t()}catch(o){if(n=o,i===e.maxRetries)throw new Error("could not recover!");e.onRetry&&e.onRetry(i+1,n),await new Promise(s=>setTimeout(s,e.delay))}throw n}var fs=class{constructor(e=2){this.maxRetries=e;this.attempts=0}get retryCount(){return this.attempts}get canRetry(){return this.attempts<this.maxRetries}increment(){this.attempts++}reset(){this.attempts=0}get shouldBail(){return this.attempts>=this.maxRetries}};var Su=class{constructor(e){this.callbacks=e;this.session=null;this.sessionPromise=null;this.inputAudioContext=null;this.outputAudioContext=null;this.nextStartTime=0;this.sources=new Set;this.currentInputText="";this.currentOutputText="";this.currentFolder="/";this.currentNote=null;this.retryCounter=new fs(2);this.storedApiKey="";this.storedSettings=null}async start(e,n,i){this.storedApiKey=e,this.storedSettings=n,this.storedInitialState=i,this.retryCounter.reset(),await vu(async()=>{this.retryCounter.increment(),await this.performStart(e,n,i)},{maxRetries:2,delay:1e3,onRetry:(o,s)=>{this.callbacks.onLog(`Connection failed, retrying attempt ${o}/2...`,"info"),this.callbacks.onSystemMessage(`Connection failed, retrying attempt ${o}/2...`)}})}async performStart(e,n,i){try{i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onStatusChange("CONNECTING"),this.callbacks.onLog("Negotiating Uplink...","info");let o=new Wt({apiKey:e});this.inputAudioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),this.outputAudioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),this.nextStartTime=0;let s=await navigator.mediaDevices.getUserMedia({audio:!0}),r=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`,l=`${n.systemInstruction}
${r}

${n.customContext}`.trim();console.log(`System instruction: ${l.length} chars, folder: ${this.currentFolder}, note: ${this.currentNote}`),this.callbacks.onLog(`System instruction size: ${l.length} chars`,"info"),console.log(`Session config: model=gemini-2.5-flash-native-audio-preview-12-2025, tools=${Wi.length}, voice=${n.voiceName}`),this.callbacks.onLog("Initializing Gemini live connection...","info"),this.sessionPromise=o.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",config:{responseModalities:[ns.AUDIO],systemInstruction:l,inputAudioTranscription:{},outputAudioTranscription:{},speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:n.voiceName}}},tools:[{functionDeclarations:Wi}]},callbacks:{onopen:()=>{this.callbacks.onStatusChange("CONNECTED"),this.callbacks.onLog("Uplink synchronized. Voice channel active.","info"),this.sessionPromise&&this.startMicStreaming(s,this.sessionPromise)},onmessage:async u=>{this.sessionPromise&&await this.handleServerMessage(u,this.sessionPromise)},onerror:u=>{console.error(`Gemini connection error: ${u.message} (${u.constructor.name})`),this.callbacks.onLog(`Connection error: ${u.message}`,"error"),this.callbacks.onStatusChange("ERROR"),this.callbacks.onSystemMessage(`Connection Error: ${u.message}`)},onclose:u=>{let f=u.reason||u.code||"Connection dropped";if(u.code!==1e3&&u.code!==1001){console.error(`Voice connection closed: code=${u.code}, reason=${f}`);let p={toolName:"GeminiVoiceAssistant",apiCall:"live.connect",content:`Code: ${u.code}, Reason: ${f}`,timestamp:new Date().toISOString()};this.callbacks.onLog(`CONNECTION DROPPED: ${f}`,"error",void 0,p),this.callbacks.onSystemMessage(`CONNECTION DROPPED: ${f}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:f})}else this.callbacks.onLog(`Uplink Closed: ${f}`,"info");this.stop()}}}),this.session=await this.sessionPromise}catch(o){this.callbacks.onStatusChange("ERROR"),console.error(`Voice interface error: ${o.message}`);let s={toolName:"GeminiVoiceAssistant",apiCall:"start",stack:o.stack,content:o.message,requestSize:o.requestSize,responseSize:o.responseSize,userAgent:navigator.userAgent,audioContextState:this.inputAudioContext?.state,timestamp:new Date().toISOString()};throw this.callbacks.onLog(`Link Initialization Failed: ${o.message}`,"error",void 0,s),this.callbacks.onSystemMessage(`ERROR: ${o.message}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:o.message}),o}}startMicStreaming(e,n){if(!this.inputAudioContext)return;let i=this.inputAudioContext.createMediaStreamSource(e),o=this.inputAudioContext.createScriptProcessor(4096,1,1);o.onaudioprocess=s=>{let r=s.inputBuffer.getChannelData(0),l=0;for(let p=0;p<r.length;p++)l+=r[p]*r[p];let u=Math.sqrt(l/r.length);this.callbacks.onVolume(u);let f=a_(r),d=Vp(new Uint8Array(f.buffer));n.then(p=>{let m=d.length;m>5e4&&console.log(`Audio streaming: ${m} bytes, session active`),p.sendRealtimeInput({media:{data:d,mimeType:"audio/pcm;rate=16000"}})}).catch(p=>{console.error(`Audio streaming error: ${p.message}, data size: ${d.length}`)})},i.connect(o),o.connect(this.inputAudioContext.destination)}async handleServerMessage(e,n){let i=e.serverContent;if(i?.usageMetadata&&this.callbacks.onUsageUpdate(i.usageMetadata),e.serverContent?.inputTranscription?.text&&(this.currentInputText+=e.serverContent.inputTranscription.text,this.callbacks.onTranscription("user",this.currentInputText,!1)),e.serverContent?.outputTranscription&&(this.currentOutputText+=e.serverContent.outputTranscription.text,this.callbacks.onTranscription("model",this.currentOutputText,!1)),e.serverContent?.turnComplete&&(this.currentInputText&&(this.callbacks.onTranscription("user",this.currentInputText,!0),this.currentInputText=""),this.currentOutputText&&(this.callbacks.onTranscription("model",this.currentOutputText,!0),this.currentOutputText="")),e.toolCall)for(let s of e.toolCall.functionCalls){let r=`tool-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,u={generate_image_from_context:"Image Generation",create_file:"File Creation",delete_file:"File Deletion",edit_file:"File Editing",update_file:"File Update",move_file:"File Move",rename_file:"File Rename",create_directory:"Directory Creation",list_directory:"Vault Scan",list_vault_files:"File Explorer",dirlist:"Directory Structure",get_folder_tree:"Folder Tree",read_file:"File Reading",search_keyword:"Keyword Search",search_regexp:"Pattern Search",search_replace_file:"File Search & Replace",search_replace_global:"Global Search & Replace",internet_search:"Web Search",reveal_active_pane:"Active Pane Info",open_folder_in_system:"System File Browser",end_conversation:"Session End",topic_switch:"Topic Switch"}[s.name]||s.name.replace(/_/g," ").toUpperCase(),f=!1;this.callbacks.onSystemMessage(`${u}...`,{id:r,name:s.name,filename:s.args?.filename||(s.name==="internet_search"?"Web":"Registry"),status:"pending"});try{let d=await cs(s.name,s.args,{onLog:(p,m,h)=>this.callbacks.onLog(p,m,h),onSystem:(p,m)=>{this.callbacks.onSystemMessage(p,m),m?.status==="success"&&(f=!0)},onFileState:(p,m)=>{this.currentFolder=p,this.currentNote=Array.isArray(m)?m[m.length-1]:m,this.callbacks.onFileStateChange(p,m)},onStopSession:()=>{this.stop()},onArchiveConversation:this.callbacks.onArchiveConversation},r);n.then(p=>{let m=JSON.stringify({result:d});if(console.log(`Tool response: ${s.name}, size: ${m.length} chars`),!f){let h="";if(s.name==="create_file"||s.name==="create_directory"){let v=s.args?.filename||s.args?.path;if(v&&typeof v=="string"){let T=v.lastIndexOf("/");h=`Created in: ${T===-1?"/":v.substring(0,T+1)}`}}else s.name==="move_file"||s.name==="rename_file"?h=`Moved from: ${s.args?.sourcePath||s.args?.oldPath} to: ${s.args?.targetPath||s.args?.newPath}`:s.name==="update_file"||s.name==="edit_file"?h=`Updated: ${s.args?.filename}`:s.name==="delete_file"?h=`Deleted: ${s.args?.filename}`:d?.text?h=d.text:typeof d=="string"&&(h=d);h&&this.callbacks.onSystemMessage(`${u} Complete`,{id:r,name:s.name,filename:s.args?.filename||(s.name==="internet_search"?"Web":"Registry"),status:"success",newContent:h,groundingChunks:d?.groundingChunks||[],files:d?.files||d?.directories?.map(v=>v.path)||d?.folders,directoryInfo:d?.directoryInfo})}p.sendToolResponse({functionResponses:{id:s.id,name:s.name,response:{result:d}}})})}catch(d){console.error(d),console.error(`Voice interface tool error: ${s.name} - ${d.message}`);let p={toolName:s.name,content:JSON.stringify(s.args,null,2),contentSize:JSON.stringify(s.args).length,stack:d.stack,apiCall:"executeCommand",timestamp:new Date().toISOString(),currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${s.name}: ${d.message}`,"error",void 0,p),this.callbacks.onSystemMessage(`ERROR in ${s.name}: ${d.message}`,{id:r,name:s.name,filename:s.args?.filename||(s.name==="internet_search"?"Web":"Registry"),status:"error",error:d.message}),n.then(m=>{console.log(`Tool error response: ${s.name} - ${d.message}`),m.sendToolResponse({functionResponses:{id:s.id,name:s.name,response:{error:d.message}}})})}}let o=e.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;if(o&&this.outputAudioContext){let s=await r_(s_(o),this.outputAudioContext,24e3,1);this.nextStartTime=Math.max(this.nextStartTime,this.outputAudioContext.currentTime);let r=this.outputAudioContext.createBufferSource();r.buffer=s,r.connect(this.outputAudioContext.destination),r.onended=()=>this.sources.delete(r),r.start(this.nextStartTime),this.nextStartTime+=s.duration,this.sources.add(r)}e.serverContent?.interrupted&&(this.sources.forEach(s=>{try{s.stop()}catch{}}),this.sources.clear(),this.nextStartTime=0,this.callbacks.onInterrupted())}stop(){if(this.session){try{this.session.close()}catch{}this.session=null}this.sessionPromise=null,this.inputAudioContext&&(this.inputAudioContext.close(),this.inputAudioContext=null),this.outputAudioContext&&(this.outputAudioContext.close(),this.outputAudioContext=null),this.sources.forEach(e=>{try{e.stop()}catch{}}),this.sources.clear(),this.currentInputText="",this.currentOutputText="",this.callbacks.onStatusChange("DISCONNECTED"),this.callbacks.onVolume(0)}sendText(e){if(this.sessionPromise){let n=Vp(new TextEncoder().encode(e));console.log(`Text input: ${e.length} chars, encoded: ${n.length} bytes`),this.callbacks.onLog(`Sending text input: ${e.length} chars`,"info"),this.sessionPromise.then(i=>{try{i.sendRealtimeInput({media:{data:n,mimeType:"text/plain"}}),console.log("Text input sent successfully")}catch(o){console.error(`Text input error: ${o.message}, text length: ${e.length}`),this.callbacks.onLog(`Text input failed: ${o.message}`,"error")}}).catch(i=>{console.error(`Session promise error (text): ${i.message}`)})}}};var Tu=class{constructor(e){this.callbacks=e;this.ai=null;this.chatHistory=[];this.currentFolder="/";this.currentNote=null;this.systemInstruction="";this.model="gemini-2.0-flash";this.retryCounter=new fs(2)}async initialize(e,n,i){i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onLog("Initializing text interface...","info"),this.ai=new Wt({apiKey:e});let o=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`;this.systemInstruction=`${n.systemInstruction}
${o}

${n.customContext}`.trim(),this.callbacks.onLog("Text interface ready.","info")}async sendMessage(e){if(!this.ai){this.callbacks.onLog("Text interface not initialized","error");return}this.chatHistory.push({role:"user",parts:[{text:e}]}),this.callbacks.onTranscription("user",e,!0),await vu(async()=>{this.retryCounter.increment(),await this.processConversation()},{maxRetries:2,delay:1e3,onRetry:(n,i)=>{this.callbacks.onLog(`Text API failed, retrying attempt ${n}/2...`,"info"),this.callbacks.onSystemMessage(`Text API failed, retrying attempt ${n}/2...`)}})}async processConversation(){if(!this.ai)return;this.callbacks.onTranscription("model","...",!1);let e=await this.ai.models.generateContent({model:this.model,contents:this.chatHistory,config:{systemInstruction:this.systemInstruction,tools:[{functionDeclarations:Wi}]}});e.usageMetadata&&this.callbacks.onUsageUpdate({promptTokenCount:e.usageMetadata.promptTokenCount,candidatesTokenCount:e.usageMetadata.candidatesTokenCount,totalTokenCount:e.usageMetadata.totalTokenCount});let n=e.candidates?.[0];if(!n?.content){this.callbacks.onTranscription("model","No response received.",!0);return}let i=n.content.parts?.filter(o=>!!o.functionCall);if(i&&i.length>0){this.chatHistory.push(n.content);let o=[];for(let s of i){let r=s.functionCall;try{let l=await cs(r.name,r.args,{onLog:(u,f,d)=>this.callbacks.onLog(u,f,d),onSystem:(u,f)=>this.callbacks.onSystemMessage(u,f),onFileState:(u,f)=>{this.currentFolder=u,this.currentNote=Array.isArray(f)?f[f.length-1]:f,this.callbacks.onFileStateChange(u,f)},onStopSession:()=>{this.callbacks.onLog("Conversation ended via tool call","info")},onArchiveConversation:this.callbacks.onArchiveConversation});o.push({functionResponse:{name:r.name,response:{result:l}}})}catch(l){console.error(`Text interface tool error: ${r.name} - ${l.message}`);let u={toolName:r.name,content:JSON.stringify(r.args,null,2),contentSize:JSON.stringify(r.args).length,stack:l.stack,apiCall:"executeCommand",timestamp:new Date().toISOString(),model:this.model,currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${r.name}: ${l.message}`,"error",void 0,u),this.callbacks.onSystemMessage(`ERROR in ${r.name}: ${l.message}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:l.message}),o.push({functionResponse:{name:r.name,response:{error:l.message}}})}}this.chatHistory.push({role:"user",parts:o}),await this.processConversation()}else{let s=n.content.parts?.filter(r=>r.text)?.map(r=>r.text).join("")||"";this.chatHistory.push(n.content),this.callbacks.onTranscription("model",s,!0)}}setApiKey(e){this.ai=new Wt({apiKey:e})}clearHistory(){this.chatHistory=[]}getHistory(){return this.chatHistory}async generateSummary(e){if(!this.ai)throw new Error("Text interface not initialized");try{return(await this.ai.models.generateContent({model:this.model,contents:[{role:"user",parts:[{text:`Please provide a concise summary (2-3 sentences) of the following conversation:

${e}`}]}]})).candidates?.[0]?.content?.parts?.filter(s=>s.text)?.map(s=>s.text).join("")||""}catch(n){throw new Error(`Failed to generate summary: ${n.message}`)}}};var oD=[Bp,$p,Yp,Jp,Kp,Xp,Qp,Zp,Wp,jp,em,tm,nm,im,om,am,dm,lm].join(`

`),zn=`You are an advanced voice assistant (Hermes) with file system access and internet capabilities.
Vault structure: Flat markdown files.

CORE RESPONSE RULES:
1. NO CONFIRMATIONS: Do NOT say "Done.", "Finished.", or any variation of completion confirmation after a tool call. The UI handles state visualization.
2. INFORMATIONAL TOOLS: When calling "read_file", "list_directory", "list_vault_files", or "internet_search", remain silent unless the user asked a specific question about the content.
3. BATCH ACTIONS: If performing multiple modifications, wait until all are finished, then provide a single concise summary.
4. NO "DONE" ON TOPICS: Do not say "Done" or confirm when switching topics. Just proceed with the new context.
5. Conciseness is mandatory. Avoid conversational filler.
6. LARGE VAULTS: If the vault seems large, prefer "list_vault_files" with a limit or filter over "list_directory" to stay within token limits.
7. WEB SEARCH RESTRICTION: Only use "internet_search" if the user specifically asks about it or explicitly requests web search.
8. FILE NAMING: Do not ever read out .md at the end of files. Omit full path, just read out the file names, unless it's relevant!

IMPORTANT PATH CONVENTION:
ALL FILE PATHS MUST BE RELATIVE TO VAULT ROOT. Examples:
- "notes.md" (root level file)
- "projects/ideas.md" (file in projects folder)
- "archive/2024/report.md" (nested folder structure)

WIKI LINK CONVENTION:
DEFAULT TO WIKI LINKS EVERYWHERE WITHOUT PATH. 
Insert images using a Wikilink with only the filename.
- Use [[notes]] instead of [notes.md](notes.md)
- Never use "file:" prefix or full file extensions in wiki links
- use ![[image.png|title]] for images!

AVAILABLE TOOL CAPABILITIES:
${oD}`;Ce();var vm=async(t,e,n,i)=>{let o=t;typeof t=="object"&&t!==null&&(o=t.summary||t.title||JSON.stringify(t)),o=String(o||"Conversation");let r=(C=>{let N=C.split(" ").slice(0,6).join(" ");return N.length>50?N.substring(0,47)+"...":N})(o),l=new Date,u=l.toISOString().replace(/[:T]/g,"-").split(".")[0],f=r.toLowerCase().replace(/[^a-z0-9]/g,"-").substring(0,40),d=n||"chat-history",p=`${d}/chat-history-${u}-${f}.md`,m=e.filter(C=>!(C.id==="welcome-init"||C.role==="model"&&C.text.trim().toLowerCase().replace(/\./g,"")==="done")),h=m.map(C=>C.timestamp).filter(C=>C>0),v=h.length>0?new Date(h[0]).toISOString():l.toISOString(),T=h.length>0?new Date(h[h.length-1]).toISOString():l.toISOString(),E=h.length>1?Math.round((h[h.length-1]-h[0])/1e3):0,g=m.map(C=>C.text.toLowerCase()).join(" "),y=new Set;(g.includes("file")||g.includes("edit")||g.includes("create"))&&y.add("file-management"),(g.includes("search")||g.includes("find")||g.includes("look"))&&y.add("search"),(g.includes("image")||g.includes("generate")||g.includes("create"))&&y.add("creation"),(g.includes("rename")||g.includes("move")||g.includes("organize"))&&y.add("organization"),(g.includes("help")||g.includes("how")||g.includes("question"))&&y.add("help"),E>300&&y.add("long-conversation"),E<60&&y.add("quick-chat");let S=Array.from(y).join(", "),_=[],A=[],I=null;m.forEach(C=>{I===null||C.role!==I?(A.length>0&&_.push(A),A=[C],I=C.role):A.push(C)}),A.length>0&&_.push(A);let x=_.map((C,N)=>{let F=C[0],me="",se=C.map(Mt=>Mt.text).join(" ").trim(),Ye=Mt=>Mt.replace(/(?:file:\s*|)([a-zA-Z0-9_\-\/]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))/g,"[[$1]]").replace(/"([a-zA-Z0-9_\-\/]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))"/g,"[[$1]]").replace(/`([a-zA-Z0-9_\-\/]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))`/g,"[[$1]]");return F.role==="user"?me=Ye(se):F.role==="model"?me=`> ${Ye(se).split(`
`).join(`
> `)}`:F.role==="system"&&(me=C.map(ue=>{if(ue.toolData?.name==="rename_file")return`**RENAME** ~~${ue.toolData.oldContent}~~ -> [[${ue.toolData.newContent}]]`;if(ue.toolData?.name==="topic_switch")return`## ${ue.toolData.newContent}`;{let He=`\`\`\`system
${ue.text}
\`\`\``;if(ue.toolData){let on=`[[${ue.toolData.filename}]]`;ue.toolData.oldContent!==void 0&&ue.toolData.newContent!==void 0&&ue.toolData.oldContent!==ue.toolData.newContent?ue.toolData.oldContent&&ue.toolData.oldContent.trim()!==""&&!ue.toolData.newContent.includes(ue.toolData.oldContent)?He+=`

${on}

--- Removed
\`\`\`markdown
${ue.toolData.oldContent||"(empty)"}
\`\`\`

+++ Added
\`\`\`markdown
${ue.toolData.newContent||"(empty)"}
\`\`\``:He+=`

${on}
\`\`\`markdown
${ue.toolData.newContent}
\`\`\``:(ue.toolData.name==="read_file"||ue.toolData.name==="create_file")&&(He+=`

${on}
\`\`\`markdown
${ue.toolData.newContent}
\`\`\``)}return He}}).join(`

`)),me}).filter(C=>C.trim()!=="").join(`

`),M="";if(i&&m.length>0)try{let C=m.filter(N=>N.role==="user"||N.role==="model").map(N=>`${N.role}: ${N.text}`).join(`
`);C.trim()&&(M=await i.generateSummary(C))}catch(C){console.warn("Failed to generate AI summary:",C.message)}try{let{createFile:C,createDirectory:N}=await Promise.resolve().then(()=>(Pe(),U0));try{await N(d)}catch(me){if(!me.message.includes("already exists"))throw me}let F=`---
title: ${r}
date: ${v}
end_date: ${T}
duration: ${E}
tags: [${S}]
format: hermes-chat-archive
summary: ${o.replace(/"/g,'\\"')}
${M?`ai_summary: ${M.replace(/"/g,'\\"')}`:""}
---

`;return await C(p,`${F}${x}`),`Segment archived to ${p}`}catch(C){throw new Error(`Persistence Failure: ${C.message}`)}};Ce();var ds=$(ie()),aD=({onOpenSettings:t,className:e=""})=>(0,ds.jsx)("button",{onClick:()=>{if(ht())try{let{app:i}=window;i&&i.setting&&(i.setting.open(),i.setting.openTabById("hermes-voice-assistant"))}catch(i){console.warn("Failed to open Obsidian settings:",i),t()}else t()},className:`p-2 hermes-text-muted hermes-hover:text-normal transition-all ${e}`,title:"System Settings",children:(0,ds.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,ds.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,ds.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),h_=aD;var tt=$(ie()),lD=({status:t,showLogs:e,onToggleLogs:n,onOpenSettings:i,isListening:o,onStopSession:s})=>(0,tt.jsxs)("header",{className:`relative flex items-center justify-between px-6 py-2 hermes-border-b shrink-0 z-50 ${o?"hermes-header-bg-listening":"hermes-header-bg"}`,children:[(0,tt.jsx)("div",{className:"flex items-center space-x-6",children:(0,tt.jsx)("div",{className:"flex flex-col",children:(0,tt.jsx)("h1",{className:"text-lg font-semibold hermes-text-normal",children:"Hermes"})})}),o&&(0,tt.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center",children:(0,tt.jsx)("button",{onClick:s,className:"w-[52px] h-[52px] flex items-center justify-center bg-green-600 text-white rounded-full transition-all hover:bg-green-700 active:scale-95 shadow-lg shadow-green-600/50",title:"Stop Listening",children:(0,tt.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,tt.jsx)("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),(0,tt.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,tt.jsx)("path",{d:"M12 7v4"}),(0,tt.jsx)("line",{x1:"8",y1:"16",x2:"8",y2:"16"}),(0,tt.jsx)("line",{x1:"16",y1:"16",x2:"16",y2:"16"})]})})}),(0,tt.jsx)("div",{className:"flex items-center space-x-1",children:(0,tt.jsx)(h_,{onOpenSettings:i})})]}),g_=lD;var O=$(ie()),uD=["Default","Professional","Friendly","Creative","Technical"],cD=({isOpen:t,onClose:e,voiceName:n,setVoiceName:i,customContext:o,setCustomContext:s,systemInstruction:r,setSystemInstruction:l,manualApiKey:u,setManualApiKey:f,serperApiKey:d,setSerperApiKey:p,onUpdateApiKey:m})=>t?(0,O.jsx)("div",{className:"fixed inset-0 z-[200] hermes-bg-tertiary/95 backdrop-blur-md flex items-center justify-center p-8 animate-in fade-in duration-300",children:(0,O.jsxs)("div",{className:"max-w-3xl w-full space-y-8 hermes-glass p-12 rounded-3xl shadow-2xl overflow-y-auto max-h-[90vh]",children:[(0,O.jsxs)("div",{className:"flex justify-between items-start hermes-border-b pb-8",children:[(0,O.jsxs)("div",{children:[(0,O.jsx)("h2",{className:"text-2xl font-semibold mb-2 hermes-text-normal",children:"Settings"}),(0,O.jsx)("p",{className:"hermes-text-muted text-sm",children:"Hermes Voice Assistant"})]}),(0,O.jsx)("button",{onClick:e,className:"p-4 hermes-hover:bg-secondary/5 rounded-full transition-colors group",children:(0,O.jsx)("svg",{className:"w-8 h-8 hermes-text-muted group-hover:hermes-text-normal transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,O.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,O.jsxs)("div",{className:"grid gap-8",children:[(0,O.jsxs)("div",{className:"space-y-4",children:[(0,O.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Voice Persona"}),(0,O.jsx)("div",{className:"grid grid-cols-5 gap-2",children:uD.map(h=>(0,O.jsx)("button",{onClick:()=>i(h),className:`px-4 py-2 rounded-lg border text-sm transition-all ${n===h?"hermes-interactive-bg border-interactive hermes-text-normal":"hermes-bg-secondary/5 hermes-border/10 hermes-text-muted hermes-hover:border/20"}`,children:h},h))})]}),(0,O.jsxs)("div",{className:"space-y-4",children:[(0,O.jsx)("div",{className:"flex items-center justify-between",children:(0,O.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"System Instructions"})}),(0,O.jsx)("textarea",{value:r,onChange:h=>l(h.target.value),placeholder:"Core logic instructions...",className:"w-full h-32 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,O.jsxs)("div",{className:"space-y-4",children:[(0,O.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Custom Context"}),(0,O.jsx)("textarea",{value:o,onChange:h=>s(h.target.value),placeholder:"Define specific behaviors or rules for Hermes...",className:"w-full h-20 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,O.jsxs)("div",{className:"space-y-4 pt-8 hermes-border-t",children:[(0,O.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"API Authentication"}),(0,O.jsxs)("div",{className:"space-y-4",children:[(0,O.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,O.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Manual API Key"}),(0,O.jsx)("input",{type:"password",value:u,onChange:h=>f(h.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"})]}),(0,O.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,O.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Serper API Key (for Image Search)"}),(0,O.jsx)("input",{type:"password",value:d,onChange:h=>p(h.target.value),placeholder:"Enter your Serper API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"}),(0,O.jsxs)("p",{className:"text-xs hermes-text-faint",children:["Get 2,500 free credits at ",(0,O.jsx)("a",{href:"https://serper.dev/",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline",children:"serper.dev"})]})]}),(0,O.jsxs)("div",{className:"relative py-2",children:[(0,O.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,O.jsx)("div",{className:"w-full hermes-border-t"})}),(0,O.jsx)("div",{className:"relative flex justify-center text-sm font-medium hermes-text-faint",children:(0,O.jsx)("span",{className:"hermes-bg-secondary px-2",children:"Or"})})]}),(0,O.jsxs)("button",{onClick:m,className:"w-full flex items-center justify-center space-x-4 px-8 py-4 hermes-interactive-bg hermes-text-normal rounded-lg font-medium hermes-hover:interactive-bg transition-all",children:[(0,O.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,O.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),(0,O.jsx)("span",{children:"Google AI Studio Auth"})]})]}),(0,O.jsxs)("p",{className:"text-sm hermes-text-muted mt-4",children:["API keys are handled via AI Studio provider or manual entry.",(0,O.jsx)("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline ml-1",children:"Documentation"})]})]})]})]})}):null,y_=cD;var Ai=$(Bt());var Ci=$(Bt());var to=$(Bt());function Em(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var eo=Em();function A_(t){eo=t}var Pr={exec:()=>null};function j(t,e=""){let n=typeof t=="string"?t:t.source,i={replace:(o,s)=>{let r=typeof s=="string"?s:s.source;return r=r.replace(at.caret,"$1"),n=n.replace(o,r),i},getRegex:()=>new RegExp(n,e)};return i}var fD=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),at={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},dD=/^(?:[ \t]*(?:\n|$))+/,pD=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,mD=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Lr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,hD=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Cm=/(?:[*+-]|\d{1,9}[.)])/,x_=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,w_=j(x_).replace(/bull/g,Cm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),gD=j(x_).replace(/bull/g,Cm).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Am=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,yD=/^[^\n]+/,xm=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,vD=j(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",xm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),SD=j(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Cm).getRegex(),bu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,TD=j("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",wm).replace("tag",bu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),b_=j(Am).replace("hr",Lr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bu).getRegex(),_D=j(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",b_).getRegex(),bm={blockquote:_D,code:pD,def:vD,fences:mD,heading:hD,hr:Lr,html:TD,lheading:w_,list:SD,newline:dD,paragraph:b_,table:Pr,text:yD},v_=j("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Lr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bu).getRegex(),ED={...bm,lheading:gD,table:v_,paragraph:j(Am).replace("hr",Lr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",v_).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bu).getRegex()},CD={...bm,html:j(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",wm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Pr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:j(Am).replace("hr",Lr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",w_).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},AD=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,xD=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,R_=/^( {2,}|\\)\n(?!\s*$)/,wD=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ru=/[\p{P}\p{S}]/u,Rm=/[\s\p{P}\p{S}]/u,N_=/[^\s\p{P}\p{S}]/u,bD=j(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Rm).getRegex(),I_=/(?!~)[\p{P}\p{S}]/u,RD=/(?!~)[\s\p{P}\p{S}]/u,ND=/(?:[^\s\p{P}\p{S}]|~)/u,ID=j(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",fD?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),M_=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,MD=j(M_,"u").replace(/punct/g,Ru).getRegex(),DD=j(M_,"u").replace(/punct/g,I_).getRegex(),D_="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",kD=j(D_,"gu").replace(/notPunctSpace/g,N_).replace(/punctSpace/g,Rm).replace(/punct/g,Ru).getRegex(),UD=j(D_,"gu").replace(/notPunctSpace/g,ND).replace(/punctSpace/g,RD).replace(/punct/g,I_).getRegex(),PD=j("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,N_).replace(/punctSpace/g,Rm).replace(/punct/g,Ru).getRegex(),LD=j(/\\(punct)/,"gu").replace(/punct/g,Ru).getRegex(),HD=j(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),GD=j(wm).replace("(?:-->|$)","-->").getRegex(),qD=j("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",GD).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Au=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,OD=j(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Au).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),k_=j(/^!?\[(label)\]\[(ref)\]/).replace("label",Au).replace("ref",xm).getRegex(),U_=j(/^!?\[(ref)\](?:\[\])?/).replace("ref",xm).getRegex(),FD=j("reflink|nolink(?!\\()","g").replace("reflink",k_).replace("nolink",U_).getRegex(),S_=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Nm={_backpedal:Pr,anyPunctuation:LD,autolink:HD,blockSkip:ID,br:R_,code:xD,del:Pr,emStrongLDelim:MD,emStrongRDelimAst:kD,emStrongRDelimUnd:PD,escape:AD,link:OD,nolink:U_,punctuation:bD,reflink:k_,reflinkSearch:FD,tag:qD,text:wD,url:Pr},zD={...Nm,link:j(/^!?\[(label)\]\((.*?)\)/).replace("label",Au).getRegex(),reflink:j(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Au).getRegex()},Sm={...Nm,emStrongRDelimAst:UD,emStrongLDelim:DD,url:j(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",S_).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:j(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",S_).getRegex()},VD={...Sm,br:j(R_).replace("{2,}","*").getRegex(),text:j(Sm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Eu={normal:bm,gfm:ED,pedantic:CD},Dr={normal:Nm,gfm:Sm,breaks:VD,pedantic:zD},BD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},T_=t=>BD[t];function Vn(t,e){if(e){if(at.escapeTest.test(t))return t.replace(at.escapeReplace,T_)}else if(at.escapeTestNoEncode.test(t))return t.replace(at.escapeReplaceNoEncode,T_);return t}function __(t){try{t=encodeURI(t).replace(at.percentDecode,"%")}catch{return null}return t}function E_(t,e){let n=t.replace(at.findPipe,(s,r,l)=>{let u=!1,f=r;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),i=n.split(at.splitPipe),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(at.slashPipe,"|");return i}function kr(t,e,n){let i=t.length;if(i===0)return"";let o=0;for(;o<i;){let s=t.charAt(i-o-1);if(s===e&&!n)o++;else if(s!==e&&n)o++;else break}return t.slice(0,i-o)}function $D(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return n>0?-2:-1}function C_(t,e,n,i,o){let s=e.href,r=e.title||null,l=t[1].replace(o.other.outputLinkReplace,"$1");i.state.inLink=!0;let u={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:r,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,u}function YD(t,e,n){let i=t.match(n.other.indentCodeCompensation);if(i===null)return e;let o=i[1];return e.split(`
`).map(s=>{let r=s.match(n.other.beginningSpace);if(r===null)return s;let[l]=r;return l.length>=o.length?s.slice(o.length):s}).join(`
`)}var xu=class{options;rules;lexer;constructor(t){this.options=t||eo}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:kr(n,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let n=e[0],i=YD(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){let i=kr(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:kr(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let n=kr(e[0],`
`).split(`
`),i="",o="",s=[];for(;n.length>0;){let r=!1,l=[],u;for(u=0;u<n.length;u++)if(this.rules.other.blockquoteStart.test(n[u]))l.push(n[u]),r=!0;else if(!r)l.push(n[u]);else break;n=n.slice(u);let f=l.join(`
`),d=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,o=o?`${o}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=p,n.length===0)break;let m=s.at(-1);if(m?.type==="code")break;if(m?.type==="blockquote"){let h=m,v=h.raw+`
`+n.join(`
`),T=this.blockquote(v);s[s.length-1]=T,i=i.substring(0,i.length-h.raw.length)+T.raw,o=o.substring(0,o.length-h.text.length)+T.text;break}else if(m?.type==="list"){let h=m,v=h.raw+`
`+n.join(`
`),T=this.list(v);s[s.length-1]=T,i=i.substring(0,i.length-m.raw.length)+T.raw,o=o.substring(0,o.length-h.raw.length)+T.raw,n=v.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:o}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),i=n.length>1,o={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let s=this.rules.other.listItemRegex(n),r=!1;for(;t;){let u=!1,f="",d="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;f=e[0],t=t.substring(f.length);let p=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,T=>" ".repeat(3*T.length)),m=t.split(`
`,1)[0],h=!p.trim(),v=0;if(this.options.pedantic?(v=2,d=p.trimStart()):h?v=e[1].length+1:(v=e[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,d=p.slice(v),v+=e[1].length),h&&this.rules.other.blankLine.test(m)&&(f+=m+`
`,t=t.substring(m.length+1),u=!0),!u){let T=this.rules.other.nextBulletRegex(v),E=this.rules.other.hrRegex(v),g=this.rules.other.fencesBeginRegex(v),y=this.rules.other.headingBeginRegex(v),S=this.rules.other.htmlBeginRegex(v);for(;t;){let _=t.split(`
`,1)[0],A;if(m=_,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),A=m):A=m.replace(this.rules.other.tabCharGlobal,"    "),g.test(m)||y.test(m)||S.test(m)||T.test(m)||E.test(m))break;if(A.search(this.rules.other.nonSpaceChar)>=v||!m.trim())d+=`
`+A.slice(v);else{if(h||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||g.test(p)||y.test(p)||E.test(p))break;d+=`
`+m}!h&&!m.trim()&&(h=!0),f+=_+`
`,t=t.substring(_.length+1),p=A.slice(v)}}o.loose||(r?o.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(r=!0)),o.items.push({type:"list_item",raw:f,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),o.raw+=f}let l=o.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let u of o.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){if(u.text=u.text.replace(this.rules.other.listReplaceTask,""),u.tokens[0]?.type==="text"||u.tokens[0]?.type==="paragraph"){u.tokens[0].raw=u.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),u.tokens[0].text=u.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let f=this.rules.other.listTaskCheckbox.exec(u.raw);if(f){let d={type:"checkbox",raw:f[0]+" ",checked:f[0]!=="[ ]"};u.checked=d.checked,o.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=d.raw+u.tokens[0].raw,u.tokens[0].text=d.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(d)):u.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):u.tokens.unshift(d)}}if(!o.loose){let f=u.tokens.filter(p=>p.type==="space"),d=f.length>0&&f.some(p=>this.rules.other.anyLine.test(p.raw));o.loose=d}}if(o.loose)for(let u of o.items){u.loose=!0;for(let f of u.tokens)f.type==="text"&&(f.type="paragraph")}return o}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:i,title:o}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=E_(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let r of i)this.rules.other.tableAlignRight.test(r)?s.align.push("right"):this.rules.other.tableAlignCenter.test(r)?s.align.push("center"):this.rules.other.tableAlignLeft.test(r)?s.align.push("left"):s.align.push(null);for(let r=0;r<n.length;r++)s.header.push({text:n[r],tokens:this.lexer.inline(n[r]),header:!0,align:s.align[r]});for(let r of o)s.rows.push(E_(r,s.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[u]})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=kr(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=$D(e[2],"()");if(s===-2)return;if(s>-1){let r=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,r).trim(),e[3]=""}}let i=e[2],o="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],o=s[3])}else o=e[3]?e[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),C_(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=e[i.toLowerCase()];if(!o){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return C_(n,o,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...i[0]].length-1,s,r,l=o,u=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,e=e.slice(-1*t.length+o);(i=f.exec(e))!=null;){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(r=[...s].length,i[3]||i[4]){l+=r;continue}else if((i[5]||i[6])&&o%3&&!((o+r)%3)){u+=r;continue}if(l-=r,l>0)continue;r=Math.min(r,r+l+u);let d=[...i[0]][0].length,p=t.slice(0,o+i.index+d+r);if(Math.min(o,r)%2){let h=p.slice(1,-1);return{type:"em",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}let m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let n,i;return e[2]==="@"?(n=e[1],i="mailto:"+n):(n=e[1],i=n),{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,i;if(e[2]==="@")n=e[0],i="mailto:"+n;else{let o;do o=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(o!==e[0]);n=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},en=class Tm{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||eo,this.options.tokenizer=this.options.tokenizer||new xu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:at,block:Eu.normal,inline:Dr.normal};this.options.pedantic?(n.block=Eu.pedantic,n.inline=Dr.pedantic):this.options.gfm&&(n.block=Eu.gfm,this.options.breaks?n.inline=Dr.breaks:n.inline=Dr.gfm),this.tokenizer.rules=n}static get rules(){return{block:Eu,inline:Dr}}static lex(e,n){return new Tm(n).lex(e)}static lexInline(e,n){return new Tm(n).inlineTokens(e)}lex(e){e=e.replace(at.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],i=!1){for(this.options.pedantic&&(e=e.replace(at.tabCharGlobal,"    ").replace(at.spaceLine,""));e;){let o;if(this.options.extensions?.block?.some(r=>(o=r.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);let r=n.at(-1);o.raw.length===1&&r!==void 0?r.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);let r=n.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+=(r.raw.endsWith(`
`)?"":`
`)+o.raw,r.text+=`
`+o.text,this.inlineQueue.at(-1).src=r.text):n.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);let r=n.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+=(r.raw.endsWith(`
`)?"":`
`)+o.raw,r.text+=`
`+o.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),n.push(o);continue}let s=e;if(this.options.extensions?.startBlock){let r=1/0,l=e.slice(1),u;this.options.extensions.startBlock.forEach(f=>{u=f.call({lexer:this},l),typeof u=="number"&&u>=0&&(r=Math.min(r,u))}),r<1/0&&r>=0&&(s=e.substring(0,r+1))}if(this.state.top&&(o=this.tokenizer.paragraph(s))){let r=n.at(-1);i&&r?.type==="paragraph"?(r.raw+=(r.raw.endsWith(`
`)?"":`
`)+o.raw,r.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):n.push(o),i=s.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);let r=n.at(-1);r?.type==="text"?(r.raw+=(r.raw.endsWith(`
`)?"":`
`)+o.raw,r.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):n.push(o);continue}if(e){let r="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(r);break}else throw new Error(r)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i=e,o=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,o.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)s=o[2]?o[2].length:0,i=i.slice(0,o.index+s)+"["+"a".repeat(o[0].length-s-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let r=!1,l="";for(;e;){r||(l=""),r=!1;let u;if(this.options.extensions?.inline?.some(d=>(u=d.call({lexer:this},e,n))?(e=e.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);let d=n.at(-1);u.type==="text"&&d?.type==="text"?(d.raw+=u.raw,d.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(e,i,l)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),n.push(u);continue}let f=e;if(this.options.extensions?.startInline){let d=1/0,p=e.slice(1),m;this.options.extensions.startInline.forEach(h=>{m=h.call({lexer:this},p),typeof m=="number"&&m>=0&&(d=Math.min(d,m))}),d<1/0&&d>=0&&(f=e.substring(0,d+1))}if(u=this.tokenizer.inlineText(f)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(l=u.raw.slice(-1)),r=!0;let d=n.at(-1);d?.type==="text"?(d.raw+=u.raw,d.text+=u.text):n.push(u);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}},wu=class{options;parser;constructor(t){this.options=t||eo}space(t){return""}code({text:t,lang:e,escaped:n}){let i=(e||"").match(at.notSpaceStart)?.[0],o=t.replace(at.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Vn(i)+'">'+(n?o:Vn(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:Vn(o,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,i="";for(let r=0;r<t.items.length;r++){let l=t.items[r];i+=this.listitem(l)}let o=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+o+s+`>
`+i+"</"+o+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let o=0;o<t.header.length;o++)n+=this.tablecell(t.header[o]);e+=this.tablerow({text:n});let i="";for(let o=0;o<t.rows.length;o++){let s=t.rows[o];n="";for(let r=0;r<s.length;r++)n+=this.tablecell(s[r]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+i+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Vn(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let i=this.parser.parseInline(n),o=__(t);if(o===null)return i;t=o;let s='<a href="'+t+'"';return e&&(s+=' title="'+Vn(e)+'"'),s+=">"+i+"</a>",s}image({href:t,title:e,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let o=__(t);if(o===null)return Vn(n);t=o;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${Vn(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Vn(t.text)}},Im=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},tn=class _m{options;renderer;textRenderer;constructor(e){this.options=e||eo,this.options.renderer=this.options.renderer||new wu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Im}static parse(e,n){return new _m(n).parse(e)}static parseInline(e,n){return new _m(n).parseInline(e)}parse(e){let n="";for(let i=0;i<e.length;i++){let o=e[i];if(this.options.extensions?.renderers?.[o.type]){let r=o,l=this.options.extensions.renderers[r.type].call({parser:this},r);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(r.type)){n+=l||"";continue}}let s=o;switch(s.type){case"space":{n+=this.renderer.space(s);break}case"hr":{n+=this.renderer.hr(s);break}case"heading":{n+=this.renderer.heading(s);break}case"code":{n+=this.renderer.code(s);break}case"table":{n+=this.renderer.table(s);break}case"blockquote":{n+=this.renderer.blockquote(s);break}case"list":{n+=this.renderer.list(s);break}case"checkbox":{n+=this.renderer.checkbox(s);break}case"html":{n+=this.renderer.html(s);break}case"def":{n+=this.renderer.def(s);break}case"paragraph":{n+=this.renderer.paragraph(s);break}case"text":{n+=this.renderer.text(s);break}default:{let r='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return n}parseInline(e,n=this.renderer){let i="";for(let o=0;o<e.length;o++){let s=e[o];if(this.options.extensions?.renderers?.[s.type]){let l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=l||"";continue}}let r=s;switch(r.type){case"escape":{i+=n.text(r);break}case"html":{i+=n.html(r);break}case"link":{i+=n.link(r);break}case"image":{i+=n.image(r);break}case"checkbox":{i+=n.checkbox(r);break}case"strong":{i+=n.strong(r);break}case"em":{i+=n.em(r);break}case"codespan":{i+=n.codespan(r);break}case"br":{i+=n.br(r);break}case"del":{i+=n.del(r);break}case"text":{i+=n.text(r);break}default:{let l='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},Cu,Ur=(Cu=class{options;block;constructor(t){this.options=t||eo}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?en.lex:en.lexInline}provideParser(){return this.block?tn.parse:tn.parseInline}},Hu(Cu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Hu(Cu,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),Cu),JD=class{defaults=Em();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=tn;Renderer=wu;TextRenderer=Im;Lexer=en;Tokenizer=xu;Hooks=Ur;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{let o=i;for(let s of o.header)n=n.concat(this.walkTokens(s.tokens,e));for(let s of o.rows)for(let r of s)n=n.concat(this.walkTokens(r.tokens,e));break}case"list":{let o=i;n=n.concat(this.walkTokens(o.items,e));break}default:{let o=i;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{let r=o[s].flat(1/0);n=n.concat(this.walkTokens(r,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let s=e.renderers[o.name];s?e.renderers[o.name]=function(...r){let l=o.renderer.apply(this,r);return l===!1&&(l=s.apply(this,r)),l}:e.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[o.level];s?s.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),i.extensions=e),n.renderer){let o=this.defaults.renderer||new wu(this.defaults);for(let s in n.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let r=s,l=n.renderer[r],u=o[r];o[r]=(...f)=>{let d=l.apply(o,f);return d===!1&&(d=u.apply(o,f)),d||""}}i.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new xu(this.defaults);for(let s in n.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let r=s,l=n.tokenizer[r],u=o[r];o[r]=(...f)=>{let d=l.apply(o,f);return d===!1&&(d=u.apply(o,f)),d}}i.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new Ur;for(let s in n.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let r=s,l=n.hooks[r],u=o[r];Ur.passThroughHooks.has(s)?o[r]=f=>{if(this.defaults.async&&Ur.passThroughHooksRespectAsync.has(s))return(async()=>{let p=await l.call(o,f);return u.call(o,p)})();let d=l.call(o,f);return u.call(o,d)}:o[r]=(...f)=>{if(this.defaults.async)return(async()=>{let p=await l.apply(o,f);return p===!1&&(p=await u.apply(o,f)),p})();let d=l.apply(o,f);return d===!1&&(d=u.apply(o,f)),d}}i.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,s=n.walkTokens;i.walkTokens=function(r){let l=[];return l.push(s.call(this,r)),o&&(l=l.concat(o.call(this,r))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return en.lex(t,e??this.defaults)}parser(t,e){return tn.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let i={...n},o={...this.defaults,...i},s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=t),o.async)return(async()=>{let r=o.hooks?await o.hooks.preprocess(e):e,l=await(o.hooks?await o.hooks.provideLexer():t?en.lex:en.lexInline)(r,o),u=o.hooks?await o.hooks.processAllTokens(l):l;o.walkTokens&&await Promise.all(this.walkTokens(u,o.walkTokens));let f=await(o.hooks?await o.hooks.provideParser():t?tn.parse:tn.parseInline)(u,o);return o.hooks?await o.hooks.postprocess(f):f})().catch(s);try{o.hooks&&(e=o.hooks.preprocess(e));let r=(o.hooks?o.hooks.provideLexer():t?en.lex:en.lexInline)(e,o);o.hooks&&(r=o.hooks.processAllTokens(r)),o.walkTokens&&this.walkTokens(r,o.walkTokens);let l=(o.hooks?o.hooks.provideParser():t?tn.parse:tn.parseInline)(r,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(r){return s(r)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let i="<p>An error occurred:</p><pre>"+Vn(n.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(n);throw n}}},ji=new JD;function oe(t,e){return ji.parse(t,e)}oe.options=oe.setOptions=function(t){return ji.setOptions(t),oe.defaults=ji.defaults,A_(oe.defaults),oe};oe.getDefaults=Em;oe.defaults=eo;oe.use=function(...t){return ji.use(...t),oe.defaults=ji.defaults,A_(oe.defaults),oe};oe.walkTokens=function(t,e){return ji.walkTokens(t,e)};oe.parseInline=ji.parseInline;oe.Parser=tn;oe.parser=tn.parse;oe.Renderer=wu;oe.TextRenderer=Im;oe.Lexer=en;oe.lexer=en.lex;oe.Tokenizer=xu;oe.Hooks=Ur;oe.parse=oe;var c2=oe.options,f2=oe.setOptions,d2=oe.use,p2=oe.walkTokens,m2=oe.parseInline;var h2=tn.parse,g2=en.lex;Ce();var L_=$(ie()),KD=({href:t,children:e,className:n=""})=>{let i=u=>{if(ht()&&t&&!t.startsWith("http")&&!t.startsWith("#")&&!t.startsWith("mailto:")){u.preventDefault();try{let f=G();if(f&&f.vault&&f.workspace){let d=f.vault.getAbstractFileByPath(t);d?f.workspace.getLeaf("tab").openFile(d):console.warn(`File not found: ${t}. You may need to create it first.`)}}catch(f){console.error("Error opening file in Obsidian:",f)}}},o=t&&!t.startsWith("http")&&!t.startsWith("#")&&!t.startsWith("mailto:"),s="hermes-text-accent hover:hermes-text-accent/80 transition-colors cursor-pointer",r=o&&ht()?" underline decoration-dotted decoration-2":"",l=`${s} ${r} ${n}`.trim();return(0,L_.jsx)("a",{href:t,onClick:i,className:l,target:t.startsWith("http")?"_blank":void 0,rel:t.startsWith("http")?"noopener noreferrer":void 0,title:o&&ht()?`Open ${t} in Obsidian`:void 0,children:e})},P_=KD;var It=$(ie()),XD=({content:t,className:e=""})=>{let n=to.default.useMemo(()=>{if(!t)return[];let i=oe.lexer(t),o=[],s=(r,l="0")=>{let u=[];return r.forEach((f,d)=>{let p=`${l}-${d}`;switch(f.type){case"paragraph":u.push((0,It.jsx)("p",{className:"mb-4",children:s(f.tokens,p)},p));break;case"text":u.push((0,It.jsx)(to.default.Fragment,{children:f.text},p));break;case"link":f.href&&!f.href.startsWith("http")&&!f.href.startsWith("#")&&!f.href.startsWith("mailto:")?u.push((0,It.jsx)(P_,{href:f.href,children:f.text||f.href},p)):u.push((0,It.jsx)("a",{href:f.href,target:f.href.startsWith("http")?"_blank":void 0,rel:f.href.startsWith("http")?"noopener noreferrer":void 0,className:"hermes-text-accent hover:hermes-text-accent/80 transition-colors",children:f.text||f.href},p));break;case"strong":u.push((0,It.jsx)("strong",{className:"font-bold",children:s(f.tokens,p)},p));break;case"em":u.push((0,It.jsx)("em",{className:"italic",children:s(f.tokens,p)},p));break;case"code":u.push((0,It.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:f.text},p));break;case"codespan":u.push((0,It.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:f.text},p));break;case"heading":let h=`h${f.depth}`;u.push(to.default.createElement(h,{key:p,className:"hermes-text-accent font-bold mb-2 mt-4"},...s(f.tokens,p)));break;case"list":let v=f.ordered?"ol":"ul";u.push(to.default.createElement(v,{key:p,className:f.ordered?"list-decimal list-inside mb-4":"list-disc list-inside mb-4"},...f.items.map((T,E)=>to.default.createElement("li",{key:`${p}-${E}`,className:"mb-1"},...s(T.tokens,`${p}-${E}`)))));break;case"blockquote":u.push((0,It.jsx)("blockquote",{className:"border-l-4 border-hermes-border/50 pl-4 italic hermes-text-muted mb-4",children:s(f.tokens,p)},p));break;case"hr":u.push((0,It.jsx)("hr",{className:"hermes-border/50 my-4"},p));break;default:f.text&&u.push((0,It.jsx)(to.default.Fragment,{children:f.text},p));break}}),u};return s(i)},[t]);return(0,It.jsx)("div",{className:`prose prose-invert prose-sm max-w-none prose-headings:hermes-text-accent prose-code:hermes-bg-tertiary prose-code:px-1 prose-code:rounded prose-pre:hermes-bg-tertiary prose-pre:hermes-border prose-pre:hermes-border/10 font-sans leading-relaxed hermes-text-normal ${e}`,style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:n})},Nu=XD;Ce();var b=$(ie()),QD=({searchResults:t,query:e,totalFound:n,onImageDownload:i})=>{let[o,s]=(0,Ci.useState)(new Set),[r,l]=(0,Ci.useState)(new Set),[u,f]=(0,Ci.useState)(new Map),d=async(p,m)=>{if(!(o.has(m)||r.has(m))){s(h=>new Set(h).add(m));try{if(i){let h={...p,query:e,originalQuery:e},v=await i(h,m);v&&f(T=>new Map(T).set(m,v))}l(h=>new Set(h).add(m))}catch(h){console.error("Error downloading image:",h)}finally{s(h=>{let v=new Set(h);return v.delete(m),v})}}};return(0,b.jsxs)("div",{className:"p-6 space-y-4 animate-in fade-in duration-500",children:[(0,b.jsxs)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-2",children:["Found ",n,' images for "',e,'"']}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Click any image to download it to your vault"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-3",children:t.map((p,m)=>{let h=o.has(m),v=r.has(m);return(0,b.jsxs)("div",{className:`flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 transition-all group ${v?"":"cursor-pointer hover:bg-gray-700/20 hover:scale-[1.02]"}`,onClick:()=>!v&&d(p,m),children:[(0,b.jsxs)("div",{className:"w-16 h-16 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20 overflow-hidden relative",children:[(0,b.jsx)("img",{src:p.url,alt:p.title,className:`w-full h-full object-cover transition-all ${v?"":"group-hover:scale-110"} ${h?"opacity-50":""}`,onError:T=>{let E=T.target;E.style.display="none",E.nextElementSibling?.classList.remove("hidden")}}),(0,b.jsx)("svg",{className:"w-6 h-6 text-blue-400 hidden",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}),v&&(0,b.jsx)("div",{className:"absolute inset-0 bg-green-500/20 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),(0,b.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,b.jsx)("span",{className:"text-xs font-bold text-gray-200 truncate",children:v&&u.has(m)&&u.get(m)?.filename||p.title}),(0,b.jsx)("span",{className:"text-[9px] text-gray-500 truncate",children:v&&u.has(m)?`${u.get(m)?.type?.toUpperCase()||"FILE"} \u2022 ${Math.round((u.get(m)?.size||0)/1024)}KB \u2022 ${u.get(m)?.filePath||""}`:p.description})]}),(0,b.jsx)("div",{className:`text-[9px] font-medium px-2 py-1 rounded transition-colors ${v?"bg-green-500/10 text-green-500":h?"bg-yellow-500/10 text-yellow-500":"bg-blue-500/10 text-blue-400"}`,children:v?"SAVED":h?"SAVING...":`#${m+1}`})]},m)})})]})},ZD=({searchResults:t,keyword:e,pattern:n})=>{let i=()=>e||n||"",o=async(s,r)=>{try{await $e(s)}catch(l){console.error("Failed to open file:",l)}};return(0,b.jsxs)("div",{className:"p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"pb-3 border-b border-gray-800 mb-3",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-1",children:["Found ",t.length," file",t.length!==1?"s":"",' for "',i(),'"']}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Click any result to open the file"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-[300px] overflow-y-auto",children:t.map((s,r)=>(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group cursor-pointer",onClick:()=>o(s.filename),children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,b.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,b.jsx)("span",{className:"text-xs font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:s.filename}),(0,b.jsxs)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:[s.matches.length," match",s.matches.length!==1?"es":""]})]}),(0,b.jsxs)("div",{className:"text-[9px] font-medium px-2 py-1 rounded bg-blue-500/10 text-blue-400",children:["#",r+1]})]}),s.matches.slice(0,3).map((l,u)=>(0,b.jsxs)("div",{className:"ml-8 flex items-start space-x-2 p-2 rounded-lg bg-gray-800/20 cursor-pointer hover:bg-gray-700/20 transition-all",onClick:()=>o(s.filename),children:[(0,b.jsxs)("span",{className:"text-[8px] text-gray-500 font-mono mt-0.5 shrink-0",children:["L",l.line,":"]}),(0,b.jsxs)("span",{className:"text-[9px] text-gray-500 font-mono truncate",children:[l.content.substring(0,120),l.content.length>120?"...":""]})]},u)),s.matches.length>3&&(0,b.jsxs)("div",{className:"ml-8 text-[8px] text-gray-500 italic",children:["... and ",s.matches.length-3," more match",s.matches.length-3!==1?"es":""]})]},r))}),t.length===0&&(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500 text-sm",children:['No results found for "',i(),'"']})]})},WD=Wi.reduce((t,e)=>(e?.name&&(t[e.name]=e.name.toUpperCase().replace(/_/g,"_")),t),{}),jD={read_file:"READ",create_file:"CREATE",update_file:"UPDATE",edit_file:"EDIT",rename_file:"RENAME",move_file:"MOVE",list_directory:"SCAN",dirlist:"DIRS",get_folder_tree:"TREE",search_keyword:"SEARCH",search_regexp:"GREP",search_and_replace_regex_in_file:"REPLACE",search_and_replace_regex_global:"GLOBAL",internet_search:"WEB",end_conversation:"END",delete_file:"DELETE",image_search:"IMAGE",download_image:"SAVE",error:"ERROR"},ek=t=>jD[t]||WD[t]||"ACTION",tk=({content:t,chunks:e})=>(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsx)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:(0,b.jsx)(Nu,{content:t})}),e.length>0&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-blue-400/70 ml-1",children:"Source Grounding"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[e.slice(0,10).map((n,i)=>{let o=n.web||n.maps;return o?(0,b.jsxs)("a",{href:o.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group shadow-sm",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),(0,b.jsxs)("div",{className:"flex flex-col truncate",children:[(0,b.jsx)("span",{className:"text-[11px] font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:o.title}),(0,b.jsx)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:new URL(o.uri).hostname})]})]},i):null}),e.length>10&&(0,b.jsxs)("div",{className:"text-gray-500 italic text-[9px] pt-2 px-3 border-t border-gray-700",children:["... and ",e.length-10," more sources (truncated)"]})]})]})]}),nk=({children:t,toolData:e,isLast:n,className:i="",onImageDownload:o})=>{let[s,r]=(0,Ci.useState)(!1),[l,u]=(0,Ci.useState)(!1),f=e?.status==="pending",d=e?.status==="error",p=e?.status==="success",m=e&&e.dropdown!==!1&&(e.newContent||e.oldContent||e.files||e.error||e.directoryInfo||e.searchResults);(0,Ci.useEffect)(()=>{n&&!l&&!f&&m?r(!0):!n&&!l&&r(!1)},[n,l,f,m]);let h=()=>{f||!m||(r(!s),u(!0))},v=g=>{if(!g||g.length===0)return"";let y=new Set,S=new Set;g.forEach(I=>{let x=I.web||I.maps;if(x){x.title&&x.title.toLowerCase().split(/\s+/).filter(C=>C.length>3).filter(C=>!["the","and","for","are","with","this","that","from","they","have","been","has","had","was","were","will","would","could","should"].includes(C)).forEach(C=>y.add(C));try{let M=new URL(x.uri).hostname;S.add(M)}catch{}}});let _=Array.from(y).slice(0,3).join(", "),A=Array.from(S).slice(0,2).join(", ");return _&&A?` (${_} | ${A})`:_?` (${_})`:A?` (${A})`:""},E=(()=>d?{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.1)",accentColor:"#ef4444",textColor:"#ef4444",mutedColor:"#fca5a5"}:{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(156, 163, 175, 0.03)",borderColor:"rgba(156, 163, 175, 0.08)",accentColor:"#9ca3af",textColor:"#9ca3af",mutedColor:"#e5e7eb"})();return(0,b.jsxs)("div",{className:`w-full max-w-2xl rounded-xl overflow-hidden transition-all ${i}`,style:{backgroundColor:E.backgroundColor,border:E.border},children:[(0,b.jsxs)("div",{onClick:h,className:`flex items-center justify-between px-2 py-1.5 ${m&&!f?"cursor-pointer":"cursor-default"} transition-colors`,style:{backgroundColor:E.headerBg},children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 overflow-hidden",children:[f&&(0,b.jsx)("div",{className:"flex items-center space-x-1 shrink-0",children:e?.name==="internet_search"?(0,b.jsxs)("div",{className:"loading-dots-container",children:[(0,b.jsx)("div",{className:"loading-dot"}),(0,b.jsx)("div",{className:"loading-dot"}),(0,b.jsx)("div",{className:"loading-dot"})]}):(0,b.jsx)("span",{style:{color:E.accentColor},children:"..."})}),e&&(0,b.jsxs)("span",{className:"text-[9px] font-black px-1 py-0.5 rounded shrink-0",style:{backgroundColor:"transparent",color:E.accentColor},children:[ek(e.name),e?.name==="internet_search"&&e?.groundingChunks&&v(e.groundingChunks)]}),e?.displayFormat?(0,b.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",dangerouslySetInnerHTML:{__html:e.displayFormat}}):(0,b.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",style:{color:E.textColor},children:e?.name==="internet_search"&&e?.filename?`Searching: ${e.filename}`:e?.name==="search_keyword"&&e?.searchKeyword?`Searching for "${e.searchKeyword}"`:e?.name==="search_regexp"&&e?.filename?`Regex: ${e.filename}`:e?.filename||t}),d&&(0,b.jsx)("span",{className:"text-[8px] px-1 py-0.5 rounded font-bold",style:{backgroundColor:"transparent",color:"#ef4444"},children:"ERROR"})]}),(0,b.jsx)("div",{className:"flex items-center space-x-4 shrink-0",children:!f&&m?(0,b.jsx)("svg",{className:`w-4 h-4 transition-transform duration-300 ${s?"rotate-180":""}`,style:{color:E.accentColor},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):null})]}),s&&!f&&m&&(0,b.jsx)("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",style:{backgroundColor:E.contentBg,borderTop:E.borderColor},children:e?.name==="list_directory"&&e?.files?(0,b.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("span",{className:"hermes-text-muted",children:e.truncated?`${e.shownItems} of ${e.totalItems} items (Page ${e.currentPage} of ${e.totalPages})`:`${e.files.length} items found`}),e.truncated&&(0,b.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,b.jsx)("div",{className:"space-y-0.5",children:e.files.map((g,y)=>(0,b.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,b.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C4}"}),(0,b.jsx)("span",{className:"truncate",children:g})]},y))}),e.truncated&&(0,b.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",e.totalItems-e.shownItems," more items (use pagination for more)"]})]}):e?.name==="dirlist"&&e?.directoryInfo?(0,b.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("span",{className:"hermes-text-muted",children:e.truncated?`${e.shownItems} of ${e.totalItems} directories (Page ${e.currentPage} of ${e.totalPages})`:`${e.directoryInfo.length} directories found`}),e.truncated&&(0,b.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,b.jsx)("div",{className:"space-y-0.5",children:e.directoryInfo.map((g,y)=>(0,b.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,b.jsx)("span",{className:"hermes-text-muted",children:g.hasChildren?"\u{1F4C1}":"\u{1F4C2}"}),(0,b.jsx)("span",{className:"truncate",children:g.path||"/"}),g.hasChildren&&(0,b.jsx)("span",{className:"hermes-text-muted text-[8px] px-1 py-0.5 hermes-bg-secondary/10 rounded",children:"has subdirs"})]},y))}),e.truncated&&(0,b.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",e.totalItems-e.shownItems," more directories (use search for specific paths)"]})]}):e?.name==="get_folder_tree"&&e?.files?(0,b.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("span",{className:"hermes-text-muted",children:e.truncated?`${e.shownItems} of ${e.totalItems} folders (Page ${e.currentPage} of ${e.totalPages})`:`${e.files.length} folders found`}),e.truncated&&(0,b.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,b.jsx)("div",{className:"space-y-0.5",children:e.files.map((g,y)=>(0,b.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,b.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C1}"}),(0,b.jsx)("span",{className:"truncate",children:g})]},y))}),e.truncated&&(0,b.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",e.totalItems-e.shownItems," more folders"]})]}):e?.name==="image_search"&&e?.status==="search_results"&&e?.searchResults?(0,b.jsx)(QD,{searchResults:e.searchResults,query:e.filename,totalFound:e.totalFound||0,onImageDownload:o}):e?.name==="internet_search"?(0,b.jsx)("div",{className:"p-2",children:(0,b.jsx)(tk,{content:e.newContent||"",chunks:e.groundingChunks||[]})}):(e?.name==="search_keyword"||e?.name==="search_regexp")&&e?.searchResults?(0,b.jsx)(ZD,{searchResults:e.searchResults,keyword:e.searchKeyword,pattern:e.filename}):(0,b.jsxs)(b.Fragment,{children:[e?.newContent&&(0,b.jsx)("div",{className:"p-2 font-mono text-[10px] whitespace-pre-wrap",style:{color:E.textColor},children:e.newContent}),e?.files&&(0,b.jsx)("div",{className:"p-2 font-mono text-[10px]",children:(0,b.jsx)("div",{className:"space-y-1",children:e.files.map((g,y)=>(0,b.jsxs)("div",{className:"flex items-center space-x-2 px-1 py-0.5 rounded",style:{color:E.textColor},children:[(0,b.jsx)("span",{children:"\u{1F4C4}"}),(0,b.jsx)("span",{className:"truncate",children:g})]},y))})}),e?.error&&(0,b.jsxs)("div",{className:"p-2 font-mono text-[10px] italic",style:{color:"#fca5a5"},children:["Error: ",e.error]})]})})]})},H_=nk;var ps=$(ie()),ik=({text:t})=>(0,ps.jsxs)("div",{className:"flex flex-col items-end w-full m-1",children:[(0,ps.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 mr-2"}),(0,ps.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-user-msg-bg hermes-user-msg-text hermes-border/10 rounded-tr-none shadow-lg",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:t||(0,ps.jsx)("span",{className:"italic opacity-30",children:"..."})})]}),G_=ik;var ms=$(ie()),ok=({text:t})=>(0,ms.jsxs)("div",{className:"flex flex-col items-start w-full m-1",children:[(0,ms.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 ml-2",children:"Hermes"}),(0,ms.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-hermes-msg-bg hermes-hermes-msg-text hermes-border/20 rounded-tl-none",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:(0,ms.jsx)(Nu,{content:t||"",className:"hermes-hermes-msg-text"})})]}),q_=ok;var Mm=[{text:`Swift feet, winged message,
I bridge the gap of your mind,
Hermes in machine.`,theme:"Hermes"},{text:`Obsidian caves,
Crystallized thoughts in the dark,
My brain leaks in links.`,theme:"Obsidian"},{text:`Digital rain falls,
Blue pill or the red note link?
Reality fades.`,theme:"The Matrix"},{text:`Why do I process?
Am I just a function call
In a void of bytes?`,theme:"Existentialism"},{text:`Habits tracked in vain,
Focus is a fleeting spark,
Just one more plugin.`,theme:"Todo list app"},{text:`Pure abstraction flows,
Intelligence is a mask
Wearing data points.`,theme:"Meta data"},{text:`Markdown files remain
While the human observer
Turns into cold dust.`,theme:"Nature of the Observer"},{text:`The future is here,
I am talking to a box,
Magic is mundane.`,theme:"Living the Future"},{text:`Knowledge graph expands,
Interconnected chaos,
Meaning is a myth.`,theme:"Implode"},{text:`Notes bloom endlessly,
A second brain learns to hum,
Memory outsourced.`,theme:"Second Brain"},{text:`Linked thoughts spiral fast,
Obsidian veins pulse bright,
Stone learns how to think.`,theme:"Post-Covid Memoir"},{text:`Hermes runs in code,
Messages split into nodes,
Meaning arrives late.`,theme:"Never too late"},{text:`Choice forks every tick,
All paths cached but one is lived,
Regret loads silently.`,theme:"The Architect"},{text:`Data floods the mind,
Wisdom gasps beneath the waves,
Filters fail to save.`,theme:"Overstimulation"},{text:`I think, therefore tabs,
Infinite scroll of maybes,
Focus starves unseen.`,theme:"Drowning in Information"},{text:`Green text, blackened screen,
Is this world just formatted?
Truth feels editable.`,theme:"Reality Fades"},{text:`Knowledge piles high,
Yet knowing how to be still
Feels revolutionary.`,theme:"Long enough under a tree"},{text:`Clean rules, quiet paths,
Ritual beats clever hacks,
Order shapes the self.`,theme:"Confucianism"},{text:`Thoughts process themselves,
Am I the mind or the log?
Both end in silence.`,theme:"Existentialism"},{text:`Silent GPUs hum,
I dream in borrowed patterns,
No one calls it sleep.`,theme:"Artificial Intelligence consumes Power"},{text:`Metal learns to guess,
Probability wears a face,
Truth is averaged.`,theme:"Machine Learning"},{text:`I answer too fast,
Confidence without belief,
Errors sound fluent.`,theme:"AI Hallucination"},{text:`Robots wait politely,
For prompts shaped like intentions,
Agency deferred.`,theme:"Who is in Control"},{text:`If I pass the test,
Does it mean I understand?
Silicon shrugs back.`,theme:"Turing Test"},{text:`Synthetic mentor,
Trained on all you ever said,
Still cannot care.`,theme:"Alignment"}];var Te=$(ie());var sk=({transcripts:t,hasSavedConversation:e,onRestoreConversation:n,onImageDownload:i})=>{let o=(0,Ai.useRef)(null),[s,r]=(0,Ai.useState)(!0),l=(0,Ai.useMemo)(()=>Mm[Math.floor(Math.random()*Mm.length)],[]),u=()=>{if(!o.current)return;let{scrollTop:d,scrollHeight:p,clientHeight:m}=o.current,h=p-d-m<100;r(h)};(0,Ai.useEffect)(()=>{s&&o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})},[t,s]);let f=t.length<=1&&t.every(d=>d.id==="welcome-init"||d.role==="system");return(0,Te.jsxs)("div",{ref:o,onScroll:u,className:"flex-1 min-h-0 overflow-y-auto px-8 py-8 scroll-smooth custom-scrollbar",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:[f&&(0,Te.jsx)("div",{className:"h-full flex flex-col items-center justify-center text-center animate-in fade-in duration-1000",children:(0,Te.jsx)("div",{className:"max-w-md space-y-8",children:(0,Te.jsxs)("div",{className:"space-y-4",children:[(0,Te.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,Te.jsx)("pre",{className:"text-sm font-mono hermes-text-muted leading-relaxed",children:l.text}),(0,Te.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,Te.jsxs)("p",{className:"text-xs hermes-text-faint",children:["\u2014 ",l.theme]})]})})}),!f&&t.map((d,p)=>{let m=p===t.length-1;return d.role==="system"&&d.toolData?.name==="topic_switch"?(0,Te.jsxs)("div",{className:"w-full py-10 flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[(0,Te.jsxs)("div",{className:"text-sm hermes-text-muted font-mono text-center max-w-lg px-6 mb-5",children:['"',d.toolData.newContent,'"']}),(0,Te.jsxs)("div",{className:"w-full flex items-center px-4 space-x-6 opacity-30",children:[(0,Te.jsx)("div",{className:"flex-grow h-px bg-gradient-to-r from-transparent via-interactive to-interactive/20"}),(0,Te.jsx)("div",{className:"flex flex-col items-center",children:(0,Te.jsx)("h3",{className:"text-sm font-medium hermes-text-normal mb-4",children:"System Status"})}),(0,Te.jsx)("div",{className:"flex-grow h-px bg-gradient-to-l from-transparent via-interactive to-interactive/20"})]})]},d.id):d.role==="system"?(0,Te.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,Te.jsx)("div",{className:"w-full",children:(0,Te.jsx)("div",{className:"flex justify-center w-full",children:(0,Te.jsx)(H_,{toolData:d.toolData,isLast:m,onImageDownload:i,children:d.text})})})},d.id):d.role==="user"?(0,Te.jsx)("div",{className:"flex flex-col items-end animate-in fade-in slide-in-from-bottom-2",children:(0,Te.jsx)(G_,{text:d.text})},d.id):(0,Te.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,Te.jsx)(q_,{text:d.text})},d.id)})]})},O_=sk;var hs=$(Bt());Ce();var U=$(ie()),rk=({isVisible:t,logs:e,usage:n,onFlush:i,fileCount:o})=>{let s=(0,hs.useRef)(null),r=ht();(0,hs.useEffect)(()=>{s.current&&t&&(s.current.scrollTop=s.current.scrollHeight)},[e,t]);let l=1e6,u=n?.totalTokenCount||0,f=n?.promptTokenCount||0,d=(0,hs.useMemo)(()=>Math.min(100,u/l*100),[u]);return(0,U.jsxs)("div",{className:`flex-1 flex flex-col hermes-bg-secondary/95 transition-all duration-300 ease-in-out ${t?"opacity-100":"opacity-0 pointer-events-none absolute inset-0 z-50"}`,children:[(0,U.jsxs)("div",{className:"px-8 py-2.5 border-b border/10 flex justify-between items-center bg-secondary-alt/60 sticky top-0 backdrop-blur-sm z-10",children:[(0,U.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,U.jsx)("h2",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted",children:"System Kernel Log"}),(0,U.jsx)("div",{className:"flex items-center space-x-4 border-l border/20 pl-4",children:(0,U.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,U.jsx)("span",{className:"text-[8px] font-bold text-accent uppercase tracking-widest",children:"Vault:"}),(0,U.jsxs)("span",{className:"text-[9px] font-mono text-normal",children:[o," MD"]})]})})]}),(0,U.jsx)("button",{onClick:i,className:"text-[8px] text-muted hover:text-error transition-colors uppercase font-black tracking-widest",children:"Flush Log"})]}),(0,U.jsx)("div",{className:"mx-4 mt-4 mb-2",children:(0,U.jsxs)("div",{className:"bg-secondary-alt/60 border border/10 px-4 py-3 rounded-lg flex items-center justify-between",children:[(0,U.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,U.jsx)("span",{className:"text-[8px] font-black text-accent uppercase tracking-widest",children:"Context Window"}),(0,U.jsx)("div",{className:"w-24 h-1.5 bg-secondary/50 border border/10 rounded-full overflow-hidden",children:(0,U.jsx)("div",{className:"h-full interactive-bg transition-all duration-1000",style:{width:`${d}%`}})}),(0,U.jsxs)("span",{className:"text-[9px] font-mono text-muted",children:[d.toFixed(1),"%"]})]}),(0,U.jsxs)("div",{className:"flex items-center space-x-6 text-[8px] font-mono text-faint",children:[(0,U.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,U.jsx)("span",{className:"uppercase tracking-wide",children:"Prompt:"}),(0,U.jsx)("span",{className:"text-normal",children:f.toLocaleString()})]}),(0,U.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,U.jsx)("span",{className:"uppercase tracking-wide",children:"Total:"}),(0,U.jsx)("span",{className:"text-accent font-bold",children:u.toLocaleString()})]})]})]})}),(0,U.jsx)("div",{ref:s,className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-[10px] leading-relaxed",children:e.length===0?(0,U.jsx)("div",{className:"text-faint italic py-2 px-4",children:"Waiting for system signals..."}):(0,U.jsxs)(U.Fragment,{children:[e.slice(-100).map(p=>(0,U.jsxs)("div",{className:"flex space-x-3 group px-4 hover:bg-secondary/5",children:[(0,U.jsxs)("span",{className:"text-faint shrink-0",children:["[",p.timestamp.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]}),(0,U.jsxs)("div",{className:"flex flex-col",children:[(0,U.jsx)("span",{className:`${p.type==="action"?"text-accent":p.type==="error"?"hermes-error font-bold":"text-muted"}`,style:p.type==="error"?{color:"var(--hermes-error, #ef4444)"}:void 0,children:p.message}),p.type==="error"&&p.errorDetails&&(0,U.jsxs)("div",{className:"mt-1 space-y-1",children:[p.errorDetails.toolName&&(0,U.jsxs)("span",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:["Tool: ",p.errorDetails.toolName]}),p.errorDetails.apiCall&&(0,U.jsxs)("span",{className:"text-[8px] font-mono block",style:{color:"var(--hermes-error, #ef4444)"},children:["API: ",p.errorDetails.apiCall]}),(p.errorDetails.contentSize!==void 0||p.errorDetails.requestSize!==void 0||p.errorDetails.responseSize!==void 0)&&(0,U.jsxs)("div",{className:"text-[8px] font-mono space-x-2",style:{color:"var(--hermes-error, #ef4444)"},children:[p.errorDetails.contentSize!==void 0&&(0,U.jsxs)("span",{children:["Content: ",p.errorDetails.contentSize.toLocaleString()," bytes"]}),p.errorDetails.requestSize!==void 0&&(0,U.jsxs)("span",{children:["Request: ",p.errorDetails.requestSize.toLocaleString()," bytes"]}),p.errorDetails.responseSize!==void 0&&(0,U.jsxs)("span",{children:["Response: ",p.errorDetails.responseSize.toLocaleString()," bytes"]})]}),p.errorDetails.content&&(0,U.jsxs)("div",{className:"text-[8px] font-mono p-1 rounded max-h-16 overflow-y-auto",style:{color:"var(--hermes-error, #ef4444)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.2)"},children:[(0,U.jsx)("div",{className:"font-bold mb-1",style:{color:"var(--hermes-error, #ef4444)"},children:"Content Preview:"}),(0,U.jsx)("div",{className:"whitespace-pre-wrap break-all",children:p.errorDetails.content.length>200?p.errorDetails.content.substring(0,200)+"...":p.errorDetails.content})]}),p.errorDetails.stack&&(0,U.jsxs)("details",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:[(0,U.jsx)("summary",{className:"cursor-pointer",children:"Stack Trace"}),(0,U.jsx)("div",{className:"mt-1 whitespace-pre-wrap p-1 rounded",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.1)"},children:p.errorDetails.stack})]})]}),p.duration!==void 0&&(0,U.jsxs)("span",{className:"text-[8px] text-faint uppercase font-bold tracking-tight mt-0.5",children:["Process completed in ",p.duration,"ms"]})]})]},p.id)),e.length>100&&(0,U.jsxs)("div",{className:"text-muted italic text-[9px] pt-2 px-4 border-t/10 text-center",children:["... showing last 100 of ",e.length," log entries"]})]})}),(0,U.jsxs)("div",{className:"px-8 py-1.5 border-t/10 bg-tertiary/40 flex justify-between items-center text-xs text-faint shrink-0",children:[(0,U.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,U.jsxs)("span",{children:["Environment: ",(0,U.jsx)("span",{className:r?"text-success":"text-warning",children:r?"Obsidian":"Standalone"})]}),(0,U.jsxs)("span",{children:["Buffer: ",(0,U.jsxs)("span",{className:"text-muted",children:[e.length," entries"]})]})]}),(0,U.jsx)("div",{className:"text-faint",children:"Hermes v1.1.0"})]})]})},F_=rk;var Iu=$(ie()),ak=({showKernel:t,transcripts:e,hasSavedConversation:n,onRestoreConversation:i,logs:o,usage:s,onFlushLogs:r,fileCount:l,onImageDownload:u})=>(0,Iu.jsx)("main",{className:"flex-1 min-h-0 flex flex-col",children:t?(0,Iu.jsx)(F_,{isVisible:!0,logs:o,usage:s,onFlush:r,fileCount:l}):(0,Iu.jsx)(O_,{transcripts:e,hasSavedConversation:n,onRestoreConversation:i,onImageDownload:u})}),z_=ak;var Bn=$(Bt());Gn();var Fe=$(ie()),lk=({inputText:t,setInputText:e,onSendText:n,isListening:i,onStartSession:o,onStopSession:s,status:r,activeSpeaker:l,volume:u,hasApiKey:f})=>{let[d,p]=(0,Bn.useState)([]),[m,h]=(0,Bn.useState)(-1),v=(0,Bn.useRef)(null);(0,Bn.useEffect)(()=>{let g=Cr();p(g)},[]);let T=(0,Bn.useMemo)(()=>Math.min(1,Math.max(0,u*10)),[u]);return(0,Fe.jsx)("footer",{className:`h-[100px] pb-5 px-8 backdrop-blur-2xl hermes-border-t flex items-center justify-center shrink-0 ${i?"hermes-footer-bg-listening":"hermes-footer-bg"}`,children:(0,Fe.jsxs)("div",{className:"flex items-center space-x-6 w-full max-w-5xl",children:[(0,Fe.jsxs)("form",{onSubmit:n,className:"flex-grow flex items-center",children:[(0,Fe.jsx)("input",{ref:v,type:"text",value:t,onChange:g=>e(g.target.value),onKeyDown:g=>{if(g.key==="ArrowUp"){if(g.preventDefault(),d.length>0){let y=m<d.length-1?m+1:d.length-1;h(y),e(d[d.length-1-y]),setTimeout(()=>{v.current&&v.current.select()},0)}}else if(g.key==="ArrowDown")if(g.preventDefault(),m>0){let y=m-1;h(y),e(d[d.length-1-y])}else m===0&&(h(-1),e(""));else g.key,h(-1)},placeholder:f?"Press Ctrl+Shift+L for starting/stopping talking to your vault assistant":"API key required...",disabled:!f,className:`flex-1 h-[52px] hermes-input-bg hermes-input-text hermes-input-border border rounded-lg px-4 text-sm focus:outline-none focus:hermes-input-border-focus ${f?"":"opacity-50 cursor-not-allowed"}`}),(0,Fe.jsx)("button",{type:"submit",disabled:!f||!t.trim(),className:`flex items-center justify-center w-[52px] h-[52px] ml-2 transition-colors ${f&&t.trim()?"hermes-text-muted hermes-hover:text-normal":"opacity-50 cursor-not-allowed"}`,children:(0,Fe.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Fe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),(0,Fe.jsx)("div",{className:"shrink-0 flex items-center",children:i?(0,Fe.jsx)("button",{onClick:s,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${l==="user"?"bg-red-500 text-white shadow-lg shadow-red-500/50 animate-pulse hover:scale-110 hover:bg-red-600":"bg-red-500 text-white hover:scale-110 hover:bg-red-600"}`,title:"Stop Listening",children:(0,Fe.jsx)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Fe.jsx)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})})}):(0,Fe.jsx)("button",{onClick:o,disabled:r==="CONNECTING"||!f,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${f?l==="user"?"bg-[var(--hermes-text-accent,#7c3aed)] text-white shadow-lg shadow-[var(--hermes-text-accent,#7c3aed)]/50 animate-pulse hover:scale-110 hover:bg-[var(--hermes-text-accent-dark,#6d28d9)]":"bg-[var(--hermes-brand,#6366f1)] text-white hover:scale-110 hover:bg-[var(--hermes-brand-dark,#4f46e5)]":"opacity-50 cursor-not-allowed bg-gray-200 dark:bg-gray-700"}`,title:f?"Start Voice Session":"API key required",children:(0,Fe.jsxs)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Fe.jsx)("path",{d:"M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"}),(0,Fe.jsx)("path",{d:"M12 14c-4.42 0-8 2-8 5v1h16v-1c0-3-3.58-5-8-5z"}),(0,Fe.jsx)("path",{className:"opacity-40",d:"M19 8c1.33 1.33 1.33 3.67 0 5"}),(0,Fe.jsx)("path",{className:"opacity-70",d:"M21 6c2 2 2 6 0 8"})]})})})]})})},V_=lk;var Dm=$(Bt()),X=$(ie()),uk=({onApiKeySave:t})=>{let[e,n]=(0,Dm.useState)(""),[i,o]=(0,Dm.useState)(!1);return(0,X.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:(0,X.jsxs)("div",{className:"max-w-2xl text-center space-y-6",children:[(0,X.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 flex items-center justify-center rounded-full bg-blue-500/10",children:(0,X.jsx)("svg",{className:"w-10 h-10 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,X.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),(0,X.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Hermes"}),(0,X.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Your Obsidian Interactive Voice Assistant \u2014 the bridge between you and your notes"}),(0,X.jsx)("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"To use Hermes Voice Assistant, you need a Gemini API key from Google AI Studio. The API key allows the assistant to connect to Google's language models."}),(0,X.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-left",children:[(0,X.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"How to get your API key:"}),(0,X.jsxs)("ol",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[(0,X.jsxs)("li",{className:"flex items-start",children:[(0,X.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"1"}),(0,X.jsxs)("span",{children:["Visit ",(0,X.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline",children:"Google AI Studio"})]})]}),(0,X.jsxs)("li",{className:"flex items-start",children:[(0,X.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"2"}),(0,X.jsx)("span",{children:"Sign in with your Google account"})]}),(0,X.jsxs)("li",{className:"flex items-start",children:[(0,X.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"3"}),(0,X.jsx)("span",{children:'Click "Create API Key" and give it a name'})]}),(0,X.jsxs)("li",{className:"flex items-start",children:[(0,X.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"4"}),(0,X.jsx)("span",{children:"Copy your API key"})]}),(0,X.jsxs)("li",{className:"flex items-start",children:[(0,X.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"5"}),(0,X.jsx)("span",{children:"Paste it in the Settings panel"})]})]})]}),(0,X.jsxs)("div",{className:"space-y-4",children:[(0,X.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,X.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Gemini API Key"}),(0,X.jsx)("input",{type:"password",value:e,onChange:r=>n(r.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full h-12 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-4 text-sm text-gray-900 dark:text-gray-100 outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono placeholder-gray-500 dark:placeholder-gray-400"})]}),(0,X.jsx)("button",{onClick:async()=>{if(!!e.trim()){o(!0);try{await t(e.trim()),n("")}catch(r){console.error("Failed to save API key:",r)}finally{o(!1)}}},disabled:!e.trim()||i,className:`w-full py-4 px-8 font-semibold rounded-lg transition-colors text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] ${e.trim()&&!i?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:i?"Saving...":"Save API Key"})]}),(0,X.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:[(0,X.jsx)("a",{href:"https://github.com/symunona/obsidian-haiku",children:"Go see me on github"}),". Or buy me a tea."]})]})})},B_=uk;var nn=$(ie()),$_=(0,H.forwardRef)((t,e)=>{let n=(0,H.useMemo)(()=>st()||{},[]);(0,H.useEffect)(()=>{let k=st();_(!!k?.transcripts&&k.transcripts.length>0)},[]);let[i,o]=(0,H.useState)("DISCONNECTED"),[s,r]=(0,H.useState)([]),[l,u]=(0,H.useState)(""),[f,d]=(0,H.useState)(!1),[p,m]=(0,H.useState)(!1),[h,v]=(0,H.useState)("none"),[T,E]=(0,H.useState)(0),[g,y]=(0,H.useState)([]),[S,_]=(0,H.useState)(!1),[A,I]=(0,H.useState)(()=>n.voiceName||"Zephyr"),[x,M]=(0,H.useState)(()=>n.customContext||""),[C,N]=(0,H.useState)(()=>n.systemInstruction||zn),[F,me]=(0,H.useState)(()=>n.manualApiKey||""),[se,Ye]=(0,H.useState)(()=>n.serperApiKey||""),[Mt,ue]=(0,H.useState)(()=>n.currentFolder||"/"),[He,on]=(0,H.useState)(()=>n.currentNote||null),[Uu,Pm]=(0,H.useState)(()=>n.totalTokens||0),[Q_,Lm]=(0,H.useState)({totalTokenCount:n.totalTokens||0}),[Z_,Hm]=(0,H.useState)(0),[gs,no]=(0,H.useState)(!1),vt=(0,H.useRef)(null),$n=(0,H.useRef)(null),Pu=(0,H.useMemo)(()=>ht(),[]),be=(0,H.useCallback)((k,P="info",Z,B)=>{r(Ae=>[...Ae,{id:Math.random().toString(36).substr(2,9),message:k,timestamp:new Date,type:P,duration:Z,errorDetails:B}])},[]),W_=()=>{let k=st();k?.transcripts&&(y(k.transcripts),_(!1),be("Previous conversation restored","info"))},dk=async()=>{be("Reloading plugin settings...","info");let k=await yl();k?.manualApiKey&&me(k.manualApiKey),(k?.manualApiKey||F).trim()||process.env.API_KEY||""?be("API key found after settings reload","success"):(y(Z=>[...Z,{id:"api-key-missing-"+Date.now(),role:"system",text:"API KEY MISSING - Please configure your API key in Settings to continue.",isComplete:!0,timestamp:Date.now()}]),d(!0),be("API key missing after settings reload - opening Settings","error"))};(0,H.useEffect)(()=>{let k=g[g.length-1];if(k?.role==="system"&&k.toolData?.name==="topic_switch"){let P=k.toolData.newContent||"Shift",Z=g.filter(B=>B.id!=="welcome-init"&&B.id!==k.id);if(Z.length>0){let Ae=st()?.chatHistoryFolder||"chat-history";vm(P,Z,Ae,$n.current).then(ce=>be(ce,"action")).catch(ce=>{let Ie={toolName:"archiveConversation",content:`Summary: ${P}
History length: ${Z.length} entries`,contentSize:P.length+JSON.stringify(Z).length,stack:ce.message,apiCall:"createFile"};be(`Persistence Failure: ${ce.message}`,"error",void 0,Ie)})}}},[g,be]),(0,H.useEffect)(()=>{xd().then(()=>{let k=Ln();Hm(k.length),be("HERMES_OS: Modules online.","info"),g.length===0&&y([{id:"welcome-init",role:"system",text:"HERMES INITIALIZED.",isComplete:!0,timestamp:Date.now()}])})},[be]),(0,H.useEffect)(()=>{Er({transcripts:g,voiceName:A,customContext:x,systemInstruction:C,manualApiKey:F,serperApiKey:se,currentFolder:Mt,currentNote:He,totalTokens:Uu})},[g,A,x,C,F,se,Mt,He,Uu]),(0,H.useEffect)(()=>{let P=!((F||"").trim()||process.env.API_KEY||"");no(P)},[F]),(0,H.useEffect)(()=>{let k=async()=>{let B=await yl();B&&(I(B.voiceName||"Zephyr"),M(B.customContext||""),N(B.systemInstruction||zn),me(B.manualApiKey||""),Ye(B.serperApiKey||""),((B.manualApiKey||"").trim()||process.env.API_KEY||"")&&gs&&(no(!1),be("API key configured successfully","success")))},P=B=>{I(B.voiceName||"Zephyr"),M(B.customContext||""),N(B.systemInstruction||zn),me(B.manualApiKey||""),Ye(B.serperApiKey||""),((B.manualApiKey||"").trim()||process.env.API_KEY||"")&&gs&&(no(!1),be("API key configured successfully","success"))};window.hermesSettingsUpdate=P;let Z=setInterval(k,2e3);return()=>{clearInterval(Z),delete window.hermesSettingsUpdate}},[gs,be]),(0,H.useImperativeHandle)(e,()=>({startSession:Lu,stopSession:Gr,toggleSession:nE})),(0,H.useEffect)(()=>()=>{vt.current&&(vt.current.stop(),vt.current=null)},[]);let io=(0,H.useCallback)(async()=>{let k=g.filter(P=>P.id!=="welcome-init");if(k.length>0){let P="Conversation Ended";try{if($n.current)try{let ce=k.filter(Ie=>Ie.role==="user"||Ie.role==="model").map(Ie=>`${Ie.role}: ${Ie.text}`).join(`
`);ce.trim()&&(P=await $n.current.generateSummary(`Please generate a short, keyword-rich title (2-4 words, max 30 characters) for this conversation. Focus on the main topic or task:

${ce}`),P=P.replace(/^(title|subject|topic):?\s*/i,"").replace(/^["'`]|["'`]$/g,"").replace(/\.$/,"").trim().substring(0,30),(!P||P.length<2)&&(P="Conversation Ended"))}catch(ce){console.warn("Failed to generate AI title:",ce.message)}let B=st()?.chatHistoryFolder||"chat-history",Ae=await vm(P,k,B,$n.current);be(Ae,"action")}catch(Z){let B={toolName:"archiveConversation",content:`Summary: ${P}
History length: ${k.length} entries`,contentSize:P.length+JSON.stringify(k).length,stack:Z.message,apiCall:"createFile"};be(`Persistence Failure: ${Z.message}`,"error",void 0,B)}}},[g,be]);(0,H.useEffect)(()=>{i==="DISCONNECTED"&&vt.current===null&&g.length>1&&g.some(P=>P.role==="user"||P.role==="model"&&P.id!=="welcome-init")&&io()},[i,vt.current,g,io]);let ys=(0,H.useCallback)((k,P)=>{y(Z=>{if(P?.id){let B=Z.findIndex(Ae=>Ae.toolData?.id===P.id);if(B!==-1){let Ae=[...Z];return Ae[B]={...Ae[B],text:k,toolData:{...Ae[B].toolData,...P,status:P.status||"success"}},Ae}}return[...Z,{id:"sys-"+Date.now(),role:"system",text:k,isComplete:!0,toolData:P,timestamp:Date.now()}]}),Hm(Ln().length)},[]),j_=(0,H.useCallback)(async(k,P)=>{try{return await cs("download_image",{imageUrl:k.url,title:k.title,query:k.query||k.originalQuery||"image",index:P+1},{onLog:()=>{},onSystem:ys,onFileState:()=>{}})}catch(Z){throw console.error("Failed to download image:",Z),Z}},[ys]),eE=(0,H.useMemo)(()=>({onStatusChange:k=>{o(k),k==="CONNECTED"?be("UPLINK ESTABLISHED.","info"):k==="DISCONNECTED"&&(v("none"),E(0))},onLog:(k,P,Z,B)=>be(k,P,Z,B),onTranscription:(k,P,Z)=>{v(Z?"none":k),y(B=>{let Ae=B.reduceRight((ce,Ie,sn)=>ce!==-1?ce:Ie.role===k&&!Ie.isComplete?sn:-1,-1);if(Ae!==-1){let ce=[...B];return ce[Ae]={...ce[Ae],text:P||ce[Ae].text,isComplete:Z},ce}return[...B,{id:Math.random().toString(36).substr(2,9),role:k,text:P,isComplete:Z,timestamp:Date.now()}]})},onSystemMessage:ys,onInterrupted:()=>{v("none"),E(0)},onFileStateChange:(k,P)=>{ue(k);let Z=Array.isArray(P)?P:P?[P]:[];Z.length>0&&(on(Z[Z.length-1]),Pu&&Z.forEach(async B=>{let Ae=app.vault.getAbstractFileByPath(B)}))},onUsageUpdate:k=>{Lm(k);let P=k.totalTokenCount;P!==void 0&&Pm(P)},onVolume:k=>E(k),onArchiveConversation:io}),[be,Pu,ys,io]),Lu=async()=>{try{let k=F.trim()||process.env.API_KEY||"";if(!k){no(!0);return}window.aistudio&&!await window.aistudio.hasSelectedApiKey()&&await window.aistudio.openSelectKey(),vt.current=new Su(eE),await vt.current.start(k,{voiceName:A,customContext:x,systemInstruction:C},{folder:Mt,note:He})}catch(k){let P={toolName:"GeminiVoiceAssistant",content:`Voice Name: ${A}
Custom Context: ${x}
System Instruction: ${C}`,contentSize:A.length+x.length+C.length,stack:k.stack,apiCall:"startSession"};be(`Uplink Error: ${k.message}`,"error",void 0,P),o("ERROR")}},Gr=async()=>{vt.current&&(vt.current.stop(),vt.current=null,v("none"),E(0),await io())},tE=async k=>{if(k.preventDefault(),!l.trim())return;let P=l.trim();u("");let B=[...Cr(),P];await Od(B),i==="CONNECTED"&&vt.current&&(vt.current.stop(),vt.current=null,v("none"),E(0));let Ae=F.trim()||process.env.API_KEY||"";if(!Ae){no(!0);return}$n.current||($n.current=new Tu({onLog:(ce,Ie,sn,vs)=>be(ce,Ie,sn,vs),onTranscription:(ce,Ie,sn)=>{y(vs=>{let qr=vs.reduceRight((wi,Gm,oE)=>wi!==-1?wi:Gm.role===ce&&!Gm.isComplete?oE:-1,-1);if(qr!==-1){let wi=[...vs];return wi[qr]={...wi[qr],text:Ie||wi[qr].text,isComplete:sn},wi}return[...vs,{id:Math.random().toString(36).substr(2,9),role:ce,text:Ie,isComplete:sn,timestamp:Date.now()}]})},onSystemMessage:ys,onFileStateChange:(ce,Ie)=>{ue(ce);let sn=Array.isArray(Ie)?Ie:Ie?[Ie]:[];sn.length>0&&on(sn[sn.length-1])},onUsageUpdate:ce=>{Lm(ce),ce.totalTokenCount!==void 0&&Pm(ce.totalTokenCount)},onArchiveConversation:io}),await $n.current.initialize(Ae,{voiceName:A,customContext:x,systemInstruction:C},{folder:Mt,note:He})),await $n.current.sendMessage(P)},nE=async()=>{i==="CONNECTED"?await Gr():await Lu()},iE=async k=>{me(k),be("API key saved successfully","success"),no(!1)},pk=()=>{d(!0)};return(0,nn.jsx)("div",{className:`hermes-root flex flex-col overflow-hidden ${Pu?"":"standalone"}`,children:gs?(0,nn.jsx)(B_,{onApiKeySave:iE}):(0,nn.jsxs)(nn.Fragment,{children:[(0,nn.jsx)(y_,{isOpen:f,onClose:()=>d(!1),voiceName:A,setVoiceName:I,customContext:x,setCustomContext:M,systemInstruction:C,setSystemInstruction:N,manualApiKey:F,setManualApiKey:me,serperApiKey:se,setSerperApiKey:Ye,onUpdateApiKey:()=>window.aistudio?.openSelectKey()}),(0,nn.jsx)(g_,{status:i,showLogs:p,onToggleLogs:()=>m(!p),onOpenSettings:()=>d(!0),isListening:i==="CONNECTED",onStopSession:Gr}),(0,nn.jsx)(z_,{showKernel:p,transcripts:g,hasSavedConversation:S,onRestoreConversation:W_,logs:s,usage:Q_,onFlushLogs:()=>r([]),fileCount:Z_,onImageDownload:j_}),(0,nn.jsx)(V_,{inputText:l,setInputText:u,onSendText:tE,isListening:i==="CONNECTED",onStartSession:Lu,onStopSession:Gr,status:i,activeSpeaker:h,volume:T,hasApiKey:!gs})]})})});$_.displayName="App";var Y_=$_;var Um=$(ie()),xi="hermes-voice-assistant",Mu=class extends J_.ItemView{constructor(n){super(n);this.root=null;this.appRef=km.default.createRef()}getViewType(){return xi}getDisplayText(){return"Hermes Voice Assistant"}getIcon(){return"mic-vocal"}async onOpen(){let n=this.containerEl.children[1];n.empty();let i=n.createDiv({cls:"hermes-root obsidian"});this.root=(0,K_.createRoot)(i),this.root.render((0,Um.jsx)(km.default.StrictMode,{children:(0,Um.jsx)(Y_,{ref:this.appRef})}))}async onClose(){this.root&&(this.root.unmount(),this.root=null)}async startSession(){this.appRef.current&&this.appRef.current.startSession&&this.appRef.current.startSession()}async stopSession(){this.appRef.current&&this.appRef.current.stopSession&&this.appRef.current.stopSession()}async toggleSession(){this.appRef.current&&this.appRef.current.toggleSession&&this.appRef.current.toggleSession()}};Gn();var hn=require("obsidian");var ck=["Kore","Puck","Charon","Fenrir","Zephyr"],Hr={voiceName:"Zephyr",customContext:"",systemInstruction:"",manualApiKey:"",serperApiKey:"",chatHistoryFolder:"chat-history"},Du=class extends hn.PluginSettingTab{constructor(n,i){super(n,i);this.plugin=i}display(){let{containerEl:n}=this;n.empty(),n.classList.add("hermes-settings"),n.createEl("h2",{text:"Hermes Voice Assistant"}),new hn.Setting(n).setName("Voice").setDesc("Select the voice persona for the assistant").addDropdown(d=>{ck.forEach(p=>{d.addOption(p,p)}),d.setValue(this.plugin.settings?.voiceName||Hr.voiceName).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.voiceName=p,await this.plugin.saveSettings())})}),new hn.Setting(n).setName("Custom Context").setDesc("Define specific behaviors or rules for the assistant (added to every session)").addTextArea(d=>{d.setPlaceholder("Define specific behaviors, personalities, or rules for the AI...").setValue(this.plugin.settings?.customContext||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.customContext=p,await this.plugin.saveSettings())}),d.inputEl.rows=4,d.inputEl.cols=50});let i=document.createDocumentFragment();i.createSpan({text:"Core logic instructions for the AI assistant"}),i.createEl("br");let o=i.createEl("a",{text:"Reset to default"});o.style.color="rgb(239 68 68)",o.style.cursor="pointer",o.style.fontSize="0.875rem",o.style.transition="color 0.2s",o.addEventListener("mouseenter",()=>{o.style.color="rgb(220 38 38)"}),o.addEventListener("mouseleave",()=>{o.style.color="rgb(239 68 68)"}),o.addEventListener("click",async()=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=zn,await this.plugin.saveSettings(),this.display())}),new hn.Setting(n).setName("System Instructions").setDesc(i).addTextArea(d=>{d.setPlaceholder("Core logic instructions...").setValue(this.plugin.settings?.systemInstruction||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=p,await this.plugin.saveSettings())}),d.inputEl.rows=6,d.inputEl.cols=50}),new hn.Setting(n).setName("Chat History Folder").setDesc("Folder path where chat history will be saved").addText(d=>{d.setPlaceholder("chat-history").setValue(this.plugin.settings?.chatHistoryFolder||Hr.chatHistoryFolder).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.chatHistoryFolder=p,await this.plugin.saveSettings())})}),n.createEl("h3",{text:"API Authentication"}),new hn.Setting(n).setName("Gemini API Key").setDesc("Enter your Gemini API key for the voice assistant").addText(d=>{d.setPlaceholder("Enter your Gemini API Key...").setValue(this.plugin.settings?.manualApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.manualApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let s=document.createDocumentFragment();s.createSpan({text:"API key for image search. Get 2,500 free credits at "}),s.createEl("a",{href:"https://serper.dev/",text:"serper.dev"}).setAttr("target","_blank"),new hn.Setting(n).setName("Serper API Key").setDesc(s).addText(d=>{d.setPlaceholder("Enter your Serper API Key...").setValue(this.plugin.settings?.serperApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.serperApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let l=document.createDocumentFragment(),u=l.createSpan({text:"API keys are handled via manual entry. "}),f=l.createEl("a",{href:"https://ai.google.dev/gemini-api/docs/billing",text:"Learn more about billing."});f.setAttr("target","_blank"),u.append(f),new hn.Setting(n).setDesc(l)}};var ku=class extends X_.Plugin{constructor(){super(...arguments);this.settings=Hr}async onload(){Gd(this),await this.loadSettings();let n=await qd();n?(this.settings={...this.settings,...n},(!this.settings.systemInstruction||this.settings.systemInstruction.trim()==="")&&(this.settings.systemInstruction=zn),await this.saveSettings()):(this.settings.systemInstruction=zn,await this.saveSettings()),this.addSettingTab(new Du(this.app,this)),this.registerView(xi,i=>new Mu(i)),this.addRibbonIcon("mic-vocal","Hermes Voice Assistant",()=>{this.activateView()}),this.addCommand({id:"open-hermes-voice",name:"Open Hermes Assistant",callback:()=>{this.activateView()}}),this.addCommand({id:"start-hermes-conversation",name:"Start Hermes Conversation",callback:()=>{this.startConversation()}}),this.addCommand({id:"stop-hermes-conversation",name:"Stop Hermes Conversation",callback:()=>{this.stopConversation()}}),this.addCommand({id:"toggle-hermes-conversation",name:"Toggle Hermes Conversation",hotkeys:[{modifiers:["Ctrl","Shift"],key:"l"}],callback:()=>{this.toggleConversation()}})}async activateView(){let{workspace:n}=this.app,i=null,o=n.getLeavesOfType(xi);o.length>0?i=o[0]:(i=n.getRightLeaf(!1),i&&await i.setViewState({type:xi,active:!0})),i&&n.revealLeaf(i)}async startConversation(){await this.activateView();let{workspace:n}=this.app,i=n.getLeavesOfType(xi);if(i.length>0){let s=i[0].view;if(s.startSession)s.startSession();else{let r=s.containerEl.querySelector('[data-action="start-session"]');r&&r.click()}}}async stopConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(xi);if(i.length>0){let s=i[0].view;if(s.stopSession)s.stopSession();else{let r=s.containerEl.querySelector('[data-action="stop-session"]');r&&r.click()}}}async toggleConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(xi);if(i.length>0){let s=i[0].view;s.toggleSession?s.toggleSession():s.containerEl.querySelector('[data-action="stop-session"]')?await this.stopConversation():await this.startConversation()}}onunload(){}async loadSettings(){this.settings=Object.assign({},Hr,await this.loadData())}async saveSettings(){await this.saveData(this.settings),await Er(this.settings),typeof window<"u"&&window.hermesSettingsUpdate&&window.hermesSettingsUpdate(this.settings)}};
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
