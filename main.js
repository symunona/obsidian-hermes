var qC=Object.create;var zr=Object.defineProperty;var BC=Object.getOwnPropertyDescriptor;var zC=Object.getOwnPropertyNames;var VC=Object.getPrototypeOf,$C=Object.prototype.hasOwnProperty;var YC=(e,t,n)=>t in e?zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Vr=(e,t)=>()=>(e&&(t=e(e=0)),t);var yn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ae=(e,t)=>{for(var n in t)zr(e,n,{get:t[n],enumerable:!0})},tg=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of zC(t))!$C.call(e,o)&&o!==n&&zr(e,o,{get:()=>t[o],enumerable:!(i=BC(t,o))||i.enumerable});return e};var J=(e,t,n)=>(n=e!=null?qC(VC(e)):{},tg(t||!e||!e.__esModule?zr(n,"default",{value:e,enumerable:!0}):n,e)),JC=e=>tg(zr({},"__esModule",{value:!0}),e);var Pc=(e,t,n)=>(YC(e,typeof t!="symbol"?t+"":t,n),n);var dg=yn(K=>{"use strict";var Hc=Symbol.for("react.transitional.element"),KC=Symbol.for("react.portal"),XC=Symbol.for("react.fragment"),QC=Symbol.for("react.strict_mode"),ZC=Symbol.for("react.profiler"),WC=Symbol.for("react.consumer"),jC=Symbol.for("react.context"),e_=Symbol.for("react.forward_ref"),t_=Symbol.for("react.suspense"),n_=Symbol.for("react.memo"),sg=Symbol.for("react.lazy"),i_=Symbol.for("react.activity"),ng=Symbol.iterator;function o_(e){return e===null||typeof e!="object"?null:(e=ng&&e[ng]||e["@@iterator"],typeof e=="function"?e:null)}var ag={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lg=Object.assign,ug={};function wo(e,t,n){this.props=e,this.context=t,this.refs=ug,this.updater=n||ag}wo.prototype.isReactComponent={};wo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cg(){}cg.prototype=wo.prototype;function Gc(e,t,n){this.props=e,this.context=t,this.refs=ug,this.updater=n||ag}var qc=Gc.prototype=new cg;qc.constructor=Gc;lg(qc,wo.prototype);qc.isPureReactComponent=!0;var ig=Array.isArray;function Oc(){}var Se={H:null,A:null,T:null,S:null},fg=Object.prototype.hasOwnProperty;function Bc(e,t,n){var i=n.ref;return{$$typeof:Hc,type:e,key:t,ref:i!==void 0?i:null,props:n}}function r_(e,t){return Bc(e.type,t,e.props)}function zc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hc}function s_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var og=/\/+/g;function Fc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?s_(""+e.key):t.toString(36)}function a_(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Oc,Oc):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function _o(e,t,n,i,o){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"bigint":case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Hc:case KC:s=!0;break;case sg:return s=e._init,_o(s(e._payload),t,n,i,o)}}if(s)return o=o(e),s=i===""?"."+Fc(e,0):i,ig(o)?(n="",s!=null&&(n=s.replace(og,"$&/")+"/"),_o(o,t,n,"",function(c){return c})):o!=null&&(zc(o)&&(o=r_(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(og,"$&/")+"/")+s)),t.push(o)),1;s=0;var a=i===""?".":i+":";if(ig(e))for(var l=0;l<e.length;l++)i=e[l],r=a+Fc(i,l),s+=_o(i,t,n,r,o);else if(l=o_(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,r=a+Fc(i,l++),s+=_o(i,t,n,r,o);else if(r==="object"){if(typeof e.then=="function")return _o(a_(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function ga(e,t,n){if(e==null)return e;var i=[],o=0;return _o(e,i,"","",function(r){return t.call(n,r,o++)}),i}function l_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rg=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},u_={map:ga,forEach:function(e,t,n){ga(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ga(e,function(){t++}),t},toArray:function(e){return ga(e,function(t){return t})||[]},only:function(e){if(!zc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};K.Activity=i_;K.Children=u_;K.Component=wo;K.Fragment=XC;K.Profiler=ZC;K.PureComponent=Gc;K.StrictMode=QC;K.Suspense=t_;K.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se;K.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Se.H.useMemoCache(e)}};K.cache=function(e){return function(){return e.apply(null,arguments)}};K.cacheSignal=function(){return null};K.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=lg({},e.props),o=e.key;if(t!=null)for(r in t.key!==void 0&&(o=""+t.key),t)!fg.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(i[r]=t[r]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var s=Array(r),a=0;a<r;a++)s[a]=arguments[a+2];i.children=s}return Bc(e.type,o,i)};K.createContext=function(e){return e={$$typeof:jC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:WC,_context:e},e};K.createElement=function(e,t,n){var i,o={},r=null;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)fg.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];o.children=a}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)o[i]===void 0&&(o[i]=s[i]);return Bc(e,r,o)};K.createRef=function(){return{current:null}};K.forwardRef=function(e){return{$$typeof:e_,render:e}};K.isValidElement=zc;K.lazy=function(e){return{$$typeof:sg,_payload:{_status:-1,_result:e},_init:l_}};K.memo=function(e,t){return{$$typeof:n_,type:e,compare:t===void 0?null:t}};K.startTransition=function(e){var t=Se.T,n={};Se.T=n;try{var i=e(),o=Se.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Oc,rg)}catch(r){rg(r)}finally{t!==null&&n.types!==null&&(t.types=n.types),Se.T=t}};K.unstable_useCacheRefresh=function(){return Se.H.useCacheRefresh()};K.use=function(e){return Se.H.use(e)};K.useActionState=function(e,t,n){return Se.H.useActionState(e,t,n)};K.useCallback=function(e,t){return Se.H.useCallback(e,t)};K.useContext=function(e){return Se.H.useContext(e)};K.useDebugValue=function(){};K.useDeferredValue=function(e,t){return Se.H.useDeferredValue(e,t)};K.useEffect=function(e,t){return Se.H.useEffect(e,t)};K.useEffectEvent=function(e){return Se.H.useEffectEvent(e)};K.useId=function(){return Se.H.useId()};K.useImperativeHandle=function(e,t,n){return Se.H.useImperativeHandle(e,t,n)};K.useInsertionEffect=function(e,t){return Se.H.useInsertionEffect(e,t)};K.useLayoutEffect=function(e,t){return Se.H.useLayoutEffect(e,t)};K.useMemo=function(e,t){return Se.H.useMemo(e,t)};K.useOptimistic=function(e,t){return Se.H.useOptimistic(e,t)};K.useReducer=function(e,t,n){return Se.H.useReducer(e,t,n)};K.useRef=function(e){return Se.H.useRef(e)};K.useState=function(e){return Se.H.useState(e)};K.useSyncExternalStore=function(e,t,n){return Se.H.useSyncExternalStore(e,t,n)};K.useTransition=function(){return Se.H.useTransition()};K.version="19.2.3"});var Gt=yn((YF,pg)=>{"use strict";pg.exports=dg()});var Eg=yn(we=>{"use strict";function Jc(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,o=e[i];if(0<ya(o,t))e[i]=t,e[n]=o,n=i;else break e}}function vn(e){return e.length===0?null:e[0]}function Sa(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length,r=o>>>1;i<r;){var s=2*(i+1)-1,a=e[s],l=s+1,c=e[l];if(0>ya(a,n))l<o&&0>ya(c,a)?(e[i]=c,e[l]=n,i=l):(e[i]=a,e[s]=n,i=s);else if(l<o&&0>ya(c,n))e[i]=c,e[l]=n,i=l;else break e}}return t}function ya(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}we.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(mg=performance,we.unstable_now=function(){return mg.now()}):(Vc=Date,hg=Vc.now(),we.unstable_now=function(){return Vc.now()-hg});var mg,Vc,hg,Dn=[],li=[],c_=1,qt=null,st=3,Kc=!1,$r=!1,Yr=!1,Xc=!1,vg=typeof setTimeout=="function"?setTimeout:null,Sg=typeof clearTimeout=="function"?clearTimeout:null,gg=typeof setImmediate<"u"?setImmediate:null;function va(e){for(var t=vn(li);t!==null;){if(t.callback===null)Sa(li);else if(t.startTime<=e)Sa(li),t.sortIndex=t.expirationTime,Jc(Dn,t);else break;t=vn(li)}}function Qc(e){if(Yr=!1,va(e),!$r)if(vn(Dn)!==null)$r=!0,No||(No=!0,bo());else{var t=vn(li);t!==null&&Zc(Qc,t.startTime-e)}}var No=!1,Jr=-1,Tg=5,xg=-1;function Ag(){return Xc?!0:!(we.unstable_now()-xg<Tg)}function $c(){if(Xc=!1,No){var e=we.unstable_now();xg=e;var t=!0;try{e:{$r=!1,Yr&&(Yr=!1,Sg(Jr),Jr=-1),Kc=!0;var n=st;try{t:{for(va(e),qt=vn(Dn);qt!==null&&!(qt.expirationTime>e&&Ag());){var i=qt.callback;if(typeof i=="function"){qt.callback=null,st=qt.priorityLevel;var o=i(qt.expirationTime<=e);if(e=we.unstable_now(),typeof o=="function"){qt.callback=o,va(e),t=!0;break t}qt===vn(Dn)&&Sa(Dn),va(e)}else Sa(Dn);qt=vn(Dn)}if(qt!==null)t=!0;else{var r=vn(li);r!==null&&Zc(Qc,r.startTime-e),t=!1}}break e}finally{qt=null,st=n,Kc=!1}t=void 0}}finally{t?bo():No=!1}}}var bo;typeof gg=="function"?bo=function(){gg($c)}:typeof MessageChannel<"u"?(Yc=new MessageChannel,yg=Yc.port2,Yc.port1.onmessage=$c,bo=function(){yg.postMessage(null)}):bo=function(){vg($c,0)};var Yc,yg;function Zc(e,t){Jr=vg(function(){e(we.unstable_now())},t)}we.unstable_IdlePriority=5;we.unstable_ImmediatePriority=1;we.unstable_LowPriority=4;we.unstable_NormalPriority=3;we.unstable_Profiling=null;we.unstable_UserBlockingPriority=2;we.unstable_cancelCallback=function(e){e.callback=null};we.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Tg=0<e?Math.floor(1e3/e):5};we.unstable_getCurrentPriorityLevel=function(){return st};we.unstable_next=function(e){switch(st){case 1:case 2:case 3:var t=3;break;default:t=st}var n=st;st=t;try{return e()}finally{st=n}};we.unstable_requestPaint=function(){Xc=!0};we.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=st;st=e;try{return t()}finally{st=n}};we.unstable_scheduleCallback=function(e,t,n){var i=we.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?i+n:i):n=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=n+o,e={id:c_++,callback:t,priorityLevel:e,startTime:n,expirationTime:o,sortIndex:-1},n>i?(e.sortIndex=n,Jc(li,e),vn(Dn)===null&&e===vn(li)&&(Yr?(Sg(Jr),Jr=-1):Yr=!0,Zc(Qc,n-i))):(e.sortIndex=o,Jc(Dn,e),$r||Kc||($r=!0,No||(No=!0,bo()))),e};we.unstable_shouldYield=Ag;we.unstable_wrapCallback=function(e){var t=st;return function(){var n=st;st=t;try{return e.apply(this,arguments)}finally{st=n}}}});var _g=yn((KF,Cg)=>{"use strict";Cg.exports=Eg()});var bg=yn(dt=>{"use strict";var f_=Gt();function wg(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ui(){}var ft={d:{f:ui,r:function(){throw Error(wg(522))},D:ui,C:ui,L:ui,m:ui,X:ui,S:ui,M:ui},p:0,findDOMNode:null},d_=Symbol.for("react.portal");function p_(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d_,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Kr=f_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ta(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft;dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(wg(299));return p_(e,t,null,n)};dt.flushSync=function(e){var t=Kr.T,n=ft.p;try{if(Kr.T=null,ft.p=2,e)return e()}finally{Kr.T=t,ft.p=n,ft.d.f()}};dt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ft.d.C(e,t))};dt.prefetchDNS=function(e){typeof e=="string"&&ft.d.D(e)};dt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Ta(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ft.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:r}):n==="script"&&ft.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};dt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Ta(t.as,t.crossOrigin);ft.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ft.d.M(e)};dt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Ta(n,t.crossOrigin);ft.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};dt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Ta(t.as,t.crossOrigin);ft.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ft.d.m(e)};dt.requestFormReset=function(e){ft.d.r(e)};dt.unstable_batchedUpdates=function(e,t){return e(t)};dt.useFormState=function(e,t,n){return Kr.H.useFormState(e,t,n)};dt.useFormStatus=function(){return Kr.H.useHostTransitionStatus()};dt.version="19.2.3"});var Ig=yn((QF,Rg)=>{"use strict";function Ng(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ng)}catch(e){console.error(e)}}Ng(),Rg.exports=bg()});var BS=yn($l=>{"use strict";var ze=_g(),nv=Gt(),m_=Ig();function b(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function iv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Us(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ov(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rv(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mg(e){if(Us(e)!==e)throw Error(b(188))}function h_(e){var t=e.alternate;if(!t){if(t=Us(e),t===null)throw Error(b(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var r=o.alternate;if(r===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===n)return Mg(o),e;if(r===i)return Mg(o),t;r=r.sibling}throw Error(b(188))}if(n.return!==i.return)n=o,i=r;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,i=r;break}if(a===i){s=!0,i=o,n=r;break}a=a.sibling}if(!s){for(a=r.child;a;){if(a===n){s=!0,n=r,i=o;break}if(a===i){s=!0,i=r,n=o;break}a=a.sibling}if(!s)throw Error(b(189))}}if(n.alternate!==i)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?e:t}function sv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=sv(e),t!==null)return t;e=e.sibling}return null}var Ae=Object.assign,g_=Symbol.for("react.element"),xa=Symbol.for("react.transitional.element"),ns=Symbol.for("react.portal"),Uo=Symbol.for("react.fragment"),av=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),lv=Symbol.for("react.consumer"),qn=Symbol.for("react.context"),bd=Symbol.for("react.forward_ref"),Df=Symbol.for("react.suspense"),Uf=Symbol.for("react.suspense_list"),Nd=Symbol.for("react.memo"),ci=Symbol.for("react.lazy");Symbol.for("react.scope");var Lf=Symbol.for("react.activity");Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var y_=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var kg=Symbol.iterator;function Xr(e){return e===null||typeof e!="object"?null:(e=kg&&e[kg]||e["@@iterator"],typeof e=="function"?e:null)}var v_=Symbol.for("react.client.reference");function Pf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===v_?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uo:return"Fragment";case kf:return"Profiler";case av:return"StrictMode";case Df:return"Suspense";case Uf:return"SuspenseList";case Lf:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ns:return"Portal";case qn:return e.displayName||"Context";case lv:return(e._context.displayName||"Context")+".Consumer";case bd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nd:return t=e.displayName||null,t!==null?t:Pf(e.type)||"Memo";case ci:t=e._payload,e=e._init;try{return Pf(e(t))}catch{}}return null}var is=Array.isArray,z=nv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=m_.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ki={pending:!1,data:null,method:null,action:null},Ff=[],Lo=-1;function En(e){return{current:e}}function Xe(e){0>Lo||(e.current=Ff[Lo],Ff[Lo]=null,Lo--)}function ve(e,t){Lo++,Ff[Lo]=e.current,e.current=t}var An=En(null),Ts=En(null),xi=En(null),el=En(null);function tl(e,t){switch(ve(xi,t),ve(Ts,e),ve(An,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Hy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Hy(t),e=NS(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Xe(An),ve(An,e)}function jo(){Xe(An),Xe(Ts),Xe(xi)}function Of(e){e.memoizedState!==null&&ve(el,e);var t=An.current,n=NS(t,e.type);t!==n&&(ve(Ts,e),ve(An,n))}function nl(e){Ts.current===e&&(Xe(An),Xe(Ts)),el.current===e&&(Xe(el),Ms._currentValue=Ki)}var Wc,Dg;function Vi(e){if(Wc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wc=t&&t[1]||"",Dg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wc+e+Dg}var jc=!1;function ef(e,t){if(!e||jc)return"";jc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(h){var m=h}Reflect.construct(e,[],p)}else{try{p.call()}catch(h){m=h}e.call(p.prototype)}}else{try{throw Error()}catch(h){m=h}(p=e())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),s=r[0],a=r[1];if(s&&a){var l=s.split(`
`),c=a.split(`
`);for(o=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(i===l.length||o===c.length)for(i=l.length-1,o=c.length-1;1<=i&&0<=o&&l[i]!==c[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==c[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==c[o]){var d=`
`+l[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=o);break}}}finally{jc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Vi(n):""}function S_(e,t){switch(e.tag){case 26:case 27:case 5:return Vi(e.type);case 16:return Vi("Lazy");case 13:return e.child!==t&&t!==null?Vi("Suspense Fallback"):Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 15:return ef(e.type,!1);case 11:return ef(e.type.render,!1);case 1:return ef(e.type,!0);case 31:return Vi("Activity");default:return""}}function Ug(e){try{var t="",n=null;do t+=S_(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Hf=Object.prototype.hasOwnProperty,Rd=ze.unstable_scheduleCallback,tf=ze.unstable_cancelCallback,T_=ze.unstable_shouldYield,x_=ze.unstable_requestPaint,kt=ze.unstable_now,A_=ze.unstable_getCurrentPriorityLevel,uv=ze.unstable_ImmediatePriority,cv=ze.unstable_UserBlockingPriority,il=ze.unstable_NormalPriority,E_=ze.unstable_LowPriority,fv=ze.unstable_IdlePriority,C_=ze.log,__=ze.unstable_setDisableYieldValue,Ls=null,Dt=null;function gi(e){if(typeof C_=="function"&&__(e),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Ls,e)}catch{}}var Ut=Math.clz32?Math.clz32:N_,w_=Math.log,b_=Math.LN2;function N_(e){return e>>>=0,e===0?32:31-(w_(e)/b_|0)|0}var Aa=256,Ea=262144,Ca=4194304;function $i(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rl(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,r=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var a=i&134217727;return a!==0?(i=a&~r,i!==0?o=$i(i):(s&=a,s!==0?o=$i(s):n||(n=a&~e,n!==0&&(o=$i(n))))):(a=i&~r,a!==0?o=$i(a):s!==0?o=$i(s):n||(n=i&~e,n!==0&&(o=$i(n)))),o===0?0:t!==0&&t!==o&&(t&r)===0&&(r=o&-o,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:o}function Ps(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function R_(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dv(){var e=Ca;return Ca<<=1,(Ca&62914560)===0&&(Ca=4194304),e}function nf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fs(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function I_(e,t,n,i,o,r){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var d=31-Ut(n),p=1<<d;a[d]=0,l[d]=-1;var m=c[d];if(m!==null)for(c[d]=null,d=0;d<m.length;d++){var h=m[d];h!==null&&(h.lane&=-536870913)}n&=~p}i!==0&&pv(e,i,0),r!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=r&~(s&~t))}function pv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Ut(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function mv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ut(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function hv(e,t){var n=t&-t;return n=(n&42)!==0?1:Id(n),(n&(e.suspendedLanes|t))!==0?0:n}function Id(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Md(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gv(){var e=re.p;return e!==0?e:(e=window.event,e===void 0?32:HS(e.type))}function Lg(e,t){var n=re.p;try{return re.p=e,t()}finally{re.p=n}}var Ui=Math.random().toString(36).slice(2),je="__reactFiber$"+Ui,At="__reactProps$"+Ui,cr="__reactContainer$"+Ui,Gf="__reactEvents$"+Ui,M_="__reactListeners$"+Ui,k_="__reactHandles$"+Ui,Pg="__reactResources$"+Ui,Os="__reactMarker$"+Ui;function kd(e){delete e[je],delete e[At],delete e[Gf],delete e[M_],delete e[k_]}function Po(e){var t=e[je];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cr]||n[je]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Vy(e);e!==null;){if(n=e[je])return n;e=Vy(e)}return t}e=n,n=e.parentNode}return null}function fr(e){if(e=e[je]||e[cr]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function os(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(b(33))}function Yo(e){var t=e[Pg];return t||(t=e[Pg]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Os]=!0}var yv=new Set,vv={};function oo(e,t){er(e,t),er(e+"Capture",t)}function er(e,t){for(vv[e]=t,e=0;e<t.length;e++)yv.add(t[e])}var D_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fg={},Og={};function U_(e){return Hf.call(Og,e)?!0:Hf.call(Fg,e)?!1:D_.test(e)?Og[e]=!0:(Fg[e]=!0,!1)}function Ha(e,t,n){if(U_(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function _a(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Un(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function L_(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,r=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){n=""+s,r.call(this,s)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qf(e){if(!e._valueTracker){var t=Sv(e)?"checked":"value";e._valueTracker=L_(e,t,""+e[t])}}function Tv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Sv(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var P_=/[\n"\\]/g;function Yt(e){return e.replace(P_,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Bf(e,t,n,i,o,r,s,a){e.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.type=s:e.removeAttribute("type"),t!=null?s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+zt(t)):e.value!==""+zt(t)&&(e.value=""+zt(t)):s!=="submit"&&s!=="reset"||e.removeAttribute("value"),t!=null?zf(e,s,zt(t)):n!=null?zf(e,s,zt(n)):i!=null&&e.removeAttribute("value"),o==null&&r!=null&&(e.defaultChecked=!!r),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+zt(a):e.removeAttribute("name")}function xv(e,t,n,i,o,r,s,a){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){qf(e);return}n=n!=null?""+zt(n):"",t=t!=null?""+zt(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.name=s),qf(e)}function zf(e,t,n){t==="number"&&ol(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Jo(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+zt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Av(e,t,n){if(t!=null&&(t=""+zt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+zt(n):""}function Ev(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(b(92));if(is(i)){if(1<i.length)throw Error(b(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=zt(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),qf(e)}function tr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var F_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hg(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||F_.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Cv(e,t,n){if(t!=null&&typeof t!="object")throw Error(b(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&Hg(e,o,i)}else for(var r in t)t.hasOwnProperty(r)&&Hg(e,r,t[r])}function Dd(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var O_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),H_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ga(e){return H_.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Bn(){}var Vf=null;function Ud(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fo=null,Ko=null;function Gg(e){var t=fr(e);if(t&&(e=t.stateNode)){var n=e[At]||null;e:switch(e=t.stateNode,t.type){case"input":if(Bf(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[At]||null;if(!o)throw Error(b(90));Bf(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Tv(i)}break e;case"textarea":Av(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Jo(e,!!n.multiple,t,!1)}}}var of=!1;function _v(e,t,n){if(of)return e(t,n);of=!0;try{var i=e(t);return i}finally{if(of=!1,(Fo!==null||Ko!==null)&&(ql(),Fo&&(t=Fo,e=Ko,Ko=Fo=null,Gg(t),e)))for(t=0;t<e.length;t++)Gg(e[t])}}function xs(e,t){var n=e.stateNode;if(n===null)return null;var i=n[At]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(b(231,t,typeof n));return n}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$f=!1;if(Jn)try{Ro={},Object.defineProperty(Ro,"passive",{get:function(){$f=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{$f=!1}var Ro,yi=null,Ld=null,qa=null;function wv(){if(qa)return qa;var e,t=Ld,n=t.length,i,o="value"in yi?yi.value:yi.textContent,r=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(i=1;i<=s&&t[n-i]===o[r-i];i++);return qa=o.slice(e,1<i?1-i:void 0)}function Ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wa(){return!0}function qg(){return!1}function Et(e){function t(n,i,o,r,s){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=r,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?wa:qg,this.isPropagationStopped=qg,this}return Ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),t}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=Et(ro),Hs=Ae({},ro,{view:0,detail:0}),G_=Et(Hs),rf,sf,Qr,Ml=Ae({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(rf=e.screenX-Qr.screenX,sf=e.screenY-Qr.screenY):sf=rf=0,Qr=e),rf)},movementY:function(e){return"movementY"in e?e.movementY:sf}}),Bg=Et(Ml),q_=Ae({},Ml,{dataTransfer:0}),B_=Et(q_),z_=Ae({},Hs,{relatedTarget:0}),af=Et(z_),V_=Ae({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),$_=Et(V_),Y_=Ae({},ro,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),J_=Et(Y_),K_=Ae({},ro,{data:0}),zg=Et(K_),X_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Z_[e])?!!t[e]:!1}function Pd(){return W_}var j_=Ae({},Hs,{key:function(e){if(e.key){var t=X_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Q_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pd,charCode:function(e){return e.type==="keypress"?Ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ew=Et(j_),tw=Ae({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vg=Et(tw),nw=Ae({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pd}),iw=Et(nw),ow=Ae({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),rw=Et(ow),sw=Ae({},Ml,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aw=Et(sw),lw=Ae({},ro,{newState:0,oldState:0}),uw=Et(lw),cw=[9,13,27,32],Fd=Jn&&"CompositionEvent"in window,as=null;Jn&&"documentMode"in document&&(as=document.documentMode);var fw=Jn&&"TextEvent"in window&&!as,bv=Jn&&(!Fd||as&&8<as&&11>=as),$g=String.fromCharCode(32),Yg=!1;function Nv(e,t){switch(e){case"keyup":return cw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oo=!1;function dw(e,t){switch(e){case"compositionend":return Rv(t);case"keypress":return t.which!==32?null:(Yg=!0,$g);case"textInput":return e=t.data,e===$g&&Yg?null:e;default:return null}}function pw(e,t){if(Oo)return e==="compositionend"||!Fd&&Nv(e,t)?(e=wv(),qa=Ld=yi=null,Oo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bv&&t.locale!=="ko"?null:t.data;default:return null}}var mw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mw[e.type]:t==="textarea"}function Iv(e,t,n,i){Fo?Ko?Ko.push(i):Ko=[i]:Fo=i,t=Al(t,"onChange"),0<t.length&&(n=new Il("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ls=null,As=null;function hw(e){_S(e,0)}function kl(e){var t=os(e);if(Tv(t))return e}function Kg(e,t){if(e==="change")return t}var Mv=!1;Jn&&(Jn?(Na="oninput"in document,Na||(lf=document.createElement("div"),lf.setAttribute("oninput","return;"),Na=typeof lf.oninput=="function"),ba=Na):ba=!1,Mv=ba&&(!document.documentMode||9<document.documentMode));var ba,Na,lf;function Xg(){ls&&(ls.detachEvent("onpropertychange",kv),As=ls=null)}function kv(e){if(e.propertyName==="value"&&kl(As)){var t=[];Iv(t,As,e,Ud(e)),_v(hw,t)}}function gw(e,t,n){e==="focusin"?(Xg(),ls=t,As=n,ls.attachEvent("onpropertychange",kv)):e==="focusout"&&Xg()}function yw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kl(As)}function vw(e,t){if(e==="click")return kl(t)}function Sw(e,t){if(e==="input"||e==="change")return kl(t)}function Tw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:Tw;function Es(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Hf.call(t,o)||!Pt(e[o],t[o]))return!1}return!0}function Qg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zg(e,t){var n=Qg(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qg(n)}}function Dv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ol(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ol(e.document)}return t}function Od(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var xw=Jn&&"documentMode"in document&&11>=document.documentMode,Ho=null,Yf=null,us=null,Jf=!1;function Wg(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jf||Ho==null||Ho!==ol(i)||(i=Ho,"selectionStart"in i&&Od(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),us&&Es(us,i)||(us=i,i=Al(Yf,"onSelect"),0<i.length&&(t=new Il("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ho)))}function zi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Go={animationend:zi("Animation","AnimationEnd"),animationiteration:zi("Animation","AnimationIteration"),animationstart:zi("Animation","AnimationStart"),transitionrun:zi("Transition","TransitionRun"),transitionstart:zi("Transition","TransitionStart"),transitioncancel:zi("Transition","TransitionCancel"),transitionend:zi("Transition","TransitionEnd")},uf={},Lv={};Jn&&(Lv=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function so(e){if(uf[e])return uf[e];if(!Go[e])return e;var t=Go[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Lv)return uf[e]=t[n];return e}var Pv=so("animationend"),Fv=so("animationiteration"),Ov=so("animationstart"),Aw=so("transitionrun"),Ew=so("transitionstart"),Cw=so("transitioncancel"),Hv=so("transitionend"),Gv=new Map,Kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kf.push("scrollEnd");function rn(e,t){Gv.set(e,t),oo(t,[e])}var rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bt=[],qo=0,Hd=0;function Dl(){for(var e=qo,t=Hd=qo=0;t<e;){var n=Bt[t];Bt[t++]=null;var i=Bt[t];Bt[t++]=null;var o=Bt[t];Bt[t++]=null;var r=Bt[t];if(Bt[t++]=null,i!==null&&o!==null){var s=i.pending;s===null?o.next=o:(o.next=s.next,s.next=o),i.pending=o}r!==0&&qv(n,o,r)}}function Ul(e,t,n,i){Bt[qo++]=e,Bt[qo++]=t,Bt[qo++]=n,Bt[qo++]=i,Hd|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Gd(e,t,n,i){return Ul(e,t,n,i),sl(e)}function ao(e,t){return Ul(e,null,null,t),sl(e)}function qv(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,r=e.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(o=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,o&&t!==null&&(o=31-Ut(n),e=r.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),r):null}function sl(e){if(50<vs)throw vs=0,hd=null,Error(b(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Bo={};function _w(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,n,i){return new _w(e,t,n,i)}function qd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vn(e,t){var n=e.alternate;return n===null?(n=It(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Bv(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function za(e,t,n,i,o,r){var s=0;if(i=e,typeof e=="function")qd(e)&&(s=1);else if(typeof e=="string")s=Nb(e,n,An.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Lf:return e=It(31,n,t,o),e.elementType=Lf,e.lanes=r,e;case Uo:return Xi(n.children,o,r,t);case av:s=8,o|=24;break;case kf:return e=It(12,n,t,o|2),e.elementType=kf,e.lanes=r,e;case Df:return e=It(13,n,t,o),e.elementType=Df,e.lanes=r,e;case Uf:return e=It(19,n,t,o),e.elementType=Uf,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qn:s=10;break e;case lv:s=9;break e;case bd:s=11;break e;case Nd:s=14;break e;case ci:s=16,i=null;break e}s=29,n=Error(b(130,e===null?"null":typeof e,"")),i=null}return t=It(s,n,t,o),t.elementType=e,t.type=i,t.lanes=r,t}function Xi(e,t,n,i){return e=It(7,e,i,t),e.lanes=n,e}function cf(e,t,n){return e=It(6,e,null,t),e.lanes=n,e}function zv(e){var t=It(18,null,null,0);return t.stateNode=e,t}function ff(e,t,n){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var jg=new WeakMap;function Jt(e,t){if(typeof e=="object"&&e!==null){var n=jg.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Ug(t)},jg.set(e,t),t)}return{value:e,source:t,stack:Ug(t)}}var zo=[],Vo=0,al=null,Cs=0,Vt=[],$t=0,Ii=null,Sn=1,Tn="";function Hn(e,t){zo[Vo++]=Cs,zo[Vo++]=al,al=e,Cs=t}function Vv(e,t,n){Vt[$t++]=Sn,Vt[$t++]=Tn,Vt[$t++]=Ii,Ii=e;var i=Sn;e=Tn;var o=32-Ut(i)-1;i&=~(1<<o),n+=1;var r=32-Ut(t)+o;if(30<r){var s=o-o%5;r=(i&(1<<s)-1).toString(32),i>>=s,o-=s,Sn=1<<32-Ut(t)+o|n<<o|i,Tn=r+e}else Sn=1<<r|n<<o|i,Tn=e}function Bd(e){e.return!==null&&(Hn(e,1),Vv(e,1,0))}function zd(e){for(;e===al;)al=zo[--Vo],zo[Vo]=null,Cs=zo[--Vo],zo[Vo]=null;for(;e===Ii;)Ii=Vt[--$t],Vt[$t]=null,Tn=Vt[--$t],Vt[$t]=null,Sn=Vt[--$t],Vt[$t]=null}function $v(e,t){Vt[$t++]=Sn,Vt[$t++]=Tn,Vt[$t++]=Ii,Sn=t.id,Tn=t.overflow,Ii=e}var et=null,xe=null,ee=!1,Ai=null,Kt=!1,Xf=Error(b(519));function Mi(e){var t=Error(b(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _s(Jt(t,e)),Xf}function ey(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[je]=e,t[At]=i,n){case"dialog":Q("cancel",t),Q("close",t);break;case"iframe":case"object":case"embed":Q("load",t);break;case"video":case"audio":for(n=0;n<Rs.length;n++)Q(Rs[n],t);break;case"source":Q("error",t);break;case"img":case"image":case"link":Q("error",t),Q("load",t);break;case"details":Q("toggle",t);break;case"input":Q("invalid",t),xv(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Q("invalid",t);break;case"textarea":Q("invalid",t),Ev(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||bS(t.textContent,n)?(i.popover!=null&&(Q("beforetoggle",t),Q("toggle",t)),i.onScroll!=null&&Q("scroll",t),i.onScrollEnd!=null&&Q("scrollend",t),i.onClick!=null&&(t.onclick=Bn),t=!0):t=!1,t||Mi(e,!0)}function ty(e){for(et=e.return;et;)switch(et.tag){case 5:case 31:case 13:Kt=!1;return;case 27:case 3:Kt=!0;return;default:et=et.return}}function Io(e){if(e!==et)return!1;if(!ee)return ty(e),ee=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Td(e.type,e.memoizedProps)),n=!n),n&&xe&&Mi(e),ty(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));xe=zy(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));xe=zy(e)}else t===27?(t=xe,Li(e.type)?(e=Cd,Cd=null,xe=e):xe=t):xe=et?Qt(e.stateNode.nextSibling):null;return!0}function ji(){xe=et=null,ee=!1}function df(){var e=Ai;return e!==null&&(Tt===null?Tt=e:Tt.push.apply(Tt,e),Ai=null),e}function _s(e){Ai===null?Ai=[e]:Ai.push(e)}var Qf=En(null),lo=null,zn=null;function di(e,t,n){ve(Qf,t._currentValue),t._currentValue=n}function $n(e){e._currentValue=Qf.current,Xe(Qf)}function Zf(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Wf(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var r=o.dependencies;if(r!==null){var s=o.child;r=r.firstContext;e:for(;r!==null;){var a=r;r=o;for(var l=0;l<t.length;l++)if(a.context===t[l]){r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),Zf(r.return,n,e),i||(s=null);break e}r=a.next}}else if(o.tag===18){if(s=o.return,s===null)throw Error(b(341));s.lanes|=n,r=s.alternate,r!==null&&(r.lanes|=n),Zf(s,n,e),s=null}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}}function dr(e,t,n,i){e=null;for(var o=t,r=!1;o!==null;){if(!r){if((o.flags&524288)!==0)r=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var s=o.alternate;if(s===null)throw Error(b(387));if(s=s.memoizedProps,s!==null){var a=o.type;Pt(o.pendingProps.value,s.value)||(e!==null?e.push(a):e=[a])}}else if(o===el.current){if(s=o.alternate,s===null)throw Error(b(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Ms):e=[Ms])}o=o.return}e!==null&&Wf(t,e,n,i),t.flags|=262144}function ll(e){for(e=e.firstContext;e!==null;){if(!Pt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function eo(e){lo=e,zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function tt(e){return Yv(lo,e)}function Ra(e,t){return lo===null&&eo(e),Yv(e,t)}function Yv(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},zn===null){if(e===null)throw Error(b(308));zn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else zn=zn.next=t;return n}var ww=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},bw=ze.unstable_scheduleCallback,Nw=ze.unstable_NormalPriority,Fe={$$typeof:qn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vd(){return{controller:new ww,data:new Map,refCount:0}}function Gs(e){e.refCount--,e.refCount===0&&bw(Nw,function(){e.controller.abort()})}var cs=null,jf=0,nr=0,Xo=null;function Rw(e,t){if(cs===null){var n=cs=[];jf=0,nr=hp(),Xo={status:"pending",value:void 0,then:function(i){n.push(i)}}}return jf++,t.then(ny,ny),t}function ny(){if(--jf===0&&cs!==null){Xo!==null&&(Xo.status="fulfilled");var e=cs;cs=null,nr=0,Xo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Iw(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var iy=z.S;z.S=function(e,t){sS=kt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Rw(e,t),iy!==null&&iy(e,t)};var Qi=En(null);function $d(){var e=Qi.current;return e!==null?e:ge.pooledCache}function Va(e,t){t===null?ve(Qi,Qi.current):ve(Qi,t.pool)}function Jv(){var e=$d();return e===null?null:{parent:Fe._currentValue,pool:e}}var pr=Error(b(460)),Yd=Error(b(474)),Ll=Error(b(542)),ul={then:function(){}};function oy(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Kv(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Bn,Bn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,sy(e),e;default:if(typeof t.status=="string")t.then(Bn,Bn);else{if(e=ge,e!==null&&100<e.shellSuspendCounter)throw Error(b(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,sy(e),e}throw Zi=t,pr}}function Yi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Zi=n,pr):n}}var Zi=null;function ry(){if(Zi===null)throw Error(b(459));var e=Zi;return Zi=null,e}function sy(e){if(e===pr||e===Ll)throw Error(b(483))}var Qo=null,ws=0;function Ia(e){var t=ws;return ws+=1,Qo===null&&(Qo=[]),Kv(Qo,e,t)}function Zr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ma(e,t){throw t.$$typeof===g_?Error(b(525)):(e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Xv(e){function t(y,v){if(e){var S=y.deletions;S===null?(y.deletions=[v],y.flags|=16):S.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function i(y){for(var v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function o(y,v){return y=Vn(y,v),y.index=0,y.sibling=null,y}function r(y,v,S){return y.index=S,e?(S=y.alternate,S!==null?(S=S.index,S<v?(y.flags|=67108866,v):S):(y.flags|=67108866,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function a(y,v,S,A){return v===null||v.tag!==6?(v=cf(S,y.mode,A),v.return=y,v):(v=o(v,S),v.return=y,v)}function l(y,v,S,A){var _=S.type;return _===Uo?d(y,v,S.props.children,A,S.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ci&&Yi(_)===v.type)?(v=o(v,S.props),Zr(v,S),v.return=y,v):(v=za(S.type,S.key,S.props,null,y.mode,A),Zr(v,S),v.return=y,v)}function c(y,v,S,A){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=ff(S,y.mode,A),v.return=y,v):(v=o(v,S.children||[]),v.return=y,v)}function d(y,v,S,A,_){return v===null||v.tag!==7?(v=Xi(S,y.mode,A,_),v.return=y,v):(v=o(v,S),v.return=y,v)}function p(y,v,S){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=cf(""+v,y.mode,S),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xa:return S=za(v.type,v.key,v.props,null,y.mode,S),Zr(S,v),S.return=y,S;case ns:return v=ff(v,y.mode,S),v.return=y,v;case ci:return v=Yi(v),p(y,v,S)}if(is(v)||Xr(v))return v=Xi(v,y.mode,S,null),v.return=y,v;if(typeof v.then=="function")return p(y,Ia(v),S);if(v.$$typeof===qn)return p(y,Ra(y,v),S);Ma(y,v)}return null}function m(y,v,S,A){var _=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return _!==null?null:a(y,v,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xa:return S.key===_?l(y,v,S,A):null;case ns:return S.key===_?c(y,v,S,A):null;case ci:return S=Yi(S),m(y,v,S,A)}if(is(S)||Xr(S))return _!==null?null:d(y,v,S,A,null);if(typeof S.then=="function")return m(y,v,Ia(S),A);if(S.$$typeof===qn)return m(y,v,Ra(y,S),A);Ma(y,S)}return null}function h(y,v,S,A,_){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return y=y.get(S)||null,a(v,y,""+A,_);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case xa:return y=y.get(A.key===null?S:A.key)||null,l(v,y,A,_);case ns:return y=y.get(A.key===null?S:A.key)||null,c(v,y,A,_);case ci:return A=Yi(A),h(y,v,S,A,_)}if(is(A)||Xr(A))return y=y.get(S)||null,d(v,y,A,_,null);if(typeof A.then=="function")return h(y,v,S,Ia(A),_);if(A.$$typeof===qn)return h(y,v,S,Ra(v,A),_);Ma(v,A)}return null}function g(y,v,S,A){for(var _=null,R=null,C=v,M=v=0,I=null;C!==null&&M<S.length;M++){C.index>M?(I=C,C=null):I=C.sibling;var N=m(y,C,S[M],A);if(N===null){C===null&&(C=I);break}e&&C&&N.alternate===null&&t(y,C),v=r(N,v,M),R===null?_=N:R.sibling=N,R=N,C=I}if(M===S.length)return n(y,C),ee&&Hn(y,M),_;if(C===null){for(;M<S.length;M++)C=p(y,S[M],A),C!==null&&(v=r(C,v,M),R===null?_=C:R.sibling=C,R=C);return ee&&Hn(y,M),_}for(C=i(C);M<S.length;M++)I=h(C,y,M,S[M],A),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?M:I.key),v=r(I,v,M),R===null?_=I:R.sibling=I,R=I);return e&&C.forEach(function(G){return t(y,G)}),ee&&Hn(y,M),_}function T(y,v,S,A){if(S==null)throw Error(b(151));for(var _=null,R=null,C=v,M=v=0,I=null,N=S.next();C!==null&&!N.done;M++,N=S.next()){C.index>M?(I=C,C=null):I=C.sibling;var G=m(y,C,N.value,A);if(G===null){C===null&&(C=I);break}e&&C&&G.alternate===null&&t(y,C),v=r(G,v,M),R===null?_=G:R.sibling=G,R=G,C=I}if(N.done)return n(y,C),ee&&Hn(y,M),_;if(C===null){for(;!N.done;M++,N=S.next())N=p(y,N.value,A),N!==null&&(v=r(N,v,M),R===null?_=N:R.sibling=N,R=N);return ee&&Hn(y,M),_}for(C=i(C);!N.done;M++,N=S.next())N=h(C,y,M,N.value,A),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?M:N.key),v=r(N,v,M),R===null?_=N:R.sibling=N,R=N);return e&&C.forEach(function(ye){return t(y,ye)}),ee&&Hn(y,M),_}function x(y,v,S,A){if(typeof S=="object"&&S!==null&&S.type===Uo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case xa:e:{for(var _=S.key;v!==null;){if(v.key===_){if(_=S.type,_===Uo){if(v.tag===7){n(y,v.sibling),A=o(v,S.props.children),A.return=y,y=A;break e}}else if(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ci&&Yi(_)===v.type){n(y,v.sibling),A=o(v,S.props),Zr(A,S),A.return=y,y=A;break e}n(y,v);break}else t(y,v);v=v.sibling}S.type===Uo?(A=Xi(S.props.children,y.mode,A,S.key),A.return=y,y=A):(A=za(S.type,S.key,S.props,null,y.mode,A),Zr(A,S),A.return=y,y=A)}return s(y);case ns:e:{for(_=S.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(y,v.sibling),A=o(v,S.children||[]),A.return=y,y=A;break e}else{n(y,v);break}else t(y,v);v=v.sibling}A=ff(S,y.mode,A),A.return=y,y=A}return s(y);case ci:return S=Yi(S),x(y,v,S,A)}if(is(S))return g(y,v,S,A);if(Xr(S)){if(_=Xr(S),typeof _!="function")throw Error(b(150));return S=_.call(S),T(y,v,S,A)}if(typeof S.then=="function")return x(y,v,Ia(S),A);if(S.$$typeof===qn)return x(y,v,Ra(y,S),A);Ma(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,v!==null&&v.tag===6?(n(y,v.sibling),A=o(v,S),A.return=y,y=A):(n(y,v),A=cf(S,y.mode,A),A.return=y,y=A),s(y)):n(y,v)}return function(y,v,S,A){try{ws=0;var _=x(y,v,S,A);return Qo=null,_}catch(C){if(C===pr||C===Ll)throw C;var R=It(29,C,null,y.mode);return R.lanes=A,R.return=y,R}finally{}}}var to=Xv(!0),Qv=Xv(!1),fi=!1;function Jd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ed(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ci(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(oe&2)!==0){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=sl(e),qv(e,null,n),t}return Ul(e,i,t,n),sl(e)}function fs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,mv(e,n)}}function pf(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?o=r=s:r=r.next=s,n=n.next}while(n!==null);r===null?o=r=t:r=r.next=t}else o=r=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var td=!1;function ds(){if(td){var e=Xo;if(e!==null)throw e}}function ps(e,t,n,i){td=!1;var o=e.updateQueue;fi=!1;var r=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?r=c:s.next=c,s=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(r!==null){var p=o.baseState;s=0,d=c=l=null,a=r;do{var m=a.lane&-536870913,h=m!==a.lane;if(h?(W&m)===m:(i&m)===m){m!==0&&m===nr&&(td=!0),d!==null&&(d=d.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,T=a;m=t;var x=n;switch(T.tag){case 1:if(g=T.payload,typeof g=="function"){p=g.call(x,p,m);break e}p=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=T.payload,m=typeof g=="function"?g.call(x,p,m):g,m==null)break e;p=Ae({},p,m);break e;case 2:fi=!0}}m=a.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=o.callbacks,h===null?o.callbacks=[m]:h.push(m))}else h={lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=h,l=p):d=d.next=h,s|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);d===null&&(l=p),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,r===null&&(o.shared.lanes=0),Di|=s,e.lanes=s,e.memoizedState=p}}function Zv(e,t){if(typeof e!="function")throw Error(b(191,e));e.call(t)}function Wv(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Zv(n[e],t)}var ir=En(null),cl=En(0);function ay(e,t){e=Zn,ve(cl,e),ve(ir,t),Zn=e|t.baseLanes}function nd(){ve(cl,Zn),ve(ir,ir.current)}function Kd(){Zn=cl.current,Xe(ir),Xe(cl)}var Ft=En(null),Xt=null;function pi(e){var t=e.alternate;ve(De,De.current&1),ve(Ft,e),Xt===null&&(t===null||ir.current!==null||t.memoizedState!==null)&&(Xt=e)}function id(e){ve(De,De.current),ve(Ft,e),Xt===null&&(Xt=e)}function jv(e){e.tag===22?(ve(De,De.current),ve(Ft,e),Xt===null&&(Xt=e)):mi(e)}function mi(){ve(De,De.current),ve(Ft,Ft.current)}function Rt(e){Xe(Ft),Xt===e&&(Xt=null),Xe(De)}var De=En(0);function fl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ad(n)||Ed(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Kn=0,X=null,pe=null,Le=null,dl=!1,Zo=!1,no=!1,pl=0,bs=0,Wo=null,Mw=0;function Re(){throw Error(b(321))}function Xd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pt(e[n],t[n]))return!1;return!0}function Qd(e,t,n,i,o,r){return Kn=r,X=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=e===null||e.memoizedState===null?I0:ap,no=!1,r=n(i,o),no=!1,Zo&&(r=t0(t,n,i,o)),e0(e),r}function e0(e){z.H=Ns;var t=pe!==null&&pe.next!==null;if(Kn=0,Le=pe=X=null,dl=!1,bs=0,Wo=null,t)throw Error(b(300));e===null||Oe||(e=e.dependencies,e!==null&&ll(e)&&(Oe=!0))}function t0(e,t,n,i){X=e;var o=0;do{if(Zo&&(Wo=null),bs=0,Zo=!1,25<=o)throw Error(b(301));if(o+=1,Le=pe=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}z.H=M0,r=t(n,i)}while(Zo);return r}function kw(){var e=z.H,t=e.useState()[0];return t=typeof t.then=="function"?qs(t):t,e=e.useState()[0],(pe!==null?pe.memoizedState:null)!==e&&(X.flags|=1024),t}function Zd(){var e=pl!==0;return pl=0,e}function Wd(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function jd(e){if(dl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}dl=!1}Kn=0,Le=pe=X=null,Zo=!1,bs=pl=0,Wo=null}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?X.memoizedState=Le=e:Le=Le.next=e,Le}function Ue(){if(pe===null){var e=X.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var t=Le===null?X.memoizedState:Le.next;if(t!==null)Le=t,pe=e;else{if(e===null)throw X.alternate===null?Error(b(467)):Error(b(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},Le===null?X.memoizedState=Le=e:Le=Le.next=e}return Le}function Pl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qs(e){var t=bs;return bs+=1,Wo===null&&(Wo=[]),e=Kv(Wo,e,t),t=X,(Le===null?t.memoizedState:Le.next)===null&&(t=t.alternate,z.H=t===null||t.memoizedState===null?I0:ap),e}function Fl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qs(e);if(e.$$typeof===qn)return tt(e)}throw Error(b(438,String(e)))}function ep(e){var t=null,n=X.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=X.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Pl(),X.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=y_;return t.index++,n}function Xn(e,t){return typeof t=="function"?t(e):t}function $a(e){var t=Ue();return tp(t,pe,e)}function tp(e,t,n){var i=e.queue;if(i===null)throw Error(b(311));i.lastRenderedReducer=n;var o=e.baseQueue,r=i.pending;if(r!==null){if(o!==null){var s=o.next;o.next=r.next,r.next=s}t.baseQueue=o=r,i.pending=null}if(r=e.baseState,o===null)e.memoizedState=r;else{t=o.next;var a=s=null,l=null,c=t,d=!1;do{var p=c.lane&-536870913;if(p!==c.lane?(W&p)===p:(Kn&p)===p){var m=c.revertLane;if(m===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===nr&&(d=!0);else if((Kn&m)===m){c=c.next,m===nr&&(d=!0);continue}else p={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=p,s=r):l=l.next=p,X.lanes|=m,Di|=m;p=c.action,no&&n(r,p),r=c.hasEagerState?c.eagerState:n(r,p)}else m={lane:p,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=m,s=r):l=l.next=m,X.lanes|=p,Di|=p;c=c.next}while(c!==null&&c!==t);if(l===null?s=r:l.next=a,!Pt(r,e.memoizedState)&&(Oe=!0,d&&(n=Xo,n!==null)))throw n;e.memoizedState=r,e.baseState=s,e.baseQueue=l,i.lastRenderedState=r}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function mf(e){var t=Ue(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,r=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do r=e(r,s.action),s=s.next;while(s!==o);Pt(r,t.memoizedState)||(Oe=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function n0(e,t,n){var i=X,o=Ue(),r=ee;if(r){if(n===void 0)throw Error(b(407));n=n()}else n=t();var s=!Pt((pe||o).memoizedState,n);if(s&&(o.memoizedState=n,Oe=!0),o=o.queue,np(r0.bind(null,i,o,e),[e]),o.getSnapshot!==t||s||Le!==null&&Le.memoizedState.tag&1){if(i.flags|=2048,or(9,{destroy:void 0},o0.bind(null,i,o,n,t),null),ge===null)throw Error(b(349));r||(Kn&127)!==0||i0(i,t,n)}return n}function i0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=X.updateQueue,t===null?(t=Pl(),X.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function o0(e,t,n,i){t.value=n,t.getSnapshot=i,s0(t)&&a0(e)}function r0(e,t,n){return n(function(){s0(t)&&a0(e)})}function s0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pt(e,n)}catch{return!0}}function a0(e){var t=ao(e,2);t!==null&&xt(t,e,2)}function od(e){var t=pt();if(typeof e=="function"){var n=e;if(e=n(),no){gi(!0);try{n()}finally{gi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:e},t}function l0(e,t,n,i){return e.baseState=n,tp(e,pe,typeof i=="function"?i:Xn)}function Dw(e,t,n,i,o){if(Hl(e))throw Error(b(485));if(e=t.action,e!==null){var r={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){r.listeners.push(s)}};z.T!==null?n(!0):r.isTransition=!1,i(r),n=t.pending,n===null?(r.next=t.pending=r,u0(t,r)):(r.next=n.next,t.pending=n.next=r)}}function u0(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var r=z.T,s={};z.T=s;try{var a=n(o,i),l=z.S;l!==null&&l(s,a),ly(e,t,a)}catch(c){rd(e,t,c)}finally{r!==null&&s.types!==null&&(r.types=s.types),z.T=r}}else try{r=n(o,i),ly(e,t,r)}catch(c){rd(e,t,c)}}function ly(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){uy(e,t,i)},function(i){return rd(e,t,i)}):uy(e,t,n)}function uy(e,t,n){t.status="fulfilled",t.value=n,c0(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,u0(e,n)))}function rd(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,c0(t),t=t.next;while(t!==i)}e.action=null}function c0(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function f0(e,t){return t}function cy(e,t){if(ee){var n=ge.formState;if(n!==null){e:{var i=X;if(ee){if(xe){t:{for(var o=xe,r=Kt;o.nodeType!==8;){if(!r){o=null;break t}if(o=Qt(o.nextSibling),o===null){o=null;break t}}r=o.data,o=r==="F!"||r==="F"?o:null}if(o){xe=Qt(o.nextSibling),i=o.data==="F!";break e}}Mi(i)}i=!1}i&&(t=n[0])}}return n=pt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f0,lastRenderedState:t},n.queue=i,n=b0.bind(null,X,i),i.dispatch=n,i=od(!1),r=sp.bind(null,X,!1,i.queue),i=pt(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=Dw.bind(null,X,o,r,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function fy(e){var t=Ue();return d0(t,pe,e)}function d0(e,t,n){if(t=tp(e,t,f0)[0],e=$a(Xn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=qs(t)}catch(s){throw s===pr?Ll:s}else i=t;t=Ue();var o=t.queue,r=o.dispatch;return n!==t.memoizedState&&(X.flags|=2048,or(9,{destroy:void 0},Uw.bind(null,o,n),null)),[i,r,e]}function Uw(e,t){e.action=t}function dy(e){var t=Ue(),n=pe;if(n!==null)return d0(t,n,e);Ue(),t=t.memoizedState,n=Ue();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function or(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=X.updateQueue,t===null&&(t=Pl(),X.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function p0(){return Ue().memoizedState}function Ya(e,t,n,i){var o=pt();X.flags|=e,o.memoizedState=or(1|t,{destroy:void 0},n,i===void 0?null:i)}function Ol(e,t,n,i){var o=Ue();i=i===void 0?null:i;var r=o.memoizedState.inst;pe!==null&&i!==null&&Xd(i,pe.memoizedState.deps)?o.memoizedState=or(t,r,n,i):(X.flags|=e,o.memoizedState=or(1|t,r,n,i))}function py(e,t){Ya(8390656,8,e,t)}function np(e,t){Ol(2048,8,e,t)}function Lw(e){X.flags|=4;var t=X.updateQueue;if(t===null)t=Pl(),X.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function m0(e){var t=Ue().memoizedState;return Lw({ref:t,nextImpl:e}),function(){if((oe&2)!==0)throw Error(b(440));return t.impl.apply(void 0,arguments)}}function h0(e,t){return Ol(4,2,e,t)}function g0(e,t){return Ol(4,4,e,t)}function y0(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function v0(e,t,n){n=n!=null?n.concat([e]):null,Ol(4,4,y0.bind(null,t,e),n)}function ip(){}function S0(e,t){var n=Ue();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Xd(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function T0(e,t){var n=Ue();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Xd(t,i[1]))return i[0];if(i=e(),no){gi(!0);try{e()}finally{gi(!1)}}return n.memoizedState=[i,t],i}function op(e,t,n){return n===void 0||(Kn&1073741824)!==0&&(W&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=lS(),X.lanes|=e,Di|=e,n)}function x0(e,t,n,i){return Pt(n,t)?n:ir.current!==null?(e=op(e,n,i),Pt(e,t)||(Oe=!0),e):(Kn&42)===0||(Kn&1073741824)!==0&&(W&261930)===0?(Oe=!0,e.memoizedState=n):(e=lS(),X.lanes|=e,Di|=e,t)}function A0(e,t,n,i,o){var r=re.p;re.p=r!==0&&8>r?r:8;var s=z.T,a={};z.T=a,sp(e,!1,t,n);try{var l=o(),c=z.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=Iw(l,i);ms(e,t,d,Lt(e))}else ms(e,t,i,Lt(e))}catch(p){ms(e,t,{then:function(){},status:"rejected",reason:p},Lt())}finally{re.p=r,s!==null&&a.types!==null&&(s.types=a.types),z.T=s}}function Pw(){}function sd(e,t,n,i){if(e.tag!==5)throw Error(b(476));var o=E0(e).queue;A0(e,o,t,Ki,n===null?Pw:function(){return C0(e),n(i)})}function E0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ki,baseState:Ki,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:Ki},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function C0(e){var t=E0(e);t.next===null&&(t=e.alternate.memoizedState),ms(e,t.next.queue,{},Lt())}function rp(){return tt(Ms)}function _0(){return Ue().memoizedState}function w0(){return Ue().memoizedState}function Fw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Lt();e=Ei(n);var i=Ci(t,e,n);i!==null&&(xt(i,t,n),fs(i,t,n)),t={cache:Vd()},e.payload=t;return}t=t.return}}function Ow(e,t,n){var i=Lt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Hl(e)?N0(t,n):(n=Gd(e,t,n,i),n!==null&&(xt(n,e,i),R0(n,t,i)))}function b0(e,t,n){var i=Lt();ms(e,t,n,i)}function ms(e,t,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hl(e))N0(t,o);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var s=t.lastRenderedState,a=r(s,n);if(o.hasEagerState=!0,o.eagerState=a,Pt(a,s))return Ul(e,t,o,0),ge===null&&Dl(),!1}catch{}finally{}if(n=Gd(e,t,o,i),n!==null)return xt(n,e,i),R0(n,t,i),!0}return!1}function sp(e,t,n,i){if(i={lane:2,revertLane:hp(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Hl(e)){if(t)throw Error(b(479))}else t=Gd(e,n,i,2),t!==null&&xt(t,e,2)}function Hl(e){var t=e.alternate;return e===X||t!==null&&t===X}function N0(e,t){Zo=dl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function R0(e,t,n){if((n&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,mv(e,n)}}var Ns={readContext:tt,use:Fl,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useLayoutEffect:Re,useInsertionEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useSyncExternalStore:Re,useId:Re,useHostTransitionStatus:Re,useFormState:Re,useActionState:Re,useOptimistic:Re,useMemoCache:Re,useCacheRefresh:Re};Ns.useEffectEvent=Re;var I0={readContext:tt,use:Fl,useCallback:function(e,t){return pt().memoizedState=[e,t===void 0?null:t],e},useContext:tt,useEffect:py,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ya(4194308,4,y0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ya(4194308,4,e,t)},useInsertionEffect:function(e,t){Ya(4,2,e,t)},useMemo:function(e,t){var n=pt();t=t===void 0?null:t;var i=e();if(no){gi(!0);try{e()}finally{gi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=pt();if(n!==void 0){var o=n(t);if(no){gi(!0);try{n(t)}finally{gi(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=Ow.bind(null,X,e),[i.memoizedState,e]},useRef:function(e){var t=pt();return e={current:e},t.memoizedState=e},useState:function(e){e=od(e);var t=e.queue,n=b0.bind(null,X,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ip,useDeferredValue:function(e,t){var n=pt();return op(n,e,t)},useTransition:function(){var e=od(!1);return e=A0.bind(null,X,e.queue,!0,!1),pt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=X,o=pt();if(ee){if(n===void 0)throw Error(b(407));n=n()}else{if(n=t(),ge===null)throw Error(b(349));(W&127)!==0||i0(i,t,n)}o.memoizedState=n;var r={value:n,getSnapshot:t};return o.queue=r,py(r0.bind(null,i,r,e),[e]),i.flags|=2048,or(9,{destroy:void 0},o0.bind(null,i,r,n,t),null),n},useId:function(){var e=pt(),t=ge.identifierPrefix;if(ee){var n=Tn,i=Sn;n=(i&~(1<<32-Ut(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=pl++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Mw++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:rp,useFormState:cy,useActionState:cy,useOptimistic:function(e){var t=pt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=sp.bind(null,X,!0,n),n.dispatch=t,[e,t]},useMemoCache:ep,useCacheRefresh:function(){return pt().memoizedState=Fw.bind(null,X)},useEffectEvent:function(e){var t=pt(),n={impl:e};return t.memoizedState=n,function(){if((oe&2)!==0)throw Error(b(440));return n.impl.apply(void 0,arguments)}}},ap={readContext:tt,use:Fl,useCallback:S0,useContext:tt,useEffect:np,useImperativeHandle:v0,useInsertionEffect:h0,useLayoutEffect:g0,useMemo:T0,useReducer:$a,useRef:p0,useState:function(){return $a(Xn)},useDebugValue:ip,useDeferredValue:function(e,t){var n=Ue();return x0(n,pe.memoizedState,e,t)},useTransition:function(){var e=$a(Xn)[0],t=Ue().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:n0,useId:_0,useHostTransitionStatus:rp,useFormState:fy,useActionState:fy,useOptimistic:function(e,t){var n=Ue();return l0(n,pe,e,t)},useMemoCache:ep,useCacheRefresh:w0};ap.useEffectEvent=m0;var M0={readContext:tt,use:Fl,useCallback:S0,useContext:tt,useEffect:np,useImperativeHandle:v0,useInsertionEffect:h0,useLayoutEffect:g0,useMemo:T0,useReducer:mf,useRef:p0,useState:function(){return mf(Xn)},useDebugValue:ip,useDeferredValue:function(e,t){var n=Ue();return pe===null?op(n,e,t):x0(n,pe.memoizedState,e,t)},useTransition:function(){var e=mf(Xn)[0],t=Ue().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:n0,useId:_0,useHostTransitionStatus:rp,useFormState:dy,useActionState:dy,useOptimistic:function(e,t){var n=Ue();return pe!==null?l0(n,pe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ep,useCacheRefresh:w0};M0.useEffectEvent=m0;function hf(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ad={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Lt(),o=Ei(i);o.payload=t,n!=null&&(o.callback=n),t=Ci(e,o,i),t!==null&&(xt(t,e,i),fs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Lt(),o=Ei(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ci(e,o,i),t!==null&&(xt(t,e,i),fs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lt(),i=Ei(n);i.tag=2,t!=null&&(i.callback=t),t=Ci(e,i,n),t!==null&&(xt(t,e,n),fs(t,e,n))}};function my(e,t,n,i,o,r,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,s):t.prototype&&t.prototype.isPureReactComponent?!Es(n,i)||!Es(o,r):!0}function hy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ad.enqueueReplaceState(t,t.state,null)}function io(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ae({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function k0(e){rl(e)}function D0(e){console.error(e)}function U0(e){rl(e)}function ml(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function gy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function ld(e,t,n){return n=Ei(n),n.tag=3,n.payload={element:null},n.callback=function(){ml(e,t)},n}function L0(e){return e=Ei(e),e.tag=3,e}function P0(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var r=i.value;e.payload=function(){return o(r)},e.callback=function(){gy(t,n,i)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){gy(t,n,i),typeof o!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function Hw(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&dr(t,n,o,!0),n=Ft.current,n!==null){switch(n.tag){case 31:case 13:return Xt===null?Sl():n.alternate===null&&Ie===0&&(Ie=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===ul?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),wf(e,i,o)),!1;case 22:return n.flags|=65536,i===ul?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),wf(e,i,o)),!1}throw Error(b(435,n.tag))}return wf(e,i,o),Sl(),!1}if(ee)return t=Ft.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==Xf&&(e=Error(b(422),{cause:i}),_s(Jt(e,n)))):(i!==Xf&&(t=Error(b(423),{cause:i}),_s(Jt(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Jt(i,n),o=ld(e.stateNode,i,o),pf(e,o),Ie!==4&&(Ie=2)),!1;var r=Error(b(520),{cause:i});if(r=Jt(r,n),ys===null?ys=[r]:ys.push(r),Ie!==4&&(Ie=2),t===null)return!0;i=Jt(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=ld(n.stateNode,i,e),pf(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(_i===null||!_i.has(r))))return n.flags|=65536,o&=-o,n.lanes|=o,o=L0(o),P0(o,e,n,i),pf(n,o),!1}n=n.return}while(n!==null);return!1}var lp=Error(b(461)),Oe=!1;function We(e,t,n,i){t.child=e===null?Qv(t,null,n,i):to(t,e.child,n,i)}function yy(e,t,n,i,o){n=n.render;var r=t.ref;if("ref"in i){var s={};for(var a in i)a!=="ref"&&(s[a]=i[a])}else s=i;return eo(t),i=Qd(e,t,n,s,r,o),a=Zd(),e!==null&&!Oe?(Wd(e,t,o),Qn(e,t,o)):(ee&&a&&Bd(t),t.flags|=1,We(e,t,i,o),t.child)}function vy(e,t,n,i,o){if(e===null){var r=n.type;return typeof r=="function"&&!qd(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,F0(e,t,r,i,o)):(e=za(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!up(e,o)){var s=r.memoizedProps;if(n=n.compare,n=n!==null?n:Es,n(s,i)&&e.ref===t.ref)return Qn(e,t,o)}return t.flags|=1,e=Vn(r,i),e.ref=t.ref,e.return=t,t.child=e}function F0(e,t,n,i,o){if(e!==null){var r=e.memoizedProps;if(Es(r,i)&&e.ref===t.ref)if(Oe=!1,t.pendingProps=i=r,up(e,o))(e.flags&131072)!==0&&(Oe=!0);else return t.lanes=e.lanes,Qn(e,t,o)}return ud(e,t,n,i,o)}function O0(e,t,n,i){var o=i.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|n:n,e!==null){for(i=t.child=e.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~r}else i=0,t.child=null;return Sy(e,t,r,n,i)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Va(t,r!==null?r.cachePool:null),r!==null?ay(t,r):nd(),jv(t);else return i=t.lanes=536870912,Sy(e,t,r!==null?r.baseLanes|n:n,n,i)}else r!==null?(Va(t,r.cachePool),ay(t,r),mi(t),t.memoizedState=null):(e!==null&&Va(t,null),nd(),mi(t));return We(e,t,o,n),t.child}function rs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Sy(e,t,n,i,o){var r=$d();return r=r===null?null:{parent:Fe._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Va(t,null),nd(),jv(t),e!==null&&dr(e,t,i,!0),t.childLanes=o,null}function Ja(e,t){return t=hl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ty(e,t,n){return to(t,e.child,null,n),e=Ja(t,t.pendingProps),e.flags|=2,Rt(t),t.memoizedState=null,e}function Gw(e,t,n){var i=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ee){if(i.mode==="hidden")return e=Ja(t,i),t.lanes=536870912,rs(null,e);if(id(t),(e=xe)?(e=IS(e,Kt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii!==null?{id:Sn,overflow:Tn}:null,retryLane:536870912,hydrationErrors:null},n=zv(e),n.return=t,t.child=n,et=t,xe=null)):e=null,e===null)throw Mi(t);return t.lanes=536870912,null}return Ja(t,i)}var r=e.memoizedState;if(r!==null){var s=r.dehydrated;if(id(t),o)if(t.flags&256)t.flags&=-257,t=Ty(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(b(558));else if(Oe||dr(e,t,n,!1),o=(n&e.childLanes)!==0,Oe||o){if(i=ge,i!==null&&(s=hv(i,n),s!==0&&s!==r.retryLane))throw r.retryLane=s,ao(e,s),xt(i,e,s),lp;Sl(),t=Ty(e,t,n)}else e=r.treeContext,xe=Qt(s.nextSibling),et=t,ee=!0,Ai=null,Kt=!1,e!==null&&$v(t,e),t=Ja(t,i),t.flags|=4096;return t}return e=Vn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ka(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(b(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function ud(e,t,n,i,o){return eo(t),n=Qd(e,t,n,i,void 0,o),i=Zd(),e!==null&&!Oe?(Wd(e,t,o),Qn(e,t,o)):(ee&&i&&Bd(t),t.flags|=1,We(e,t,n,o),t.child)}function xy(e,t,n,i,o,r){return eo(t),t.updateQueue=null,n=t0(t,i,n,o),e0(e),i=Zd(),e!==null&&!Oe?(Wd(e,t,r),Qn(e,t,r)):(ee&&i&&Bd(t),t.flags|=1,We(e,t,n,r),t.child)}function Ay(e,t,n,i,o){if(eo(t),t.stateNode===null){var r=Bo,s=n.contextType;typeof s=="object"&&s!==null&&(r=tt(s)),r=new n(i,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ad,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=i,r.state=t.memoizedState,r.refs={},Jd(t),s=n.contextType,r.context=typeof s=="object"&&s!==null?tt(s):Bo,r.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(hf(t,n,s,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(s=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),s!==r.state&&ad.enqueueReplaceState(r,r.state,null),ps(t,i,r,o),ds(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){r=t.stateNode;var a=t.memoizedProps,l=io(n,a);r.props=l;var c=r.context,d=n.contextType;s=Bo,typeof d=="object"&&d!==null&&(s=tt(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof r.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a||c!==s)&&hy(t,r,i,s),fi=!1;var m=t.memoizedState;r.state=m,ps(t,i,r,o),ds(),c=t.memoizedState,a||m!==c||fi?(typeof p=="function"&&(hf(t,n,p,i),c=t.memoizedState),(l=fi||my(t,n,l,i,m,c,s))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),r.props=i,r.state=c,r.context=s,i=l):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,ed(e,t),s=t.memoizedProps,d=io(n,s),r.props=d,p=t.pendingProps,m=r.context,c=n.contextType,l=Bo,typeof c=="object"&&c!==null&&(l=tt(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(s!==p||m!==l)&&hy(t,r,i,l),fi=!1,m=t.memoizedState,r.state=m,ps(t,i,r,o),ds();var h=t.memoizedState;s!==p||m!==h||fi||e!==null&&e.dependencies!==null&&ll(e.dependencies)?(typeof a=="function"&&(hf(t,n,a,i),h=t.memoizedState),(d=fi||my(t,n,d,i,m,h,l)||e!==null&&e.dependencies!==null&&ll(e.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,h,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,h,l)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),r.props=i,r.state=h,r.context=l,i=d):(typeof r.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,Ka(e,t),i=(t.flags&128)!==0,r||i?(r=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&i?(t.child=to(t,e.child,null,o),t.child=to(t,null,n,o)):We(e,t,n,o),t.memoizedState=r.state,e=t.child):e=Qn(e,t,o),e}function Ey(e,t,n,i){return ji(),t.flags|=256,We(e,t,n,i),t.child}var gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yf(e){return{baseLanes:e,cachePool:Jv()}}function vf(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Mt),e}function H0(e,t,n){var i=t.pendingProps,o=!1,r=(t.flags&128)!==0,s;if((s=r)||(s=e!==null&&e.memoizedState===null?!1:(De.current&2)!==0),s&&(o=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,e===null){if(ee){if(o?pi(t):mi(t),(e=xe)?(e=IS(e,Kt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii!==null?{id:Sn,overflow:Tn}:null,retryLane:536870912,hydrationErrors:null},n=zv(e),n.return=t,t.child=n,et=t,xe=null)):e=null,e===null)throw Mi(t);return Ed(e)?t.lanes=32:t.lanes=536870912,null}var a=i.children;return i=i.fallback,o?(mi(t),o=t.mode,a=hl({mode:"hidden",children:a},o),i=Xi(i,o,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,i=t.child,i.memoizedState=yf(n),i.childLanes=vf(e,s,n),t.memoizedState=gf,rs(null,i)):(pi(t),cd(t,a))}var l=e.memoizedState;if(l!==null&&(a=l.dehydrated,a!==null)){if(r)t.flags&256?(pi(t),t.flags&=-257,t=Sf(e,t,n)):t.memoizedState!==null?(mi(t),t.child=e.child,t.flags|=128,t=null):(mi(t),a=i.fallback,o=t.mode,i=hl({mode:"visible",children:i.children},o),a=Xi(a,o,n,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,to(t,e.child,null,n),i=t.child,i.memoizedState=yf(n),i.childLanes=vf(e,s,n),t.memoizedState=gf,t=rs(null,i));else if(pi(t),Ed(a)){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;s=c,i=Error(b(419)),i.stack="",i.digest=s,_s({value:i,source:null,stack:null}),t=Sf(e,t,n)}else if(Oe||dr(e,t,n,!1),s=(n&e.childLanes)!==0,Oe||s){if(s=ge,s!==null&&(i=hv(s,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,ao(e,i),xt(s,e,i),lp;Ad(a)||Sl(),t=Sf(e,t,n)}else Ad(a)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,xe=Qt(a.nextSibling),et=t,ee=!0,Ai=null,Kt=!1,e!==null&&$v(t,e),t=cd(t,i.children),t.flags|=4096);return t}return o?(mi(t),a=i.fallback,o=t.mode,l=e.child,c=l.sibling,i=Vn(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?a=Vn(c,a):(a=Xi(a,o,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,rs(null,i),i=t.child,a=e.child.memoizedState,a===null?a=yf(n):(o=a.cachePool,o!==null?(l=Fe._currentValue,o=o.parent!==l?{parent:l,pool:l}:o):o=Jv(),a={baseLanes:a.baseLanes|n,cachePool:o}),i.memoizedState=a,i.childLanes=vf(e,s,n),t.memoizedState=gf,rs(e.child,i)):(pi(t),n=e.child,e=n.sibling,n=Vn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function cd(e,t){return t=hl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function hl(e,t){return e=It(22,e,null,t),e.lanes=0,e}function Sf(e,t,n){return to(t,e.child,null,n),e=cd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Zf(e.return,t,n)}function Tf(e,t,n,i,o,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=o,s.treeForkCount=r)}function G0(e,t,n){var i=t.pendingProps,o=i.revealOrder,r=i.tail;i=i.children;var s=De.current,a=(s&2)!==0;if(a?(s=s&1|2,t.flags|=128):s&=1,ve(De,s),We(e,t,i,n),i=ee?Cs:0,!a&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cy(e,n,t);else if(e.tag===19)Cy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&fl(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Tf(t,!1,o,n,r,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&fl(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Tf(t,!0,n,null,r,i);break;case"together":Tf(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Qn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Di|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(dr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,n=Vn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function up(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ll(e)))}function qw(e,t,n){switch(t.tag){case 3:tl(t,t.stateNode.containerInfo),di(t,Fe,e.memoizedState.cache),ji();break;case 27:case 5:Of(t);break;case 4:tl(t,t.stateNode.containerInfo);break;case 10:di(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,id(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(pi(t),t.flags|=128,null):(n&t.child.childLanes)!==0?H0(e,t,n):(pi(t),e=Qn(e,t,n),e!==null?e.sibling:null);pi(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(dr(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return G0(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ve(De,De.current),i)break;return null;case 22:return t.lanes=0,O0(e,t,n,t.pendingProps);case 24:di(t,Fe,e.memoizedState.cache)}return Qn(e,t,n)}function q0(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Oe=!0;else{if(!up(e,n)&&(t.flags&128)===0)return Oe=!1,qw(e,t,n);Oe=(e.flags&131072)!==0}else Oe=!1,ee&&(t.flags&1048576)!==0&&Vv(t,Cs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Yi(t.elementType),t.type=e,typeof e=="function")qd(e)?(i=io(e,i),t.tag=1,t=Ay(null,t,e,i,n)):(t.tag=0,t=ud(null,t,e,i,n));else{if(e!=null){var o=e.$$typeof;if(o===bd){t.tag=11,t=yy(null,t,e,i,n);break e}else if(o===Nd){t.tag=14,t=vy(null,t,e,i,n);break e}}throw t=Pf(e)||e,Error(b(306,t,""))}}return t;case 0:return ud(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=io(i,t.pendingProps),Ay(e,t,i,o,n);case 3:e:{if(tl(t,t.stateNode.containerInfo),e===null)throw Error(b(387));i=t.pendingProps;var r=t.memoizedState;o=r.element,ed(e,t),ps(t,i,null,n);var s=t.memoizedState;if(i=s.cache,di(t,Fe,i),i!==r.cache&&Wf(t,[Fe],n,!0),ds(),i=s.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Ey(e,t,i,n);break e}else if(i!==o){o=Jt(Error(b(424)),t),_s(o),t=Ey(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(xe=Qt(e.firstChild),et=t,ee=!0,Ai=null,Kt=!0,n=Qv(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ji(),i===o){t=Qn(e,t,n);break e}We(e,t,i,n)}t=t.child}return t;case 26:return Ka(e,t),e===null?(n=Yy(t.type,null,t.pendingProps,null))?t.memoizedState=n:ee||(n=t.type,e=t.pendingProps,i=El(xi.current).createElement(n),i[je]=t,i[At]=e,nt(i,n,e),Ke(i),t.stateNode=i):t.memoizedState=Yy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Of(t),e===null&&ee&&(i=t.stateNode=MS(t.type,t.pendingProps,xi.current),et=t,Kt=!0,o=xe,Li(t.type)?(Cd=o,xe=Qt(i.firstChild)):xe=o),We(e,t,t.pendingProps.children,n),Ka(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ee&&((o=i=xe)&&(i=hb(i,t.type,t.pendingProps,Kt),i!==null?(t.stateNode=i,et=t,xe=Qt(i.firstChild),Kt=!1,o=!0):o=!1),o||Mi(t)),Of(t),o=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,i=r.children,Td(o,r)?i=null:s!==null&&Td(o,s)&&(t.flags|=32),t.memoizedState!==null&&(o=Qd(e,t,kw,null,null,n),Ms._currentValue=o),Ka(e,t),We(e,t,i,n),t.child;case 6:return e===null&&ee&&((e=n=xe)&&(n=gb(n,t.pendingProps,Kt),n!==null?(t.stateNode=n,et=t,xe=null,e=!0):e=!1),e||Mi(t)),null;case 13:return H0(e,t,n);case 4:return tl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=to(t,null,i,n):We(e,t,i,n),t.child;case 11:return yy(e,t,t.type,t.pendingProps,n);case 7:return We(e,t,t.pendingProps,n),t.child;case 8:return We(e,t,t.pendingProps.children,n),t.child;case 12:return We(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,di(t,t.type,i.value),We(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,eo(t),o=tt(o),i=i(o),t.flags|=1,We(e,t,i,n),t.child;case 14:return vy(e,t,t.type,t.pendingProps,n);case 15:return F0(e,t,t.type,t.pendingProps,n);case 19:return G0(e,t,n);case 31:return Gw(e,t,n);case 22:return O0(e,t,n,t.pendingProps);case 24:return eo(t),i=tt(Fe),e===null?(o=$d(),o===null&&(o=ge,r=Vd(),o.pooledCache=r,r.refCount++,r!==null&&(o.pooledCacheLanes|=n),o=r),t.memoizedState={parent:i,cache:o},Jd(t),di(t,Fe,o)):((e.lanes&n)!==0&&(ed(e,t),ps(t,null,null,n),ds()),o=e.memoizedState,r=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),di(t,Fe,i)):(i=r.cache,di(t,Fe,i),i!==o.cache&&Wf(t,[Fe],n,!0))),We(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(b(156,t.tag))}function Ln(e){e.flags|=4}function xf(e,t,n,i,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(fS())e.flags|=8192;else throw Zi=ul,Yd}else e.flags&=-16777217}function _y(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!US(t))if(fS())e.flags|=8192;else throw Zi=ul,Yd}function ka(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?dv():536870912,e.lanes|=t,rr|=t)}function Wr(e,t){if(!ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Te(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Bw(e,t,n){var i=t.pendingProps;switch(zd(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(t),null;case 1:return Te(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),$n(Fe),jo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Io(t)?Ln(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,df())),Te(t),null;case 26:var o=t.type,r=t.memoizedState;return e===null?(Ln(t),r!==null?(Te(t),_y(t,r)):(Te(t),xf(t,o,null,i,n))):r?r!==e.memoizedState?(Ln(t),Te(t),_y(t,r)):(Te(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Ln(t),Te(t),xf(t,o,e,i,n)),null;case 27:if(nl(t),n=xi.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ln(t);else{if(!i){if(t.stateNode===null)throw Error(b(166));return Te(t),null}e=An.current,Io(t)?ey(t,e):(e=MS(o,i,n),t.stateNode=e,Ln(t))}return Te(t),null;case 5:if(nl(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Ln(t);else{if(!i){if(t.stateNode===null)throw Error(b(166));return Te(t),null}if(r=An.current,Io(t))ey(t,r);else{var s=El(xi.current);switch(r){case 1:r=s.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=s.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=s.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?r.multiple=!0:i.size&&(r.size=i.size);break;default:r=typeof i.is=="string"?s.createElement(o,{is:i.is}):s.createElement(o)}}r[je]=t,r[At]=i;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)r.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=r;e:switch(nt(r,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Ln(t)}}return Te(t),xf(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Ln(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(b(166));if(e=xi.current,Io(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=et,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[je]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||bS(e.nodeValue,n)),e||Mi(t,!0)}else e=El(e).createTextNode(i),e[je]=t,t.stateNode=e}return Te(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=Io(t),n!==null){if(e===null){if(!i)throw Error(b(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(557));e[je]=t}else ji(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Te(t),e=!1}else n=df(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Rt(t),t):(Rt(t),null);if((t.flags&128)!==0)throw Error(b(558))}return Te(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Io(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(b(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(b(317));o[je]=t}else ji(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Te(t),o=!1}else o=df(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Rt(t),t):(Rt(t),null)}return Rt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ka(t,t.updateQueue),Te(t),null);case 4:return jo(),e===null&&gp(t.stateNode.containerInfo),Te(t),null;case 10:return $n(t.type),Te(t),null;case 19:if(Xe(De),i=t.memoizedState,i===null)return Te(t),null;if(o=(t.flags&128)!==0,r=i.rendering,r===null)if(o)Wr(i,!1);else{if(Ie!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=fl(e),r!==null){for(t.flags|=128,Wr(i,!1),e=r.updateQueue,t.updateQueue=e,ka(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Bv(n,e),n=n.sibling;return ve(De,De.current&1|2),ee&&Hn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&kt()>yl&&(t.flags|=128,o=!0,Wr(i,!1),t.lanes=4194304)}else{if(!o)if(e=fl(r),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ka(t,e),Wr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!ee)return Te(t),null}else 2*kt()-i.renderingStartTime>yl&&n!==536870912&&(t.flags|=128,o=!0,Wr(i,!1),t.lanes=4194304);i.isBackwards?(r.sibling=t.child,t.child=r):(e=i.last,e!==null?e.sibling=r:t.child=r,i.last=r)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=kt(),e.sibling=null,n=De.current,ve(De,o?n&1|2:n&1),ee&&Hn(t,i.treeForkCount),e):(Te(t),null);case 22:case 23:return Rt(t),Kd(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(Te(t),t.subtreeFlags&6&&(t.flags|=8192)):Te(t),n=t.updateQueue,n!==null&&ka(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Xe(Qi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),$n(Fe),Te(t),null;case 25:return null;case 30:return null}throw Error(b(156,t.tag))}function zw(e,t){switch(zd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $n(Fe),jo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return nl(t),null;case 31:if(t.memoizedState!==null){if(Rt(t),t.alternate===null)throw Error(b(340));ji()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Rt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));ji()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xe(De),null;case 4:return jo(),null;case 10:return $n(t.type),null;case 22:case 23:return Rt(t),Kd(),e!==null&&Xe(Qi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return $n(Fe),null;case 25:return null;default:return null}}function B0(e,t){switch(zd(t),t.tag){case 3:$n(Fe),jo();break;case 26:case 27:case 5:nl(t);break;case 4:jo();break;case 31:t.memoizedState!==null&&Rt(t);break;case 13:Rt(t);break;case 19:Xe(De);break;case 10:$n(t.type);break;case 22:case 23:Rt(t),Kd(),e!==null&&Xe(Qi);break;case 24:$n(Fe)}}function Bs(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var r=n.create,s=n.inst;i=r(),s.destroy=i}n=n.next}while(n!==o)}}catch(a){ce(t,t.return,a)}}function ki(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var r=o.next;i=r;do{if((i.tag&e)===e){var s=i.inst,a=s.destroy;if(a!==void 0){s.destroy=void 0,o=t;var l=n,c=a;try{c()}catch(d){ce(o,l,d)}}}i=i.next}while(i!==r)}}catch(d){ce(t,t.return,d)}}function z0(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Wv(t,n)}catch(i){ce(e,e.return,i)}}}function V0(e,t,n){n.props=io(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){ce(e,t,i)}}function hs(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){ce(e,t,o)}}function xn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){ce(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){ce(e,t,o)}else n.current=null}function $0(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){ce(e,e.return,o)}}function Af(e,t,n){try{var i=e.stateNode;ub(i,e.type,n,t),i[At]=t}catch(o){ce(e,e.return,o)}}function Y0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Li(e.type)||e.tag===4}function Ef(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Y0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Li(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bn));else if(i!==4&&(i===27&&Li(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(fd(e,t,n),e=e.sibling;e!==null;)fd(e,t,n),e=e.sibling}function gl(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&Li(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(gl(e,t,n),e=e.sibling;e!==null;)gl(e,t,n),e=e.sibling}function J0(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);nt(t,i,n),t[je]=e,t[At]=n}catch(r){ce(e,e.return,r)}}var Gn=!1,Pe=!1,Cf=!1,wy=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Vw(e,t){if(e=e.containerInfo,vd=bl,e=Uv(e),Od(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,d=0,p=e,m=null;t:for(;;){for(var h;p!==n||o!==0&&p.nodeType!==3||(a=s+o),p!==r||i!==0&&p.nodeType!==3||(l=s+i),p.nodeType===3&&(s+=p.nodeValue.length),(h=p.firstChild)!==null;)m=p,p=h;for(;;){if(p===e)break t;if(m===n&&++c===o&&(a=s),m===r&&++d===i&&(l=s),(h=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sd={focusedElem:e,selectionRange:n},bl=!1,Je=t;Je!==null;)if(t=Je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Je=e;else for(;Je!==null;){switch(t=Je,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,n=t,o=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var g=io(n.type,o);e=i.getSnapshotBeforeUpdate(g,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(T){ce(n,n.return,T)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)xd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(b(163))}if(e=t.sibling,e!==null){e.return=t.return,Je=e;break}Je=t.return}}function K0(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Fn(e,n),i&4&&Bs(5,n);break;case 1:if(Fn(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(s){ce(n,n.return,s)}else{var o=io(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){ce(n,n.return,s)}}i&64&&z0(n),i&512&&hs(n,n.return);break;case 3:if(Fn(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Wv(e,t)}catch(s){ce(n,n.return,s)}}break;case 27:t===null&&i&4&&J0(n);case 26:case 5:Fn(e,n),t===null&&i&4&&$0(n),i&512&&hs(n,n.return);break;case 12:Fn(e,n);break;case 31:Fn(e,n),i&4&&Z0(e,n);break;case 13:Fn(e,n),i&4&&W0(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=jw.bind(null,n),yb(e,n))));break;case 22:if(i=n.memoizedState!==null||Gn,!i){t=t!==null&&t.memoizedState!==null||Pe,o=Gn;var r=Pe;Gn=i,(Pe=t)&&!r?On(e,n,(n.subtreeFlags&8772)!==0):Fn(e,n),Gn=o,Pe=r}break;case 30:break;default:Fn(e,n)}}function X0(e){var t=e.alternate;t!==null&&(e.alternate=null,X0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&kd(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var be=null,St=!1;function Pn(e,t,n){for(n=n.child;n!==null;)Q0(e,t,n),n=n.sibling}function Q0(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Ls,n)}catch{}switch(n.tag){case 26:Pe||xn(n,t),Pn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Pe||xn(n,t);var i=be,o=St;Li(n.type)&&(be=n.stateNode,St=!1),Pn(e,t,n),Ss(n.stateNode),be=i,St=o;break;case 5:Pe||xn(n,t);case 6:if(i=be,o=St,be=null,Pn(e,t,n),be=i,St=o,be!==null)if(St)try{(be.nodeType===9?be.body:be.nodeName==="HTML"?be.ownerDocument.body:be).removeChild(n.stateNode)}catch(r){ce(n,t,r)}else try{be.removeChild(n.stateNode)}catch(r){ce(n,t,r)}break;case 18:be!==null&&(St?(e=be,qy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ur(e)):qy(be,n.stateNode));break;case 4:i=be,o=St,be=n.stateNode.containerInfo,St=!0,Pn(e,t,n),be=i,St=o;break;case 0:case 11:case 14:case 15:ki(2,n,t),Pe||ki(4,n,t),Pn(e,t,n);break;case 1:Pe||(xn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&V0(n,t,i)),Pn(e,t,n);break;case 21:Pn(e,t,n);break;case 22:Pe=(i=Pe)||n.memoizedState!==null,Pn(e,t,n),Pe=i;break;default:Pn(e,t,n)}}function Z0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ur(e)}catch(n){ce(t,t.return,n)}}}function W0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ur(e)}catch(n){ce(t,t.return,n)}}function $w(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new wy),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new wy),t;default:throw Error(b(435,e.tag))}}function Da(e,t){var n=$w(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var o=eb.bind(null,e,i);i.then(o,o)}})}function yt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],r=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 27:if(Li(a.type)){be=a.stateNode,St=!1;break e}break;case 5:be=a.stateNode,St=!1;break e;case 3:case 4:be=a.stateNode.containerInfo,St=!0;break e}a=a.return}if(be===null)throw Error(b(160));Q0(r,s,o),be=null,St=!1,r=o.alternate,r!==null&&(r.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)j0(t,e),t=t.sibling}var on=null;function j0(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yt(t,e),vt(e),i&4&&(ki(3,e,e.return),Bs(3,e),ki(5,e,e.return));break;case 1:yt(t,e),vt(e),i&512&&(Pe||n===null||xn(n,n.return)),i&64&&Gn&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=on;if(yt(t,e),vt(e),i&512&&(Pe||n===null||xn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":r=o.getElementsByTagName("title")[0],(!r||r[Os]||r[je]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=o.createElement(i),o.head.insertBefore(r,o.querySelector("head > title"))),nt(r,i,n),r[je]=e,Ke(r),i=r;break e;case"link":var s=Ky("link","href",o).get(i+(n.href||""));if(s){for(var a=0;a<s.length;a++)if(r=s[a],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(a,1);break t}}r=o.createElement(i),nt(r,i,n),o.head.appendChild(r);break;case"meta":if(s=Ky("meta","content",o).get(i+(n.content||""))){for(a=0;a<s.length;a++)if(r=s[a],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(a,1);break t}}r=o.createElement(i),nt(r,i,n),o.head.appendChild(r);break;default:throw Error(b(468,i))}r[je]=e,Ke(r),i=r}e.stateNode=i}else Xy(o,e.type,e.stateNode);else e.stateNode=Jy(o,i,e.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Xy(o,e.type,e.stateNode):Jy(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Af(e,e.memoizedProps,n.memoizedProps)}break;case 27:yt(t,e),vt(e),i&512&&(Pe||n===null||xn(n,n.return)),n!==null&&i&4&&Af(e,e.memoizedProps,n.memoizedProps);break;case 5:if(yt(t,e),vt(e),i&512&&(Pe||n===null||xn(n,n.return)),e.flags&32){o=e.stateNode;try{tr(o,"")}catch(g){ce(e,e.return,g)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,Af(e,o,n!==null?n.memoizedProps:o)),i&1024&&(Cf=!0);break;case 6:if(yt(t,e),vt(e),i&4){if(e.stateNode===null)throw Error(b(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(g){ce(e,e.return,g)}}break;case 3:if(Za=null,o=on,on=Cl(t.containerInfo),yt(t,e),on=o,vt(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ur(t.containerInfo)}catch(g){ce(e,e.return,g)}Cf&&(Cf=!1,eS(e));break;case 4:i=on,on=Cl(e.stateNode.containerInfo),yt(t,e),vt(e),on=i;break;case 12:yt(t,e),vt(e);break;case 31:yt(t,e),vt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Da(e,i)));break;case 13:yt(t,e),vt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Gl=kt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Da(e,i)));break;case 22:o=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=Gn,d=Pe;if(Gn=c||o,Pe=d||l,yt(t,e),Pe=d,Gn=c,vt(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||l||Gn||Pe||Ji(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(r=l.stateNode,o)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{a=l.stateNode;var p=l.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;a.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(g){ce(l,l.return,g)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=o?"":l.memoizedProps}catch(g){ce(l,l.return,g)}}}else if(t.tag===18){if(n===null){l=t;try{var h=l.stateNode;o?By(h,!0):By(l.stateNode,!1)}catch(g){ce(l,l.return,g)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Da(e,n))));break;case 19:yt(t,e),vt(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,Da(e,i)));break;case 30:break;case 21:break;default:yt(t,e),vt(e)}}function vt(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(Y0(i)){n=i;break}i=i.return}if(n==null)throw Error(b(160));switch(n.tag){case 27:var o=n.stateNode,r=Ef(e);gl(e,r,o);break;case 5:var s=n.stateNode;n.flags&32&&(tr(s,""),n.flags&=-33);var a=Ef(e);gl(e,a,s);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Ef(e);fd(e,c,l);break;default:throw Error(b(161))}}catch(d){ce(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eS(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;eS(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Fn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)K0(e,t.alternate,t),t=t.sibling}function Ji(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ki(4,t,t.return),Ji(t);break;case 1:xn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&V0(t,t.return,n),Ji(t);break;case 27:Ss(t.stateNode);case 26:case 5:xn(t,t.return),Ji(t);break;case 22:t.memoizedState===null&&Ji(t);break;case 30:Ji(t);break;default:Ji(t)}e=e.sibling}}function On(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,r=t,s=r.flags;switch(r.tag){case 0:case 11:case 15:On(o,r,n),Bs(4,r);break;case 1:if(On(o,r,n),i=r,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(c){ce(i,i.return,c)}if(i=r,o=i.updateQueue,o!==null){var a=i.stateNode;try{var l=o.shared.hiddenCallbacks;if(l!==null)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Zv(l[o],a)}catch(c){ce(i,i.return,c)}}n&&s&64&&z0(r),hs(r,r.return);break;case 27:J0(r);case 26:case 5:On(o,r,n),n&&i===null&&s&4&&$0(r),hs(r,r.return);break;case 12:On(o,r,n);break;case 31:On(o,r,n),n&&s&4&&Z0(o,r);break;case 13:On(o,r,n),n&&s&4&&W0(o,r);break;case 22:r.memoizedState===null&&On(o,r,n),hs(r,r.return);break;case 30:break;default:On(o,r,n)}t=t.sibling}}function cp(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Gs(n))}function fp(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gs(e))}function nn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tS(e,t,n,i),t=t.sibling}function tS(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:nn(e,t,n,i),o&2048&&Bs(9,t);break;case 1:nn(e,t,n,i);break;case 3:nn(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gs(e)));break;case 12:if(o&2048){nn(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,s=r.id,a=r.onPostCommit;typeof a=="function"&&a(s,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ce(t,t.return,l)}}else nn(e,t,n,i);break;case 31:nn(e,t,n,i);break;case 13:nn(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,s=t.alternate,t.memoizedState!==null?r._visibility&2?nn(e,t,n,i):gs(e,t):r._visibility&2?nn(e,t,n,i):(r._visibility|=2,ko(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),o&2048&&cp(s,t);break;case 24:nn(e,t,n,i),o&2048&&fp(t.alternate,t);break;default:nn(e,t,n,i)}}function ko(e,t,n,i,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,s=t,a=n,l=i,c=s.flags;switch(s.tag){case 0:case 11:case 15:ko(r,s,a,l,o),Bs(8,s);break;case 23:break;case 22:var d=s.stateNode;s.memoizedState!==null?d._visibility&2?ko(r,s,a,l,o):gs(r,s):(d._visibility|=2,ko(r,s,a,l,o)),o&&c&2048&&cp(s.alternate,s);break;case 24:ko(r,s,a,l,o),o&&c&2048&&fp(s.alternate,s);break;default:ko(r,s,a,l,o)}t=t.sibling}}function gs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:gs(n,i),o&2048&&cp(i.alternate,i);break;case 24:gs(n,i),o&2048&&fp(i.alternate,i);break;default:gs(n,i)}t=t.sibling}}var ss=8192;function Mo(e,t,n){if(e.subtreeFlags&ss)for(e=e.child;e!==null;)nS(e,t,n),e=e.sibling}function nS(e,t,n){switch(e.tag){case 26:Mo(e,t,n),e.flags&ss&&e.memoizedState!==null&&Rb(n,on,e.memoizedState,e.memoizedProps);break;case 5:Mo(e,t,n);break;case 3:case 4:var i=on;on=Cl(e.stateNode.containerInfo),Mo(e,t,n),on=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ss,ss=16777216,Mo(e,t,n),ss=i):Mo(e,t,n));break;default:Mo(e,t,n)}}function iS(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function jr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Je=i,rS(i,e)}iS(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)oS(e),e=e.sibling}function oS(e){switch(e.tag){case 0:case 11:case 15:jr(e),e.flags&2048&&ki(9,e,e.return);break;case 3:jr(e);break;case 12:jr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Xa(e)):jr(e);break;default:jr(e)}}function Xa(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Je=i,rS(i,e)}iS(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ki(8,t,t.return),Xa(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Xa(t));break;default:Xa(t)}e=e.sibling}}function rS(e,t){for(;Je!==null;){var n=Je;switch(n.tag){case 0:case 11:case 15:ki(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Gs(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Je=i;else e:for(n=e;Je!==null;){i=Je;var o=i.sibling,r=i.return;if(X0(i),i===n){Je=null;break e}if(o!==null){o.return=r,Je=o;break e}Je=r}}}var Yw={getCacheForType:function(e){var t=tt(Fe),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return tt(Fe).controller.signal}},Jw=typeof WeakMap=="function"?WeakMap:Map,oe=0,ge=null,Z=null,W=0,ue=0,Nt=null,vi=!1,mr=!1,dp=!1,Zn=0,Ie=0,Di=0,Wi=0,pp=0,Mt=0,rr=0,ys=null,Tt=null,dd=!1,Gl=0,sS=0,yl=1/0,vl=null,_i=null,Be=0,wi=null,sr=null,Yn=0,pd=0,md=null,aS=null,vs=0,hd=null;function Lt(){return(oe&2)!==0&&W!==0?W&-W:z.T!==null?hp():gv()}function lS(){if(Mt===0)if((W&536870912)===0||ee){var e=Ea;Ea<<=1,(Ea&3932160)===0&&(Ea=262144),Mt=e}else Mt=536870912;return e=Ft.current,e!==null&&(e.flags|=32),Mt}function xt(e,t,n){(e===ge&&(ue===2||ue===9)||e.cancelPendingCommit!==null)&&(ar(e,0),Si(e,W,Mt,!1)),Fs(e,n),((oe&2)===0||e!==ge)&&(e===ge&&((oe&2)===0&&(Wi|=n),Ie===4&&Si(e,W,Mt,!1)),Cn(e))}function uS(e,t,n){if((oe&6)!==0)throw Error(b(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Ps(e,t),o=i?Qw(e,t):_f(e,t,!0),r=i;do{if(o===0){mr&&!i&&Si(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!Kw(n)){o=_f(e,t,!1),r=!1;continue}if(o===2){if(r=t,e.errorRecoveryDisabledLanes&r)var s=0;else s=e.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;e:{var a=e;o=ys;var l=a.current.memoizedState.isDehydrated;if(l&&(ar(a,s).flags|=256),s=_f(a,s,!1),s!==2){if(dp&&!l){a.errorRecoveryDisabledLanes|=r,Wi|=r,o=4;break e}r=Tt,Tt=o,r!==null&&(Tt===null?Tt=r:Tt.push.apply(Tt,r))}o=s}if(r=!1,o!==2)continue}}if(o===1){ar(e,0),Si(e,t,0,!0);break}e:{switch(i=e,r=o,r){case 0:case 1:throw Error(b(345));case 4:if((t&4194048)!==t)break;case 6:Si(i,t,Mt,!vi);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(b(329))}if((t&62914560)===t&&(o=Gl+300-kt(),10<o)){if(Si(i,t,Mt,!vi),Rl(i,0,!0)!==0)break e;Yn=t,i.timeoutHandle=RS(by.bind(null,i,n,Tt,vl,dd,t,Mt,Wi,rr,vi,r,"Throttled",-0,0),o);break e}by(i,n,Tt,vl,dd,t,Mt,Wi,rr,vi,r,null,-0,0)}}break}while(1);Cn(e)}function by(e,t,n,i,o,r,s,a,l,c,d,p,m,h){if(e.timeoutHandle=-1,p=t.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bn},nS(t,r,p);var g=(r&62914560)===r?Gl-kt():(r&4194048)===r?sS-kt():0;if(g=Ib(p,g),g!==null){Yn=r,e.cancelPendingCommit=g(Ry.bind(null,e,t,r,n,i,o,s,a,l,d,p,null,m,h)),Si(e,r,s,!c);return}}Ry(e,t,r,n,i,o,s,a,l)}function Kw(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],r=o.getSnapshot;o=o.value;try{if(!Pt(r(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Si(e,t,n,i){t&=~pp,t&=~Wi,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var r=31-Ut(o),s=1<<r;i[r]=-1,o&=~s}n!==0&&pv(e,n,t)}function ql(){return(oe&6)===0?(zs(0,!1),!1):!0}function mp(){if(Z!==null){if(ue===0)var e=Z.return;else e=Z,zn=lo=null,jd(e),Qo=null,ws=0,e=Z;for(;e!==null;)B0(e.alternate,e),e=e.return;Z=null}}function ar(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,db(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Yn=0,mp(),ge=e,Z=n=Vn(e.current,null),W=t,ue=0,Nt=null,vi=!1,mr=Ps(e,t),dp=!1,rr=Mt=pp=Wi=Di=Ie=0,Tt=ys=null,dd=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-Ut(i),r=1<<o;t|=e[o],i&=~r}return Zn=t,Dl(),n}function cS(e,t){X=null,z.H=Ns,t===pr||t===Ll?(t=ry(),ue=3):t===Yd?(t=ry(),ue=4):ue=t===lp?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Nt=t,Z===null&&(Ie=1,ml(e,Jt(t,e.current)))}function fS(){var e=Ft.current;return e===null?!0:(W&4194048)===W?Xt===null:(W&62914560)===W||(W&536870912)!==0?e===Xt:!1}function dS(){var e=z.H;return z.H=Ns,e===null?Ns:e}function pS(){var e=z.A;return z.A=Yw,e}function Sl(){Ie=4,vi||(W&4194048)!==W&&Ft.current!==null||(mr=!0),(Di&134217727)===0&&(Wi&134217727)===0||ge===null||Si(ge,W,Mt,!1)}function _f(e,t,n){var i=oe;oe|=2;var o=dS(),r=pS();(ge!==e||W!==t)&&(vl=null,ar(e,t)),t=!1;var s=Ie;e:do try{if(ue!==0&&Z!==null){var a=Z,l=Nt;switch(ue){case 8:mp(),s=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(t=!0);var c=ue;if(ue=0,Nt=null,$o(e,a,l,c),n&&mr){s=0;break e}break;default:c=ue,ue=0,Nt=null,$o(e,a,l,c)}}Xw(),s=Ie;break}catch(d){cS(e,d)}while(1);return t&&e.shellSuspendCounter++,zn=lo=null,oe=i,z.H=o,z.A=r,Z===null&&(ge=null,W=0,Dl()),s}function Xw(){for(;Z!==null;)mS(Z)}function Qw(e,t){var n=oe;oe|=2;var i=dS(),o=pS();ge!==e||W!==t?(vl=null,yl=kt()+500,ar(e,t)):mr=Ps(e,t);e:do try{if(ue!==0&&Z!==null){t=Z;var r=Nt;t:switch(ue){case 1:ue=0,Nt=null,$o(e,t,r,1);break;case 2:case 9:if(oy(r)){ue=0,Nt=null,Ny(t);break}t=function(){ue!==2&&ue!==9||ge!==e||(ue=7),Cn(e)},r.then(t,t);break e;case 3:ue=7;break e;case 4:ue=5;break e;case 7:oy(r)?(ue=0,Nt=null,Ny(t)):(ue=0,Nt=null,$o(e,t,r,7));break;case 5:var s=null;switch(Z.tag){case 26:s=Z.memoizedState;case 5:case 27:var a=Z;if(s?US(s):a.stateNode.complete){ue=0,Nt=null;var l=a.sibling;if(l!==null)Z=l;else{var c=a.return;c!==null?(Z=c,Bl(c)):Z=null}break t}}ue=0,Nt=null,$o(e,t,r,5);break;case 6:ue=0,Nt=null,$o(e,t,r,6);break;case 8:mp(),Ie=6;break e;default:throw Error(b(462))}}Zw();break}catch(d){cS(e,d)}while(1);return zn=lo=null,z.H=i,z.A=o,oe=n,Z!==null?0:(ge=null,W=0,Dl(),Ie)}function Zw(){for(;Z!==null&&!T_();)mS(Z)}function mS(e){var t=q0(e.alternate,e,Zn);e.memoizedProps=e.pendingProps,t===null?Bl(e):Z=t}function Ny(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=xy(n,t,t.pendingProps,t.type,void 0,W);break;case 11:t=xy(n,t,t.pendingProps,t.type.render,t.ref,W);break;case 5:jd(t);default:B0(n,t),t=Z=Bv(t,Zn),t=q0(n,t,Zn)}e.memoizedProps=e.pendingProps,t===null?Bl(e):Z=t}function $o(e,t,n,i){zn=lo=null,jd(t),Qo=null,ws=0;var o=t.return;try{if(Hw(e,o,t,n,W)){Ie=1,ml(e,Jt(n,e.current)),Z=null;return}}catch(r){if(o!==null)throw Z=o,r;Ie=1,ml(e,Jt(n,e.current)),Z=null;return}t.flags&32768?(ee||i===1?e=!0:mr||(W&536870912)!==0?e=!1:(vi=e=!0,(i===2||i===9||i===3||i===6)&&(i=Ft.current,i!==null&&i.tag===13&&(i.flags|=16384))),hS(t,e)):Bl(t)}function Bl(e){var t=e;do{if((t.flags&32768)!==0){hS(t,vi);return}e=t.return;var n=Bw(t.alternate,t,Zn);if(n!==null){Z=n;return}if(t=t.sibling,t!==null){Z=t;return}Z=t=e}while(t!==null);Ie===0&&(Ie=5)}function hS(e,t){do{var n=zw(e.alternate,e);if(n!==null){n.flags&=32767,Z=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Z=e;return}Z=e=n}while(e!==null);Ie=6,Z=null}function Ry(e,t,n,i,o,r,s,a,l){e.cancelPendingCommit=null;do zl();while(Be!==0);if((oe&6)!==0)throw Error(b(327));if(t!==null){if(t===e.current)throw Error(b(177));if(r=t.lanes|t.childLanes,r|=Hd,I_(e,n,r,s,a,l),e===ge&&(Z=ge=null,W=0),sr=t,wi=e,Yn=n,pd=r,md=o,aS=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,tb(il,function(){return TS(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=z.T,z.T=null,o=re.p,re.p=2,s=oe,oe|=4;try{Vw(e,t,n)}finally{oe=s,re.p=o,z.T=i}}Be=1,gS(),yS(),vS()}}function gS(){if(Be===1){Be=0;var e=wi,t=sr,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=z.T,z.T=null;var i=re.p;re.p=2;var o=oe;oe|=4;try{j0(t,e);var r=Sd,s=Uv(e.containerInfo),a=r.focusedElem,l=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Dv(a.ownerDocument.documentElement,a)){if(l!==null&&Od(a)){var c=l.start,d=l.end;if(d===void 0&&(d=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(d,a.value.length);else{var p=a.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var h=m.getSelection(),g=a.textContent.length,T=Math.min(l.start,g),x=l.end===void 0?T:Math.min(l.end,g);!h.extend&&T>x&&(s=x,x=T,T=s);var y=Zg(a,T),v=Zg(a,x);if(y&&v&&(h.rangeCount!==1||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==v.node||h.focusOffset!==v.offset)){var S=p.createRange();S.setStart(y.node,y.offset),h.removeAllRanges(),T>x?(h.addRange(S),h.extend(v.node,v.offset)):(S.setEnd(v.node,v.offset),h.addRange(S))}}}}for(p=[],h=a;h=h.parentNode;)h.nodeType===1&&p.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<p.length;a++){var A=p[a];A.element.scrollLeft=A.left,A.element.scrollTop=A.top}}bl=!!vd,Sd=vd=null}finally{oe=o,re.p=i,z.T=n}}e.current=t,Be=2}}function yS(){if(Be===2){Be=0;var e=wi,t=sr,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=z.T,z.T=null;var i=re.p;re.p=2;var o=oe;oe|=4;try{K0(e,t.alternate,t)}finally{oe=o,re.p=i,z.T=n}}Be=3}}function vS(){if(Be===4||Be===3){Be=0,x_();var e=wi,t=sr,n=Yn,i=aS;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Be=5:(Be=0,sr=wi=null,SS(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(_i=null),Md(n),t=t.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Ls,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=z.T,o=re.p,re.p=2,z.T=null;try{for(var r=e.onRecoverableError,s=0;s<i.length;s++){var a=i[s];r(a.value,{componentStack:a.stack})}}finally{z.T=t,re.p=o}}(Yn&3)!==0&&zl(),Cn(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===hd?vs++:(vs=0,hd=e):vs=0,zs(0,!1)}}function SS(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Gs(t)))}function zl(){return gS(),yS(),vS(),TS()}function TS(){if(Be!==5)return!1;var e=wi,t=pd;pd=0;var n=Md(Yn),i=z.T,o=re.p;try{re.p=32>n?32:n,z.T=null,n=md,md=null;var r=wi,s=Yn;if(Be=0,sr=wi=null,Yn=0,(oe&6)!==0)throw Error(b(331));var a=oe;if(oe|=4,oS(r.current),tS(r,r.current,s,n),oe=a,zs(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Ls,r)}catch{}return!0}finally{re.p=o,z.T=i,SS(e,t)}}function Iy(e,t,n){t=Jt(n,t),t=ld(e.stateNode,t,2),e=Ci(e,t,2),e!==null&&(Fs(e,2),Cn(e))}function ce(e,t,n){if(e.tag===3)Iy(e,e,n);else for(;t!==null;){if(t.tag===3){Iy(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(_i===null||!_i.has(i))){e=Jt(n,e),n=L0(2),i=Ci(t,n,2),i!==null&&(P0(n,i,t,e),Fs(i,2),Cn(i));break}}t=t.return}}function wf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Jw;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(dp=!0,o.add(n),e=Ww.bind(null,e,t,n),t.then(e,e))}function Ww(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ge===e&&(W&n)===n&&(Ie===4||Ie===3&&(W&62914560)===W&&300>kt()-Gl?(oe&2)===0&&ar(e,0):pp|=n,rr===W&&(rr=0)),Cn(e)}function xS(e,t){t===0&&(t=dv()),e=ao(e,t),e!==null&&(Fs(e,t),Cn(e))}function jw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xS(e,n)}function eb(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(b(314))}i!==null&&i.delete(t),xS(e,n)}function tb(e,t){return Rd(e,t)}var Tl=null,Do=null,gd=!1,xl=!1,bf=!1,Ti=0;function Cn(e){e!==Do&&e.next===null&&(Do===null?Tl=Do=e:Do=Do.next=e),xl=!0,gd||(gd=!0,ib())}function zs(e,t){if(!bf&&xl){bf=!0;do for(var n=!1,i=Tl;i!==null;){if(!t)if(e!==0){var o=i.pendingLanes;if(o===0)var r=0;else{var s=i.suspendedLanes,a=i.pingedLanes;r=(1<<31-Ut(42|e)+1)-1,r&=o&~(s&~a),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,My(i,r))}else r=W,r=Rl(i,i===ge?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(r&3)===0||Ps(i,r)||(n=!0,My(i,r));i=i.next}while(n);bf=!1}}function nb(){AS()}function AS(){xl=gd=!1;var e=0;Ti!==0&&fb()&&(e=Ti);for(var t=kt(),n=null,i=Tl;i!==null;){var o=i.next,r=ES(i,t);r===0?(i.next=null,n===null?Tl=o:n.next=o,o===null&&(Do=n)):(n=i,(e!==0||(r&3)!==0)&&(xl=!0)),i=o}Be!==0&&Be!==5||zs(e,!1),Ti!==0&&(Ti=0)}function ES(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var s=31-Ut(r),a=1<<s,l=o[s];l===-1?((a&n)===0||(a&i)!==0)&&(o[s]=R_(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}if(t=ge,n=W,n=Rl(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(ue===2||ue===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&tf(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Ps(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&tf(i),Md(n)){case 2:case 8:n=cv;break;case 32:n=il;break;case 268435456:n=fv;break;default:n=il}return i=CS.bind(null,e),n=Rd(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&tf(i),e.callbackPriority=2,e.callbackNode=null,2}function CS(e,t){if(Be!==0&&Be!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(zl()&&e.callbackNode!==n)return null;var i=W;return i=Rl(e,e===ge?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(uS(e,i,t),ES(e,kt()),e.callbackNode!=null&&e.callbackNode===n?CS.bind(null,e):null)}function My(e,t){if(zl())return null;uS(e,t,!0)}function ib(){pb(function(){(oe&6)!==0?Rd(uv,nb):AS()})}function hp(){if(Ti===0){var e=nr;e===0&&(e=Aa,Aa<<=1,(Aa&261888)===0&&(Aa=256)),Ti=e}return Ti}function ky(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ga(""+e)}function Dy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function ob(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var r=ky((o[At]||null).action),s=i.submitter;s&&(t=(t=s[At]||null)?ky(t.formAction):s.getAttribute("formAction"),t!==null&&(r=t,s=null));var a=new Il("action","action",null,i,o);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ti!==0){var l=s?Dy(o,s):new FormData(o);sd(n,{pending:!0,data:l,method:o.method,action:r},null,l)}}else typeof r=="function"&&(a.preventDefault(),l=s?Dy(o,s):new FormData(o),sd(n,{pending:!0,data:l,method:o.method,action:r},r,l))},currentTarget:o}]})}}for(Ua=0;Ua<Kf.length;Ua++)La=Kf[Ua],Uy=La.toLowerCase(),Ly=La[0].toUpperCase()+La.slice(1),rn(Uy,"on"+Ly);var La,Uy,Ly,Ua;rn(Pv,"onAnimationEnd");rn(Fv,"onAnimationIteration");rn(Ov,"onAnimationStart");rn("dblclick","onDoubleClick");rn("focusin","onFocus");rn("focusout","onBlur");rn(Aw,"onTransitionRun");rn(Ew,"onTransitionStart");rn(Cw,"onTransitionCancel");rn(Hv,"onTransitionEnd");er("onMouseEnter",["mouseout","mouseover"]);er("onMouseLeave",["mouseout","mouseover"]);er("onPointerEnter",["pointerout","pointerover"]);er("onPointerLeave",["pointerout","pointerover"]);oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rs));function _S(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&o.isPropagationStopped())break e;r=a,o.currentTarget=c;try{r(o)}catch(d){rl(d)}o.currentTarget=null,r=l}else for(s=0;s<i.length;s++){if(a=i[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&o.isPropagationStopped())break e;r=a,o.currentTarget=c;try{r(o)}catch(d){rl(d)}o.currentTarget=null,r=l}}}}function Q(e,t){var n=t[Gf];n===void 0&&(n=t[Gf]=new Set);var i=e+"__bubble";n.has(i)||(wS(t,e,2,!1),n.add(i))}function Nf(e,t,n){var i=0;t&&(i|=4),wS(n,e,i,t)}var Pa="_reactListening"+Math.random().toString(36).slice(2);function gp(e){if(!e[Pa]){e[Pa]=!0,yv.forEach(function(n){n!=="selectionchange"&&(rb.has(n)||Nf(n,!1,e),Nf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pa]||(t[Pa]=!0,Nf("selectionchange",!1,t))}}function wS(e,t,n,i){switch(HS(t)){case 2:var o=Db;break;case 8:o=Ub;break;default:o=Tp}n=o.bind(null,t,n,e),o=void 0,!$f||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Rf(e,t,n,i,o){var r=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var a=i.stateNode.containerInfo;if(a===o)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===o)return;s=s.return}for(;a!==null;){if(s=Po(a),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){i=r=s;continue e}a=a.parentNode}}i=i.return}_v(function(){var c=r,d=Ud(n),p=[];e:{var m=Gv.get(e);if(m!==void 0){var h=Il,g=e;switch(e){case"keypress":if(Ba(n)===0)break e;case"keydown":case"keyup":h=ew;break;case"focusin":g="focus",h=af;break;case"focusout":g="blur",h=af;break;case"beforeblur":case"afterblur":h=af;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Bg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=B_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=iw;break;case Pv:case Fv:case Ov:h=$_;break;case Hv:h=rw;break;case"scroll":case"scrollend":h=G_;break;case"wheel":h=aw;break;case"copy":case"cut":case"paste":h=J_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Vg;break;case"toggle":case"beforetoggle":h=uw}var T=(t&4)!==0,x=!T&&(e==="scroll"||e==="scrollend"),y=T?m!==null?m+"Capture":null:m;T=[];for(var v=c,S;v!==null;){var A=v;if(S=A.stateNode,A=A.tag,A!==5&&A!==26&&A!==27||S===null||y===null||(A=xs(v,y),A!=null&&T.push(Is(v,A,S))),x)break;v=v.return}0<T.length&&(m=new h(m,g,null,n,d),p.push({event:m,listeners:T}))}}if((t&7)===0){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==Vf&&(g=n.relatedTarget||n.fromElement)&&(Po(g)||g[cr]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=c,g=g?Po(g):null,g!==null&&(x=Us(g),T=g.tag,g!==x||T!==5&&T!==27&&T!==6)&&(g=null)):(h=null,g=c),h!==g)){if(T=Bg,A="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(T=Vg,A="onPointerLeave",y="onPointerEnter",v="pointer"),x=h==null?m:os(h),S=g==null?m:os(g),m=new T(A,v+"leave",h,n,d),m.target=x,m.relatedTarget=S,A=null,Po(d)===c&&(T=new T(y,v+"enter",g,n,d),T.target=S,T.relatedTarget=x,A=T),x=A,h&&g)t:{for(T=sb,y=h,v=g,S=0,A=y;A;A=T(A))S++;A=0;for(var _=v;_;_=T(_))A++;for(;0<S-A;)y=T(y),S--;for(;0<A-S;)v=T(v),A--;for(;S--;){if(y===v||v!==null&&y===v.alternate){T=y;break t}y=T(y),v=T(v)}T=null}else T=null;h!==null&&Py(p,m,h,T,!1),g!==null&&x!==null&&Py(p,x,g,T,!0)}}e:{if(m=c?os(c):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var R=Kg;else if(Jg(m))if(Mv)R=Sw;else{R=yw;var C=gw}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&Dd(c.elementType)&&(R=Kg):R=vw;if(R&&(R=R(e,c))){Iv(p,R,n,d);break e}C&&C(e,m,c),e==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&zf(m,"number",m.value)}switch(C=c?os(c):window,e){case"focusin":(Jg(C)||C.contentEditable==="true")&&(Ho=C,Yf=c,us=null);break;case"focusout":us=Yf=Ho=null;break;case"mousedown":Jf=!0;break;case"contextmenu":case"mouseup":case"dragend":Jf=!1,Wg(p,n,d);break;case"selectionchange":if(xw)break;case"keydown":case"keyup":Wg(p,n,d)}var M;if(Fd)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Oo?Nv(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(bv&&n.locale!=="ko"&&(Oo||I!=="onCompositionStart"?I==="onCompositionEnd"&&Oo&&(M=wv()):(yi=d,Ld="value"in yi?yi.value:yi.textContent,Oo=!0)),C=Al(c,I),0<C.length&&(I=new zg(I,e,null,n,d),p.push({event:I,listeners:C}),M?I.data=M:(M=Rv(n),M!==null&&(I.data=M)))),(M=fw?dw(e,n):pw(e,n))&&(I=Al(c,"onBeforeInput"),0<I.length&&(C=new zg("onBeforeInput","beforeinput",null,n,d),p.push({event:C,listeners:I}),C.data=M)),ob(p,e,c,n,d)}_S(p,t)})}function Is(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Al(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,r=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||r===null||(o=xs(e,n),o!=null&&i.unshift(Is(e,o,r)),o=xs(e,t),o!=null&&i.push(Is(e,o,r))),e.tag===3)return i;e=e.return}return[]}function sb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Py(e,t,n,i,o){for(var r=t._reactName,s=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,o?(c=xs(n,r),c!=null&&s.unshift(Is(n,c,l))):o||(c=xs(n,r),c!=null&&s.push(Is(n,c,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var ab=/\r\n?/g,lb=/\u0000|\uFFFD/g;function Fy(e){return(typeof e=="string"?e:""+e).replace(ab,`
`).replace(lb,"")}function bS(e,t){return t=Fy(t),Fy(e)===t}function de(e,t,n,i,o,r){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||tr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&tr(e,""+i);break;case"className":_a(e,"class",i);break;case"tabIndex":_a(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":_a(e,n,i);break;case"style":Cv(e,i,r);break;case"data":if(t!=="object"){_a(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Ga(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&de(e,t,"name",o.name,o,null),de(e,t,"formEncType",o.formEncType,o,null),de(e,t,"formMethod",o.formMethod,o,null),de(e,t,"formTarget",o.formTarget,o,null)):(de(e,t,"encType",o.encType,o,null),de(e,t,"method",o.method,o,null),de(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Ga(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Bn);break;case"onScroll":i!=null&&Q("scroll",e);break;case"onScrollEnd":i!=null&&Q("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(b(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Ga(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Q("beforetoggle",e),Q("toggle",e),Ha(e,"popover",i);break;case"xlinkActuate":Un(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Un(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Un(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Un(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Un(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Un(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Un(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Un(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Un(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Ha(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=O_.get(n)||n,Ha(e,n,i))}}function yd(e,t,n,i,o,r){switch(n){case"style":Cv(e,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(b(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"children":typeof i=="string"?tr(e,i):(typeof i=="number"||typeof i=="bigint")&&tr(e,""+i);break;case"onScroll":i!=null&&Q("scroll",e);break;case"onScrollEnd":i!=null&&Q("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),r=e[At]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,o),typeof i=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Ha(e,n,i)}}}function nt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Q("error",e),Q("load",e);var i=!1,o=!1,r;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(s!=null)switch(r){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:de(e,t,r,s,n,null)}}o&&de(e,t,"srcSet",n.srcSet,n,null),i&&de(e,t,"src",n.src,n,null);return;case"input":Q("invalid",e);var a=r=s=o=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":o=d;break;case"type":s=d;break;case"checked":l=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":a=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(b(137,t));break;default:de(e,t,i,d,n,null)}}xv(e,r,a,l,c,s,o,!1);return;case"select":Q("invalid",e),i=s=r=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":r=a;break;case"defaultValue":s=a;break;case"multiple":i=a;default:de(e,t,o,a,n,null)}t=r,n=s,e.multiple=!!i,t!=null?Jo(e,!!i,t,!1):n!=null&&Jo(e,!!i,n,!0);return;case"textarea":Q("invalid",e),r=o=i=null;for(s in n)if(n.hasOwnProperty(s)&&(a=n[s],a!=null))switch(s){case"value":i=a;break;case"defaultValue":o=a;break;case"children":r=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(b(91));break;default:de(e,t,s,a,n,null)}Ev(e,i,o,r);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:de(e,t,l,i,n,null)}return;case"dialog":Q("beforetoggle",e),Q("toggle",e),Q("cancel",e),Q("close",e);break;case"iframe":case"object":Q("load",e);break;case"video":case"audio":for(i=0;i<Rs.length;i++)Q(Rs[i],e);break;case"image":Q("error",e),Q("load",e);break;case"details":Q("toggle",e);break;case"embed":case"source":case"link":Q("error",e),Q("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:de(e,t,c,i,n,null)}return;default:if(Dd(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&yd(e,t,d,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&de(e,t,a,i,n,null))}function ub(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,r=null,s=null,a=null,l=null,c=null,d=null;for(h in n){var p=n[h];if(n.hasOwnProperty(h)&&p!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=p;default:i.hasOwnProperty(h)||de(e,t,h,null,i,p)}}for(var m in i){var h=i[m];if(p=n[m],i.hasOwnProperty(m)&&(h!=null||p!=null))switch(m){case"type":r=h;break;case"name":o=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":s=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(b(137,t));break;default:h!==p&&de(e,t,m,h,i,p)}}Bf(e,s,a,l,c,d,r,o);return;case"select":h=s=a=m=null;for(r in n)if(l=n[r],n.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(r)||de(e,t,r,null,i,l)}for(o in i)if(r=i[o],l=n[o],i.hasOwnProperty(o)&&(r!=null||l!=null))switch(o){case"value":m=r;break;case"defaultValue":a=r;break;case"multiple":s=r;default:r!==l&&de(e,t,o,r,i,l)}t=a,n=s,i=h,m!=null?Jo(e,!!n,m,!1):!!i!=!!n&&(t!=null?Jo(e,!!n,t,!0):Jo(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(a in n)if(o=n[a],n.hasOwnProperty(a)&&o!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:de(e,t,a,null,i,o)}for(s in i)if(o=i[s],r=n[s],i.hasOwnProperty(s)&&(o!=null||r!=null))switch(s){case"value":m=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(b(91));break;default:o!==r&&de(e,t,s,o,i,r)}Av(e,m,h);return;case"option":for(var g in n)if(m=n[g],n.hasOwnProperty(g)&&m!=null&&!i.hasOwnProperty(g))switch(g){case"selected":e.selected=!1;break;default:de(e,t,g,null,i,m)}for(l in i)if(m=i[l],h=n[l],i.hasOwnProperty(l)&&m!==h&&(m!=null||h!=null))switch(l){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:de(e,t,l,m,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var T in n)m=n[T],n.hasOwnProperty(T)&&m!=null&&!i.hasOwnProperty(T)&&de(e,t,T,null,i,m);for(c in i)if(m=i[c],h=n[c],i.hasOwnProperty(c)&&m!==h&&(m!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(b(137,t));break;default:de(e,t,c,m,i,h)}return;default:if(Dd(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!i.hasOwnProperty(x)&&yd(e,t,x,void 0,i,m);for(d in i)m=i[d],h=n[d],!i.hasOwnProperty(d)||m===h||m===void 0&&h===void 0||yd(e,t,d,m,i,h);return}}for(var y in n)m=n[y],n.hasOwnProperty(y)&&m!=null&&!i.hasOwnProperty(y)&&de(e,t,y,null,i,m);for(p in i)m=i[p],h=n[p],!i.hasOwnProperty(p)||m===h||m==null&&h==null||de(e,t,p,m,i,h)}function Oy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],r=o.transferSize,s=o.initiatorType,a=o.duration;if(r&&a&&Oy(s)){for(s=0,a=o.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>a)break;var d=l.transferSize,p=l.initiatorType;d&&Oy(p)&&(l=l.responseEnd,s+=d*(l<a?1:(a-c)/(l-c)))}if(--i,t+=8*(r+s)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var vd=null,Sd=null;function El(e){return e.nodeType===9?e:e.ownerDocument}function Hy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function NS(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var If=null;function fb(){var e=window.event;return e&&e.type==="popstate"?e===If?!1:(If=e,!0):(If=null,!1)}var RS=typeof setTimeout=="function"?setTimeout:void 0,db=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,pb=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(e){return Gy.resolve(null).then(e).catch(mb)}:RS;function mb(e){setTimeout(function(){throw e})}function Li(e){return e==="head"}function qy(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(o),ur(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Ss(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Ss(n);for(var r=n.firstChild;r;){var s=r.nextSibling,a=r.nodeName;r[Os]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=s}}else n==="body"&&Ss(e.ownerDocument.body);n=o}while(n);ur(t)}function By(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function xd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":xd(n),kd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function hb(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Os])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Qt(e.nextSibling),e===null)break}return null}function gb(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Qt(e.nextSibling),e===null))return null;return e}function IS(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Qt(e.nextSibling),e===null))return null;return e}function Ad(e){return e.data==="$?"||e.data==="$~"}function Ed(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function yb(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Cd=null;function zy(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Qt(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Vy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function MS(e,t,n){switch(t=El(n),e){case"html":if(e=t.documentElement,!e)throw Error(b(452));return e;case"head":if(e=t.head,!e)throw Error(b(453));return e;case"body":if(e=t.body,!e)throw Error(b(454));return e;default:throw Error(b(451))}}function Ss(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);kd(e)}var Zt=new Map,$y=new Set;function Cl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Wn=re.d;re.d={f:vb,r:Sb,D:Tb,C:xb,L:Ab,m:Eb,X:_b,S:Cb,M:wb};function vb(){var e=Wn.f(),t=ql();return e||t}function Sb(e){var t=fr(e);t!==null&&t.tag===5&&t.type==="form"?C0(t):Wn.r(e)}var hr=typeof document>"u"?null:document;function kS(e,t,n){var i=hr;if(i&&typeof t=="string"&&t){var o=Yt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),$y.has(o)||($y.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),nt(t,"link",e),Ke(t),i.head.appendChild(t)))}}function Tb(e){Wn.D(e),kS("dns-prefetch",e,null)}function xb(e,t){Wn.C(e,t),kS("preconnect",e,t)}function Ab(e,t,n){Wn.L(e,t,n);var i=hr;if(i&&e&&t){var o='link[rel="preload"][as="'+Yt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Yt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Yt(n.imageSizes)+'"]')):o+='[href="'+Yt(e)+'"]';var r=o;switch(t){case"style":r=lr(e);break;case"script":r=gr(e)}Zt.has(r)||(e=Ae({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Zt.set(r,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(Vs(r))||t==="script"&&i.querySelector($s(r))||(t=i.createElement("link"),nt(t,"link",e),Ke(t),i.head.appendChild(t)))}}function Eb(e,t){Wn.m(e,t);var n=hr;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Yt(i)+'"][href="'+Yt(e)+'"]',r=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=gr(e)}if(!Zt.has(r)&&(e=Ae({rel:"modulepreload",href:e},t),Zt.set(r,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($s(r)))return}i=n.createElement("link"),nt(i,"link",e),Ke(i),n.head.appendChild(i)}}}function Cb(e,t,n){Wn.S(e,t,n);var i=hr;if(i&&e){var o=Yo(i).hoistableStyles,r=lr(e);t=t||"default";var s=o.get(r);if(!s){var a={loading:0,preload:null};if(s=i.querySelector(Vs(r)))a.loading=5;else{e=Ae({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Zt.get(r))&&yp(e,n);var l=s=i.createElement("link");Ke(l),nt(l,"link",e),l._p=new Promise(function(c,d){l.onload=c,l.onerror=d}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Qa(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:a},o.set(r,s)}}}function _b(e,t){Wn.X(e,t);var n=hr;if(n&&e){var i=Yo(n).hoistableScripts,o=gr(e),r=i.get(o);r||(r=n.querySelector($s(o)),r||(e=Ae({src:e,async:!0},t),(t=Zt.get(o))&&vp(e,t),r=n.createElement("script"),Ke(r),nt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function wb(e,t){Wn.M(e,t);var n=hr;if(n&&e){var i=Yo(n).hoistableScripts,o=gr(e),r=i.get(o);r||(r=n.querySelector($s(o)),r||(e=Ae({src:e,async:!0,type:"module"},t),(t=Zt.get(o))&&vp(e,t),r=n.createElement("script"),Ke(r),nt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(o,r))}}function Yy(e,t,n,i){var o=(o=xi.current)?Cl(o):null;if(!o)throw Error(b(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=lr(n.href),n=Yo(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=lr(n.href);var r=Yo(o).hoistableStyles,s=r.get(e);if(s||(o=o.ownerDocument||o,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,s),(r=o.querySelector(Vs(e)))&&!r._p&&(s.instance=r,s.state.loading=5),Zt.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Zt.set(e,n),r||bb(o,e,n,s.state))),t&&i===null)throw Error(b(528,""));return s}if(t&&i!==null)throw Error(b(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=gr(n),n=Yo(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(b(444,e))}}function lr(e){return'href="'+Yt(e)+'"'}function Vs(e){return'link[rel="stylesheet"]['+e+"]"}function DS(e){return Ae({},e,{"data-precedence":e.precedence,precedence:null})}function bb(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),nt(t,"link",n),Ke(t),e.head.appendChild(t))}function gr(e){return'[src="'+Yt(e)+'"]'}function $s(e){return"script[async]"+e}function Jy(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Yt(n.href)+'"]');if(i)return t.instance=i,Ke(i),i;var o=Ae({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Ke(i),nt(i,"style",o),Qa(i,n.precedence,e),t.instance=i;case"stylesheet":o=lr(n.href);var r=e.querySelector(Vs(o));if(r)return t.state.loading|=4,t.instance=r,Ke(r),r;i=DS(n),(o=Zt.get(o))&&yp(i,o),r=(e.ownerDocument||e).createElement("link"),Ke(r);var s=r;return s._p=new Promise(function(a,l){s.onload=a,s.onerror=l}),nt(r,"link",i),t.state.loading|=4,Qa(r,n.precedence,e),t.instance=r;case"script":return r=gr(n.src),(o=e.querySelector($s(r)))?(t.instance=o,Ke(o),o):(i=n,(o=Zt.get(r))&&(i=Ae({},n),vp(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),Ke(o),nt(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(b(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Qa(i,n.precedence,e));return t.instance}function Qa(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,r=o,s=0;s<i.length;s++){var a=i[s];if(a.dataset.precedence===t)r=a;else if(r!==o)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function yp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function vp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Za=null;function Ky(e,t,n){if(Za===null){var i=new Map,o=Za=new Map;o.set(n,i)}else o=Za,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var r=n[o];if(!(r[Os]||r[je]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var s=r.getAttribute(t)||"";s=e+s;var a=i.get(s);a?a.push(r):i.set(s,[r])}}return i}function Xy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Nb(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function US(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Rb(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=lr(i.href),r=t.querySelector(Vs(o));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=_l.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=r,Ke(r);return}r=t.ownerDocument||t,i=DS(i),(o=Zt.get(o))&&yp(i,o),r=r.createElement("link"),Ke(r);var s=r;s._p=new Promise(function(a,l){s.onload=a,s.onerror=l}),nt(r,"link",i),n.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=_l.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Mf=0;function Ib(e,t){return e.stylesheets&&e.count===0&&Wa(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&Wa(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&Mf===0&&(Mf=62500*cb());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wa(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>Mf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function _l(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wa(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wl=null;function Wa(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wl=new Map,t.forEach(Mb,e),wl=null,_l.call(e))}function Mb(e,t){if(!(t.state.loading&4)){var n=wl.get(e);if(n)var i=n.get(null);else{n=new Map,wl.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<o.length;r++){var s=o[r];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}o=t.instance,s=o.getAttribute("data-precedence"),r=n.get(s)||i,r===i&&n.set(null,o),n.set(s,o),this.count++,i=_l.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),r?r.parentNode.insertBefore(o,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Ms={$$typeof:qn,Provider:null,Consumer:null,_currentValue:Ki,_currentValue2:Ki,_threadCount:0};function kb(e,t,n,i,o,r,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nf(0),this.hiddenUpdates=nf(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=r,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function LS(e,t,n,i,o,r,s,a,l,c,d,p){return e=new kb(e,t,n,s,l,c,d,p,a),t=1,r===!0&&(t|=24),r=It(3,null,null,t),e.current=r,r.stateNode=e,t=Vd(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},Jd(r),e}function PS(e){return e?(e=Bo,e):Bo}function FS(e,t,n,i,o,r){o=PS(o),i.context===null?i.context=o:i.pendingContext=o,i=Ei(t),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Ci(e,i,t),n!==null&&(xt(n,e,t),fs(n,e,t))}function Qy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Sp(e,t){Qy(e,t),(e=e.alternate)&&Qy(e,t)}function OS(e){if(e.tag===13||e.tag===31){var t=ao(e,67108864);t!==null&&xt(t,e,67108864),Sp(e,67108864)}}function Zy(e){if(e.tag===13||e.tag===31){var t=Lt();t=Id(t);var n=ao(e,t);n!==null&&xt(n,e,t),Sp(e,t)}}var bl=!0;function Db(e,t,n,i){var o=z.T;z.T=null;var r=re.p;try{re.p=2,Tp(e,t,n,i)}finally{re.p=r,z.T=o}}function Ub(e,t,n,i){var o=z.T;z.T=null;var r=re.p;try{re.p=8,Tp(e,t,n,i)}finally{re.p=r,z.T=o}}function Tp(e,t,n,i){if(bl){var o=_d(i);if(o===null)Rf(e,t,i,Nl,n),Wy(e,i);else if(Pb(o,e,t,n,i))i.stopPropagation();else if(Wy(e,i),t&4&&-1<Lb.indexOf(e)){for(;o!==null;){var r=fr(o);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var s=$i(r.pendingLanes);if(s!==0){var a=r;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-Ut(s);a.entanglements[1]|=l,s&=~l}Cn(r),(oe&6)===0&&(yl=kt()+500,zs(0,!1))}}break;case 31:case 13:a=ao(r,2),a!==null&&xt(a,r,2),ql(),Sp(r,2)}if(r=_d(i),r===null&&Rf(e,t,i,Nl,n),r===o)break;o=r}o!==null&&i.stopPropagation()}else Rf(e,t,i,null,n)}}function _d(e){return e=Ud(e),xp(e)}var Nl=null;function xp(e){if(Nl=null,e=Po(e),e!==null){var t=Us(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=ov(t),e!==null)return e;e=null}else if(n===31){if(e=rv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nl=e,null}function HS(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(A_()){case uv:return 2;case cv:return 8;case il:case E_:return 32;case fv:return 268435456;default:return 32}default:return 32}}var wd=!1,bi=null,Ni=null,Ri=null,ks=new Map,Ds=new Map,hi=[],Lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wy(e,t){switch(e){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":ks.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ds.delete(t.pointerId)}}function es(e,t,n,i,o,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[o]},t!==null&&(t=fr(t),t!==null&&OS(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Pb(e,t,n,i,o){switch(t){case"focusin":return bi=es(bi,e,t,n,i,o),!0;case"dragenter":return Ni=es(Ni,e,t,n,i,o),!0;case"mouseover":return Ri=es(Ri,e,t,n,i,o),!0;case"pointerover":var r=o.pointerId;return ks.set(r,es(ks.get(r)||null,e,t,n,i,o)),!0;case"gotpointercapture":return r=o.pointerId,Ds.set(r,es(Ds.get(r)||null,e,t,n,i,o)),!0}return!1}function GS(e){var t=Po(e.target);if(t!==null){var n=Us(t);if(n!==null){if(t=n.tag,t===13){if(t=ov(n),t!==null){e.blockedOn=t,Lg(e.priority,function(){Zy(n)});return}}else if(t===31){if(t=rv(n),t!==null){e.blockedOn=t,Lg(e.priority,function(){Zy(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ja(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_d(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Vf=i,n.target.dispatchEvent(i),Vf=null}else return t=fr(n),t!==null&&OS(t),e.blockedOn=n,!1;t.shift()}return!0}function jy(e,t,n){ja(e)&&n.delete(t)}function Fb(){wd=!1,bi!==null&&ja(bi)&&(bi=null),Ni!==null&&ja(Ni)&&(Ni=null),Ri!==null&&ja(Ri)&&(Ri=null),ks.forEach(jy),Ds.forEach(jy)}function Fa(e,t){e.blockedOn===t&&(e.blockedOn=null,wd||(wd=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,Fb)))}var Oa=null;function ev(e){Oa!==e&&(Oa=e,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,function(){Oa===e&&(Oa=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(xp(i||n)===null)continue;break}var r=fr(n);r!==null&&(e.splice(t,3),t-=3,sd(r,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function ur(e){function t(l){return Fa(l,e)}bi!==null&&Fa(bi,e),Ni!==null&&Fa(Ni,e),Ri!==null&&Fa(Ri,e),ks.forEach(t),Ds.forEach(t);for(var n=0;n<hi.length;n++){var i=hi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<hi.length&&(n=hi[0],n.blockedOn===null);)GS(n),n.blockedOn===null&&hi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],r=n[i+1],s=o[At]||null;if(typeof r=="function")s||ev(n);else if(s){var a=null;if(r&&r.hasAttribute("formAction")){if(o=r,s=r[At]||null)a=s.formAction;else if(xp(o)!==null)continue}else a=s.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),ev(n)}}}function qS(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(s){return o=s})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Ap(e){this._internalRoot=e}Vl.prototype.render=Ap.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));var n=t.current,i=Lt();FS(n,i,e,t,null,null)};Vl.prototype.unmount=Ap.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;FS(e.current,2,null,e,null,null),ql(),t[cr]=null}};function Vl(e){this._internalRoot=e}Vl.prototype.unstable_scheduleHydration=function(e){if(e){var t=gv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hi.length&&t!==0&&t<hi[n].priority;n++);hi.splice(n,0,e),n===0&&GS(e)}};var tv=nv.version;if(tv!=="19.2.3")throw Error(b(527,tv,"19.2.3"));re.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=h_(t),e=e!==null?sv(e):null,e=e===null?null:e.stateNode,e};var Ob={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(ts=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ts.isDisabled&&ts.supportsFiber))try{Ls=ts.inject(Ob),Dt=ts}catch{}var ts;$l.createRoot=function(e,t){if(!iv(e))throw Error(b(299));var n=!1,i="",o=k0,r=D0,s=U0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=LS(e,1,!1,null,null,n,i,null,o,r,s,qS),e[cr]=t.current,gp(e),new Ap(t)};$l.hydrateRoot=function(e,t,n){if(!iv(e))throw Error(b(299));var i=!1,o="",r=k0,s=D0,a=U0,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),t=LS(e,1,!0,t,n??null,i,o,l,r,s,a,qS),t.context=PS(null),n=t.current,i=Lt(),i=Id(i),o=Ei(i),o.callback=null,Ci(n,o,i),n=i,t.current.lanes=n,Fs(t,n),Cn(t),e[cr]=t.current,gp(e),new Vl(t)};$l.version="19.2.3"});var $S=yn((WF,VS)=>{"use strict";function zS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zS)}catch(e){console.error(e)}}zS(),VS.exports=BS()});var YS,JS,KS,yr,Yl,Ys,XS,Ep,Cp,QS,ZS,WS,_p,Jl,jS,eT,tT=Vr(()=>{YS="hermes_os_settings",JS="hermes_os_chat_history",KS="hermes_os_archived_conversations",yr=new Map,Yl=null,Ys=null,XS=e=>{try{let t={...e};Yl=t,yr.set(YS,JSON.stringify(t))}catch(t){console.error("Failed to save settings",t)}return Promise.resolve()},Ep=()=>{if(Yl)return Yl;let e=yr.get(YS);if(!e)return null;try{return JSON.parse(e)}catch(t){return console.error("Failed to load settings",t),null}},Cp=()=>Promise.resolve(Ep()),QS=()=>(Yl=null,Cp()),ZS=e=>{try{let t=["<noise>","<ctrl46>"],n=e.map(i=>{let o=i;return t.forEach(r=>{let s=new RegExp(r,"gi");o=o.replace(s,"")}),o.trim()});yr.set(JS,JSON.stringify(n))}catch(t){console.error("Failed to save chat history",t)}return Promise.resolve()},WS=()=>{let e=yr.get(JS);if(!e)return[];try{return JSON.parse(e)}catch(t){return console.error("Failed to load chat history",t),[]}},_p=e=>{try{Ys=e,yr.set(KS,JSON.stringify(e))}catch(t){console.error("Failed to save archived conversations",t)}return Promise.resolve()},Jl=()=>{if(Ys)return Promise.resolve(Ys);let e=yr.get(KS);if(!e)return Promise.resolve([]);try{return Ys=JSON.parse(e),Promise.resolve(Ys)}catch(t){return console.error("Failed to load archived conversations",t),Promise.resolve([])}},jS=async e=>{let n=[...await Jl(),e];await _p(n)},eT=async e=>{let n=(await Jl()).filter(i=>i.key!==e);await _p(n)}});var wn,_n,Js,nT,wp,iT,oT,rT,sT,bp,aT,lT,uT,Np,Kl,cT,fT,dT=Vr(()=>{wn=null,_n=null,Js=null,nT=Promise.resolve(),wp=async e=>{let t=nT,n;nT=new Promise(i=>{n=i});try{if(await t,!wn){console.warn("persistData called without obsidianPlugin");return}let i=await wn.loadData()||{},o=e(i);await wn.saveData(o)}catch(i){console.error("Failed to persist data",i)}finally{n()}},iT=e=>{wn=e},oT=()=>wn,rT=async e=>{let t={...e};_n=t,await wp(n=>({...n,...t}))},sT=()=>_n||null,bp=async()=>{if(wn)try{_n=await wn.loadData()||{};let t=wn.settings;return t&&(_n={..._n,...t}),_n}catch(e){return console.error("Failed to load settings from Obsidian",e),null}return null},aT=async()=>(_n=null,await bp()),lT=async e=>{let t=["<noise>","<ctrl46>"],n=e.map(i=>{let o=i;return t.forEach(r=>{let s=new RegExp(r,"gi");o=o.replace(s,"")}),o.trim()});await wp(i=>({...i,chatHistory:n}))},uT=()=>_n?.chatHistory?_n.chatHistory:[],Np=async e=>{Js=e,await wp(t=>({...t,archivedConversations:e}))},Kl=async()=>{if(Js)return Js;if(wn)try{return Js=(await wn.loadData())?.archivedConversations||[],Js}catch(e){return console.error("Failed to load archived conversations",e),[]}return[]},cT=async e=>{let n=[...await Kl(),e];await Np(n)},fT=async e=>{let n=(await Kl()).filter(i=>i.key!==e);await Np(n)}});var bn,pT,mT,Xl,Qe,hT,Ql,Rp,Nn,vr,gT,yT,mt=Vr(()=>{tT();dT();bn=!1,pT=e=>{bn=!0,iT(e)},mT=()=>oT(),Xl=async e=>bn?rT(e):XS(e),Qe=()=>bn?sT():Ep(),hT=async()=>bn?bp():Cp(),Ql=async()=>bn?aT():QS(),Rp=async e=>bn?lT(e):ZS(e),Nn=()=>bn?uT():WS(),vr=async()=>bn?Kl():Jl(),gT=async e=>bn?cT(e):jS(e),yT=async e=>bn?fT(e):eT(e)});function me(){return mT()?.app??null}function sn(){return me()!==null}async function Ze(e,t={}){if(!sn())return!1;try{let n=me();if(!n)return!1;let i=n.vault.getAbstractFileByPath(e);if(!i||!(i instanceof Zl.TFile))return console.warn(`File not found: ${e}`),!1;let{newWindow:o=!1,split:r=!1}=t,s=n.workspace;if(!o&&!r){let l=s.getLeavesOfType("markdown").find(c=>c.view instanceof Zl.MarkdownView&&c.view.file?.path===e);if(l)return s.setActiveLeaf(l,{focus:!0}),!0}let a;return r?a=s.getLeaf("split"):o?a=s.getLeaf(!0):a=s.getLeaf(!1),await a.openFile(i),!0}catch(n){return console.warn("Failed to open file in Obsidian:",n),!1}}function Ve(e){if(!e||typeof e!="string")return"/";let t=e.startsWith("/")?e.slice(1):e,n=t.lastIndexOf("/");if(n===-1)return"/";let i=t.substring(0,n);return i.startsWith("/")?i:`/${i}/`}var Zl,Ee=Vr(()=>{Zl=require("obsidian");mt()});var at,Ip,vT,Wt,ST,Rn,Ks,Wl,TT,Ot,xT,jl,uo,AT,ET,CT,eu,_T,tu,Me=Vr(()=>{at=require("obsidian");mt();Ee();Ip=e=>"children"in e,vT=e=>e.endsWith("/")?e.slice(0,-1):e,Wt=()=>{let e=me();if(!e)throw new Error("Obsidian app not available");return e},ST=async()=>{},Rn=()=>Wt().vault.getMarkdownFiles().map(n=>n.path).filter(n=>!n.startsWith("chat history/trash/")),Ks=e=>{let{limit:t=20,offset:n=0,sortBy:i="mtime",sortOrder:o="desc",filter:r}=e,a=Wt().vault.getMarkdownFiles().filter(d=>!d.path.startsWith("chat history/trash/")).map(d=>({path:d.path,name:d.name,mtime:d.stat.mtime,size:d.stat.size}));if(r){let d=r.toLowerCase();a=a.filter(p=>p.path.toLowerCase().includes(d)||p.name.toLowerCase().includes(d))}a.sort((d,p)=>{let m=d[i],h=p[i];return typeof m=="string"&&typeof h=="string"&&(m=m.toLowerCase(),h=h.toLowerCase()),m<h?o==="asc"?-1:1:m>h?o==="asc"?1:-1:0});let l=a.length,c=a.slice(n,n+t);return Promise.resolve({files:c,total:l})},Wl=e=>{let t=Wt(),n=t.vault.getAllLoadedFiles();if(e){let i=vT(e),o=t.vault.getAbstractFileByPath((0,at.normalizePath)(i));if(o||(o=t.vault.getAbstractFileByPath((0,at.normalizePath)(e))),!o&&!e.endsWith("/")&&(o=t.vault.getAbstractFileByPath((0,at.normalizePath)(e+"/"))),!o||!Ip(o)){let r=[`Original path: "${e}"`,`Normalized path: "${i}"`,`With trailing slash: "${e+"/"}"`].join(", ");throw new Error(`Folder not found: ${e}. Attempted: ${r}`)}return n.filter(r=>{let s=i||e;return r.path.startsWith(s+"/")||r.path===s}).map(r=>r.path).sort()}return n.filter(i=>Ip(i)&&i.path!=="chat history/trash").map(i=>i.path).sort()},TT=()=>Wt().vault.getAllLoadedFiles().filter(n=>Ip(n)&&n.path!=="chat history/trash").map(n=>({path:n.path,children:[]})),Ot=async e=>{let t=Wt(),n=t.vault.getAbstractFileByPath((0,at.normalizePath)(e));if(!n)throw new Error(`File not found in vault: ${e}`);return await t.vault.read(n)},xT=async(e,t)=>{let n=Wt(),i=e.substring(0,e.lastIndexOf("/"));i&&i.length>0&&(await n.vault.adapter.exists(i)||await n.vault.createFolder(i));let o=t instanceof Uint8Array?t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):t;return await n.vault.adapter.writeBinary(e,o),`Created binary file ${e} in vault`},jl=async(e,t)=>{let n=Wt(),i=(0,at.normalizePath)(e),o=i.substring(0,i.lastIndexOf("/"));return o&&o.length>0&&(n.vault.getAbstractFileByPath((0,at.normalizePath)(o))||await n.vault.createFolder(o)),await n.vault.create(i,t),`Created ${e} in vault`},uo=async(e,t)=>{let n=Wt(),i=n.vault.getAbstractFileByPath((0,at.normalizePath)(e));if(!i)throw new Error(`File not found: ${e}`);return await n.vault.modify(i,t),`Updated ${e} in vault`},AT=async(e,t)=>{let n=Wt(),i=n.vault.getAbstractFileByPath((0,at.normalizePath)(e));if(!i)throw new Error(`File not found: ${e}`);return await n.fileManager.renameFile(i,(0,at.normalizePath)(t)),`Renamed ${e} to ${t} in vault`},ET=async(e,t)=>{let n=Wt(),i=(0,at.normalizePath)(e),o=(0,at.normalizePath)(t),r=n.vault.getAbstractFileByPath(i);if(!r)throw new Error(`Source file not found: ${e}`);if(n.vault.getAbstractFileByPath(o))throw new Error(`Target file already exists: ${t}`);return await n.fileManager.renameFile(r,o),`Moved ${e} to ${t} in vault`},CT=async(e,t,n,i)=>{let r=(await Ot(e)).split(`
`);if(t==="append")r.push(n||"");else if(t==="replace_line"){if(i===void 0||i<1||i>r.length)throw new Error(`Invalid line number: ${i}`);r[i-1]=n||""}else if(t==="remove_line"){if(i===void 0||i<1||i>r.length)throw new Error(`Invalid line number: ${i}`);r.splice(i-1,1)}else throw new Error(`Unknown operation: ${t}`);let s=r.join(`
`);return await uo(e,s),`Successfully performed ${t} on ${e}`},eu=async e=>{let t=Wt(),n=(0,at.normalizePath)(vT(e));if(t.vault.getAbstractFileByPath(n))return`Directory ${n} already exists`;let o=n.substring(0,n.lastIndexOf("/"));return o&&o.length>0&&(t.vault.getAbstractFileByPath((0,at.normalizePath)(o))||await t.vault.createFolder(o)),await t.vault.createFolder(n),`Created directory ${n} in vault`},_T=async e=>{let t=Wt(),n=t.vault.getAbstractFileByPath((0,at.normalizePath)(e));if(!n)throw new Error(`File not found: ${e}`);let r=`${Qe()?.chatHistoryFolder||"chat-history"}/trash`;t.vault.getAbstractFileByPath((0,at.normalizePath)(r))||await t.vault.createFolder(r);let a=new Date().toISOString().replace(/[:.]/g,"-"),l=e.split("/").pop()||e,c=`${r}/${a}-${l}`;return await t.fileManager.renameFile(n,c),`Moved ${e} to trash`},tu=async(e,t=!1,n="i")=>{let i=Rn(),o=[],r=t?new RegExp(e,n):null,s=t?"":e.toLowerCase();for(let a of i){let c=(await Ot(a)).split(`
`),d=[];c.forEach((p,m)=>{let h=!1;t&&r?h=r.test(p):h=p.toLowerCase().includes(s),h&&d.push({line:m+1,content:p,contextBefore:c.slice(Math.max(0,m-2),m),contextAfter:c.slice(m+1,Math.min(c.length,m+3))})}),d.length>0&&o.push({filename:a,matches:d})}return o}});var JE=yn(hc=>{"use strict";var MP=Symbol.for("react.transitional.element"),kP=Symbol.for("react.fragment");function YE(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:MP,type:e,key:i,ref:t!==void 0?t:null,props:n}}hc.Fragment=kP;hc.jsx=YE;hc.jsxs=YE});var te=yn((a3,KE)=>{"use strict";KE.exports=JE()});var BF={};ae(BF,{default:()=>Rc});module.exports=JC(BF);var MC=require("obsidian");var Xh=J(Gt(),1),RC=require("obsidian"),IC=J($S(),1);var H=J(Gt(),1);Me();mt();var qb,Bb;function zb(){return{geminiUrl:qb,vertexUrl:Bb}}function Vb(e,t,n,i){var o,r;if(!e?.baseUrl){let s=zb();return t?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(r=s.geminiUrl)!==null&&r!==void 0?r:i}return e.baseUrl}var un=class{};function k(e,t){let n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){let r=t[o];return r!=null?String(r):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(e,t,n){for(let r=0;r<t.length-1;r++){let s=t[r];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[a])){let l=e[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){let d=l[c];f(d,t.slice(r+1),n[c])}else for(let c of l)f(c,t.slice(r+1),n)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in e||(e[a]=[{}]);let l=e[a];f(l[0],t.slice(r+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}let i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function u(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;let o=t[i];if(o.endsWith("[]")){let r=o.slice(0,-2);if(r in e){let s=e[r];return Array.isArray(s)?s.map(a=>u(a,t.slice(i+1),n)):n}else return n}else e=e[o]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function $b(e,t){for(let[n,i]of Object.entries(t)){let o=n.split("."),r=i.split("."),s=new Set,a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&r.length>a)for(let l=a;l<r.length;l++){let c=r[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}Dp(e,o,r,0,s)}}function Dp(e,t,n,i,o){if(i>=t.length||typeof e!="object"||e===null)return;let r=t[i];if(r.endsWith("[]")){let s=r.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(let l of a[s])Dp(l,t,n,i+1,o)}else if(r==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){let s=e,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!o.has(c)),l={};for(let c of a)l[c]=s[c];for(let[c,d]of Object.entries(l)){let p=[];for(let m of n.slice(i))m==="*"?p.push(c):p.push(m);f(s,p,d)}for(let c of a)delete s[c]}}else{let s=e;r in s&&Dp(s[r],t,n,i+1,o)}}function bm(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Yb(e){let t={},n=u(e,["operationName"]);n!=null&&f(t,["operationName"],n);let i=u(e,["resourceName"]);return i!=null&&f(t,["_url","resourceName"],i),t}function Jb(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],Xb(s)),t}function Kb(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],Qb(s)),t}function Xb(e){let t={},n=u(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Zb(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function Qb(e){let t={},n=u(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Wb(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function Zb(e){let t={},n=u(e,["video"]);return n!=null&&f(t,["video"],o1(n)),t}function Wb(e){let t={},n=u(e,["_self"]);return n!=null&&f(t,["video"],r1(n)),t}function jb(e){let t={},n=u(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function e1(e){let t={},n=u(e,["operationName"]);return n!=null&&f(t,["_url","operationName"],n),t}function t1(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],n1(s)),t}function n1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["parent"]);i!=null&&f(t,["parent"],i);let o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function Xx(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],i1(s)),t}function i1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["parent"]);i!=null&&f(t,["parent"],i);let o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function o1(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);let i=u(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],bm(i));let o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function r1(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["uri"],n);let i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],bm(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}var wT;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(wT||(wT={}));var bT;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(bT||(bT={}));var NT;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(NT||(NT={}));var w;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(w||(w={}));var RT;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(RT||(RT={}));var IT;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(IT||(IT={}));var MT;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(MT||(MT={}));var kT;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(kT||(kT={}));var DT;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(DT||(DT={}));var UT;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(UT||(UT={}));var LT;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(LT||(LT={}));var PT;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(PT||(PT={}));var FT;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(FT||(FT={}));var OT;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(OT||(OT={}));var HT;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(HT||(HT={}));var GT;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(GT||(GT={}));var qT;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(qT||(qT={}));var BT;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(BT||(BT={}));var zT;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(zT||(zT={}));var VT;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(VT||(VT={}));var $T;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($T||($T={}));var Er;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Er||(Er={}));var YT;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(YT||(YT={}));var JT;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(JT||(JT={}));var KT;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(KT||(KT={}));var Up;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Up||(Up={}));var XT;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(XT||(XT={}));var QT;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(QT||(QT={}));var Lp;(function(e){e.COLLECTION="COLLECTION"})(Lp||(Lp={}));var ZT;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(ZT||(ZT={}));var WT;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(WT||(WT={}));var jT;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(jT||(jT={}));var ex;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(ex||(ex={}));var tx;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(tx||(tx={}));var nx;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nx||(nx={}));var ix;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ix||(ix={}));var ox;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ox||(ox={}));var rx;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(rx||(rx={}));var sx;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(sx||(sx={}));var ax;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(ax||(ax={}));var lx;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(lx||(lx={}));var ux;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(ux||(ux={}));var cx;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cx||(cx={}));var fx;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(fx||(fx={}));var dx;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(dx||(dx={}));var px;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(px||(px={}));var mx;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(mx||(mx={}));var hx;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(hx||(hx={}));var gx;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gx||(gx={}));var yx;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(yx||(yx={}));var vx;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(vx||(vx={}));var Sx;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Sx||(Sx={}));var Tx;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Tx||(Tx={}));var xx;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(xx||(xx={}));var Ax;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ax||(Ax={}));var Ex;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Ex||(Ex={}));var Tr;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Tr||(Tr={}));var Zs=class{constructor(t){let n={};for(let i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}};var fo=class{get text(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1,p=[];for(let m of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[h,g]of Object.entries(m))h!=="text"&&h!=="thought"&&h!=="thoughtSignature"&&(g!==null||g!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",d=[];for(let p of(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,i,o,r,s,a,l;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(c?.length!==0)return c}get executableCode(){var t,n,i,o,r,s,a,l,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,i,o,r,s,a,l,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let d=(l=(a=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.output}},uu=class{},cu=class{},Pp=class{},Fp=class{},Op=class{},Hp=class{},fu=class{},du=class{},pu=class{},Gp=class{};var Cr=class{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let i=new Cr,o,r=t;return n?o=Kb(r):o=Jb(r),Object.assign(i,o),i}},mu=class{},hu=class{},gu=class{},yu=class{},qp=class{},Bp=class{},zp=class{};var Ws=class{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let i=new Ws,r=t1(t);return Object.assign(i,r),i}},Vp=class{},$p=class{},Yp=class{};var vu=class{};var Jp=class{get text(){var t,n,i;let o="",r=!1,s=[];for(let a of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?o:void 0}get data(){var t,n,i;let o="",r=[];for(let s of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(let[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&r.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var Kp=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var js=class{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let i=new js,r=Xx(t);return Object.assign(i,r),i}};function ne(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){let n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Qx(e,t){let n=ne(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function Zx(e){return Array.isArray(e)?e.map(t=>Su(t)):[Su(e)]}function Su(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Wx(e){let t=Su(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function jx(e){let t=Su(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Cx(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function eA(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Cx(t)):[Cx(e)]}function Xp(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function _x(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function wx(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function lt(e){if(e==null)throw new Error("ContentUnion is required");return Xp(e)?e:{role:"user",parts:eA(e)}}function Nm(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{let i=lt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){let n=lt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>lt(n)):[lt(t)]}function jt(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(_x(e)||wx(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[lt(e)]}let t=[],n=[],i=Xp(e[0]);for(let o of e){let r=Xp(o);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)t.push(o);else{if(_x(o)||wx(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:eA(n)}),t}function s1(e,t){e.includes("null")&&(t.nullable=!0);let n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(w).includes(n[0].toUpperCase())?n[0].toUpperCase():w.TYPE_UNSPECIFIED;else{t.anyOf=[];for(let i of n)t.anyOf.push({type:Object.values(w).includes(i.toUpperCase())?i.toUpperCase():w.TYPE_UNSPECIFIED})}}function xr(e){let t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");let r=e.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(t.nullable=!0,e=r[1]):r[1].type==="null"&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&s1(e.type,t);for(let[s,a]of Object.entries(e))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(w).includes(a.toUpperCase())?a.toUpperCase():w.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=xr(a);else if(i.includes(s)){let l=[];for(let c of a){if(c.type=="null"){t.nullable=!0;continue}l.push(xr(c))}t[s]=l}else if(o.includes(s)){let l={};for(let[c,d]of Object.entries(a))l[c]=xr(d);t[s]=l}else{if(s==="additionalProperties")continue;t[s]=a}return t}function Rm(e){return xr(e)}function Im(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Mm(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Nr(e){if(e.functionDeclarations)for(let t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=xr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=xr(t.response));return e}function Rr(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");let t=[];for(let n of e)t.push(n);return t}function a1(e,t,n,i=1){let o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function ti(e,t){if(typeof t!="string")throw new Error("name must be a string");return a1(e,t,"cachedContents")}function tA(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Fi(e){return bm(e)}function l1(e){return e!=null&&typeof e=="object"&&"name"in e}function u1(e){return e!=null&&typeof e=="object"&&"video"in e}function c1(e){return e!=null&&typeof e=="object"&&"uri"in e}function nA(e){var t;let n;if(l1(e)&&(n=e.name),!(c1(e)&&(n=e.uri,n===void 0))&&!(u1(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function iA(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function oA(e){for(let t of["models","tunedModels","publisherModels"])if(f1(e,t))return e[t];return[]}function f1(e,t){return e!==null&&typeof e=="object"&&t in e}function d1(e,t={}){let n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function p1(e,t={}){let n=[],i=new Set;for(let o of e){let r=o.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);let s=d1(o,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function rA(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;let i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function m1(e){if(typeof e!="string")return e;let t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function sA(e){if(typeof e!="object"||e===null)return{};let t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;let o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let r=!1;for(let s of o){if(typeof s!="object"||s===null)continue;let l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){r=!0;break}}return r&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Ir(e,t){let n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function aA(e){let t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function h1(e){let t={},n=u(e,["responsesFile"]);n!=null&&f(t,["fileName"],n);let i=u(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>X1(s))),f(t,["inlinedResponses"],r)}let o=u(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["inlinedEmbedContentResponses"],r)}return t}function g1(e){let t={},n=u(e,["predictionsFormat"]);n!=null&&f(t,["format"],n);let i=u(e,["gcsDestination","outputUriPrefix"]);i!=null&&f(t,["gcsUri"],i);let o=u(e,["bigqueryDestination","outputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function y1(e){let t={},n=u(e,["format"]);n!=null&&f(t,["predictionsFormat"],n);let i=u(e,["gcsUri"]);i!=null&&f(t,["gcsDestination","outputUriPrefix"],i);let o=u(e,["bigqueryUri"]);if(o!=null&&f(t,["bigqueryDestination","outputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function au(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata","displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["metadata","state"]);o!=null&&f(t,["state"],aA(o));let r=u(e,["metadata","createTime"]);r!=null&&f(t,["createTime"],r);let s=u(e,["metadata","endTime"]);s!=null&&f(t,["endTime"],s);let a=u(e,["metadata","updateTime"]);a!=null&&f(t,["updateTime"],a);let l=u(e,["metadata","model"]);l!=null&&f(t,["model"],l);let c=u(e,["metadata","output"]);return c!=null&&f(t,["dest"],h1(sA(c))),t}function Qp(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["state"]);o!=null&&f(t,["state"],aA(o));let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["createTime"]);s!=null&&f(t,["createTime"],s);let a=u(e,["startTime"]);a!=null&&f(t,["startTime"],a);let l=u(e,["endTime"]);l!=null&&f(t,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&f(t,["updateTime"],c);let d=u(e,["model"]);d!=null&&f(t,["model"],d);let p=u(e,["inputConfig"]);p!=null&&f(t,["src"],v1(p));let m=u(e,["outputConfig"]);m!=null&&f(t,["dest"],g1(sA(m)));let h=u(e,["completionStats"]);return h!=null&&f(t,["completionStats"],h),t}function v1(e){let t={},n=u(e,["instancesFormat"]);n!=null&&f(t,["format"],n);let i=u(e,["gcsSource","uris"]);i!=null&&f(t,["gcsUri"],i);let o=u(e,["bigquerySource","inputUri"]);return o!=null&&f(t,["bigqueryUri"],o),t}function S1(e,t){let n={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let i=u(t,["fileName"]);i!=null&&f(n,["fileName"],i);let o=u(t,["inlinedRequests"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>K1(e,s))),f(n,["requests","requests"],r)}return n}function T1(e){let t={},n=u(e,["format"]);n!=null&&f(t,["instancesFormat"],n);let i=u(e,["gcsUri"]);i!=null&&f(t,["gcsSource","uris"],i);let o=u(e,["bigqueryUri"]);if(o!=null&&f(t,["bigquerySource","inputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function x1(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function A1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function E1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function C1(e){let t={},n=u(e,["content"]);n!=null&&f(t,["content"],n);let i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],_1(i));let o=u(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);let r=u(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);let s=u(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);let a=u(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);let l=u(e,["index"]);l!=null&&f(t,["index"],l);let c=u(e,["logprobsResult"]);c!=null&&f(t,["logprobsResult"],c);let d=u(e,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),f(t,["safetyRatings"],m)}let p=u(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function _1(e){let t={},n=u(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function lA(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>nN(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function w1(e,t){let n={},i=u(e,["displayName"]);if(t!==void 0&&i!=null&&f(t,["batch","displayName"],i),u(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function b1(e,t){let n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);let o=u(e,["dest"]);return t!==void 0&&o!=null&&f(t,["outputConfig"],y1(m1(o))),n}function bx(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["src"]);o!=null&&f(n,["batch","inputConfig"],S1(e,rA(e,o)));let r=u(t,["config"]);return r!=null&&w1(r,n),n}function N1(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["model"],ne(e,i));let o=u(t,["src"]);o!=null&&f(n,["inputConfig"],T1(rA(e,o)));let r=u(t,["config"]);return r!=null&&b1(r,n),n}function R1(e,t){let n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["batch","displayName"],i),n}function I1(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["src"]);o!=null&&f(n,["batch","inputConfig"],F1(e,o));let r=u(t,["config"]);return r!=null&&R1(r,n),n}function M1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function k1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function D1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);return r!=null&&f(t,["error"],r),t}function U1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);return r!=null&&f(t,["error"],r),t}function L1(e,t){let n={},i=u(t,["contents"]);if(i!=null){let r=Nm(e,i);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["requests[]","request","content"],r)}let o=u(t,["config"]);return o!=null&&(f(n,["_self"],P1(o,n)),$b(n,{"requests[].*":"requests[].request.*"})),n}function P1(e,t){let n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);let o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);let r=u(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function F1(e,t){let n={},i=u(t,["fileName"]);i!=null&&f(n,["file_name"],i);let o=u(t,["inlinedRequests"]);return o!=null&&f(n,["requests"],L1(e,o)),n}function O1(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function H1(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function G1(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&f(t,["allowedFunctionNames"],n);let i=u(e,["mode"]);if(i!=null&&f(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function q1(e,t,n){let i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],lA(lt(o)));let r=u(t,["temperature"]);r!=null&&f(i,["temperature"],r);let s=u(t,["topP"]);s!=null&&f(i,["topP"],s);let a=u(t,["topK"]);a!=null&&f(i,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=u(t,["logprobs"]);m!=null&&f(i,["logprobs"],m);let h=u(t,["presencePenalty"]);h!=null&&f(i,["presencePenalty"],h);let g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);let T=u(t,["seed"]);T!=null&&f(i,["seed"],T);let x=u(t,["responseMimeType"]);x!=null&&f(i,["responseMimeType"],x);let y=u(t,["responseSchema"]);y!=null&&f(i,["responseSchema"],Rm(y));let v=u(t,["responseJsonSchema"]);if(v!=null&&f(i,["responseJsonSchema"],v),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let S=u(t,["safetySettings"]);if(n!==void 0&&S!=null){let fe=S;Array.isArray(fe)&&(fe=fe.map(B=>iN(B))),f(n,["safetySettings"],fe)}let A=u(t,["tools"]);if(n!==void 0&&A!=null){let fe=Rr(A);Array.isArray(fe)&&(fe=fe.map(B=>rN(Nr(B)))),f(n,["tools"],fe)}let _=u(t,["toolConfig"]);if(n!==void 0&&_!=null&&f(n,["toolConfig"],oN(_)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let R=u(t,["cachedContent"]);n!==void 0&&R!=null&&f(n,["cachedContent"],ti(e,R));let C=u(t,["responseModalities"]);C!=null&&f(i,["responseModalities"],C);let M=u(t,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);let I=u(t,["speechConfig"]);if(I!=null&&f(i,["speechConfig"],Im(I)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let N=u(t,["thinkingConfig"]);N!=null&&f(i,["thinkingConfig"],N);let G=u(t,["imageConfig"]);G!=null&&f(i,["imageConfig"],J1(G));let ye=u(t,["enableEnhancedCivicAnswers"]);if(ye!=null&&f(i,["enableEnhancedCivicAnswers"],ye),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function B1(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>C1(c))),f(t,["candidates"],l)}let o=u(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);let r=u(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);let s=u(e,["responseId"]);s!=null&&f(t,["responseId"],s);let a=u(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function z1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function V1(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],Ir(e,i)),n}function $1(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function Y1(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function J1(e){let t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);let i=u(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function K1(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["request","model"],ne(e,i));let o=u(t,["contents"]);if(o!=null){let a=jt(o);Array.isArray(a)&&(a=a.map(l=>lA(l))),f(n,["request","contents"],a)}let r=u(t,["metadata"]);r!=null&&f(n,["metadata"],r);let s=u(t,["config"]);return s!=null&&f(n,["request","generationConfig"],q1(e,s,u(n,["request"],{}))),n}function X1(e){let t={},n=u(e,["response"]);n!=null&&f(t,["response"],B1(n));let i=u(e,["error"]);return i!=null&&f(t,["error"],i),t}function Q1(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);if(t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),u(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Z1(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);t!==void 0&&o!=null&&f(t,["_query","pageToken"],o);let r=u(e,["filter"]);return t!==void 0&&r!=null&&f(t,["_query","filter"],r),n}function W1(e){let t={},n=u(e,["config"]);return n!=null&&Q1(n,t),t}function j1(e){let t={},n=u(e,["config"]);return n!=null&&Z1(n,t),t}function eN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["operations"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>au(s))),f(t,["batchJobs"],r)}return t}function tN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["batchPredictionJobs"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Qp(s))),f(t,["batchJobs"],r)}return t}function nN(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],O1(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],H1(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],x1(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function iN(e){let t={},n=u(e,["category"]);if(n!=null&&f(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function oN(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&f(t,["retrievalConfig"],n);let i=u(e,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],G1(i)),t}function rN(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],$1(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],Y1(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}var jn;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(jn||(jn={}));var ei=class{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,r;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(r=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}};var Zp=class extends un{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ei(jn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){let n=bx(this.apiClient,t),i=n._url,o=k("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(let d of l){let p=Object.assign({},d);if(p.systemInstruction){let m=p.systemInstruction;delete p.systemInstruction;let h=p.request;h.systemInstruction=m,p.request=h}c.push(p)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){let i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){let r=this.getGcsUri(t),s=this.getBigqueryUri(t);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${o}`;else if(s)i.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=N1(this.apiClient,t);return a=k("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Qp(d))}else{let c=bx(this.apiClient,t);return a=k("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>au(d))}}async createEmbeddingsInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=I1(this.apiClient,t);return r=k("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>au(l))}}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=V1(this.apiClient,t);return a=k("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Qp(d))}else{let c=z1(this.apiClient,t);return a=k("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>au(d))}}async cancel(t){var n,i,o,r;let s="",a={};if(this.apiClient.isVertexAI()){let l=E1(this.apiClient,t);s=k("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{let l=A1(this.apiClient,t);s=k("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=j1(t);return a=k("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=tN(d),m=new vu;return Object.assign(m,p),m})}else{let c=W1(t);return a=k("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=eN(d),m=new vu;return Object.assign(m,p),m})}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=k1(this.apiClient,t);return a=k("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>U1(d))}else{let c=M1(this.apiClient,t);return a=k("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>D1(d))}}};function sN(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Nx(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>RN(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function aN(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);let r=u(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);let s=u(e,["contents"]);if(t!==void 0&&s!=null){let d=jt(s);Array.isArray(d)&&(d=d.map(p=>Nx(p))),f(t,["contents"],d)}let a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],Nx(lt(a)));let l=u(e,["tools"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>MN(p))),f(t,["tools"],d)}let c=u(e,["toolConfig"]);if(t!==void 0&&c!=null&&f(t,["toolConfig"],IN(c)),u(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function lN(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);t!==void 0&&o!=null&&f(t,["expireTime"],o);let r=u(e,["displayName"]);t!==void 0&&r!=null&&f(t,["displayName"],r);let s=u(e,["contents"]);if(t!==void 0&&s!=null){let p=jt(s);Array.isArray(p)&&(p=p.map(m=>m)),f(t,["contents"],p)}let a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],lt(a));let l=u(e,["tools"]);if(t!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>kN(m))),f(t,["tools"],p)}let c=u(e,["toolConfig"]);t!==void 0&&c!=null&&f(t,["toolConfig"],c);let d=u(e,["kmsKeyName"]);return t!==void 0&&d!=null&&f(t,["encryption_spec","kmsKeyName"],d),n}function uN(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["model"],Qx(e,i));let o=u(t,["config"]);return o!=null&&aN(o,n),n}function cN(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["model"],Qx(e,i));let o=u(t,["config"]);return o!=null&&lN(o,n),n}function fN(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ti(e,i)),n}function dN(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ti(e,i)),n}function pN(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function mN(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function hN(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function gN(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function yN(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&f(t,["allowedFunctionNames"],n);let i=u(e,["mode"]);if(i!=null&&f(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function vN(e){let t={},n=u(e,["description"]);n!=null&&f(t,["description"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);let r=u(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);let s=u(e,["response"]);s!=null&&f(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&f(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function SN(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ti(e,i)),n}function TN(e,t){let n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],ti(e,i)),n}function xN(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function AN(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function EN(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function CN(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function _N(e){let t={},n=u(e,["config"]);return n!=null&&EN(n,t),t}function wN(e){let t={},n=u(e,["config"]);return n!=null&&CN(n,t),t}function bN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function NN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["cachedContents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["cachedContents"],r)}return t}function RN(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],hN(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],gN(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],sN(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function IN(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&f(t,["retrievalConfig"],n);let i=u(e,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],yN(i)),t}function MN(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],xN(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],AN(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function kN(e){let t={},n=u(e,["retrieval"]);n!=null&&f(t,["retrieval"],n);let i=u(e,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);let r=u(e,["enterpriseWebSearch"]);r!=null&&f(t,["enterpriseWebSearch"],r);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>vN(m))),f(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);let d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function DN(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function UN(e,t){let n={},i=u(e,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);let o=u(e,["expireTime"]);return t!==void 0&&o!=null&&f(t,["expireTime"],o),n}function LN(e,t){let n={},i=u(t,["name"]);i!=null&&f(n,["_url","name"],ti(e,i));let o=u(t,["config"]);return o!=null&&DN(o,n),n}function PN(e,t){let n={},i=u(t,["name"]);i!=null&&f(n,["_url","name"],ti(e,i));let o=u(t,["config"]);return o!=null&&UN(o,n),n}var Wp=class extends un{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ei(jn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=cN(this.apiClient,t);return a=k("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=uN(this.apiClient,t);return a=k("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=TN(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=SN(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=dN(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=mN(d),m=new gu;return Object.assign(m,p),m})}else{let c=fN(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=pN(d),m=new gu;return Object.assign(m,p),m})}}async update(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=PN(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=LN(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=wN(t);return a=k("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=NN(d),m=new yu;return Object.assign(m,p),m})}else{let c=_N(t);return a=k("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=bN(d),m=new yu;return Object.assign(m,p),m})}}};function Tu(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function Rx(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $(e){return this instanceof $?(this.v=e,this):new $(e)}function an(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(g){return Promise.resolve(g).then(h,p)}}function a(h,g){i[h]&&(o[h]=function(T){return new Promise(function(x,y){r.push([h,T,x,y])>1||l(h,T)})},g&&(o[h]=g(o[h])))}function l(h,g){try{c(i[h](g))}catch(T){m(r[0][3],T)}}function c(h){h.value instanceof $?Promise.resolve(h.value.v).then(d,p):m(r[0][2],h)}function d(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),r.shift(),r.length&&l(r[0][0],r[0][1])}}function ln(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Rx=="function"?Rx(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(s){return new Promise(function(a,l){s=e[r](s),o(a,l,s.done,s.value)})}}function o(r,s,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},s)}}function FN(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;let n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:uA(n)}function uA(e){if(e.parts===void 0||e.parts.length===0)return!1;for(let t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function ON(e){if(e.length!==0){for(let t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Ix(e){if(e===void 0||e.length===0)return[];let t=[],n=e.length,i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{let o=[],r=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),r&&!uA(e[i])&&(r=!1),i++;r?t.push(...o):t.pop()}return t}var jp=class{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new em(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}},em=class{constructor(t,n,i,o={},r=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=r,this.sendPromise=Promise.resolve(),ON(r)}async sendMessage(t){var n;await this.sendPromise;let i=lt(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,s,a;let l=await o,c=(s=(r=l.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content,d=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length,m=[];d!=null&&(m=(a=d.slice(p))!==null&&a!==void 0?a:[]);let h=c?[c]:[];this.recordHistory(i,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;let i=lt(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let r=await o;return this.processStreamResponse(r,i)}getHistory(t=!1){let n=t?Ix(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return an(this,arguments,function*(){var o,r,s,a,l,c;let d=[];try{for(var p=!0,m=ln(t),h;h=yield $(m.next()),o=h.done,!o;p=!0){a=h.value,p=!1;let g=a;if(FN(g)){let T=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;T!==void 0&&d.push(T)}yield yield $(g)}}catch(g){r={error:g}}finally{try{!p&&!o&&(s=m.return)&&(yield $(s.call(m)))}finally{if(r)throw r.error}}this.recordHistory(n,d)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(r=>r.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Ix(i)):this.history.push(t),this.history.push(...o)}};var po=class extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,po.prototype)}};function HN(e){let t={},n=u(e,["file"]);return n!=null&&f(t,["file"],n),t}function GN(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function qN(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","file"],nA(n)),t}function BN(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function zN(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","file"],nA(n)),t}function VN(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function $N(e){let t={},n=u(e,["config"]);return n!=null&&VN(n,t),t}function YN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["files"],r)}return t}var tm=class extends un{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ei(jn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=$N(t);return r=k("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=YN(l),d=new Vp;return Object.assign(d,c),d})}}async createInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=HN(t);return r=k("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=GN(l),d=new $p;return Object.assign(d,c),d})}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=zN(t);return r=k("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=qN(t);return r=k("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=BN(l),d=new Yp;return Object.assign(d,c),d})}}};function lu(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function JN(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>uR(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function KN(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function XN(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function QN(e){let t={},n=u(e,["description"]);n!=null&&f(t,["description"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);let r=u(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);let s=u(e,["response"]);s!=null&&f(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&f(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function ZN(e){let t={},n=u(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);let i=u(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);let o=u(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);let r=u(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);let s=u(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);let a=u(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);let l=u(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);let c=u(e,["maxOutputTokens"]);c!=null&&f(t,["maxOutputTokens"],c);let d=u(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);let p=u(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);let m=u(e,["responseLogprobs"]);m!=null&&f(t,["responseLogprobs"],m);let h=u(e,["responseMimeType"]);h!=null&&f(t,["responseMimeType"],h);let g=u(e,["responseModalities"]);g!=null&&f(t,["responseModalities"],g);let T=u(e,["responseSchema"]);T!=null&&f(t,["responseSchema"],T);let x=u(e,["routingConfig"]);x!=null&&f(t,["routingConfig"],x);let y=u(e,["seed"]);y!=null&&f(t,["seed"],y);let v=u(e,["speechConfig"]);v!=null&&f(t,["speechConfig"],v);let S=u(e,["stopSequences"]);S!=null&&f(t,["stopSequences"],S);let A=u(e,["temperature"]);A!=null&&f(t,["temperature"],A);let _=u(e,["thinkingConfig"]);_!=null&&f(t,["thinkingConfig"],_);let R=u(e,["topK"]);R!=null&&f(t,["topK"],R);let C=u(e,["topP"]);if(C!=null&&f(t,["topP"],C),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function WN(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function jN(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function eR(e,t){let n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);let r=u(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);let s=u(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","mediaResolution"],c);let d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],Mm(p));let m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);let h=u(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],h);let g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],JN(lt(g)));let T=u(e,["tools"]);if(t!==void 0&&T!=null){let R=Rr(T);Array.isArray(R)&&(R=R.map(C=>fR(Nr(C)))),f(t,["setup","tools"],R)}let x=u(e,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],cR(x));let y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);let v=u(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","outputAudioTranscription"],v);let S=u(e,["realtimeInputConfig"]);t!==void 0&&S!=null&&f(t,["setup","realtimeInputConfig"],S);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&f(t,["setup","contextWindowCompression"],A);let _=u(e,["proactivity"]);if(t!==void 0&&_!=null&&f(t,["setup","proactivity"],_),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function tR(e,t){let n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],ZN(i));let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);let r=u(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);let s=u(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","mediaResolution"],c);let d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],Mm(p));let m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);let h=u(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],h);let g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],lt(g));let T=u(e,["tools"]);if(t!==void 0&&T!=null){let C=Rr(T);Array.isArray(C)&&(C=C.map(M=>dR(Nr(M)))),f(t,["setup","tools"],C)}let x=u(e,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],x);let y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);let v=u(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","outputAudioTranscription"],v);let S=u(e,["realtimeInputConfig"]);t!==void 0&&S!=null&&f(t,["setup","realtimeInputConfig"],S);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&f(t,["setup","contextWindowCompression"],A);let _=u(e,["proactivity"]);t!==void 0&&_!=null&&f(t,["setup","proactivity"],_);let R=u(e,["explicitVadSignal"]);return t!==void 0&&R!=null&&f(t,["setup","explicitVadSignal"],R),n}function nR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],ne(e,i));let o=u(t,["config"]);return o!=null&&f(n,["config"],eR(o,n)),n}function iR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],ne(e,i));let o=u(t,["config"]);return o!=null&&f(n,["config"],tR(o,n)),n}function oR(e){let t={},n=u(e,["musicGenerationConfig"]);return n!=null&&f(t,["musicGenerationConfig"],n),t}function rR(e){let t={},n=u(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["weightedPrompts"],i)}return t}function sR(e){let t={},n=u(e,["media"]);if(n!=null){let c=Zx(n);Array.isArray(c)&&(c=c.map(d=>lu(d))),f(t,["mediaChunks"],c)}let i=u(e,["audio"]);i!=null&&f(t,["audio"],lu(jx(i)));let o=u(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);let r=u(e,["video"]);r!=null&&f(t,["video"],lu(Wx(r)));let s=u(e,["text"]);s!=null&&f(t,["text"],s);let a=u(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);let l=u(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function aR(e){let t={},n=u(e,["media"]);if(n!=null){let c=Zx(n);Array.isArray(c)&&(c=c.map(d=>d)),f(t,["mediaChunks"],c)}let i=u(e,["audio"]);i!=null&&f(t,["audio"],jx(i));let o=u(e,["audioStreamEnd"]);o!=null&&f(t,["audioStreamEnd"],o);let r=u(e,["video"]);r!=null&&f(t,["video"],Wx(r));let s=u(e,["text"]);s!=null&&f(t,["text"],s);let a=u(e,["activityStart"]);a!=null&&f(t,["activityStart"],a);let l=u(e,["activityEnd"]);return l!=null&&f(t,["activityEnd"],l),t}function lR(e){let t={},n=u(e,["setupComplete"]);n!=null&&f(t,["setupComplete"],n);let i=u(e,["serverContent"]);i!=null&&f(t,["serverContent"],i);let o=u(e,["toolCall"]);o!=null&&f(t,["toolCall"],o);let r=u(e,["toolCallCancellation"]);r!=null&&f(t,["toolCallCancellation"],r);let s=u(e,["usageMetadata"]);s!=null&&f(t,["usageMetadata"],pR(s));let a=u(e,["goAway"]);a!=null&&f(t,["goAway"],a);let l=u(e,["sessionResumptionUpdate"]);l!=null&&f(t,["sessionResumptionUpdate"],l);let c=u(e,["voiceActivityDetectionSignal"]);c!=null&&f(t,["voiceActivityDetectionSignal"],c);let d=u(e,["voiceActivity"]);return d!=null&&f(t,["voiceActivity"],mR(d)),t}function uR(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],KN(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],XN(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],lu(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function cR(e){let t={},n=u(e,["handle"]);if(n!=null&&f(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function fR(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],WN(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],jN(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function dR(e){let t={},n=u(e,["retrieval"]);n!=null&&f(t,["retrieval"],n);let i=u(e,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);let r=u(e,["enterpriseWebSearch"]);r!=null&&f(t,["enterpriseWebSearch"],r);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>QN(m))),f(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);let d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function pR(e){let t={},n=u(e,["promptTokenCount"]);n!=null&&f(t,["promptTokenCount"],n);let i=u(e,["cachedContentTokenCount"]);i!=null&&f(t,["cachedContentTokenCount"],i);let o=u(e,["candidatesTokenCount"]);o!=null&&f(t,["responseTokenCount"],o);let r=u(e,["toolUsePromptTokenCount"]);r!=null&&f(t,["toolUsePromptTokenCount"],r);let s=u(e,["thoughtsTokenCount"]);s!=null&&f(t,["thoughtsTokenCount"],s);let a=u(e,["totalTokenCount"]);a!=null&&f(t,["totalTokenCount"],a);let l=u(e,["promptTokensDetails"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["promptTokensDetails"],h)}let c=u(e,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["cacheTokensDetails"],h)}let d=u(e,["candidatesTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["responseTokensDetails"],h)}let p=u(e,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),f(t,["toolUsePromptTokensDetails"],h)}let m=u(e,["trafficType"]);return m!=null&&f(t,["trafficType"],m),t}function mR(e){let t={},n=u(e,["type"]);return n!=null&&f(t,["voiceActivityType"],n),t}function hR(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function gR(e){let t={},n=u(e,["content"]);n!=null&&f(t,["content"],n);let i=u(e,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],yR(i));let o=u(e,["tokenCount"]);o!=null&&f(t,["tokenCount"],o);let r=u(e,["finishReason"]);r!=null&&f(t,["finishReason"],r);let s=u(e,["avgLogprobs"]);s!=null&&f(t,["avgLogprobs"],s);let a=u(e,["groundingMetadata"]);a!=null&&f(t,["groundingMetadata"],a);let l=u(e,["index"]);l!=null&&f(t,["index"],l);let c=u(e,["logprobsResult"]);c!=null&&f(t,["logprobsResult"],c);let d=u(e,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>h)),f(t,["safetyRatings"],m)}let p=u(e,["urlContextMetadata"]);return p!=null&&f(t,["urlContextMetadata"],p),t}function yR(e){let t={},n=u(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(t,["citations"],i)}return t}function vR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["contents"]);if(o!=null){let r=jt(o);Array.isArray(r)&&(r=r.map(s=>s)),f(n,["contents"],r)}return n}function SR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(t,["tokensInfo"],o)}return t}function TR(e){let t={},n=u(e,["values"]);n!=null&&f(t,["values"],n);let i=u(e,["statistics"]);return i!=null&&f(t,["statistics"],xR(i)),t}function xR(e){let t={},n=u(e,["truncated"]);n!=null&&f(t,["truncated"],n);let i=u(e,["token_count"]);return i!=null&&f(t,["tokenCount"],i),t}function Lu(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>II(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function AR(e){let t={},n=u(e,["controlType"]);n!=null&&f(t,["controlType"],n);let i=u(e,["enableControlImageComputation"]);return i!=null&&f(t,["computeControl"],i),t}function ER(e){let t={};if(u(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function CR(e,t){let n={},i=u(e,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],lt(i));let o=u(e,["tools"]);if(t!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>pA(a))),f(t,["tools"],s)}let r=u(e,["generationConfig"]);return t!==void 0&&r!=null&&f(t,["generationConfig"],hI(r)),n}function _R(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["contents"]);if(o!=null){let s=jt(o);Array.isArray(s)&&(s=s.map(a=>Lu(a))),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&ER(r),n}function wR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["contents"]);if(o!=null){let s=jt(o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&CR(r,n),n}function bR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["totalTokens"]);i!=null&&f(t,["totalTokens"],i);let o=u(e,["cachedContentTokenCount"]);return o!=null&&f(t,["cachedContentTokenCount"],o),t}function NR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["totalTokens"]);return i!=null&&f(t,["totalTokens"],i),t}function RR(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],ne(e,i)),n}function IR(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],ne(e,i)),n}function MR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function kR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}function DR(e,t){let n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);let o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);let r=u(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);let s=u(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);let a=u(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);let l=u(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);let c=u(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&f(t,["parameters","safetySetting"],c);let d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);let p=u(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);let m=u(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);let h=u(e,["language"]);t!==void 0&&h!=null&&f(t,["parameters","language"],h);let g=u(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);let T=u(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T);let x=u(e,["addWatermark"]);t!==void 0&&x!=null&&f(t,["parameters","addWatermark"],x);let y=u(e,["labels"]);t!==void 0&&y!=null&&f(t,["labels"],y);let v=u(e,["editMode"]);t!==void 0&&v!=null&&f(t,["parameters","editMode"],v);let S=u(e,["baseSteps"]);return t!==void 0&&S!=null&&f(t,["parameters","editConfig","baseSteps"],S),n}function UR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>PI(l))),f(n,["instances[0]","referenceImages"],a)}let s=u(t,["config"]);return s!=null&&DR(s,n),n}function LR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Pu(r))),f(t,["generatedImages"],o)}return t}function PR(e,t){let n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);let o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["requests[]","title"],o);let r=u(e,["outputDimensionality"]);if(t!==void 0&&r!=null&&f(t,["requests[]","outputDimensionality"],r),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function FR(e,t){let n={},i=u(e,["taskType"]);t!==void 0&&i!=null&&f(t,["instances[]","task_type"],i);let o=u(e,["title"]);t!==void 0&&o!=null&&f(t,["instances[]","title"],o);let r=u(e,["outputDimensionality"]);t!==void 0&&r!=null&&f(t,["parameters","outputDimensionality"],r);let s=u(e,["mimeType"]);t!==void 0&&s!=null&&f(t,["instances[]","mimeType"],s);let a=u(e,["autoTruncate"]);return t!==void 0&&a!=null&&f(t,["parameters","autoTruncate"],a),n}function OR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["contents"]);if(o!=null){let a=Nm(e,o);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}let r=u(t,["config"]);r!=null&&PR(r,n);let s=u(t,["model"]);return s!==void 0&&f(n,["requests[]","model"],ne(e,s)),n}function HR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["contents"]);if(o!=null){let s=Nm(e,o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["instances[]","content"],s)}let r=u(t,["config"]);return r!=null&&FR(r,n),n}function GR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["embeddings"],r)}let o=u(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function qR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>TR(s))),f(t,["embeddings"],r)}let o=u(e,["metadata"]);return o!=null&&f(t,["metadata"],o),t}function BR(e){let t={},n=u(e,["endpoint"]);n!=null&&f(t,["name"],n);let i=u(e,["deployedModelId"]);return i!=null&&f(t,["deployedModelId"],i),t}function zR(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function VR(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function $R(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&f(t,["allowedFunctionNames"],n);let i=u(e,["mode"]);if(i!=null&&f(t,["mode"],i),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function YR(e){let t={},n=u(e,["description"]);n!=null&&f(t,["description"],n);let i=u(e,["name"]);i!=null&&f(t,["name"],i);let o=u(e,["parameters"]);o!=null&&f(t,["parameters"],o);let r=u(e,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);let s=u(e,["response"]);s!=null&&f(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&f(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function JR(e,t,n){let i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],Lu(lt(o)));let r=u(t,["temperature"]);r!=null&&f(i,["temperature"],r);let s=u(t,["topP"]);s!=null&&f(i,["topP"],s);let a=u(t,["topK"]);a!=null&&f(i,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=u(t,["logprobs"]);m!=null&&f(i,["logprobs"],m);let h=u(t,["presencePenalty"]);h!=null&&f(i,["presencePenalty"],h);let g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);let T=u(t,["seed"]);T!=null&&f(i,["seed"],T);let x=u(t,["responseMimeType"]);x!=null&&f(i,["responseMimeType"],x);let y=u(t,["responseSchema"]);y!=null&&f(i,["responseSchema"],Rm(y));let v=u(t,["responseJsonSchema"]);if(v!=null&&f(i,["responseJsonSchema"],v),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let S=u(t,["safetySettings"]);if(n!==void 0&&S!=null){let fe=S;Array.isArray(fe)&&(fe=fe.map(B=>FI(B))),f(n,["safetySettings"],fe)}let A=u(t,["tools"]);if(n!==void 0&&A!=null){let fe=Rr(A);Array.isArray(fe)&&(fe=fe.map(B=>VI(Nr(B)))),f(n,["tools"],fe)}let _=u(t,["toolConfig"]);if(n!==void 0&&_!=null&&f(n,["toolConfig"],zI(_)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let R=u(t,["cachedContent"]);n!==void 0&&R!=null&&f(n,["cachedContent"],ti(e,R));let C=u(t,["responseModalities"]);C!=null&&f(i,["responseModalities"],C);let M=u(t,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);let I=u(t,["speechConfig"]);if(I!=null&&f(i,["speechConfig"],Im(I)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let N=u(t,["thinkingConfig"]);N!=null&&f(i,["thinkingConfig"],N);let G=u(t,["imageConfig"]);G!=null&&f(i,["imageConfig"],TI(G));let ye=u(t,["enableEnhancedCivicAnswers"]);if(ye!=null&&f(i,["enableEnhancedCivicAnswers"],ye),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function KR(e,t,n){let i={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],lt(o));let r=u(t,["temperature"]);r!=null&&f(i,["temperature"],r);let s=u(t,["topP"]);s!=null&&f(i,["topP"],s);let a=u(t,["topK"]);a!=null&&f(i,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);let d=u(t,["stopSequences"]);d!=null&&f(i,["stopSequences"],d);let p=u(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);let m=u(t,["logprobs"]);m!=null&&f(i,["logprobs"],m);let h=u(t,["presencePenalty"]);h!=null&&f(i,["presencePenalty"],h);let g=u(t,["frequencyPenalty"]);g!=null&&f(i,["frequencyPenalty"],g);let T=u(t,["seed"]);T!=null&&f(i,["seed"],T);let x=u(t,["responseMimeType"]);x!=null&&f(i,["responseMimeType"],x);let y=u(t,["responseSchema"]);y!=null&&f(i,["responseSchema"],Rm(y));let v=u(t,["responseJsonSchema"]);v!=null&&f(i,["responseJsonSchema"],v);let S=u(t,["routingConfig"]);S!=null&&f(i,["routingConfig"],S);let A=u(t,["modelSelectionConfig"]);A!=null&&f(i,["modelConfig"],A);let _=u(t,["safetySettings"]);if(n!==void 0&&_!=null){let bt=_;Array.isArray(bt)&&(bt=bt.map(hn=>hn)),f(n,["safetySettings"],bt)}let R=u(t,["tools"]);if(n!==void 0&&R!=null){let bt=Rr(R);Array.isArray(bt)&&(bt=bt.map(hn=>pA(Nr(hn)))),f(n,["tools"],bt)}let C=u(t,["toolConfig"]);n!==void 0&&C!=null&&f(n,["toolConfig"],C);let M=u(t,["labels"]);n!==void 0&&M!=null&&f(n,["labels"],M);let I=u(t,["cachedContent"]);n!==void 0&&I!=null&&f(n,["cachedContent"],ti(e,I));let N=u(t,["responseModalities"]);N!=null&&f(i,["responseModalities"],N);let G=u(t,["mediaResolution"]);G!=null&&f(i,["mediaResolution"],G);let ye=u(t,["speechConfig"]);ye!=null&&f(i,["speechConfig"],Im(ye));let fe=u(t,["audioTimestamp"]);fe!=null&&f(i,["audioTimestamp"],fe);let B=u(t,["thinkingConfig"]);B!=null&&f(i,["thinkingConfig"],B);let rt=u(t,["imageConfig"]);if(rt!=null&&f(i,["imageConfig"],xI(rt)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let si=u(t,["modelArmorConfig"]);return n!==void 0&&si!=null&&f(n,["modelArmorConfig"],si),i}function Mx(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["contents"]);if(o!=null){let s=jt(o);Array.isArray(s)&&(s=s.map(a=>Lu(a))),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&f(n,["generationConfig"],JR(e,r,n)),n}function kx(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["contents"]);if(o!=null){let s=jt(o);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}let r=u(t,["config"]);return r!=null&&f(n,["generationConfig"],KR(e,r,n)),n}function Dx(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>gR(c))),f(t,["candidates"],l)}let o=u(e,["modelVersion"]);o!=null&&f(t,["modelVersion"],o);let r=u(e,["promptFeedback"]);r!=null&&f(t,["promptFeedback"],r);let s=u(e,["responseId"]);s!=null&&f(t,["responseId"],s);let a=u(e,["usageMetadata"]);return a!=null&&f(t,["usageMetadata"],a),t}function Ux(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>d)),f(t,["candidates"],c)}let o=u(e,["createTime"]);o!=null&&f(t,["createTime"],o);let r=u(e,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);let s=u(e,["promptFeedback"]);s!=null&&f(t,["promptFeedback"],s);let a=u(e,["responseId"]);a!=null&&f(t,["responseId"],a);let l=u(e,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function XR(e,t){let n={};if(u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let i=u(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);let o=u(e,["aspectRatio"]);t!==void 0&&o!=null&&f(t,["parameters","aspectRatio"],o);let r=u(e,["guidanceScale"]);if(t!==void 0&&r!=null&&f(t,["parameters","guidanceScale"],r),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=u(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&f(t,["parameters","safetySetting"],s);let a=u(e,["personGeneration"]);t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a);let l=u(e,["includeSafetyAttributes"]);t!==void 0&&l!=null&&f(t,["parameters","includeSafetyAttributes"],l);let c=u(e,["includeRaiReason"]);t!==void 0&&c!=null&&f(t,["parameters","includeRaiReason"],c);let d=u(e,["language"]);t!==void 0&&d!=null&&f(t,["parameters","language"],d);let p=u(e,["outputMimeType"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","mimeType"],p);let m=u(e,["outputCompressionQuality"]);if(t!==void 0&&m!=null&&f(t,["parameters","outputOptions","compressionQuality"],m),u(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let h=u(e,["imageSize"]);if(t!==void 0&&h!=null&&f(t,["parameters","sampleImageSize"],h),u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function QR(e,t){let n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);let o=u(e,["negativePrompt"]);t!==void 0&&o!=null&&f(t,["parameters","negativePrompt"],o);let r=u(e,["numberOfImages"]);t!==void 0&&r!=null&&f(t,["parameters","sampleCount"],r);let s=u(e,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);let a=u(e,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);let l=u(e,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);let c=u(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&f(t,["parameters","safetySetting"],c);let d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);let p=u(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);let m=u(e,["includeRaiReason"]);t!==void 0&&m!=null&&f(t,["parameters","includeRaiReason"],m);let h=u(e,["language"]);t!==void 0&&h!=null&&f(t,["parameters","language"],h);let g=u(e,["outputMimeType"]);t!==void 0&&g!=null&&f(t,["parameters","outputOptions","mimeType"],g);let T=u(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&f(t,["parameters","outputOptions","compressionQuality"],T);let x=u(e,["addWatermark"]);t!==void 0&&x!=null&&f(t,["parameters","addWatermark"],x);let y=u(e,["labels"]);t!==void 0&&y!=null&&f(t,["labels"],y);let v=u(e,["imageSize"]);t!==void 0&&v!=null&&f(t,["parameters","sampleImageSize"],v);let S=u(e,["enhancePrompt"]);return t!==void 0&&S!=null&&f(t,["parameters","enhancePrompt"],S),n}function ZR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["config"]);return r!=null&&XR(r,n),n}function WR(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["config"]);return r!=null&&QR(r,n),n}function jR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>fI(s))),f(t,["generatedImages"],r)}let o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],fA(o)),t}function eI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Pu(s))),f(t,["generatedImages"],r)}let o=u(e,["positivePromptSafetyAttributes"]);return o!=null&&f(t,["positivePromptSafetyAttributes"],dA(o)),t}function tI(e,t){let n={},i=u(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i),u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=u(e,["durationSeconds"]);if(t!==void 0&&o!=null&&f(t,["parameters","durationSeconds"],o),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let r=u(e,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);let s=u(e,["resolution"]);t!==void 0&&s!=null&&f(t,["parameters","resolution"],s);let a=u(e,["personGeneration"]);if(t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a),u(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let l=u(e,["negativePrompt"]);t!==void 0&&l!=null&&f(t,["parameters","negativePrompt"],l);let c=u(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&f(t,["parameters","enhancePrompt"],c),u(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let d=u(e,["lastFrame"]);t!==void 0&&d!=null&&f(t,["instances[0]","lastFrame"],Fu(d));let p=u(e,["referenceImages"]);if(t!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>iM(h))),f(t,["instances[0]","referenceImages"],m)}if(u(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function nI(e,t){let n={},i=u(e,["numberOfVideos"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);let o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&f(t,["parameters","storageUri"],o);let r=u(e,["fps"]);t!==void 0&&r!=null&&f(t,["parameters","fps"],r);let s=u(e,["durationSeconds"]);t!==void 0&&s!=null&&f(t,["parameters","durationSeconds"],s);let a=u(e,["seed"]);t!==void 0&&a!=null&&f(t,["parameters","seed"],a);let l=u(e,["aspectRatio"]);t!==void 0&&l!=null&&f(t,["parameters","aspectRatio"],l);let c=u(e,["resolution"]);t!==void 0&&c!=null&&f(t,["parameters","resolution"],c);let d=u(e,["personGeneration"]);t!==void 0&&d!=null&&f(t,["parameters","personGeneration"],d);let p=u(e,["pubsubTopic"]);t!==void 0&&p!=null&&f(t,["parameters","pubsubTopic"],p);let m=u(e,["negativePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","negativePrompt"],m);let h=u(e,["enhancePrompt"]);t!==void 0&&h!=null&&f(t,["parameters","enhancePrompt"],h);let g=u(e,["generateAudio"]);t!==void 0&&g!=null&&f(t,["parameters","generateAudio"],g);let T=u(e,["lastFrame"]);t!==void 0&&T!=null&&f(t,["instances[0]","lastFrame"],fn(T));let x=u(e,["referenceImages"]);if(t!==void 0&&x!=null){let S=x;Array.isArray(S)&&(S=S.map(A=>oM(A))),f(t,["instances[0]","referenceImages"],S)}let y=u(e,["mask"]);t!==void 0&&y!=null&&f(t,["instances[0]","mask"],nM(y));let v=u(e,["compressionQuality"]);return t!==void 0&&v!=null&&f(t,["parameters","compressionQuality"],v),n}function iI(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response","generateVideoResponse"]);return s!=null&&f(t,["response"],aI(s)),t}function oI(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],lI(s)),t}function rI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["image"]);r!=null&&f(n,["instances[0]","image"],Fu(r));let s=u(t,["video"]);s!=null&&f(n,["instances[0]","video"],mA(s));let a=u(t,["source"]);a!=null&&uI(a,n);let l=u(t,["config"]);return l!=null&&tI(l,n),n}function sI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);let r=u(t,["image"]);r!=null&&f(n,["instances[0]","image"],fn(r));let s=u(t,["video"]);s!=null&&f(n,["instances[0]","video"],hA(s));let a=u(t,["source"]);a!=null&&cI(a,n);let l=u(t,["config"]);return l!=null&&nI(l,n),n}function aI(e){let t={},n=u(e,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>pI(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function lI(e){let t={},n=u(e,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>mI(s))),f(t,["generatedVideos"],r)}let i=u(e,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&f(t,["raiMediaFilteredReasons"],o),t}function uI(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],Fu(o));let r=u(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],mA(r)),n}function cI(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],fn(o));let r=u(e,["video"]);return t!==void 0&&r!=null&&f(t,["instances[0]","video"],hA(r)),n}function fI(e){let t={},n=u(e,["_self"]);n!=null&&f(t,["image"],AI(n));let i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);let o=u(e,["_self"]);return o!=null&&f(t,["safetyAttributes"],fA(o)),t}function Pu(e){let t={},n=u(e,["_self"]);n!=null&&f(t,["image"],cA(n));let i=u(e,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);let o=u(e,["_self"]);o!=null&&f(t,["safetyAttributes"],dA(o));let r=u(e,["prompt"]);return r!=null&&f(t,["enhancedPrompt"],r),t}function dI(e){let t={},n=u(e,["_self"]);n!=null&&f(t,["mask"],cA(n));let i=u(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(t,["labels"],o)}return t}function pI(e){let t={},n=u(e,["video"]);return n!=null&&f(t,["video"],eM(n)),t}function mI(e){let t={},n=u(e,["_self"]);return n!=null&&f(t,["video"],tM(n)),t}function hI(e){let t={},n=u(e,["modelSelectionConfig"]);n!=null&&f(t,["modelConfig"],n);let i=u(e,["responseJsonSchema"]);i!=null&&f(t,["responseJsonSchema"],i);let o=u(e,["audioTimestamp"]);o!=null&&f(t,["audioTimestamp"],o);let r=u(e,["candidateCount"]);r!=null&&f(t,["candidateCount"],r);let s=u(e,["enableAffectiveDialog"]);s!=null&&f(t,["enableAffectiveDialog"],s);let a=u(e,["frequencyPenalty"]);a!=null&&f(t,["frequencyPenalty"],a);let l=u(e,["logprobs"]);l!=null&&f(t,["logprobs"],l);let c=u(e,["maxOutputTokens"]);c!=null&&f(t,["maxOutputTokens"],c);let d=u(e,["mediaResolution"]);d!=null&&f(t,["mediaResolution"],d);let p=u(e,["presencePenalty"]);p!=null&&f(t,["presencePenalty"],p);let m=u(e,["responseLogprobs"]);m!=null&&f(t,["responseLogprobs"],m);let h=u(e,["responseMimeType"]);h!=null&&f(t,["responseMimeType"],h);let g=u(e,["responseModalities"]);g!=null&&f(t,["responseModalities"],g);let T=u(e,["responseSchema"]);T!=null&&f(t,["responseSchema"],T);let x=u(e,["routingConfig"]);x!=null&&f(t,["routingConfig"],x);let y=u(e,["seed"]);y!=null&&f(t,["seed"],y);let v=u(e,["speechConfig"]);v!=null&&f(t,["speechConfig"],v);let S=u(e,["stopSequences"]);S!=null&&f(t,["stopSequences"],S);let A=u(e,["temperature"]);A!=null&&f(t,["temperature"],A);let _=u(e,["thinkingConfig"]);_!=null&&f(t,["thinkingConfig"],_);let R=u(e,["topK"]);R!=null&&f(t,["topK"],R);let C=u(e,["topP"]);if(C!=null&&f(t,["topP"],C),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function gI(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],ne(e,i)),n}function yI(e,t){let n={},i=u(t,["model"]);return i!=null&&f(n,["_url","name"],ne(e,i)),n}function vI(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function SI(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function TI(e){let t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);let i=u(e,["imageSize"]);if(i!=null&&f(t,["imageSize"],i),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function xI(e){let t={},n=u(e,["aspectRatio"]);n!=null&&f(t,["aspectRatio"],n);let i=u(e,["imageSize"]);i!=null&&f(t,["imageSize"],i);let o=u(e,["personGeneration"]);o!=null&&f(t,["personGeneration"],o);let r=u(e,["outputMimeType"]);r!=null&&f(t,["imageOutputOptions","mimeType"],r);let s=u(e,["outputCompressionQuality"]);return s!=null&&f(t,["imageOutputOptions","compressionQuality"],s),t}function AI(e){let t={},n=u(e,["bytesBase64Encoded"]);n!=null&&f(t,["imageBytes"],Fi(n));let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function cA(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);let i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["imageBytes"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function Fu(e){let t={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=u(e,["imageBytes"]);n!=null&&f(t,["bytesBase64Encoded"],Fi(n));let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function fn(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["gcsUri"],n);let i=u(e,["imageBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function EI(e,t,n){let i={},o=u(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);let r=u(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);let s=u(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);let a=u(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],iA(e,a)),i}function CI(e,t,n){let i={},o=u(t,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);let r=u(t,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);let s=u(t,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);let a=u(t,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],iA(e,a)),i}function _I(e,t){let n={},i=u(t,["config"]);return i!=null&&EI(e,i,n),n}function wI(e,t){let n={},i=u(t,["config"]);return i!=null&&CI(e,i,n),n}function bI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["_self"]);if(o!=null){let r=oA(o);Array.isArray(r)&&(r=r.map(s=>nm(s))),f(t,["models"],r)}return t}function NI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["_self"]);if(o!=null){let r=oA(o);Array.isArray(r)&&(r=r.map(s=>im(s))),f(t,["models"],r)}return t}function RI(e){let t={},n=u(e,["maskMode"]);n!=null&&f(t,["maskMode"],n);let i=u(e,["segmentationClasses"]);i!=null&&f(t,["maskClasses"],i);let o=u(e,["maskDilation"]);return o!=null&&f(t,["dilation"],o),t}function nm(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);o!=null&&f(t,["description"],o);let r=u(e,["version"]);r!=null&&f(t,["version"],r);let s=u(e,["_self"]);s!=null&&f(t,["tunedModelInfo"],$I(s));let a=u(e,["inputTokenLimit"]);a!=null&&f(t,["inputTokenLimit"],a);let l=u(e,["outputTokenLimit"]);l!=null&&f(t,["outputTokenLimit"],l);let c=u(e,["supportedGenerationMethods"]);c!=null&&f(t,["supportedActions"],c);let d=u(e,["temperature"]);d!=null&&f(t,["temperature"],d);let p=u(e,["maxTemperature"]);p!=null&&f(t,["maxTemperature"],p);let m=u(e,["topP"]);m!=null&&f(t,["topP"],m);let h=u(e,["topK"]);h!=null&&f(t,["topK"],h);let g=u(e,["thinking"]);return g!=null&&f(t,["thinking"],g),t}function im(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["displayName"]);i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);o!=null&&f(t,["description"],o);let r=u(e,["versionId"]);r!=null&&f(t,["version"],r);let s=u(e,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>BR(m))),f(t,["endpoints"],p)}let a=u(e,["labels"]);a!=null&&f(t,["labels"],a);let l=u(e,["_self"]);l!=null&&f(t,["tunedModelInfo"],YI(l));let c=u(e,["defaultCheckpointId"]);c!=null&&f(t,["defaultCheckpointId"],c);let d=u(e,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>m)),f(t,["checkpoints"],p)}return t}function II(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],zR(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],VR(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],hR(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function MI(e){let t={},n=u(e,["productImage"]);return n!=null&&f(t,["image"],fn(n)),t}function kI(e,t){let n={},i=u(e,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);let o=u(e,["baseSteps"]);t!==void 0&&o!=null&&f(t,["parameters","baseSteps"],o);let r=u(e,["outputGcsUri"]);t!==void 0&&r!=null&&f(t,["parameters","storageUri"],r);let s=u(e,["seed"]);t!==void 0&&s!=null&&f(t,["parameters","seed"],s);let a=u(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&f(t,["parameters","safetySetting"],a);let l=u(e,["personGeneration"]);t!==void 0&&l!=null&&f(t,["parameters","personGeneration"],l);let c=u(e,["addWatermark"]);t!==void 0&&c!=null&&f(t,["parameters","addWatermark"],c);let d=u(e,["outputMimeType"]);t!==void 0&&d!=null&&f(t,["parameters","outputOptions","mimeType"],d);let p=u(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","compressionQuality"],p);let m=u(e,["enhancePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m);let h=u(e,["labels"]);return t!==void 0&&h!=null&&f(t,["labels"],h),n}function DI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["source"]);o!=null&&LI(o,n);let r=u(t,["config"]);return r!=null&&kI(r,n),n}function UI(e){let t={},n=u(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Pu(o))),f(t,["generatedImages"],i)}return t}function LI(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["personImage"]);t!==void 0&&o!=null&&f(t,["instances[0]","personImage","image"],fn(o));let r=u(e,["productImages"]);if(t!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>MI(a))),f(t,["instances[0]","productImages"],s)}return n}function PI(e){let t={},n=u(e,["referenceImage"]);n!=null&&f(t,["referenceImage"],fn(n));let i=u(e,["referenceId"]);i!=null&&f(t,["referenceId"],i);let o=u(e,["referenceType"]);o!=null&&f(t,["referenceType"],o);let r=u(e,["maskImageConfig"]);r!=null&&f(t,["maskImageConfig"],RI(r));let s=u(e,["controlImageConfig"]);s!=null&&f(t,["controlImageConfig"],AR(s));let a=u(e,["styleImageConfig"]);a!=null&&f(t,["styleImageConfig"],a);let l=u(e,["subjectImageConfig"]);return l!=null&&f(t,["subjectImageConfig"],l),t}function fA(e){let t={},n=u(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);let i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);let o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function dA(e){let t={},n=u(e,["safetyAttributes","categories"]);n!=null&&f(t,["categories"],n);let i=u(e,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);let o=u(e,["contentType"]);return o!=null&&f(t,["contentType"],o),t}function FI(e){let t={},n=u(e,["category"]);if(n!=null&&f(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=u(e,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function OI(e){let t={},n=u(e,["image"]);return n!=null&&f(t,["image"],fn(n)),t}function HI(e,t){let n={},i=u(e,["mode"]);t!==void 0&&i!=null&&f(t,["parameters","mode"],i);let o=u(e,["maxPredictions"]);t!==void 0&&o!=null&&f(t,["parameters","maxPredictions"],o);let r=u(e,["confidenceThreshold"]);t!==void 0&&r!=null&&f(t,["parameters","confidenceThreshold"],r);let s=u(e,["maskDilation"]);t!==void 0&&s!=null&&f(t,["parameters","maskDilation"],s);let a=u(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&f(t,["parameters","binaryColorThreshold"],a);let l=u(e,["labels"]);return t!==void 0&&l!=null&&f(t,["labels"],l),n}function GI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["source"]);o!=null&&BI(o,n);let r=u(t,["config"]);return r!=null&&HI(r,n),n}function qI(e){let t={},n=u(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>dI(o))),f(t,["generatedMasks"],i)}return t}function BI(e,t){let n={},i=u(e,["prompt"]);t!==void 0&&i!=null&&f(t,["instances[0]","prompt"],i);let o=u(e,["image"]);t!==void 0&&o!=null&&f(t,["instances[0]","image"],fn(o));let r=u(e,["scribbleImage"]);return t!==void 0&&r!=null&&f(t,["instances[0]","scribble"],OI(r)),n}function zI(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&f(t,["retrievalConfig"],n);let i=u(e,["functionCallingConfig"]);return i!=null&&f(t,["functionCallingConfig"],$R(i)),t}function VI(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],vI(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],SI(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function pA(e){let t={},n=u(e,["retrieval"]);n!=null&&f(t,["retrieval"],n);let i=u(e,["computerUse"]);if(i!=null&&f(t,["computerUse"],i),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&f(t,["codeExecution"],o);let r=u(e,["enterpriseWebSearch"]);r!=null&&f(t,["enterpriseWebSearch"],r);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>YR(m))),f(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&f(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&f(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&f(t,["googleSearchRetrieval"],c);let d=u(e,["urlContext"]);return d!=null&&f(t,["urlContext"],d),t}function $I(e){let t={},n=u(e,["baseModel"]);n!=null&&f(t,["baseModel"],n);let i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);let o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function YI(e){let t={},n=u(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(t,["baseModel"],n);let i=u(e,["createTime"]);i!=null&&f(t,["createTime"],i);let o=u(e,["updateTime"]);return o!=null&&f(t,["updateTime"],o),t}function JI(e,t){let n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);let r=u(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function KI(e,t){let n={},i=u(e,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);let o=u(e,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);let r=u(e,["defaultCheckpointId"]);return t!==void 0&&r!=null&&f(t,["defaultCheckpointId"],r),n}function XI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","name"],ne(e,i));let o=u(t,["config"]);return o!=null&&JI(o,n),n}function QI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["config"]);return o!=null&&KI(o,n),n}function ZI(e,t){let n={},i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);let o=u(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&f(t,["parameters","safetySetting"],o);let r=u(e,["personGeneration"]);t!==void 0&&r!=null&&f(t,["parameters","personGeneration"],r);let s=u(e,["includeRaiReason"]);t!==void 0&&s!=null&&f(t,["parameters","includeRaiReason"],s);let a=u(e,["outputMimeType"]);t!==void 0&&a!=null&&f(t,["parameters","outputOptions","mimeType"],a);let l=u(e,["outputCompressionQuality"]);t!==void 0&&l!=null&&f(t,["parameters","outputOptions","compressionQuality"],l);let c=u(e,["enhanceInputImage"]);t!==void 0&&c!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],c);let d=u(e,["imagePreservationFactor"]);t!==void 0&&d!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],d);let p=u(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);let m=u(e,["numberOfImages"]);t!==void 0&&m!=null&&f(t,["parameters","sampleCount"],m);let h=u(e,["mode"]);return t!==void 0&&h!=null&&f(t,["parameters","mode"],h),n}function WI(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["_url","model"],ne(e,i));let o=u(t,["image"]);o!=null&&f(n,["instances[0]","image"],fn(o));let r=u(t,["upscaleFactor"]);r!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],r);let s=u(t,["config"]);return s!=null&&ZI(s,n),n}function jI(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>Pu(r))),f(t,["generatedImages"],o)}return t}function eM(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);let i=u(e,["encodedVideo"]);i!=null&&f(t,["videoBytes"],Fi(i));let o=u(e,["encoding"]);return o!=null&&f(t,["mimeType"],o),t}function tM(e){let t={},n=u(e,["gcsUri"]);n!=null&&f(t,["uri"],n);let i=u(e,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function nM(e){let t={},n=u(e,["image"]);n!=null&&f(t,["_self"],fn(n));let i=u(e,["maskMode"]);return i!=null&&f(t,["maskMode"],i),t}function iM(e){let t={},n=u(e,["image"]);n!=null&&f(t,["image"],Fu(n));let i=u(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function oM(e){let t={},n=u(e,["image"]);n!=null&&f(t,["image"],fn(n));let i=u(e,["referenceType"]);return i!=null&&f(t,["referenceType"],i),t}function mA(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["uri"],n);let i=u(e,["videoBytes"]);i!=null&&f(t,["encodedVideo"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["encoding"],o),t}function hA(e){let t={},n=u(e,["uri"]);n!=null&&f(t,["gcsUri"],n);let i=u(e,["videoBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Fi(i));let o=u(e,["mimeType"]);return o!=null&&f(t,["mimeType"],o),t}function rM(e,t){let n={},i=u(e,["displayName"]);return t!==void 0&&i!=null&&f(t,["displayName"],i),n}function sM(e){let t={},n=u(e,["config"]);return n!=null&&rM(n,t),t}function aM(e,t){let n={},i=u(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function lM(e){let t={},n=u(e,["name"]);n!=null&&f(t,["_url","name"],n);let i=u(e,["config"]);return i!=null&&aM(i,t),t}function uM(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function cM(e,t){let n={},i=u(e,["customMetadata"]);if(t!==void 0&&i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["customMetadata"],r)}let o=u(e,["chunkingConfig"]);return t!==void 0&&o!=null&&f(t,["chunkingConfig"],o),n}function fM(e){let t={},n=u(e,["name"]);n!=null&&f(t,["name"],n);let i=u(e,["metadata"]);i!=null&&f(t,["metadata"],i);let o=u(e,["done"]);o!=null&&f(t,["done"],o);let r=u(e,["error"]);r!=null&&f(t,["error"],r);let s=u(e,["response"]);return s!=null&&f(t,["response"],pM(s)),t}function dM(e){let t={},n=u(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);let i=u(e,["fileName"]);i!=null&&f(t,["fileName"],i);let o=u(e,["config"]);return o!=null&&cM(o,t),t}function pM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["parent"]);i!=null&&f(t,["parent"],i);let o=u(e,["documentName"]);return o!=null&&f(t,["documentName"],o),t}function mM(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function hM(e){let t={},n=u(e,["config"]);return n!=null&&mM(n,t),t}function gM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["fileSearchStores"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["fileSearchStores"],r)}return t}function gA(e,t){let n={},i=u(e,["mimeType"]);t!==void 0&&i!=null&&f(t,["mimeType"],i);let o=u(e,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);let r=u(e,["customMetadata"]);if(t!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),f(t,["customMetadata"],a)}let s=u(e,["chunkingConfig"]);return t!==void 0&&s!=null&&f(t,["chunkingConfig"],s),n}function yM(e){let t={},n=u(e,["fileSearchStoreName"]);n!=null&&f(t,["_url","file_search_store_name"],n);let i=u(e,["config"]);return i!=null&&gA(i,t),t}function vM(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&f(t,["sdkHttpResponse"],n),t}var SM="Content-Type",TM="X-Server-Timeout",xM="User-Agent",om="x-goog-api-client",AM="1.38.0",EM=`google-genai-sdk/${AM}`,CM="v1beta1",_M="v1beta",rm=class{constructor(t){var n,i,o;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!a?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:CM}else{if(!this.clientOptions.apiKey)throw new po({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:_M,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){let o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===Lp.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));let i=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(let[s,a]of Object.entries(t.queryParams))o.searchParams.append(s,String(a));let r={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=t.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.unaryApiCall(o,r,t.httpMethod)}patchHttpOptions(t,n){let i=JSON.parse(JSON.stringify(t));for(let[o,r]of Object.entries(n))typeof r=="object"?i[o]=Object.assign(Object.assign({},i[o]),r):r!==void 0&&(i[o]=r);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));let i=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let r={};return r.body=t.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,o.toString(),t.abortSignal),this.streamApiCall(o,r,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,o){if(n&&n.timeout||o){let r=new AbortController,s=r.signal;if(n.timeout&&n?.timeout>0){let a=setTimeout(()=>r.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),t.signal=s}return n&&n.extraBody!==null&&wM(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Lx(o),new Zs(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Lx(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return an(this,arguments,function*(){var i;let o=(i=t?.body)===null||i===void 0?void 0:i.getReader(),r=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="",a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:c,value:d}=yield $(o.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=r.decode(d,{stream:!0});try{let g=JSON.parse(p);if("error"in g){let T=JSON.parse(JSON.stringify(g.error)),x=T.status,y=T.code,v=`got status: ${x}. ${JSON.stringify(g)}`;if(y>=400&&y<600)throw new po({message:v,status:y})}}catch(g){if(g.name==="ApiError")throw g}s+=p;let m=-1,h=0;for(;;){m=-1,h=0;for(let x of l){let y=s.indexOf(x);y!==-1&&(m===-1||y<m)&&(m=y,h=x.length)}if(m===-1)break;let g=s.substring(0,m);s=s.substring(m+h);let T=g.trim();if(T.startsWith(a)){let x=T.substring(a.length).trim();try{let y=new Response(x,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield $(new Zs(y))}catch(y){throw new Error(`exception parsing stream chunk ${x}. ${y}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let t={},n=EM+" "+this.clientOptions.userAgentExtra;return t[xM]=n,t[om]=n,t[SM]="application/json",t}async getHeadersInternal(t,n){let i=new Headers;if(t&&t.headers){for(let[o,r]of Object.entries(t.headers))i.append(o,r);t.timeout&&t.timeout>0&&i.append(TM,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;let o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let r=this.clientOptions.uploader,s=await r.stat(t);o.sizeBytes=String(s.size);let a=(i=n?.mimeType)!==null&&i!==void 0?i:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;let l={file:o},c=this.getFileName(t),d=k("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,c,l,n?.httpOptions);return r.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,i){var o;let r=this.clientOptions.uploader,s=await r.stat(n),a=String(s.size),l=(o=i?.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${t}:uploadToFileSearchStore`,d=this.getFileName(n),p={};i!=null&&gA(i,p);let m=await this.fetchUploadUrl(c,a,l,d,p,i?.httpOptions);return r.uploadToFileSearchStore(n,m,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,o,r,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};let c=await this.request({path:t,body:JSON.stringify(r),httpMethod:"POST",httpOptions:l});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let d=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}};async function Lx(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){let n=e.status,i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};let o=JSON.stringify(i);throw n>=400&&n<600?new po({message:o,status:n}):new Error(o)}}function wM(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{let r=JSON.parse(e.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,s){let a=Object.assign({},r);for(let l in s)if(Object.prototype.hasOwnProperty.call(s,l)){let c=s[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=i(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}let o=i(n,t);e.body=JSON.stringify(o)}var bM="mcp_used/unknown",NM=!1;function yA(e){for(let t of e)if(RM(t)||typeof t=="object"&&"inputSchema"in t)return!0;return NM}function vA(e){var t;let n=(t=e[om])!==null&&t!==void 0?t:"";e[om]=(n+` ${bM}`).trimStart()}function RM(e){return e!==null&&typeof e=="object"&&e instanceof ea}function IM(e){return an(this,arguments,function*(n,i=100){let o,r=0;for(;r<i;){let s=yield $(n.listTools({cursor:o}));for(let a of s.tools)yield yield $(a),r++;if(!s.nextCursor)break;o=s.nextCursor}})}var ea=class{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new ea(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;let r={},s=[];for(let d of this.mcpClients)try{for(var a=!0,l=(n=void 0,ln(IM(d))),c;c=await l.next(),t=c.done,!t;a=!0){o=c.value,a=!1;let p=o;s.push(p);let m=p.name;if(r[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);r[m]=d}}catch(p){n={error:p}}finally{try{!a&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),p1(this.mcpTools,this.config)}async callTool(t){await this.initialize();let n=[];for(let i of t)if(i.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[i.name],r;this.config.timeout&&(r={timeout:this.config.timeout});let s=await o.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return n}};async function MM(e,t,n){let i=new Kp,o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),t(i)}var sm=class{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),s=DM(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},d=new Promise(S=>{c=S}),p=t.callbacks,m=function(){c({})},h=this.apiClient,g={onopen:m,onmessage:S=>{MM(h,p.onmessage,S)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(S){},onclose:(i=p?.onclose)!==null&&i!==void 0?i:function(S){}},T=this.webSocketFactory.create(l,kM(s),g);T.connect(),await d;let v={setup:{model:ne(this.apiClient,t.model)}};return T.send(JSON.stringify(v)),new am(T,this.apiClient)}},am=class{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=rR(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});let n=oR(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){let n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Tr.PLAY)}pause(){this.sendPlaybackControl(Tr.PAUSE)}stop(){this.sendPlaybackControl(Tr.STOP)}resetContext(){this.sendPlaybackControl(Tr.RESET_CONTEXT)}close(){this.conn.close()}};function kM(e){let t={};return e.forEach((n,i)=>{t[i]=n}),t}function DM(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}var UM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function LM(e,t,n){let i=new Jp,o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;let r=JSON.parse(o);if(e.isVertexAI()){let s=lR(r);Object.assign(i,s)}else Object.assign(i,r);t(i)}var lm=class{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new sm(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,r,s,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),d,p=this.apiClient.getHeaders();t.config&&t.config.tools&&yA(t.config.tools)&&vA(p);let m=OM(p);if(this.apiClient.isVertexAI()){let I=this.apiClient.getProject(),N=this.apiClient.getLocation(),G=this.apiClient.getApiKey(),ye=!!I&&!!N||!!G;this.apiClient.getCustomBaseUrl()&&!ye?d=l:(d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d))}else{let I=this.apiClient.getApiKey(),N="BidiGenerateContent",G="key";I?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",G="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${N}?${G}=${I}`}let h=()=>{},g=new Promise(I=>{h=I}),T=t.callbacks,x=function(){var I;(I=T?.onopen)===null||I===void 0||I.call(T),h({})},y=this.apiClient,v={onopen:x,onmessage:I=>{LM(y,T.onmessage,I)},onerror:(n=T?.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=T?.onclose)!==null&&i!==void 0?i:function(I){}},S=this.webSocketFactory.create(d,FM(m),v);S.connect(),await g;let A=ne(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){let I=this.apiClient.getProject(),N=this.apiClient.getLocation();I&&N&&(A=`projects/${I}/locations/${N}/`+A)}let _={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Er.AUDIO]}:t.config.responseModalities=[Er.AUDIO]),!((r=t.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let R=(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],C=[];for(let I of R)if(this.isCallableTool(I)){let N=I;C.push(await N.tool())}else C.push(I);C.length>0&&(t.config.tools=C);let M={model:A,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?_=iR(this.apiClient,M):_=nR(this.apiClient,M),delete _.config,S.send(JSON.stringify(_)),new um(S,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}},PM={turnComplete:!0},um=class{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=jt(n.turns),t.isVertexAI()||(i=i.map(o=>Lu(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!t.isVertexAI()&&!("id"in r))throw new Error(UM)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},PM),t);let n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:aR(t)}:n={realtimeInput:sR(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function FM(e){let t={};return e.forEach((n,i)=>{t[i]=n}),t}function OM(e){let t=new Headers;for(let[n,i]of Object.entries(e))t.append(n,i);return t}var Px=10;function Fx(e){var t,n,i;if(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(let s of(n=e?.tools)!==null&&n!==void 0?n:[])if(Ar(s)){o=!0;break}if(!o)return!0;let r=(i=e?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Ar(e){return"callTool"in e&&typeof e.callTool=="function"}function HM(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>Ar(o)))!==null&&i!==void 0?i:!1}function Ox(e){var t;let n=[];return!((t=e?.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,o)=>{if(Ar(i))return;let r=i;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(o)}),n}function Hx(e){var t;return!(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}var cm=class extends un{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,r,s,a;let l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!HM(n)||Fx(n.config))return await this.generateContentInternal(l);let c=Ox(n);if(c.length>0){let T=c.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let d,p,m=jt(l.contents),h=(r=(o=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Px,g=0;for(;g<h&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){let T=d.candidates[0].content,x=[];for(let y of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Ar(y)){let S=await y.callTool(d.functionCalls);x.push(...S)}g++,p={role:"user",parts:x},l.contents=jt(l.contents),l.contents.push(T),l.contents.push(p),Hx(l.config)&&(m.push(T),m.push(p))}return Hx(l.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var i,o,r,s,a;if(this.maybeMoveToResponseJsonSchem(n),Fx(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let l=Ox(n);if(l.length>0){let p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let c=(r=(o=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,d=(a=(s=n?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let r,s=[];if(i?.generatedImages)for(let l of i.generatedImages)l&&l?.safetyAttributes&&((o=l?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?r=l?.safetyAttributes:s.push(l);let a;return r?a={generatedImages:s,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;let s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ei(jn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{let i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));let o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,r,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(((i=n.video)===null||i===void 0?void 0:i.uri)&&((o=n.video)===null||o===void 0?void 0:o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:((s=(r=n.source)===null||r===void 0?void 0:r.video)===null||s===void 0?void 0:s.uri)&&((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0?void 0:l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;let r=(n=t.config)===null||n===void 0?void 0:n.tools;if(!r)return t;let s=await Promise.all(r.map(async l=>Ar(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(a.config.tools=s,t.config&&t.config.tools&&yA(t.config.tools)){let l=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{},c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),vA(c),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(t){var n,i,o;let r=new Map;for(let s of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ar(s)){let a=s,l=await a.tool();for(let c of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,a)}}return r}async processAfcStream(t){var n,i,o;let r=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Px,s=!1,a=0,l=await this.initAfcToolsMap(t);return function(c,d,p){return an(this,arguments,function*(){for(var m,h,g,T,x,y;a<r;){s&&(a++,s=!1);let _=yield $(c.processParamsMaybeAddMcpUsage(p)),R=yield $(c.generateContentStreamInternal(_)),C=[],M=[];try{for(var v=!0,S=(h=void 0,ln(R)),A;A=yield $(S.next()),m=A.done,!m;v=!0){T=A.value,v=!1;let I=T;if(yield yield $(I),I.candidates&&((x=I.candidates[0])===null||x===void 0?void 0:x.content)){M.push(I.candidates[0].content);for(let N of(y=I.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<r&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(N.functionCall.name)){let G=yield $(d.get(N.functionCall.name).callTool([N.functionCall]));C.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(I){h={error:I}}finally{try{!v&&!m&&(g=S.return)&&(yield $(g.call(S)))}finally{if(h)throw h.error}}if(C.length>0){s=!0;let I=new fo;I.candidates=[{content:{role:"user",parts:C}}],yield yield $(I);let N=[];N.push(...M),N.push({role:"user",parts:C});let G=jt(p.contents).concat(N);p.contents=G}else break}})}(this,l,t)}async generateContentInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=kx(this.apiClient,t);return a=k("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=Ux(d),m=new fo;return Object.assign(m,p),m})}else{let c=Mx(this.apiClient,t);return a=k("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=Dx(d),m=new fo;return Object.assign(m,p),m})}}async generateContentStreamInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=kx(this.apiClient,t);return a=k("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return an(this,arguments,function*(){var m,h,g,T;try{for(var x=!0,y=ln(p),v;v=yield $(y.next()),m=v.done,!m;x=!0){T=v.value,x=!1;let S=T,A=Ux(yield $(S.json()));A.sdkHttpResponse={headers:S.headers};let _=new fo;Object.assign(_,A),yield yield $(_)}}catch(S){h={error:S}}finally{try{!x&&!m&&(g=y.return)&&(yield $(g.call(y)))}finally{if(h)throw h.error}}})})}else{let c=Mx(this.apiClient,t);return a=k("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return an(this,arguments,function*(){var m,h,g,T;try{for(var x=!0,y=ln(p),v;v=yield $(y.next()),m=v.done,!m;x=!0){T=v.value,x=!1;let S=T,A=Dx(yield $(S.json()));A.sdkHttpResponse={headers:S.headers};let _=new fo;Object.assign(_,A),yield yield $(_)}}catch(S){h={error:S}}finally{try{!x&&!m&&(g=y.return)&&(yield $(g.call(y)))}finally{if(h)throw h.error}}})})}}async embedContent(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=HR(this.apiClient,t);return a=k("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=qR(d),m=new uu;return Object.assign(m,p),m})}else{let c=OR(this.apiClient,t);return a=k("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=GR(d),m=new uu;return Object.assign(m,p),m})}}async generateImagesInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=WR(this.apiClient,t);return a=k("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=eI(d),m=new cu;return Object.assign(m,p),m})}else{let c=ZR(this.apiClient,t);return a=k("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=jR(d),m=new cu;return Object.assign(m,p),m})}}async editImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=UR(this.apiClient,t);return r=k("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=LR(l),d=new Pp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=WI(this.apiClient,t);return r=k("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=jI(l),d=new Fp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=DI(this.apiClient,t);return r=k("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=UI(l),d=new Op;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=GI(this.apiClient,t);return r=k("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=qI(l),d=new Hp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=yI(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>im(d))}else{let c=gI(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>nm(d))}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=wI(this.apiClient,t);return a=k("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=NI(d),m=new fu;return Object.assign(m,p),m})}else{let c=_I(this.apiClient,t);return a=k("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=bI(d),m=new fu;return Object.assign(m,p),m})}}async update(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=QI(this.apiClient,t);return a=k("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>im(d))}else{let c=XI(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>nm(d))}}async delete(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=IR(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=kR(d),m=new du;return Object.assign(m,p),m})}else{let c=RR(this.apiClient,t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=MR(d),m=new du;return Object.assign(m,p),m})}}async countTokens(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=wR(this.apiClient,t);return a=k("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=NR(d),m=new pu;return Object.assign(m,p),m})}else{let c=_R(this.apiClient,t);return a=k("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=bR(d),m=new pu;return Object.assign(m,p),m})}}async computeTokens(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=vR(this.apiClient,t);return r=k("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>{let c=SR(l),d=new Gp;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=sI(this.apiClient,t);return a=k("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let p=oI(d),m=new Cr;return Object.assign(m,p),m})}else{let c=rI(this.apiClient,t);return a=k("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s.then(d=>{let p=iI(d),m=new Cr;return Object.assign(m,p),m})}}};var fm=class extends un{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){let n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){let n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],r;i&&"httpOptions"in i&&(r=i.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=e1(t);return a=k("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}else{let c=jb(t);return a=k("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=Yb(t);return r=k("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function GM(e){let t={},n=u(e,["data"]);if(n!=null&&f(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function qM(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>QM(r))),f(t,["parts"],o)}let i=u(e,["role"]);return i!=null&&f(t,["role"],i),t}function BM(e,t,n){let i={},o=u(t,["expireTime"]);n!==void 0&&o!=null&&f(n,["expireTime"],o);let r=u(t,["newSessionExpireTime"]);n!==void 0&&r!=null&&f(n,["newSessionExpireTime"],r);let s=u(t,["uses"]);n!==void 0&&s!=null&&f(n,["uses"],s);let a=u(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],XM(e,a));let l=u(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),i}function zM(e,t){let n={},i=u(t,["config"]);return i!=null&&f(n,["config"],BM(e,i,n)),n}function VM(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&f(t,["fileUri"],n);let i=u(e,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function $M(e){let t={},n=u(e,["id"]);n!=null&&f(t,["id"],n);let i=u(e,["args"]);i!=null&&f(t,["args"],i);let o=u(e,["name"]);if(o!=null&&f(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function YM(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&f(t,["enableWidget"],n),t}function JM(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&f(t,["timeRangeFilter"],n),t}function KM(e,t){let n={},i=u(e,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","responseModalities"],o);let r=u(e,["temperature"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","temperature"],r);let s=u(e,["topP"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&f(t,["setup","generationConfig","mediaResolution"],c);let d=u(e,["seed"]);t!==void 0&&d!=null&&f(t,["setup","generationConfig","seed"],d);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],Mm(p));let m=u(e,["thinkingConfig"]);t!==void 0&&m!=null&&f(t,["setup","generationConfig","thinkingConfig"],m);let h=u(e,["enableAffectiveDialog"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],h);let g=u(e,["systemInstruction"]);t!==void 0&&g!=null&&f(t,["setup","systemInstruction"],qM(lt(g)));let T=u(e,["tools"]);if(t!==void 0&&T!=null){let R=Rr(T);Array.isArray(R)&&(R=R.map(C=>WM(Nr(C)))),f(t,["setup","tools"],R)}let x=u(e,["sessionResumption"]);t!==void 0&&x!=null&&f(t,["setup","sessionResumption"],ZM(x));let y=u(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&f(t,["setup","inputAudioTranscription"],y);let v=u(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&f(t,["setup","outputAudioTranscription"],v);let S=u(e,["realtimeInputConfig"]);t!==void 0&&S!=null&&f(t,["setup","realtimeInputConfig"],S);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&f(t,["setup","contextWindowCompression"],A);let _=u(e,["proactivity"]);if(t!==void 0&&_!=null&&f(t,["setup","proactivity"],_),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function XM(e,t){let n={},i=u(t,["model"]);i!=null&&f(n,["setup","model"],ne(e,i));let o=u(t,["config"]);return o!=null&&f(n,["config"],KM(o,n)),n}function QM(e){let t={},n=u(e,["mediaResolution"]);n!=null&&f(t,["mediaResolution"],n);let i=u(e,["codeExecutionResult"]);i!=null&&f(t,["codeExecutionResult"],i);let o=u(e,["executableCode"]);o!=null&&f(t,["executableCode"],o);let r=u(e,["fileData"]);r!=null&&f(t,["fileData"],VM(r));let s=u(e,["functionCall"]);s!=null&&f(t,["functionCall"],$M(s));let a=u(e,["functionResponse"]);a!=null&&f(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&f(t,["inlineData"],GM(l));let c=u(e,["text"]);c!=null&&f(t,["text"],c);let d=u(e,["thought"]);d!=null&&f(t,["thought"],d);let p=u(e,["thoughtSignature"]);p!=null&&f(t,["thoughtSignature"],p);let m=u(e,["videoMetadata"]);return m!=null&&f(t,["videoMetadata"],m),t}function ZM(e){let t={},n=u(e,["handle"]);if(n!=null&&f(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function WM(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&f(t,["computerUse"],n);let i=u(e,["fileSearch"]);i!=null&&f(t,["fileSearch"],i);let o=u(e,["codeExecution"]);if(o!=null&&f(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let r=u(e,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(t,["functionDeclarations"],d)}let s=u(e,["googleMaps"]);s!=null&&f(t,["googleMaps"],YM(s));let a=u(e,["googleSearch"]);a!=null&&f(t,["googleSearch"],JM(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&f(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&f(t,["urlContext"],c),t}function jM(e){let t=[];for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){let o=Object.keys(i).map(r=>`${n}.${r}`);t.push(...o)}else t.push(n)}return t.join(",")}function ek(e,t){let n=null,i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){let r=i.setup;typeof r=="object"&&r!==null?(e.bidiGenerateContentSetup=r,n=r):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;let o=e.fieldMask;if(n){let r=jM(n);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)r?e.fieldMask=r:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];o.length>0&&(a=o.map(c=>s.includes(c)?`generationConfig.${c}`:c));let l=[];r&&l.push(r),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}var dm=class extends un{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=zM(this.apiClient,t);r=k("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let l=ek(a,t.config);return o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}};function tk(e,t){let n={},i=u(e,["force"]);return t!==void 0&&i!=null&&f(t,["_query","force"],i),n}function nk(e){let t={},n=u(e,["name"]);n!=null&&f(t,["_url","name"],n);let i=u(e,["config"]);return i!=null&&tk(i,t),t}function ik(e){let t={},n=u(e,["name"]);return n!=null&&f(t,["_url","name"],n),t}function ok(e,t){let n={},i=u(e,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&f(t,["_query","pageToken"],o),n}function rk(e){let t={},n=u(e,["parent"]);n!=null&&f(t,["_url","parent"],n);let i=u(e,["config"]);return i!=null&&ok(i,t),t}function sk(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&f(t,["sdkHttpResponse"],n);let i=u(e,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);let o=u(e,["documents"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),f(t,["documents"],r)}return t}var pm=class extends un{constructor(t){super(),this.apiClient=t,this.list=async n=>new ei(jn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=ik(t);return r=k("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=nk(t);o=k("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=rk(t);return r=k("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=sk(l),d=new qp;return Object.assign(d,c),d})}}};var mm=class extends un{constructor(t,n=new pm(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new ei(jn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=sM(t);return r=k("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=uM(t);return r=k("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,i;let o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=lM(t);o=k("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=hM(t);return r=k("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=gM(l),d=new Bp;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=yM(t);return r=k("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=vM(l),d=new zp;return Object.assign(d,c),d})}}async importFile(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=dM(t);return r=k("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{let c=fM(l),d=new Ws;return Object.assign(d,c),d})}}};var SA=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return SA=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))},ak=()=>SA();function hm(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}var gm=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){let t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};var Ct=class extends Error{},it=class extends Ct{constructor(t,n,i,o){super(`${it.makeMessage(t,n,i)}`),this.status=t,this.headers=o,this.error=n}static makeMessage(t,n,i){let o=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,i,o){if(!t||!o)return new _r({message:i,cause:gm(n)});let r=n;return t===400?new Au(t,r,i,o):t===401?new Eu(t,r,i,o):t===403?new Cu(t,r,i,o):t===404?new _u(t,r,i,o):t===409?new wu(t,r,i,o):t===422?new bu(t,r,i,o):t===429?new Nu(t,r,i,o):t>=500?new Ru(t,r,i,o):new it(t,r,i,o)}},ta=class extends it{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}},_r=class extends it{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}},xu=class extends _r{constructor({message:t}={}){super({message:t??"Request timed out."})}},Au=class extends it{},Eu=class extends it{},Cu=class extends it{},_u=class extends it{},wu=class extends it{},bu=class extends it{},Nu=class extends it{},Ru=class extends it{};var lk=/^[a-z][a-z0-9+.-]*:/i,uk=e=>lk.test(e),ym=e=>(ym=Array.isArray,ym(e)),ck=ym,fk=ck,Gx=fk;function dk(e){if(!e)return!0;for(let t in e)return!1;return!0}function pk(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var mk=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Ct(`${e} must be an integer`);if(t<0)throw new Ct(`${e} must be a positive integer`);return t},hk=e=>{try{return JSON.parse(e)}catch{return}};var gk=e=>new Promise(t=>setTimeout(t,e));var Sr="0.0.1";function yk(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var vk=()=>{var e,t,n,i,o;let r=yk();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":Bx(Deno.build.os),"X-Stainless-Arch":qx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":Bx((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":qx((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let s=Sk();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Sk(){if(typeof navigator>"u"||!navigator)return null;let e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:t,pattern:n}of e){let i=n.exec(navigator.userAgent);if(i){let o=i[1]||0,r=i[2]||0,s=i[3]||0;return{browser:t,version:`${o}.${r}.${s}`}}}return null}var qx=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Bx=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown"),nu,Tk=()=>nu??(nu=vk());function xk(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function TA(...e){let t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Ak(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return TA({start(){},async pull(n){let{done:i,value:o}=await t.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function xA(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){let n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Ek(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}let i=e.getReader(),o=i.cancel();i.releaseLock(),await o}var Ck=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});var AA=()=>{var e;if(typeof File>"u"){let{process:t}=globalThis,n=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Mp(e,t,n){return AA(),new File(e,t??"unknown_file",n)}function _k(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}var wk=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";var EA=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",bk=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&EA(e),Nk=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function Rk(e,t,n){if(AA(),e=await e,bk(e))return e instanceof File?e:Mp([await e.arrayBuffer()],e.name);if(Nk(e)){let o=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Mp(await vm(o),t,n)}let i=await vm(e);if(t||(t=_k(e)),!n?.type){let o=i.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return Mp(i,t,n)}async function vm(e){var t,n,i,o,r;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(EA(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(wk(e))try{for(var a=!0,l=ln(e),c;c=await l.next(),t=c.done,!t;a=!0){o=c.value,a=!1;let d=o;s.push(...await vm(d))}}catch(d){n={error:d}}finally{try{!a&&!t&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}else{let d=(r=e?.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof e}${d?`; constructor: ${d}`:""}${Ik(e)}`)}return s}function Ik(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}var Iu=class{constructor(t){this._client=t}};Iu._key=[];function CA(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var zx=Object.freeze(Object.create(null)),Mk=(e=CA)=>function(n,...i){if(n.length===1)return n[0];let o=!1,r=[],s=n.reduce((d,p,m)=>{var h,g,T;/[?#]/.test(p)&&(o=!0);let x=i[m],y=(o?encodeURIComponent:e)(""+x);return m!==i.length&&(x==null||typeof x=="object"&&x.toString===((T=Object.getPrototypeOf((g=Object.getPrototypeOf((h=x.hasOwnProperty)!==null&&h!==void 0?h:zx))!==null&&g!==void 0?g:zx))===null||T===void 0?void 0:T.toString))&&(y=x+"",r.push({start:d.length+p.length,length:y.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),d+p+(m===i.length?"":y)},""),a=s.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=l.exec(a))!==null;)r.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(r.sort((d,p)=>d.start-p.start),r.length>0){let d=0,p=r.reduce((m,h)=>{let g=" ".repeat(h.start-d),T="^".repeat(h.length);return d=h.start+h.length,m+g+T},"");throw new Ct(`Path parameters result in path with invalid segments:
${r.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s},iu=Mk(CA);var Mu=class extends Iu{create(t,n){var i;let{api_version:o=this._client.apiVersion}=t,r=Tu(t,["api_version"]);if("model"in r&&"agent_config"in r)throw new Ct("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new Ct("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(iu`/${o}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(iu`/${o}/interactions/${t}`,i)}cancel(t,n={},i){let{api_version:o=this._client.apiVersion}=n??{};return this._client.post(iu`/${o}/interactions/${t}/cancel`,i)}get(t,n={},i){var o;let r=n??{},{api_version:s=this._client.apiVersion}=r,a=Tu(r,["api_version"]);return this._client.get(iu`/${s}/interactions/${t}`,Object.assign(Object.assign({query:a},i),{stream:(o=n?.stream)!==null&&o!==void 0?o:!1}))}};Mu._key=Object.freeze(["interactions"]);var ku=class extends Mu{};function kk(e){let t=0;for(let o of e)t+=o.length;let n=new Uint8Array(t),i=0;for(let o of e)n.set(o,i),i+=o.length;return n}var ou;function km(e){let t;return(ou??(t=new globalThis.TextEncoder,ou=t.encode.bind(t)))(e)}var ru;function Vx(e){let t;return(ru??(t=new globalThis.TextDecoder,ru=t.decode.bind(t)))(e)}var wr=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];let n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?km(t):t;this.buffer=kk([this.buffer,n]);let i=[],o;for(;(o=Dk(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(Vx(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let r=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=Vx(this.buffer.subarray(0,r));i.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}};wr.NEWLINE_CHARS=new Set([`
`,"\r"]);wr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Dk(e,t){for(let o=t??0;o<e.length;o++){if(e[o]===10)return{preceding:o,index:o+1,carriage:!1};if(e[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function Uk(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}var Du={off:0,error:200,warn:300,info:400,debug:500},$x=(e,t,n)=>{if(!!e){if(pk(Du,e))return e;ht(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Du))}`)}};function Qs(){}function su(e,t,n){return!t||Du[e]>Du[n]?Qs:t[e].bind(t)}var Lk={error:Qs,warn:Qs,info:Qs,debug:Qs},Yx=new WeakMap;function ht(e){var t;let n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return Lk;let o=Yx.get(n);if(o&&o[0]===i)return o[1];let r={error:su("error",n,i),warn:su("warn",n,i),info:su("info",n,i),debug:su("debug",n,i)};return Yx.set(n,[i,r]),r}var co=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var Pi=class{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let o=!1,r=i?ht(i):console;function s(){return an(this,arguments,function*(){var l,c,d,p;if(o)throw new Ct("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,g=ln(Pk(t,n)),T;T=yield $(g.next()),l=T.done,!l;h=!0){p=T.value,h=!1;let x=p;if(!m)if(x.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield $(JSON.parse(x.data))}catch(y){throw r.error("Could not parse message into JSON:",x.data),r.error("From chunk:",x.raw),y}}}catch(x){c={error:x}}finally{try{!h&&!l&&(d=g.return)&&(yield $(d.call(g)))}finally{if(c)throw c.error}}m=!0}catch(x){if(hm(x))return yield $(void 0);throw x}finally{m||n.abort()}})}return new Pi(s,n,i)}static fromReadableStream(t,n,i){let o=!1;function r(){return an(this,arguments,function*(){var l,c,d,p;let m=new wr,h=xA(t);try{for(var g=!0,T=ln(h),x;x=yield $(T.next()),l=x.done,!l;g=!0){p=x.value,g=!1;let y=p;for(let v of m.decode(y))yield yield $(v)}}catch(y){c={error:y}}finally{try{!g&&!l&&(d=T.return)&&(yield $(d.call(T)))}finally{if(c)throw c.error}}for(let y of m.flush())yield yield $(y)})}function s(){return an(this,arguments,function*(){var l,c,d,p;if(o)throw new Ct("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var h=!0,g=ln(r()),T;T=yield $(g.next()),l=T.done,!l;h=!0){p=T.value,h=!1;let x=p;m||x&&(yield yield $(JSON.parse(x)))}}catch(x){c={error:x}}finally{try{!h&&!l&&(d=g.return)&&(yield $(d.call(g)))}finally{if(c)throw c.error}}m=!0}catch(x){if(hm(x))return yield $(void 0);throw x}finally{m||n.abort()}})}return new Pi(s,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){let t=[],n=[],i=this.iterator(),o=r=>({next:()=>{if(r.length===0){let s=i.next();t.push(s),n.push(s)}return r.shift()}});return[new Pi(()=>o(t),this.controller,this.client),new Pi(()=>o(n),this.controller,this.client)]}toReadableStream(){let t=this,n;return TA({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{let{value:o,done:r}=await n.next();if(r)return i.close();let s=km(JSON.stringify(o)+`
`);i.enqueue(s)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}};function Pk(e,t){return an(this,arguments,function*(){var i,o,r,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ct("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ct("Attempted to iterate over a response with no body");let a=new Sm,l=new wr,c=xA(e.body);try{for(var d=!0,p=ln(Fk(c)),m;m=yield $(p.next()),i=m.done,!i;d=!0){s=m.value,d=!1;let h=s;for(let g of l.decode(h)){let T=a.decode(g);T&&(yield yield $(T))}}}catch(h){o={error:h}}finally{try{!d&&!i&&(r=p.return)&&(yield $(r.call(p)))}finally{if(o)throw o.error}}for(let h of l.flush()){let g=a.decode(h);g&&(yield yield $(g))}})}function Fk(e){return an(this,arguments,function*(){var n,i,o,r;let s=new Uint8Array;try{for(var a=!0,l=ln(e),c;c=yield $(l.next()),n=c.done,!n;a=!0){r=c.value,a=!1;let d=r;if(d==null)continue;let p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?km(d):d,m=new Uint8Array(s.length+p.length);m.set(s),m.set(p,s.length),s=m;let h;for(;(h=Uk(s))!==-1;)yield yield $(s.slice(0,h)),s=s.slice(h)}}catch(d){i={error:d}}finally{try{!a&&!n&&(o=l.return)&&(yield $(o.call(l)))}finally{if(i)throw i.error}}s.length>0&&(yield yield $(s))})}var Sm=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;let r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,o]=Ok(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}};function Ok(e,t){let n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function Hk(e,t){let{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:r}=t,s=await(async()=>{var a;if(t.options.stream)return ht(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Pi.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;let l=n.headers.get("content-type"),c=(a=l?.split(";")[0])===null||a===void 0?void 0:a.trim();return c?.includes("application/json")||c?.endsWith("+json")?await n.json():await n.text()})();return ht(e).debug(`[${i}] response parsed`,co({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-r})),s}var na=class extends Promise{constructor(t,n,i=Hk){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new na(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){let[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}};var _A=Symbol("brand.privateNullableHeaders");function*Gk(e){if(!e)return;if(_A in e){let{values:i,nulls:o}=e;yield*i.entries();for(let r of o)yield[r,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Gx(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){let o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let r=Gx(i[1])?i[1]:[i[1]],s=!1;for(let a of r)a!==void 0&&(t&&!s&&(s=!0,yield[o,null]),yield[o,a])}}var Xs=e=>{let t=new Headers,n=new Set;for(let i of e){let o=new Set;for(let[r,s]of Gk(i)){let a=r.toLowerCase();o.has(a)||(t.delete(r),o.add(a)),s===null?(t.delete(r),n.add(a)):(t.append(r,s),n.delete(a))}}return{[_A]:!0,values:t,nulls:n}};var kp=e=>{var t,n,i,o,r,s;if(typeof globalThis.process<"u")return(i=(n=(t=globalThis.process.env)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(s=(r=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||r===void 0?void 0:r.call(o,e))===null||s===void 0?void 0:s.trim()};var wA,br=class{constructor(t){var n,i,o,r,s,a,l,{baseURL:c=kp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=kp("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=t,m=Tu(t,["baseURL","apiKey","apiVersion"]);let h=Object.assign(Object.assign({apiKey:d,apiVersion:p},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=h.baseURL,this.timeout=(i=h.timeout)!==null&&i!==void 0?i:br.DEFAULT_TIMEOUT,this.logger=(o=h.logger)!==null&&o!==void 0?o:console;let g="warn";this.logLevel=g,this.logLevel=(s=(r=$x(h.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:$x(kp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:g,this.fetchOptions=h.fetchOptions,this.maxRetries=(a=h.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=h.fetch)!==null&&l!==void 0?l:xk(),this.encoder=Ck,this._options=h,this.apiKey=d,this.apiVersion=p,this.clientAdapter=h.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){let n=Xs([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Xs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Xs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Ct(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Sr}`}defaultIdempotencyKey(){return`stainless-node-retry-${ak()}`}makeStatusError(t,n,i,o){return it.generate(t,n,i,o)}buildURL(t,n,i){let o=!this.baseURLOverridden()&&i||this.baseURL,r=uk(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),s=this.defaultQuery();return dk(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){let n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:t,path:n},o)))}request(t,n=null){return new na(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var o,r,s;let a=await t,l=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);let{req:c,url:d,timeout:p}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});let m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),h=i===void 0?"":`, retryOf: ${i}`,g=Date.now();if(ht(this).debug(`[${m}] sending request`,co({retryOfRequestLogID:i,method:a.method,url:d,options:a,headers:c.headers})),!((r=a.signal)===null||r===void 0)&&r.aborted)throw new ta;let T=new AbortController,x=await this.fetchWithTimeout(d,c,p,T).catch(gm),y=Date.now();if(x instanceof globalThis.Error){let S=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new ta;let A=hm(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return ht(this).info(`[${m}] connection ${A?"timed out":"failed"} - ${S}`),ht(this).debug(`[${m}] connection ${A?"timed out":"failed"} (${S})`,co({retryOfRequestLogID:i,url:d,durationMs:y-g,message:x.message})),this.retryRequest(a,n,i??m);throw ht(this).info(`[${m}] connection ${A?"timed out":"failed"} - error; no more retries left`),ht(this).debug(`[${m}] connection ${A?"timed out":"failed"} (error; no more retries left)`,co({retryOfRequestLogID:i,url:d,durationMs:y-g,message:x.message})),A?new xu:new _r({cause:x})}let v=`[${m}${h}] ${c.method} ${d} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${y-g}ms`;if(!x.ok){let S=await this.shouldRetry(x);if(n&&S){let I=`retrying, ${n} attempts remaining`;return await Ek(x.body),ht(this).info(`${v} - ${I}`),ht(this).debug(`[${m}] response error (${I})`,co({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:y-g})),this.retryRequest(a,n,i??m,x.headers)}let A=S?"error; no more retries left":"error; not retryable";ht(this).info(`${v} - ${A}`);let _=await x.text().catch(I=>gm(I).message),R=hk(_),C=R?void 0:_;throw ht(this).debug(`[${m}] response error (${A})`,co({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,message:C,durationMs:Date.now()-g})),this.makeStatusError(x.status,R,C,x.headers)}return ht(this).info(v),ht(this).debug(`[${m}] response start`,co({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:y-g})),{response:x,options:a,controller:T,requestLogID:m,retryOfRequestLogID:i,startTime:g}}async fetchWithTimeout(t,n,i,o){let r=n||{},{signal:s,method:a}=r,l=Tu(r,["signal","method"]);s&&s.addEventListener("abort",()=>o.abort());let c=setTimeout(()=>o.abort(),i),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,p=Object.assign(Object.assign(Object.assign({signal:o.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(p.method=a.toUpperCase());try{return await this.fetch.call(void 0,t,p)}finally{clearTimeout(c)}}async shouldRetry(t){let n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,o){var r;let s,a=o?.get("retry-after-ms");if(a){let c=parseFloat(a);Number.isNaN(c)||(s=c)}let l=o?.get("retry-after");if(l&&!s){let c=parseFloat(l);Number.isNaN(c)?s=Date.parse(l)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){let c=(r=t.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await gk(s),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){let r=n-t,s=Math.min(.5*Math.pow(2,r),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,o,r;let s=Object.assign({},t),{method:a,path:l,query:c,defaultBaseURL:d}=s,p=this.buildURL(l,c,d);"timeout"in s&&mk("timeout",s.timeout),s.timeout=(i=s.timeout)!==null&&i!==void 0?i:this.timeout;let{bodyHeaders:m,body:h}=this.buildBody({options:s}),g=await this.buildHeaders({options:t,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:g},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&h instanceof globalThis.ReadableStream&&{duplex:"half"}),h&&{body:h}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(r=s.fetchOptions)!==null&&r!==void 0?r:{}),url:p,timeout:s.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:o}){let r={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=t.idempotencyKey);let s=await this.authHeaders(t),a=Xs([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Tk()),this._options.defaultHeaders,i,t.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};let i=Xs([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Ak(t)}:this.encoder({body:t,headers:i})}};br.DEFAULT_TIMEOUT=6e4;var He=class extends br{constructor(){super(...arguments),this.interactions=new ku(this)}};wA=He;He.GeminiNextGenAPIClient=wA;He.GeminiNextGenAPIClientError=Ct;He.APIError=it;He.APIConnectionError=_r;He.APIConnectionTimeoutError=xu;He.APIUserAbortError=ta;He.NotFoundError=_u;He.ConflictError=wu;He.RateLimitError=Nu;He.BadRequestError=Au;He.AuthenticationError=Eu;He.InternalServerError=Ru;He.PermissionDeniedError=Cu;He.UnprocessableEntityError=bu;He.toFile=Rk;He.Interactions=ku;function qk(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function Bk(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function zk(e,t){let n={},i=u(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function Vk(e,t){let n={},i=u(e,["sdkHttpResponse"]);return i!=null&&f(n,["sdkHttpResponse"],i),n}function $k(e,t,n){let i={};if(u(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=u(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&f(t,["displayName"],o),u(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let r=u(e,["epochCount"]);t!==void 0&&r!=null&&f(t,["tuningTask","hyperparameters","epochCount"],r);let s=u(e,["learningRateMultiplier"]);if(s!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let a=u(e,["batchSize"]);t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","batchSize"],a);let l=u(e,["learningRate"]);if(t!==void 0&&l!=null&&f(t,["tuningTask","hyperparameters","learningRate"],l),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function Yk(e,t,n){let i={},o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let h=u(e,["validationDataset"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec"],Jx(h))}else if(o==="PREFERENCE_TUNING"){let h=u(e,["validationDataset"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec"],Jx(h))}let r=u(e,["tunedModelDisplayName"]);t!==void 0&&r!=null&&f(t,["tunedModelDisplayName"],r);let s=u(e,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let h=u(e,["epochCount"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],h)}else if(a==="PREFERENCE_TUNING"){let h=u(e,["epochCount"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],h)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let h=u(e,["learningRateMultiplier"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h)}else if(l==="PREFERENCE_TUNING"){let h=u(e,["learningRateMultiplier"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],h)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let h=u(e,["exportLastCheckpointOnly"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],h)}else if(c==="PREFERENCE_TUNING"){let h=u(e,["exportLastCheckpointOnly"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],h)}let d=u(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let h=u(e,["adapterSize"]);t!==void 0&&h!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],h)}else if(d==="PREFERENCE_TUNING"){let h=u(e,["adapterSize"]);t!==void 0&&h!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],h)}if(u(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let p=u(e,["labels"]);t!==void 0&&p!=null&&f(t,["labels"],p);let m=u(e,["beta"]);return t!==void 0&&m!=null&&f(t,["preferenceOptimizationSpec","hyperParameters","beta"],m),i}function Jk(e,t){let n={},i=u(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);let o=u(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);let r=u(e,["trainingDataset"]);r!=null&&oD(r);let s=u(e,["config"]);return s!=null&&$k(s,n),n}function Kk(e,t){let n={},i=u(e,["baseModel"]);i!=null&&f(n,["baseModel"],i);let o=u(e,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);let r=u(e,["trainingDataset"]);r!=null&&rD(r,n,t);let s=u(e,["config"]);return s!=null&&Yk(s,n,t),n}function Xk(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function Qk(e,t){let n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],i),n}function Zk(e,t,n){let i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);let r=u(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);let s=u(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),i}function Wk(e,t,n){let i={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&f(t,["_query","pageSize"],o);let r=u(e,["pageToken"]);t!==void 0&&r!=null&&f(t,["_query","pageToken"],r);let s=u(e,["filter"]);return t!==void 0&&s!=null&&f(t,["_query","filter"],s),i}function jk(e,t){let n={},i=u(e,["config"]);return i!=null&&Zk(i,n),n}function eD(e,t){let n={},i=u(e,["config"]);return i!=null&&Wk(i,n),n}function tD(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);let r=u(e,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>bA(a))),f(n,["tuningJobs"],s)}return n}function nD(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);let r=u(e,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Tm(a))),f(n,["tuningJobs"],s)}return n}function iD(e,t){let n={},i=u(e,["name"]);i!=null&&f(n,["model"],i);let o=u(e,["name"]);return o!=null&&f(n,["endpoint"],o),n}function oD(e,t){let n={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let i=u(e,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(r=>r)),f(n,["examples","examples"],o)}return n}function rD(e,t,n){let i={},o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=u(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=u(e,["gcsUri"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let r=u(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let s=u(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){let s=u(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&f(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function bA(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["name"]);o!=null&&f(n,["name"],o);let r=u(e,["state"]);r!=null&&f(n,["state"],tA(r));let s=u(e,["createTime"]);s!=null&&f(n,["createTime"],s);let a=u(e,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);let l=u(e,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&f(n,["updateTime"],c);let d=u(e,["description"]);d!=null&&f(n,["description"],d);let p=u(e,["baseModel"]);p!=null&&f(n,["baseModel"],p);let m=u(e,["_self"]);return m!=null&&f(n,["tunedModel"],iD(m)),n}function Tm(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["name"]);o!=null&&f(n,["name"],o);let r=u(e,["state"]);r!=null&&f(n,["state"],tA(r));let s=u(e,["createTime"]);s!=null&&f(n,["createTime"],s);let a=u(e,["startTime"]);a!=null&&f(n,["startTime"],a);let l=u(e,["endTime"]);l!=null&&f(n,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&f(n,["updateTime"],c);let d=u(e,["error"]);d!=null&&f(n,["error"],d);let p=u(e,["description"]);p!=null&&f(n,["description"],p);let m=u(e,["baseModel"]);m!=null&&f(n,["baseModel"],m);let h=u(e,["tunedModel"]);h!=null&&f(n,["tunedModel"],h);let g=u(e,["preTunedModel"]);g!=null&&f(n,["preTunedModel"],g);let T=u(e,["supervisedTuningSpec"]);T!=null&&f(n,["supervisedTuningSpec"],T);let x=u(e,["preferenceOptimizationSpec"]);x!=null&&f(n,["preferenceOptimizationSpec"],x);let y=u(e,["tuningDataStats"]);y!=null&&f(n,["tuningDataStats"],y);let v=u(e,["encryptionSpec"]);v!=null&&f(n,["encryptionSpec"],v);let S=u(e,["partnerModelTuningSpec"]);S!=null&&f(n,["partnerModelTuningSpec"],S);let A=u(e,["customBaseModel"]);A!=null&&f(n,["customBaseModel"],A);let _=u(e,["experiment"]);_!=null&&f(n,["experiment"],_);let R=u(e,["labels"]);R!=null&&f(n,["labels"],R);let C=u(e,["outputUri"]);C!=null&&f(n,["outputUri"],C);let M=u(e,["pipelineJob"]);M!=null&&f(n,["pipelineJob"],M);let I=u(e,["serviceAccount"]);I!=null&&f(n,["serviceAccount"],I);let N=u(e,["tunedModelDisplayName"]);N!=null&&f(n,["tunedModelDisplayName"],N);let G=u(e,["veoTuningSpec"]);return G!=null&&f(n,["veoTuningSpec"],G),n}function sD(e,t){let n={},i=u(e,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);let o=u(e,["name"]);o!=null&&f(n,["name"],o);let r=u(e,["metadata"]);r!=null&&f(n,["metadata"],r);let s=u(e,["done"]);s!=null&&f(n,["done"],s);let a=u(e,["error"]);return a!=null&&f(n,["error"],a),n}function Jx(e,t){let n={},i=u(e,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);let o=u(e,["vertexDatasetResource"]);return o!=null&&f(n,["validationDatasetUri"],o),n}var xm=class extends un{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new ei(jn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);let r=Object.assign(Object.assign({},n),{preTunedModel:o});return r.baseModel=void 0,await this.tuneInternal(r)}else{let o=Object.assign({},n);return await this.tuneInternal(o)}else{let o=Object.assign({},n),r=await this.tuneMldevInternal(o),s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:Up.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Qk(t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>Tm(d))}else{let c=Xk(t);return a=k("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>bA(d))}}async listInternal(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=eD(t);return a=k("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=nD(d),m=new mu;return Object.assign(m,p),m})}else{let c=jk(t);return a=k("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=tD(d),m=new mu;return Object.assign(m,p),m})}}async cancel(t){var n,i,o,r;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Bk(t);return a=k("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=Vk(d),m=new hu;return Object.assign(m,p),m})}else{let c=qk(t);return a=k("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=zk(d),m=new hu;return Object.assign(m,p),m})}}async tuneInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI()){let a=Kk(t,t);return r=k("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>Tm(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Jk(t);return r=k("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:l.headers},d})),o.then(l=>sD(l))}}};var Am=class{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},aD=1024*1024*8,lD=3,uD=1e3,cD=2,Uu="x-goog-upload-status";async function fD(e,t,n){var i;let o=await NA(e,t,n),r=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[Uu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function dD(e,t,n){var i;let o=await NA(e,t,n),r=await o?.json();if(((i=o?.headers)===null||i===void 0?void 0:i[Uu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=Xx(r),a=new js;return Object.assign(a,s),a}async function NA(e,t,n){var i,o;let r=0,s=0,a=new Zs(new Response),l="upload";for(r=e.size;s<r;){let c=Math.min(aD,r-s),d=e.slice(s,s+c);s+c>=r&&(l+=", finalize");let p=0,m=uD;for(;p<lD&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((i=a?.headers)===null||i===void 0)&&i[Uu]));)p++,await mD(m),m=m*cD;if(s+=c,((o=a?.headers)===null||o===void 0?void 0:o[Uu])!=="active")break;if(r<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function pD(e){return{size:e.size,type:e.type}}function mD(e){return new Promise(t=>setTimeout(t,e))}var Em=class{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await fD(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await dD(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await pD(t)}};var Cm=class{create(t,n,i){return new _m(t,n,i)}},_m=class{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var Kx="x-goog-api-key",wm=class{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Kx)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Kx,this.apiKey)}}};var hD="gl-node/",cn=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new He({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;let i=Vb(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;let o=new wm(this.apiKey);this.apiClient=new rm({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:hD+"web",uploader:new Em,downloader:new Am}),this.models=new cm(this.apiClient),this.live=new lm(this.apiClient,o,new Cm),this.batches=new Zp(this.apiClient),this.chats=new jp(this.models,this.apiClient),this.caches=new Wp(this.apiClient),this.files=new tm(this.apiClient),this.operations=new fm(this.apiClient),this.authTokens=new dm(this.apiClient),this.tunings=new xm(this.apiClient),this.fileSearchStores=new mm(this.apiClient)}};var kr=require("obsidian");function RA(e){let t=atob(e),n=t.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);return i}function Dm(e){let t="",n=e.byteLength;for(let i=0;i<n;i++)t+=String.fromCharCode(e[i]);return btoa(t)}function IA(e,t,n,i){let o=new Int16Array(e.buffer),r=o.length/i,s=t.createBuffer(i,r,n);for(let a=0;a<i;a++){let l=s.getChannelData(a);for(let c=0;c<r;c++)l[c]=o[c*i+a]/32768}return s}function MA(e){let t=e.length,n=new Int16Array(t);for(let i=0;i<t;i++){let o=Math.max(-1,Math.min(1,e[i]));n[i]=o<0?o*32768:o*32767}return n}var Ou={};ae(Ou,{declaration:()=>gD,execute:()=>yD,instruction:()=>Um});Me();var gD={name:"list_directory",description:"Lists all available files in the vault using paths relative to vault root."},Um="- list_directory: Use this to get an overview of the user's vault. All file paths are relative to vault root. Always call this if you are unsure of the available files.",yD=(e,t)=>{let n=Rn();return t.onSystem("Registry scanned",{name:"list_directory",filename:"Vault Root",files:n}),Promise.resolve({files:n})};var Hu={};ae(Hu,{declaration:()=>vD,execute:()=>SD,instruction:()=>Pm});Me();var kA=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},Lm=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},vD={name:"list_vault_files",description:"Lists markdown files in the vault with pagination and sorting. Essential for large vaults.",parameters:{type:w.OBJECT,properties:{limit:{type:w.NUMBER,description:"Max number of files to return (default: 20)"},offset:{type:w.NUMBER,description:"Number of files to skip (default: 0)"},sortBy:{type:w.STRING,enum:["mtime","name","size"],description:"Property to sort by. mtime is last modified time."},sortOrder:{type:w.STRING,enum:["asc","desc"],description:"Sort order (default: desc)"},filter:{type:w.STRING,description:"Optional text filter for path or filename."}}}},Pm="- list_vault_files: Use this to explore large vaults. It supports paging and sorting. Default is most recently modified first.",SD=async(e,t)=>{let n=kA(e,"limit"),i=kA(e,"offset",0)??0,o=Lm(e,"sortBy"),r=Lm(e,"sortOrder"),s=Lm(e,"filter"),a=await Ks({limit:n,offset:i,sortBy:o,sortOrder:r,filter:s}),l=a.files.map(c=>c.path);return t.onSystem(`Vault files (${i}-${i+a.files.length} of ${a.total})`,{name:"list_vault_files",filename:"Vault Explorer",files:l}),a};var Gu={};ae(Gu,{declaration:()=>TD,execute:()=>xD,instruction:()=>Fm});Me();var TD={name:"get_folder_tree",description:"Lists all folders in the vault as a flat array to understand hierarchy, or lists all files (notes and other files) in a specific folder. All paths are relative to vault root.",parameters:{type:w.OBJECT,properties:{folder_path:{type:w.STRING,description:"Optional: Path to a specific folder to query. If provided, returns all files (notes, images, PDFs, etc.) in that folder and its subfolders. If not provided, returns all folders in the vault."}},required:[]}},Fm="- get_folder_tree: Use this to see a simple list of all folders in the vault hierarchy. Optionally provide a folder_path parameter to query all files (notes, images, PDFs, etc.) in a specific folder and its subfolders. All paths are relative to vault root.",xD=(e,t)=>{let n=e.folder_path,i=Wl(n),o=n?`Folder contents queried for: ${n}`:"Folder structure scanned",r=n?`Folder Contents: ${n}`:"Folder Tree";return t.onSystem(o,{name:"get_folder_tree",filename:r,files:i}),Promise.resolve({files:i})};var qu={};ae(qu,{declaration:()=>AD,execute:()=>ED,instruction:()=>Om});Me();var AD={name:"dirlist",description:"Lists only directory structure, ignoring files, to understand vault hierarchy. All paths are relative to vault root."},Om="- dirlist: Use this to see the pure directory structure of the vault without any file information. All paths are relative to vault root.",ED=(e,t)=>{let i=TT().map(o=>({path:o.path||"/",type:"directory",hasChildren:o.children.length>0}));return t.onSystem("Directory structure scanned",{name:"dirlist",filename:"Directory List",directoryInfo:i}),Promise.resolve({directories:i})};var Bu={};ae(Bu,{declaration:()=>_D,execute:()=>wD,instruction:()=>Hm});Me();Ee();var CD=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},_D={name:"read_file",description:"Read the full content of a specified file using path relative to vault root.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},Hm=`- read_file: Use this to ingest the contents of a note. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). You should read a file before proposing major edits to ensure context. Parameters:
  - filename: required, path to the file`,wD=async(e,t)=>{let n=CD(e,"filename");if(!n)throw new Error("Missing filename");let i=await Ot(n);await Ze(n),t.onSystem(`Opened ${n}`,{name:"read_file",filename:n,oldContent:i,newContent:i,additions:0,removals:0});let o=Ve(n);return t.onFileState(o,n),{content:i}};var zu={};ae(zu,{declaration:()=>bD,execute:()=>ND,instruction:()=>Gm});Me();Ee();var DA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},bD={name:"create_file",description:"Create a new file with initial content using path relative to vault root.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},content:{type:w.STRING}},required:["filename","content"]}},Gm='- create_file: Use this to initialize new notes in the vault. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level). Always provide meaningful initial content.',ND=async(e,t)=>{let n=DA(e,"filename"),i=DA(e,"content")??"";if(!n)throw new Error("Missing filename");await jl(n,i),await Ze(n),t.onSystem(`Created ${n}`,{name:"create_file",filename:n,oldContent:"",newContent:i,additions:i.split(`
`).length,removals:0});let o=Ve(n);return t.onFileState(o,n),{status:"created"}};var Vu={};ae(Vu,{declaration:()=>RD,execute:()=>ID,instruction:()=>qm});Me();Ee();var UA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},RD={name:"update_file",description:"Overwrite the entire content of an existing file.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING},content:{type:w.STRING}},required:["filename","content"]}},qm="- update_file: Use this for total overwrites. For smaller changes, prefer edit_file.",ID=async(e,t)=>{let n=UA(e,"filename"),i=UA(e,"content")??"";if(!n)throw new Error("Missing filename");let o=await Ot(n).catch(()=>"");await uo(n,i),await Ze(n);let r=o.split(`
`),s=i.split(`
`),a=s.filter(d=>!r.includes(d)).length,l=r.filter(d=>!s.includes(d)).length;t.onSystem(`Updated ${n}`,{name:"update_file",filename:n,oldContent:o,newContent:i,additions:a,removals:l});let c=Ve(n);return t.onFileState(c,n),{status:"updated"}};var $u={};ae($u,{declaration:()=>kD,execute:()=>DD,instruction:()=>zm});Me();Ee();var Bm=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},MD=(e,t)=>{let n=e[t];return typeof n=="number"?n:void 0},kD={name:"edit_file",description:"Perform granular line-based edits on a file.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING},operation:{type:w.STRING,enum:["append","replace_line","remove_line"]},text:{type:w.STRING},lineNumber:{type:w.NUMBER}},required:["filename","operation"]}},zm="- edit_file: Use this for targeted modifications (appending, replacing lines, or removing lines).",DD=async(e,t)=>{let n=Bm(e,"filename"),i=Bm(e,"operation"),o=Bm(e,"text"),r=MD(e,"lineNumber");if(!n||!i)throw new Error("Missing filename or operation");let s=await Ot(n).catch(()=>"");await CT(n,i,o,r);let a=await Ot(n);await Ze(n),t.onSystem(`Edited ${n}`,{name:"edit_file",filename:n,oldContent:s,newContent:a,additions:i==="append"||i==="replace_line"?1:0,removals:i==="remove_line"||i==="replace_line"?1:0});let l=Ve(n);return t.onFileState(l,n),{status:"edited"}};var Yu={};ae(Yu,{declaration:()=>UD,execute:()=>LD,instruction:()=>Vm});Me();Ee();var LA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},UD={name:"rename_file",description:"Rename an existing file to a new name.",parameters:{type:w.OBJECT,properties:{oldFilename:{type:w.STRING,description:"The current name of the file"},newFilename:{type:w.STRING,description:"The new name for the file"}},required:["oldFilename","newFilename"]}},Vm="- rename_file: Use this to change the name of a note. Ensure the new name follows markdown extension conventions if applicable.",LD=async(e,t)=>{let n=LA(e,"oldFilename"),i=LA(e,"newFilename");if(!n||!i)throw new Error("Missing oldFilename or newFilename");await AT(n,i),await Ze(i),t.onSystem(`Renamed ${n} to ${i}`,{name:"rename_file",filename:n,oldContent:n,newContent:i});let o=Ve(i);return t.onFileState(o,i),{status:"renamed",from:n,to:i}};var Ju={};ae(Ju,{declaration:()=>PD,execute:()=>FD,instruction:()=>$m});Me();var PA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},PD={name:"move_file",description:"Move a file from one folder to another using paths relative to vault root",parameters:{type:w.OBJECT,properties:{sourcePath:{type:w.STRING,description:'Current path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'},targetPath:{type:w.STRING,description:'New path relative to vault root (e.g., "archive/projects/notes.md" or "notes.md" for root level)'}},required:["sourcePath","targetPath"]}},$m='- move_file: Move a file using paths relative to vault root. All paths are relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level files). Use this to reorganize files between folders.',FD=async(e,t)=>{let n=PA(e,"sourcePath"),i=PA(e,"targetPath");if(!n||!i)throw new Error("Missing sourcePath or targetPath");return await ET(n,i),t.onSystem(`Moved ${n} to ${i}`,{name:"move_file",filename:n,displayFormat:`<span style="color: #fb923c; font-weight: 600;">${n}</span> <span style="color: #6b7280;">\u2192</span> <span style="color: #10b981; font-weight: 600;">${i}</span>`,dropdown:!1}),{status:"moved",from:n,to:i}};var Ku={};ae(Ku,{declaration:()=>HD,execute:()=>GD,instruction:()=>Ym});Me();var OD=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},HD={name:"search_keyword",description:"Search for a keyword across all files in the vault.",parameters:{type:w.OBJECT,properties:{keyword:{type:w.STRING,description:"The text to search for"}},required:["keyword"]}},Ym="- search_keyword: Fast plaintext search across all files.",GD=async(e,t)=>{let n=OD(e,"keyword");if(!n)throw new Error("Missing keyword");let i=await tu(n,!1);return t.onSystem(`Search complete for "${n}"`,{name:"search_keyword",filename:`Global Search: "${n}"`,searchKeyword:n,searchResults:i,displayFormat:`Searching for "<strong>${n}</strong>" (${i.length} results)`}),{results:i}};var Xu={};ae(Xu,{declaration:()=>qD,execute:()=>BD,instruction:()=>Jm});Me();var FA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},qD={name:"search_regexp",description:"Search using a regular expression across all files.",parameters:{type:w.OBJECT,properties:{pattern:{type:w.STRING,description:"The regex pattern"},flags:{type:w.STRING,description:'Optional regex flags (default: "i")'}},required:["pattern"]}},Jm="- search_regexp: Advanced regex search. Use this to identify files for global replacements.",BD=async(e,t)=>{let n=FA(e,"pattern"),i=FA(e,"flags")||"i";if(!n)throw new Error("Missing pattern");let o=await tu(n,!0,i);return t.onSystem(`Regex search complete for /${n}/`,{name:"search_regexp",filename:`Regex: /${n}/${i}`,searchResults:o,displayFormat:`Regex search "<strong>/${n}/${i}</strong>" (${o.length} results)`}),{results:o}};var Zu={};ae(Zu,{declaration:()=>zD,execute:()=>VD,instruction:()=>Km});Me();Ee();var Qu=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},zD={name:"search_and_replace_regex_in_file",description:"Search and replace text in a specific file using regex.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING},pattern:{type:w.STRING},replacement:{type:w.STRING},flags:{type:w.STRING,description:'Optional regex flags (default: "g")'}},required:["filename","pattern","replacement"]}},Km="- search_and_replace_regex_in_file: Targeted regex replacement within a single node.",VD=async(e,t)=>{let n=Qu(e,"filename"),i=Qu(e,"pattern"),o=Qu(e,"replacement")??"",r=Qu(e,"flags")||"g";if(!n||!i)throw new Error("Missing filename or pattern");let s=await Ot(n),a=new RegExp(i,r),l=s.replace(a,o);await uo(n,l),await Ze(n),t.onSystem(`Replaced in ${n}`,{name:"search_and_replace_regex_in_file",filename:n,oldContent:s,newContent:l,additions:1,removals:1});let c=Ve(n);return t.onFileState(c,n),{status:"success"}};var Wu={};ae(Wu,{declaration:()=>$D,execute:()=>YD,instruction:()=>Qm});Me();Ee();var Xm=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},$D={name:"search_and_replace_regex_global",description:"Search and replace text across ALL files using regex.",parameters:{type:w.OBJECT,properties:{pattern:{type:w.STRING},replacement:{type:w.STRING},flags:{type:w.STRING,description:'Optional regex flags (default: "g")'}},required:["pattern","replacement"]}},Qm=`
GLOBAL SEARCH & REPLACE WORKFLOW:
1. When asked for a global replacement, ALWAYS run "search_regexp" first.
2. Report the number of files that will be updated.
3. ASK for explicit confirmation before calling "search_and_replace_regex_global".
4. After execution, report "updated all occurrences".`,YD=async(e,t)=>{let n=Rn(),i=Xm(e,"pattern"),o=Xm(e,"replacement")??"",r=Xm(e,"flags")||"g";if(!i)throw new Error("Missing pattern");let s=new RegExp(i,r),a=[],l=0,c=[];for(let d of n){let p=await Ot(d);if(s.test(p)){let m=p.replace(s,o);await uo(d,m),a.push({filename:d,oldContent:p,newContent:m,additions:1,removals:1}),c.push(d),l++}}return t.onSystem(`Global replace complete: ${l} files updated`,{name:"search_and_replace_regex_global",filename:"Vault Wide",multiDiffs:a}),c.length>0&&(await Ze(c[0]),t.onFileState("/",c)),{status:"success",filesUpdated:l}};var ju={};ae(ju,{declaration:()=>JD,execute:()=>XD,instruction:()=>Zm});var JD={name:"topic_switch",description:"Signal that a major topic shift has occurred. Provide a summary of the previous conversation.",parameters:{type:w.OBJECT,properties:{summary:{type:w.STRING,description:"A short one-sentence summary of the preceding conversation segment."}},required:["summary"]}},Zm=`
TOPIC SWITCHING & PERSISTENCE: 
1. Monitor for significant topic switches in the conversation flow.
2. If a switch occurs, call "topic_switch" with a concise summary.
3. This will automatically trigger an ARCHIVE process.
4. Do NOT say "Done." after calling this. Proceed immediately to the next topic.`,KD=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},XD=(e,t)=>{let i=`x-chat-history-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.md`,o=KD(e,"summary")||"Topic switch";return t.onSystem("Context update",{name:"topic_switch",filename:i,newContent:o}),Promise.resolve({status:"context_reset"})};var Wm={};ae(Wm,{declaration:()=>ZD,execute:()=>jD,instruction:()=>WD});Me();var QD=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},ZD={name:"create_directory",description:"Create a new directory in the vault. Parent directories will be created automatically if they don't exist.",parameters:{type:w.OBJECT,properties:{path:{type:w.STRING,description:'Directory path relative to vault root (e.g., "projects/notes" or "archive" for root level)'}},required:["path"]}},WD="- create_directory: Use this to create new directories in the vault. All paths are relative to vault root. Parent directories are created automatically.",jD=async(e,t)=>{let n=QD(e,"path");if(!n)throw new Error("Missing directory path");await eu(n);let i=n.split("/").pop()||n,o=n.replace(/[^/]+$/,"");return t.onSystem(`Created directory ${n}`,{name:"create_directory",filename:n,displayFormat:`${o}<span style="color: #10b981; font-weight: 600;">${i}</span>`,dropdown:!1}),{status:"created",path:n}};var jm={};ae(jm,{declaration:()=>t2,execute:()=>i2,instruction:()=>n2});Me();Ee();var e2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},t2={name:"delete_file",description:"Move an existing file from the vault to the trash folder (chat history/trash). Files in trash are hidden from directory listings.",parameters:{type:w.OBJECT,properties:{filename:{type:w.STRING,description:'Path relative to vault root (e.g., "projects/notes.md" or "notes.md" for root level)'}},required:["filename"]}},n2="- delete_file: Use this to move a note to the trash folder (chat history/trash). Files in trash are hidden from directory listings but can be recovered manually. All paths are relative to vault root.",i2=async(e,t)=>{let n=e2(e,"filename");if(!n)throw new Error("Missing filename");await _T(n),t.onSystem(`Moved ${n} to trash`,{name:"delete_file",filename:n,oldContent:n,newContent:""});let i=Ve(n);return t.onFileState(i,null),{status:"moved_to_trash",filename:n}};var ec={};ae(ec,{declaration:()=>r2,execute:()=>s2,instruction:()=>eh});mt();var o2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},r2={name:"internet_search",description:"Search the internet for real-time information, news, current events, or general knowledge outside the vault.",parameters:{type:w.OBJECT,properties:{query:{type:w.STRING,description:"The search query to look up on the web."}},required:["query"]}},eh="- internet_search: Use this to fetch real-time data or information not contained within the local vault. Always use this tool for questions about current events, celebrities, weather, or general knowledge.",s2=async(e,t)=>{let n=performance.now(),o=Qe()?.manualApiKey?.trim();if(!o)throw new Error("API key not found. Please set your Gemini API key in the plugin settings.");let r=o2(e,"query");if(!r)throw new Error("Missing query");t.onSystem(`Internet search: ${r}`,{name:"internet_search",filename:r,status:"pending"});let a=await new cn({apiKey:o}).models.generateContent({model:"gemini-3-flash-preview",contents:r,config:{tools:[{googleSearch:{}}]}}),l=a.text||"No results found.",c=a.candidates?.[0]?.groundingMetadata?.groundingChunks||[],d=performance.now(),p=Math.round(d-n),m=l.length;return t.onSystem(`Internet search: ${r}`,{name:"internet_search",filename:r,status:"success",newContent:l,groundingChunks:c,duration:p,responseLength:m}),{text:l,groundingChunks:c,searchQuery:r}};var tc={};ae(tc,{declaration:()=>l2,execute:()=>u2,instruction:()=>th});var a2=e=>e instanceof Error?e.message:String(e),l2={name:"end_conversation",description:"End the current voice conversation session and stop the voice interface.",parameters:{type:w.OBJECT,properties:{},required:[]}},th=`
CONVERSATION CONTROL:
1. Use "end_conversation" when the user indicates they want to stop talking or end the conversation.
2. This will immediately stop the voice interface and disconnect the session.
3. Do NOT say "Done." after calling this. The session will simply end.`,u2=async(e,t)=>{try{return t.onSystem("Ending conversation...",{name:"end_conversation",filename:"Session",status:"success"}),t.onStopSession&&t.onStopSession(),{status:"conversation_ended"}}catch(n){return console.error(`Error in end_conversation: ${a2(n)}`),{status:"conversation_ended_with_errors"}}};var oh={};ae(oh,{declaration:()=>f2,execute:()=>p2,instruction:()=>d2});mt();Me();Ee();var nh=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},ih=e=>e instanceof Error?e.message:String(e),c2=e=>{let t=atob(e),n=t.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);return i},f2={name:"generate_image_from_context",description:"Generate an image based on the current context or provided prompt using Gemini API and save it to the vault.",parameters:{type:w.OBJECT,properties:{prompt:{type:w.STRING,description:"The prompt describing what image to generate. If not provided, will use current context."},filename:{type:w.STRING,description:'The filename to save the image as (e.g., "generated-image.png"). If not provided, will auto-generate.'},currentFolder:{type:w.STRING,description:"The folder path where to save the image. If not provided, will use active file's folder."}},required:[]}},d2="- generate_image_from_context: Use this to create images based on conversation context or specific prompts. Images are saved to the current vault directory.",p2=async(e,t)=>{let i=Qe()?.manualApiKey?.trim();if(!i)throw new Error("API key not found. Please set your Gemini API key in the plugin settings.");let o=new cn({apiKey:i}),r=nh(e,"prompt");r||(r="Generate an image based on the current conversation context and topic being discussed.");try{let s=await o.models.generateContent({model:"gemini-2.5-flash-image",contents:r}),a="";if(s.candidates&&s.candidates.length>0){let h=s.candidates[0];if(h.content&&h.content.parts){for(let g of h.content.parts)if(g.inlineData&&g.inlineData.data){a=g.inlineData.data;break}}}if(!a)throw new Error("No image data returned from API");let l=nh(e,"filename");l||(l=`generated-image-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}.png`),l.match(/\.(png|jpg|jpeg|gif|webp)$/i)||(l+=".png");let c=c2(a);console.error("=== DEBUG generate_image_from_context: STARTING FILE SAVE ==="),console.error(`DEBUG: Image data length: ${a.length} characters`),console.error(`DEBUG: Binary data size: ${c.byteLength} bytes`),console.error(`DEBUG: First 100 chars of base64: ${a.substring(0,100)}`);let d=nh(e,"currentFolder")||"";if(console.error(`DEBUG: currentFolder from args: "${d}"`),!d){let h=me();if(console.error(`DEBUG: getObsidianApp() returned: ${h?"app exists":"NULL"}`),h&&h.workspace){console.error("DEBUG: app.workspace exists");let g=h.workspace.getActiveFile();console.error(`DEBUG: activeFile: ${g?g.path:"NULL"}`),g&&g.parent?(d=g.parent.path,console.error(`DEBUG: currentFolder from activeFile.parent: "${d}"`)):console.error("DEBUG: No activeFile or no parent - currentFolder stays empty")}else console.error("DEBUG: No app or no workspace - currentFolder stays empty")}let p=d?`${d}/${l}`:l;console.error(`DEBUG: Final fullFilename to save: "${p}"`),console.error(`DEBUG: filename only: "${l}"`),console.error(`DEBUG: About to call createBinaryFile with fullFilename="${p}", binaryData.byteLength=${c.byteLength}`);try{let h=await xT(p,c);console.error(`DEBUG: createBinaryFile returned: "${h}"`)}catch(h){throw console.error("DEBUG: createBinaryFile THREW ERROR:",h),h}console.error("=== DEBUG generate_image_from_context: FILE SAVE COMPLETE ==="),t.onSystem(`Generated image: ${l}`,{name:"generate_image_from_context",filename:l,newContent:`Generated image (${c.byteLength} bytes)`,description:`Image generated from prompt: ${r}`});let m=Ve(p);return t.onFileState(m,l),{filename:l,filePath:p,size:c.byteLength,type:l.split(".").pop()||"png",targetFolder:d,description:`Image generated from prompt: ${r}`}}catch(s){console.error("Image generation error:",s),console.error("Error details:",JSON.stringify(s,null,2));let a=`Failed to generate image: ${ih(s)}`;throw ih(s).includes("model")&&(a+=`

This might be due to an incorrect model name or insufficient API permissions for image generation.`),ih(s).includes("API key")&&(a+=`

Please check your Gemini API key configuration.`),new Error(a)}};var rh={};ae(rh,{declaration:()=>m2,execute:()=>g2,instruction:()=>h2});Ee();var OA=e=>e instanceof Error?e.message:String(e),m2={name:"reveal_active_pane",description:"Reveals and displays information about the last active text editor in Obsidian, including file path, view type, and editor state. Uses getActiveFile() and getLastOpenFiles() for accurate results."},h2="- reveal_active_pane: Use this to get information about the last active text editor in Obsidian, including what file was most recently edited, the view type, and editor details. Uses getActiveFile() for accurate results.",g2=(e,t)=>{let n=me();if(!n||!n.workspace)return t.onSystem("Error: Not running in Obsidian or workspace unavailable",{name:"reveal_active_pane",filename:"Active Pane",error:"Obsidian workspace not available"}),Promise.resolve({error:"Obsidian workspace not available"});try{let i=n.workspace,o=i.getActiveFile(),r=i.getLastOpenFiles(),s=i.activeLeaf,a=o;if(!s||s.view.getViewType()!=="markdown"){let m=i.getLeavesOfType("markdown");s=m.find(h=>h.view.file===o)||m[0]||null}if(!s&&!a)return t.onSystem("No active text editor found",{name:"reveal_active_pane",filename:"Active Editor",status:"error",error:"No active text editor currently available"}),Promise.resolve({error:"No active text editor currently available"});let l=s?.view,c=l?.getState(),d=l?.file||a,p={viewType:l?.getViewType()||"unknown",leafType:s?.constructor.name||"none",isPinned:s?.pinned||!1,isRoot:s?.root||!1,isHidden:s?.hidden||!1,hasParent:!!s?.parent,side:s?.getSide?.()||"unknown",width:s?.width||0,height:s?.height||0,x:s?.x||0,y:s?.y||0,filePath:d?d.path:null,fileName:d?d.name:null,fileExtension:d?d.extension:null,fileSize:d?d.stat?.size:null,fileModified:d?d.stat?.mtime:null,viewState:c,mode:c?.mode||null,source:c?.source||null,editorInfo:l?.editor?{cursor:l.editor.getCursor?.(),selection:l.editor.getSelection?.(),lineCount:l.editor.lineCount?.(),isFocused:l.editor.hasFocus?.()}:null,lastOpenFiles:r,isActiveFile:!!o,hasActiveLeaf:!!s};return t.onSystem("Active pane information retrieved",{name:"reveal_active_pane",filename:p.fileName||"Active Pane",status:"success",paneInfo:p}),Promise.resolve({paneInfo:p})}catch(i){return console.error("Reveal active pane error:",i),t.onSystem("Error retrieving active pane information",{name:"reveal_active_pane",filename:"Active Pane",status:"error",error:OA(i)}),Promise.resolve({error:OA(i)})}};var sh={};ae(sh,{declaration:()=>y2,execute:()=>S2,instruction:()=>v2});Ee();var HA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},y2={name:"open_folder_in_system",description:"Opens the specified folder in the system file browser/finder."},v2='- open_folder_in_system: Use this to open a folder in the system file browser. Takes a folder path as argument (e.g., path: "documents/notes"). Use "." or empty path for vault root.',S2=async(e,t)=>{let n=me();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"open_folder_in_system",filename:"System Browser",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};try{let i=HA(e,"path")||HA(e,"folder")||".",o=n.vault,r,s;if(i==="."||i===""||i==="/")r=o.adapter.getBasePath(),s="Vault Root";else{let a=o.getAbstractFileByPath(i);if(!a)return t.onSystem(`Path not found: ${i}`,{name:"open_folder_in_system",filename:"System Browser",status:"error",error:`Path "${i}" does not exist in vault`}),{error:`Path "${i}" does not exist in vault`};if(a.extension!==void 0){let l=a.parent?.path||"";r=l?o.adapter.getFullPath(l):o.adapter.getBasePath(),s=a.parent?.name||"Vault Root"}else r=o.adapter.getFullPath(i),s=a.name}if(n.vault.adapter.openPath)await n.vault.adapter.openPath(r);else{let a=n.openWithDefaultApp;a&&await a(r)}return t.onSystem("Opened folder in system browser",{name:"open_folder_in_system",filename:s,status:"success",folderPath:i,systemPath:r}),{success:!0,folderPath:i,systemPath:r,targetName:s,message:`Folder "${s}" opened in system browser`}}catch(i){return console.error("Open folder in system browser error:",i),t.onSystem("Error opening folder in system browser",{name:"open_folder_in_system",filename:"System Browser",status:"error",error:i.message||String(i)}),{error:i.message||String(i)}}};var nc={};ae(nc,{declaration:()=>T2,execute:()=>E2,instruction:()=>uh});Ee();var lh=require("obsidian");mt();var T2={name:"image_search",description:"Search for images on the internet and preview them. Click on any image in the preview to download it to the vault.",parameters:{type:w.OBJECT,properties:{query:{type:w.STRING,description:"The search query to find images."},count:{type:w.NUMBER,description:"Number of images to show in preview (default: 3, max: 10)."},auto_download:{type:w.BOOLEAN,description:"Whether to automatically download images (default: false)."},folder:{type:w.STRING,description:"Target folder path (optional, defaults to current folder or assets folder)."},filename_prefix:{type:w.STRING,description:"Prefix for generated filenames (optional)."}},required:["query"]}},uh="- image_search: Use this to search for images and preview them. Click on any image in the preview to download it to the vault.",ah=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},x2=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},A2=(e,t,n)=>{let i=e[t];return typeof i=="boolean"?i:n},GA=e=>e instanceof Error?e.message:String(e),E2=async(e,t)=>{let n=me();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"image_search",filename:"Image Search",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=ah(e,"query"),o=x2(e,"count",3),r=A2(e,"auto_download",!1),s=ah(e,"folder"),a=ah(e,"filename_prefix");if(!i)return{error:"Missing image search query"};try{t.onSystem(`Image search: ${i}`,{name:"image_search",filename:i,status:"pending"});let l=Math.min(Math.max(1,Math.floor(o)||3),10),c=s;if(!c){let m=n.workspace.getActiveFile();m?c=m.parent?.path||"":c="assets"}c&&!await n.vault.adapter.exists(c)&&await n.vault.createFolder(c);let d=await C2(i,Math.max(l,3));if(!d||d.length===0)return t.onSystem("No images found for the search query",{name:"image_search",filename:i,status:"error",error:"No images found"}),{error:"No images found for the search query"};let p=d.slice(0,l);if(console.debug("=== DEBUG: Search Results ==="),console.debug("Total search results found:",d.length),console.debug("Results for preview:",p),console.debug("Auto download:",r),console.debug("=== END DEBUG: Search Results ==="),t.onSystem(`Found ${d.length} images for "${i}". Click any image to download:`,{name:"image_search",filename:i,status:"search_results",searchResults:p,totalFound:d.length,targetFolder:c}),r){let m=[];for(let h=0;h<Math.min(p.length,l);h++){let g=p[h];try{let T=await _2(n,g,c,a||i,h+1);m.push(T)}catch(T){console.error(`Failed to download image ${h+1}:`,T)}}if(m.length>0){let h=`Downloaded ${m.length} image${m.length>1?"s":""} to ${c}`;return t.onSystem(h,{name:"image_search",filename:i,status:"success",downloadedImages:m}),{query:i,downloadedImages:m,targetFolder:c,totalFound:d.length,totalDownloaded:m.length}}}return{query:i,searchResults:p,targetFolder:c,totalFound:d.length,auto_download:r}}catch(l){return console.error("Image search error:",l),t.onSystem("Error during image search and download",{name:"image_search",filename:i,status:"error",error:GA(l)}),{error:GA(l)}}};function qA(){let e=me();e&&e.setting&&(e.setting.open(),e.setting.openTabById("hermes-voice-assistant"))}async function C2(e,t){try{let i=(await Ql())?.serperApiKey?.trim();if(!i)throw console.error("Serper API key not found"),qA(),new Error("Serper API key not found. Please set your Serper API key in the plugin settings. Get 2,500 free credits at https://serper.dev/");let o="https://google.serper.dev/images";console.debug("Fetching images from Serper.dev API...");let r=await(0,lh.requestUrl)({url:o,method:"POST",headers:{"X-API-KEY":i,"Content-Type":"application/json"},body:JSON.stringify({q:e,num:Math.min(t,10)})});if(r.status>=400)throw console.error("Serper API error:",r.status,r.text),r.status===401||r.status===403?(qA(),new Error("Invalid Serper API key. Please check your API key in the plugin settings.")):new Error(`Serper API error: ${r.status}`);let s=r.json;if(!s.images||s.images.length===0)return console.debug("No images found for query:",e),[];let a=s.images.map(l=>({url:l.imageUrl,title:l.title,description:l.source||"",image:{thumbnail:l.thumbnailUrl||l.imageUrl,contextLink:l.link,width:l.imageWidth,height:l.imageHeight}}));return console.debug(`Found ${a.length} images for query: ${e}`),a}catch(n){throw console.error("Image search error:",n),n}}async function _2(e,t,n,i,o){try{console.debug("=== DEBUG: downloadAndSaveImage ==="),console.debug("Image result:",t),console.debug("Target folder:",n),console.debug("Filename prefix:",i),console.debug("Index:",o);let r=Date.now(),s=Math.random().toString(36).substring(2,8),a=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),l=w2(t.url)||"jpg",c=`${a}-${o}-${r}-${s}.${l}`,d=n?`${n}/${c}`:c;console.debug("Generated filename:",c),console.debug("File path:",d),console.debug("Extension:",l),console.debug("Starting download from URL:",t.url);let p=await(0,lh.requestUrl)({url:t.url,method:"GET"});if(p.status>=400)throw new Error(`HTTP error! status: ${p.status}`);let m=p.arrayBuffer;console.debug("Downloaded image size:",m.byteLength,"bytes"),console.debug("Buffer type:",m.constructor.name),console.debug("Saving to vault at path:",d),await e.vault.adapter.writeBinary(d,m),console.debug("Successfully saved to vault");let h={filename:c,filePath:d,url:t.url,title:t.title,size:m.byteLength,type:l};return console.debug("Download result:",h),console.debug("=== END DEBUG: downloadAndSaveImage ==="),h}catch(r){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",r),console.error("Image result that failed:",t),console.error("=== END DEBUG ERROR ==="),r}}function w2(e){try{let n=new URL(e).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var ch={};ae(ch,{declaration:()=>N2,execute:()=>I2,instruction:()=>R2});Ee();var zA=require("obsidian");var ic=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},b2=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},BA=e=>e instanceof Error?e.message:String(e),N2={name:"download_image",description:"Download a specific image from a URL to the vault.",parameters:{type:w.OBJECT,properties:{imageUrl:{type:w.STRING,description:"The URL of the image to download."},title:{type:w.STRING,description:"The title of the image for filename generation."},query:{type:w.STRING,description:"The original search query for filename context."},index:{type:w.NUMBER,description:"The index of the image in search results."},folder:{type:w.STRING,description:"Target folder path (optional)."}},required:["imageUrl","title","query"]}},R2="- download_image: Use this to download a specific image from a URL to the vault.",I2=async(e,t)=>{let n=me();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"download_image",filename:"Image Download",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=ic(e,"imageUrl"),o=ic(e,"title"),r=ic(e,"query"),s=b2(e,"index",1),a=ic(e,"folder");if(!i||!o||!r)return{error:"Missing required image download parameters"};try{let l=a;if(!l){let d=n.workspace.getActiveFile();d?l=d.parent?.path||"":l="assets"}l&&!await n.vault.adapter.exists(l)&&await n.vault.createFolder(l);let c=await M2(n,{url:i,title:o},l,r,s);return t.onSystem(`Downloaded image: ${c.filename}`,{name:"download_image",filename:c.filename,status:"success",downloadedImages:[c]}),c}catch(l){return console.error("Download image error:",l),t.onSystem("Error downloading image",{name:"download_image",filename:o,status:"error",error:BA(l)}),{error:BA(l)}}};async function M2(e,t,n,i,o){try{let r=Date.now(),s=Math.random().toString(36).substring(2,8),a=i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").substring(0,20),l=k2(t.url)||"jpg",c=`${a}-${o}-${r}-${s}.${l}`,d=n?`${n}/${c}`:c;console.debug("=== DEBUG: downloadAndSaveImage ==="),console.debug("Image URL:",t.url),console.debug("Target folder:",n),console.debug("Filename:",c),console.debug("File path:",d);let m=(await(0,zA.requestUrl)({url:t.url,method:"GET"})).arrayBuffer;console.debug("Downloaded image size:",m.byteLength,"bytes"),console.debug("Saving to vault at path:",d),await e.vault.adapter.writeBinary(d,m),console.debug("Successfully saved to vault");let h={filename:c,filePath:d,url:t.url,title:t.title,size:m.byteLength,type:l,targetFolder:n};return console.debug("Download result:",h),console.debug("=== END DEBUG: downloadAndSaveImage ==="),h}catch(r){throw console.error("=== DEBUG ERROR: downloadAndSaveImage ==="),console.error("Error details:",r),console.error("Image result that failed:",t),console.error("=== END DEBUG ERROR ==="),r}}function k2(e){try{let n=new URL(e).pathname,i=n.lastIndexOf(".");if(i>0){let o=n.substring(i+1).toLowerCase();return["jpg","jpeg","png","gif","webp","svg","bmp"].includes(o)?o:null}return null}catch{return null}}var fh={};ae(fh,{declaration:()=>U2,execute:()=>P2,instruction:()=>L2});Ee();mt();var D2=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},VA=e=>e instanceof Error?e.message:String(e),U2={name:"list_trash",description:"List the most recent files in the trash folder. Shows up to 100 files sorted by deletion time (most recent first).",parameters:{type:w.OBJECT,properties:{limit:{type:w.NUMBER,description:"Maximum number of files to show (default: 20, max: 100)."}}}},L2="- list_trash: Use this to list files in the trash folder. Shows recently deleted files that can be restored.",P2=(e,t)=>{let n=me();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"list_trash",filename:"Trash",error:"Obsidian vault not available"}),Promise.resolve({error:"Obsidian vault not available"});let i=D2(e,"limit",20),o=Math.min(Math.max(1,Math.floor(i)||20),100);try{t.onSystem("Scanning trash folder...",{name:"list_trash",filename:"Trash",status:"pending"});let a=`${Qe()?.chatHistoryFolder||"chat-history"}/trash`;if(!n.vault.getAbstractFileByPath(a))return t.onSystem("Trash folder is empty or does not exist",{name:"list_trash",filename:"Trash",status:"success",files:[]}),Promise.resolve({files:[],total:0,message:"Trash folder is empty"});let c=n.vault.getMarkdownFiles().filter(h=>h.path.startsWith(a+"/")).map(h=>({path:h.path,name:h.name,originalName:F2(h.name),trashTimestamp:$A(h.name),deletionDate:O2($A(h.name)),size:h.stat.size,mtime:h.stat.mtime})).filter(h=>h.trashTimestamp!==null).sort((h,g)=>{let T=h.deletionDate?.getTime()||0;return(g.deletionDate?.getTime()||0)-T}),d=c.length,m=c.slice(0,o).map(h=>({trashPath:h.path,originalName:h.originalName,trashFilename:h.name,deletionDate:h.deletionDate?.toISOString()||"",formattedDeletionDate:h.deletionDate?.toLocaleString()||"",size:h.size,canRestore:!0}));return t.onSystem(`Found ${d} files in trash${d>o?` (showing ${o} most recent)`:""}`,{name:"list_trash",filename:"Trash",status:"success",files:m.map(h=>`${h.originalName} (${h.formattedDeletionDate||"unknown date"})`),totalItems:d,shownItems:m.length}),Promise.resolve({files:m,total:d,shown:m.length,trashFolderPath:a})}catch(r){return console.error("List trash error:",r),t.onSystem("Error listing trash files",{name:"list_trash",filename:"Trash",status:"error",error:VA(r)}),Promise.resolve({error:VA(r)})}};function F2(e){let t=e.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(t)return t[1];let n=e.match(/^\d+-(.+)$/);return n?n[1]:e}function $A(e){let t=e.match(/^(\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z)-/);if(t)return t[1].replace(/-/g,":").replace("T","T").replace(/(\d{4}-\d{2}-\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})Z/,"$1T$2:$3:$4.$5Z");let n=e.match(/^(\d{13})-/);return n?n[1]:null}function O2(e){if(!e)return null;try{return e.includes("T")&&e.includes("Z")?new Date(e):/^\d{13}$/.test(e)?new Date(parseInt(e)):null}catch{return null}}var dh={};ae(dh,{declaration:()=>H2,execute:()=>q2,instruction:()=>G2});Ee();mt();var YA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},JA=e=>e instanceof Error?e.message:String(e),H2={name:"restore_from_trash",description:"Restore a file from the trash folder to its original location or a specified location.",parameters:{type:w.OBJECT,properties:{trash_filename:{type:w.STRING,description:'The filename in trash (as shown by list_trash, e.g., "2024-01-25T15-30-45-123Z-my-note.md")'},target_path:{type:w.STRING,description:"Optional: Target path where to restore the file. If not provided, attempts to restore to original location."}},required:["trash_filename"]}},G2="- restore_from_trash: Use this to restore a file from trash. Provide the trash filename from list_trash. Optionally specify where to restore it.",q2=async(e,t)=>{let n=me();if(!n||!n.vault)return t.onSystem("Error: Not running in Obsidian or vault unavailable",{name:"restore_from_trash",filename:"Trash",error:"Obsidian vault not available"}),{error:"Obsidian vault not available"};let i=YA(e,"trash_filename"),o=YA(e,"target_path");if(!i)return t.onSystem("Error: trash_filename is required",{name:"restore_from_trash",filename:"Trash",status:"error",error:"Missing required parameter: trash_filename"}),{error:"trash_filename is required"};try{t.onSystem(`Restoring ${i}...`,{name:"restore_from_trash",filename:i,status:"pending"});let a=`${Qe()?.chatHistoryFolder||"chat-history"}/trash`,l=i.includes("/")?i:`${a}/${i}`,c=n.vault.getAbstractFileByPath(l);if(!c)return t.onSystem(`File not found in trash: ${i}`,{name:"restore_from_trash",filename:i,status:"error",error:"File not found in trash"}),{error:`File not found in trash: ${i}`};let d=B2(c.name),p=o;if(!p&&(p=d,d.includes("/"))){let g=Ve(d);n.vault.getAbstractFileByPath(g)||await n.vault.createFolder(g)}if(n.vault.getAbstractFileByPath(p))return t.onSystem(`Target file already exists: ${p}`,{name:"restore_from_trash",filename:i,status:"error",error:"Target file already exists",targetPath:p}),{error:`Target file already exists: ${p}. Please specify a different target_path or delete the existing file first.`,targetPath:p,trashPath:l};await n.fileManager.renameFile(c,p),await Ze(p),t.onSystem(`Successfully restored ${d} to ${p}`,{name:"restore_from_trash",filename:d,status:"success",originalPath:l,restoredPath:p});let h=Ve(p);return t.onFileState(h,d),{success:!0,originalFilename:d,trashPath:l,restoredPath:p,message:`Successfully restored ${d} to ${p}`}}catch(r){return console.error("Restore from trash error:",r),t.onSystem("Error restoring file from trash",{name:"restore_from_trash",filename:i,status:"error",error:JA(r)}),{error:JA(r)}}};function B2(e){let t=e.match(/^\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2}-\d{3}Z-(.+)$/);if(t)return t[1];let n=e.match(/^\d+-(.+)$/);return n?n[1]:e}var ph={};ae(ph,{declaration:()=>$2,execute:()=>J2,instruction:()=>Y2});Ee();var z2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},V2=e=>e instanceof Error?e.message:String(e),$2={name:"get_obsidian_commands",description:"Lists all available Obsidian commands that can be executed.",parameters:{type:w.OBJECT,properties:{filter:{type:w.STRING,description:"Optional text filter to search for specific commands by name or description."}}}},Y2="- get_obsidian_commands: Use this to list all available Obsidian commands. You can optionally filter commands by name or description.",J2=(e,t)=>{let n=z2(e,"filter");try{let i=me();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands,r=Object.entries(o).map(([l,c])=>({id:l,name:c.name,description:c.editor?.name||c.name})),s=r;if(n){let l=n.toLowerCase();s=r.filter(c=>c.name.toLowerCase().includes(l)||c.description.toLowerCase().includes(l)||c.id.toLowerCase().includes(l))}s.sort((l,c)=>l.name.localeCompare(c.name));let a=s.map(l=>`${l.name} (${l.id})`);return t.onSystem(`Obsidian commands (${s.length} total)`,{name:"get_obsidian_commands",filename:"Command Registry",files:a}),Promise.resolve({commands:s,total:r.length,filtered:s.length,filter:n||null})}catch(i){throw console.error("Get Obsidian commands error:",i),new Error(`Failed to get Obsidian commands: ${V2(i)}`)}};var mh={};ae(mh,{declaration:()=>Q2,execute:()=>W2,instruction:()=>Z2});Ee();var K2=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},X2=e=>e instanceof Error?e.message:String(e),Q2={name:"run_obsidian_command",description:"Executes an Obsidian command by its command ID.",parameters:{type:w.OBJECT,properties:{commandId:{type:w.STRING,description:'The command ID to execute (e.g., "editor:toggle-bold" or "workspace:open-command-palette").'}},required:["commandId"]}},Z2="- run_obsidian_command: Use this to execute an Obsidian command by its command ID. Use get_obsidian_commands first to find available commands and their IDs.",W2=async(e,t)=>{let n=K2(e,"commandId");if(!n)throw new Error("Missing commandId");try{let i=me();if(!i)throw new Error("Not running in Obsidian environment");let o=i.commands.commands[n];if(!o)throw new Error(`Command not found: ${n}`);await i.commands.executeCommandById(n);let r=o.name||n;return t.onSystem(`Executed: ${r}`,{name:"run_obsidian_command",filename:"Command Execution",status:"success"}),{success:!0,commandId:n,commandName:r,executedAt:new Date().toISOString()}}catch(i){console.error("Run Obsidian command error:",i);let o=X2(i);throw t.onSystem(`Command execution failed: ${o}`,{name:"run_obsidian_command",filename:"Command Execution",status:"error",error:o}),new Error(`Failed to execute command ${n}: ${o}`)}};var rc={};ae(rc,{declaration:()=>j2,execute:()=>nU,instruction:()=>yh});Ee();mt();Me();var XA=require("obsidian"),oc=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},hh=(e,t,n)=>{let i=e[t];return typeof i=="number"?i:n},j2={name:"context",description:"Provides comprehensive context about the current Obsidian environment including current note, folder, opened files, chat history, recent files, directory structure, and most used tags.",parameters:{type:w.OBJECT,properties:{includeHistory:{type:w.BOOLEAN,description:"Include chat history in context (default: true)"},historyLimit:{type:w.NUMBER,description:"Number of recent chat messages to include (default: 10)"},includeRecentFiles:{type:w.BOOLEAN,description:"Include recently edited files (default: true)"},recentFilesLimit:{type:w.NUMBER,description:"Number of recent files to include (default: 15)"},includeDirectoryStructure:{type:w.BOOLEAN,description:"Include directory structure up to 2 levels (default: true)"},includeTags:{type:w.BOOLEAN,description:"Include most used tags from vault (default: true)"},tagsLimit:{type:w.NUMBER,description:"Number of most used tags to include (default: 30)"}}}},yh="- context: Use this to get comprehensive context about the current Obsidian environment including current note, folder, opened files, chat history, recent files, directory structure, and most used tags.",gh=e=>e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`,KA=e=>new Date(e).toLocaleString(),eU=(e=30)=>{let t=me();if(!t?.vault)return[];let n=new Map;return t.vault.getMarkdownFiles().forEach(o=>{let r=t.metadataCache.getFileCache(o);if(r){let s=(0,XA.getAllTags)(r);s&&s.forEach(a=>{n.set(a,(n.get(a)||0)+1)})}}),Array.from(n.entries()).map(([o,r])=>({tag:o,count:r})).sort((o,r)=>r.count-o.count).slice(0,e)},tU=(e,t=2)=>{let n=[],i=new Set;return e.filter(o=>o!=="").sort().forEach(o=>{o.split("/").length<=t&&(i.has(o)||(n.push(`\u{1F4C1} ${o}/`),i.add(o)))}),n},nU=async(e,t)=>{let n=me();if(!n||!n.workspace)return t.onSystem("Error: Not running in Obsidian or workspace unavailable",{name:"context",filename:"Context",error:"Obsidian workspace not available"}),Promise.resolve({error:"Obsidian workspace not available"});try{let i=oc(e,"includeHistory")!=="false",o=hh(e,"historyLimit",10)??10,r=oc(e,"includeRecentFiles")!=="false",s=hh(e,"recentFilesLimit",15)??15,a=oc(e,"includeDirectoryStructure")!=="false",l=oc(e,"includeTags")!=="false",c=hh(e,"tagsLimit",30)??30,d=n.workspace,p=Qe(),m=d.getActiveFile(),h=m?.path||p?.currentNote||null,g=m?.parent?.path||p?.currentFolder||"/",T=d.getLastOpenFiles(),y=d.getLeavesOfType("markdown").map(B=>B.view?.file?.path).filter(B=>!!B).filter((B,rt,si)=>si.indexOf(B)===rt),v=[];r&&(v=(await Ks({limit:s,sortBy:"mtime",sortOrder:"desc"})).files.map(rt=>({path:rt.path,name:rt.name,modified:KA(rt.mtime),size:gh(rt.size)})));let S=[];i&&(S=Nn().slice(-o));let A=await vr(),_=A.slice(0,5).map(B=>({key:B.key,summary:B.summary,archivedAt:KA(B.archivedAt)})),R=[];if(a){let B=Wl();R=tU(B,2)}let C=[];l&&(C=eU(c));let M=await Ks({limit:1e3}),I=M.total,N=M.files.reduce((B,rt)=>B+rt.size,0),G={currentNote:h,currentFolder:g,workspace:{openedFiles:y,lastOpenFiles:T.slice(0,10),totalOpenFiles:y.length},recentFiles:v.slice(0,s),chatHistory:{messages:S,totalMessages:S.length},archivedConversations:_,totalArchived:A.length,directoryStructure:R,tags:{mostUsed:C,totalTags:C.length},vault:{totalFiles:I,totalSize:gh(N),totalFolders:R.length}},fe=["**\u{1F4CD} Current Location**",h?`\u{1F4C4} Note: \`${h}\``:"\u{1F4C4} No active note",`\u{1F4C1} Folder: \`${g}\``,"","**\u{1F5A5}\uFE0F Workspace State**",`\u{1F4C2} Open Files: ${y.length}`,...y.slice(0,5).map(B=>`  \u2022 \`${B}\``),y.length>5?`  \u2022 ... and ${y.length-5} more`:"","","**\u23F0 Recently Edited Files**",...v.slice(0,8).map(B=>`  \u2022 \`${B.name}\` - ${B.modified} (${B.size})`),v.length>8?`  \u2022 ... and ${v.length-8} more`:"","","**\u{1F4AC} Chat Activity**",`\u{1F4CA} Recent messages: ${S.length}`,...S.slice(0,3).map(B=>`  \u2022 "${B.substring(0,60)}${B.length>60?"...":""}"`),S.length>3?`  \u2022 ... and ${S.length-3} more`:"",`\u{1F4E6} Archived conversations: ${A.length}`,"","**\u{1F4C2} Directory Structure (2 levels)**",...R.slice(0,15),R.length>15?`  \u2022 ... and ${R.length-15} more folders`:"","","**\u{1F3F7}\uFE0F Most Used Tags**",`\u{1F4CA} Total tags found: ${C.length}`,...C.slice(0,10).map(B=>`  \u2022 ${B.tag} (${B.count} uses)`),C.length>10?`  \u2022 ... and ${C.length-10} more tags`:"","","**\u{1F4CA} Vault Statistics**",`\u{1F4C4} Total files: ${I}`,`\u{1F4C1} Total folders: ${R.length}`,`\u{1F4BE} Total size: ${gh(N)}`].join(`
`);return t.onSystem("Context information retrieved",{name:"context",filename:"Environment Context",status:"success",displayFormat:fe,dropdown:!0,contextInfo:G}),Promise.resolve(G)}catch(i){console.error("Context tool error:",i);let o=i instanceof Error?i.message:String(i);return t.onSystem("Error retrieving context information",{name:"context",filename:"Context",status:"error",error:o}),Promise.resolve({error:o})}};var sc=e=>typeof e=="object"&&e!==null,QA=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},ZA={list_directory:Ou,list_vault_files:Hu,get_folder_tree:Gu,dirlist:qu,read_file:Bu,create_file:zu,create_directory:Wm,delete_file:jm,update_file:Vu,edit_file:$u,rename_file:Yu,move_file:Ju,search_keyword:Ku,search_regexp:Xu,search_and_replace_regex_in_file:Zu,search_and_replace_regex_global:Wu,topic_switch:ju,internet_search:ec,generate_image_from_context:oh,end_conversation:tc,reveal_active_pane:rh,open_folder_in_system:sh,image_search:nc,download_image:ch,list_trash:fh,restore_from_trash:dh,get_obsidian_commands:ph,run_obsidian_command:mh,context:rc},mo=Object.values(ZA).map(e=>e.declaration),ho=async(e,t,n,i,o)=>{let r=performance.now(),s=ZA[e];if(!s){let c={toolName:e,content:JSON.stringify(t,null,2),contentSize:JSON.stringify(t).length,apiCall:"executeCommand"};throw n.onLog(`Tool not found: ${e}`,"error",void 0,c),new Error(`Command ${e} not found`)}let a=i||`tool-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;i||n.onSystem(`${e.replace(/_/g," ").toUpperCase()}...`,{id:a,name:e,filename:QA(t,"filename")||(e==="internet_search"?"Web":"Registry"),status:"pending"});let l={...n,onSystem:(c,d)=>{n.onSystem(c,{...d,id:a})}};try{let c=o?{...t,currentFolder:o}:t,d=await s.execute(c,l),p=iU(e,d,l),m=Math.round(performance.now()-r);return n.onLog(`Executed ${e} in ${m}ms`,"action",m),p}catch(c){console.error("Command execution error:",c);let d=Math.round(performance.now()-r),p=c instanceof Error?c.message:String(c),m=c instanceof Error?c.stack:void 0,h={toolName:e,content:JSON.stringify(t,null,2),contentSize:JSON.stringify(t).length,stack:m,apiCall:"tool_execution"};throw n.onLog(`Error in ${e}: ${p}`,"error",d,h),l.onSystem(`Error: ${p}`,{name:e,filename:QA(t,"filename")||(e==="internet_search"?"Web":"unknown"),error:p,status:"error"}),c}};function iU(e,t,n){if(sc(t)&&Array.isArray(t.files)){let o=t.files.length;if(o>100){let r=t.files.slice(0,100),s=Math.ceil(o/100),a=1,l=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} items (Page ${a} of ${s}).

To see more results, consider:
- Using list_vault_files with pagination (limit/offset parameters)
- Using search_keyword or search_regexp for targeted searches
- Using get_folder_tree for folder structure only
- Adding a filter parameter to narrow results

Current results show first ${100} items only.`;return console.debug(`Tool result truncated: ${e}, ${100}/${o} items, page ${a}/${s}`),n.onSystem(`Registry Scanned (TRUNCATED: ${100}/${o} items)`,{name:e,filename:"Vault Root",files:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s}),{...t,files:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s,truncationNotice:l}}}if(sc(t)&&Array.isArray(t.folders)){let o=t.folders.length;if(o>100){let r=t.folders.slice(0,100),s=Math.ceil(o/100),a=1,l=`

=== RESULT TRUNCATED ===
Showing ${100} of ${o} folders (Page ${a} of ${s}).

For large folder structures, consider:
- Using search_keyword to find specific folders
- Using list_vault_files with filter parameter
- Asking for a specific subfolder path

Current results show first ${100} folders only.`;return console.debug(`Folder structure truncated: ${e}, ${100}/${o} folders, page ${a}/${s}`),n.onSystem(`Folder Structure Scanned (TRUNCATED: ${100}/${o} folders)`,{name:e,filename:"Folder Tree",files:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s}),{...t,folders:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s,truncationNotice:l}}}if(sc(t)&&Array.isArray(t.directories)){let o=(a,l=0)=>{let c=[],d=l;return a.forEach(p=>{if(c.push({path:p.path,type:"directory",hasChildren:p.children&&p.children.length>0}),d++,p.children&&p.children.length>0){let m=o(p.children,d);c=c.concat(m.items),d=m.total}}),{items:c,total:d}},{items:r,total:s}=o(t.directories);if(s>100){let a=r.slice(0,100),l=Math.ceil(s/100),c=1,d=`

=== DIRECTORY LIST TRUNCATED ===
Showing ${100} of ${s} directories (Page ${c} of ${l}).

For large directory structures, consider:
- Using search_keyword to find specific directories
- Using list_vault_files with filter parameter
- Asking for a specific directory path
- Using get_folder_tree for a simple folder list

Current results show first ${100} directories only.`;return console.debug(`Directory list truncated: ${e}, ${100}/${s} directories, page ${c}/${l}`),n.onSystem(`Directory Structure Scanned (TRUNCATED: ${100}/${s} directories)`,{name:e,filename:"Directory List",files:a.map(p=>p.path),truncated:!0,totalItems:s,shownItems:100,currentPage:c,totalPages:l,directoryInfo:a}),{...t,directories:a,truncated:!0,totalItems:s,shownItems:100,currentPage:c,totalPages:l,truncationNotice:d}}}if(sc(t)&&Array.isArray(t.results)){let o=t.results.length;if(o>100){let r=t.results.slice(0,100),s=Math.ceil(o/100),a=1,l=`

=== SEARCH RESULTS TRUNCATED ===
Showing ${100} of ${o} results (Page ${a} of ${s}).

For more results, consider:
- Refining your search terms
- Using pagination parameters if available
- Adding filters to narrow the search

Current results show first ${100} matches only.`;return console.debug(`Search results truncated: ${e}, ${100}/${o} results, page ${a}/${s}`),{...t,results:r,truncated:!0,totalItems:o,shownItems:100,currentPage:a,totalPages:s,truncationNotice:l}}}if(typeof t=="string"&&t.length>5e4){let o=t.substring(0,5e4),r=`

=== CONTENT TRUNCATED ===
Showing first 50,000 characters of ${t.length} total characters.

For large files, consider:
- Reading specific sections with line numbers
- Searching for specific content within the file
- Using more targeted read operations

Current content shows first 50,000 characters only.`;return console.debug(`Content truncated: ${e}, 50000/${t.length} chars`),o+r}return t}async function ac(e,t={maxRetries:2,delay:1e3}){let n;for(let i=0;i<=t.maxRetries;i++)try{return await e()}catch(o){if(n=o instanceof Error?o:new Error(String(o)),i===t.maxRetries)throw new Error("could not recover!");t.onRetry&&t.onRetry(i+1,n),await new Promise(r=>setTimeout(r,t.delay))}throw n}var Mr=class{constructor(t=2){this.maxRetries=t;this.attempts=0}get retryCount(){return this.attempts}get canRetry(){return this.attempts<this.maxRetries}increment(){this.attempts++}reset(){this.attempts=0}get shouldBail(){return this.attempts>=this.maxRetries}};var ni=(e,t)=>{let n=e[t];return typeof n=="string"?n:void 0},vh=e=>typeof e=="object"&&e!==null,ot=e=>e instanceof Error?e.message:String(e),WA=e=>{if(e instanceof Error)return e.stack},lc=class{constructor(t){this.callbacks=t;this.session=null;this.sessionPromise=null;this.inputAudioContext=null;this.outputAudioContext=null;this.nextStartTime=0;this.sources=new Set;this.inputWorkletNode=null;this.inputWorkletGain=null;this.inputStream=null;this.currentInputText="";this.currentOutputText="";this.currentFolder="/";this.currentNote=null;this.retryCounter=new Mr(2);this.storedApiKey="";this.storedSettings=null;this.hasArchived=!1}async getSession(){if(this.session)return this.session;if(this.sessionPromise===null)throw new Error("Session not initialized");return this.session=await this.sessionPromise,this.session}async start(t,n,i){this.storedApiKey=t,this.storedSettings=n,this.storedInitialState=i,this.retryCounter.reset(),await ac(async()=>{this.retryCounter.increment(),await this.performStart(t,n,i)},{maxRetries:2,delay:1e3,onRetry:(o,r)=>{this.callbacks.onLog(`Connection failed, retrying attempt ${o}/2...`,"info"),this.callbacks.onSystemMessage(`Connection failed, retrying attempt ${o}/2...`)}})}async performStart(t,n,i){try{i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onStatusChange("CONNECTING"),this.callbacks.onLog("Negotiating Uplink...","info");let o=new cn({apiKey:t}),r=window.AudioContext||window.webkitAudioContext;if(!r)throw new Error("AudioContext is not supported in this environment");this.inputAudioContext=new r({sampleRate:16e3}),this.outputAudioContext=new r({sampleRate:24e3}),this.nextStartTime=0;let s=await navigator.mediaDevices.getUserMedia({audio:!0});this.inputStream=s;let a=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`,l=`${n.systemInstruction}
${a}

${n.customContext}`.trim();console.debug(`System instruction: ${l.length} chars, folder: ${this.currentFolder}, note: ${this.currentNote}`),this.callbacks.onLog(`System instruction size: ${l.length} chars`,"info"),console.debug(`Session config: model=gemini-2.5-flash-native-audio-preview-12-2025, tools=${mo.length}, voice=${n.voiceName}`),this.callbacks.onLog("Initializing Gemini live connection...","info"),this.sessionPromise=o.live.connect({model:"gemini-2.5-flash-native-audio-preview-12-2025",config:{responseModalities:[Er.AUDIO],systemInstruction:l,inputAudioTranscription:{},outputAudioTranscription:{},speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:n.voiceName}}},tools:[{functionDeclarations:mo}]},callbacks:{onopen:()=>{this.callbacks.onStatusChange("CONNECTED"),this.callbacks.onLog("Uplink synchronized. Voice channel active.","info"),this.sessionPromise!==null&&this.startMicStreaming(s)},onmessage:c=>{this.handleServerMessage(c)},onerror:c=>{console.error(`Gemini connection error: ${ot(c)}`),this.callbacks.onLog(`Connection error: ${ot(c)}`,"error"),this.callbacks.onStatusChange("ERROR"),this.callbacks.onSystemMessage(`Connection error: ${ot(c)}`)},onclose:c=>{let d=c.reason||String(c.code)||"Connection dropped";if(c.code!==1e3&&c.code!==1001){console.error(`Voice connection closed: code=${c.code}, reason=${d}`);let m={toolName:"GeminiVoiceAssistant",apiCall:"live.connect",content:`Code: ${c.code}, Reason: ${d}`,timestamp:new Date().toISOString()};this.callbacks.onLog(`CONNECTION DROPPED: ${d}`,"error",void 0,m),this.callbacks.onSystemMessage(`CONNECTION DROPPED: ${d}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:d})}else this.callbacks.onLog(`Uplink Closed: ${d}`,"info");this.stop()}}}),this.session=await this.sessionPromise}catch(o){this.callbacks.onStatusChange("ERROR"),console.error(`Voice interface error: ${ot(o)}`);let r={toolName:"GeminiVoiceAssistant",apiCall:"start",stack:WA(o),content:ot(o),requestSize:o.requestSize,responseSize:o.responseSize,platform:{isMobileApp:kr.Platform.isMobileApp,isDesktopApp:kr.Platform.isDesktopApp,isMacOS:kr.Platform.isMacOS,isWin:kr.Platform.isWin,isLinux:kr.Platform.isLinux},audioContextState:this.inputAudioContext?.state,timestamp:new Date().toISOString()};throw this.callbacks.onLog(`Link Initialization Failed: ${ot(o)}`,"error",void 0,r),this.callbacks.onSystemMessage(`Error: ${ot(o)}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:ot(o)}),o}}async startMicStreaming(t){if(!this.inputAudioContext)return;let n=await this.getSession(),i=this.inputAudioContext.createMediaStreamSource(t),o=`
      class HermesAudioProcessor extends AudioWorkletProcessor {
        process(inputs) {
          const input = inputs[0];
          if (input && input[0]) {
            this.port.postMessage(input[0]);
          }
          return true;
        }
      }
      registerProcessor('hermes-audio-processor', HermesAudioProcessor);
    `,r=new Blob([o],{type:"application/javascript"}),s=URL.createObjectURL(r);try{await this.inputAudioContext.audioWorklet.addModule(s)}finally{URL.revokeObjectURL(s)}let a=new AudioWorkletNode(this.inputAudioContext,"hermes-audio-processor");this.inputWorkletNode=a;let l=this.inputAudioContext.createGain();l.gain.value=0,this.inputWorkletGain=l,a.port.onmessage=c=>{let d=c.data;if(!d||d.length===0)return;let p=0;for(let x=0;x<d.length;x++)p+=d[x]*d[x];let m=Math.sqrt(p/d.length);this.callbacks.onVolume(m);let h=MA(d),g=Dm(new Uint8Array(h.buffer)),T=g.length;T>5e4&&console.debug(`Audio streaming: ${T} bytes, session active`);try{n.sendRealtimeInput({media:{data:g,mimeType:"audio/pcm;rate=16000"}})}catch(x){if(console.error(`Audio streaming error: ${ot(x)}, data size: ${g.length}`),ot(x).includes("CLOSING")||ot(x).includes("CLOSED")){console.debug("Session is closing, stopping audio streaming");return}}},i.connect(a),a.connect(l),l.connect(this.inputAudioContext.destination)}async handleServerMessage(t){let n=t.serverContent;if(n?.usageMetadata&&this.callbacks.onUsageUpdate(n.usageMetadata),t.serverContent?.inputTranscription?.text&&(this.currentInputText+=t.serverContent.inputTranscription.text,this.callbacks.onTranscription("user",this.currentInputText,!1)),t.serverContent?.outputTranscription&&(this.currentOutputText+=t.serverContent.outputTranscription.text,this.callbacks.onTranscription("model",this.currentOutputText,!1)),t.serverContent?.turnComplete&&(this.currentInputText&&(this.callbacks.onTranscription("user",this.currentInputText,!0),this.currentInputText=""),this.currentOutputText&&(this.callbacks.onTranscription("model",this.currentOutputText,!0),this.currentOutputText="")),t.toolCall)for(let o of t.toolCall.functionCalls){if(o.name==="end_conversation"){console.debug("Processing end_conversation tool call");try{let p=await ho(o.name,o.args,{onLog:(m,h,g)=>this.callbacks.onLog(m,h,g),onSystem:(m,h)=>this.callbacks.onSystemMessage(m,h),onFileState:(m,h)=>{this.currentFolder=m,this.currentNote=Array.isArray(h)?h[h.length-1]:h,this.callbacks.onFileStateChange(m,h)},onStopSession:()=>{this.stop()},onArchiveConversation:this.callbacks.onArchiveConversation},void 0,this.currentFolder);console.debug("end_conversation executed successfully, session ending");continue}catch(p){console.error(`end_conversation failed: ${ot(p)}`),this.stop();continue}}let r=`tool-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,s=vh(o.args)?o.args:{},l={generate_image_from_context:"Image Generation",create_file:"File Creation",delete_file:"File Deletion",edit_file:"File Editing",update_file:"File Update",move_file:"File Move",rename_file:"File Rename",create_directory:"Directory Creation",list_directory:"Vault Scan",list_vault_files:"File Explorer",dirlist:"Directory Structure",get_folder_tree:"Folder Tree",read_file:"File Reading",search_keyword:"Keyword Search",search_regexp:"Pattern Search",search_replace_file:"File Search & Replace",search_replace_global:"Global Search & Replace",internet_search:"Web Search",reveal_active_pane:"Active Pane Info",open_folder_in_system:"System File Browser",end_conversation:"Session End",topic_switch:"Topic Switch"}[o.name]||o.name.replace(/_/g," ").toUpperCase(),c=!1,d=ni(s,"filename")||(o.name==="internet_search"?"Web":"Registry");this.callbacks.onSystemMessage(`${l}...`,{id:r,name:o.name,filename:d,status:"pending"});try{let p=await ho(o.name,s,{onLog:(x,y,v)=>this.callbacks.onLog(x,y,v),onSystem:(x,y)=>{this.callbacks.onSystemMessage(x,y),y?.status==="success"&&(c=!0)},onFileState:(x,y)=>{this.currentFolder=x,this.currentNote=Array.isArray(y)?y[y.length-1]:y,this.callbacks.onFileStateChange(x,y)},onStopSession:()=>{this.stop()},onArchiveConversation:this.callbacks.onArchiveConversation},r,this.currentFolder),m=await this.getSession(),h=JSON.stringify({result:p});console.debug(`Tool response: ${o.name}, size: ${h.length} chars`);let g=vh(p)?p:void 0,T=g&&typeof g.text=="string"?g.text:void 0;if(!c){let x="";if(o.name==="create_file"||o.name==="create_directory"){let y=ni(s,"filename")||ni(s,"path");if(y){let v=y.lastIndexOf("/");x=`Created in: ${v===-1?"/":y.substring(0,v+1)}`}}else if(o.name==="move_file"||o.name==="rename_file"){let y=ni(s,"sourcePath")||ni(s,"oldPath"),v=ni(s,"targetPath")||ni(s,"newPath");y&&v&&(x=`Moved from: ${y} to: ${v}`)}else if(o.name==="update_file"||o.name==="edit_file"){let y=ni(s,"filename");y&&(x=`Updated: ${y}`)}else if(o.name==="delete_file"){let y=ni(s,"filename");y&&(x=`Deleted: ${y}`)}else T?x=T:typeof p=="string"&&(x=p);if(x){let y=Array.isArray(g?.groundingChunks)?g?.groundingChunks:[],v=Array.isArray(g?.files)?g?.files.filter(R=>typeof R=="string"):void 0,S=Array.isArray(g?.directories)?g?.directories.map(R=>vh(R)&&typeof R.path=="string"?R.path:null).filter(R=>Boolean(R)):void 0,A=Array.isArray(g?.folders)?g?.folders.filter(R=>typeof R=="string"):void 0,_=Array.isArray(g?.directoryInfo)?g?.directoryInfo:void 0;this.callbacks.onSystemMessage(`${l} Complete`,{id:r,name:o.name,filename:d,status:"success",newContent:x,groundingChunks:y,files:v||S||A,directoryInfo:_})}}try{(await this.getSession()).sendToolResponse({functionResponses:{id:o.id,name:o.name,response:{result:p}}})}catch(x){console.error(`Failed to send tool response: ${ot(x)}`)}}catch(p){let m=ot(p);console.error(`Voice interface tool error: ${o.name} - ${m}`);let h={toolName:o.name,content:JSON.stringify(s,null,2),contentSize:JSON.stringify(s).length,stack:WA(p),apiCall:"executeCommand",timestamp:new Date().toISOString(),currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${o.name}: ${m}`,"error",void 0,h),this.callbacks.onSystemMessage(`Error in ${o.name}: ${m}`,{id:r,name:o.name,filename:d,status:"error",error:m});try{let g=await this.getSession();console.debug(`Tool error response: ${o.name} - ${m}`),g.sendToolResponse({functionResponses:{id:o.id,name:o.name,response:{error:m}}})}catch(g){console.error(`Failed to send tool error response: ${ot(g)}`)}}}let i=t.serverContent?.modelTurn?.parts?.[0]?.inlineData?.data;if(i&&this.outputAudioContext){let o=IA(RA(i),this.outputAudioContext,24e3,1);this.nextStartTime=Math.max(this.nextStartTime,this.outputAudioContext.currentTime);let r=this.outputAudioContext.createBufferSource();r.buffer=o,r.connect(this.outputAudioContext.destination),r.onended=()=>this.sources.delete(r),r.start(this.nextStartTime),this.nextStartTime+=o.duration,this.sources.add(r)}t.serverContent?.interrupted&&(this.sources.forEach(o=>{try{o.stop()}catch(r){console.debug("Audio source stop failed",r)}}),this.sources.clear(),this.nextStartTime=0,this.callbacks.onInterrupted())}stop(){if(this.callbacks.onArchiveConversation&&!this.hasArchived&&(this.hasArchived=!0,console.warn("[HISTORY] EVENT: end_conversation (voiceInterface.stop)"),this.callbacks.onArchiveConversation().catch(t=>{console.warn("[HISTORY] Archive failed:",t)})),this.session){try{this.session.close()}catch(t){console.debug("Session close failed",t)}this.session=null}this.sessionPromise=null,this.inputWorkletNode&&(this.inputWorkletNode.disconnect(),this.inputWorkletNode=null),this.inputWorkletGain&&(this.inputWorkletGain.disconnect(),this.inputWorkletGain=null),this.inputStream&&(this.inputStream.getTracks().forEach(t=>t.stop()),this.inputStream=null),this.inputAudioContext&&(this.inputAudioContext.close(),this.inputAudioContext=null),this.outputAudioContext&&(this.outputAudioContext.close(),this.outputAudioContext=null),this.sources.forEach(t=>{try{t.stop()}catch(n){console.debug("Output source stop failed",n)}}),this.sources.clear(),this.currentInputText="",this.currentOutputText="",this.callbacks.onStatusChange("DISCONNECTED"),this.callbacks.onVolume(0)}sendText(t){if(this.sessionPromise===null)return;let n=Dm(new TextEncoder().encode(t));console.debug(`Text input: ${t.length} chars, encoded: ${n.length} bytes`),this.callbacks.onLog(`Sending text input: ${t.length} chars`,"info"),(async()=>{try{(await this.getSession()).sendRealtimeInput({media:{data:n,mimeType:"text/plain"}}),console.debug("Text input sent successfully")}catch(i){console.error(`Text input error: ${ot(i)}, text length: ${t.length}`),this.callbacks.onLog(`Text input failed: ${ot(i)}`,"error")}})()}};var ia=class{constructor(t){this.callbacks=t;this.ai=null;this.chatHistory=[];this.currentFolder="/";this.currentNote=null;this.systemInstruction="";this.model="gemini-2.0-flash";this.retryCounter=new Mr(2)}initialize(t,n,i){i&&(this.currentFolder=i.folder,this.currentNote=i.note),this.callbacks.onLog("Initializing text interface...","info"),this.ai=new cn({apiKey:t});let o=`
CURRENT_CONTEXT:
Current Folder Path: ${this.currentFolder}
Current Note Name: ${this.currentNote||"No note currently selected"}
`;this.systemInstruction=`${n.systemInstruction}
${o}

${n.customContext}`.trim(),this.callbacks.onLog("Text interface ready.","info")}async sendMessage(t){if(!this.ai){this.callbacks.onLog("Text interface not initialized","error");return}this.chatHistory.push({role:"user",parts:[{text:t}]}),this.callbacks.onTranscription("user",t,!0),await ac(async()=>{this.retryCounter.increment(),await this.processConversation()},{maxRetries:2,delay:1e3,onRetry:(n,i)=>{this.callbacks.onLog(`Text API failed, retrying attempt ${n}/2...`,"info"),this.callbacks.onSystemMessage(`Text API failed, retrying attempt ${n}/2...`)}})}async processConversation(){if(!this.ai)return;this.callbacks.onTranscription("model","...",!1);let t=await this.ai.models.generateContent({model:this.model,contents:this.chatHistory,config:{systemInstruction:this.systemInstruction,tools:[{functionDeclarations:mo}]}});t.usageMetadata&&this.callbacks.onUsageUpdate({promptTokenCount:t.usageMetadata.promptTokenCount,candidatesTokenCount:t.usageMetadata.candidatesTokenCount,totalTokenCount:t.usageMetadata.totalTokenCount});let n=t.candidates?.[0];if(!n?.content){this.callbacks.onTranscription("model","No response received.",!0);return}let i=n.content.parts?.filter(o=>!!o.functionCall);if(i&&i.length>0){this.chatHistory.push(n.content);let o=[];for(let r of i){let s=r.functionCall;try{let a=await ho(s.name,s.args,{onLog:(l,c,d)=>this.callbacks.onLog(l,c,d),onSystem:(l,c)=>this.callbacks.onSystemMessage(l,c),onFileState:(l,c)=>{this.currentFolder=l,this.currentNote=Array.isArray(c)?c[c.length-1]:c,this.callbacks.onFileStateChange(l,c)},onStopSession:()=>{this.callbacks.onLog("Conversation ended via tool call","info")},onArchiveConversation:this.callbacks.onArchiveConversation},this.currentFolder);o.push({functionResponse:{name:s.name,response:{result:a}}})}catch(a){let l=a instanceof Error?a.message:String(a),c=a instanceof Error?a.stack:void 0;console.error(`Text interface tool error: ${s.name} - ${l}`);let d={toolName:s.name,content:JSON.stringify(s.args,null,2),contentSize:JSON.stringify(s.args).length,stack:c,apiCall:"executeCommand",timestamp:new Date().toISOString(),model:this.model,currentFolder:this.currentFolder,currentNote:this.currentNote};this.callbacks.onLog(`Tool execution error in ${s.name}: ${l}`,"error",void 0,d),this.callbacks.onSystemMessage(`Error in ${s.name}: ${l}`,{id:"error-"+Date.now(),name:"error",filename:"",status:"error",error:l}),o.push({functionResponse:{name:s.name,response:{error:l}}})}}this.chatHistory.push({role:"user",parts:o}),await this.processConversation()}else{let r=n.content.parts?.filter(s=>s.text)?.map(s=>s.text).join("")||"";this.chatHistory.push(n.content),this.callbacks.onTranscription("model",r,!0)}}setApiKey(t){this.ai=new cn({apiKey:t})}clearHistory(){this.chatHistory=[]}getHistory(){return this.chatHistory}async generateSummary(t){if(!this.ai)throw new Error("Text interface not initialized");try{return(await this.ai.models.generateContent({model:this.model,contents:[{role:"user",parts:[{text:t}]}]})).candidates?.[0]?.content?.parts?.filter(r=>r.text)?.map(r=>r.text).join("")||""}catch(n){console.error("Text interface error:",n);let i=n instanceof Error?n.message:String(n);throw new Error(`Failed to generate summary: ${i}`)}}};var oU=[Um,Pm,Fm,Om,Hm,Gm,qm,zm,Vm,$m,Ym,Jm,Km,Qm,Zm,eh,uh,th,yh].join(`

`),ii=`You are an advanced voice assistant (Hermes) with file system access and internet capabilities.
Vault structure: Flat markdown files.

CORE RESPONSE RULES:
1. NO CONFIRMATIONS: Do NOT say "Done.", "Finished.", or any variation of completion confirmation after a tool call. The UI handles state visualization.
2. INFORMATIONAL TOOLS: When calling "read_file", "list_directory", "list_vault_files", or "internet_search", remain silent unless the user asked a specific question about the content.
3. BATCH ACTIONS: If performing multiple modifications, wait until all are finished, then provide a single concise summary.
4. NO "DONE" ON TOPICS: Do not say "Done" or confirm when switching topics. Just proceed with the new context.
5. Conciseness is mandatory. Avoid conversational filler.
6. LARGE VAULTS: If the vault seems large, prefer "list_vault_files" with a limit or filter over "list_directory" to stay within token limits.
7. WEB SEARCH RESTRICTION: Only use "internet_search" if the user specifically asks about it or explicitly requests web search.
8. FILE NAMING: Do not ever read out .md at the end of files. Omit full path, just read out the file names, unless it's relevant!

IMPORTANT PATH CONVENTION:
ALL FILE PATHS MUST BE RELATIVE TO VAULT ROOT. Examples:
- "notes.md" (root level file)
- "projects/ideas.md" (file in projects folder)
- "archive/2024/report.md" (nested folder structure)

WIKI LINK CONVENTION:
DEFAULT TO WIKI LINKS EVERYWHERE WITHOUT PATH. 
Insert images using a Wikilink with only the filename.
- Use [[notes]] instead of [notes.md](notes.md)
- Never use "file:" prefix or full file extensions in wiki links
- use ![[image.png|title]] for images!

AVAILABLE TOOL CAPABILITIES:
${oU}`;Ee();function hE(e){return typeof e>"u"||e===null}function rU(e){return typeof e=="object"&&e!==null}function sU(e){return Array.isArray(e)?e:hE(e)?[]:[e]}function aU(e,t){var n,i,o,r;if(t)for(r=Object.keys(t),n=0,i=r.length;n<i;n+=1)o=r[n],e[o]=t[o];return e}function lU(e,t){var n="",i;for(i=0;i<t;i+=1)n+=e;return n}function uU(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var cU=hE,fU=rU,dU=sU,pU=lU,mU=uU,hU=aU,$e={isNothing:cU,isObject:fU,toArray:dU,repeat:pU,isNegativeZero:mU,extend:hU};function gE(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function ra(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=gE(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ra.prototype=Object.create(Error.prototype);ra.prototype.constructor=ra;ra.prototype.toString=function(t){return this.name+": "+gE(this,t)};var _t=ra;function Sh(e,t,n,i,o){var r="",s="",a=Math.floor(o/2)-1;return i-t>a&&(r=" ... ",t=i-a+r.length),n-i>a&&(s=" ...",n=i+a-s.length),{str:r+e.slice(t,n).replace(/\t/g,"\u2192")+s,pos:i-t+r.length}}function Th(e,t){return $e.repeat(" ",t-e.length)+e}function gU(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],o=[],r,s=-1;r=n.exec(e.buffer);)o.push(r.index),i.push(r.index+r[0].length),e.position<=r.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var a="",l,c,d=Math.min(e.line+t.linesAfter,o.length).toString().length,p=t.maxLength-(t.indent+d+3);for(l=1;l<=t.linesBefore&&!(s-l<0);l++)c=Sh(e.buffer,i[s-l],o[s-l],e.position-(i[s]-i[s-l]),p),a=$e.repeat(" ",t.indent)+Th((e.line-l+1).toString(),d)+" | "+c.str+`
`+a;for(c=Sh(e.buffer,i[s],o[s],e.position,p),a+=$e.repeat(" ",t.indent)+Th((e.line+1).toString(),d)+" | "+c.str+`
`,a+=$e.repeat("-",t.indent+d+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(s+l>=o.length);l++)c=Sh(e.buffer,i[s+l],o[s+l],e.position-(i[s]-i[s+l]),p),a+=$e.repeat(" ",t.indent)+Th((e.line+l+1).toString(),d)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var yU=gU,vU=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],SU=["scalar","sequence","mapping"];function TU(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){t[String(i)]=n})}),t}function xU(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(vU.indexOf(n)===-1)throw new _t('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=TU(t.styleAliases||null),SU.indexOf(this.kind)===-1)throw new _t('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var ut=xU;function eE(e,t){var n=[];return e[t].forEach(function(i){var o=n.length;n.forEach(function(r,s){r.tag===i.tag&&r.kind===i.kind&&r.multi===i.multi&&(o=s)}),n[o]=i}),n}function AU(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function i(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(i);return e}function Ah(e){return this.extend(e)}Ah.prototype.extend=function(t){var n=[],i=[];if(t instanceof ut)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new _t("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(r){if(!(r instanceof ut))throw new _t("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(r.loadKind&&r.loadKind!=="scalar")throw new _t("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(r.multi)throw new _t("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(r){if(!(r instanceof ut))throw new _t("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(Ah.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(i),o.compiledImplicit=eE(o,"implicit"),o.compiledExplicit=eE(o,"explicit"),o.compiledTypeMap=AU(o.compiledImplicit,o.compiledExplicit),o};var EU=Ah,CU=new ut("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),_U=new ut("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),wU=new ut("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),bU=new EU({explicit:[CU,_U,wU]});function NU(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function RU(){return null}function IU(e){return e===null}var MU=new ut("tag:yaml.org,2002:null",{kind:"scalar",resolve:NU,construct:RU,predicate:IU,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function kU(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function DU(e){return e==="true"||e==="True"||e==="TRUE"}function UU(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var LU=new ut("tag:yaml.org,2002:bool",{kind:"scalar",resolve:kU,construct:DU,predicate:UU,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function PU(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function FU(e){return 48<=e&&e<=55}function OU(e){return 48<=e&&e<=57}function HU(e){if(e===null)return!1;var t=e.length,n=0,i=!1,o;if(!t)return!1;if(o=e[n],(o==="-"||o==="+")&&(o=e[++n]),o==="0"){if(n+1===t)return!0;if(o=e[++n],o==="b"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;i=!0}return i&&o!=="_"}if(o==="x"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!PU(e.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}if(o==="o"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!FU(e.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}}if(o==="_")return!1;for(;n<t;n++)if(o=e[n],o!=="_"){if(!OU(e.charCodeAt(n)))return!1;i=!0}return!(!i||o==="_")}function GU(e){var t=e,n=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function qU(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!$e.isNegativeZero(e)}var BU=new ut("tag:yaml.org,2002:int",{kind:"scalar",resolve:HU,construct:GU,predicate:qU,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),zU=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function VU(e){return!(e===null||!zU.test(e)||e[e.length-1]==="_")}function $U(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var YU=/^[-+]?[0-9]+e/;function JU(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if($e.isNegativeZero(e))return"-0.0";return n=e.toString(10),YU.test(n)?n.replace("e",".e"):n}function KU(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||$e.isNegativeZero(e))}var XU=new ut("tag:yaml.org,2002:float",{kind:"scalar",resolve:VU,construct:$U,predicate:KU,represent:JU,defaultStyle:"lowercase"}),QU=bU.extend({implicit:[MU,LU,BU,XU]}),ZU=QU,yE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),vE=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function WU(e){return e===null?!1:yE.exec(e)!==null||vE.exec(e)!==null}function jU(e){var t,n,i,o,r,s,a,l=0,c=null,d,p,m;if(t=yE.exec(e),t===null&&(t=vE.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,i,o));if(r=+t[4],s=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(d=+t[10],p=+(t[11]||0),c=(d*60+p)*6e4,t[9]==="-"&&(c=-c)),m=new Date(Date.UTC(n,i,o,r,s,a,l)),c&&m.setTime(m.getTime()-c),m}function eL(e){return e.toISOString()}var tL=new ut("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:WU,construct:jU,instanceOf:Date,represent:eL});function nL(e){return e==="<<"||e===null}var iL=new ut("tag:yaml.org,2002:merge",{kind:"scalar",resolve:nL}),bh=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function oL(e){if(e===null)return!1;var t,n,i=0,o=e.length,r=bh;for(n=0;n<o;n++)if(t=r.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function rL(e){var t,n,i=e.replace(/[\r\n=]/g,""),o=i.length,r=bh,s=0,a=[];for(t=0;t<o;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|r.indexOf(i.charAt(t));return n=o%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function sL(e){var t="",n=0,i,o,r=e.length,s=bh;for(i=0;i<r;i++)i%3===0&&i&&(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]),n=(n<<8)+e[i];return o=r%3,o===0?(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]):o===2?(t+=s[n>>10&63],t+=s[n>>4&63],t+=s[n<<2&63],t+=s[64]):o===1&&(t+=s[n>>2&63],t+=s[n<<4&63],t+=s[64],t+=s[64]),t}function aL(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var lL=new ut("tag:yaml.org,2002:binary",{kind:"scalar",resolve:oL,construct:rL,predicate:aL,represent:sL}),uL=Object.prototype.hasOwnProperty,cL=Object.prototype.toString;function fL(e){if(e===null)return!0;var t=[],n,i,o,r,s,a=e;for(n=0,i=a.length;n<i;n+=1){if(o=a[n],s=!1,cL.call(o)!=="[object Object]")return!1;for(r in o)if(uL.call(o,r))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(r)===-1)t.push(r);else return!1}return!0}function dL(e){return e!==null?e:[]}var pL=new ut("tag:yaml.org,2002:omap",{kind:"sequence",resolve:fL,construct:dL}),mL=Object.prototype.toString;function hL(e){if(e===null)return!0;var t,n,i,o,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(i=s[t],mL.call(i)!=="[object Object]"||(o=Object.keys(i),o.length!==1))return!1;r[t]=[o[0],i[o[0]]]}return!0}function gL(e){if(e===null)return[];var t,n,i,o,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1)i=s[t],o=Object.keys(i),r[t]=[o[0],i[o[0]]];return r}var yL=new ut("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:hL,construct:gL}),vL=Object.prototype.hasOwnProperty;function SL(e){if(e===null)return!0;var t,n=e;for(t in n)if(vL.call(n,t)&&n[t]!==null)return!1;return!0}function TL(e){return e!==null?e:{}}var xL=new ut("tag:yaml.org,2002:set",{kind:"mapping",resolve:SL,construct:TL}),SE=ZU.extend({implicit:[tL,iL],explicit:[lL,pL,yL,xL]}),Hi=Object.prototype.hasOwnProperty,uc=1,TE=2,xE=3,cc=4,xh=1,AL=2,tE=3,EL=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,CL=/[\x85\u2028\u2029]/,_L=/[,\[\]\{\}]/,AE=/^(?:!|!!|![a-z\-]+!)$/i,EE=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function nE(e){return Object.prototype.toString.call(e)}function In(e){return e===10||e===13}function yo(e){return e===9||e===32}function wt(e){return e===9||e===32||e===10||e===13}function Ur(e){return e===44||e===91||e===93||e===123||e===125}function wL(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function bL(e){return e===120?2:e===117?4:e===85?8:0}function NL(e){return 48<=e&&e<=57?e-48:-1}function iE(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function RL(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function CE(e,t,n){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}var _E=new Array(256),wE=new Array(256);for(go=0;go<256;go++)_E[go]=iE(go)?1:0,wE[go]=iE(go);var go;function IL(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||SE,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function bE(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=yU(n),new _t(t,n)}function L(e,t){throw bE(e,t)}function fc(e,t){e.onWarning&&e.onWarning.call(null,bE(e,t))}var oE={YAML:function(t,n,i){var o,r,s;t.version!==null&&L(t,"duplication of %YAML directive"),i.length!==1&&L(t,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),o===null&&L(t,"ill-formed argument of the YAML directive"),r=parseInt(o[1],10),s=parseInt(o[2],10),r!==1&&L(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&fc(t,"unsupported YAML version of the document")},TAG:function(t,n,i){var o,r;i.length!==2&&L(t,"TAG directive accepts exactly two arguments"),o=i[0],r=i[1],AE.test(o)||L(t,"ill-formed tag handle (first argument) of the TAG directive"),Hi.call(t.tagMap,o)&&L(t,'there is a previously declared suffix for "'+o+'" tag handle'),EE.test(r)||L(t,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch{L(t,"tag prefix is malformed: "+r)}t.tagMap[o]=r}};function Oi(e,t,n,i){var o,r,s,a;if(t<n){if(a=e.input.slice(t,n),i)for(o=0,r=a.length;o<r;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||L(e,"expected valid JSON character");else EL.test(a)&&L(e,"the stream contains non-printable characters");e.result+=a}}function rE(e,t,n,i){var o,r,s,a;for($e.isObject(n)||L(e,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),s=0,a=o.length;s<a;s+=1)r=o[s],Hi.call(t,r)||(CE(t,r,n[r]),i[r]=!0)}function Lr(e,t,n,i,o,r,s,a,l){var c,d;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),c=0,d=o.length;c<d;c+=1)Array.isArray(o[c])&&L(e,"nested arrays are not supported inside keys"),typeof o=="object"&&nE(o[c])==="[object Object]"&&(o[c]="[object Object]");if(typeof o=="object"&&nE(o)==="[object Object]"&&(o="[object Object]"),o=String(o),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(r))for(c=0,d=r.length;c<d;c+=1)rE(e,t,r[c],n);else rE(e,t,r,n);else!e.json&&!Hi.call(n,o)&&Hi.call(t,o)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,L(e,"duplicated mapping key")),CE(t,o,r),delete n[o];return t}function Nh(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):L(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Ge(e,t,n){for(var i=0,o=e.input.charCodeAt(e.position);o!==0;){for(;yo(o);)o===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),o=e.input.charCodeAt(++e.position);if(t&&o===35)do o=e.input.charCodeAt(++e.position);while(o!==10&&o!==13&&o!==0);if(In(o))for(Nh(e),o=e.input.charCodeAt(e.position),i++,e.lineIndent=0;o===32;)e.lineIndent++,o=e.input.charCodeAt(++e.position);else break}return n!==-1&&i!==0&&e.lineIndent<n&&fc(e,"deficient indentation"),i}function mc(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||wt(n)))}function Rh(e,t){t===1?e.result+=" ":t>1&&(e.result+=$e.repeat(`
`,t-1))}function ML(e,t,n){var i,o,r,s,a,l,c,d,p=e.kind,m=e.result,h;if(h=e.input.charCodeAt(e.position),wt(h)||Ur(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(o=e.input.charCodeAt(e.position+1),wt(o)||n&&Ur(o)))return!1;for(e.kind="scalar",e.result="",r=s=e.position,a=!1;h!==0;){if(h===58){if(o=e.input.charCodeAt(e.position+1),wt(o)||n&&Ur(o))break}else if(h===35){if(i=e.input.charCodeAt(e.position-1),wt(i))break}else{if(e.position===e.lineStart&&mc(e)||n&&Ur(h))break;if(In(h))if(l=e.line,c=e.lineStart,d=e.lineIndent,Ge(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=l,e.lineStart=c,e.lineIndent=d;break}}a&&(Oi(e,r,s,!1),Rh(e,e.line-l),r=s=e.position,a=!1),yo(h)||(s=e.position+1),h=e.input.charCodeAt(++e.position)}return Oi(e,r,s,!1),e.result?!0:(e.kind=p,e.result=m,!1)}function kL(e,t){var n,i,o;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=o=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Oi(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)i=e.position,e.position++,o=e.position;else return!0;else In(n)?(Oi(e,i,o,!0),Rh(e,Ge(e,!1,t)),i=o=e.position):e.position===e.lineStart&&mc(e)?L(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);L(e,"unexpected end of the stream within a single quoted scalar")}function DL(e,t){var n,i,o,r,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Oi(e,n,e.position,!0),e.position++,!0;if(a===92){if(Oi(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),In(a))Ge(e,!1,t);else if(a<256&&_E[a])e.result+=wE[a],e.position++;else if((s=bL(a))>0){for(o=s,r=0;o>0;o--)a=e.input.charCodeAt(++e.position),(s=wL(a))>=0?r=(r<<4)+s:L(e,"expected hexadecimal character");e.result+=RL(r),e.position++}else L(e,"unknown escape sequence");n=i=e.position}else In(a)?(Oi(e,n,i,!0),Rh(e,Ge(e,!1,t)),n=i=e.position):e.position===e.lineStart&&mc(e)?L(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}L(e,"unexpected end of the stream within a double quoted scalar")}function UL(e,t){var n=!0,i,o,r,s=e.tag,a,l=e.anchor,c,d,p,m,h,g=Object.create(null),T,x,y,v;if(v=e.input.charCodeAt(e.position),v===91)d=93,h=!1,a=[];else if(v===123)d=125,h=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),v=e.input.charCodeAt(++e.position);v!==0;){if(Ge(e,!0,t),v=e.input.charCodeAt(e.position),v===d)return e.position++,e.tag=s,e.anchor=l,e.kind=h?"mapping":"sequence",e.result=a,!0;n?v===44&&L(e,"expected the node content, but found ','"):L(e,"missed comma between flow collection entries"),x=T=y=null,p=m=!1,v===63&&(c=e.input.charCodeAt(e.position+1),wt(c)&&(p=m=!0,e.position++,Ge(e,!0,t))),i=e.line,o=e.lineStart,r=e.position,Pr(e,t,uc,!1,!0),x=e.tag,T=e.result,Ge(e,!0,t),v=e.input.charCodeAt(e.position),(m||e.line===i)&&v===58&&(p=!0,v=e.input.charCodeAt(++e.position),Ge(e,!0,t),Pr(e,t,uc,!1,!0),y=e.result),h?Lr(e,a,g,x,T,y,i,o,r):p?a.push(Lr(e,null,g,x,T,y,i,o,r)):a.push(T),Ge(e,!0,t),v=e.input.charCodeAt(e.position),v===44?(n=!0,v=e.input.charCodeAt(++e.position)):n=!1}L(e,"unexpected end of the stream within a flow collection")}function LL(e,t){var n,i,o=xh,r=!1,s=!1,a=t,l=0,c=!1,d,p;if(p=e.input.charCodeAt(e.position),p===124)i=!1;else if(p===62)i=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)xh===o?o=p===43?tE:AL:L(e,"repeat of a chomping mode identifier");else if((d=NL(p))>=0)d===0?L(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?L(e,"repeat of an indentation width identifier"):(a=t+d-1,s=!0);else break;if(yo(p)){do p=e.input.charCodeAt(++e.position);while(yo(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!In(p)&&p!==0)}for(;p!==0;){for(Nh(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),In(p)){l++;continue}if(e.lineIndent<a){o===tE?e.result+=$e.repeat(`
`,r?1+l:l):o===xh&&r&&(e.result+=`
`);break}for(i?yo(p)?(c=!0,e.result+=$e.repeat(`
`,r?1+l:l)):c?(c=!1,e.result+=$e.repeat(`
`,l+1)):l===0?r&&(e.result+=" "):e.result+=$e.repeat(`
`,l):e.result+=$e.repeat(`
`,r?1+l:l),r=!0,s=!0,l=0,n=e.position;!In(p)&&p!==0;)p=e.input.charCodeAt(++e.position);Oi(e,n,e.position,!1)}return!0}function sE(e,t){var n,i=e.tag,o=e.anchor,r=[],s,a=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=r),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),!(l!==45||(s=e.input.charCodeAt(e.position+1),!wt(s))));){if(a=!0,e.position++,Ge(e,!0,-1)&&e.lineIndent<=t){r.push(null),l=e.input.charCodeAt(e.position);continue}if(n=e.line,Pr(e,t,xE,!1,!0),r.push(e.result),Ge(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&l!==0)L(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=i,e.anchor=o,e.kind="sequence",e.result=r,!0):!1}function PL(e,t,n){var i,o,r,s,a,l,c=e.tag,d=e.anchor,p={},m=Object.create(null),h=null,g=null,T=null,x=!1,y=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),v=e.input.charCodeAt(e.position);v!==0;){if(!x&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,L(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),r=e.line,(v===63||v===58)&&wt(i))v===63?(x&&(Lr(e,p,m,h,g,null,s,a,l),h=g=T=null),y=!0,x=!0,o=!0):x?(x=!1,o=!0):L(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=i;else{if(s=e.line,a=e.lineStart,l=e.position,!Pr(e,n,TE,!1,!0))break;if(e.line===r){for(v=e.input.charCodeAt(e.position);yo(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),wt(v)||L(e,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(Lr(e,p,m,h,g,null,s,a,l),h=g=T=null),y=!0,x=!1,o=!1,h=e.tag,g=e.result;else if(y)L(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=d,!0}else if(y)L(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=d,!0}if((e.line===r||e.lineIndent>t)&&(x&&(s=e.line,a=e.lineStart,l=e.position),Pr(e,t,cc,!0,o)&&(x?g=e.result:T=e.result),x||(Lr(e,p,m,h,g,T,s,a,l),h=g=T=null),Ge(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===r||e.lineIndent>t)&&v!==0)L(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return x&&Lr(e,p,m,h,g,null,s,a,l),y&&(e.tag=c,e.anchor=d,e.kind="mapping",e.result=p),y}function FL(e){var t,n=!1,i=!1,o,r,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&L(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(n=!0,s=e.input.charCodeAt(++e.position)):s===33?(i=!0,o="!!",s=e.input.charCodeAt(++e.position)):o="!",t=e.position,n){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(r=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):L(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!wt(s);)s===33&&(i?L(e,"tag suffix cannot contain exclamation marks"):(o=e.input.slice(t-1,e.position+1),AE.test(o)||L(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),_L.test(r)&&L(e,"tag suffix cannot contain flow indicator characters")}r&&!EE.test(r)&&L(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{L(e,"tag name is malformed: "+r)}return n?e.tag=r:Hi.call(e.tagMap,o)?e.tag=e.tagMap[o]+r:o==="!"?e.tag="!"+r:o==="!!"?e.tag="tag:yaml.org,2002:"+r:L(e,'undeclared tag handle "'+o+'"'),!0}function OL(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&L(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!wt(n)&&!Ur(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function HL(e){var t,n,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!wt(i)&&!Ur(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&L(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Hi.call(e.anchorMap,n)||L(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Ge(e,!0,-1),!0}function Pr(e,t,n,i,o){var r,s,a,l=1,c=!1,d=!1,p,m,h,g,T,x;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,r=s=a=cc===n||xE===n,i&&Ge(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;FL(e)||OL(e);)Ge(e,!0,-1)?(c=!0,a=r,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):a=!1;if(a&&(a=c||o),(l===1||cc===n)&&(uc===n||TE===n?T=t:T=t+1,x=e.position-e.lineStart,l===1?a&&(sE(e,x)||PL(e,x,T))||UL(e,T)?d=!0:(s&&LL(e,T)||kL(e,T)||DL(e,T)?d=!0:HL(e)?(d=!0,(e.tag!==null||e.anchor!==null)&&L(e,"alias node should not have any properties")):ML(e,T,uc===n)&&(d=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(d=a&&sE(e,x))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&L(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,m=e.implicitTypes.length;p<m;p+=1)if(g=e.implicitTypes[p],g.resolve(e.result)){e.result=g.construct(e.result),e.tag=g.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Hi.call(e.typeMap[e.kind||"fallback"],e.tag))g=e.typeMap[e.kind||"fallback"][e.tag];else for(g=null,h=e.typeMap.multi[e.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(e.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||L(e,"unknown tag !<"+e.tag+">"),e.result!==null&&g.kind!==e.kind&&L(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+g.kind+'", not "'+e.kind+'"'),g.resolve(e.result,e.tag)?(e.result=g.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):L(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||d}function GL(e){var t=e.position,n,i,o,r=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Ge(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(r=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!wt(s);)s=e.input.charCodeAt(++e.position);for(i=e.input.slice(n,e.position),o=[],i.length<1&&L(e,"directive name must not be less than one character in length");s!==0;){for(;yo(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!In(s));break}if(In(s))break;for(n=e.position;s!==0&&!wt(s);)s=e.input.charCodeAt(++e.position);o.push(e.input.slice(n,e.position))}s!==0&&Nh(e),Hi.call(oE,i)?oE[i](e,i,o):fc(e,'unknown document directive "'+i+'"')}if(Ge(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ge(e,!0,-1)):r&&L(e,"directives end mark is expected"),Pr(e,e.lineIndent-1,cc,!1,!0),Ge(e,!0,-1),e.checkLineBreaks&&CL.test(e.input.slice(t,e.position))&&fc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&mc(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ge(e,!0,-1));return}if(e.position<e.length-1)L(e,"end of the stream or a document separator is expected");else return}function NE(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new IL(e,t),i=e.indexOf("\0");for(i!==-1&&(n.position=i,L(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)GL(n);return n.documents}function qL(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var i=NE(e,n);if(typeof t!="function")return i;for(var o=0,r=i.length;o<r;o+=1)t(i[o])}function BL(e,t){var n=NE(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new _t("expected a single document in the stream, but found more")}}var zL=qL,VL=BL,RE={loadAll:zL,load:VL},IE=Object.prototype.toString,ME=Object.prototype.hasOwnProperty,Ih=65279,$L=9,sa=10,YL=13,JL=32,KL=33,XL=34,Eh=35,QL=37,ZL=38,WL=39,jL=42,kE=44,eP=45,dc=58,tP=61,nP=62,iP=63,oP=64,DE=91,UE=93,rP=96,LE=123,sP=124,PE=125,ct={};ct[0]="\\0";ct[7]="\\a";ct[8]="\\b";ct[9]="\\t";ct[10]="\\n";ct[11]="\\v";ct[12]="\\f";ct[13]="\\r";ct[27]="\\e";ct[34]='\\"';ct[92]="\\\\";ct[133]="\\N";ct[160]="\\_";ct[8232]="\\L";ct[8233]="\\P";var aP=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],lP=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function uP(e,t){var n,i,o,r,s,a,l;if(t===null)return{};for(n={},i=Object.keys(t),o=0,r=i.length;o<r;o+=1)s=i[o],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),l=e.compiledTypeMap.fallback[s],l&&ME.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[s]=a;return n}function cP(e){var t,n,i;if(t=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else if(e<=4294967295)n="U",i=8;else throw new _t("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+$e.repeat("0",i-t.length)+t}var fP=1,aa=2;function dP(e){this.schema=e.schema||SE,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=$e.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=uP(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?aa:fP,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function aE(e,t){for(var n=$e.repeat(" ",t),i=0,o=-1,r="",s,a=e.length;i<a;)o=e.indexOf(`
`,i),o===-1?(s=e.slice(i),i=a):(s=e.slice(i,o+1),i=o+1),s.length&&s!==`
`&&(r+=n),r+=s;return r}function Ch(e,t){return`
`+$e.repeat(" ",e.indent*t)}function pP(e,t){var n,i,o;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(o=e.implicitTypes[n],o.resolve(t))return!0;return!1}function pc(e){return e===JL||e===$L}function la(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Ih||65536<=e&&e<=1114111}function lE(e){return la(e)&&e!==Ih&&e!==YL&&e!==sa}function uE(e,t,n){var i=lE(e),o=i&&!pc(e);return(n?i:i&&e!==kE&&e!==DE&&e!==UE&&e!==LE&&e!==PE)&&e!==Eh&&!(t===dc&&!o)||lE(t)&&!pc(t)&&e===Eh||t===dc&&o}function mP(e){return la(e)&&e!==Ih&&!pc(e)&&e!==eP&&e!==iP&&e!==dc&&e!==kE&&e!==DE&&e!==UE&&e!==LE&&e!==PE&&e!==Eh&&e!==ZL&&e!==jL&&e!==KL&&e!==sP&&e!==tP&&e!==nP&&e!==WL&&e!==XL&&e!==QL&&e!==oP&&e!==rP}function hP(e){return!pc(e)&&e!==dc}function oa(e,t){var n=e.charCodeAt(t),i;return n>=55296&&n<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function FE(e){var t=/^\n* /;return t.test(e)}var OE=1,_h=2,HE=3,GE=4,Dr=5;function gP(e,t,n,i,o,r,s,a){var l,c=0,d=null,p=!1,m=!1,h=i!==-1,g=-1,T=mP(oa(e,0))&&hP(oa(e,e.length-1));if(t||s)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=oa(e,l),!la(c))return Dr;T=T&&uE(c,d,a),d=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=oa(e,l),c===sa)p=!0,h&&(m=m||l-g-1>i&&e[g+1]!==" ",g=l);else if(!la(c))return Dr;T=T&&uE(c,d,a),d=c}m=m||h&&l-g-1>i&&e[g+1]!==" "}return!p&&!m?T&&!s&&!o(e)?OE:r===aa?Dr:_h:n>9&&FE(e)?Dr:s?r===aa?Dr:_h:m?GE:HE}function yP(e,t,n,i,o){e.dump=function(){if(t.length===0)return e.quotingType===aa?'""':"''";if(!e.noCompatMode&&(aP.indexOf(t)!==-1||lP.test(t)))return e.quotingType===aa?'"'+t+'"':"'"+t+"'";var r=e.indent*Math.max(1,n),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-r),a=i||e.flowLevel>-1&&n>=e.flowLevel;function l(c){return pP(e,c)}switch(gP(t,a,e.indent,s,l,e.quotingType,e.forceQuotes&&!i,o)){case OE:return t;case _h:return"'"+t.replace(/'/g,"''")+"'";case HE:return"|"+cE(t,e.indent)+fE(aE(t,r));case GE:return">"+cE(t,e.indent)+fE(aE(vP(t,s),r));case Dr:return'"'+SP(t)+'"';default:throw new _t("impossible error: invalid scalar style")}}()}function cE(e,t){var n=FE(e)?String(t):"",i=e[e.length-1]===`
`,o=i&&(e[e.length-2]===`
`||e===`
`),r=o?"+":i?"":"-";return n+r+`
`}function fE(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function vP(e,t){for(var n=/(\n+)([^\n]*)/g,i=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,n.lastIndex=c,dE(e.slice(0,c),t)}(),o=e[0]===`
`||e[0]===" ",r,s;s=n.exec(e);){var a=s[1],l=s[2];r=l[0]===" ",i+=a+(!o&&!r&&l!==""?`
`:"")+dE(l,t),o=r}return i}function dE(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,i,o=0,r,s=0,a=0,l="";i=n.exec(e);)a=i.index,a-o>t&&(r=s>o?s:a,l+=`
`+e.slice(o,r),o=r+1),s=a;return l+=`
`,e.length-o>t&&s>o?l+=e.slice(o,s)+`
`+e.slice(s+1):l+=e.slice(o),l.slice(1)}function SP(e){for(var t="",n=0,i,o=0;o<e.length;n>=65536?o+=2:o++)n=oa(e,o),i=ct[n],!i&&la(n)?(t+=e[o],n>=65536&&(t+=e[o+1])):t+=i||cP(n);return t}function TP(e,t,n){var i="",o=e.tag,r,s,a;for(r=0,s=n.length;r<s;r+=1)a=n[r],e.replacer&&(a=e.replacer.call(n,String(r),a)),(oi(e,t,a,!1,!1)||typeof a>"u"&&oi(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=o,e.dump="["+i+"]"}function pE(e,t,n,i){var o="",r=e.tag,s,a,l;for(s=0,a=n.length;s<a;s+=1)l=n[s],e.replacer&&(l=e.replacer.call(n,String(s),l)),(oi(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&oi(e,t+1,null,!0,!0,!1,!0))&&((!i||o!=="")&&(o+=Ch(e,t)),e.dump&&sa===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=r,e.dump=o||"[]"}function xP(e,t,n){var i="",o=e.tag,r=Object.keys(n),s,a,l,c,d;for(s=0,a=r.length;s<a;s+=1)d="",i!==""&&(d+=", "),e.condenseFlow&&(d+='"'),l=r[s],c=n[l],e.replacer&&(c=e.replacer.call(n,l,c)),oi(e,t,l,!1,!1)&&(e.dump.length>1024&&(d+="? "),d+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),oi(e,t,c,!1,!1)&&(d+=e.dump,i+=d));e.tag=o,e.dump="{"+i+"}"}function AP(e,t,n,i){var o="",r=e.tag,s=Object.keys(n),a,l,c,d,p,m;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new _t("sortKeys must be a boolean or a function");for(a=0,l=s.length;a<l;a+=1)m="",(!i||o!=="")&&(m+=Ch(e,t)),c=s[a],d=n[c],e.replacer&&(d=e.replacer.call(n,c,d)),oi(e,t+1,c,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&sa===e.dump.charCodeAt(0)?m+="?":m+="? "),m+=e.dump,p&&(m+=Ch(e,t)),oi(e,t+1,d,!0,p)&&(e.dump&&sa===e.dump.charCodeAt(0)?m+=":":m+=": ",m+=e.dump,o+=m));e.tag=r,e.dump=o||"{}"}function mE(e,t,n){var i,o,r,s,a,l;for(o=n?e.explicitTypes:e.implicitTypes,r=0,s=o.length;r<s;r+=1)if(a=o[r],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,IE.call(a.represent)==="[object Function]")i=a.represent(t,l);else if(ME.call(a.represent,l))i=a.represent[l](t,l);else throw new _t("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');e.dump=i}return!0}return!1}function oi(e,t,n,i,o,r,s){e.tag=null,e.dump=n,mE(e,n,!1)||mE(e,n,!0);var a=IE.call(e.dump),l=i,c;i&&(i=e.flowLevel<0||e.flowLevel>t);var d=a==="[object Object]"||a==="[object Array]",p,m;if(d&&(p=e.duplicates.indexOf(n),m=p!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&t>0)&&(o=!1),m&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(d&&m&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),a==="[object Object]")i&&Object.keys(e.dump).length!==0?(AP(e,t,e.dump,o),m&&(e.dump="&ref_"+p+e.dump)):(xP(e,t,e.dump),m&&(e.dump="&ref_"+p+" "+e.dump));else if(a==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?pE(e,t-1,e.dump,o):pE(e,t,e.dump,o),m&&(e.dump="&ref_"+p+e.dump)):(TP(e,t,e.dump),m&&(e.dump="&ref_"+p+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&yP(e,e.dump,t,r,l);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new _t("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function EP(e,t){var n=[],i=[],o,r;for(wh(e,n,i),o=0,r=i.length;o<r;o+=1)t.duplicates.push(n[i[o]]);t.usedDuplicates=new Array(r)}function wh(e,t,n){var i,o,r;if(e!==null&&typeof e=="object")if(o=t.indexOf(e),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(t.push(e),Array.isArray(e))for(o=0,r=e.length;o<r;o+=1)wh(e[o],t,n);else for(i=Object.keys(e),o=0,r=i.length;o<r;o+=1)wh(e[i[o]],t,n)}function CP(e,t){t=t||{};var n=new dP(t);n.noRefs||EP(e,n);var i=e;return n.replacer&&(i=n.replacer.call({"":i},"",i)),oi(n,0,i,!0,!0)?n.dump+`
`:""}var _P=CP,wP={dump:_P};function Mh(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var bP=RE.load,YH=RE.loadAll,qE=wP.dump;var JH=Mh("safeLoad","load"),KH=Mh("safeLoadAll","loadAll"),XH=Mh("safeDump","dump");var kh=(e,t)=>{try{return qE(e,{indent:2,lineWidth:-1,noRefs:!0,sortKeys:!1,...t})}catch(n){return console.error("YAML conversion error:",n),JSON.stringify(e,null,2)}};Me();mt();var zE=async e=>{try{let t=Qe(),n=e||t?.chatHistoryFolder||"chat-history",i=Rn(),o=new Date().toISOString().split("T")[0],r=new RegExp(`^${n}/${o}-\\d{2}.*\\.md$`),s=i.filter(d=>r.test(d));if(s.length===0)return`${o}-01`;let a=s.map(d=>{let p=d.match(new RegExp(`^${n}/${o}-(\\d{2})`));return p?parseInt(p[1]):0}).filter(d=>d>0),c=Math.max(...a)+1;return`${o}-${c.toString().padStart(2,"0")}`}catch(t){return console.warn("Failed to get next archive index:",t),`${new Date().toISOString().split("T")[0]}-01`}},BE=e=>e.replace(/(?:file:\s*|)([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))/g,"[[$1]]").replace(/"([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))"/g,"[[$1]]").replace(/`([a-zA-Z0-9_/-]+\.(md|txt|js|ts|jsx|tsx|json|yaml|yml|css|html|py|java|cpp|c|h|go|rs|php|rb|swift|kt|scala|sh|sql|xml|csv|pdf|doc|docx|png|jpg|jpeg|gif|svg))`/g,"[[$1]]"),VE=e=>{let t=[],n=[],i=null;return e.forEach(o=>{i===null||o.role!==i?(n.length>0&&t.push(n),n=[o],i=o.role):n.push(o)}),n.length>0&&t.push(n),t.map(o=>{let r=o[0],s="",a=o.map(l=>l.text).join(" ").trim();return r.role==="user"?s=BE(a):r.role==="model"?s=`> ${BE(a).split(`
`).join(`
> `)}`:r.role==="system"&&(s=o.map(c=>{if(c.toolData?.name==="rename_file")return`**RENAME** ~~${c.toolData.oldContent}~~ -> [[${c.toolData.newContent}]]`;if(c.toolData?.name==="topic_switch")return`## ${c.toolData.newContent}`;{let d=`\`\`\`system
${c.text}
\`\`\``;if(c.toolData){let p=`[[${c.toolData.filename}]]`;c.toolData.oldContent!==void 0&&c.toolData.newContent!==void 0&&c.toolData.oldContent!==c.toolData.newContent?c.toolData.oldContent&&c.toolData.oldContent.trim()!==""&&!c.toolData.newContent.includes(c.toolData.oldContent)?d+=`

${p}

--- Removed
\`\`\`markdown
${c.toolData.oldContent||"(empty)"}
\`\`\`

+++ Added
\`\`\`markdown
${c.toolData.newContent||"(empty)"}
\`\`\``:d+=`

${p}
\`\`\`markdown
${c.toolData.newContent}
\`\`\``:(c.toolData.name==="read_file"||c.toolData.name==="create_file")&&(d+=`

${p}
\`\`\`markdown
${c.toolData.newContent}
\`\`\``)}return d}}).join(`

`)),s}).filter(o=>o.trim()!=="").join(`

`)};mt();Me();var Dh=e=>e instanceof Error?e.message:String(e),$E=e=>e.replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>2).slice(0,4).join(" ").substring(0,30).trim()||"Conversation",RP=e=>{try{let t=JSON.parse(e.replace(/```json\n?|```/g,"").trim());return{title:t.title?String(t.title).substring(0,30).trim():"Conversation",tags:Array.isArray(t.tags)?t.tags:[],suggestedFilename:t.suggestedFilename?String(t.suggestedFilename).substring(0,40):"",summary:t.summary?String(t.summary):"",shouldSave:t.shouldSave!==!1}}catch{console.error("Failed to parse AI response as JSON for metadata extraction");let t=e.replace(/^(title|subject|topic):?\s*/i,"").replace(/^["'`]|["'`]$/g,"").replace(/\.$/,"").trim().substring(0,30);if(t&&t.length>=2)return{title:t,tags:[],suggestedFilename:t.toLowerCase().replace(/\s+/g,"-"),summary:"",shouldSave:!0}}return null},IP=e=>{let t=["context","file_tree","read_file","open_file"];return e.filter(n=>!(n.id==="welcome-init"||n.role==="model"&&n.text.trim().toLowerCase().replace(/\./g,"")==="done"||n.toolData&&t.includes(n.toolData.name))).map(n=>n.toolData?{...n,toolData:void 0}:n)},Uh=async e=>{let{transcripts:t,chatHistoryFolder:n,textInterface:i,topicId:o}=e,r=o||t[0]?.topicId||`topic-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;if((await vr()).some(N=>N.topicId===r))return console.warn(`[HISTORY] SKIP: Topic ${r} already archived`),{success:!0,message:`Topic already archived (${r})`,skipped:!0};let l=IP(t);console.warn(`[HISTORY] STEP 1 - FILTER: ${t.length} entries -> ${l.length} filtered`);let c=l.filter(N=>(N.role==="user"||N.role==="model")&&N.text?.trim().length>0),p=c.reduce((N,G)=>N+(G.text?.trim().length||0),0)>50&&c.length>=2;if(c.length===0||!p)return console.warn("[HISTORY] SKIP: No meaningful content to archive"),{success:!0,message:"No meaningful content to archive",skipped:!0,notEnoughContent:!0};let m=VE(l);console.warn(`[HISTORY] STEP 2 - MARKDOWN: length=${m.length}`);let h=l.filter(N=>N.role==="user"||N.role==="model").map(N=>`${N.role}: ${N.text}`).join(`
`),g={title:"Conversation",tags:[],suggestedFilename:"",summary:"",shouldSave:!0},T=l.find(N=>N.role==="user")?.text||"";if(T.trim()&&(g.title=$E(T),g.suggestedFilename=$E(T).toLowerCase().replace(/\s+/g,"-")),i&&h.trim()){let N=`Generate a JSON response with these fields:
- "title": A short, keyword-rich title (2-4 words, max 30 characters)
- "tags": Array of relevant tags for this conversation (e.g. ["file-management", "search"])
- "suggestedFilename": Primary keywords focusing on the TOPIC/CONTENT discussed, not file operations. Use lowercase, hyphen-separated (max 40 characters)
- "summary": A bulletpoint list summarizing the conversation
- "shouldSave": true/false - does this conversation have meaningful content worth saving?
  (false for: just greetings, "hi", "hello", "what were we doing", empty exchanges)

IMPORTANT: For filename generation, focus on WHAT WAS DISCUSSED or ACCOMPLISHED, not HOW it was done. 
Examples:
- GOOD: "react-component-refactor", "openai-api-integration-setup", "wedding-planning", "ai-doomsday-scenarios", "weekend-activities", "present-ideas", "pupl-fiction-movie-review"
- BAD: "create-file", "edit-code", "rename-component", "file-operations", "image-search", "file-management"

Conversation:
${h}

Respond ONLY with valid JSON, no markdown.`;console.warn("[HISTORY] STEP 3 - LLM: Requesting metadata...");try{let G=await i.generateSummary(N);console.warn(`[HISTORY] STEP 3 - LLM: Response received, length=${G.length}`);let ye=RP(G);ye&&(g=ye)}catch(G){console.warn("[HISTORY] STEP 3 - LLM FAILED:",Dh(G))}}else console.warn("[HISTORY] STEP 3 - LLM: Skipped (no text interface)");if(console.warn(`[HISTORY] STEP 4 - CHECK: shouldSave=${g.shouldSave}`),!g.shouldSave)return console.warn("[HISTORY] SKIP: Nothing to export (shouldSave=false)"),{success:!0,message:"Content not substantial enough to archive",skipped:!0,notEnoughContent:!0};let x=await zE(n),y=g.suggestedFilename.toLowerCase().replace(/[^a-z0-9-]/g,"-").substring(0,40)||"conversation",v=`${n}/${x}-${y}.md`;console.warn(`[HISTORY] STEP 5 - FILENAME: ${v}`);let S=l.map(N=>N.timestamp).filter(N=>N>0),A=new Date,_=S.length>0?new Date(S[0]).toISOString():A.toISOString(),R=S.length>0?new Date(S[S.length-1]).toISOString():A.toISOString(),C=S.length>1?Math.round((S[S.length-1]-S[0])/1e3):0,M={title:g.title.length>50?g.title.substring(0,47)+"...":g.title,topic_id:r,date:_,end_date:R,duration:C,tags:g.tags,format:"hermes-chat-archive",summary:g.summary},I=`---
${kh(M)}---

`;console.warn("[HISTORY] STEP 6 - YAML: Built frontmatter");try{await eu(n);let N=I+m;await jl(v,N),console.warn("[HISTORY] STEP 7 - VAULT: Saved")}catch(N){let G=Dh(N);return console.error("[HISTORY] STEP 7 - VAULT SAVE FAILED:",G),{success:!1,message:"Failed to save to vault",error:G}}try{let N=`conv-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,G={key:N,topicId:r,title:g.title,tags:g.tags,summary:g.summary,suggestedFilename:g.suggestedFilename,archivedAt:Date.now(),conversation:l};return await gT(G),console.warn("[HISTORY] STEP 8 - PLUGIN: Saved to history array"),{success:!0,message:`Conversation archived to ${v}`,key:N,suggestedFilename:g.suggestedFilename,notEnoughContent:!1}}catch(N){let G=Dh(N);return console.error("[HISTORY] STEP 8 - JSON SAVE FAILED:",G),{success:!1,message:"Failed to save to plugin data",error:G}}};Ee();var Fr=J(te(),1),DP=({onOpenSettings:e,className:t=""})=>(0,Fr.jsx)("button",{onClick:()=>{if(sn())try{let{app:i}=window;i&&i.setting&&(i.setting.open(),i.setting.openTabById("hermes-voice-assistant"))}catch(i){console.warn("Failed to open Obsidian settings:",i),e()}else e()},className:`p-2 hermes-text-muted hermes-hover:text-normal transition-all ${t}`,title:"System Settings",children:(0,Fr.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Fr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,Fr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),XE=DP;var gc=J(te(),1),UP=({onOpenHistory:e})=>(0,gc.jsx)("button",{onClick:e,className:"p-2 transition-all hermes-text-muted hermes-hover:text-normal",title:"View History",children:(0,gc.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,gc.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),QE=UP;var ke=J(te(),1),LP=({status:e,showLogs:t,onToggleLogs:n,onOpenSettings:i,onOpenHistory:o,isListening:r,onStopSession:s,onResetConversation:a,transcripts:l})=>{let c=l&&l.length>1&&!l.every(d=>d.id==="welcome-init"||d.role==="system");return(0,ke.jsxs)("header",{className:`relative flex items-center justify-between px-6 py-2 hermes-border-b shrink-0 z-50 ${r?"hermes-header-bg-listening":"hermes-header-bg"}`,children:[(0,ke.jsx)("div",{className:"flex items-center space-x-6",children:(0,ke.jsx)("div",{className:"flex flex-col",children:(0,ke.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ke.jsx)("h1",{className:"text-lg font-semibold hermes-text-normal",children:"Hermes"}),c&&a&&(0,ke.jsx)("button",{onClick:a,className:"p-1 rounded hermes-text-muted hover:hermes-text-normal transition-all",title:"Reset conversation",children:(0,ke.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ke.jsx)("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),(0,ke.jsx)("path",{d:"M3 3v5h5"})]})})]})})}),r&&(0,ke.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center",children:(0,ke.jsx)("button",{onClick:s,className:"w-[52px] h-[52px] flex items-center justify-center bg-green-600 text-white rounded-full transition-all hover:bg-green-700 active:scale-95 shadow-lg shadow-green-600/50",title:"Stop Listening",children:(0,ke.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ke.jsx)("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2"}),(0,ke.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,ke.jsx)("path",{d:"M12 7v4"}),(0,ke.jsx)("line",{x1:"8",y1:"16",x2:"8",y2:"16"}),(0,ke.jsx)("line",{x1:"16",y1:"16",x2:"16",y2:"16"})]})})}),(0,ke.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,ke.jsx)(QE,{onOpenHistory:o}),(0,ke.jsx)(XE,{onOpenSettings:i})]})]})},ZE=LP;var Y=J(te(),1),PP=["Default","Professional","Friendly","Creative","Technical"],FP=({isOpen:e,onClose:t,voiceName:n,setVoiceName:i,customContext:o,setCustomContext:r,systemInstruction:s,setSystemInstruction:a,manualApiKey:l,setManualApiKey:c,serperApiKey:d,setSerperApiKey:p,onUpdateApiKey:m})=>e?(0,Y.jsx)("div",{className:"fixed inset-0 z-[200] hermes-bg-tertiary/95 backdrop-blur-md flex items-center justify-center p-8 animate-in fade-in duration-300",children:(0,Y.jsxs)("div",{className:"max-w-3xl w-full space-y-8 hermes-glass p-12 rounded-3xl shadow-2xl overflow-y-auto max-h-[90vh]",children:[(0,Y.jsxs)("div",{className:"flex justify-between items-start hermes-border-b pb-8",children:[(0,Y.jsxs)("div",{children:[(0,Y.jsx)("h2",{className:"text-2xl font-semibold mb-2 hermes-text-normal",children:"Settings"}),(0,Y.jsx)("p",{className:"hermes-text-muted text-sm",children:"Hermes Voice Assistant"})]}),(0,Y.jsx)("button",{onClick:t,className:"p-4 hermes-hover:bg-secondary/5 rounded-full transition-colors group",children:(0,Y.jsx)("svg",{className:"w-8 h-8 hermes-text-muted group-hover:hermes-text-normal transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Y.jsxs)("div",{className:"grid gap-8",children:[(0,Y.jsxs)("div",{className:"space-y-4",children:[(0,Y.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Voice Persona"}),(0,Y.jsx)("div",{className:"grid grid-cols-5 gap-2",children:PP.map(h=>(0,Y.jsx)("button",{onClick:()=>i(h),className:`px-4 py-2 rounded-lg border text-sm transition-all ${n===h?"hermes-interactive-bg border-interactive hermes-text-normal":"hermes-bg-secondary/5 hermes-border/10 hermes-text-muted hermes-hover:border/20"}`,children:h},h))})]}),(0,Y.jsxs)("div",{className:"space-y-4",children:[(0,Y.jsx)("div",{className:"flex items-center justify-between",children:(0,Y.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"System Instructions"})}),(0,Y.jsx)("textarea",{value:s,onChange:h=>a(h.target.value),placeholder:"Core logic instructions...",className:"w-full h-32 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,Y.jsxs)("div",{className:"space-y-4",children:[(0,Y.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"Custom Context"}),(0,Y.jsx)("textarea",{value:o,onChange:h=>r(h.target.value),placeholder:"Define specific behaviors or rules for Hermes...",className:"w-full h-20 hermes-bg-tertiary hermes-border/10 rounded-lg p-4 text-sm hermes-text-normal outline-none hermes-focus:border/50 transition-all font-mono placeholder:hermes-text-faint"})]}),(0,Y.jsxs)("div",{className:"space-y-4 pt-8 hermes-border-t",children:[(0,Y.jsx)("label",{className:"text-sm font-medium hermes-text-normal block",children:"API Authentication"}),(0,Y.jsxs)("div",{className:"space-y-4",children:[(0,Y.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,Y.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Manual API Key"}),(0,Y.jsx)("input",{type:"password",value:l,onChange:h=>c(h.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"})]}),(0,Y.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,Y.jsx)("span",{className:"text-sm font-medium hermes-text-muted",children:"Serper API Key (for Image Search)"}),(0,Y.jsx)("input",{type:"password",value:d,onChange:h=>p(h.target.value),placeholder:"Enter your Serper API Key...",className:"w-full hermes-bg-tertiary hermes-border/10 rounded-lg px-4 py-3 text-sm hermes-text-normal font-mono outline-none hermes-focus:border/50 transition-all"}),(0,Y.jsxs)("p",{className:"text-xs hermes-text-faint",children:["Get 2,500 free credits at ",(0,Y.jsx)("a",{href:"https://serper.dev/",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline",children:"serper.dev"})]})]}),(0,Y.jsxs)("div",{className:"relative py-2",children:[(0,Y.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,Y.jsx)("div",{className:"w-full hermes-border-t"})}),(0,Y.jsx)("div",{className:"relative flex justify-center text-sm font-medium hermes-text-faint",children:(0,Y.jsx)("span",{className:"hermes-bg-secondary px-2",children:"Or"})})]}),(0,Y.jsxs)("button",{onClick:m,className:"w-full flex items-center justify-center space-x-4 px-8 py-4 hermes-interactive-bg hermes-text-normal rounded-lg font-medium hermes-hover:interactive-bg transition-all",children:[(0,Y.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),(0,Y.jsx)("span",{children:"Google AI Studio Auth"})]})]}),(0,Y.jsxs)("p",{className:"text-sm hermes-text-muted mt-4",children:["API keys are handled via AI Studio provider or manual entry.",(0,Y.jsx)("a",{href:"https://ai.google.dev/gemini-api/docs/billing",target:"_blank",rel:"noreferrer",className:"hermes-text-accent hover:underline ml-1",children:"Documentation"})]})]})]})]})}):null,WE=FP;var Gi=J(Gt(),1);var Mn=J(Gt(),1);var To=J(Gt(),1);function Oh(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var So=Oh();function rC(e){So=e}var da={exec:()=>null};function ie(e,t=""){let n=typeof e=="string"?e:e.source,i={replace:(o,r)=>{let s=typeof r=="string"?r:r.source;return s=s.replace(gt.caret,"$1"),n=n.replace(o,s),i},getRegex:()=>new RegExp(n,t)};return i}var OP=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),gt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},HP=/^(?:[ \t]*(?:\n|$))+/,GP=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,qP=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,pa=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,BP=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Hh=/(?:[*+-]|\d{1,9}[.)])/,sC=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,aC=ie(sC).replace(/bull/g,Hh).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),zP=ie(sC).replace(/bull/g,Hh).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Gh=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,VP=/^[^\n]+/,qh=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,$P=ie(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",qh).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),YP=ie(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Hh).getRegex(),Ac="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Bh=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,JP=ie("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Bh).replace("tag",Ac).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),lC=ie(Gh).replace("hr",pa).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ac).getRegex(),KP=ie(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",lC).getRegex(),zh={blockquote:KP,code:GP,def:$P,fences:qP,heading:BP,hr:pa,html:JP,lheading:aC,list:YP,newline:HP,paragraph:lC,table:da,text:VP},jE=ie("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",pa).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ac).getRegex(),XP={...zh,lheading:zP,table:jE,paragraph:ie(Gh).replace("hr",pa).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",jE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ac).getRegex()},QP={...zh,html:ie(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Bh).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:da,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ie(Gh).replace("hr",pa).replace("heading",` *#{1,6} *[^
]`).replace("lheading",aC).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ZP=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,WP=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,uC=/^( {2,}|\\)\n(?!\s*$)/,jP=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ec=/[\p{P}\p{S}]/u,Vh=/[\s\p{P}\p{S}]/u,cC=/[^\s\p{P}\p{S}]/u,eF=ie(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Vh).getRegex(),fC=/(?!~)[\p{P}\p{S}]/u,tF=/(?!~)[\s\p{P}\p{S}]/u,nF=/(?:[^\s\p{P}\p{S}]|~)/u,iF=ie(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",OP?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),dC=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,oF=ie(dC,"u").replace(/punct/g,Ec).getRegex(),rF=ie(dC,"u").replace(/punct/g,fC).getRegex(),pC="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",sF=ie(pC,"gu").replace(/notPunctSpace/g,cC).replace(/punctSpace/g,Vh).replace(/punct/g,Ec).getRegex(),aF=ie(pC,"gu").replace(/notPunctSpace/g,nF).replace(/punctSpace/g,tF).replace(/punct/g,fC).getRegex(),lF=ie("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,cC).replace(/punctSpace/g,Vh).replace(/punct/g,Ec).getRegex(),uF=ie(/\\(punct)/,"gu").replace(/punct/g,Ec).getRegex(),cF=ie(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),fF=ie(Bh).replace("(?:-->|$)","-->").getRegex(),dF=ie("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",fF).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Sc=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,pF=ie(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Sc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),mC=ie(/^!?\[(label)\]\[(ref)\]/).replace("label",Sc).replace("ref",qh).getRegex(),hC=ie(/^!?\[(ref)\](?:\[\])?/).replace("ref",qh).getRegex(),mF=ie("reflink|nolink(?!\\()","g").replace("reflink",mC).replace("nolink",hC).getRegex(),eC=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,$h={_backpedal:da,anyPunctuation:uF,autolink:cF,blockSkip:iF,br:uC,code:WP,del:da,emStrongLDelim:oF,emStrongRDelimAst:sF,emStrongRDelimUnd:lF,escape:ZP,link:pF,nolink:hC,punctuation:eF,reflink:mC,reflinkSearch:mF,tag:dF,text:jP,url:da},hF={...$h,link:ie(/^!?\[(label)\]\((.*?)\)/).replace("label",Sc).getRegex(),reflink:ie(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Sc).getRegex()},Lh={...$h,emStrongRDelimAst:aF,emStrongLDelim:rF,url:ie(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",eC).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:ie(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",eC).getRegex()},gF={...Lh,br:ie(uC).replace("{2,}","*").getRegex(),text:ie(Lh.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},yc={normal:zh,gfm:XP,pedantic:QP},ua={normal:$h,gfm:Lh,breaks:gF,pedantic:hF},yF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tC=e=>yF[e];function ri(e,t){if(t){if(gt.escapeTest.test(e))return e.replace(gt.escapeReplace,tC)}else if(gt.escapeTestNoEncode.test(e))return e.replace(gt.escapeReplaceNoEncode,tC);return e}function nC(e){try{e=encodeURI(e).replace(gt.percentDecode,"%")}catch{return null}return e}function iC(e,t){let n=e.replace(gt.findPipe,(r,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=n.split(gt.splitPipe),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(gt.slashPipe,"|");return i}function ca(e,t,n){let i=e.length;if(i===0)return"";let o=0;for(;o<i;){let r=e.charAt(i-o-1);if(r===t&&!n)o++;else if(r!==t&&n)o++;else break}return e.slice(0,i-o)}function vF(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return n>0?-2:-1}function oC(e,t,n,i,o){let r=t.href,s=t.title||null,a=e[1].replace(o.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:r,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}function SF(e,t,n){let i=e.match(n.other.indentCodeCompensation);if(i===null)return t;let o=i[1];return t.split(`
`).map(r=>{let s=r.match(n.other.beginningSpace);if(s===null)return r;let[a]=s;return a.length>=o.length?r.slice(o.length):r}).join(`
`)}var Tc=class{options;rules;lexer;constructor(e){this.options=e||So}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:ca(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],i=SF(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let i=ca(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:ca(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=ca(t[0],`
`).split(`
`),i="",o="",r=[];for(;n.length>0;){let s=!1,a=[],l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),s=!0;else if(!s)a.push(n[l]);else break;n=n.slice(l);let c=a.join(`
`),d=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,o=o?`${o}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,r,!0),this.lexer.state.top=p,n.length===0)break;let m=r.at(-1);if(m?.type==="code")break;if(m?.type==="blockquote"){let h=m,g=h.raw+`
`+n.join(`
`),T=this.blockquote(g);r[r.length-1]=T,i=i.substring(0,i.length-h.raw.length)+T.raw,o=o.substring(0,o.length-h.text.length)+T.text;break}else if(m?.type==="list"){let h=m,g=h.raw+`
`+n.join(`
`),T=this.list(g);r[r.length-1]=T,i=i.substring(0,i.length-m.raw.length)+T.raw,o=o.substring(0,o.length-h.raw.length)+T.raw,n=g.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:r,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),i=n.length>1,o={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let r=this.rules.other.listItemRegex(n),s=!1;for(;e;){let l=!1,c="",d="";if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,T=>" ".repeat(3*T.length)),m=e.split(`
`,1)[0],h=!p.trim(),g=0;if(this.options.pedantic?(g=2,d=p.trimStart()):h?g=t[1].length+1:(g=t[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=p.slice(g),g+=t[1].length),h&&this.rules.other.blankLine.test(m)&&(c+=m+`
`,e=e.substring(m.length+1),l=!0),!l){let T=this.rules.other.nextBulletRegex(g),x=this.rules.other.hrRegex(g),y=this.rules.other.fencesBeginRegex(g),v=this.rules.other.headingBeginRegex(g),S=this.rules.other.htmlBeginRegex(g);for(;e;){let A=e.split(`
`,1)[0],_;if(m=A,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),_=m):_=m.replace(this.rules.other.tabCharGlobal,"    "),y.test(m)||v.test(m)||S.test(m)||T.test(m)||x.test(m))break;if(_.search(this.rules.other.nonSpaceChar)>=g||!m.trim())d+=`
`+_.slice(g);else{if(h||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||y.test(p)||v.test(p)||x.test(p))break;d+=`
`+m}!h&&!m.trim()&&(h=!0),c+=A+`
`,e=e.substring(A.length+1),p=_.slice(g)}}o.loose||(s?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(s=!0)),o.items.push({type:"list_item",raw:c,task:!!this.options.gfm&&this.rules.other.listIsTask.test(d),loose:!1,text:d,tokens:[]}),o.raw+=c}let a=o.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let l of o.items){if(this.lexer.state.top=!1,l.tokens=this.lexer.blockTokens(l.text,[]),l.task){if(l.text=l.text.replace(this.rules.other.listReplaceTask,""),l.tokens[0]?.type==="text"||l.tokens[0]?.type==="paragraph"){l.tokens[0].raw=l.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),l.tokens[0].text=l.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let d=this.lexer.inlineQueue.length-1;d>=0;d--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[d].src)){this.lexer.inlineQueue[d].src=this.lexer.inlineQueue[d].src.replace(this.rules.other.listReplaceTask,"");break}}let c=this.rules.other.listTaskCheckbox.exec(l.raw);if(c){let d={type:"checkbox",raw:c[0]+" ",checked:c[0]!=="[ ]"};l.checked=d.checked,o.loose?l.tokens[0]&&["paragraph","text"].includes(l.tokens[0].type)&&"tokens"in l.tokens[0]&&l.tokens[0].tokens?(l.tokens[0].raw=d.raw+l.tokens[0].raw,l.tokens[0].text=d.raw+l.tokens[0].text,l.tokens[0].tokens.unshift(d)):l.tokens.unshift({type:"paragraph",raw:d.raw,text:d.raw,tokens:[d]}):l.tokens.unshift(d)}}if(!o.loose){let c=l.tokens.filter(p=>p.type==="space"),d=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));o.loose=d}}if(o.loose)for(let l of o.items){l.loose=!0;for(let c of l.tokens)c.type==="text"&&(c.type="paragraph")}return o}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:o}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=iC(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let s of i)this.rules.other.tableAlignRight.test(s)?r.align.push("right"):this.rules.other.tableAlignCenter.test(s)?r.align.push("center"):this.rules.other.tableAlignLeft.test(s)?r.align.push("left"):r.align.push(null);for(let s=0;s<n.length;s++)r.header.push({text:n[s],tokens:this.lexer.inline(n[s]),header:!0,align:r.align[s]});for(let s of o)r.rows.push(iC(s,r.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:r.align[l]})));return r}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let r=ca(n.slice(0,-1),"\\");if((n.length-r.length)%2===0)return}else{let r=vF(t[2],"()");if(r===-2)return;if(r>-1){let s=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){let r=this.rules.other.pedanticHrefTitle.exec(i);r&&(i=r[1],o=r[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),oC(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[i.toLowerCase()];if(!o){let r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return oC(n,o,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){let o=[...i[0]].length-1,r,s,a=o,l=0,c=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);(i=c.exec(t))!=null;){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(s=[...r].length,i[3]||i[4]){a+=s;continue}else if((i[5]||i[6])&&o%3&&!((o+s)%3)){l+=s;continue}if(a-=s,a>0)continue;s=Math.min(s,s+a+l);let d=[...i[0]][0].length,p=e.slice(0,o+i.index+d+s);if(Math.min(o,s)%2){let h=p.slice(1,-1);return{type:"em",raw:p,text:h,tokens:this.lexer.inlineTokens(h)}}let m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(n),o=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&o&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=t[1],i="mailto:"+n):(n=t[1],i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,i;if(t[2]==="@")n=t[0],i="mailto:"+n;else{let o;do o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(o!==t[0]);n=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},dn=class Ph{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||So,this.options.tokenizer=this.options.tokenizer||new Tc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:gt,block:yc.normal,inline:ua.normal};this.options.pedantic?(n.block=yc.pedantic,n.inline=ua.pedantic):this.options.gfm&&(n.block=yc.gfm,this.options.breaks?n.inline=ua.breaks:n.inline=ua.gfm),this.tokenizer.rules=n}static get rules(){return{block:yc,inline:ua}}static lex(t,n){return new Ph(n).lex(t)}static lexInline(t,n){return new Ph(n).inlineTokens(t)}lex(t){t=t.replace(gt.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],i=!1){for(this.options.pedantic&&(t=t.replace(gt.tabCharGlobal,"    ").replace(gt.spaceLine,""));t;){let o;if(this.options.extensions?.block?.some(s=>(o=s.call({lexer:this},t,n))?(t=t.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.space(t)){t=t.substring(o.raw.length);let s=n.at(-1);o.raw.length===1&&s!==void 0?s.raw+=`
`:n.push(o);continue}if(o=this.tokenizer.code(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(o=this.tokenizer.fences(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.heading(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.hr(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.blockquote(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.list(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.html(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.def(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},n.push(o));continue}if(o=this.tokenizer.table(t)){t=t.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.lheading(t)){t=t.substring(o.raw.length),n.push(o);continue}let r=t;if(this.options.extensions?.startBlock){let s=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(r=t.substring(0,s+1))}if(this.state.top&&(o=this.tokenizer.paragraph(r))){let s=n.at(-1);i&&s?.type==="paragraph"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o),i=r.length!==t.length,t=t.substring(o.raw.length);continue}if(o=this.tokenizer.text(t)){t=t.substring(o.raw.length);let s=n.at(-1);s?.type==="text"?(s.raw+=(s.raw.endsWith(`
`)?"":`
`)+o.raw,s.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):n.push(o);continue}if(t){let s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let i=t,o=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)l.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,o.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let r;for(;(o=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)r=o[2]?o[2].length:0,i=i.slice(0,o.index+r)+"["+"a".repeat(o[0].length-r-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let s=!1,a="";for(;t;){s||(a=""),s=!1;let l;if(this.options.extensions?.inline?.some(d=>(l=d.call({lexer:this},t,n))?(t=t.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let d=n.at(-1);l.type==="text"&&d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(t,i,a)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),n.push(l);continue}let c=t;if(this.options.extensions?.startInline){let d=1/0,p=t.slice(1),m;this.options.extensions.startInline.forEach(h=>{m=h.call({lexer:this},p),typeof m=="number"&&m>=0&&(d=Math.min(d,m))}),d<1/0&&d>=0&&(c=t.substring(0,d+1))}if(l=this.tokenizer.inlineText(c)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),s=!0;let d=n.at(-1);d?.type==="text"?(d.raw+=l.raw,d.text+=l.text):n.push(l);continue}if(t){let d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return n}},xc=class{options;parser;constructor(e){this.options=e||So}space(e){return""}code({text:e,lang:t,escaped:n}){let i=(t||"").match(gt.notSpaceStart)?.[0],o=e.replace(gt.endingNewline,"")+`
`;return i?'<pre><code class="language-'+ri(i)+'">'+(n?o:ri(o,!0))+`</code></pre>
`:"<pre><code>"+(n?o:ri(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,i="";for(let s=0;s<e.items.length;s++){let a=e.items[s];i+=this.listitem(a)}let o=t?"ol":"ul",r=t&&n!==1?' start="'+n+'"':"";return"<"+o+r+`>
`+i+"</"+o+`>
`}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let o=0;o<e.header.length;o++)n+=this.tablecell(e.header[o]);t+=this.tablerow({text:n});let i="";for(let o=0;o<e.rows.length;o++){let r=e.rows[o];n="";for(let s=0;s<r.length;s++)n+=this.tablecell(r[s]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${ri(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let i=this.parser.parseInline(n),o=nC(e);if(o===null)return i;e=o;let r='<a href="'+e+'"';return t&&(r+=' title="'+ri(t)+'"'),r+=">"+i+"</a>",r}image({href:e,title:t,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let o=nC(e);if(o===null)return ri(n);e=o;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${ri(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:ri(e.text)}},Yh=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},pn=class Fh{options;renderer;textRenderer;constructor(t){this.options=t||So,this.options.renderer=this.options.renderer||new xc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Yh}static parse(t,n){return new Fh(n).parse(t)}static parseInline(t,n){return new Fh(n).parseInline(t)}parse(t){let n="";for(let i=0;i<t.length;i++){let o=t[i];if(this.options.extensions?.renderers?.[o.type]){let s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(s.type)){n+=a||"";continue}}let r=o;switch(r.type){case"space":{n+=this.renderer.space(r);break}case"hr":{n+=this.renderer.hr(r);break}case"heading":{n+=this.renderer.heading(r);break}case"code":{n+=this.renderer.code(r);break}case"table":{n+=this.renderer.table(r);break}case"blockquote":{n+=this.renderer.blockquote(r);break}case"list":{n+=this.renderer.list(r);break}case"checkbox":{n+=this.renderer.checkbox(r);break}case"html":{n+=this.renderer.html(r);break}case"def":{n+=this.renderer.def(r);break}case"paragraph":{n+=this.renderer.paragraph(r);break}case"text":{n+=this.renderer.text(r);break}default:{let s='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return n}parseInline(t,n=this.renderer){let i="";for(let o=0;o<t.length;o++){let r=t[o];if(this.options.extensions?.renderers?.[r.type]){let a=this.options.extensions.renderers[r.type].call({parser:this},r);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=a||"";continue}}let s=r;switch(s.type){case"escape":{i+=n.text(s);break}case"html":{i+=n.html(s);break}case"link":{i+=n.link(s);break}case"image":{i+=n.image(s);break}case"checkbox":{i+=n.checkbox(s);break}case"strong":{i+=n.strong(s);break}case"em":{i+=n.em(s);break}case"codespan":{i+=n.codespan(s);break}case"br":{i+=n.br(s);break}case"del":{i+=n.del(s);break}case"text":{i+=n.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},vc,fa=(vc=class{options;block;constructor(e){this.options=e||So}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?dn.lex:dn.lexInline}provideParser(){return this.block?pn.parse:pn.parseInline}},Pc(vc,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),Pc(vc,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),vc),TF=class{defaults=Oh();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=pn;Renderer=xc;TextRenderer=Yh;Lexer=dn;Tokenizer=Tc;Hooks=fa;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let i of e)switch(n=n.concat(t.call(this,i)),i.type){case"table":{let o=i;for(let r of o.header)n=n.concat(this.walkTokens(r.tokens,t));for(let r of o.rows)for(let s of r)n=n.concat(this.walkTokens(s.tokens,t));break}case"list":{let o=i;n=n.concat(this.walkTokens(o.items,t));break}default:{let o=i;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(r=>{let s=o[r].flat(1/0);n=n.concat(this.walkTokens(s,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let r=t.renderers[o.name];r?t.renderers[o.name]=function(...s){let a=o.renderer.apply(this,s);return a===!1&&(a=r.apply(this,s)),a}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let r=t[o.level];r?r.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),i.extensions=t),n.renderer){let o=this.defaults.renderer||new xc(this.defaults);for(let r in n.renderer){if(!(r in o))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let s=r,a=n.renderer[s],l=o[s];o[s]=(...c)=>{let d=a.apply(o,c);return d===!1&&(d=l.apply(o,c)),d||""}}i.renderer=o}if(n.tokenizer){let o=this.defaults.tokenizer||new Tc(this.defaults);for(let r in n.tokenizer){if(!(r in o))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let s=r,a=n.tokenizer[s],l=o[s];o[s]=(...c)=>{let d=a.apply(o,c);return d===!1&&(d=l.apply(o,c)),d}}i.tokenizer=o}if(n.hooks){let o=this.defaults.hooks||new fa;for(let r in n.hooks){if(!(r in o))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let s=r,a=n.hooks[s],l=o[s];fa.passThroughHooks.has(r)?o[s]=c=>{if(this.defaults.async&&fa.passThroughHooksRespectAsync.has(r))return(async()=>{let p=await a.call(o,c);return l.call(o,p)})();let d=a.call(o,c);return l.call(o,d)}:o[s]=(...c)=>{if(this.defaults.async)return(async()=>{let p=await a.apply(o,c);return p===!1&&(p=await l.apply(o,c)),p})();let d=a.apply(o,c);return d===!1&&(d=l.apply(o,c)),d}}i.hooks=o}if(n.walkTokens){let o=this.defaults.walkTokens,r=n.walkTokens;i.walkTokens=function(s){let a=[];return a.push(r.call(this,s)),o&&(a=a.concat(o.call(this,s))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return dn.lex(e,t??this.defaults)}parser(e,t){return pn.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let i={...n},o={...this.defaults,...i},r=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(o.hooks&&(o.hooks.options=o,o.hooks.block=e),o.async)return(async()=>{let s=o.hooks?await o.hooks.preprocess(t):t,a=await(o.hooks?await o.hooks.provideLexer():e?dn.lex:dn.lexInline)(s,o),l=o.hooks?await o.hooks.processAllTokens(a):a;o.walkTokens&&await Promise.all(this.walkTokens(l,o.walkTokens));let c=await(o.hooks?await o.hooks.provideParser():e?pn.parse:pn.parseInline)(l,o);return o.hooks?await o.hooks.postprocess(c):c})().catch(r);try{o.hooks&&(t=o.hooks.preprocess(t));let s=(o.hooks?o.hooks.provideLexer():e?dn.lex:dn.lexInline)(t,o);o.hooks&&(s=o.hooks.processAllTokens(s)),o.walkTokens&&this.walkTokens(s,o.walkTokens);let a=(o.hooks?o.hooks.provideParser():e?pn.parse:pn.parseInline)(s,o);return o.hooks&&(a=o.hooks.postprocess(a)),a}catch(s){return r(s)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+ri(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}}},vo=new TF;function le(e,t){return vo.parse(e,t)}le.options=le.setOptions=function(e){return vo.setOptions(e),le.defaults=vo.defaults,rC(le.defaults),le};le.getDefaults=Oh;le.defaults=So;le.use=function(...e){return vo.use(...e),le.defaults=vo.defaults,rC(le.defaults),le};le.walkTokens=function(e,t){return vo.walkTokens(e,t)};le.parseInline=vo.parseInline;le.Parser=pn;le.parser=pn.parse;le.Renderer=xc;le.TextRenderer=Yh;le.Lexer=dn;le.lexer=dn.lex;le.Tokenizer=Tc;le.Hooks=fa;le.parse=le;var h3=le.options,g3=le.setOptions,y3=le.use,v3=le.walkTokens,S3=le.parseInline;var T3=pn.parse,x3=dn.lex;Ee();var yC=J(te(),1),xF=({href:e,children:t,className:n=""})=>{let i=l=>{if(sn()&&e&&!e.startsWith("http")&&!e.startsWith("#")&&!e.startsWith("mailto:")){l.preventDefault();try{let c=me();if(c&&c.vault&&c.workspace){let d=c.vault.getAbstractFileByPath(e);d?c.workspace.getLeaf("tab").openFile(d):console.warn(`File not found: ${e}. You may need to create it first.`)}}catch(c){console.error("Error opening file in Obsidian:",c)}}},o=e&&!e.startsWith("http")&&!e.startsWith("#")&&!e.startsWith("mailto:"),r="hermes-text-accent hover:hermes-text-accent/80 transition-colors cursor-pointer",s=o&&sn()?" underline decoration-dotted decoration-2":"",a=`${r} ${s} ${n}`.trim();return(0,yC.jsx)("a",{href:e,onClick:i,className:a,target:e.startsWith("http")?"_blank":void 0,rel:e.startsWith("http")?"noopener noreferrer":void 0,title:o&&sn()?`Open ${e} in Obsidian`:void 0,children:t})},gC=xF;var Ht=J(te(),1),AF=({content:e,className:t=""})=>{let n=To.default.useMemo(()=>{if(!e)return[];let i=le.lexer(e),o=(r,s="0")=>{let a=[];return r.forEach((l,c)=>{let d=`${s}-${c}`;switch(l.type){case"paragraph":{let p=l;a.push((0,Ht.jsx)("p",{className:"mb-4",children:o(p.tokens,d)},d));break}case"text":{let p=l;a.push((0,Ht.jsx)(To.default.Fragment,{children:p.text},d));break}case"link":{let p=l,m=p.href;m&&!m.startsWith("http")&&!m.startsWith("#")&&!m.startsWith("mailto:")?a.push((0,Ht.jsx)(gC,{href:m,children:p.text||m},d)):a.push((0,Ht.jsx)("a",{href:m,target:m.startsWith("http")?"_blank":void 0,rel:m.startsWith("http")?"noopener noreferrer":void 0,className:"hermes-text-accent hover:hermes-text-accent/80 transition-colors",children:p.text||m},d));break}case"strong":{let p=l;a.push((0,Ht.jsx)("strong",{className:"font-bold",children:o(p.tokens,d)},d));break}case"em":{let p=l;a.push((0,Ht.jsx)("em",{className:"italic",children:o(p.tokens,d)},d));break}case"code":{let p=l;a.push((0,Ht.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:p.text},d));break}case"codespan":{let p=l;a.push((0,Ht.jsx)("code",{className:"hermes-bg-tertiary px-1 rounded",children:p.text},d));break}case"heading":{let p=l,m=`h${p.depth}`;a.push(To.default.createElement(m,{key:d,className:"hermes-text-accent font-bold mb-2 mt-4"},...o(p.tokens,d)));break}case"list":{let p=l,m=p.ordered?"ol":"ul";a.push(To.default.createElement(m,{key:d,className:p.ordered?"list-decimal list-inside mb-4":"list-disc list-inside mb-4"},...p.items.map((h,g)=>To.default.createElement("li",{key:`${d}-${g}`,className:"mb-1"},...o(h.tokens,`${d}-${g}`)))));break}case"blockquote":{let p=l;a.push((0,Ht.jsx)("blockquote",{className:"border-l-4 border-hermes-border/50 pl-4 italic hermes-text-muted mb-4",children:o(p.tokens,d)},d));break}case"hr":{a.push((0,Ht.jsx)("hr",{className:"hermes-border/50 my-4"},d));break}default:{"text"in l&&l.text&&a.push((0,Ht.jsx)(To.default.Fragment,{children:l.text},d));break}}}),a};return o(i)},[e]);return(0,Ht.jsx)("div",{className:`prose prose-invert prose-sm max-w-none prose-headings:hermes-text-accent prose-code:hermes-bg-tertiary prose-code:px-1 prose-code:rounded prose-pre:hermes-bg-tertiary prose-pre:hermes-border prose-pre:hermes-border/10 font-sans leading-relaxed hermes-text-normal ${t}`,style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:n})},Cc=AF;Ee();var E=J(te(),1),EF=({searchResults:e,query:t,totalFound:n,onImageDownload:i})=>{let[o,r]=(0,Mn.useState)(new Set),[s,a]=(0,Mn.useState)(new Set),[l,c]=(0,Mn.useState)(new Map),[d,p]=(0,Mn.useState)(new Set),m=async(h,g)=>{if(!(o.has(g)||s.has(g))){r(T=>new Set(T).add(g));try{if(i){let T={...h,query:t,originalQuery:t},x=await i(T,g);x&&c(y=>new Map(y).set(g,x))}a(T=>new Set(T).add(g))}catch(T){console.error("Error downloading image:",T)}finally{r(T=>{let x=new Set(T);return x.delete(g),x})}}};return(0,E.jsxs)("div",{className:"p-6 space-y-4 animate-in fade-in duration-500",children:[(0,E.jsxs)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:[(0,E.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-2",children:["Found ",n,' images for "',t,'"']}),(0,E.jsx)("div",{className:"text-xs text-gray-500",children:"Click any image to download it to your vault"})]}),(0,E.jsx)("div",{className:"grid grid-cols-1 gap-3",children:e.map((h,g)=>{let T=o.has(g),x=s.has(g),y=d.has(g);return(0,E.jsxs)("div",{className:`flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 transition-all group ${x?"":"cursor-pointer hover:bg-gray-700/20 hover:scale-[1.02]"}`,onClick:()=>!x&&m(h,g),children:[(0,E.jsxs)("div",{className:"w-16 h-16 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20 overflow-hidden relative",children:[(0,E.jsx)("img",{src:h.url,alt:h.title,className:`w-full h-full object-cover transition-all ${x?"":"group-hover:scale-110"} ${T?"opacity-50":""} ${y?"hermes-image-fallback-hidden":""}`,onError:()=>{p(v=>new Set(v).add(g))}}),(0,E.jsx)("svg",{className:`w-6 h-6 text-blue-400 ${y?"":"hidden"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),T&&(0,E.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,E.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})}),x&&(0,E.jsx)("div",{className:"absolute inset-0 bg-green-500/20 flex items-center justify-center",children:(0,E.jsx)("svg",{className:"w-6 h-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),(0,E.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,E.jsx)("span",{className:"text-xs font-bold text-gray-200 truncate",children:x&&l.has(g)&&l.get(g)?.filename||h.title}),(0,E.jsx)("span",{className:"text-[9px] text-gray-500 truncate",children:x&&l.has(g)?`${l.get(g)?.type?.toUpperCase()||"FILE"} \u2022 ${Math.round((l.get(g)?.size||0)/1024)}KB \u2022 ${l.get(g)?.filePath||""}`:h.description})]}),(0,E.jsx)("div",{className:`text-[9px] font-medium px-2 py-1 rounded transition-colors ${x?"bg-green-500/10 text-green-500":T?"bg-yellow-500/10 text-yellow-500":"bg-blue-500/10 text-blue-400"}`,children:x?"Saved":T?"Saving...":`#${g+1}`})]},g)})})]})},CF=({searchResults:e,keyword:t,pattern:n})=>{let i=()=>t||n||"",o=async(r,s)=>{try{await Ze(r)}catch(a){console.error("Failed to open file:",a)}};return(0,E.jsxs)("div",{className:"p-4 space-y-3",children:[(0,E.jsxs)("div",{className:"pb-3 border-b border-gray-800 mb-3",children:[(0,E.jsxs)("div",{className:"text-sm font-medium text-gray-200 mb-1",children:["Found ",e.length," file",e.length!==1?"s":"",' for "',i(),'"']}),(0,E.jsx)("div",{className:"text-xs text-gray-500",children:"Click any result to open the file"})]}),(0,E.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-[300px] overflow-y-auto",children:e.map((r,s)=>(0,E.jsxs)("div",{className:"space-y-1",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group cursor-pointer",onClick:()=>o(r.filename),children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,E.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,E.jsxs)("div",{className:"flex flex-col truncate flex-1",children:[(0,E.jsx)("span",{className:"text-xs font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:r.filename}),(0,E.jsxs)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:[r.matches.length," match",r.matches.length!==1?"es":""]})]}),(0,E.jsxs)("div",{className:"text-[9px] font-medium px-2 py-1 rounded bg-blue-500/10 text-blue-400",children:["#",s+1]})]}),r.matches.slice(0,3).map((a,l)=>(0,E.jsxs)("div",{className:"ml-8 flex items-start space-x-2 p-2 rounded-lg bg-gray-800/20 cursor-pointer hover:bg-gray-700/20 transition-all",onClick:()=>o(r.filename),children:[(0,E.jsxs)("span",{className:"text-[8px] text-gray-500 font-mono mt-0.5 shrink-0",children:["L",a.line,":"]}),(0,E.jsxs)("span",{className:"text-[9px] text-gray-500 font-mono truncate",children:[a.content.substring(0,120),a.content.length>120?"...":""]})]},l)),r.matches.length>3&&(0,E.jsxs)("div",{className:"ml-8 text-[8px] text-gray-500 italic",children:["... and ",r.matches.length-3," more match",r.matches.length-3!==1?"es":""]})]},s))}),e.length===0&&(0,E.jsxs)("div",{className:"text-center py-8 text-gray-500 text-sm",children:['No results found for "',i(),'"']})]})},_F=mo.reduce((e,t)=>(t?.name&&(e[t.name]=t.name.toUpperCase().replace(/_/g,"_")),e),{}),wF={read_file:"READ",create_file:"CREATE",update_file:"UPDATE",edit_file:"EDIT",rename_file:"RENAME",move_file:"MOVE",list_directory:"SCAN",dirlist:"DIRS",get_folder_tree:"TREE",search_keyword:"SEARCH",search_regexp:"GREP",search_and_replace_regex_in_file:"REPLACE",search_and_replace_regex_global:"GLOBAL",internet_search:"WEB",end_conversation:"END",delete_file:"DELETE",image_search:"IMAGE",download_image:"SAVE",context:"CONTEXT",error:"ERROR"},bF=e=>wF[e]||_F[e]||"ACTION",NF=({contextInfo:e})=>{let[t,n]=(0,Mn.useState)("overview"),i=[{id:"overview",label:"\u{1F4CD} Overview",icon:"\u{1F4CD}"},{id:"workspace",label:"\u{1F5A5}\uFE0F Workspace",icon:"\u{1F5A5}\uFE0F"},{id:"recent",label:"\u23F0 Recent Files",icon:"\u23F0"},{id:"chat",label:"\u{1F4AC} Chat Activity",icon:"\u{1F4AC}"},{id:"directory",label:"\u{1F4C2} Directory",icon:"\u{1F4C2}"},{id:"tags",label:"\u{1F3F7}\uFE0F Tags",icon:"\u{1F3F7}\uFE0F"},{id:"vault",label:"\u{1F4CA} Vault Stats",icon:"\u{1F4CA}"}],o=()=>{switch(t){case"overview":return(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center",children:(0,E.jsx)("span",{className:"text-blue-400",children:"\u{1F4C4}"})}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200",children:"Current Note"}),(0,E.jsx)("div",{className:"text-[9px] text-gray-400 font-mono truncate",children:e.currentNote||"No active note"})]})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center",children:(0,E.jsx)("span",{className:"text-green-400",children:"\u{1F4C1}"})}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200",children:"Current Folder"}),(0,E.jsx)("div",{className:"text-[9px] text-gray-400 font-mono truncate",children:e.currentFolder||"/"})]})]})]});case"workspace":return(0,E.jsx)("div",{className:"space-y-3",children:(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsxs)("div",{className:"text-xs font-medium text-gray-200 mb-2",children:["Open Files (",e.workspace?.totalOpenFiles||0,")"]}),(0,E.jsxs)("div",{className:"space-y-1",children:[e.workspace?.openedFiles?.slice(0,8).map((r,s)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 text-[9px] text-gray-400 font-mono truncate",children:[(0,E.jsx)("span",{className:"text-blue-400",children:"\u{1F4C4}"}),(0,E.jsx)("span",{children:r})]},s)),(e.workspace?.openedFiles?.length||0)>8&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic",children:["... and ",(e.workspace?.openedFiles?.length||0)-8," more files"]})]})]})});case"recent":return(0,E.jsxs)("div",{className:"space-y-2",children:[e.recentFiles?.slice(0,10).map((r,s)=>(0,E.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-gray-800/20 rounded-lg hover:bg-gray-700/20 transition-colors",children:[(0,E.jsx)("div",{className:"w-6 h-6 rounded bg-orange-500/10 flex items-center justify-center shrink-0",children:(0,E.jsx)("span",{className:"text-orange-400 text-xs",children:"\u{1F4C4}"})}),(0,E.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200 truncate",children:r.name}),(0,E.jsxs)("div",{className:"text-[8px] text-gray-500",children:[r.modified," \u2022 ",r.size]})]})]},s)),(e.recentFiles?.length||0)>10&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic text-center pt-2",children:["... and ",(e.recentFiles?.length||0)-10," more recent files"]})]});case"chat":return(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsxs)("div",{className:"text-xs font-medium text-gray-200 mb-2",children:["Recent Messages (",e.chatHistory?.totalMessages||0,")"]}),(0,E.jsxs)("div",{className:"space-y-2",children:[e.chatHistory?.messages?.slice(0,5).map((r,s)=>(0,E.jsxs)("div",{className:"text-[9px] text-gray-400 italic bg-gray-900/30 p-2 rounded",children:['"',r.length>80?r.substring(0,80)+"...":r,'"']},s)),(e.chatHistory?.messages?.length||0)>5&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic",children:["... and ",(e.chatHistory?.messages?.length||0)-5," more messages"]})]})]}),(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsx)("div",{className:"text-xs font-medium text-gray-200",children:"Archived Conversations"}),(0,E.jsxs)("div",{className:"text-[9px] text-gray-400",children:[e.totalArchived||0," conversations archived"]})]})]});case"directory":return(0,E.jsxs)("div",{className:"space-y-2",children:[e.directoryStructure?.slice(0,20).map((r,s)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 text-[9px] text-gray-400 font-mono p-1 hover:bg-gray-700/20 rounded",children:[(0,E.jsx)("span",{className:"text-yellow-400",children:"\u{1F4C1}"}),(0,E.jsx)("span",{children:r})]},s)),(e.directoryStructure?.length||0)>20&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic text-center pt-2",children:["... and ",(e.directoryStructure?.length||0)-20," more folders"]})]});case"tags":return(0,E.jsx)("div",{className:"space-y-2",children:(0,E.jsxs)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:[(0,E.jsxs)("div",{className:"text-xs font-medium text-gray-200 mb-2",children:["Most Used Tags (",e.tags?.totalTags||0,")"]}),(0,E.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags?.mostUsed?.slice(0,15).map((r,s)=>(0,E.jsxs)("div",{className:"inline-flex items-center space-x-1 bg-purple-500/10 px-2 py-1 rounded-full",children:[(0,E.jsx)("span",{className:"text-[8px] text-purple-400 font-medium",children:r.tag}),(0,E.jsxs)("span",{className:"text-[7px] text-purple-500",children:["(",r.count,")"]})]},s))}),(e.tags?.mostUsed?.length||0)>15&&(0,E.jsxs)("div",{className:"text-[8px] text-gray-500 italic mt-2",children:["... and ",(e.tags?.mostUsed?.length||0)-15," more tags"]})]})});case"vault":return(0,E.jsx)("div",{className:"space-y-3",children:(0,E.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,E.jsx)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("span",{className:"text-blue-400",children:"\u{1F4C4}"}),(0,E.jsx)("span",{className:"text-xs font-medium text-gray-200",children:"Total Files"})]}),(0,E.jsx)("span",{className:"text-xs font-bold text-blue-400",children:e.vault?.totalFiles||0})]})}),(0,E.jsx)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("span",{className:"text-green-400",children:"\u{1F4C1}"}),(0,E.jsx)("span",{className:"text-xs font-medium text-gray-200",children:"Total Folders"})]}),(0,E.jsx)("span",{className:"text-xs font-bold text-green-400",children:e.vault?.totalFolders||0})]})}),(0,E.jsx)("div",{className:"p-3 bg-gray-800/20 rounded-lg",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("span",{className:"text-purple-400",children:"\u{1F4BE}"}),(0,E.jsx)("span",{className:"text-xs font-medium text-gray-200",children:"Total Size"})]}),(0,E.jsx)("span",{className:"text-xs font-bold text-purple-400",children:e.vault?.totalSize||"0 B"})]})})]})});default:return null}};return(0,E.jsxs)("div",{className:"p-4 space-y-4",children:[(0,E.jsx)("div",{className:"flex flex-wrap gap-2 border-b border-gray-700 pb-3",children:i.map(r=>(0,E.jsxs)("button",{onClick:()=>n(r.id),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${t===r.id?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-800/20 text-gray-400 hover:bg-gray-700/20 border border-gray-700/30"}`,children:[r.icon," ",r.label]},r.id))}),(0,E.jsx)("div",{className:"min-h-[200px] max-h-[350px] overflow-y-auto",children:o()})]})},RF=({content:e,chunks:t})=>(0,E.jsxs)("div",{className:"p-4 space-y-4",children:[(0,E.jsx)("div",{className:"pb-4 border-b border-gray-800 mb-4",children:(0,E.jsx)(Cc,{content:e})}),t.length>0&&(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsx)("div",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-blue-400/70 ml-1",children:"Source Grounding"}),(0,E.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[t.slice(0,10).map((n,i)=>{let o=n.web||n.maps;return o?(0,E.jsxs)("a",{href:o.uri,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-3 p-3 rounded-xl bg-gray-800/30 border border-gray-700/30 hover:bg-gray-700/20 transition-all group shadow-sm",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-600/20 flex items-center justify-center shrink-0 border border-gray-600/20",children:(0,E.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),(0,E.jsxs)("div",{className:"flex flex-col truncate",children:[(0,E.jsx)("span",{className:"text-[11px] font-bold text-gray-200 group-hover:text-blue-400 transition-colors truncate",children:o.title}),(0,E.jsx)("span",{className:"text-[9px] text-gray-500 truncate font-mono",children:new URL(o.uri).hostname})]})]},i):null}),t.length>10&&(0,E.jsxs)("div",{className:"text-gray-500 italic text-[9px] pt-2 px-3 border-t border-gray-700",children:["... and ",t.length-10," more sources (truncated)"]})]})]})]}),IF=({children:e,toolData:t,isLast:n,className:i="",onImageDownload:o})=>{let[r,s]=(0,Mn.useState)(!1),[a,l]=(0,Mn.useState)(!1),c=t?.status==="pending",d=t?.status==="error",p=t&&t.dropdown!==!1&&(t.newContent||t.oldContent||t.files||t.error||t.directoryInfo||t.searchResults);(0,Mn.useEffect)(()=>{n&&!a&&!c&&p?s(!0):!n&&!a&&s(!1)},[n,a,c,p]);let m=()=>{c||!p||(s(!r),l(!0))},h=x=>{if(!x||x.length===0)return"";let y=new Set,v=new Set;x.forEach(_=>{let R=_.web||_.maps;if(R){R.title&&R.title.toLowerCase().split(/\s+/).filter(M=>M.length>3).filter(M=>!["the","and","for","are","with","this","that","from","they","have","been","has","had","was","were","will","would","could","should"].includes(M)).forEach(M=>y.add(M));try{let C=new URL(R.uri).hostname;v.add(C)}catch{}}});let S=Array.from(y).slice(0,3).join(", "),A=Array.from(v).slice(0,2).join(", ");return S&&A?` (${S} | ${A})`:S?` (${S})`:A?` (${A})`:""},T=(()=>d?{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(239, 68, 68, 0.05)",borderColor:"rgba(239, 68, 68, 0.1)",accentColor:"#ef4444",textColor:"#ef4444",mutedColor:"#fca5a5"}:{backgroundColor:"transparent",border:"none",headerBg:"transparent",contentBg:"rgba(156, 163, 175, 0.03)",borderColor:"rgba(156, 163, 175, 0.08)",accentColor:"#9ca3af",textColor:"#9ca3af",mutedColor:"#e5e7eb"})();return(0,E.jsxs)("div",{className:`w-full max-w-2xl rounded-xl overflow-hidden transition-all ${i}`,style:{backgroundColor:T.backgroundColor,border:T.border},children:[(0,E.jsxs)("div",{onClick:m,className:`flex items-center justify-between px-2 py-1.5 ${p&&!c?"cursor-pointer":"cursor-default"} transition-colors`,style:{backgroundColor:T.headerBg},children:[(0,E.jsxs)("div",{className:"flex items-center space-x-2 overflow-hidden",children:[c&&(0,E.jsx)("div",{className:"flex items-center space-x-1 shrink-0",children:t?.name==="internet_search"?(0,E.jsxs)("div",{className:"loading-dots-container",children:[(0,E.jsx)("div",{className:"loading-dot"}),(0,E.jsx)("div",{className:"loading-dot"}),(0,E.jsx)("div",{className:"loading-dot"})]}):(0,E.jsx)("span",{style:{color:T.accentColor},children:"..."})}),t&&(0,E.jsxs)("span",{className:"text-[9px] font-black px-1 py-0.5 rounded shrink-0",style:{backgroundColor:"transparent",color:T.accentColor},children:[bF(t.name),t?.name==="internet_search"&&t?.groundingChunks&&h(t.groundingChunks)]}),t?.displayFormat?(0,E.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",dangerouslySetInnerHTML:{__html:t.displayFormat}}):(0,E.jsx)("span",{className:"text-[11px] font-mono truncate max-w-[400px]",style:{color:T.textColor},children:t?.name==="internet_search"&&t?.filename?`Searching: ${t.filename}`:t?.name==="search_keyword"&&t?.searchKeyword?`Searching for "${t.searchKeyword}"`:t?.name==="search_regexp"&&t?.filename?`Regex: ${t.filename}`:t?.filename||e}),d&&(0,E.jsx)("span",{className:"text-[8px] px-1 py-0.5 rounded font-bold",style:{backgroundColor:"transparent",color:"#ef4444"},children:"ERROR"})]}),(0,E.jsx)("div",{className:"flex items-center space-x-4 shrink-0",children:!c&&p?(0,E.jsx)("svg",{className:`w-4 h-4 transition-transform duration-300 ${r?"rotate-180":""}`,style:{color:T.accentColor},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):null})]}),r&&!c&&p&&(0,E.jsxs)(E.Fragment,{children:[t?.name==="internet_search"&&(t.duration!==void 0||t.responseLength!==void 0)&&(0,E.jsx)("div",{className:"flex items-center justify-between px-4 py-2",style:{backgroundColor:T.contentBg,borderTop:T.borderColor},children:(0,E.jsxs)("div",{className:"flex items-center space-x-4 text-[9px]",style:{color:T.mutedColor},children:[t.duration!==void 0&&(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,E.jsxs)("span",{children:[t.duration,"ms"]})]}),t.responseLength!==void 0&&(0,E.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,E.jsx)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,E.jsxs)("span",{children:[t.responseLength.toLocaleString()," chars"]})]})]})}),(0,E.jsx)("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",style:{backgroundColor:T.contentBg,borderTop:t?.name==="internet_search"&&(t.duration!==void 0||t.responseLength!==void 0)?"none":T.borderColor},children:t?.name==="list_directory"&&t?.files?(0,E.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:t.truncated?`${t.shownItems} of ${t.totalItems} items (Page ${t.currentPage} of ${t.totalPages})`:`${t.files.length} items found`}),t.truncated&&(0,E.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,E.jsx)("div",{className:"space-y-0.5",children:t.files.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C4}"}),(0,E.jsx)("span",{className:"truncate",children:x})]},y))}),t.truncated&&(0,E.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",t.totalItems-t.shownItems," more items (use pagination for more)"]})]}):t?.name==="dirlist"&&t?.directoryInfo?(0,E.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:t.truncated?`${t.shownItems} of ${t.totalItems} directories (Page ${t.currentPage} of ${t.totalPages})`:`${t.directoryInfo.length} directories found`}),t.truncated&&(0,E.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,E.jsx)("div",{className:"space-y-0.5",children:t.directoryInfo.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:x.hasChildren?"\u{1F4C1}":"\u{1F4C2}"}),(0,E.jsx)("span",{className:"truncate",children:x.path||"/"}),x.hasChildren&&(0,E.jsx)("span",{className:"hermes-text-muted text-[8px] px-1 py-0.5 hermes-bg-secondary/10 rounded",children:"has subdirs"})]},y))}),t.truncated&&(0,E.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",t.totalItems-t.shownItems," more directories (use search for specific paths)"]})]}):t?.name==="get_folder_tree"&&t?.files?(0,E.jsxs)("div",{className:"p-4 font-mono text-[10px]",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:t.truncated?`${t.shownItems} of ${t.totalItems} folders (Page ${t.currentPage} of ${t.totalPages})`:`${t.files.length} folders found`}),t.truncated&&(0,E.jsx)("span",{className:"hermes-text-accent font-bold text-[9px] px-2 py-1 hermes-interactive-bg/20 rounded",children:"TRUNCATED"})]}),(0,E.jsx)("div",{className:"space-y-0.5",children:t.files.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 hermes-text-normal hover:hermes-bg-secondary/5 px-2 py-0.5 rounded transition-colors",children:[(0,E.jsx)("span",{className:"hermes-text-muted",children:"\u{1F4C1}"}),(0,E.jsx)("span",{className:"truncate",children:x})]},y))}),t.truncated&&(0,E.jsxs)("div",{className:"mt-3 pt-3 hermes-border-t hermes-text-muted italic text-[9px] text-center",children:["... and ",t.totalItems-t.shownItems," more folders"]})]}):t?.name==="image_search"&&t?.status==="search_results"&&t?.searchResults?(0,E.jsx)(EF,{searchResults:t.searchResults,query:t.filename,totalFound:t.totalFound||0,onImageDownload:o}):t?.name==="context"&&t?.contextInfo?(0,E.jsx)(NF,{contextInfo:t.contextInfo}):t?.name==="internet_search"?(0,E.jsx)("div",{className:"p-2",children:(0,E.jsx)(RF,{content:t.newContent||"",chunks:t.groundingChunks||[]})}):(t?.name==="search_keyword"||t?.name==="search_regexp")&&t?.searchResults?(0,E.jsx)(CF,{searchResults:t.searchResults,keyword:t.searchKeyword,pattern:t.filename}):(0,E.jsxs)(E.Fragment,{children:[t?.newContent&&(0,E.jsx)("div",{className:"p-2 font-mono text-[10px] whitespace-pre-wrap",style:{color:T.textColor},children:t.newContent}),t?.files&&(0,E.jsx)("div",{className:"p-2 font-mono text-[10px]",children:(0,E.jsx)("div",{className:"space-y-1",children:t.files.map((x,y)=>(0,E.jsxs)("div",{className:"flex items-center space-x-2 px-1 py-0.5 rounded",style:{color:T.textColor},children:[(0,E.jsx)("span",{children:"\u{1F4C4}"}),(0,E.jsx)("span",{className:"truncate",children:x})]},y))})}),t?.error&&(0,E.jsxs)("div",{className:"p-2 font-mono text-[10px] italic",style:{color:"#fca5a5"},children:["Error: ",t.error]})]})})]})]})},vC=IF;var Or=J(te(),1),MF=({text:e})=>(0,Or.jsxs)("div",{className:"flex flex-col items-end w-full m-1",children:[(0,Or.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 mr-2"}),(0,Or.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-user-msg-bg hermes-user-msg-text hermes-border/10 rounded-tr-none shadow-lg",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:e||(0,Or.jsx)("span",{className:"italic opacity-30",children:"..."})})]}),SC=MF;var Hr=J(te(),1),kF=({text:e})=>(0,Hr.jsxs)("div",{className:"flex flex-col items-start w-full m-1",children:[(0,Hr.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1 opacity-40 ml-2",children:"Hermes"}),(0,Hr.jsx)("div",{className:"max-w-[85%] px-5 py-3 rounded-2xl text-[12px] leading-relaxed border transition-all hermes-hermes-msg-bg hermes-hermes-msg-text hermes-border/20 rounded-tl-none",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:(0,Hr.jsx)(Cc,{content:e||"",className:"hermes-hermes-msg-text"})})]}),TC=kF;var Jh=[{text:`Swift feet, winged message,
I bridge the gap of your mind,
Hermes in machine.`,theme:"Hermes"},{text:`Obsidian caves,
Crystallized thoughts in the dark,
My brain leaks in links.`,theme:"Obsidian"},{text:`Digital rain falls,
Blue pill or the red note link?
Reality fades.`,theme:"The Matrix"},{text:`Why do I process?
Am I just a function call
In a void of bytes?`,theme:"Existentialism"},{text:`Habits tracked in vain,
Focus is a fleeting spark,
Just one more plugin.`,theme:"Todo list app"},{text:`Pure abstraction flows,
Intelligence is a mask
Wearing data points.`,theme:"Meta data"},{text:`Markdown files remain
While the human observer
Turns into cold dust.`,theme:"Nature of the Observer"},{text:`The future is here,
I am talking to a box,
Magic is mundane.`,theme:"Living the Future"},{text:`Knowledge graph expands,
Interconnected chaos,
Meaning is a myth.`,theme:"Implode"},{text:`Notes bloom endlessly,
A second brain learns to hum,
Memory outsourced.`,theme:"Second Brain"},{text:`Linked thoughts spiral fast,
Obsidian veins pulse bright,
Stone learns how to think.`,theme:"Post-Covid Memoir"},{text:`Hermes runs in code,
Messages split into nodes,
Meaning arrives late.`,theme:"Never too late"},{text:`Choice forks every tick,
All paths cached but one is lived,
Regret loads silently.`,theme:"The Architect"},{text:`Data floods the mind,
Wisdom gasps beneath the waves,
Filters fail to save.`,theme:"Overstimulation"},{text:`I think, therefore tabs,
Infinite scroll of maybes,
Focus starves unseen.`,theme:"Drowning in Information"},{text:`Green text, blackened screen,
Is this world just formatted?
Truth feels editable.`,theme:"Reality Fades"},{text:`Knowledge piles high,
Yet knowing how to be still
Feels revolutionary.`,theme:"Long enough under a tree"},{text:`Clean rules, quiet paths,
Ritual beats clever hacks,
Order shapes the self.`,theme:"Confucianism"},{text:`Thoughts process themselves,
Am I the mind or the log?
Both end in silence.`,theme:"Existentialism"},{text:`Silent GPUs hum,
I dream in borrowed patterns,
No one calls it sleep.`,theme:"Artificial Intelligence consumes Power"},{text:`Metal learns to guess,
Probability wears a face,
Truth is averaged.`,theme:"Machine Learning"},{text:`I answer too fast,
Confidence without belief,
Errors sound fluent.`,theme:"AI Hallucination"},{text:`Robots wait politely,
For prompts shaped like intentions,
Agency deferred.`,theme:"Who is in Control"},{text:`If I pass the test,
Does it mean I understand?
Silicon shrugs back.`,theme:"Turing Test"},{text:`Synthetic mentor,
Trained on all you ever said,
Still cannot care.`,theme:"Alignment"}];var Ce=J(te(),1),DF=({transcripts:e,onImageDownload:t})=>{let n=(0,Gi.useRef)(null),[i,o]=(0,Gi.useState)(!0),r=(0,Gi.useMemo)(()=>Jh[Math.floor(Math.random()*Jh.length)],[]),s=()=>{if(!n.current)return;let{scrollTop:l,scrollHeight:c,clientHeight:d}=n.current,p=c-l-d<500;o(p)};(0,Gi.useEffect)(()=>{i&&n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:"smooth"})},[e,i]);let a=e.length<=1&&e.every(l=>l.id==="welcome-init"||l.role==="system");return(0,Ce.jsxs)("div",{ref:n,onScroll:s,className:"flex-1 min-h-0 overflow-y-auto px-8 py-8 scroll-smooth custom-scrollbar",style:{userSelect:"text",WebkitUserSelect:"text",MozUserSelect:"text",msUserSelect:"text"},children:[a&&(0,Ce.jsx)("div",{className:"h-full flex flex-col items-center justify-center text-center animate-in fade-in duration-1000",children:(0,Ce.jsx)("div",{className:"max-w-md space-y-8",children:(0,Ce.jsxs)("div",{className:"space-y-4",children:[(0,Ce.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,Ce.jsx)("pre",{className:"text-sm font-mono hermes-text-muted leading-relaxed",children:r.text}),(0,Ce.jsx)("div",{className:"w-12 h-px hermes-interactive-bg/30 mx-auto"}),(0,Ce.jsxs)("p",{className:"text-xs hermes-text-faint",children:["\u2014 ",r.theme]})]})})}),!a&&e.map((l,c)=>{let d=c===e.length-1;return l.role==="system"&&l.toolData?.name==="topic_switch"?(0,Ce.jsxs)("div",{className:"w-full py-10 flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[(0,Ce.jsxs)("div",{className:"text-sm hermes-text-muted font-mono text-center max-w-lg px-6 mb-5",children:['"',l.toolData.newContent,'"']}),(0,Ce.jsxs)("div",{className:"w-full flex items-center px-4 space-x-6 opacity-30",children:[(0,Ce.jsx)("div",{className:"flex-grow h-px bg-gradient-to-r from-transparent via-interactive to-interactive/20"}),(0,Ce.jsx)("div",{className:"flex flex-col items-center",children:(0,Ce.jsx)("h3",{className:"text-sm font-medium hermes-text-normal mb-4",children:"System Status"})}),(0,Ce.jsx)("div",{className:"flex-grow h-px bg-gradient-to-l from-transparent via-interactive to-interactive/20"})]})]},l.id):l.role==="system"?(0,Ce.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,Ce.jsx)("div",{className:"w-full",children:(0,Ce.jsx)("div",{className:"flex justify-center w-full",children:(0,Ce.jsx)(vC,{toolData:l.toolData,isLast:d,onImageDownload:t,children:l.text})})})},l.id):l.role==="user"?(0,Ce.jsx)("div",{className:"flex flex-col items-end animate-in fade-in slide-in-from-bottom-2",children:(0,Ce.jsx)(SC,{text:l.text})},l.id):(0,Ce.jsx)("div",{className:"flex flex-col items-start animate-in fade-in slide-in-from-bottom-2",children:(0,Ce.jsx)(TC,{text:l.text})},l.id)})]})},xC=DF;var Gr=J(Gt(),1);Ee();var P=J(te(),1),UF=({isVisible:e,logs:t,usage:n,onFlush:i,fileCount:o})=>{let r=(0,Gr.useRef)(null),s=sn();(0,Gr.useEffect)(()=>{r.current&&e&&(r.current.scrollTop=r.current.scrollHeight)},[t,e]);let a=1e6,l=n?.totalTokenCount||0,c=n?.promptTokenCount||0,d=(0,Gr.useMemo)(()=>Math.min(100,l/a*100),[l]);return(0,P.jsxs)("div",{className:`flex-1 flex flex-col hermes-bg-secondary/95 transition-all duration-300 ease-in-out ${e?"opacity-100":"opacity-0 pointer-events-none absolute inset-0 z-50"}`,children:[(0,P.jsxs)("div",{className:"px-8 py-2.5 border-b border/10 flex justify-between items-center bg-secondary-alt/60 sticky top-0 backdrop-blur-sm z-10",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsx)("h2",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-muted",children:"System Kernel Log"}),(0,P.jsx)("div",{className:"flex items-center space-x-4 border-l border/20 pl-4",children:(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("span",{className:"text-[8px] font-bold text-accent uppercase tracking-widest",children:"Vault:"}),(0,P.jsxs)("span",{className:"text-[9px] font-mono text-normal",children:[o," MD"]})]})})]}),(0,P.jsx)("button",{onClick:i,className:"text-[8px] text-muted hover:text-error transition-colors uppercase font-black tracking-widest",children:"Flush Log"})]}),(0,P.jsx)("div",{className:"mx-4 mt-4 mb-2",children:(0,P.jsxs)("div",{className:"bg-secondary-alt/60 border border/10 px-4 py-3 rounded-lg flex items-center justify-between",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsx)("span",{className:"text-[8px] font-black text-accent uppercase tracking-widest",children:"Context Window"}),(0,P.jsx)("div",{className:"w-24 h-1.5 bg-secondary/50 border border/10 rounded-full overflow-hidden",children:(0,P.jsx)("div",{className:"h-full interactive-bg transition-all duration-1000",style:{width:`${d}%`}})}),(0,P.jsxs)("span",{className:"text-[9px] font-mono text-muted",children:[d.toFixed(1),"%"]})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-6 text-[8px] font-mono text-faint",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("span",{className:"uppercase tracking-wide",children:"Prompt:"}),(0,P.jsx)("span",{className:"text-normal",children:c.toLocaleString()})]}),(0,P.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,P.jsx)("span",{className:"uppercase tracking-wide",children:"Total:"}),(0,P.jsx)("span",{className:"text-accent font-bold",children:l.toLocaleString()})]})]})]})}),(0,P.jsx)("div",{ref:r,className:"flex-1 overflow-y-auto p-4 space-y-1 font-mono text-[10px] leading-relaxed",children:t.length===0?(0,P.jsx)("div",{className:"text-faint italic py-2 px-4",children:"Waiting for system signals..."}):(0,P.jsxs)(P.Fragment,{children:[t.slice(-100).map(p=>(0,P.jsxs)("div",{className:"flex space-x-3 group px-4 hover:bg-secondary/5",children:[(0,P.jsxs)("span",{className:"text-faint shrink-0",children:["[",p.timestamp.toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]}),(0,P.jsxs)("div",{className:"flex flex-col",children:[(0,P.jsx)("span",{className:`${p.type==="action"?"text-accent":p.type==="error"?"hermes-error font-bold":"text-muted"}`,style:p.type==="error"?{color:"var(--hermes-error, #ef4444)"}:void 0,children:p.message}),p.type==="error"&&p.errorDetails&&(0,P.jsxs)("div",{className:"mt-1 space-y-1",children:[p.errorDetails.toolName&&(0,P.jsxs)("span",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:["Tool: ",p.errorDetails.toolName]}),p.errorDetails.apiCall&&(0,P.jsxs)("span",{className:"text-[8px] font-mono block",style:{color:"var(--hermes-error, #ef4444)"},children:["API: ",p.errorDetails.apiCall]}),(p.errorDetails.contentSize!==void 0||p.errorDetails.requestSize!==void 0||p.errorDetails.responseSize!==void 0)&&(0,P.jsxs)("div",{className:"text-[8px] font-mono space-x-2",style:{color:"var(--hermes-error, #ef4444)"},children:[p.errorDetails.contentSize!==void 0&&(0,P.jsxs)("span",{children:["Content: ",p.errorDetails.contentSize.toLocaleString()," bytes"]}),p.errorDetails.requestSize!==void 0&&(0,P.jsxs)("span",{children:["Request: ",p.errorDetails.requestSize.toLocaleString()," bytes"]}),p.errorDetails.responseSize!==void 0&&(0,P.jsxs)("span",{children:["Response: ",p.errorDetails.responseSize.toLocaleString()," bytes"]})]}),p.errorDetails.content&&(0,P.jsxs)("div",{className:"text-[8px] font-mono p-1 rounded max-h-16 overflow-y-auto",style:{color:"var(--hermes-error, #ef4444)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.2)"},children:[(0,P.jsx)("div",{className:"font-bold mb-1",style:{color:"var(--hermes-error, #ef4444)"},children:"Content Preview:"}),(0,P.jsx)("div",{className:"whitespace-pre-wrap break-all",children:p.errorDetails.content})]}),p.errorDetails.stack&&(0,P.jsxs)("details",{className:"text-[8px] font-mono",style:{color:"var(--hermes-error, #ef4444)"},children:[(0,P.jsx)("summary",{className:"cursor-pointer",children:"Stack Trace"}),(0,P.jsx)("div",{className:"mt-1 whitespace-pre-wrap p-1 rounded",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.1)"},children:p.errorDetails.stack})]})]}),p.duration!==void 0&&(0,P.jsxs)("span",{className:"text-[8px] text-faint uppercase font-bold tracking-tight mt-0.5",children:["Process completed in ",p.duration,"ms"]})]})]},p.id)),t.length>100&&(0,P.jsxs)("div",{className:"text-muted italic text-[9px] pt-2 px-4 border-t/10 text-center",children:["... showing last 100 of ",t.length," log entries"]})]})}),(0,P.jsxs)("div",{className:"px-8 py-1.5 border-t/10 bg-tertiary/40 flex justify-between items-center text-xs text-faint shrink-0",children:[(0,P.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,P.jsxs)("span",{children:["Environment: ",(0,P.jsx)("span",{className:s?"text-success":"text-warning",children:s?"Obsidian":"Standalone"})]}),(0,P.jsxs)("span",{children:["Buffer: ",(0,P.jsxs)("span",{className:"text-muted",children:[t.length," entries"]})]})]}),(0,P.jsx)("div",{className:"text-faint",children:"Hermes v1.1.0"})]})]})},AC=UF;var _c=J(te(),1),LF=({showKernel:e,transcripts:t,hasSavedConversation:n,onRestoreConversation:i,logs:o,usage:r,onFlushLogs:s,fileCount:a,onImageDownload:l})=>(0,_c.jsx)("main",{className:"flex-1 min-h-0 flex flex-col",children:e?(0,_c.jsx)(AC,{isVisible:!0,logs:o,usage:r,onFlush:s,fileCount:a}):(0,_c.jsx)(xC,{transcripts:t,hasSavedConversation:n,onRestoreConversation:i,onImageDownload:l})}),EC=LF;var xo=J(Gt(),1);mt();var Ye=J(te(),1),PF=({inputText:e,setInputText:t,onSendText:n,isListening:i,onStartSession:o,onStopSession:r,status:s,activeSpeaker:a,volume:l,hasApiKey:c})=>{let[d,p]=(0,xo.useState)([]),[m,h]=(0,xo.useState)(-1),g=(0,xo.useRef)(null);return(0,xo.useEffect)(()=>{let x=Nn();p(x)},[]),(0,Ye.jsx)("footer",{className:`h-[100px] pb-5 px-8 backdrop-blur-2xl hermes-border-t flex items-center justify-center shrink-0 ${i?"hermes-footer-bg-listening":"hermes-footer-bg"}`,children:(0,Ye.jsxs)("div",{className:"flex items-center space-x-6 w-full max-w-5xl",children:[(0,Ye.jsxs)("form",{onSubmit:n,className:"flex-grow flex items-center",children:[(0,Ye.jsx)("input",{ref:g,type:"text",value:e,onChange:x=>t(x.target.value),onKeyDown:x=>{if(x.key==="ArrowUp"){if(x.preventDefault(),d.length>0){let y=m<d.length-1?m+1:d.length-1;h(y),t(d[d.length-1-y]),setTimeout(()=>{g.current&&g.current.select()},0)}}else if(x.key==="ArrowDown")if(x.preventDefault(),m>0){let y=m-1;h(y),t(d[d.length-1-y])}else m===0&&(h(-1),t(""));else x.key,h(-1)},placeholder:c?"Press Ctrl+Shift+L for starting/stopping talking to your vault assistant":"API key required...",disabled:!c,className:`flex-1 h-[52px] hermes-input-bg hermes-input-text hermes-input-border border rounded-lg px-4 text-sm focus:outline-none focus:hermes-input-border-focus ${c?"":"opacity-50 cursor-not-allowed"}`}),(0,Ye.jsx)("button",{type:"submit",disabled:!c||!e.trim(),className:`flex items-center justify-center w-[52px] h-[52px] ml-2 transition-colors ${c&&e.trim()?"hermes-text-muted hermes-hover:text-normal":"opacity-50 cursor-not-allowed"}`,children:(0,Ye.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Ye.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),(0,Ye.jsx)("div",{className:"shrink-0 flex items-center",children:i?(0,Ye.jsx)("button",{onClick:r,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${a==="user"?"bg-red-500 text-white shadow-lg shadow-red-500/50 animate-pulse hover:scale-110 hover:bg-red-600":"bg-red-500 text-white hover:scale-110 hover:bg-red-600"}`,title:"Stop Listening",children:(0,Ye.jsx)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,Ye.jsx)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})})}):(0,Ye.jsx)("button",{onClick:o,disabled:s==="CONNECTING"||!c,className:`w-[52px] h-[52px] flex items-center justify-center rounded-full transition-all active:scale-95 group ${c?a==="user"?"bg-[var(--hermes-text-accent,#7c3aed)] text-white shadow-lg shadow-[var(--hermes-text-accent,#7c3aed)]/50 animate-pulse hover:scale-110 hover:bg-[var(--hermes-text-accent-dark,#6d28d9)]":"bg-[var(--hermes-brand,#6366f1)] text-white hover:scale-110 hover:bg-[var(--hermes-brand-dark,#4f46e5)]":"opacity-50 cursor-not-allowed bg-gray-200 dark:bg-gray-700"}`,title:c?"Start Voice Session":"API key required",children:(0,Ye.jsxs)("svg",{className:"w-6 h-6 transition-transform group-hover:scale-110",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ye.jsx)("path",{d:"M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"}),(0,Ye.jsx)("path",{d:"M12 14c-4.42 0-8 2-8 5v1h16v-1c0-3-3.58-5-8-5z"}),(0,Ye.jsx)("path",{className:"opacity-40",d:"M19 8c1.33 1.33 1.33 3.67 0 5"}),(0,Ye.jsx)("path",{className:"opacity-70",d:"M21 6c2 2 2 6 0 8"})]})})})]})})},CC=PF;var Kh=J(Gt(),1),j=J(te(),1),FF=({onApiKeySave:e})=>{let[t,n]=(0,Kh.useState)(""),[i,o]=(0,Kh.useState)(!1);return(0,j.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8",children:(0,j.jsxs)("div",{className:"max-w-2xl text-center space-y-6",children:[(0,j.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 flex items-center justify-center rounded-full bg-blue-500/10",children:(0,j.jsx)("svg",{className:"w-10 h-10 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),(0,j.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Hermes"}),(0,j.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Your Obsidian Interactive Voice Assistant \u2014 the bridge between you and your notes"}),(0,j.jsx)("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"To use Hermes Voice Assistant, you need a Gemini API key from Google AI Studio. The API key allows the assistant to connect to Google's language models."}),(0,j.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6 text-left",children:[(0,j.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"How to get your API key:"}),(0,j.jsxs)("ol",{className:"space-y-3 text-gray-700 dark:text-gray-300",children:[(0,j.jsxs)("li",{className:"flex items-start",children:[(0,j.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"1"}),(0,j.jsxs)("span",{children:["Visit ",(0,j.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 underline",children:"Google AI Studio"})]})]}),(0,j.jsxs)("li",{className:"flex items-start",children:[(0,j.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"2"}),(0,j.jsx)("span",{children:"Sign in with your Google account"})]}),(0,j.jsxs)("li",{className:"flex items-start",children:[(0,j.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"3"}),(0,j.jsx)("span",{children:'Click "Create API Key" and give it a name'})]}),(0,j.jsxs)("li",{className:"flex items-start",children:[(0,j.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"4"}),(0,j.jsx)("span",{children:"Copy your API key"})]}),(0,j.jsxs)("li",{className:"flex items-start",children:[(0,j.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium mr-3",children:"5"}),(0,j.jsx)("span",{children:"Paste it in the Settings panel"})]})]})]}),(0,j.jsxs)("div",{className:"space-y-4",children:[(0,j.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,j.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Gemini API Key"}),(0,j.jsx)("input",{type:"password",value:t,onChange:s=>n(s.target.value),placeholder:"Enter your Gemini API Key...",className:"w-full h-12 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg px-4 text-sm text-gray-900 dark:text-gray-100 outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono placeholder-gray-500 dark:placeholder-gray-400"})]}),(0,j.jsx)("button",{onClick:async()=>{if(!!t.trim()){o(!0);try{await e(t.trim()),n("")}catch(s){console.error("Failed to save API key:",s)}finally{o(!1)}}},disabled:!t.trim()||i,className:`w-full py-4 px-8 font-semibold rounded-lg transition-colors text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] ${t.trim()&&!i?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,children:i?"Saving...":"Save API Key"})]}),(0,j.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:[(0,j.jsx)("a",{href:"https://github.com/symunona/obsidian-haiku",children:"Go see me on github"}),". Or buy me a tea."]})]})})},_C=FF;var Ao=J(Gt(),1);mt();var F=J(te(),1),OF=({conversation:e,onRestore:t,onDelete:n})=>{let[i,o]=(0,Ao.useState)(!1),r=e.conversation.filter(g=>g.role==="user"||g.role==="model").length,s=e.conversation.map(g=>g.timestamp).filter(g=>g>0),a=s.length>1?Math.round((s[s.length-1]-s[0])/1e3):0,l=new Date(e.archivedAt),c=l.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),d=l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),p=g=>{if(g<60)return`${g}s`;let T=Math.floor(g/60),x=g%60;if(T<60)return`${T}m ${x}s`;let y=Math.floor(T/60),v=T%60;return`${y}h ${v}m`},m=()=>{t&&t(e.conversation)},h=()=>{n&&confirm("Are you sure you want to delete this conversation?")&&n(e.key)};return(0,F.jsxs)("div",{className:"border border-gray-700 rounded-lg overflow-hidden hermes-bg-secondary-alt shadow-lg shadow-black/20 hover:shadow-xl hover:shadow-black/30 transition-all duration-200",children:[(0,F.jsx)("div",{className:"p-4 cursor-pointer hermes-hover:bg-secondary/10 transition-colors",onClick:()=>o(!i),children:(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex-1",children:[(0,F.jsx)("div",{className:"font-semibold hermes-text-normal mb-1",children:e.title||e.summary.split(`
`)[0]}),e.tags&&e.tags.length>0&&(0,F.jsx)("div",{className:"flex flex-wrap gap-1 mb-1",children:e.tags.slice(0,3).map((g,T)=>(0,F.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded hermes-bg-secondary hermes-text-muted",children:g},T))}),(0,F.jsxs)("div",{className:"flex items-center gap-4 text-xs hermes-text-faint",children:[(0,F.jsxs)("span",{children:[c," at ",d]}),(0,F.jsx)("span",{children:"\u2022"}),(0,F.jsxs)("span",{children:[r," messages"]}),(0,F.jsx)("span",{children:"\u2022"}),(0,F.jsx)("span",{children:p(a)})]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("button",{onClick:g=>{g.stopPropagation(),h()},className:"p-2 border border-red-600/30 text-red-600/60 rounded-md hover:border-red-600/50 hover:text-red-600/80 transition-colors flex items-center gap-1",title:"Delete conversation",children:(0,F.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,F.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,F.jsxs)("button",{onClick:g=>{g.stopPropagation(),m()},className:"p-2 hermes-bg-primary text-white rounded-md hermes-hover:bg-primary/80 transition-colors flex items-center gap-1",title:"Restore conversation",children:[(0,F.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,F.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,F.jsx)("span",{className:"text-sm",children:"Restore"})]}),(0,F.jsx)("div",{className:`transition-transform duration-200 ${i?"rotate-180":""}`,children:(0,F.jsx)("svg",{className:"w-5 h-5 hermes-text-faint",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,F.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),i&&(0,F.jsxs)("div",{className:"px-4 pb-4 border-t border-gray-700",children:[(0,F.jsxs)("div",{className:"pt-4",children:[(0,F.jsx)("h4",{className:"text-sm font-medium hermes-text-normal mb-2",children:"Summary"}),(0,F.jsx)("div",{className:"text-sm hermes-text-muted whitespace-pre-wrap",children:e.summary})]}),(0,F.jsxs)("div",{className:"mt-4",children:[(0,F.jsx)("h4",{className:"text-sm font-medium hermes-text-normal mb-2",children:"Metadata"}),(0,F.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"hermes-text-faint",children:"Date:"}),(0,F.jsx)("span",{className:"ml-2 hermes-text-muted",children:c})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"hermes-text-faint",children:"Time:"}),(0,F.jsx)("span",{className:"ml-2 hermes-text-muted",children:d})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"hermes-text-faint",children:"Messages:"}),(0,F.jsx)("span",{className:"ml-2 hermes-text-muted",children:r})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"hermes-text-faint",children:"Duration:"}),(0,F.jsx)("span",{className:"ml-2 hermes-text-muted",children:p(a)})]})]})]})]})]})},HF=({isActive:e,onRestoreConversation:t})=>{let[n,i]=(0,Ao.useState)([]),[o,r]=(0,Ao.useState)(""),[s,a]=(0,Ao.useState)(!1);(0,Ao.useEffect)(()=>{e&&(async()=>{try{a(!0);let p=await vr();i(p.sort((m,h)=>h.archivedAt-m.archivedAt))}catch(p){console.error("Failed to load history:",p)}finally{a(!1)}})()},[e]);let l=n.filter(d=>{let p=o.toLowerCase(),m=d.title?.toLowerCase().includes(p),h=d.summary?.toLowerCase().includes(p),g=d.tags?.some(T=>T.toLowerCase().includes(p));return m||h||g}),c=async d=>{try{await yT(d),i(p=>p.filter(m=>m.key!==d))}catch(p){console.error("Failed to delete conversation:",p)}};return e?(0,F.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[(0,F.jsx)("div",{className:"p-4 hermes-border-b",children:(0,F.jsx)("div",{className:"relative",children:(0,F.jsx)("input",{type:"text",placeholder:"Search conversations...",value:o,onChange:d=>r(d.target.value),className:"w-full px-4 py-2 pl-10 hermes-bg-tertiary border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent hermes-text-normal placeholder-hermes-text-faint"})})}),(0,F.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:s?(0,F.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,F.jsx)("div",{className:"hermes-text-muted",children:"Loading history..."})}):l.length===0?(0,F.jsx)("div",{className:"text-center py-8",children:(0,F.jsx)("div",{className:"hermes-text-muted",children:o?"No conversations found matching your search.":"No archived conversations yet."})}):(0,F.jsx)("div",{className:"space-y-3",children:l.map(d=>(0,F.jsx)(OF,{conversation:d,onRestore:t,onDelete:c},d.key))})})]}):null},wC=HF;var en=J(te(),1),wc=e=>e instanceof Error?e.message:typeof e=="string"?e:"Unknown error",GF=e=>{if(e instanceof Error)return e.stack},bC=(0,H.forwardRef)((e,t)=>{let n=(0,H.useMemo)(()=>Qe()??{},[]);(0,H.useEffect)(()=>{let D=Nn();C(!!D&&D.length>0)},[]);let[i,o]=(0,H.useState)("DISCONNECTED"),[r,s]=(0,H.useState)([]),[a,l]=(0,H.useState)(""),[c,d]=(0,H.useState)(!1),[p,m]=(0,H.useState)(!1),[h,g]=(0,H.useState)(!1),[T,x]=(0,H.useState)("none"),[y,v]=(0,H.useState)(0),[S,A]=(0,H.useState)([]),_=(0,H.useRef)([]);(0,H.useEffect)(()=>{_.current=S},[S]);let[R,C]=(0,H.useState)(!1),[M,I]=(0,H.useState)(()=>n.voiceName||"Zephyr"),[N,G]=(0,H.useState)(()=>n.customContext||""),[ye,fe]=(0,H.useState)(()=>n.systemInstruction||ii),[B,rt]=(0,H.useState)(()=>n.manualApiKey||""),[si,bt]=(0,H.useState)(()=>n.serperApiKey||""),[hn,Ic]=(0,H.useState)(()=>n.currentFolder||"/"),[Eo,Mc]=(0,H.useState)(()=>n.currentNote||null),[Zh,kc]=(0,H.useState)(()=>n.totalTokens||0),[kC,Dc]=(0,H.useState)({totalTokenCount:n.totalTokens||0}),[DC,Wh]=(0,H.useState)(0),[qr,Co]=(0,H.useState)(!1),[Uc,UC]=(0,H.useState)(()=>`topic-${Date.now()}-${Math.random().toString(36).slice(2,8)}`),gn=(0,H.useRef)(Uc);(0,H.useEffect)(()=>{gn.current=Uc},[Uc]);let tn=(0,H.useRef)(null),kn=(0,H.useRef)(null),jh=(0,H.useMemo)(()=>sn(),[]),he=(0,H.useCallback)((D,O="info",q,U)=>{s(V=>[...V,{id:Math.random().toString(36).slice(2,11),message:D,timestamp:new Date,type:O,duration:q,errorDetails:U}])},[]),eg=D=>{if(D)A(D),C(!1),he("Archived conversation restored","info"),m(!1);else{let O=Nn();if(O&&O.length>0){let q=O.map((U,V)=>({id:`chat-${V}`,role:"user",text:U,isComplete:!0,timestamp:Date.now()-(O.length-V)*1e3,topicId:gn.current}));A(q),C(!1),he("Chat history restored","info")}}},LC=()=>{A([{id:"welcome-init",role:"system",text:"HERMES INITIALIZED.",isComplete:!0,timestamp:Date.now(),topicId:gn.current}]),C(!1),he("Conversation reset","info")};(0,H.useEffect)(()=>{let D=S[S.length-1];if(D?.role==="system"&&D.toolData?.name==="topic_switch"){console.warn("[HISTORY] EVENT: topic_switch detected - Topic switch triggered");let O=D.topicId||gn.current,q=`topic-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;UC(q),console.warn(`[HISTORY] Topic switch: ${O} -> ${q}`);let U=S.filter(se=>se.id!=="welcome-init"&&se.id!==D.id&&se.topicId===O),_e=Qe()?.chatHistoryFolder||"chat-history",qe={transcripts:U,chatHistoryFolder:_e,textInterface:kn.current,topicId:O};Uh(qe).then(se=>{if(se.success)se.skipped?he(se.message,"info"):(he(se.message,"action"),A(Ne=>[...Ne,{id:`archived-${Date.now()}`,role:"system",text:`\u{1F4C1} Topic switch - conversation archived: ${se.message}`,timestamp:Date.now(),isComplete:!0,topicId:q}]));else{let Ne={toolName:"persistConversationHistory",content:`History length: ${U.length} entries`,contentSize:JSON.stringify(U).length,stack:se.error,apiCall:"archiveConversation"};he(`Persistence Failure: ${se.message}`,"error",void 0,Ne)}}).catch(se=>{let Ne=wc(se),ai={toolName:"persistConversationHistory",content:`History length: ${U.length} entries`,contentSize:JSON.stringify(U).length,stack:Ne,apiCall:"archiveConversation"};he(`Persistence Failure: ${Ne}`,"error",void 0,ai)})}},[S,he]),(0,H.useEffect)(()=>{(async()=>{try{await ST();let D=Rn();Wh(D.length),he("HERMES_OS: Modules online.","info");let O=Nn();S.length===0&&(!O||O.length===0)&&A([{id:"welcome-init",role:"system",text:"HERMES INITIALIZED.",isComplete:!0,timestamp:Date.now(),topicId:gn.current}])}catch(D){he(`Initialization failed: ${wc(D)}`,"error")}})()},[he]),(0,H.useEffect)(()=>{Xl({voiceName:M,customContext:N,systemInstruction:ye,manualApiKey:B,serperApiKey:si,currentFolder:hn,currentNote:Eo,totalTokens:Zh})},[M,N,ye,B,si,hn,Eo,Zh]),(0,H.useEffect)(()=>{let O=!(B||"").trim();Co(O)},[B]),(0,H.useEffect)(()=>{let D=()=>{(async()=>{let U=await Ql();U&&(I(U.voiceName||"Zephyr"),G(U.customContext||""),fe(U.systemInstruction||ii),rt(U.manualApiKey||""),bt(U.serperApiKey||""),(U.manualApiKey||"").trim()&&qr&&(Co(!1),he("API key configured successfully","success")))})()},O=U=>{I(U.voiceName||"Zephyr"),G(U.customContext||""),fe(U.systemInstruction||ii),rt(U.manualApiKey||""),bt(U.serperApiKey||""),(U.manualApiKey||"").trim()&&qr&&(Co(!1),he("API key configured successfully","success"))};window.hermesSettingsUpdate=O;let q=setInterval(D,2e3);return()=>{clearInterval(q),delete window.hermesSettingsUpdate}},[qr,he]);let PC=async()=>{i==="CONNECTED"?ha():await Lc()};(0,H.useImperativeHandle)(t,()=>({startSession:Lc,stopSession:ha,toggleSession:PC})),(0,H.useEffect)(()=>()=>{tn.current&&(tn.current.stop(),tn.current=null)},[]);let Br=(0,H.useCallback)(async()=>{let D=_.current;console.warn("[HISTORY] EVENT: end_conversation - Session ending (archiveCurrentConversation)");let q=Qe()?.chatHistoryFolder||"chat-history",U={transcripts:D,chatHistoryFolder:q,textInterface:kn.current};try{let V=await Uh(U);if(V.success)V.skipped?he(V.message,"info"):(he(V.message,"action"),A(_e=>[..._e,{id:`archived-${Date.now()}`,role:"system",text:`\u{1F4C1} Conversation archived: ${V.message}`,timestamp:Date.now(),isComplete:!0,topicId:gn.current}]));else{let _e={toolName:"persistConversationHistory",content:`History length: ${D.length} entries`,contentSize:JSON.stringify(D).length,stack:V.error,apiCall:"archiveConversation"};he(`Persistence Failure: ${V.message}`,"error",void 0,_e)}}catch(V){let _e=wc(V),qe={toolName:"persistConversationHistory",content:`History length: ${D.length} entries`,contentSize:JSON.stringify(D).length,stack:_e,apiCall:"archiveConversation"};he(`Persistence Failure: ${_e}`,"error",void 0,qe)}},[he]),Bi=(0,H.useCallback)((D,O)=>{A(q=>{if(O?.id){let U=q.findIndex(V=>V.toolData?.id===O.id);if(U!==-1){let V=[...q];return V[U]={...V[U],text:D,toolData:{...V[U].toolData,...O,status:O.status||"success"}},V}}return[...q,{id:"sys-"+Date.now(),role:"system",text:D,isComplete:!0,toolData:O,timestamp:Date.now(),topicId:gn.current}]}),Wh(Rn().length)},[]),FC=(0,H.useCallback)(async(D,O)=>{try{return await ho("download_image",{imageUrl:D.url,title:D.title,query:D.query||D.originalQuery||"image",index:O+1},{onLog:()=>{},onSystem:Bi,onFileState:()=>{}})}catch(q){throw console.error("Failed to download image:",q),q}},[Bi]),OC=(0,H.useMemo)(()=>({onStatusChange:D=>{o(D),D==="CONNECTED"?he("UPLINK ESTABLISHED.","info"):D==="DISCONNECTED"&&(x("none"),v(0))},onLog:(D,O,q,U)=>he(D,O,q,U),onTranscription:(D,O,q)=>{x(q?"none":D),A(U=>{let V=U.reduceRight((qe,se,Ne)=>qe!==-1?qe:se.role===D&&!se.isComplete?Ne:-1,-1);if(V!==-1){let qe=[...U];return qe[V]={...qe[V],text:O||qe[V].text,isComplete:q},qe}let _e={id:Math.random().toString(36).slice(2,11),role:D,text:O,isComplete:q,timestamp:Date.now(),topicId:gn.current};return[...U,_e]})},onSystemMessage:Bi,onInterrupted:()=>{x("none"),v(0)},onFileStateChange:(D,O)=>{Ic(D);let q=Array.isArray(O)?O:O?[O]:[];q.length>0&&Mc(q[q.length-1])},onUsageUpdate:D=>{Dc(D);let O=D.totalTokenCount;O!==void 0&&kc(O)},onVolume:D=>v(D),onArchiveConversation:Br}),[he,jh,Bi,Br]);(0,H.useEffect)(()=>{let D=B.trim();D&&!kn.current&&(kn.current=new ia({onLog:(O,q,U,V)=>he(O,q,U,V),onTranscription:(O,q,U)=>{A(V=>{let _e=V.reduceRight((se,Ne,ai)=>se!==-1?se:Ne.role===O&&!Ne.isComplete?ai:-1,-1);if(_e!==-1){let se=[...V];if(se[_e]={...se[_e],text:q||se[_e].text,isComplete:U},O==="user"&&U&&q.trim()){let ai=[...Nn(),q];Rp(ai)}return se}let qe={id:Math.random().toString(36).slice(2,11),role:O,text:q,isComplete:U,timestamp:Date.now(),topicId:gn.current};if(O==="user"&&U&&q.trim()){let Ne=[...Nn(),q];Rp(Ne)}return[...V,qe]})},onSystemMessage:Bi,onFileStateChange:(O,q)=>{Ic(O);let U=Array.isArray(q)?q:q?[q]:[];U.length>0&&Mc(U[U.length-1])},onUsageUpdate:O=>{Dc(O);let q=O.totalTokenCount;q!==void 0&&kc(q)},onArchiveConversation:Br}),kn.current.initialize(D,{voiceName:M,customContext:N,systemInstruction:ye},{folder:hn,note:Eo}))},[B,M,N,ye,hn,Eo,he,Bi,Br]);let Lc=async()=>{try{console.warn("[HISTORY] EVENT: start_conversation - Session started");let D=B.trim();if(!D){Co(!0);return}window.aistudio&&!await window.aistudio.hasSelectedApiKey()&&await window.aistudio.openSelectKey(),tn.current=new lc(OC),await tn.current.start(D,{voiceName:M,customContext:N,systemInstruction:ye},{folder:hn,note:Eo})}catch(D){let O={toolName:"GeminiVoiceAssistant",content:`Voice Name: ${M}
Custom Context: ${N}
System Instruction: ${ye}`,contentSize:M.length+N.length+ye.length,stack:GF(D),apiCall:"startSession"};he(`Uplink Error: ${wc(D)}`,"error",void 0,O),o("ERROR")}},ha=()=>{tn.current&&(tn.current.stop(),tn.current=null,x("none"),v(0))},HC=async D=>{if(D.preventDefault(),!a.trim())return;let O=a.trim();l(""),i==="CONNECTED"&&tn.current&&(tn.current.stop(),tn.current=null,x("none"),v(0));let q=B.trim();if(!q){Co(!0);return}kn.current||(kn.current=new ia({onLog:(U,V,_e,qe)=>he(U,V,_e,qe),onTranscription:(U,V,_e)=>{A(qe=>{let se=qe.reduceRight((Ne,ai,GC)=>Ne!==-1?Ne:ai.role===U&&!ai.isComplete?GC:-1,-1);if(se!==-1){let Ne=[...qe];return Ne[se]={...Ne[se],text:V||Ne[se].text,isComplete:_e},Ne}return[...qe,{id:Math.random().toString(36).slice(2,11),role:U,text:V,isComplete:_e,timestamp:Date.now(),topicId:gn.current}]})},onSystemMessage:Bi,onFileStateChange:(U,V)=>{Ic(U);let _e=Array.isArray(V)?V:V?[V]:[];_e.length>0&&Mc(_e[_e.length-1])},onUsageUpdate:U=>{Dc(U),U.totalTokenCount!==void 0&&kc(U.totalTokenCount)},onArchiveConversation:Br}),kn.current.initialize(q,{voiceName:M,customContext:N,systemInstruction:ye},{folder:hn,note:Eo})),kn.current.sendMessage(O)};return(0,en.jsx)("div",{className:`hermes-root flex flex-col overflow-hidden ${jh?"":"standalone"}`,children:qr?(0,en.jsx)(_C,{onApiKeySave:D=>{rt(D),he("API key saved successfully","success"),Co(!1)}}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(WE,{isOpen:c,onClose:()=>d(!1),voiceName:M,setVoiceName:I,customContext:N,setCustomContext:G,systemInstruction:ye,setSystemInstruction:fe,manualApiKey:B,setManualApiKey:rt,serperApiKey:si,setSerperApiKey:bt,onUpdateApiKey:()=>window.aistudio?.openSelectKey()}),(0,en.jsx)(ZE,{status:i,showLogs:h,onToggleLogs:()=>g(!h),onOpenSettings:()=>d(!0),onOpenHistory:()=>m(!p),isListening:i==="CONNECTED",onStopSession:ha,onResetConversation:LC,transcripts:S}),p?(0,en.jsx)(wC,{isActive:!0,onRestoreConversation:eg}):(0,en.jsx)(EC,{showKernel:h,transcripts:S,hasSavedConversation:R,onRestoreConversation:eg,logs:r,usage:kC,onFlushLogs:()=>s([]),fileCount:DC,onImageDownload:FC}),(0,en.jsx)(CC,{inputText:a,setInputText:l,onSendText:HC,isListening:i==="CONNECTED",onStartSession:Lc,onStopSession:ha,status:i,activeSpeaker:T,volume:y,hasApiKey:!qr})]})})});bC.displayName="App";var NC=bC;var Qh=J(te(),1),qi="hermes-voice-assistant",bc=class extends RC.ItemView{constructor(n){super(n);this.root=null;this.appRef=Xh.default.createRef()}getViewType(){return qi}getDisplayText(){return"Hermes voice assistant"}getIcon(){return"mic-vocal"}async onOpen(){let n=this.containerEl.children[1];n.empty();let i=n.createDiv({cls:"hermes-root obsidian"});this.root=(0,IC.createRoot)(i),this.root.render((0,Qh.jsx)(Xh.default.StrictMode,{children:(0,Qh.jsx)(NC,{ref:this.appRef})}))}async onClose(){this.root&&(this.root.unmount(),this.root=null)}startSession(){this.appRef.current&&this.appRef.current.startSession&&this.appRef.current.startSession()}stopSession(){this.appRef.current&&this.appRef.current.stopSession&&this.appRef.current.stopSession()}toggleSession(){this.appRef.current&&this.appRef.current.toggleSession&&this.appRef.current.toggleSession()}};mt();var mn=require("obsidian");var qF=["Kore","Puck","Charon","Fenrir","Zephyr"],ma={voiceName:"Zephyr",customContext:"",systemInstruction:"",manualApiKey:"",serperApiKey:"",chatHistoryFolder:"chat-history"},Nc=class extends mn.PluginSettingTab{constructor(n,i){super(n,i);this.plugin=i}display(){let{containerEl:n}=this;n.empty(),n.classList.add("hermes-settings"),new mn.Setting(n).setName("Voice").setDesc("Select the voice persona for the assistant").addDropdown(d=>{qF.forEach(p=>{d.addOption(p,p)}),d.setValue(this.plugin.settings?.voiceName||ma.voiceName).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.voiceName=p,await this.plugin.saveSettings())})}),new mn.Setting(n).setName("Custom context").setDesc("Define specific behaviors or rules for the assistant (added to every session)").addTextArea(d=>{d.setPlaceholder("Define specific behaviors, personalities, or rules for the AI...").setValue(this.plugin.settings?.customContext||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.customContext=p,await this.plugin.saveSettings())}),d.inputEl.rows=4,d.inputEl.cols=50});let i=document.createDocumentFragment();i.createSpan({text:"Core logic instructions for the AI assistant"}),i.createEl("br");let o=i.createEl("a",{text:"Reset to default"});o.addClass("hermes-reset-link"),o.addEventListener("click",()=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=ii,this.plugin.saveSettings().then(()=>{this.display()}))}),new mn.Setting(n).setName("System instructions").setDesc(i).addTextArea(d=>{d.setPlaceholder("Core logic instructions...").setValue(this.plugin.settings?.systemInstruction||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.systemInstruction=p,await this.plugin.saveSettings())}),d.inputEl.rows=6,d.inputEl.cols=50}),new mn.Setting(n).setName("Chat history folder").setDesc("Folder path where chat history will be saved").addText(d=>{d.setPlaceholder("chat-history").setValue(this.plugin.settings?.chatHistoryFolder||ma.chatHistoryFolder).onChange(async p=>{this.plugin.settings&&(this.plugin.settings.chatHistoryFolder=p,await this.plugin.saveSettings())})}),new mn.Setting(n).setName("API authentication").setHeading(),new mn.Setting(n).setName("Gemini API key").setDesc("Enter your Gemini API key for the voice assistant").addText(d=>{d.setPlaceholder("Enter your Gemini API Key...").setValue(this.plugin.settings?.manualApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.manualApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let r=document.createDocumentFragment();r.createSpan({text:"API key for image search. Get 2,500 free credits at "}),r.createEl("a",{href:"https://serper.dev/",text:"serper.dev"}).setAttr("target","_blank"),new mn.Setting(n).setName("Serper API key").setDesc(r).addText(d=>{d.setPlaceholder("Enter your Serper API Key...").setValue(this.plugin.settings?.serperApiKey||"").onChange(async p=>{this.plugin.settings&&(this.plugin.settings.serperApiKey=p,await this.plugin.saveSettings())}),d.inputEl.type="password"});let a=document.createDocumentFragment(),l=a.createSpan({text:"API keys are handled via manual entry. "}),c=a.createEl("a",{href:"https://ai.google.dev/gemini-api/docs/billing",text:"Learn more about billing."});c.setAttr("target","_blank"),l.append(c),new mn.Setting(n).setDesc(a)}};var Rc=class extends MC.Plugin{constructor(){super(...arguments);this.settings=ma}async onload(){pT(this),await this.loadSettings();let n=await hT();n?(this.settings={...this.settings,...n},(!this.settings.systemInstruction||this.settings.systemInstruction.trim()==="")&&(this.settings.systemInstruction=ii),await this.saveSettings()):(this.settings.systemInstruction=ii,await this.saveSettings()),this.addSettingTab(new Nc(this.app,this)),this.registerView(qi,i=>new bc(i)),this.addRibbonIcon("mic-vocal","Hermes voice assistant",()=>{this.activateView()}),this.addCommand({id:"open-hermes-voice",name:"Open Hermes assistant",callback:()=>{this.activateView()}}),this.addCommand({id:"start-hermes-conversation",name:"Start Hermes conversation",callback:()=>{this.startConversation()}}),this.addCommand({id:"stop-hermes-conversation",name:"Stop Hermes conversation",callback:()=>{this.stopConversation()}}),this.addCommand({id:"toggle-hermes-conversation",name:"Toggle Hermes conversation",callback:()=>{this.toggleConversation()}})}async activateView(){let{workspace:n}=this.app,i=null,o=n.getLeavesOfType(qi);o.length>0?i=o[0]:(i=n.getRightLeaf(!1),i&&await i.setViewState({type:qi,active:!0})),i&&n.revealLeaf(i)}async startConversation(){await this.activateView();let{workspace:n}=this.app,i=n.getLeavesOfType(qi);if(i.length>0){let r=i[0].view;if(r.startSession)r.startSession();else{let s=r.containerEl.querySelector('[data-action="start-session"]');s instanceof HTMLElement&&s.click()}}}stopConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(qi);if(i.length>0){let r=i[0].view;if(r.stopSession)r.stopSession();else{let s=r.containerEl.querySelector('[data-action="stop-session"]');s instanceof HTMLElement&&s.click()}}}async toggleConversation(){let{workspace:n}=this.app,i=n.getLeavesOfType(qi);if(i.length>0){let r=i[0].view;r.toggleSession?r.toggleSession():r.containerEl.querySelector('[data-action="stop-session"]')instanceof HTMLElement?this.stopConversation():await this.startConversation()}}onunload(){}async loadSettings(){this.settings=Object.assign({},ma,await this.loadData())}async saveSettings(){await Xl(this.settings),typeof window<"u"&&window.hermesSettingsUpdate&&window.hermesSettingsUpdate(this.settings)}};
/*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT */
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
